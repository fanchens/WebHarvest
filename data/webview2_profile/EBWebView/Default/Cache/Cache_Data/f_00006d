"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["58522"],{267542:function(e,t,i){i.d(t,{b:function(){return s}});var l=i(563097),n=i(88648),o=i(505575),a=i(710199),r=i(441447),d=i(680319),u=i(614316);let s=e=>{let{player:t}=(0,o.n)(),{useNewUserSoundGuide:i,isActive:s=!1,isShowGuide:c}=e,v=n.useRef(!0);return n.useEffect(()=>{if(t){let e=()=>{r.emit(r.EVENT.videoPlay)},l=()=>{var e,l;if(!!t.paused)null!==(l=(e=window).__INVISIBLE_QUERY__)&&void 0!==l||(e.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1,(0,u.MR)(),r.emit(r.EVENT.videoPlayPrevent),v.current&&!i&&setTimeout(()=>{t.muted=!0,t.play(),v.current=!1},10)};return t.on(a.FP.AUTOPLAY_WAS_PREVENTED,l),t.on(a.FP.AUTOPLAY_STARTED,e),()=>{t.off(a.FP.AUTOPLAY_WAS_PREVENTED,l),t.off(a.FP.AUTOPLAY_STARTED,e)}}},[t,i]),i?(0,l.jsx)(d.V8,{player:t,isActive:s,isShowGuide:c}):null}},171941:function(e,t,i){i.d(t,{n:function(){return u}});var l=i("563097"),n=i("88648"),o=i("505575"),a=i("520739"),r=i("878389");let d=(0,n.forwardRef)((e,t)=>(0,l.jsx)("svg",(0,r._)((0,a._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,l.jsx)("path",{d:"M24.932 16.444c0-4.687-3.89-8.444-8.634-8.444a8.679 8.679 0 0 0-7.207 3.79v-1.558a.99.99 0 0 0-1.98 0v4.038c0 .547.444.99.99.99h4.038a.99.99 0 0 0 0-1.98h-1.646c1.137-1.963 3.304-3.3 5.804-3.3 3.7 0 6.655 2.918 6.655 6.464 0 3.547-2.956 6.465-6.655 6.465-2.963 0-5.459-1.88-6.326-4.453a.99.99 0 0 0-1.876.633c1.138 3.38 4.39 5.8 8.202 5.8 4.746 0 8.635-3.758 8.635-8.445z",fill:"#fff"})}))),u=(0,i("559947").rW)(e=>{let{player:t}=(0,o.n)(),i=n.useCallback(()=>{t.refresh()},[]);return(0,l.jsx)("div",{style:{cursor:"pointer"},onClick:i,className:(null==e?void 0:e.className)||"",children:(0,l.jsx)(d,{})})})},985455:function(e,t,i){i.r(t),i.d(t,{GlobalControlPlugin:function(){return a}});var l=i(88648),n=i(505575),o=i(441447);let a=(0,l.memo)(function(){let{player:e}=(0,n.n)();return(0,l.useEffect)(()=>{let t=o.listen(o.EVENT.livePause,()=>{e.pause()});return()=>{t()}},[]),null});t.default=a},456749:function(e,t,i){i(874386);var l=i(88648);t.Z=e=>{let[t,i]=(0,l.useState)(!1),{isActive:n}=e;return(0,l.useEffect)(()=>{let e=null,t=()=>{e=setTimeout(()=>{i(!0)},2e3)},l=()=>{e&&(clearTimeout(e),i(!1)),t()};if(n)return l(),document.addEventListener("mousemove",l),document.addEventListener("mousedown",l),document.addEventListener("keydown",l),()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mousedown",l),document.removeEventListener("keydown",l),e&&clearTimeout(e)}},[n]),{inActive:t}}},486992:function(e,t,i){i.r(t),i.d(t,{default:function(){return f},NewPlayerErrorCover:function(){return _}}),i("874386");var l=i("563097"),n=i("713097"),o=i.n(n),a=i("88648"),r=i("505575"),d=i("520739"),u=i("878389");let s=(0,a.forwardRef)((e,t)=>(0,l.jsx)("svg",(0,u._)((0,d._)({width:56,height:56,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M56 28c0 15.464-12.536 28-28 28S0 43.464 0 28 12.536 0 28 0s28 12.536 28 28zm-33.25-5.95c0 1.74-1.175 3.15-2.625 3.15S17.5 23.79 17.5 22.05s1.175-3.15 2.625-3.15 2.625 1.41 2.625 3.15zm5.478 9.683c-4.014 0-7.623 1.74-10.057 4.5a1.75 1.75 0 1 0 2.625 2.315c1.784-2.023 4.445-3.315 7.432-3.315 2.993 0 5.66 1.298 7.444 3.329a1.75 1.75 0 0 0 2.629-2.31c-2.435-2.771-6.051-4.519-10.073-4.519zm7.607-6.533c1.45 0 2.625-1.41 2.625-3.15s-1.175-3.15-2.625-3.15-2.625 1.41-2.625 3.15 1.175 3.15 2.625 3.15z",fill:"#FFFFFF57",fillOpacity:".15"})}))),c=(0,a.forwardRef)((e,t)=>(0,l.jsx)("svg",(0,u._)((0,d._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,l.jsx)("path",{d:"M6.255 8a7 7 0 1 1-.746 6.625 1 1 0 1 0-1.854.75A9.003 9.003 0 0 0 21 12 9 9 0 0 0 5 6.343V5a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1h4a1 1 0 0 0 0-2H6.255z",fill:"#FFFFFFE5"})})));var v=i("414626");let _=e=>{let{className:t,onRetry:i,onlyManulRetry:n=!1}=e,{player:d}=(0,r.n)(),[u,_]=a.useState(!1),[f,m]=a.useState(n),g=a.useCallback(()=>{i&&i(),null==d||d.retry()},[]),I=a.useCallback(e=>{m(!0)},[]);return a.useEffect(()=>{!u&&!n&&(d.once("error",I),g(),_(!0))},[u]),a.useEffect(()=>()=>{d.off("error",I)},[]),f?(0,l.jsxs)("div",{className:o()(v.default.errorCover,t),children:[(0,l.jsx)("div",{children:(0,l.jsx)(s,{})}),(0,l.jsx)("div",{className:v.default.text,children:(0,l.jsx)("span",{children:"服务器开小差了，点击刷新重试"})}),(0,l.jsxs)("div",{className:v.default.refresh,onClick:g,children:[(0,l.jsx)("div",{className:v.default.refresh_svg,children:(0,l.jsx)(c,{})}),(0,l.jsx)("span",{className:v.default.refresh_text,children:"刷新"})]})]}):null};var f=_},289061:function(e,t,i){i.d(t,{X:function(){return k}});var l=i("520739"),n=i("878389");i("874386"),i("250440");var o=i("563097"),a=i("713097"),r=i.n(a),d=i("645260"),u=i.n(d),s=i("96008"),c=i.n(s),v=i("88648"),_=i("321908"),f=i("57094"),m=i("204405"),g=i("69360"),I=i("728641"),p=i("490139"),E=i("829021"),h=i("432431"),y=i("718770"),N=i("374852"),A=i("437998"),P={DEFAULT:0,0:"DEFAULT",GUEST:1,1:"GUEST"},D=e=>{let{type:t=0,isLock:i,cls:l,handleClick:n,joinText:a}=e;return(0,o.jsxs)("div",{onClick:n,className:r()(A.default.joinContainer,l),"data-e2e":"mic_seat",children:[(0,o.jsx)("div",{className:A.default.joinIcon,children:(0,o.jsx)("span",{className:r()(A.default.joinSvg,{[A.default.lockIcon]:i,[A.default.guestLockIcon]:1===t&&i,[A.default.joinGuest]:1===t})})}),(0,o.jsx)("span",{className:r()(A.default.joinText,"joinTextContent"),children:a})]})},T=i("1254"),x=i("243619"),C=i("408573"),b=i("215353"),S=i("782580");let k=e=>{var t,i,a,d;let{user:s,className:A,onJoinRoom:k,disable:L,onUserClick:V,isLock:O,showAnchorLabel:w,playModesPC:R,orderSingInfo:j,setFloatModal:M,avatarBorderColor:G,joinText:U=x.p.JOIN_CHAT,setRankParam:B,setRankListShow:F,teamfightInfo:H,guestBattleInfo:W,giftLabelBackgroundColor:Y,selfUidStr:Z,giftLabelIcon:z="",giftLabelStyle:J={},allowSendGiftGuest:Q=!0,onHover:K,isMvp:q,isRed:X,mvpIcon:$,position:ee,singV3Ab:et="0",animationMap:ei,mvpUseridRef:el,mvpChangeRef:en,audioPower:eo,isCrossLink:ea=!1,roomBattleType:er="pk",dynamic:ed=!1,isAudioStage:eu=!1,giftLabelMerge:es=!1}=e,[ec,ev]=v.useState(!1);v.useRef("");let e_=v.useMemo(()=>(null==s?void 0:s.is_background)===1,[s]),ef=v.useMemo(()=>(null==s?void 0:s.silence_status)!==_.Ai.STATUS_UNSILENCE,[s]),{isGuestBattle:em}=(0,N.Z)({guestBattleInfo:W}),{giftNum:eg,isGroupFight:eI}=(0,T.Z)({listUser:s,teamfightInfo:H,selfUidStr:Z,guestBattleInfo:W,isCrossLink:ea,roomBattleType:er}),ep=v.useCallback(e=>{e.talk>0?ev(!0):!e.talk&&ev(!1)},[]),{gameType:eE}=(0,b.zL)(),eh=v.useMemo(()=>{var e,t,i,o,a,r,d;let u=[];return j&&(null==j||null===(e=j.user_microphone_list)||void 0===e||e.forEach(e=>{if(e.is_singing){var t,i,o,a;(null==e?void 0:null===(t=e.microphone_list)||void 0===t?void 0:t[0].title_sponsor)&&(u=[(0,n._)((0,l._)({},null==e?void 0:null===(i=e.microphone_list)||void 0===i?void 0:i[0]),{toUserId:null!==(a=null==e?void 0:null===(o=e.order_user)||void 0===o?void 0:o.id_str)&&void 0!==a?a:""})])}})),W&&(u=null==W?void 0:null===(t=W.results)||void 0===t?void 0:t.filter(e=>{var t,i;return String(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.id_str)===String(null==s?void 0:null===(i=s.user)||void 0===i?void 0:i.id_str)},[])),H&&(eE===C.D$.ROOMBATTLE?null==H||null===(r=H.team_infos)||void 0===r||null===(a=r.filter(e=>(null==e?void 0:e.team_id)==="1"))||void 0===a||null===(o=a[0])||void 0===o||null===(i=o.players)||void 0===i||i.forEach(e=>{var t;(null==e?void 0:e.title_sponsor)&&String(null==e?void 0:e.user_id)===String(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.id_str)&&(u=[e])}):null==H||null===(d=H.team_infos)||void 0===d||d.forEach(e=>{var t;null==e||null===(t=e.players)||void 0===t||t.forEach(e=>{var t;(null==e?void 0:e.title_sponsor)&&String(null==e?void 0:e.user_id)===String(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.id_str)&&(u=[e])})})),u||[]},[W,H,j]),ey=e=>{null==e||e.stopPropagation(),B({teamfight_id:eI?null==H?void 0:H.teamfight_id_str:null==W?void 0:W.battle_id_str,user:null==s?void 0:s.user,isGuestContribution:em}),null==F||F(!0)};v.useEffect(()=>s?(null==eo||eo.on(null==s?void 0:s.linkmic_id_str,ep),()=>{ev(!1),null==eo||eo.off(null==s?void 0:s.linkmic_id_str,ep)}):c(),[ep,null==s?void 0:s.linkmic_id_str,eo]);let eN=v.useMemo(()=>{if(!em||!(null==s?void 0:s.user.id_str)||!(null==W?void 0:W.battle_id))return"";let e=null==W?void 0:W.status,t=null,i=null==ei?void 0:ei.get(`${null==s?void 0:s.user.id_str}_${null==W?void 0:W.battle_id}`);return(null==W||W.results.forEach(i=>{var l,n,o;if(String(i.guest_id)===String(null==s?void 0:null===(l=s.user)||void 0===l?void 0:l.id_str)){if([1,4].includes(Number(e))&&(null==i?void 0:i.role)===1)switch(Number(null==i?void 0:null===(o=i.crown_info)||void 0===o?void 0:null===(n=o.cur_grade)||void 0===n?void 0:n.level)){case 1:t="CrystalCrown";break;case 2:t="GemstoneCrown";break;case 3:t="DiamondCrown";break;default:t="Knuckle"}[1,4].includes(Number(e))&&(null==i?void 0:i.role)===2&&(t="HeartBreak"),(null==i?void 0:i.role)===0&&(t=""),2===Number(e)&&(null==i?void 0:i.role)===1&&(t="Victory")}}),i===t)?"":(null==ei||ei.set(`${null==s?void 0:s.user.id_str}_${null==W?void 0:W.battle_id}`,t),t)},[null==W?void 0:W.status,null==W?void 0:W.results,em,null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.id_str,null==W?void 0:W.battle_id]),eA=v.useMemo(()=>{if(!em)return"";let e="";return null==W||W.results.forEach(t=>{var i,l,n;if(String(t.guest_id)===String(null==s?void 0:null===(i=s.user)||void 0===i?void 0:i.id_str)){if((null==t?void 0:t.role)===1)switch(Number(null==t?void 0:null===(n=t.crown_info)||void 0===n?void 0:null===(l=n.cur_grade)||void 0===l?void 0:l.level)){case 1:e="CrystalCrown";break;case 2:e="GemstoneCrown";break;case 3:e="DiamondCrown";break;default:e="Knuckle"}(null==t?void 0:t.role)===2&&(e="HeartBreak")}}),e},[s,W,em]),eP=v.useMemo(()=>(null==R?!!void 0:!!R.includes(h.V0.LinkmicPlayMode_OrderSing))||!1,[R]),eD=v.useMemo(()=>{var e;let t={};return null==j||j.user_microphone_list.forEach(e=>{var i,l,n,o,a;t[null==e?void 0:null===(i=e.order_user)||void 0===i?void 0:i.id_str]={userId:null==e?void 0:null===(l=e.order_user)||void 0===l?void 0:l.id_str,is_singing:null==e?void 0:e.is_singing,currentSingItem:null==j?void 0:j.current_sing_item,golden_microphone_icon:null==j?void 0:j.golden_microphone_icon,live_linkmic_order_sing_micro_opt:null==j?void 0:j.live_linkmic_order_sing_micro_opt,goldenCount:null===(a=e.microphone_list)||void 0===a?void 0:null===(o=a.filter(e=>e.microphone_type===f.W5.GOLDEN_MICROPHONE))||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.micro_phone_num}}),t[null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.id_str]},[j,s]),eT=v.useCallback(e=>{e.stopPropagation(),M(E.uH.ORDER_SING)},[M]),ex=(null===(i=(null!==(d=null==W?void 0:W.results)&&void 0!==d?d:[]).filter(e=>{var t,i;return String(e.guest_id)===(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.id_str)||String(e.guest_id_str)===(null==s?void 0:null===(i=s.user)||void 0===i?void 0:i.id_str)}))||void 0===i?void 0:i.length)>0,eC=v.useRef(),eb=(0,S.useInLiveAudioLayoutOptAB)();return s?(0,o.jsxs)("div",{onClick:V,className:r()(y.default.userContainer,A,{[y.default.dynamicAudioItem]:ed&&!eu,[y.default.audioStageUserScale]:ed&&eu,[y.default.infoNoShrink]:eb}),onMouseEnter:e=>null==K?void 0:K(e,eC),ref:eC,"data-e2e":"mic_seat",children:[(0,o.jsx)(g.b,{img:u()(s,"user.avatar_large.url_list[0]",""),isTalking:ec&&!ef,gender:null===(a=s.user)||void 0===a?void 0:a.gender,user:s,className:r()(y.default.avatar,{[y.default.userAdjust]:ed&&eu}),isLeave:e_,borderColor:G,battleIcon:eA,battleAnimation:eN,showAnchorLabel:w&&!eP,isMvp:q,mvpIcon:$,mvpUseridRef:el,mvpChangeRef:en,titleSponsor:eh}),eu?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(I._,{isMute:ef,noName:!0,className:y.default.userNameRight})}):(0,o.jsxs)(o.Fragment,{children:[eP&&(0,o.jsx)(p._,{className:y.default.micphoneLabel,onClick:eT,isAnchor:w&&!eP,labelInfo:eD,singV3Ab:et,user:s,position:ee,titleSponsor:eh}),es?(0,o.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,o.jsx)("div",{style:{flex:"1 1 0%",minWidth:0},children:(0,o.jsx)(I._,{isMute:ef,className:y.default.userName,userName:u()(s,"user.nickname",""),onClick:ey})}),Q&&(0,o.jsx)("div",{style:{flex:"0 0 auto",marginLeft:8},children:(0,o.jsx)(m.X,{giftNum:eg,isJoinGuestBattle:ex,onClick:ey,showGiftIcon:!Y,background:Y,giftLabelIcon:z,type:em?m.l.GUEST:m.l.DEFAULT,giftLabelStyle:J,isMvp:q,isRed:X,mvpIcon:$,style:{position:"relative"},guestBattleInfo:W,user:s})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(I._,{isMute:ef,className:y.default.userName,userName:u()(s,"user.nickname",""),onClick:ey}),Q&&(0,o.jsx)(m.X,{giftNum:eg,isJoinGuestBattle:ex,onClick:ey,showGiftIcon:!Y,background:Y,giftLabelIcon:z,type:em?m.l.GUEST:m.l.DEFAULT,giftLabelStyle:J,isMvp:q,isRed:X,mvpIcon:$,style:{position:"relative"},guestBattleInfo:W,user:s})]})]})]}):(0,o.jsx)(D,{type:em?P.GUEST:P.DEFAULT,cls:r()(A,{[y.default.dynamicAudioItem]:ed,[y.default.infoNoShrink]:eb}),isLock:O,joinText:U,handleClick:L||O?c():k,"data-e2e":"mic_seat"})}},294631:function(e,t,i){i.d(t,{s:function(){return N}}),i("874386"),i("250440");var l=i("563097"),n=i("713097"),o=i.n(n),a=i("88648"),r=i("710199"),d=i("810724"),u=i("505575"),s=i("829021"),c=i("90845"),v=i("291870"),_=i("499198"),f=i("727795"),m=i("509090"),g=i("818597"),I=i.p+"media/bg.394717bcadc491f0.png",p=i("296208"),E=i("505002");let h={[s.yP.AUDIO_1V8]:80,[s.yP.AUDIO_1V8_STAGE]:80,[s.yP.AUDIO_GRID]:80,[s.yP.VIDEO_1V6]:42.5,[s.yP.VIDEO_DYNAMIC]:63.56,[s.yP.VIDEO_GRID]:62.45,[s.yP.VIDEO_6V6]:61,[s.yP.VIDEO_2V4V4]:50.6},y=16/9,N=e=>{let{isAdmin:t=!1,roomId:i="",layout:n,renderElement:N,className:A,isTheaterOn:P,statusText:D,teamfightInfo:T,onClickStatusBar:x,isPreview:C,incomingPlayer:b=null}=e,{eventStore:S,linkmicStore:k}=(0,g.o)(),{linkmicEvent:L}=S||{},V=a.useRef(),[O,w]=a.useState(y),{isInPunish:R,leftTeamScore:j,rightTeamScore:M}=(0,_.Z)({teamfightInfo:T}),{player:G}=(0,u.n)(),U=b||G,B=a.useCallback(()=>{var e,t;let i=null==U?void 0:null===(e=U.root)||void 0===e?void 0:e.clientWidth,l=null==U?void 0:null===(t=U.root)||void 0===t?void 0:t.clientHeight;return i&&l?i/l:y},[]),F=a.useCallback(()=>{clearTimeout(V.current),V.current=setTimeout(()=>{w(B())},50)},[]);a.useEffect(()=>(null==U||U.on(r.FP.FULLSCREEN_CHANGE,F),()=>{null==U||U.off(r.FP.FULLSCREEN_CHANGE,F)}),[]);let H=a.useCallback(()=>{w(B())},[]);a.useEffect(()=>(window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H)}),[]),a.useEffect(()=>{F()},[P]);let W=a.useMemo(()=>`${h[n]*y/O}%`,[O,n]),Y=a.useMemo(()=>null==T?void 0:T.status,[T]),Z=a.useCallback(()=>(0,l.jsx)("div",{className:v.default.source,children:(0,l.jsx)(c.Z,{teamFightInfo:T,eggModeInfo:null==k?void 0:k.eggModeInfo,leftPKScore:j,rightPKScore:M,showAroundFaceStatus:R})}),[j,M,R,null==k?void 0:k.eggModeInfo]),z=Y===d.Hj.LinkmicTeamfightStatus_PREPARE&&t,J=()=>(0,l.jsx)("div",{className:v.default.actionBar,onClick:()=>$(),children:"开始团战"}),{hideEgg:Q,isMutiEggTimeUseful:K}=(0,E.Z)(),q=a.useMemo(()=>(0,l.jsx)(p.Z,{isVideoGuropFight:!1,isGroupFight:!0,eggModeInfo:null==k?void 0:k.eggModeInfo}),[null==k?void 0:k.eggModeInfo]),X=a.useMemo(()=>{var e;return(0,l.jsxs)("div",{className:v.default.audioGridContainer,style:{width:W},children:[(0,l.jsx)("div",{className:o()(v.default.mediumAudioItem,v.default.anchorItem),children:N(0)}),(null==k?void 0:null===(e=k.eggModeInfo)||void 0===e?void 0:e.egg_info)&&K&&[d.Hj.LinkmicTeamfightStatus_PLAYING,d.Hj.LinkmicTeamfightStatus_PUNISHING].includes(Y)&&q,(0,l.jsxs)("div",{className:v.default.seatsGroupContainer,children:[(0,l.jsxs)("div",{className:v.default.topBar,children:[Z(),z?J():D&&!C&&(0,l.jsx)("div",{className:v.default.status,onClick:()=>null==x?void 0:x(),children:D})]}),[void 0,void 0].map((e,t)=>{var i;return(0,l.jsxs)("div",{className:v.default.gridsArea,children:[(null==k?void 0:null===(i=k.eggModeInfo)||void 0===i?void 0:i.egg_info)&&K&&[d.Hj.LinkmicTeamfightStatus_PLAYING,d.Hj.LinkmicTeamfightStatus_PUNISHING].includes(Y)&&(0,l.jsxs)("div",{className:Q?v.default.hide:v.default.show,children:[(0,l.jsx)("div",{className:v.default.eggLeftSide,style:{backgroundImage:`${0===t?"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))":"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}`}}),(0,l.jsx)("div",{className:v.default.eggRightSide,style:{backgroundImage:`${0===t?"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))":"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}`}})]}),(0,l.jsxs)("div",{className:v.default.gridsBox,children:[(0,l.jsx)("div",{className:v.default.grid,children:[void 0,void 0].map((e,i)=>(0,l.jsx)("div",{className:v.default.mediumAudioItem,children:N(4*i+1+2*t)},`${t}_${i}`))}),(0,l.jsx)("div",{className:v.default.grid,children:[void 0,void 0].map((e,i)=>(0,l.jsx)("div",{className:v.default.mediumAudioItem,children:N(4*i+2+2*t)},`${t}_${i}`))})]})]},t)})]})]})},[N,W,D,Z,Y,z,null==k?void 0:k.eggModeInfo]),$=()=>{null==L||L.liveGroupFightStart(),(0,f.lV)({room_id:i}).then(e=>{var t,i,l,n;(null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.prompts)?(m.F.info(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.prompts,null==U?void 0:U.root),null==L||L.liveGroupFightStartSuccess("fail_member_cnt")):null==L||L.liveGroupFightStartSuccess("success")})};return a.useEffect(()=>{null==k||k.setLayoutBackgroundImg(n===s.yP.AUDIO_1V8||n===s.yP.AUDIO_GRID||n===s.yP.AUDIO_1V8_STAGE?I:"")},[n]),(0,l.jsx)("div",{className:o()(v.default.container,A,{[v.default.audioBackground]:[s.yP.AUDIO_GRID,s.yP.AUDIO_1V8_STAGE,s.yP.AUDIO_1V8,s.yP.AUDIO_DOUBLE_C].includes(n)}),children:(n===s.yP.AUDIO_1V8||n===s.yP.AUDIO_GRID||n===s.yP.AUDIO_1V8_STAGE)&&X})}},420054:function(e,t,i){i.d(t,{PY:function(){return D}}),i(874386),i(250440);var l=i(563097),n=i(713097),o=i.n(n),a=i(88648),r=i(710199),d=i(505575),u=i(454194),s=i(829021),c=i(480814),v=i(727795),_=i(513081),f=i(779145),m=i.n(f),g=i(810724),I=i(499198),p=i(90845),E=i(509090),h=i(818597),y=i(296208),N=i(505002);let A={[s.yP.AUDIO_1V8]:50.4,[s.yP.AUDIO_GRID]:42,[s.yP.VIDEO_1V6]:42.5,[s.yP.VIDEO_1V8]:42.5,[s.yP.VIDEO_DYNAMIC]:63.56,[s.yP.VIDEO_GRID]:62.45,[s.yP.VIDEO_6V6]:61,[s.yP.VIDEO_1_V_8]:63.56,[s.yP.VIDEO_1_V_6]:63.56,[s.yP.VIDEO_1_V_3]:63.56,[s.yP.VIDEO_DYNAMIC_FLOAT]:32,[s.yP.VIDEO_T1_V_B8]:43},P=16/9,D=e=>{let{layout:t,renderElement:i,className:n,backgroundImg:f,isTheaterOn:D,micSeats:T,teamfightInfo:x,ext:C={},isAdmin:b=!1,roomId:S,onClickStatusBar:k,isPreview:L=!1,incomingPlayer:V=null}=e,{eventStore:O,linkmicStore:w}=(0,h.o)(),{linkmicEvent:R}=O||{},{isInPunish:j,leftTeamScore:M,rightTeamScore:G,statusTexting:U,redGroupSeats:B}=(0,I.Z)({teamfightInfo:x}),F=a.useRef(),[H,W]=a.useState(P),{player:Y}=(0,d.n)(),Z=V||Y,z=a.useCallback(()=>{var e,t;let i=null==Z?void 0:null===(e=Z.root)||void 0===e?void 0:e.clientWidth,l=null==Z?void 0:null===(t=Z.root)||void 0===t?void 0:t.clientHeight;return i&&l?i/l:P},[]),J=a.useCallback(()=>{clearTimeout(F.current),F.current=setTimeout(()=>{W(z())},50)},[]);a.useEffect(()=>(null==Z||Z.on(r.FP.FULLSCREEN_CHANGE,J),()=>{null==Z||Z.off(r.FP.FULLSCREEN_CHANGE,J)}),[]);let Q=a.useCallback(()=>{W(z())},[]);a.useEffect(()=>(window.addEventListener("resize",Q),()=>{window.removeEventListener("resize",Q)}),[]),a.useEffect(()=>{J()},[D]);let K=a.useMemo(()=>`${A[t]*P/H}%`,[H,t]),q=a.useMemo(()=>null==x?void 0:x.status,[x]),{hideEgg:X,isMutiEggTimeUseful:$}=(0,N.Z)(),ee=a.useMemo(()=>(0,l.jsx)(y.Z,{isVideoGuropFight:!0,isGroupFight:!0,eggModeInfo:null==w?void 0:w.eggModeInfo}),[null==w?void 0:w.eggModeInfo]);a.useEffect(()=>{q===g.Hj.LinkmicTeamfightStatus_FINISHED&&(null==w||w.setEggModeInfo({}))},[q]);let et=a.useCallback(()=>(0,l.jsx)("div",{className:u.default.sourceBar,children:[g.Hj.LinkmicTeamfightStatus_PLAYING,g.Hj.LinkmicTeamfightStatus_PUNISHING].includes(q)?(0,l.jsx)(p.Z,{teamFightInfo:x,eggModeInfo:null==w?void 0:w.eggModeInfo,leftPKScore:M,rightPKScore:G,showAroundFaceStatus:j}):(0,l.jsx)("div",{className:u.default.emptyBar})}),[M,G,j,K,q]),ei=()=>{null==R||R.liveGroupFightStart(),(0,v.lV)({room_id:S}).then(e=>{var t,i,l,n;(null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.prompts)?(E.F.info(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.prompts,null==Z?void 0:Z.root),null==R||R.liveGroupFightStartSuccess("fail_member_cnt")):null==R||R.liveGroupFightStartSuccess("success")})},el=()=>(0,l.jsx)("div",{className:u.default.actionBar,onClick:e=>{ei()},children:"开始团战"}),en=q===g.Hj.LinkmicTeamfightStatus_PREPARE&&b,eo=a.useMemo(()=>{var e,t;return(0,l.jsxs)("div",{className:o()(u.default.videoT1B8Container),style:{width:K},children:[(0,l.jsx)("div",{className:o()(u.default.anchor,"__clairvoyance"),children:i(0)}),(null==w?void 0:null===(e=w.eggModeInfo)||void 0===e?void 0:e.egg_info)&&$&&[g.Hj.LinkmicTeamfightStatus_PLAYING,g.Hj.LinkmicTeamfightStatus_PUNISHING].includes(q)&&ee,!L&&(0,l.jsxs)("div",{className:u.default.topBar,children:[et(),en?el():U&&(0,l.jsx)("div",{className:u.default.status,onClick:e=>{null==k||k(e)},children:U})]}),(0,l.jsxs)("div",{className:u.default.guests,children:[(null==w?void 0:null===(t=w.eggModeInfo)||void 0===t?void 0:t.egg_info)&&$&&[g.Hj.LinkmicTeamfightStatus_PLAYING,g.Hj.LinkmicTeamfightStatus_PUNISHING].includes(q)&&(0,l.jsxs)("div",{className:`${u.default.eggModeAnimate} ${X?u.default.hide:u.default.show}`,children:[(0,l.jsxs)("div",{className:u.default.eggModeAnimateChild,children:[(0,l.jsx)("div",{className:u.default.eggLeftSide,style:{backgroundImage:"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))"}}),(0,l.jsx)("div",{className:u.default.eggRightSide,style:{backgroundImage:"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))"}})]}),(0,l.jsxs)("div",{className:u.default.eggModeAnimateChild,children:[(0,l.jsx)("div",{className:u.default.eggLeftSide,style:{backgroundImage:"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}}),(0,l.jsx)("div",{className:u.default.eggRightSide,style:{backgroundImage:"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}})]})]}),[void 0,void 0].map((e,t)=>(0,l.jsx)("div",{className:u.default.gridRow,children:[void 0,void 0,void 0,void 0].map((e,n)=>{var a,r;let d=n+1+4*t;return(0,l.jsx)("div",{className:o()(u.default.videoItem,"videoItem","__clairvoyance",{[u.default.red]:B.includes(d)&&!(null==T?void 0:null===(a=T[d])||void 0===a?void 0:a.user),[u.default.blue]:!B.includes(d)&&!(null==T?void 0:null===(r=T[d])||void 0===r?void 0:r.user)}),children:i(d)},`${t}_${n}`)})},t))]})]})},[i,K,et,U,el,T,L,null==w?void 0:w.eggModeInfo]),[ea,er]=a.useState({}),ed=a.useRef(null);a.useEffect(()=>(ed.current=setTimeout(()=>{er({})},300),()=>{ed.current&&clearTimeout(ed.current)}),[H,t]);let eu=a.useMemo(()=>{try{var e;let t=document.getElementsByClassName("__clairvoyance");return null===(e=m()(t))||void 0===e?void 0:e.map(e=>(0,_._q)(null==Z?void 0:Z.root,e))}catch(e){return[]}},[T,H,t,ea]);return(0,l.jsxs)("div",{className:o()(u.default.container,n,{[u.default.audioBackground]:[s.yP.AUDIO_GRID,s.yP.AUDIO_1V8,s.yP.AUDIO_DOUBLE_C].includes(t),[u.default.video6v6Background]:t===s.yP.VIDEO_6V6}),children:[(e=>{if(e===s.yP.VIDEO_T1_V_B8)return eo;return null})(t),t===s.yP.VIDEO_T1_V_B8&&f&&(0,l.jsx)(c.Z,{backgoundImgSrc:f,clairvoyancePaths:eu})]})}},230372:function(e,t,i){i.d(t,{$:function(){return J},Z:function(){return Q}});var l=i("520739");i("675373"),i("874386"),i("250440"),i("429532"),i("819117");var n=i("563097"),o=i("88648"),a=i("710199"),r=i("877639"),d=i.n(r),u=i("146778"),s=i("89674"),c=i("581954"),v=i("289061"),_=i("829021"),f=i("456736"),m=i("135694"),g=i("505575"),I=i("342934"),p=i.p+"media/groupFightBg.394717bcadc491f0.png",E=i("881942"),h=i("768492"),y=i("230380"),N=i("374852"),A=i("294631");i("284961"),i("826893");var P=i("258827"),D=i("645260"),T=i.n(D),x=i("243619");let C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("https")?e:e.replace("http","https")},b=(e,t)=>{let{isGroupFight:i=!1,redGroupSeats:l=[],isGuestBattle:n=!1}=t;return n?"加入作战":i?`加入${l.includes(e)?"红队":"蓝队"}`:x.p.JOIN_CHAT},S=(e,t,i,l)=>{var n,o,a,r,d,u,s,c,v,_,f,m,g;let{isGuestBattle:I=!1}=l,p=I?C(T()(e,"ui_info.score_icon.url_list[0]","")):"",E={},h=null==i?void 0:null===(n=i.user)||void 0===n?void 0:n.id_str,y=null==e?void 0:null===(o=e.results)||void 0===o?void 0:o.filter(e=>String(e.guest_id)===h||String(e.guest_id_str)===h)[0];if(!y||y.role===P.L0.GuestBattlePlayerRoleNone)return{giftIcon:p,giftStyle:E};let N=String(null!==(d=null==y?void 0:null===(r=y.crown_info)||void 0===r?void 0:null===(a=r.cur_grade)||void 0===a?void 0:a.level)&&void 0!==d?d:-1),A=null==y?void 0:y.role;if(E={width:"22px",height:"22px",maxWidth:"22px",maxHeight:"22px",position:"absolute",top:"-2px",left:"-4px"},A===P.L0.GuestBattlePlayerRoleWinner){let e=null!==(c=null==t?void 0:null===(s=t.guest_battle_theme_element)||void 0===s?void 0:null===(u=s.first_config)||void 0===u?void 0:u.grade_configs)&&void 0!==c?c:[];e.length&&(p=C(null===(_=e[N])||void 0===_?void 0:null===(v=_.play_value_icon)||void 0===v?void 0:v.url_list[0]))}else{let e=null==t?void 0:null===(m=t.guest_battle_theme_element)||void 0===m?void 0:null===(f=m.straggler_config)||void 0===f?void 0:f.grade_config;(null==e?void 0:e.play_value_icon)&&(p=C(null==e?void 0:null===(g=e.play_value_icon)||void 0===g?void 0:g.url_list[0]))}return{giftIcon:p,giftStyle:E}};var k=i("727795"),L=i("305272"),V=i("458236"),O=i("420054"),w=i.p+"media/guestBattleBg.90cb9b030e3bf46e.png",R=i("310732"),j=i("542601"),M=i("740567"),G=i("338426"),U=i("608261");i("779788"),i("110006");var B=i("879962");let F=e=>{let{setUiLayout:t,setIsNewVideoLinkmicRoom:i,newSeiContentRef:l}=e,{player:n}=(0,g.n)(),r=(0,o.useCallback)(e=>{if(100===e.code)try{var o,a;let r=new TextDecoder().decode(e.content),d=(0,B.KR)(r);try{null==n||null===(a=n.updateConfig)||void 0===a||a.call(n,{baseConfig:{seiOnDemand:!0}})}catch(e){}if(null==d?void 0:d.app_data){let{ui_layout:e,interactive_scene:n}=JSON.parse(d.app_data)||{};20===n?i(!0):i(!1),JSON.stringify(d)!==JSON.stringify(l.current)&&(l.current=d),e&&t(e)}else(null==d?void 0:null===(o=d.source)||void 0===o?void 0:o.includes("TTLiveSDK"))&&(t(-1),i(!1))}catch(e){}},[n]);(0,o.useEffect)(()=>(n.on(a.FP.SEI,r),()=>{if(!!n)n.off(a.FP.SEI,r)}),[])};var H=i("443024");let W=(0,G.ZP)(()=>i.e("86345").then(i.bind(i,961490)),{ssr:!1}),Y=(0,h.Pe)(),Z=e=>E.Z.get(`${Y}/webcast/linkmic_audience/get_play_mode_info/`,{params:e}),z=e=>E.Z.get(`${Y}/webcast/dress/list/`,{params:e}),J=e=>{var t,i;let{anchorId:r,roomId:E,className:h,linkerMap:P={},functionType2:D,onLayoutChange:T,dressListAll:x=[],linkmicVideoEqualLayoutFrameOpt:C="0",setIsPk:G,layout:B}=e,Y=!!(0,H.yk)()||e.disableClairvoyance,{player:J}=(0,g.n)(),[Q,K]=o.useState(B),[q,X]=o.useState(!1),$=o.useRef({}),[ee,et]=o.useState(c.Fk),[ei,el]=o.useState({}),en=o.useRef({}),eo=o.useRef({}),[ea,er]=o.useState(!1),ed=o.useRef(void 0);ed.current=Q;let[eu,es]=o.useState(0),ec=o.useRef(new j.a),[ev,e_]=o.useState(),[ef,em]=o.useState(),eg=null==ev?void 0:null===(t=ev.data)||void 0===t?void 0:t.teamfight_info,eI=null==ev?void 0:null===(i=ev.data)||void 0===i?void 0:i.guest_battle_info,ep=o.useMemo(()=>{var e,t;return Number.isInteger(null==ef?void 0:null===(e=ef.data)||void 0===e?void 0:e.gift_id)&&Number(null==ef?void 0:null===(t=ef.data)||void 0===t?void 0:t.gift_id)>0},[null==ef?void 0:ef.data]),eE=o.useMemo(()=>void 0!==Q,[Q]);o.useEffect(()=>{E&&eE&&(Z({room_id:E,_point:2}).then(e=>{e_(null==e?void 0:e.data)}),(0,k.RO)({room_id:E}).then(e=>{em(null==e?void 0:e.data)}))},[E,eE]),o.useEffect(()=>{let e=null==eI?void 0:eI.dress_id;if(""!==e){let t=null==x?void 0:x.find(t=>(null==t?void 0:t.dress_id)===e);t?el(t):z({dress_id:e}).then(e=>{var t,i,l,n;if(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data){let t=null!==(n=null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.dress_list)&&void 0!==n?n:[];t.length&&el(t[0])}})}},[null==eI?void 0:eI.dress_id]),o.useEffect(()=>{P[5]&&[21,22].includes(eu)?22===eu?K(_.yP.AUDIO_GRID):26===eu?K(_.yP.AUDIO_DOUBLE_C):25===eu?K(_.yP.MATE_CUSTOM):K(_.yP.AUDIO_1V8):P[16]?K(_.yP.VIDEO_6V6):P[20]&&X(!0)},[P,eu]);let eh=o.useCallback(()=>ee,[et,ee]),ey=o.useMemo(()=>(0,L.Qx)(ee),[ee]),eN=o.useCallback(d()(()=>(0,I.m)(E,r).then(e=>{let{data:{data:t,status_code:i}}=e;if(0===i){var l,n,o,a,r,d;let e={},i={};return es(null==t?void 0:null===(l=t.linker_base_info)||void 0===l?void 0:l.ui_layout),null==t||null===(n=t.user)||void 0===n||n.forEach(t=>{t.linkmic_id_str&&(e[t.linkmic_id_str]=t)}),ed.current===_.yP.VIDEO_6V6&&(null==t||null===(r=t.linker_content_map[null===(d=Object.keys(null==t?void 0:t.linker_content_map))||void 0===d?void 0:d[0]])||void 0===r||null===(a=r.linked_users)||void 0===a||a.map(t=>{t.user_position=t.user_position+_.Lf[Q],t.linkmic_id_str&&(e[t.linkmic_id_str]=t)})),null==t||null===(o=t.locked_positions)||void 0===o||o.forEach(e=>{("number"==typeof e.position||"string"==typeof e.position)&&(i[e.position]=e)}),en.current=Object.assign({},en.current,e),eo.current=i,Promise.resolve()}}),3e3),[E,r,Q]),{isGroupFight:eA,isGroupPlaying:eP,isInPunish:eD,redGroupSeats:eT,statusTexting:ex}=(0,y.Z)({teamfightInfo:eg,linkMicSeats:ee}),{isGuestBattle:eC}=(0,N.Z)({guestBattleInfo:eI});F({setUiLayout:es,setIsNewVideoLinkmicRoom:X,newSeiContentRef:$}),o.useEffect(()=>{let e=Object.keys(P);if(!(e.length<=0)&&(1!==e.length||"4"!==e[0])&&(1!==e.length||"20"!==e[0]))return eN().then(()=>{let e=(0,l._)({},c.Fk);Object.keys(en.current).forEach(t=>{let i=en.current[t];e[i.user_position]={idx:i.user_position,user:i}}),et(e)}).finally(()=>{er(!0)}),()=>{(null==eN?void 0:eN.cancel)&&(null==eN||eN.cancel())}},[]);let eb=o.useCallback(()=>en.current,[]),eS=o.useCallback(()=>eo.current,[]);o.useEffect(()=>{null==T||T(Q)},[Q]),(0,c.wz)({setLayout:K,enable:!0,setSeats:et,getSeats:eh,layout:Q,getUsers:eb,getPositions:eS,onUsersUpdate:ea&&eN,roomIdStr:E,audioPower:ec.current,setIsPk:G});let ek=o.useCallback(()=>{K(void 0)},[]);o.useEffect(()=>{if(Q===_.yP.AUDIO_1V8||Q===_.yP.AUDIO_1V8_STAGE||Q===_.yP.AUDIO_GRID||Q===_.yP.AUDIO_DOUBLE_C||Q===_.yP.VIDEO_1V6||Q===_.yP.VIDEO_1V8||Q===_.yP.VIDEO_2V4V4||Q===_.yP.VIDEO_GRID||Q===_.yP.VIDEO_6V6||Q===_.yP.VIDEO_DYNAMIC||Q===_.yP.VIDEO_DYNAMIC_FLOAT||Q===_.yP.VIDEO_1_V_3||Q===_.yP.VIDEO_1_V_6||Q===_.yP.VIDEO_1_V_8||Q===_.yP.VIDEO_T1_V_B8||Q===_.yP.MATE_CUSTOM){var e;er(!0),(null===(e=Object.keys(en.current))||void 0===e?void 0:e.length)===0&&eN().then(()=>{let e=Q===_.yP.MATE_CUSTOM?{}:(0,l._)({},c.Fk);Q===_.yP.AUDIO_DOUBLE_C&&(e[9]={idx:9}),Object.keys(en.current).forEach(t=>{let i=en.current[t];e[i.user_position]={idx:i.user_position,user:i}}),et(e)}).finally(()=>{er(!0)})}else er(!1)},[Q]),o.useEffect(()=>(J.on(a.FP.CHANGE_URL,ek),()=>{J.off(a.FP.CHANGE_URL,ek)}),[]);let eL=o.useCallback(e=>{var t,i,l,o,a,d,u,c;let f=ey[e];if(Q===_.yP.AUDIO_1V8||Q===_.yP.AUDIO_1V8_STAGE||Q===_.yP.AUDIO_GRID||Q===_.yP.AUDIO_DOUBLE_C){let a=b(e,{isGroupFight:eA,isGuestBattle:eC,redGroupSeats:eT}),{giftIcon:d,giftStyle:u}=S(eI,ei,null==f?void 0:f.user,{isGuestBattle:eC});return(0,n.jsx)(v.X,{user:null==f?void 0:f.user,isLock:(null==f?void 0:null===(t=f.info)||void 0===t?void 0:t.status)===s.U.LinkmicPositionStatus_Locked,giftLabelBackgroundColor:[eP,eD].some(Boolean)&&0!==e?eT.includes(e)?"rgba(248, 42, 116, 1)":"rgba(24, 158, 254, 1)":void 0,dynamic:!eA&&(0,U.D)().includes(Number(eu)),joinText:a,giftLabelIcon:d,giftLabelStyle:u,setFloatModal:()=>null,showAnchorLabel:(0,L.ic)(ey)&&String(null===(o=ey[e])||void 0===o?void 0:null===(l=o.user)||void 0===l?void 0:null===(i=l.user)||void 0===i?void 0:i.id_str)===String(r),audioPower:ec.current})}if(Q===_.yP.VIDEO_1V6||Q===_.yP.VIDEO_1V8||Q===_.yP.VIDEO_2V4V4||Q===_.yP.VIDEO_DYNAMIC||Q===_.yP.VIDEO_GRID||Q===_.yP.VIDEO_6V6||Q===_.yP.VIDEO_DYNAMIC_FLOAT||Q===_.yP.VIDEO_1_V_8||Q===_.yP.VIDEO_1_V_6||Q===_.yP.VIDEO_1_V_3||Q===_.yP.VIDEO_T1_V_B8||Q===_.yP.MATE_CUSTOM)return Q!==_.yP.MATE_CUSTOM||(null==f?void 0:f.user)?(0,n.jsx)(m.W,{idx:e,isLock:(null==f?void 0:null===(a=f.info)||void 0===a?void 0:a.status)===s.U.LinkmicPositionStatus_Locked,user:null==f?void 0:f.user,layout:Q,position:e,isPreview:!0,setFloatModal:()=>null,showAnchorLabel:(0,L.ic)(ey)&&String(null===(c=ey[e])||void 0===c?void 0:null===(u=c.user)||void 0===u?void 0:null===(d=u.user)||void 0===d?void 0:d.id_str)===String(r),joinText:b(e,{isGroupFight:eA,isGuestBattle:eC,redGroupSeats:eT}),audioPower:ec.current,style:"1"===C&&(0,U.D)().includes(eu)?{border:"2px solid #140731"}:void 0}):null;return null},[Q,ey,eI,ei,eA,eC,r,eu]),eV=(0,M.R)(ee,r,Q),eO=o.useMemo(()=>U.dr.includes(Number(eu)),[eu]);if(q)return(0,n.jsx)(W,{uiLayout:eu,roomId:E,anchorId:r,newSeiContentRef:$});if(eA)return Q===_.yP.VIDEO_T1_V_B8?(0,n.jsx)(O.PY,{layout:Q,count:Object.keys(ee).length,renderElement:eL,teamfightInfo:eg,statusText:ex,micSeats:ee,roomId:E,backgroundImg:p,isPreview:!0}):(0,n.jsx)(A.s,{className:h,layout:Q,count:Object.keys(ee).length,renderElement:eL,statusText:ex,isPreview:!0});return(0,n.jsx)(n.Fragment,{children:eO?(0,n.jsx)(V.X0,{idPrefix:"preview",className:h,renderElement:eL,layout:eu,linkers:eV,incomingPlayer:J}):(0,n.jsx)(f.S,{className:h,layout:Q,count:Object.keys(ee).length,renderElement:eL,isGuestBattle:eC,backgroundImg:eC?w:[_.yP.AUDIO_1V8_STAGE,_.yP.AUDIO_1V8,_.yP.AUDIO_GRID,_.yP.AUDIO_DOUBLE_C].includes(Q)&&ep?u:[_.yP.AUDIO_1V8_STAGE,_.yP.AUDIO_1V8,_.yP.AUDIO_GRID,_.yP.AUDIO_DOUBLE_C].includes(Q)&&!ep?R:null,micSeats:ey,ext:{showVideoDynamicFloatLayoutJoinBtn:!1},linkers:eV,uiLayout:eu,linkmicVideoEqualLayoutFrameOpt:C,disableClairvoyance:Y})})};var Q=J},342934:function(e,t,i){i.d(t,{Y:function(){return s},m:function(){return c}});var l=i(914104),n=i(768492),o=i(149897),a=i(428775),r=i.n(a);let d=`${(0,n.Pe)()}`,u=r().create({baseURL:d});(0,o.U)(u);let s=async(e,t)=>{let i=u.get("/webcast/distribution/check_user_live_status/",{withCredentials:!0,params:{user_ids:e,aid:6383,distribution_scenes:t,device_platform:"webapp"}});return i.then(i=>{var n,o,a;let{status_code:r,data:d=[]}=(null==i?void 0:i.data)||{},u=null==i?void 0:null===(n=i.headers)||void 0===n?void 0:n["x-tt-logid"];null===(a=(0,l.OK)())||void 0===a||null===(o=a.sendEvent)||void 0===o||o.call(a,{name:"check_live_status_live_success",categories:{status_code:r,data:d,logId:u,userId:e,scene:t},type:"event"})}),i.catch(i=>{var n,o;null===(o=(0,l.OK)())||void 0===o||null===(n=o.sendEvent)||void 0===n||n.call(o,{name:"check_live_status_error",categories:{userId:e,scene:t,err:i},type:"event"})}),i},c=(e,t)=>u.get("/webcast/linkmic_audience/list/v2/",{withCredentials:!0,params:{room_id:e,aid:6383,anchor_id:t,live_id:1,device_platform:"web",language:navigator.language}})},14973:function(e,t,i){i.d(t,{W:function(){return _},Z:function(){return m}});var l=i(520739),n=i(563097),o=i(88648),a=i(176286),r=i(75978),d=i(88506),u=i(505575),s=i(382395),c=i(109539);let v=e=>{let t=e%60,i=Math.floor(e/60);return 0===i?`${t}秒`:0===t?`${i}分钟`:`${i}分钟${t}秒`};var _={IN_LIVING_ROOM:1,1:"IN_LIVING_ROOM",COMMON_SCENE:2,2:"COMMON_SCENE",IN_LIVING_RECOMMEND:3,3:"IN_LIVING_RECOMMEND",LIVING_SEARCH:4,4:"LIVING_SEARCH"};let f={FIRST:"首",STRIGHT:"直"},m=e=>{var t;let{scene:i=1,logParams:_={},isFirstLive:m=!1,onPaidLiveTryWatch:g=()=>{},watchTime:I=180}=e,{player:p}=(0,u.n)(),E=()=>{setTimeout(()=>{null==p||p.pause()},1)};o.useEffect(()=>{null==p||p.pause();let e=p.video.style.display,t=(0,s.K)(p,"xg-controls");return(0,s.K)(p,"xg-enter"),p.video.style.display="none",null==p||p.on("play",E),()=>{try{t(),null==p||p.play(),null==p||p.off("play",E),p.video.style.display=e}catch(e){}}},[p]);let{dispatch:h}=null!==(t=(0,c.useUserInfoContext)())&&void 0!==t?t:{},y=()=>!1,N=()=>{1===i||3===i?(0,r.p)().then(e=>{var t,i;e({headerText:`登录后免费试看${v(I)}`,success:async()=>{!y()&&window.location.reload()},next:`https://${null===(i=window)||void 0===i?void 0:null===(t=i.location)||void 0===t?void 0:t.host}`,enterMethod:"paidlive"})}):(2===i||4===i)&&(0,r.p)().then(e=>{var t,i;e({headerText:`登录后免费试看${v(I)}`,success:async()=>{null==h||h({type:"updateUserInfo"})},next:`https://${null===(i=window)||void 0===i?void 0:null===(t=i.location)||void 0===t?void 0:t.host}`,enterMethod:"paidlive"})});try{null==g||g()}catch(e){}};return o.useEffect(()=>{1===i?(0,d.zq)(1===i?"paidlive_inlive":"paidlive_window"):(0,d.Wr)((0,l._)({},_))},[i]),(0,n.jsxs)("div",{className:a.default.smegmae_contianer,children:[(0,n.jsxs)("div",{className:a.default.smegmae_contianer_title,children:["本",m?f.FIRST:f.STRIGHT,"播为付费",m?f.FIRST:f.STRIGHT,"播"]}),(0,n.jsxs)("div",{className:a.default.smegmae_contianer_desc,children:["购票后可观看整场",m?f.FIRST:f.STRIGHT,"播"]}),(0,n.jsxs)("div",{className:a.default.smegmae_contianer_button,onClick:()=>N(),children:["免费试看",v(I)]})]})}},917748:function(e,t,i){i.r(t),i.d(t,{PaidLivePlugin:function(){return z},default:function(){return J}});var l=i("520739"),n=i("878389");i("874386"),i("250440");var o=i("563097"),a=i("88648"),r=i("382395");i("819117"),i("675373");var d=i("128487"),u=i("618360"),s=i("441447"),c=i("565024"),v=i("791483"),_=i("505575"),f=i("645260"),m=i.n(f),g=i("877639"),I=i.n(g),p=i("967747"),E=i("727795"),h=i("742401"),y=i("669417");let N=function(e,t,i,o,r,f,g,N,A,P){let D=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,T=(0,a.useRef)(0),x=(0,a.useRef)({}),C=(0,a.useRef)(),b=(0,a.useRef)(),S=(0,a.useRef)({[d.PING_TYPE.TRY_WATCH_LEAVE]:!1}),k=(0,a.useRef)(""),[L,V]=(0,a.useState)(0),[O,w]=(0,a.useState)(A),R=(0,a.useRef)(!1),j=(0,a.useRef)(!1),{player:M}=(0,_.n)(),G=D||M,U=a.useCallback(e=>{let t=m()(e,"data.data.duration",0),i=m()(e,"data.data.delivery",0),a=m()(e,"data.data.ret_type",1),d=m()(e,"data.data.right_type",0);o(e=>(0,n._)((0,l._)({},e),{duration:t,delivery:i,view_right:0!==d?1:0})),r(a)},[o,r]),B=a.useCallback(()=>(null==f?void 0:f.paid_live_type)===u.xc.EQUITABLE_CAMERA_POSITION?{paid_live_type:null==f?void 0:f.paid_live_type,entity_id:i}:{},[f,i]),F=a.useCallback(()=>{Math.floor(A-T.current)>0?V(T.current+1):V(A)},[A]),H=()=>{(null==b?void 0:b.current)&&clearInterval(b.current)};a.useEffect(()=>{T.current=L,i&&j.current&&(x.current[i]=T.current,(0,p.V)(x.current)),w(Math.floor(A-T.current))},[L,A]),a.useEffect(()=>{s.emit(s.EVENT.paidLiveDuration,{last_time:Math.floor(O),ticket_id_str:i})},[O,i]);let W=a.useCallback(I()(async()=>{if(Math.floor(A-T.current)>0)try{let e=await (0,E.xL)((0,l._)({id:i,id_type:1,ping_type:d.PING_TYPE.TRY_WATCH_START,timestamp:Math.floor(Date.now()/1e3)},B()));y.kg.info("ping 上报试看开始",e),U(e)}catch(e){y.kg.error("ping 上报试看error",e)}C.current&&C.current&&clearInterval(C.current),C.current=setInterval(async()=>{if(Math.floor(A-T.current)>0){let e=await (0,E.xL)((0,l._)({id:i,id_type:1,ping_type:d.PING_TYPE.COMMON_PING,timestamp:Math.floor(Date.now()/1e3)},B()));y.kg.info("ping 上报试看",e),U(e)}},1e4,!0)},3e3),[i,U,A]),Y=a.useCallback(()=>{var e;let l=c.Q.getItem({sKey:d.storage.CookieKeys.PaidLiveDuration})||{};x.current=l,V(Math.max(Number(null===(e=x.current)||void 0===e?void 0:e[i])||0,Math.min(t,null==f?void 0:f.max_preview_duration))),P&&requestAnimationFrame(()=>{s.emit(s.EVENT.paidLiveInitTime,{})}),j.current=!0},[i,t]),Z=()=>{if(!h.s)C.current&&clearInterval(C.current)};a.useEffect(()=>{Y()},[Y]);let z=a.useCallback(()=>{if(!h.s)b.current&&clearInterval(b.current),W(),b.current=setInterval(()=>{F()},1e3,!0),R.current=!0},[F,W]),J=a.useCallback(async()=>{if(!S[d.PING_TYPE.TRY_WATCH_LEAVE]){if(Z(),H(),null==k?void 0:k.current)try{S[d.PING_TYPE.TRY_WATCH_LEAVE]=!0;let e=await (0,E.xL)((0,l._)({id:k.current,id_type:1,ping_type:d.PING_TYPE.TRY_WATCH_LEAVE,timestamp:Math.floor(Date.now()/1e3)},B()));k.current===i&&U(e),y.kg.info("ping 上报离开",e)}catch(e){y.kg.info("ping 上报离开error",e)}}},[U,i]),Q=(0,a.useRef)(!0);(0,a.useEffect)(()=>()=>{b.current&&clearInterval(b.current),C.current&&clearInterval(C.current)},[]),(0,v.C)(()=>{if(!!e)return!G.paused&&(z(),Q.current=!1),G&&(null==G||G.on("pause",J)),G&&(null==G||G.on("play",z)),()=>{G&&(null==G||G.off("pause",J)),G&&(null==G||G.off("play",z))}},[G,e,g,J,z]);let K=a.useCallback(async()=>{if(g===d.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&0===N)try{let e=await (0,E.xL)((0,l._)({id:i,id_type:1,ping_type:d.PING_TYPE.PERFORMANCE,timestamp:Math.floor(Date.now()/1e3)},B()));y.kg.info("ping 上报履约",e),U(e)}catch(e){y.kg.info("ping 上报履约error",e)}},[g,N,i,U]);return a.useEffect(()=>{i&&J().finally(()=>{S[d.PING_TYPE.TRY_WATCH_LEAVE]=!1,k.current=i})},[i]),a.useEffect(()=>()=>{J()},[]),a.useEffect(()=>{if(!!e)return!G.paused&&K(),G&&(null==G?void 0:G.on)&&G.on("play",K),()=>{null==G||G.off("play",K)}},[G,K,e]),{lastTime:O}};var A=i("309931"),P=i("939626"),D=i("181139");let T=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,n._)((0,l._)({width:8,height:10,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M6.805 1.84A2.19 2.19 0 0 1 5.845.4a1.958 1.958 0 0 1-.04-.4H4.227v6.323A1.327 1.327 0 0 1 2.905 7.6c-.223 0-.432-.055-.614-.155a1.323 1.323 0 0 1-.71-1.172A1.329 1.329 0 0 1 3.3 5.005v-1.61A2.908 2.908 0 0 0 0 6.272c0 .983.49 1.85 1.24 2.378a2.885 2.885 0 0 0 1.665.527 2.91 2.91 0 0 0 2.904-2.904v-3.21c.614.446 1.373.71 2.191.71V2.195c-.44 0-.85-.131-1.195-.354z",fill:"#A6A6A6"})}))),x=e=>{let{display_id:t="",viewType:i}=e,[l,n]=a.useState(!0),[r,u]=a.useState(0),[s,c]=a.useState(0),{player:v}=(0,_.n)(),f=a.useRef();return a.useEffect(()=>(i!==d.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH&&(f.current&&clearInterval(f.current),f.current=setInterval(()=>{n(!1),requestAnimationFrame(()=>{n(!0);let{new_left:e,mew_top:t}=(0,D.h)();u(e),c(t)})},5e3)),()=>{f.current&&clearInterval(f.current)}),[]),(0,o.jsx)(o.Fragment,{children:l&&(0,A.createPortal)((0,o.jsxs)("div",{className:P.default.waterText,style:{left:`${r}%`,top:`${s}%`,opacity:.4},children:[(0,o.jsx)("div",{children:"付费内容请勿录屏"}),(0,o.jsx)("div",{children:"必要时将追究违者法律责任"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(T,{}),(0,o.jsx)("span",{style:{paddingLeft:4},children:t})]})]}),(null==v?void 0:v.root)||document.body)})};var C=i("14973");let b=(e,t,i,o,r)=>(a.useEffect(()=>{if(!!e)return e.on("PaidLiveDataMessage",e=>{e&&Array.isArray(e)&&e.length>0&&e.map(e=>{var a;let u=Number(m()(e,"payload.paid_business_data.ret_type",d.RET_TYPE.TRY_WATCH_ING)),s=Number(m()(e,"payload.paid_business_data.duration",180)),c=Number(m()(e,"payload.paid_business_data.delivery",0)),v=m()(e,"payload.paid_business_data.ticket_id",""),_=m()(e,"payload.paid_business_data.ticket_sku_id",""),f=m()(e,"payload.paid_business_data.entity_rels",{}),g="object"==typeof f?Object.keys(f):[],I=null==t?void 0:null===(a=t.ticket_session)||void 0===a?void 0:a.ticket_session_id_str;g.concat([v,_]).includes(I)&&(i((0,n._)((0,l._)({},t),{duration:s,delivery:c})),o(u)),null==r||r(m()(e,"payload.paid_business_data"))})})},[e,t,i,o]),null);var S=i("579828"),k=i("167951"),L=i("848625"),V=i("713503"),O=i("62302"),w=i("435404"),R=i("624390");let j=(e,t,i,o,r,u,c,v,f,g,I)=>{let{player:p}=(0,_.n)(),h=(0,a.useRef)(e),{abrPts:N}=(0,R.Z)(),A=I||p,{roomStore:P}=g,D=a.useMemo(()=>{var e;return(null==P?void 0:null===(e=P.pollingFrequency)||void 0===e?void 0:e["webcast/room/info_by_scene"])||1e4},[]),T=a.useCallback(()=>{var e,o,a;if(null==g?void 0:null===(o=g.cameraStore)||void 0===o?void 0:null===(e=o.cameraInfo)||void 0===e?void 0:e.isMainCamera){let e=(0,S.a)();(0,E.aL)({room_id:t,scene:"paid_live_change_stream",channel:"channel_pc_web",region:"cn",device_id:null===(a=(0,k.Es)())||void 0===a?void 0:a.user_unique_id,device_type:null==e?void 0:e.device_type,os_version:null==e?void 0:e.os,version_code:null==e?void 0:e.version_code,webcast_sdk_version:2450}).then(e=>{if(e&&200===e.status&&0===e.data.status_code){var t,o;if(i===C.W.COMMON_SCENE||i===C.W.IN_LIVING_RECOMMEND||i===C.W.LIVING_SEARCH){y.kg.info("预览流换流",e);try{let{options:{default_quality:i},stream_data:l}=m()(e,"data.data.stream_url.live_core_sdk_data.pull_data"),n=JSON.parse(l),o=null==n?void 0:n.data,a=null==n?void 0:null===(t=n.common)||void 0===t?void 0:t.session_id,r=(0,V.f)(o[null==i?void 0:i.sdk_key].main.flv);(0,O.GT)(r,{abr_pts:N,sessionId:a}),A.paused?null==A||A.setConfig({url:r}):A.src=r,c(m()(e,"data.data.paid_live_data",{}))}catch(e){y.kg.error("预览流换流 ERROR",e)}}else{y.kg.info("直播间换流",e);try{let{streamStore:t,roomStore:i}=g,a=(0,w.h)({room:m()(e,"data.data",{})});null==t||t.setStreamData(a);let r=m()(e,"data.data.paid_live_data",{});c(r),null==i||i.setRoomInfo((0,n._)((0,l._)({},i.roomInfo),{room:(0,n._)((0,l._)({},null==i?void 0:null===(o=i.roomInfo)||void 0===o?void 0:o.room),{paid_live_data:r})}))}catch(e){y.kg.error("直播间换流 ERROR",e)}}}else y.kg.info("换流失败",e)})}},[t,i,A,N,c]),x=(0,a.useRef)(f);(0,a.useEffect)(()=>{(i===C.W.COMMON_SCENE||i===C.W.LIVING_SEARCH)&&f&&x.current!==f&&T()},[f,i,T]),(0,L.b)(async()=>{e===d.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&h.current!==e&&o>0&&(y.kg.info("试看权限 变为完整观看权限"),await T()),e!==d.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&h.current===d.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&0===o&&(y.kg.info("完整观看权限 变为试看权限"),await T()),h.current=e},[e,o]);let b=a.useRef(),j=a.useRef(u);(0,a.useEffect)(()=>{j.current=u},[u]);let M=a.useCallback(async()=>{let e=1e3*r-Date.now();y.kg.info(`流有效校验，流剩余有效时长，${r-Math.floor(Date.now()/1e3)}`),e<1e3*Number(j.current)&&o&&(y.kg.info("流信息不合法，触发换流"),await T())},[r,T,o]);(0,a.useEffect)(()=>{let e=s.listen(s.EVENT.paidLiveInitTime,()=>M());return()=>{e()}},[M]),(0,a.useEffect)(()=>(b.current&&clearInterval(b.current),e===d.PAID_LIVE_VIEW_TYPE.TRY_WATCH_ING&&o>0&&(b.current=setInterval(async()=>{await M()},D)),()=>{b.current&&clearInterval(b.current)}),[o,e,M,D])};var M=i("88506");let G=e=>{let{scene:t=C.W.IN_LIVING_ROOM,logParams:i={},isActive:o}=e,{player:r}=(0,_.n)();(0,a.useRef)(!1);let d=(0,a.useRef)(0),u=(0,a.useRef)(i);a.useEffect(()=>{u.current=i},[i]);let s=a.useCallback(()=>{d.current=Date.now(),(0,M.U0)((0,l._)({},u.current))},[]),c=(0,a.useRef)(o);(0,a.useEffect)(()=>{if(t!==C.W.IN_LIVING_ROOM)o&&s()},[o]),(0,a.useEffect)(()=>{if(t!==C.W.IN_LIVING_ROOM){if(!o&&o!==c.current){let e=Math.floor((Date.now()-d.current)/1e3);(0,M.dL)((0,n._)((0,l._)({},u.current),{duration:e}))}c.current=o}},[o])};var U=i("368300"),B=i("784492"),F=i("632766"),H=i("53562"),W=i("818597"),Y=i("867204");let Z=(e,t)=>t===d.RET_TYPE.NORMAL_WATCH?d.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH:Number(e)>0?d.PAID_LIVE_VIEW_TYPE.TRY_WATCH_ING:d.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH,z=(0,H.Pi)(e=>{var t;let{paidLiveData:i,isLogin:s=!1,display_id:c="",scene:v=C.W.COMMON_SCENE,webRid:_="",roomId:f,setPaidLiveData:g,setViewType:I=e=>{},viewType:p,retType:E,setRetType:h,isFirstLive:y=!1,logParams:A={},onPaidLiveTryWatch:P=()=>{},onPaidLiveBuyTicket:D=()=>{},isActive:T=!0,jumpHref:S="",message:k,store:L={},setPaidLiveBurryContrl:V=()=>{}}=e,[O,w]=a.useState(!0),R=Number(m()(i,"max_preview_duration",180)),M=m()(i,"ticket_session.ticket_session_id_str",""),H=Number(m()(i,"duration",0)),W=Number(m()(i,"delivery",0)),{singletonStore:Y,cameraStore:z,roomStore:J}=L,Q=null==z?void 0:null===(t=z.cameraInfo)||void 0===t?void 0:t.isMainCamera,K=v===C.W.IN_LIVING_ROOM,q=Number(m()(i,"async_auth_data.keep_alive_time",0)),X=Number(m()(i,"async_auth_data.keep_alive_time_stamp",0)),{lastTime:$}=N(s,H,M,g,h,i,p,W,R,Q);return b(k,i,g,h,e=>{try{let{ticket_id:t,right_type:i,entity_rels:o}=e,{cameraStore:{cameraInfoList:a,setCameraInfoList:r}}=L,d=a.map(e=>{var a,r,d,s,c,v,_,f;if(e.paid_live_type===u.xc.SEPARATE_PAID_LIVE&&(null==e?void 0:null===(r=e.camera_paid_info)||void 0===r?void 0:null===(a=r.paid_live_base_info)||void 0===a?void 0:a.ticket_session_id_str)===t&&(e.camera_paid_info.paid_live_base_info.view_right=i),(e.paid_live_type===u.xc.EQUITABLE_CAMERA_POSITION||e.isMainCamera)&&"object"==typeof o){let t=Object.keys(o);if(e.paid_live_type===u.xc.EQUITABLE_CAMERA_POSITION&&t.includes(null==e?void 0:null===(s=e.camera_paid_info)||void 0===s?void 0:null===(d=s.paid_live_base_info)||void 0===d?void 0:d.ticket_session_id_str)&&(e.camera_paid_info.paid_live_base_info.view_right=i),e.isMainCamera&&t.includes(null==J?void 0:null===(c=J.roomInfo)||void 0===c?void 0:c.roomId)){let e=null==J?void 0:null===(_=J.roomInfo)||void 0===_?void 0:null===(v=_.room)||void 0===v?void 0:v.paid_live_data;null==J||J.setRoomInfo((0,n._)((0,l._)({},J.roomInfo),{room:(0,n._)((0,l._)({},null==J?void 0:null===(f=J.roomInfo)||void 0===f?void 0:f.room),{paid_live_data:(0,n._)((0,l._)({},e),{view_right:i})})}))}}return e});r(d)}catch(e){}}),j(p,f,v,q,X,$,g,h,s,L,null),G({scene:v,logParams:A,isActive:T}),(0,B.Z)(()=>{V(!0),I(Z($,E))},[$,I,E]),a.useEffect(()=>{try{(async()=>{let e=await (0,F.ZP)({service_name:"webcast.douyin.live_pc",key:"paid_live_settings"}),t=m()(e,"water_mark",!0);w(!!t)})()}catch(e){}},[]),a.useEffect(()=>{if(v!==C.W.LIVING_SEARCH&&v!==C.W.IN_LIVING_RECOMMEND){var e,t;p!==d.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&p!==d.PAID_LIVE_VIEW_TYPE.BAN?null==Y||null===(e=Y.setPaidLiveQRCodeVisible)||void 0===e||e.call(Y,!0):null==Y||null===(t=Y.setPaidLiveQRCodeVisible)||void 0===t||t.call(Y,!1)}},[v,p]),(0,o.jsx)("div",{style:{pointerEvents:"all"},children:s?(0,o.jsxs)(o.Fragment,{children:[p===d.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH&&(0,o.jsx)(r.V,{scene:v,webRid:_,logParams:A,isFirstLive:y,onPaidLiveBuyTicket:D,jumpHref:S,isActive:T,store:L}),K?(0,o.jsx)(U.y,{paidLiveData:i,visible:null==Y?void 0:Y.paidLiveQRCodeVisible,onClose:()=>{var e;null==Y||null===(e=Y.setPaidLiveQRCodeVisible)||void 0===e||e.call(Y,!1)}}):null,O&&(0,o.jsx)(x,{display_id:c,viewType:p})]}):(0,o.jsx)(C.Z,{scene:v,logParams:A,isFirstLive:y,onPaidLiveTryWatch:P,watchTime:R})})});var J=(0,H.Pi)(()=>{let e=(0,W.o)(),{paidLiveStore:{paidLiveData:t,setViewType:i,viewType:l,setPaidLiveData:n,retType:r,setRetType:d,setPaidLiveBurryContrl:u},userStore:{userInfo:s},roomStore:{roomInfo:c},singletonStore:{message:v}}=e,_=m()(c,"room.id_str"),f=a.useMemo(()=>m()(c,"room.episode_extra.mod.episode_stage")===Y.jL.FIRST_LIVE,[c]);return(0,o.jsx)(z,{paidLiveData:t,isLogin:m()(s,"id_str",""),display_id:m()(s,"display_id",""),scene:C.W.IN_LIVING_ROOM,setViewType:i,viewType:l,setPaidLiveData:n,roomId:_,retType:r,setRetType:d,isFirstLive:f,message:v,store:e,setPaidLiveBurryContrl:u})})},382395:function(e,t,i){i.d(t,{K:function(){return I},V:function(){return p}});var l=i(520739);i(874386);var n=i(563097),o=i(88648),a=i(578503),r=i(505575),d=i(632766),u=i(910863),s=i(684767),c=i(14973),v=i(96008),_=i.n(v),f=i(645260),m=i.n(f),g=i(88506);let I=(e,t)=>{let i=e.root.querySelector(t);return i?(i.style.display="none",()=>{i&&(i.style.display="block")}):_()},p=e=>{let{webRid:t="",scene:i=c.W.COMMON_SCENE,logParams:v={},isFirstLive:_=!1,onPaidLiveBuyTicket:f=()=>{},jumpHref:p="",isActive:E=!1,container:h,store:y}=e,{player:N}=(0,r.n)(),A=o.useRef(!1),[P,D]=(0,o.useState)("https://lf-dy-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/h5/vs_paid_live_audience_pc_buy_ticket_h5_douyin/pages/ticket_pc/index.html?ticket_entrance=paidlive_live_tryend_card"),T=()=>{setTimeout(()=>{null==N||N.pause()},1)};o.useEffect(()=>{if(!N)return;null==N||N.pause();let e=N.video.style.opacity,t=I(N,".douyin-player-controls");return N.video.style.opacity=0,null==N||N.on("play",T),()=>{try{t(),null==N||N.play(),null==N||N.off("play",T),N.video.style.opacity=e}catch(e){}}},[N]),(0,o.useEffect)(()=>{try{(async()=>{let e=await (0,d.ZP)({service_name:"webcast.douyin.live_pc",key:"hybrid_schema"}),t=m()(e,"paid_live_ticket_panel","");t&&D(`${t}?ticket_entrance=paidlive_live_tryend_card`)})()}catch(e){}},[]);let x=()=>{try{null==f||f()}catch(e){}if(i===c.W.IN_LIVING_ROOM){var e,l;null==y||null===(l=y.singletonStore)||void 0===l||null===(e=l.setPaidLiveQRCodeVisible)||void 0===e||e.call(l,!0),(0,g.c9)("tryend")}else(0,g.dh)(v),p?window.open((0,u.G7)({if_paid_live_card:"1",ticket_entrance:"paidlive_window_tryend_card",entrance_form:"paidlive_window_tryend_card"},p),(0,s.f)()?"_self":void 0):window.open(`https://live.douyin.com/${t}?if_paid_live_card=1&ticket_entrance=paidlive_window_tryend_card`,(0,s.f)()?"_self":void 0)};return o.useEffect(()=>{i===c.W.IN_LIVING_ROOM&&(0,g.t4)()},[]),o.useEffect(()=>{(i===c.W.COMMON_SCENE||i===c.W.LIVING_SEARCH)&&A.current!==E&&E&&(0,g.B5)((0,l._)({},v))},[E]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:a.default.smegmae_contianer_mask}),(0,n.jsxs)("div",{className:a.default.smegmae_contianer,style:{pointerEvents:"all"},children:[(0,n.jsx)("div",{className:a.default.smegmae_contianer_title,children:"免费试看结束"}),(0,n.jsxs)("div",{className:a.default.smegmae_contianer_desc,children:["购票后可观看整场",_?"首":"直","播"]}),(0,n.jsx)("div",{className:a.default.smegmae_contianer_button,onClick:e=>x(),children:"购票继续看"})]})]})}},681759:function(e,t,i){i.d(t,{M:function(){return r}}),i(874386);var l=i(88648),n=i(128487),o=i(645260),a=i.n(o);let r=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[i,o]=l.useState(n.PAID_LIVE_VIEW_TYPE.BAN),[r,d]=l.useState(e),[u,s]=l.useState(n.RET_TYPE.TRY_WATCH_ING),c=Number(a()(r,"paid_type",0))===n.PAID_LIVE_TYPE.PAID_LIVE;l.useEffect(()=>{c&&s(Number(a()(r,"view_right",0))?n.RET_TYPE.NORMAL_WATCH:n.RET_TYPE.TRY_WATCH_ING)},[r,c]);let v=l.useMemo(()=>c&&(!t||i===n.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH),[i,t,c]),_=l.useMemo(()=>!c||!(!t||i===n.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH),[c,t,i]);return{viewType:i,setViewType:o,retType:u,setRetType:s,paidLiveData:r,setPaidLiveData:d,isPaidLive:c,hideLinkMicPreview:v,showEnter:_}}},6858:function(e,t,i){i.r(t),i.d(t,{default:function(){return y},VipLiveBoundaryPlugin:function(){return h}});var l=i("563097"),n=i("88648"),o=i("337359"),a=i("53562"),r=i("818597"),d=i("169961"),u=i("645260"),s=i.n(u),c=i("582296"),v=i("984468"),_=i("691253"),f=i("597294"),m=i("441447");let g=()=>{let{vipStore:e,roomStore:{roomInfo:t}}=(0,r.o)();(0,n.useEffect)(()=>{let i=()=>{var i,l;let n=null==t?void 0:null===(i=t.anchor)||void 0===i?void 0:i.id_str,o=null==t?void 0:null===(l=t.room)||void 0===l?void 0:l.id_str;if(!!n)(0,v.GT)({room_id:o,anchor_id:n}).then(t=>{var i,l,n;let{data:o}=t;e.setVipEmojiConfig(o.data);let a=null==o?void 0:null===(l=o.data)||void 0===l?void 0:null===(i=l.user_data)||void 0===i?void 0:i.expired_time,r=1e3*a,d=null==o?void 0:null===(n=o.data)||void 0===n?void 0:n.is_member,u=new Date().getTime();e.setIsVip(r>u&&d),e.setVipLiveStatus(a?f.L[(0,_.j$)(a)]:f.L[f.vz.BEFORE]),e.setVipInfoLoaded(!0)})};i();let l=m.listen(m.EVENT.VipRechargeSuccess,()=>{i()});return()=>{null==l||l()}},[t])};var I=i("618618"),p=i("548309"),E=i("976167");let h=(0,a.Pi)(e=>{let{onShowVipLiveBoundary:t,paidLiveData:i,roomId:n,roomStatus:a,messageInstance:r,onBtnClick:d,isInLivingRoom:u,roomInfo:s,customContent:c,abTestData:v}=e;return(0,l.jsx)(o.ZP,{roomId:n,roomStatus:a,messageInstance:r,onBtnClick:d,paidLiveData:i,onShowBoundary:t,isInLivingRoom:u,roomInfo:s,customContent:c,abTestData:v})});var y=(0,a.Pi)(()=>{let{singletonStore:{message:e},paidLiveStore:{paidLiveData:t},roomStore:{roomInfo:i,roomStatus:o,hideBanner:a},vipStore:{setShowVipLiveBoundary:u,setIsShowVipPanel:v,showVipLiveBoundary:_,isShowVipPanel:f},userStore:{headerUserInfo:m},feedStore:{isActive:y},rightPanelStore:{openItem:N}}=(0,r.o)();g();let A=s()(i,"room.id_str"),P=(0,d.T)(),D=()=>!1;return(0,n.useEffect)(()=>{y&&(o!==I.LV.END||_)&&f&&(!a||_)&&N(p.k.Vip)},[y,o,_,f,a,_]),(0,l.jsx)(h,{messageInstance:e,paidLiveData:t,isInLivingRoom:!0,roomInfo:i,roomId:A,abTestData:P,roomStatus:o,onShowVipLiveBoundary:e=>{u(e)},onBtnClick:()=>{if(null==m?void 0:m.isLogin)(0,E.Z)("live");else{var e,t;(0,c.default)({success:()=>{!D()&&window.location.reload()},enterMethod:"",headerText:"登录后查看更多作品",next:`https://${null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.host}`})}}})})},691253:function(e,t,i){i.d(t,{HS:function(){return s},T3:function(){return v},ZK:function(){return _},cI:function(){return d},j$:function(){return u},m1:function(){return f},p8:function(){return c}});var l=i(520739),n=i(878389);i(268917);var o=i(597294);let a=(e,t,i)=>e===o.Nl.FuliType&&t===o.D$.VIRTUAL&&i===o.lW.DONE?o.lW.VIRTUAL_DONE:i||0,r=e=>{if(e.type===o.Nl.CourseType){var t,i;return e.privilege_switch===o.oH.OFF?o.Bn[e.type]:`${null!==(i=null===(t=e.discount_course_info)||void 0===t?void 0:t.free_course_number)&&void 0!==i?i:0}个免费课程`}return null==e?void 0:e.content},d=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(t===o.Nl.LinkmicType)return"";if(t===o.Nl.FuliType||t===o.Nl.LinkmicType)return o.eS[e];if(t===o.Nl.EmojiType)return"去使用";if(t===o.Nl.GroupType)return o.I$[e];if(t===o.Nl.CourseType)return"查看";if(t===o.Nl.Ask){if(i)return"去提问";if(l)return"查看"}return t===o.Nl.ShortVideo&&n?"查看":""},u=e=>{let t=1e3*Number(e),i=t-new Date().getTime();if(0===e)return o.vz.BEFORE;if(i>0&&i<6048e5)return o.vz.AFTER_SEVEN;if(i>0)return o.vz.AFTER;if(i<0&&i>-6048e5)return o.vz.EXPIRED_FEWDAY;else if(i<0)return o.vz.EXPIRED;return o.vz.BEFORE},s=(e,t,i,l)=>!!t&&!!e&&!(e.length<=0)&&!!i&&!!l&&(!!i[e]||!!l[e]),c=(e,t)=>{var i,s,c,v,_,f;if(!e)return[];let m=[],g=e.advanced_privilege||[],I=e.is_member,p=u(null!==(s=e.expired_time)&&void 0!==s?s:0),E=(null!==(c=null===(i=e.short_video_info)||void 0===i?void 0:i.short_video_count)&&void 0!==c?c:0)>0;for(let i=0;i<g.length;i++){let{type:u}=g[i],s=a(u,g[i].bonus_type,g[i].received),c=!0;if(u===o.Nl.Ask){let{answered_ask_num:e=0}=g[i];c=e>0}let p=(0,n._)((0,l._)({},g[i]),{isGradient:!I,btnText:(I||u===o.Nl.CourseType||u===o.Nl.Ask||u===o.Nl.ShortVideo)&&d(s,u,I,c,E),handleClick:function(e,t,i,l){var n,a;let{type:r,status:d,isMember:u}=e;if(r===o.Nl.EmojiType||r===o.Nl.LinkmicType||r===o.Nl.CourseType||r===o.Nl.Ask)return l;let s=(null!==(a=null==t?void 0:null===(n=t.short_video_info)||void 0===n?void 0:n.short_video_count)&&void 0!==a?a:0)>0;return r===o.Nl.ShortVideo,l}({type:null===(v=g[i])||void 0===v?void 0:v.type,bonusType:null===(_=g[i])||void 0===_?void 0:_.bonus_type,status:s,prizeId:null===(f=g[i])||void 0===f?void 0:f.prize_id,item:g[i],isMember:I},e,0,t),content:r(g[i]),privilege_tags:e.privilege_tags});m.push(p)}return m},v=e=>{for(let t=0;t<e.length;t++)if(e[t].type===o.Nl.FuliType)return{fuliStatus:"in_effect",fuliType:e[t].schema_url?"real":"virtual",fuliId:e[t].prize_id};return{fuliStatus:"nonactivated",fuliType:"",fuliId:0}},_=e=>{let t=new Date(e),i=t.getFullYear(),l=t.getMonth()+1<10?`${t.getMonth()+1}`:t.getMonth()+1,n=10>t.getDate()?`${t.getDate()}`:t.getDate();return`${i}-${l}-${n}`},f=e=>{if(1===e.length)return e[0];if(e.length>1){let t=e.find(e=>e.apply_status===o.aJ.ALREADY_IN);if(t)return t;let i=e.find(e=>e.apply_status===o.aJ.JOIN_NOW);if(i)return i;let l=e.find(e=>e.apply_status===o.aJ.APPLYING);if(l)return l;let n=e.find(e=>e.apply_status===o.aJ.APPLY_TO_JOIN||e.apply_status===o.aJ.NOT_APPLY);if(n)return n;let a=e.find(e=>e.apply_status===o.aJ.VIEW_CONDITION);if(a)return a;let r=e.find(e=>e.apply_status===o.aJ.GROUP_IS_FULL);if(r)return r}return e[0]}},559824:function(e,t,i){i.d(t,{j:function(){return d}});var l=i(520739),n=i(878389),o=i(88648),a=i(302461),r=i(567754);let d=e=>{let{href:t,isLiving:i,isActive:d,useF:u,onEnterRoom:s,enterLogParams:c,forceEnter:v,isInPWA:_,disabled:f=!1}=e,m=(0,o.useCallback)(e=>{if(!(Array.from(document.querySelectorAll(".modal-video-container")).filter(e=>e.getBoundingClientRect().height>0).length>0)||0!==Array.from(document.querySelectorAll(".modal-video-container .liveSearchPlayer")).filter(e=>e.getBoundingClientRect().height>0).length){if(("F"===e.key||"f"===e.key)&&!e.shiftKey&&u){if(e.stopPropagation(),e.preventDefault(),v){v();return}t&&i&&s({openLiveModal:!0,event:e,callback:()=>{let e="";e=t.indexOf("?")>=0?`${t}&${r.stringify((0,n._)((0,l._)({},c),{action_type:"hot_key"}))}`:`${t}?${r.stringify((0,n._)((0,l._)({},c),{action_type:"hot_key"}))}`,window.open(e,_?"_self":"_blank")}})}}},[t,d,i,s,_,u,c,v]);(0,a.o)(()=>{if(!f)return d&&document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[d,f,m])}},387207:function(e,t,i){i.d(t,{Z:function(){return g}}),i("602157"),i("874386");var l=i("563097"),n=i("713097"),o=i.n(n),a=i("88648"),r=i("579828"),d=i("167951"),u=i("127311"),s=i("101156"),c=i("122196"),v=i("556536"),_=i("432051"),f=i("727795"),m=i("559824"),g=e=>{let{className:t,description:i,enterText:n,href:g,abTestData:I,isInPWA:p,onEnterRoom:E,isLiving:h,isActive:y,enterLogParams:N,useF:A=!0,roomIdStr:P="",scene:D="web_feed",size:T="normal",forceEnter:x,useRedPack:C=!0,disableEnterRoomShotCut:b=!1,isHover:S,setIsHover:k,rawdata:L,isPlayingVideo:V=!1,countDown:O=0}=e,[w,R]=a.useState(!1),[j,M]=a.useState(!1),G=a.useCallback(async()=>{var e,t,i,l,n,o,a,u,s,c;let v=(0,r.a)(),_=await (0,f.aL)({room_id:P,scene:D,channel:"channel_pc_web",region:"cn",device_id:null===(e=(0,d.Es)())||void 0===e?void 0:e.user_unique_id,device_type:null==v?void 0:v.device_type,os_version:null==v?void 0:v.os,version_code:null==v?void 0:v.version_code,webcast_sdk_version:2450});200===Number(_.status)&&(null==_?void 0:null===(t=_.data)||void 0===t?void 0:t.data)&&(R((null==_?void 0:null===(o=_.data)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:null===(l=n.others)||void 0===l?void 0:null===(i=l.web_enter_benefit_point_data)||void 0===i?void 0:i.has_ongoing_lucky_money)||!1),M((null==_?void 0:null===(c=_.data)||void 0===c?void 0:null===(s=c.data)||void 0===s?void 0:null===(u=s.others)||void 0===u?void 0:null===(a=u.web_enter_benefit_point_data)||void 0===a?void 0:a.has_ongoing_lottery)||!1))},[P,D]);(0,m.j)({href:g,isLiving:h,isActive:y,isInPWA:p,onEnterRoom:E,enterLogParams:N,useF:A,forceEnter:x,disabled:b});let U=a.useMemo(()=>!!w||!!j,[w,j]),B=a.useMemo(()=>w?"redPacket":j?"lottery":"",[I,w,j]),F=!u._.isOptmizeInvisibleLive(I)||y;a.useEffect(()=>{y&&G()},[y,G]);let H=a.useMemo(()=>{var e,t,i,l;return(null==I?!!void 0:!!I.douyinShowVrRoom)&&(1===Number(null==L?void 0:null===(e=L.extra)||void 0===e?void 0:e.vr_type)||2===Number(null==L?void 0:null===(t=L.extra)||void 0===t?void 0:t.vr_type)||(null==L?void 0:null===(l=L.pico_info)||void 0===l?void 0:null===(i=l.multi_stream_info)||void 0===i?void 0:i.multi_stream_scene)==="multi_camera")},[L,I]);return(0,l.jsxs)("div",{className:o()(_.default.liveDivideContainer,t,{[_.default.small]:"small"===T}),onMouseEnter:()=>null==k?void 0:k(!0),children:[(0,l.jsx)("div",{className:o()(_.default.liveDivide,_.default.liveDivideAb),children:(0,l.jsx)("div",{className:o()(_.default.textContent,_.default.textContentAb,{[_.default.isHoverd]:S}),children:V?(0,l.jsxs)("div",{className:_.default.textContainer,children:["高光播放中，",O||0,"s后切换为直播"]}):(0,l.jsxs)(l.Fragment,{children:[(!(U&&B)||!C)&&!H&&(0,l.jsx)(s.WaveLineAnimation,{className:F?"":_.default.hidden}),!!B&&U&&C&&!H&&(0,l.jsxs)(l.Fragment,{children:["redPacket"===B&&(0,l.jsx)(c.r,{className:F?"":_.default.hidden}),"lottery"===B&&(0,l.jsx)(v.J,{className:F?"":_.default.hidden})]}),H&&(0,l.jsx)("img",{src:"data:image/png;base64,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",style:{width:32}}),(0,l.jsxs)("div",{className:_.default.textContainer,children:["点击",A&&"或按",A&&(0,l.jsx)("div",{className:_.default.Fkey}),"进入",`${H?"全景":""}直播间`]})]})})}),V?(0,l.jsxs)("div",{className:_.default.description,children:[(0,l.jsx)("div",{className:_.default.line}),!!B&&U&&C&&(0,l.jsxs)(l.Fragment,{children:["redPacket"===B&&(0,l.jsx)(c.r,{className:F?_.default.icon:_.default.hidden}),"lottery"===B&&(0,l.jsx)(v.J,{className:F?_.default.icon:_.default.hidden})]}),"点击",A&&"或按",A&&(0,l.jsx)("div",{className:_.default.Fkey}),"进入直播间",(0,l.jsx)("div",{className:_.default.line})]}):(0,l.jsx)(l.Fragment,{children:i&&(0,l.jsx)("div",{className:_.default.description,children:i})})]})}},257684:function(e,t,i){i.d(t,{j:function(){return g}}),i(874386);var l=i(563097),n=i(713097),o=i.n(n),a=i(88648),r=i(128487),d=i(441447),u=i(774569),s=i(41697),c=i(865856),v=i(867204),_=i(645260),f=i.n(_);let m=e=>{let t=String(Math.floor(100+Math.floor(e%60))).slice(1),i=String(100+Math.floor(e/60)).slice(1);return`${i}:${t}`},g=e=>{var t;let{count:i,className:n,title:_,showTitle:g,program:I,paidLiveData:p,isLogin:E=!1,viewType:h,showCount:y=!0,appointment:N}=e,[A,P]=a.useState(0),D=a.useCallback(()=>(0,l.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.95765 2.59839C6.95765 3.66536 6.06542 4.53306 4.96128 4.54561H4.91349C3.80935 4.53306 2.91711 3.66536 2.91711 2.59839V1.94879C2.91711 0.872405 3.82209 0 4.93738 0C6.05268 0 6.95765 0.872405 6.95765 1.94879V2.59839ZM1.45988 6.17671C2.29926 5.77687 3.98475 5.55579 4.93675 5.55579C5.89025 5.55579 7.57874 5.77687 8.41962 6.17985C8.90764 6.45268 9.25 7.06419 9.25 7.7792V8.19036C9.25 8.72034 8.9692 9.16565 8.5833 9.30834C7.65982 9.57176 5.92479 9.71288 4.93825 9.71288C3.95021 9.71288 2.21367 9.56863 1.2887 9.30677C0.905796 9.16252 0.625 8.71877 0.625 8.18879V7.77763C0.625 7.06106 0.968862 6.44797 1.45988 6.17671Z",fill:"white",fillOpacity:"0.9"})}),[]),T=Number(f()(p,"paid_type",0))===r.PAID_LIVE_TYPE.PAID_LIVE,x=Number(f()(p,"view_right",0)),C=f()(p,"ticket_session.ticket_session_id_str","");a.useEffect(()=>{let e=d.listen(d.EVENT.paidLiveDuration,e=>{T&&(null==e?void 0:e.ticket_id_str)&&e.ticket_id_str===C&&P(null==e?void 0:e.last_time)});return()=>e()},[C,T]);let b=a.useCallback(()=>{var e,t,i,n;if(T){if(E&&h===r.PAID_LIVE_VIEW_TYPE.TRY_WATCH_ING)return(0,l.jsx)(u.jR,{isFirstLive:(null==I?void 0:null===(e=I.mod)||void 0===e?void 0:e.episode_stage)===v.jL.FIRST_LIVE})}else return(null==I?void 0:null===(t=I.mod)||void 0===t?void 0:t.episode_stage)===v.jL.FIRST_LIVE?(0,l.jsx)(u.Sx,{className:c.default.liveTag,episodeStage:null==I?void 0:null===(i=I.mod)||void 0===i?void 0:i.episode_stage}):(0,l.jsx)(u.z,{className:c.default.liveTag,episodeStage:null==I?void 0:null===(n=I.mod)||void 0===n?void 0:n.episode_stage})},[T,null==I?void 0:null===(t=I.mod)||void 0===t?void 0:t.episode_stage,E,h]),S=a.useMemo(()=>T&&!x&&A>0&&E,[T,x,A,E]);return(0,l.jsxs)("div",{className:o()(c.default.liveUserCount,n),children:[y&&b(),S&&(0,l.jsxs)("div",{className:c.default.countDown,children:["试看中 ",m(A)]}),!T&&i&&y&&(0,l.jsx)(s.A,{className:c.default.userCount,count:i,renderSVG:D}),y&&_&&g?(0,l.jsx)("span",{className:c.default.title,children:_}):!!N&&(0,l.jsx)("span",{className:c.default.title}),N]})}},41697:function(e,t,i){i.d(t,{A:function(){return d}});var l=i(563097),n=i(309244),o=i(713097),a=i.n(o);i(88648);var r=i(372025);let d=e=>{let{count:t,className:i,renderSVG:o}=e;return(0,l.jsxs)("span",{className:a()(r.default.userCount,i),children:[o?o():(0,l.jsx)(n.Z,{}),(0,l.jsx)("span",{className:r.default.count,children:t||"0"})]})}},26770:function(e,t,i){i.d(t,{f:function(){return a}}),i(209955);var l=i(88648),n=i(219153),o=i(64814);function a(e){let t=(0,l.useContext)(n.qd);if(void 0===t)throw Error("roomStore must be used within Provider");return(0,o.oR)(t,e)}},184468:function(e,t,i){i.d(t,{L:function(){return d}});var l=i(520739),n=i(985703),o=i(910863),a=i(684767),r=i(88648);let d=e=>{let{onEnterRoom:t,enterLogParams:i={},href:d,propsOnLoginSuccess:u,adData:s,isReuseBasicPlayer:c=!1}=e,v=r.useMemo(()=>{let e=s?(0,n.e1)({rawAdData:s}):{};return(0,o.G7)((0,l._)({open_promotion_list:"1",enter_method_temai:"click_live_cart_tag"},i,e),d)},[d,i,s]),_=r.useMemo(()=>{let e=s?(0,n.e1)({rawAdData:s}):{};return(0,o.G7)((0,l._)({open_promotion_list:"1",open_promotion_detail:"1",enter_method_temai:"click_live_popup_card"},e,i),d)},[d,i,s]),f=r.useCallback(e=>{let{scene:o}=e||{};null==u||u();let r=s?(0,n.e1)({rawAdData:s}):{};null==t||t({openLiveModal:!0,onEnterParams:"cart"===o?(0,l._)({open_promotion_list:"1",open_promotion_detail:"0",enter_method_temai:"click_live_cart_tag"},i,r):(0,l._)({open_promotion_list:"1",open_promotion_detail:"1",enter_method_temai:"click_live_popup_card"},r,i)}),!c&&("cart"===o?window.open(v,(0,a.f)()?"_self":"_blank"):"pop"===o&&window.open(_,(0,a.f)()?"_self":"_blank"))},[u,t,v,_,c,i,s]),m=r.useCallback(()=>{let e=s?(0,n.e1)({rawAdData:s}):{};null==t||t({openLiveModal:!0,onEnterParams:(0,l._)({open_promotion_list:"1",open_promotion_detail:"0",enter_method_temai:"click_live_cart_tag"},i,e)}),!c&&window.open(v,(0,a.f)()?"_self":"_blank")},[v,t,c,i,s]);return{onShopLoginSuccess:f,onCartClick:m,onPromotionPopClick:r.useCallback(()=>{let e=s?(0,n.e1)({rawAdData:s}):{};null==t||t({openLiveModal:!0,onEnterParams:(0,l._)({open_promotion_list:"1",open_promotion_detail:"1",enter_method_temai:"click_live_popup_card"},e,i)}),!c&&window.open(_,(0,a.f)()?"_self":"_blank")},[_,t,c,i,s])}}},773512:function(e,t,i){i.d(t,{h:function(){return a}});var l=i(768492),n=i(567754);let o=`${(0,l.Pe)()}`,a=(e,t)=>`${o}/${e}${t?"?":""}${(0,n.stringify)(t)}`}}]);