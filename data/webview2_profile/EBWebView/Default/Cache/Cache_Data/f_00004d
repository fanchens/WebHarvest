"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["59765"],{496292:function(e,t,n){n.d(t,{$e:function(){return d},CI:function(){return u},Dm:function(){return s},yH:function(){return c}});var i=n(520739),r=n(878389),l=n(784106),o=n(679584),a=n(919195);let u=async e=>a.ZP.get("/webcast/gift/exhibition/home/",{params:(0,r._)((0,i._)({},(0,l.f)(),(0,o.F)({})),{aid:6383,app_name:"douyin_web",anchor_id:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId,exhibition_source:null==e?void 0:e.exhibitionSource})}),s=async e=>a.ZP.get("/webcast/gift/exhibition/rare/",{params:(0,r._)((0,i._)({},(0,l.f)(),(0,o.F)({})),{aid:6383,app_name:"douyin_web",target_uid:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId})}),d=async e=>a.ZP.get("/webcast/gift/exhibition/achievement/detail/",{params:(0,r._)((0,i._)({},(0,l.f)(),(0,o.F)({})),{aid:6383,app_name:"douyin_web",anchor_id:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId,group_id:null==e?void 0:e.groupId})}),c=async e=>a.ZP.get("/webcast/gift/exhibition/gift/detail/",{params:(0,r._)((0,i._)({},(0,l.f)(),(0,o.F)({})),{aid:6383,app_name:"douyin_web",anchor_id:null==e?void 0:e.anchorId,target_open_id:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId,group_id:null==e?void 0:e.groupId,task_id:null==e?void 0:e.taskId,gift_id:null==e?void 0:e.giftId})})},182794:function(e,t,n){n.d(t,{dp:function(){return N},T:function(){return S},K6:function(){return I}});var i=n("520739"),r=n("878389"),l=n("368200");n("874386"),n("527785"),n("429532");var o=n("563097"),a=n("88648"),u=n("19670"),s=n("110479"),d=n("782580"),c=n("96008"),v=n.n(c),_=n("42872"),f=n("358472"),m=n("797973"),h=n("983096"),p=n("468509"),g=n("818597"),y=n("919441");let{Context:E,useCtxSelector:I}=(0,s.q)({enable:!1,isAbrOpen:!1,abrQuality:"",setIsAbrOpen:v(),getIsAbrOpen:()=>!1,getShouldDisableManualHandler:()=>!1});function L(e){let{qualities:t,streamInfo:n,getPlayerUrl:r,player:l,setQuality:s,maxAbrQuality:c="origin",disableChange:v,setPlayerUrl:p,updateConfig:g}=e,I=(0,d.useGetAbrQualityAB)(),[L,w]=(0,a.useState)(()=>I&&(0,_.RE)()),N=(0,a.useRef)(L),S=(0,m.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return(0,f.n5)({url:e,streamInfo:n,qualities:t})}),[C,T]=(0,a.useState)(()=>{var e;return(null===(e=S())||void 0===e?void 0:e.quality)||""}),{isPlayerAbrInit:x,updateConfig:A}=function(e){let{updateConfig:t}=e,n=(0,d.useAbrQualityInitDelayTime)(),[r,l]=(0,y.Z)(!n),o=(0,a.useRef)({}),u=(0,m.Z)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o.current=(0,i._)({},o.current,e),(r||n)&&t(o.current)});return(0,a.useEffect)(()=>{if(!n)return;let e=setTimeout(()=>{l(!0),u({},!0)},n);return()=>{clearTimeout(e)}},[n]),{updateConfig:u,isPlayerAbrInit:r}}({updateConfig:g,enable:I}),P=(0,m.Z)(e=>{if(N.current=e,e){_.t4.clear();let t=S();if((0,u.WH)("LiveAbrCtxProviderMain_setIsAbrOpen",(0,i._)({isOpen:e},t)),!t)return;let{bitrate:n,quality:r}=t;T(r),A({open:e,bitrate:n})}else(0,u.WH)("LiveAbrCtxProviderMain_setIsAbrOpen",{isOpen:e}),A({open:e});w(e)}),b=(0,m.Z)(()=>{var e,i;let l=(null===(e=S())||void 0===e?void 0:e.quality)||C,o=(null===(i=S())||void 0===i?void 0:i.bitrate)||void 0,a=v?[l]:(0,_.GU)({qualities:t,maxAbrQuality:c,currentQuality:l}),{urls:s}=(0,_.zV)({streamInfo:n,qualities:a,currentUrlMap:{[o]:r()}});return o&&(null==s?void 0:s[o])?{urls:s,currentBitrate:o,open:L}:((0,u.WH)("LiveAbrCtxProviderMain_getCurrentUrlsAndBitrateError",{currentQuality:l,canUseQualities:a,currentBitrate:o,abrQuality:C,urls:s}),{urls:{},currentBitrate:void 0,open:!1})});(0,a.useEffect)(()=>{let{urls:e,currentBitrate:t,open:n}=b();A({urls:e,open:n,bitrate:t})},[n,t,v]),(0,a.useEffect)(()=>{let{urls:e,currentBitrate:t,open:n}=b();A({urls:e,bitrate:t,open:n}),(0,u.WH)("LiveAbrCtxProviderMain_isAbrOpen",{urls:e,currentBitrate:t,open:n})},[L]),(0,_.ln)(e=>{let{quality:i}=e;if(!L)return;let r=(0,_.qN)({quality:i,streamInfo:n});if(r&&l){let{urls:e}=(0,_.zV)({streamInfo:n,qualities:t}),l=e[r];l&&p(l),A({urls:e,bitrate:r}),T(i)}});let R=(0,m.Z)(e=>{var t;let n=null===(t=S(e))||void 0===t?void 0:t.quality;(0,u.WH)("LiveAbrCtxProviderMain_playerUrlChange",{newQuqlity:n}),n&&(T(n),s(n,!0))}),O=(0,m.Z)(()=>N.current),k=(0,m.Z)(()=>N.current&&x);return(0,a.useEffect)(()=>{let e=e=>{R(null==e?void 0:e.url),(0,u.WH)("LiveAbrCtxProviderMain_switch_completed",(0,i._)({},e))},t=e=>{(0,u.WH)("LiveAbrCtxProviderMain_switch_error",(0,i._)({},e))},n=e=>{(0,u.WH)("LiveAbrCtxProviderMain_error",(0,i._)({},e))};return null==l||l.on("switch_completed",e),null==l||l.on("urlchange",R),null==l||l.on("switch_error",t),null==l||l.on("error",n),()=>{null==l||l.off("urlchange",R),null==l||l.off("switch_completed",e),null==l||l.off("switch_error",t),null==l||l.off("error",n)}},[l]),(0,h.Z)(()=>{A({open:!1})}),(0,o.jsx)(E.Provider,{value:{enable:I,isAbrOpen:L,setIsAbrOpen:P,abrQuality:C,getIsAbrOpen:O,getShouldDisableManualHandler:k},children:e.children})}let w=e=>{let{children:t}=e;return(0,d.useGetAbrQualityAB)()?(0,o.jsx)(L,(0,i._)({},e)):t};function N(e){let{player:t}=e,n=(0,l._)(e,["player"]),a=(0,m.Z)(()=>{var e,n;return(null==t?void 0:null===(n=t.plugins)||void 0===n?void 0:null===(e=n.abr)||void 0===e?void 0:e.config)||{}}),s=(0,m.Z)(e=>{var n,l,o,s,c;let v=(0,r._)((0,i._)({},a(),e),{debug:(0,u.nj)()}),_=null==t?void 0:null===(n=t.config)||void 0===n?void 0:n.preProcessUrl;"function"==typeof _&&(v.urls=Object.entries(e.urls||{}).reduce((e,t)=>{let[n,i]=t;if(i){var r;e[n]=(null===(r=_(i))||void 0===r?void 0:r.url)||i}return e},{}));let{down_thresh:f,start_limit:m,enable:h}=(0,d.getAbrQualityABParams)()||{};if(h&&Object.assign(v,{start_limit:m,down_thresh:f}),(0,u.qu)("LiveAbrCtxProvider_updateConfig",{changeAbrConfig:e,config:v}),t&&!(null==t?void 0:null===(l=t.plugins)||void 0===l?void 0:l.abr)){null==t||t.registerPlugin(p.Z,v);return}null==t||null===(c=t.plugins)||void 0===c||null===(s=c.abr)||void 0===s||null===(o=s.updateConfig)||void 0===o||o.call(s,v)}),c=(0,m.Z)(()=>{var e;return(null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.url)||""}),v=(0,m.Z)(e=>{if(!!t)t.src=e});return(0,o.jsx)(w,(0,r._)((0,i._)({},n),{updateConfig:s,player:t,getAbrConfig:a,getPlayerUrl:c,setPlayerUrl:v}))}function S(e){let{playerStore:{playerInstance:t}}=(0,g.o)(),n=(0,m.Z)(()=>{var e,n;return null==t?void 0:null===(n=t.config)||void 0===n?void 0:null===(e=n.baseConfig)||void 0===e?void 0:e.abr}),l=(0,m.Z)(e=>{var l,o,a;let s=(0,r._)((0,i._)({},n(),e),{debug:(0,u.nj)()}),c=null==t?void 0:null===(l=t.baseConfig)||void 0===l?void 0:l.preProcessUrl;"function"==typeof c&&(s.urls=Object.entries(e.urls||{}).reduce((e,t)=>{let[n,i]=t;return i&&(e[n]=c(i)),e},{}));let{down_thresh:v,start_limit:_,enable:f}=(0,d.getAbrQualityABParams)()||{};f&&Object.assign(s,{start_limit:_,down_thresh:v}),(0,u.qu)("LiveAbrCtxProviderRefactor_updateConfig",{changeAbrConfig:e,config:s}),null==t||null===(a=t.updateConfig)||void 0===a||a.call(t,{baseConfig:(0,r._)((0,i._)({},null==t?void 0:null===(o=t.config)||void 0===o?void 0:o.baseConfig),{useAbr:!(0,d.getDisableAbrWhenDegrade)(),abr:s})})}),a=(0,m.Z)(()=>(null==t?void 0:t.src)||""),s=(0,m.Z)(e=>{var n,l;null==t||null===(l=t.updateConfig)||void 0===l||l.call(t,{baseConfig:(0,r._)((0,i._)({},null==t?void 0:null===(n=t.config)||void 0===n?void 0:n.baseConfig),{url:e})})});return(0,o.jsx)(w,(0,r._)((0,i._)({},e),{updateConfig:l,player:t,getAbrConfig:n,getPlayerUrl:a,setPlayerUrl:s}))}},42872:function(e,t,n){n.d(t,{GU:function(){return p},RE:function(){return h},j_:function(){return g},ln:function(){return y},qN:function(){return c},t4:function(){return m},zV:function(){return _}}),n(527785),n(250440),n(284961),n(826893),n(429532),n(413806),n(874386);var i=n(816933),r=n(782580),l=n(281268),o=n.n(l),a=n(19670),u=n(442761),s=n(797973),d=n(754089);function c(e){let{quality:t,streamInfo:n}=e;try{var i;let{main:e,backup:r}=null==n?void 0:n.stream[t];return JSON.parse(null===(i=e||r)||void 0===i?void 0:i.sdk_params).vbitrate||void 0}catch(e){(0,a.WH)("qualityToBitrateError",{e,quality:t,streamInfo:n});return}}let v=()=>(0,u.wi)()?"hls":"flv";function _(e){let{streamInfo:t,qualities:n,type:i=v(),currentUrlMap:r}=e;try{let e=null==t?void 0:t.stream,l=n.reduce((t,n)=>{var r,l,o;let a=n.toLocaleLowerCase(),u=(null===(r=e[a])||void 0===r?void 0:r.main)||(null===(l=e[a])||void 0===l?void 0:l.backup);if(!u)return t;let s=null==u?void 0:u[i],d=null===(o=JSON.parse(u.sdk_params))||void 0===o?void 0:o.vbitrate;return!s.includes("https")&&(s=s.replace("http","https")),t[d]=s,t},{});return{urls:Object.assign({},l,r)}}catch(e){return(0,a.WH)("getAbrUrlsFromStreamInfoError",{message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,streamInfo:t,qualities:n,type:i}),{urls:{}}}}let f="undefined"==typeof window,m=(()=>{let e="live_local_quality";return{key:e,get(){if(f)return"";for(let t of document.cookie.split(";")){let[n,i]=t.split("=");if(n.trim()===e)return(0,a.WH)("abrQualityManager_get",{quality:i}),i}return""},set(t){if(f)return;(0,a.WH)("abrQualityManager_set",{quality:t});let n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59).toUTCString();document.cookie=`${e}=${t}; expires=${i}; path=/;domain=.douyin.com`},clear(){if(!f)(0,a.WH)("abrQualityManager_clear"),document.cookie=`${e}=; max-age=0; path=/;domain=.douyin.com`}}})();function h(){return(0,r.getAbrQualityAB)()&&!m.get()}let p=e=>{let{qualities:t,maxAbrQuality:n,currentQuality:r}=e;return t.filter(e=>e===r||i.p[e]<=i.p[n])},g=e=>o()(e.filter(Boolean),e=>i.p[e]);function y(e){let t=(0,s.Z)(t=>{null==e||e(t)});return(0,d.Z)("FORCE_CHANGE_ABR_QUALITY",t)}},140695:function(e,t,n){n.d(t,{h:function(){return u}}),n(874386);var i=n(710199),r=n(379928),l=n(774805),o=n(315985),a=n(88648);function u(e){let[t,n]=(0,a.useState)(!1),u=(0,a.useRef)(null),s=(0,a.useRef)(null),{run:d,cancel:c}=(0,r.Z)(()=>{n(!1)},{wait:300}),v=e=>{e?(c(),n(!0)):d()};return(0,l.Z)(u,{onChange:v}),(0,l.Z)(s,{onChange:v}),(0,o.Z)(()=>n(!1),s),(0,a.useEffect)(()=>{var t;return null==e||null===(t=e.on)||void 0===t||t.call(e,i.FP.BLUR,d),()=>{var t;null==e||null===(t=e.off)||void 0===t||t.call(e,i.FP.BLUR,d)}},[e]),{itemRef:u,panelRef:s,show:t}}},481154:function(e,t,n){n.d(t,{m:function(){return i}});let i="live_2204"},456354:function(e,t,n){n.d(t,{TG:function(){return i},WL:function(){return d},Xk:function(){return o},aN:function(){return r},gL:function(){return c},gX:function(){return a},g_:function(){return l},jx:function(){return v},oP:function(){return u},qY:function(){return s}});var i={DOUBLE:2,2:"DOUBLE",MULTI:6,6:"MULTI"},r={QUIT:"4",UPDATE:"202",RESTART:"201",END:"205"},l={LANDSCAPE:1,1:"LANDSCAPE",VERTICAL:0,0:"VERTICAL"},o={EQUAL:0,0:"EQUAL",FOCUS:1,1:"FOCUS",ZOOM:2,2:"ZOOM"},a={SHOW_SCORE_ZERO:0,0:"SHOW_SCORE_ZERO",SHOW_SCORE:1,1:"SHOW_SCORE",NOT_SHOW_SCORE:2,2:"NOT_SHOW_SCORE"},u={NORMAL:0,0:"NORMAL",FORCE:1,1:"FORCE",RESTART:4,4:"RESTART",CUT_SHORT_WIN:6,6:"CUT_SHORT_WIN",CHANGE:12,12:"CHANGE"},s={WIN:1,1:"WIN",LOSE:2,2:"LOSE",DRAW:3,3:"DRAW"},d={NORMAL:0,0:"NORMAL",VOTE:1,1:"VOTE",C_ENLARGE:6,6:"C_ENLARGE"};let c={0:"PKModType_Default",1:"PKModType_Vote",2:"PKModType_Breakthrough",3:"PKModType_Survival",4:"PKModType_Custom",6:"c_position"},v={0:"BattleEndReason_TimeUp",1:"BattleEndReason_CutShort",2:"BattleEndReason_ModeWin",3:"BattleEndReason_StartPKGame",4:"BattleEndReason_InBattleRestart",5:"BattleEndReason_MultipleMatches3",6:"BattleEndReason_TeamTaskInstantKill",7:"BattleEndReason_ScoreControl",8:"BattleEndReason_RivalRTCUnlink",11:"BattleEndReason_FinishRoom",12:"BattleEndReason_NormalToMultiple",13:"BattleEndReason_MultipleInvite",14:"BattleEndReason_ChangeMode",16:"BattleEndReason_StartOpenGame"}},277429:function(e,t,n){n.d(t,{Ee:function(){return d},UX:function(){return a},VM:function(){return o},VZ:function(){return s},iD:function(){return u}});var i=n(782580),r=n(132607);let l=e=>{let t=(0,i.getLiveLoadStrategyConfig)(e);return function(e){var t;let{maxCoreCount:n,maxMemorySize:r}=(null===(t=(0,i.getLiveLoadStrategyConfig)(e))||void 0===t?void 0:t.lowDevice)||{maxCoreCount:0,maxMemorySize:0};if("undefined"==typeof window||"undefined"==typeof navigator||!n||!r)return!1;let{hardwareConcurrency:l=1/0,deviceMemory:o=1/0}=navigator||{};return l<=n||o<=r}(e)?(null==t?void 0:t.lowDeviceStrategy)||(0,r.genDefaultLiveLoadStrategyConfig)().lowDeviceStrategy:(null==t?void 0:t.highDeviceStrategy)||(0,r.genDefaultLiveLoadStrategyConfig)().highDeviceStrategy};function o(){return(0,i.getInLiveLoadStrategyAB)()?2e3:l().navigationHydrateDelayTime}function a(){return(0,i.getInLiveLoadStrategyAB)()?l().lifeCycleDefaultTimeout:3e3}function u(){return!!(0,i.getInLiveLoadStrategyAB)()&&!!l().lifeCycleUseScheduler}function s(e){var t,n;if(!!(0,i.getInLiveLoadStrategyAB)())return null==l?void 0:null===(n=l())||void 0===n?void 0:null===(t=n.lifeCycleSpecialRenderWhenConfig)||void 0===t?void 0:t[e]}function d(e){var t,n;if(!!(0,i.getInLiveLoadStrategyAB)())return null==l?void 0:null===(n=l())||void 0===n?void 0:null===(t=n.lifeCycleSpecialTaskPriority)||void 0===t?void 0:t[e]}},442761:function(e,t,n){n.d(t,{WE:function(){return y},wi:function(){return m},rr:function(){return I},HD:function(){return L},f9:function(){return E}}),n("882732"),n("544943"),n("874386"),n("250440"),n("284961"),n("826893"),n("50013");var i=n("828782"),r=n("66627"),l=n("910863"),o=n("782580"),a=n("493288"),u=n.n(a),s=n("419631"),d=n.n(s),c=n("900327"),v={FLV:"flv",RTM:"rtm",M3U8:"m3u8"};let _={flv:{protocolName:"flv",fileTypeSuffix:"flv",streamObjKey:"flv"},rtm:{protocolName:"rtm",fileTypeSuffix:"sdp",streamObjKey:"lls"},m3u8:{protocolName:"m3u8",fileTypeSuffix:"m3u8",streamObjKey:"hls"}};var f=n("19670");let m=d()(()=>(0,c.tq)()),h=d()(()=>{var e;let t=null!==(e=(0,i.FJ)().awemePcClient)&&void 0!==e?e:"";return(0,r.y)(t,">=","6.8.0")}),p=e=>{let{pullData:t}=e;try{return JSON.parse((null==t?void 0:t.stream_data)||"{}")}catch(e){return null}},g=e=>{let{pullData:t}=e;try{var n,i;let e=p({pullData:t}),r=(null==e?void 0:e.data)||{},{streamObjKey:l}=_[v.RTM];return null===(i=Object.values(r).find(e=>{var t;return!!(null==e?void 0:null===(t=e.main)||void 0===t?void 0:t[l])}))||void 0===i?void 0:null===(n=i.main)||void 0===n?void 0:n[l]}catch(e){return null}},y=e=>{let{pullData:t,defaultQuality:n,protocol:i=v.FLV}=e;try{var r,o,a,u,s;let e=p({pullData:t});if(!e)return null;let{data:d,options:c}=e,f=n||(null==c?void 0:null===(r=c.default_quality)||void 0===r?void 0:r.sdk_key)||"origin",{streamObjKey:m}=_[i],h=null==d?void 0:null===(a=d[f])||void 0===a?void 0:null===(o=a.main)||void 0===o?void 0:o[m];if(!h){let e=Object.values(d).find(e=>{var t;return!!(null==e?void 0:null===(t=e.main)||void 0===t?void 0:t[m])});h=null==e?void 0:null===(s=e[f])||void 0===s?void 0:null===(u=s.main)||void 0===u?void 0:u[m]}return i===v.RTM&&h&&(h=(0,l.DI)(h,{protocol_stack:"go"})),(null==h?void 0:h.includes("https"))?h:null==h?void 0:h.replace("http","https")}catch(e){return null}},E=u()(e=>{try{let{pathname:t}=new URL(e);return[v.FLV,v.M3U8,v.RTM].find(e=>{let{fileTypeSuffix:n}=_[e];if(t.endsWith(`.${n}`))return e})||v.FLV}catch(t){return(0,f.qu)("getProtocolFromUrl_error",{error:t,url:e}),v.FLV}});function I(e){try{if(m())return v.M3U8;if(function(e){let{playerCoreType:t,abtestData:n,disableRTM:r,pullData:l}=e;try{if(r||!(0,o.getInLiveSearchRTMAB)(n)||t&&"mediastream"!==t)return!1;let e=(0,o.getLiveSearchRTMABConfig)(n);if((0,i.DT)()){if(!h())return!1}else if(!(null==e?void 0:e.enableWeb))return!1;let a=(null==e?void 0:e.enableCdnList)||[],u=g({pullData:l});if(!u)return!1;let{host:s,pathname:d}=new URL(u),c=`${s}${d}`;return a.some(e=>c.includes(`-${e}.`))}catch(e){return(0,f.qu)("getCanUseRTM_error",{error:e},!0),!1}}(e))return v.RTM;return v.FLV}catch(e){return(0,f.qu)("getCanUseProtocol_error",{error:e}),v.FLV}}function L(e){try{return E(e)===v.RTM}catch(e){return!1}}},623947:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(563097);n(88648);var r=n(154632),l=n(713097),o=n.n(l);function a(e){let{content:t,children:n,position:l="top",className:a,tooltipStyle:u={}}=e;return(0,i.jsxs)("div",{className:r.default.tooltips,children:[(0,i.jsx)("div",{className:o()(r.default.popup,r.default[l],a),style:u,children:t}),n]})}},907940:function(e,t,n){n.d(t,{Z:function(){return iS},C:function(){return iw}});var i=n("520739"),r=n("878389"),l=n("368200");n("675373"),n("413806"),n("826893"),n("882732"),n("544943"),n("874386"),n("250440"),n("179133"),n("779788"),n("268917"),n("927234");var o=n("563097"),a=n("88648"),u=n("567754"),s=n("784492"),d=n("377181"),c=n("811796"),v=n("909543"),_=n("549519"),f=n("264961"),m=n("57718"),h=n("659335"),p=n("885762"),g=n("314325"),y=n("734123"),E=n.n(y),I=n("818538"),L=n("555001"),w=n("797973"),N=n("42872"),S=n("328155"),C=n("828782"),T=n("455499"),x=n("63405"),A=n("441447"),P=n("623527"),b=n("983253"),R=n("852664"),O=n("742401"),k=n("772310"),M=n("616003"),D=n("801034"),U=n("618618"),V=n("867204"),j=n("988381"),F=n("578580"),G=n("531067"),H=n("386184"),Y=n("439239"),Z=n("1792"),z=n("802693"),K=n("881725"),B=n("645260"),W=n.n(B),$=n("582746"),Q=n("774444");let q=(e,t,n)=>{let{feedStore:{isActive:i}}=(0,$.Z)(),r=(0,a.useRef)(),l=(0,a.useRef)(0),o=W()(e,"roomId"),{isInPreview:u}=(0,Q.DQ)();(0,a.useEffect)(()=>{if(!!o&&!!i&&!u)return J(e,"set"),clearInterval(r.current),r.current=setInterval(()=>{if(1!==l.current)J(e,"del"),l.current=1;else if(!J(e,"get")){var n;let e=null==t?void 0:null===(n=t.current)||void 0===n?void 0:n.getPlayer();null==e||e.pause(),clearInterval(r.current)}},1e3),()=>{r.current&&clearInterval(r.current)}},[e,n,i,u])},J=(e,t)=>{var n,i,r,l,o;let a=W()(e,"roomId");if(!!a){if(null===(n=window)||void 0===n||!n.localStorage)return!1;try{let e=null===(i=localStorage)||void 0===i?void 0:i.getItem("playRoom"),n=null==e?void 0:e.indexOf(a);if("get"===t)return void 0!==n&&n>-1;if("set"===t)return e?null===(r=localStorage)||void 0===r||r.setItem("playRoom",`${e},${a}`):null===(l=localStorage)||void 0===l||l.setItem("playRoom",`${a}`),!1;else"del"===t&&(null===(o=localStorage)||void 0===o||o.setItem("playRoom",`${a}`))}catch(e){return!1}}};var X=n("31042"),ee=n("153253"),et=n("623582"),en=n("29512"),ei=e=>{let{toolbarData:t={},threshold:l,playTime:o=0}=e,[u,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{var e;if(!(null==t?void 0:null===(e=t.entrance_list)||void 0===e?void 0:e.find(e=>e.component_type===ee.Ls.Cart))||!l)return;(0,en.bootstrap)({biz:en.EBiz.DOUYIN_WEB_LIVE});let a=null,{PylonStrategy:u,EScene:d}=await n.e("81507").then(n.bind(n,338301)),c=new u({biz:en.EBiz.DOUYIN_WEB_LIVE}),v=c.inference({scene:d.EcomPopCard,abConfig:{weight:[.1,.7,1],threshold:{pcPopcardWeight:l||.1,pcPopcardPlaytime:o||0}}});return a=setTimeout(()=>{let e=c.getFeatures(d.EcomPopCardRptFeature);et.logInstance.sendLog("ecomPopcardAiFeature",(0,r._)((0,i._)({},e),{is_hit:v}))},3e3),s(v),()=>{a&&clearTimeout(a)}})()},[l]),{isHit:u}},er=n("497364"),el=n("896999"),eo=n("431053"),ea=n("201445"),eu=n("153299"),es=n("648050"),ed=n("841195");let ec=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,i._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.75 8.5a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h12.5a2 2 0 0 0 2-2v-11a2 2 0 0 0-2-2H9.75zM15 11.25h-3.75a1 1 0 0 0-1 1V16h2v-2.75H15v-2zm5.75 9.5H17v-2h2.75V16h2v3.75a1 1 0 0 1-1 1z",fill:"#fff"})}))),ev=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,i._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.75 10.5a2 2 0 0 1 2-2h12.5a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H9.75a2 2 0 0 1-2-2v-11zM14 15.75h-3.75v-2H13V11h2v3.75a1 1 0 0 1-1 1zm7.75.5H18a1 1 0 0 0-1 1V21h2v-2.75h2.75v-2z",fill:"#fff"})})));var e_=n("273312"),ef=n("805591"),em=n("623947"),eh=n("794848"),ep=n("618105"),eg=n("540294"),ey=(0,ep.r)(function(e){let{onSwitch:t,on:n=!1,IconOn:i,IconOff:r,hotKey:l,tipClassName:u,disableClick:s=!1,cameraShape:d,btnDisableCallBack:c,setDoubleScreenInfo:v,useYInFull:_=!1}=e,{isInPreview:f,isCssFullScreen:m,isInPreviewActive:h}=(0,Q.DQ)(),{roomStore:{foldChatroom:p}}=(0,$.Z)(),g=(0,a.useRef)(f),y=(0,a.useRef)(h),[E,I]=(0,a.useState)(n);(0,e_.j)();let{player:L}=(0,ef.n)();(0,a.useEffect)(()=>{I(n)},[n]),(0,a.useEffect)(()=>{if(L.usePluginHooks("pc","videoDbClick",()=>(I(e=>(t&&t(!e),!e)),!1)),l){let e=e=>{var n,i;if(g.current&&!y.current)return;let r=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.tagName;if("INPUT"!==r&&"TEXTAREA"!==r&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.contentEditable)!=="true")"KeyY"===e.code&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&I(e=>e?_?(t&&t(!1),L.emit(eg.J,!1),!1):(t&&t(!e),L.emit(eg.J,!e),!e):(t&&t(!0),L.emit(eg.J,!0),!0))},n=e=>{var n,i;let r=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.tagName;if("INPUT"!==r&&"TEXTAREA"!==r&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.contentEditable)!=="true")"Escape"===e.code&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&I(e=>e?(t&&t(!1),L.emit(eg.J,!1),!1):e)};return window.addEventListener("keydown",e),window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keydown",n)}}},[l,_]);let w=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s){c&&(null==c||c({interact_name:"cssfullscreen"}));return}I(!e),t&&t(!e),n||L.emit(eg.J,!e);try{window.requestAnimationFrame(()=>{(0,ed.Y)(v),(0,ed.s)(d.screenStyle)})}catch(e){}};(0,a.useEffect)(()=>{if(s){c&&(null==c||c({interact_name:"cssfullscreen"}));return}L.emit(eg.J,!0);try{window.requestAnimationFrame(()=>{(0,ed.Y)(v),(0,ed.s)(d.screenStyle)})}catch(e){}},[]);let N=(0,C.DT)()?"窗口全屏":"网页全屏",S=(0,a.useRef)(m);return(0,a.useEffect)(()=>{g.current=f,y.current=h,m!==S.current&&(S.current=m,f&&!h&&w(!m,!0))},[f,m,h]),(0,a.useEffect)(()=>{try{h&&!p&&setTimeout(()=>{(0,ed.Y)(v)},300)}catch(e){}},[p,h]),(0,o.jsx)(em.Z,{className:u,content:l?(0,o.jsx)(eh.Z,{btn:"Y",info:E?`退出${N}`:N}):N,children:(0,o.jsx)("div",{onClick:()=>{w(E)},children:E?r&&(0,o.jsx)(r,{})||(0,o.jsx)(ev,{}):i&&(0,o.jsx)(i,{})||(0,o.jsx)(ec,{})})})}),eE=n("72405");n("90506");var eI=n("879214"),eL=n("308910"),ew=n("713111"),eN=n("582296"),eS=n("765208"),eC=n("618360"),eT=n("596161"),ex=n("132607"),eA=n("713097"),eP=n.n(eA),eb=n("53562"),eR=n("149620"),eO=n("122462"),ek=n("767412"),eM=n("509090"),eD=n("75978"),eU=n("798747");let eV={uhd:{high:"4K高帧率",low:"超高清4K"},hd:"超清1080P",sd:"高清720P",ld:"标清480P"};Object.keys(eV);var ej=n("405310");let eF={uhd:"超高清4K 高帧率",hd:"超清1080P",sd:"高清720P",ld:"标清480P"};var eG=n("525613"),eH=n("233909"),eY=n("802913"),eZ=n("906177"),ez=n("182794"),eK=n("358472"),eB=n("140695"),eW={ao:0,0:"ao",ld:1,1:"ld",sd:2,2:"sd",hd:3,3:"hd",uhd:4,4:"uhd",fhd:5,5:"fhd",origin:6,6:"origin"};let e$=()=>((0,a.useEffect)(()=>{window.collectEvent("add_to_desktop_show",{type:"4k",channel_id:eY.g.Lv4k,enter_from:"live_detail"})},[]),(0,o.jsxs)("span",{children:["去下载",(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5005 0.499939L4.50052 5.17743L2.17907 3.03518L1.5009 3.77008L4.66145 6.68667L5.00054 6.99958L5.33963 6.68667L8.50018 3.77008L7.82201 3.03518L5.50052 5.17747L5.5005 0.499939H4.5005ZM1.5 9.5H8.5V8.5H1.5V9.5Z",fill:"white"})})]})),eQ="abr_auto",eq=e=>e===eQ,eJ=(0,eb.Pi)(e=>{let{qualityList:t=[],quality:n="",interceptedQuality:i="",openIntercepted:r=!1,player:l,qualityHandler:u={},openTryWatching:s=!1,screenMode:d="",streamOptions:c={},streamInfo:v}=e,{userStore:{userInfo:_},streamStore:{leadingData:f,setLocalQuality:m},eventStore:{playerEvent:h},roomStore:{isAsianGames:p},feedStore:{setSkipLowQuality:g}}=(0,$.Z)(),y=(0,e_.j)(),E=(0,eK.iC)(v),{abrEnable:I,isAbrOpen:L,setIsAbrOpen:w,abrQuality:S}=(0,ez.K6)(e=>({abrEnable:e.enable,isAbrOpen:e.isAbrOpen,setIsAbrOpen:e.setIsAbrOpen,abrQuality:e.abrQuality})),T=W()(f,"items.label_lead.lead_content.label",""),{enableOlympic4k:x,openOrDownloadClient:A}=(0,ej.M)(),P=(0,a.useMemo)(()=>t.filter(e=>!x||!!eF[e]).reverse(),[t,x]),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u&&(null==u?void 0:u.setCurrentQuality)&&(null==u||u.setCurrentQuality(e),(p||(null==y?void 0:y.liveInnerFeed))&&(m(e),g(!0)),null==h||h.liveBitRateSwitchEvent({before_definition:`${t?"auto_":""}${V.Kt[n]}`,select_definition:V.Kt[e],screen_model:d}))},R=(0,a.useMemo)(()=>new Set(P.filter(e=>(!r||!i||!(eW[i]<=eW[e]))&&(!x||!!(0,C.DT)()||"uhd"!==e)&&!0)),[P,r,i,x]);(0,eG.Z)(()=>{let e=(0,C.DT)();x&&(!eF[n]||"uhd"===n&&!e)&&b(P.find(e=>R.has(e)))},[x,P,n,null==u?void 0:u.setCurrentQuality,R]);let{itemRef:O,panelRef:k,show:M}=(0,eB.h)(l);(0,a.useEffect)(()=>{M&&(null==h||h.liveSdkDefinitionPanelShow({definition:(L?"auto_":"")+V.Kt[n],definition_set_type:L?"auto":"manual"}))},[M]);let D=(e,t)=>{if(eq(e)){let e=ek.X7[S||n];return`自动${e&&L?`(${e})`:""}`}if(x)return eF[e];if(p&&c){if("uhd"!==e)return eV[e];{var i,r,l,o;let n=null==c?void 0:null===(l=c.qualities)||void 0===l?void 0:null===(r=l.find)||void 0===r?void 0:null===(i=r.call(l,t=>(null==t?void 0:t.sdk_key)===e))||void 0===i?void 0:i.fps,a=null===(o=eV.uhd)||void 0===o?void 0:o[n>25?"high":"low"];return`${a}${t?"（限免）":""}`}}else return E===e?ek.X7.origin:ek.X7[e]},U=e=>e===n||"origin"===e&&E===n,j=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let n=U(e);if(s&&!n){N.t4.set(e),b(e,t),eM.F.info(`已为您切换到${D(e)}画质`,l.root),null==l||l.__getPlayerLogger().updateExt({definition:e});return}if(e&&r&&i&&eW[i]<=eW[e]){null==l||l.exitFullscreen(),(0,eD.p)().then(t=>{var n,i;t({success:()=>{(0,eU.QX)(e),N.t4.set(e),!(0,eZ.I)()&&window.location.reload()},next:`https://${null===(i=window)||void 0===i?void 0:null===(n=i.location)||void 0===n?void 0:n.host}`,headerText:"登录后免费畅享超高清画质",enterMethod:"hd_live",clarity:e})});return}if(!n){b(e,t),N.t4.set(e),eM.F.info(`已为您切换到${D(e)}画质`,l.root),null==l||l.__getPlayerLogger().updateExt({definition:e});return}}catch(e){}},[i,n,P,r,u,_.id_str]),[F,G]=(0,a.useState)(""),H=e=>{let t=F===e,i=U(e),r=i&&!L||t;if(eq(e))return{labelJSX:null,clickHandler:()=>{w(!0),null==h||h.liveBitRateSwitchEvent({before_definition:`${L?"auto_":""}${V.Kt[n]}`,select_definition:`auto_${V.Kt[n]}`,screen_model:d})},isActiveItem:L||t};if(!(0,C.DT)()&&x&&(0,ej.K)(e))return{labelJSX:(0,o.jsx)("div",{className:eP()(eH.default.label,t&&eH.default.goDownload),children:t?(0,o.jsx)(e$,{}):"客户端专享"}),clickHandler:A,isActiveItem:r};let l=!R.has(e);return{labelJSX:l?(0,o.jsx)("div",{className:eH.default.label,style:{visibility:t?"visible":"hidden"},children:T}):null,clickHandler:()=>{if(!!L||!i)l||w(!1),j(e,L)},isActiveItem:r}},Y=(0,a.useMemo)(()=>{let e=new Set(P);return(E&&"origin"!==E&&e.has("origin")&&e.has(E)&&e.delete(E),I)?[eQ,...e]:[...e]},[I,L,P,E]);return(0,o.jsx)("div",{className:eH.default.container,children:(0,o.jsxs)("div",{className:eH.default.toolbar,children:[(0,o.jsx)("div",{className:eH.default.quality,"data-e2e":"quality",ref:O,children:L?"自动":D(n,!0)}),(0,o.jsx)("div",{ref:k,className:eP()(eH.default.menu,M?eH.default.show:eH.default.hidden),children:(0,o.jsx)("div",{className:eH.default.tags_container,"data-e2e":"quality-selector",children:Y.map(e=>{let{labelJSX:t,clickHandler:n,isActiveItem:i}=H(e);return(0,o.jsx)("div",{className:eH.default.tags,onMouseEnter:()=>G(e),onMouseLeave:()=>G(""),onClick:n,children:(0,o.jsxs)("div",{className:eH.default.tips,style:{color:i?"#FFFFFF":"#FFFFFF99",background:i?"#f2f2f414":""},children:[(0,o.jsx)("div",{className:eH.default.text,style:{color:i?"#FFFFFF":"#FFFFFF99"},children:D(e,!0)}),t]},e)},e)})})})]})})});var eX=n("995902"),e0=(0,a.memo)(e=>{let{messageFrom:t}=e,[n,i]=(0,a.useState)(!1),[r,l]=(0,a.useState)("正在播放手机端的直播"),u=(0,a.useRef)(null),s=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{!s.current&&"app"===t&&"app_continued"===(0,b.Rs)("url_source")&&"live"===(0,b.Rs)("from_app_resume")&&(l("正在播放手机端的直播"),i(!0),s.current=!0)},[t]),(0,a.useEffect)(()=>(n&&(u.current=setTimeout(()=>{i(!1)},3e3)),()=>{clearTimeout(u.current)}),[n]),n?(0,o.jsx)("div",{className:eX.default.tips,children:(0,o.jsx)("p",{children:r})}):null}),e1=n("156817"),e2=n("737466"),e3=n("9034"),e6=n("779145"),e8=n.n(e6),e5=e=>{let{linkmicStore:{enlargedSeatPostion:t,linkMicSeats:n,linkMicLayout:i},userStore:{userInfo:r},eventStore:{linkmicEvent:l}}=(0,$.Z)(),o=a.useRef(e),[u,s]=a.useState(!1);a.useEffect(()=>{o.current=e},[e]);let d=()=>{u&&(null==l||l.liveSdkLiveGuestEnlargeOver({play_mode:["request_song"],enlarge_user_id:null==r?void 0:r.id_str,enlarge_user_type:"guest"}))};a.useEffect(()=>(window.addEventListener("beforeunload",d),()=>{window.removeEventListener("beforeunload",d)}),[d]);let c=a.useMemo(()=>{var e,t,l;if(i===e3.yP.VIDEO_2V4V4||i===e3.yP.AUDIO_DOUBLE_C)return!!e8()(n||{}).slice(0,2).some(e=>{var t,n;return(null==r?void 0:r.id_str)===(null==e?void 0:null===(n=e.user)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id_str)})||!1;return(null==r?void 0:r.id_str)===(null==n?void 0:null===(l=n[0])||void 0===l?void 0:null===(t=l.user)||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.id_str)||!1},[r,n,i]);a.useEffect(()=>{u&&i===e3.yP.AUDIO_DOUBLE_C&&e2.mp.start()},[u,i]),a.useEffect(()=>{-1!==t?c&&!u?(e2.Ul.start(),null==l||l.liveSdkLiveGuestEnlargeStart({play_mode:["request_song"],enlarge_user_id:null==r?void 0:r.id_str,enlarge_user_type:"guest"}),s(!0)):!c&&u&&(null==l||l.liveSdkLiveGuestEnlargeOver({play_mode:["request_song"],enlarge_user_id:null==r?void 0:r.id_str,enlarge_user_type:"guest"}),s(!1)):u&&(null==l||l.liveSdkLiveGuestEnlargeOver({play_mode:["request_song"],enlarge_user_id:null==r?void 0:r.id_str,enlarge_user_type:"guest"}),s(!1))},[t,c])},e4=n("448721"),e7=n("922894"),e9=n("104013"),te=e=>{var t,n;let{likeStatus:i,roomId:r,userInfo:l,isYellowCard:o=!1}=e,{roomStore:{roomInfo:u,setRoomInfo:s,setIsDoubleLike:d},feedStore:{isActive:c},eventStore:{playerEvent:v},singletonStore:{message:_}}=(0,$.Z)(),[f,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[E,I]=(0,a.useState)([]),L=(0,a.useRef)(0),w=(0,a.useRef)(0),N=(0,a.useRef)(),S=e=>{let t=W()(l,"id");if(!!t)(0,e4.vL)({room_id:r,count:L.current?L.current:1}).then(n=>{var i,r,l;let{data:o,headers:a}=n;(null==o?void 0:o.status_code)!==0?eM.F.info((null==o?void 0:null===(i=o.data)||void 0===i?void 0:i.prompts)?null==o?void 0:null===(r=o.data)||void 0===r?void 0:r.prompts:"您手速太快了，请休息一下"):null==v||null===(l=v.liveLikeEvent)||void 0===l||l.call(v,e,t,L.current,null==a?void 0:a["x-tt-logid"]),w.current=Date.now()})};(0,a.useEffect)(()=>{(async()=>{var e,t,n,i,l,a;if(!c||!r)return;let{data:u}=await (0,e7.fp)({room_id:r,scene:10}),s=null==u?void 0:null===(t=u.data)||void 0===t?void 0:null===(e=t.like_icon_info)||void 0===e?void 0:e.icons,d=null==u?void 0:null===(a=u.data)||void 0===a?void 0:null===(l=a.like_icon_info)||void 0===l?void 0:null===(i=l.component_related_icons)||void 0===i?void 0:null===(n=i[1])||void 0===n?void 0:n.icons;if(!s&&!d)return;if(d&&o&&I(d),!!s)I(s)})()},[r,o,c]),(0,a.useEffect)(()=>{if(!c)return;let e=W()(i,"SpecialStyle.Like.UnableStyle",""),t=e.toString(2);if(null==i?void 0:i.Digg)m(!0);else{m(!1);return}0===e||""===e?(p(!0),y(!0)):e&&e>0&&(t&&Number(t[(null==t?void 0:t.length)-1])?(t.length>=1&&Number(t[t.length-2])?p(!0):p(!1),t.length>=2&&Number(t[t.length-3])?y(!0):y(!1)):(p(!1),y(!1)))},[null==i?void 0:i.Digg,null==i?void 0:null===(n=i.SpecialStyle)||void 0===n?void 0:null===(t=n.Like)||void 0===t?void 0:t.UnableStyle,c]),(0,a.useEffect)(()=>{if(!!c)return null==_?void 0:_.on("LikeMessage",e=>{e.map(e=>{var t;let n=Number(W()(u,"like_count",0)),i=Number(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.total);i>n&&(0,e9.runInAction)(()=>{u.room.like_count=i,null==s||s(u)})})})},[u,s,c,_]);let C=(0,e_.j)();return(0,a.useEffect)(()=>{var e;if(!c||!_)return;let t=null==_?void 0:null===(e=_.wrds)||void 0===e?void 0:e.on("RoomDataSyncMessage","DoubleLikeSyncData",e=>{var t,n,i;d(null==e?void 0:null===(i=e.payload)||void 0===i?void 0:null===(n=i.payload)||void 0===n?void 0:null===(t=n.doubleLikeStatus)||void 0===t?void 0:t.double_flag)});return()=>{null==t||t()}},[c,_,C]),{icons:E,isLike:f,isClickLike:h,isShowLike:g,userLike:e=>{clearTimeout(N.current),Date.now()-w.current>=2e3&&0!==L.current?(L.current=L.current+1,S(e),L.current=0):(L.current=L.current+1,N.current=setTimeout(()=>{S(e),L.current=0},2e3))}}},tt=n("54803"),tn=n("997441");n("209955");var ti=n("201308"),tr=n("64814");function tl(e){let t=(0,a.useContext)(h.X);if(void 0===t)throw(0,ti.g)("roomStore"),Error("roomStore must be used within Provider");return(0,tr.oR)(t,e)}var to=e=>{let{className:t=""}=e,n=(0,a.useRef)(),i=tl(e=>e.setRootElement),r=tl(e=>e.childElementList);(0,a.useEffect)(()=>{n.current&&i(n.current)},[n.current]);let l=(null==r?void 0:r.length)===0?0:375;return(0,o.jsx)("div",{className:eP()(tn.default.liveRightPanel,t),style:{width:`${l}px`,opacity:l>0?1:0,marginLeft:r.length>0?8:0,marginRight:r.length>0?8:0},children:(0,o.jsx)("div",{ref:n,className:tn.default.liveRightPanelChildren})})},ta=n("728974"),tu=()=>{let{linkmicStore:{setFunctionType2:e},singletonStore:{message:t}}=(0,$.Z)();return a.useEffect(()=>null==t?void 0:t.syncOn("LinkMicMethod",t=>{let{method:n,payload:i}=t;if(!!n&&!!i)switch(Number(i.message_type)){case ta.iM.TYPE_TURNON:let{function_type:r}=i;e(r);break;case ta.iM.TYPE_FINISH:e("")}}),[t]),null},ts=n("269025"),td=n("459755"),tc=n("606006"),tv=n("309427");n("284961");var t_=n("331593"),tf=n("976928"),tm=n("284116");let th=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,i._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.923 2.744a.833.833 0 0 0-1.179 0L6.077 9.411a.833.833 0 0 0 0 1.178l6.667 6.667a.833.833 0 1 0 1.179-1.179L7.845 10l6.078-6.077a.833.833 0 0 0 0-1.179z",fill:"#fff",fillOpacity:".9"})})));var tp=n("370612"),tg=n("970838"),ty=n.n(tg);n("465349");var tE=n("774735"),tI=n("895091"),tL=n("152893");let tw=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,i._)({width:26,height:26,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M16.317 18.731a1.393 1.393 0 0 1-1.97 0L9.29 13.675a1.393 1.393 0 0 1 0-1.97l.011-.011 5.045-5.045a1.393 1.393 0 0 1 1.97 1.97l-4.072 4.071 4.072 4.071a1.393 1.393 0 0 1 0 1.97z",fill:"#fff",opacity:".7"})}))),tN=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,r._)((0,i._)({width:26,height:26,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M9.684 18.731a1.393 1.393 0 0 0 1.97 0l5.055-5.056a1.393 1.393 0 0 0 0-1.97l-.011-.011-5.045-5.045a1.393 1.393 0 1 0-1.97 1.97l4.072 4.071-4.071 4.071a1.393 1.393 0 0 0 0 1.97z",fill:"#fff",opacity:".7"})}))),tS=(0,a.forwardRef)((e,t)=>{let{children:n,showScroll:i}=e,[r,l]=(0,a.useState)(!1),[u,s]=(0,a.useState)(!1),d=(0,a.useRef)(null),c=(0,a.useCallback)(()=>{let e=d.current;if(!e||!i)return;let{scrollLeft:t,scrollWidth:n,clientWidth:r}=e;if(!!(n>r))l(t>0),s(t<n-r)},[i]);(0,a.useEffect)(()=>{c()},[]);let v=(0,a.useCallback)(e=>{let t=d.current;if(!t)return;let n=.8*t.clientWidth;t.scrollBy({left:n*e,behavior:"smooth"})},[]),_=(0,a.useCallback)(e=>{let t=d.current;t&&t.scrollBy({left:e})},[]);return(0,a.useImperativeHandle)(t,()=>({scrollBy:_})),(0,o.jsxs)("div",{style:{position:"relative",overflow:"hidden"},children:[(0,o.jsx)("div",{className:tL.default.container,ref:d,onScroll:c,children:(0,o.jsx)("div",{className:tL.default.scrollWrapper,children:n})}),(0,o.jsx)("div",{className:eP()({[tL.default.arrowControl]:!0,[tL.default.right]:!0,[tL.default.show]:u}),children:(0,o.jsx)("button",{className:eP()({[tL.default.arrow]:!0,[tL.default.arrowRight]:!0}),onClick:()=>v(1),children:(0,o.jsx)(tN,{})})}),(0,o.jsx)("div",{className:eP()({[tL.default.arrowControl]:!0,[tL.default.left]:!0,[tL.default.show]:r}),children:(0,o.jsx)("button",{className:eP()({[tL.default.arrow]:!0}),onClick:()=>v(-1),children:(0,o.jsx)(tw,{})})})]})});var tC=n("609609"),tT=n("601362"),tx=(0,eb.Pi)(e=>{let{linkmicStore:{choosePeopleArr:t,setChoosePeopleArr:n},activityIndicatorStore:{JSBInstance:i},singletonStore:{liveContainer:r},roomStore:l}=(0,$.Z)(),{choosePeopleList:u=[]}=(0,tE.Z)($.Z),[s,d]=(0,a.useState)({}),c=W()(l,"roomInfo.roomId",""),v=W()(l,"roomInfo.anchor.id_str"),[_,f]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),p=(0,a.useRef)(null),g=(0,a.useRef)(null),y=(0,a.useRef)(null),{getExhibitionHomeByid:E}=(0,tC.s)({roomId:c,anchorId:v});(0,a.useEffect)(()=>{Promise.all(u.map(e=>{var t,n;return E({uid:null==e?void 0:null===(n=e.user)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id_str,exhibitionSource:tT.x.DETAIL})})).then(e=>{let t={};e.forEach(e=>{var n;let{anchor_id:i="",lighted_items:r=[],unlighted_items:l=[]}=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.data)||{};t[i]={lightedCount:r.length,unlightedCount:l.length}}),d(t)})},u),(0,e_.j)();let I=(0,a.useMemo)(()=>{var e,n,i;return null==u?void 0:null===(i=u.filter(e=>{var n,i,r;return(null==e?void 0:null===(i=e.user)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.id_str)===(null!==(r=null==t?void 0:t[0])&&void 0!==r?r:"")}))||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:null===(e=n.user)||void 0===e?void 0:e.user},[u,t]),L=(0,a.useCallback)(e=>{if(I.id_str!==e)null==r||r.openLandPage({url:(0,tI.oQ)(e),reset:!0}),n([e])},[i,r,I]);(0,a.useEffect)(()=>A.listen(A.EVENT.selectGroupLiveAnchor,e=>{(null==e?void 0:e[0])&&L(null==e?void 0:e[0])}),[L]);let w=(0,a.useMemo)(()=>{if(Object.keys(s).length>0){let e=ty()(u,e=>W()(s,[e.user.user.id_str,"lightedCount"],-1/0),["desc"]);return h(!0),e}return u},[s,u]);return((0,a.useEffect)(()=>{if(!_&&y.current&&m){let e=w.findIndex(e=>e.user.user.id_str===I.id_str);f(!0),e>3&&y.current.scrollBy(74*e+(e-1)*15)}},[_,I,y.current,w,m]),0===w.length)?null:(0,o.jsxs)("div",{className:t_.default.groupContainer,children:[(0,o.jsx)("div",{className:t_.default.select,children:"选择团员："}),(0,o.jsx)("div",{className:t_.default.userContainer,ref:g,children:(0,o.jsx)(tS,{ref:y,showScroll:w.length>4,children:w.map(e=>{var t,n,i,r,l,a,u,d,c;return(0,o.jsxs)("div",{className:eP()(t_.default.user,{[t_.default.selected]:I.id_str===(null===(t=e.user.user)||void 0===t?void 0:t.id_str)}),ref:t=>{var n;I.id_str===(null===(n=e.user.user)||void 0===n?void 0:n.id_str)&&(p.current=t)},onClick:()=>{var t;return L(null===(t=e.user.user)||void 0===t?void 0:t.id_str)},children:[(0,o.jsx)("img",{className:t_.default.avatar,src:null===(r=e.user.user)||void 0===r?void 0:null===(i=r.avatar_thumb)||void 0===i?void 0:null===(n=i.url_list)||void 0===n?void 0:n[0]}),(0,o.jsx)("span",{className:t_.default.name,children:null===(l=e.user.user)||void 0===l?void 0:l.nickname}),s[null===(a=e.user.user)||void 0===a?void 0:a.id_str]?(0,o.jsxs)("span",{className:t_.default.progress,children:[s[null===(u=e.user.user)||void 0===u?void 0:u.id_str].lightedCount,"/",s[null===(d=e.user.user)||void 0===d?void 0:d.id_str].lightedCount+s[null===(c=e.user.user)||void 0===c?void 0:c.id_str].unlightedCount]}):null]})})})})]})}),tA=n("872102"),tP=(0,eb.Pi)(e=>{let t=(0,$.Z)(),{currentLandPage:n,onClose:i,className:r}=e,{rightPanelStore:{openItem:l,isItemShow:s},singletonStore:{liveContainer:d},linkmicStore:{isGroupLive:c}}=t,[v,_]=(0,a.useState)(!1);(0,e_.j)();let{choosePeopleList:f}=(0,tE.Z)($.Z);(0,a.useEffect)(()=>{!s(n)&&setTimeout(()=>{l(n)},0)},[n]);let m=(0,a.useMemo)(()=>n?u.parse(n.split("?")[1]):{},[n]),h=c&&n.includes("revenue_gift_exhibition_hall")&&n.includes("gift_list");return(0,o.jsx)(tf.Z,{itemKey:n,group:tm.k.ACTIndicatorGroup,showClose:"false"!==m.showPcClose,onClose:()=>{i&&i(n)},children:(0,o.jsxs)("div",{className:eP()(t_.default.landPageContainer,r),style:{background:h?"rgb(16, 24, 50)":m.pcBackground||"transparent"},children:[h?(0,o.jsx)(tx,{}):null,(null==d?void 0:d.isSupportLynx())?(0,o.jsx)(tp.kh,{groupId:tA.D.live,url:n,setLoading:_,style:{width:"100%",height:"100%",border:"none",overflow:"hidden"},data:d.getInitData(n)||{},className:eP()({[t_.default.heightWithoutGroup]:h&&(null!=f?f:[]).length>0})}):(0,o.jsx)("div",{className:t_.default.upgrade,children:"您的浏览器版本过低，请升级最新版"}),v&&(0,o.jsx)("div",{className:t_.default.loading,children:(0,o.jsx)(ew.gb,{})})]})})});let tb=(0,eb.Pi)(e=>{let t=(0,$.Z)(),{currentLandPage:n,onClose:i,className:r}=e,{activityIndicatorStore:{JSBInstance:l,closeLandPage:s},rightPanelStore:{openItem:d,isItemShow:c},linkmicStore:{isGroupLive:v}}=t,[_,f]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[p,g]=(0,a.useState)([]),[y,E]=(0,a.useState)(!0);(0,e_.j)();let{choosePeopleList:I}=(0,tE.Z)($.Z),L=(0,a.useRef)({}),w=(0,a.useRef)({}),N=(0,a.useRef)(0),[S,C]=(0,a.useState)(n),T=(e,t)=>{if(m){var n;let i="function"==typeof t?t:void 0;i&&(N.current+=1,L.current[N.current]=i),null===(n=m.contentWindow)||void 0===n||n.postMessage({type:"executeScript",script:e,callbackID:i?N.current:""},"*")}},x=()=>{let e=`
    *::-webkit-scrollbar {display:block !important; height:4px;width:0;}
    .brick-base-key-vision-normal-actions{top:30px;}
    .landing-page-header__rule{top:40px;}
    .render-step__skip-btn{top:40px;}
    .rule-wrapper {border-radius:unset} 
    .exhibition-level-wrapper {border-radius:unset} 
    .my-medal {border-radius:unset}
    .detail-wrapper {border-radius:unset}
    .rare-gift-detail-wrapper {border-radius:unset}
  *::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0);
    width: 12px;
  }
  *::-webkit-scrollbar-corner {
    background-color: rgba(0, 0, 0, 0);
  }
  *::-webkit-scrollbar-thumb {
    width:0px;
    height:4px;
    border-radius: 4px;
    background: rgba(255,255,255,0.7);
    transition: all 1s;
  }
 `;e=e.replace(/\s+/g,""),T(`
      const style = document.createElement('style');
      style.innerText = "${e}"
      document.head.appendChild(style)
    `)},A=(0,a.useMemo)(()=>n?u.parse(n.split("?")[1]):{},[n]),P=()=>{let e=p.pop();g([...p]),e&&(E(!1),C(e),w.current={},setTimeout(()=>{E(!0),m.src=e},0))};(0,a.useEffect)(()=>{n&&m&&(f(!0),m.addEventListener("load",()=>{f(!1),x()}))},[n,m]),(0,a.useEffect)(()=>{let e=e=>{var t,i,r,o,a,u;if((null==e?void 0:e.source)===(null==m?void 0:m.contentWindow)){if((null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.type)==="call_JSB"){if(!l||!m)return;let{methodName:t,params:i=[],callbackID:r}=e.data;if("function"!=typeof l[t]){l._pcNotSupport(t);return}try{if(r){let e=e=>{m.contentWindow.postMessage({type:"executeCallback",callbackID:r,params:e,methodName:t},"*")};w.current[r]&&(e=w.current[r]),w.current[r]=e;let s="call"===t&&i.length<=1?[...i,void 0,e]:[...i,e];if("call"===t&&"close"===s[0]){l[t]("close",{url:n},e);return}if("call"===t&&"openLive"===s[0]){let n=s[1]||{};if("scheme"===n.type&&-1!==((null==n?void 0:null===(o=n.args)||void 0===o?void 0:o.url)||"").indexOf("sslocal://webcast_redirect?entry=exhibition_gift_list_h5")){l[t]("openAnniexWeb",{url:null==n?void 0:null===(a=n.args)||void 0===a?void 0:a.url,reset:null==n?void 0:null===(u=n.args)||void 0===u?void 0:u._noReset},e);return}}if("call"===t&&"hidePcBackIcon"===s[0]){g([]);return}l[t](...s),"on"!==t&&delete w.current[r]}else{if("call"===t&&"close"===i[0]){l[t]("close",{url:n});return}l[t](...i)}}catch(e){}}(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.type)==="execute_script_return_value"&&L.current[e.data.callbackID]&&(L.current[e.data.callbackID](e.data.value),delete L.current[e.data.callbackID]),(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.type)==="page_jump"&&(w.current={},g(t=>{var n;return t.push(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.url),[...t]}))}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[l,m,n,y]),(0,a.useEffect)(()=>{C(n)},[n]),(0,a.useEffect)(()=>{S&&y&&!c(n)&&setTimeout(()=>{d(n)},0)},[S,y,n]);let b=v&&n.includes("revenue_gift_exhibition_hall")&&n.includes("gift_list");return(0,o.jsx)(tf.Z,{itemKey:n,group:tm.k.ACTIndicatorGroup,showClose:"false"!==A.showPcClose,onClose:()=>{i&&i(n)},children:(0,o.jsxs)("div",{className:eP()(t_.default.landPageContainer,r),style:{background:b?"rgb(16, 24, 50)":A.pcBackground||"transparent"},children:[b?(0,o.jsx)(tx,{}):null,y&&(0,o.jsx)("iframe",{src:S,className:eP()(t_.default.iframe,{[t_.default.heightWithoutGroup]:b&&(null!=I?I:[]).length>0}),ref:h,allow:"*"},S),_&&(0,o.jsx)("div",{className:t_.default.loading,children:(0,o.jsx)(ew.gb,{})}),(null==p?void 0:p.length)>0&&"false"!==A.showPcBack&&(0,o.jsx)("div",{className:t_.default.back,onClick:()=>{P()},children:(0,o.jsx)(th,{className:t_.default.leftIcon})})]})})});var tR=(0,eb.Pi)(e=>{let{activityIndicatorStore:{currentLandPage:t,setCurrentLandPage:n}}=(0,$.Z)(),l=e=>{let i=t.findIndex(t=>t.indexOf(e)>=0);if(i>=0){let e=[...t];e.splice(i,1),n(e)}};return t.length>0?(0,o.jsx)(a.Fragment,{children:t.map(t=>(0,o.jsx)(a.Fragment,{children:t.indexOf("sslocal://")>-1?(0,o.jsx)(tP,(0,r._)((0,i._)({},e),{currentLandPage:t,onClose:l})):(0,o.jsx)(tb,(0,r._)((0,i._)({},e),{currentLandPage:t,onClose:l}))},t))}):null}),tO=n("519917"),tk=()=>{let{singletonStore:{message:e},eventStore:{linkmicEvent:t}}=(0,$.Z)();(0,a.useEffect)(()=>null==e?void 0:e.on("LinkmicEcologyMessage",e=>{e.forEach(e=>{let{method:n,payload:i}=e;if(!!n&&!!i){if("WebcastLinkmicEcologyMessage"===n&&(null==i?void 0:i.msg_type)===tO.Qq.TYPE_WEB_ANTI_CHEAT){var r,l;let e={address:null!==(l=null==i?void 0:null===(r=i.web_anti_cheat_content)||void 0===r?void 0:r.entry_web_page_address)&&void 0!==l?l:"",isClient:(0,C.DT)(),payload:JSON.stringify(i)};null==t||t.liveFaceRecognitionPopupReceiveEvent(e)}}})}),[e])},tM=n("727795"),tD=()=>{let{singletonStore:{message:e},roomStore:{roomInfo:t},linkmicStore:{choosePeopleArr:n,setChoosePeopleArr:i,groupLiveMemberList:r,setGroupLiveMemberList:l,groupLiveComponents:o,setGroupLiveComponents:u}}=(0,$.Z)(),s=W()(t,"room.others.group_live_data.is_group_live",0);(0,a.useEffect)(()=>{s&&(0,tM.Sc)({room_id:W()(t,"roomId"),scene:1}).then(e=>{var t,n;let{data:i,logId:r}=e;if((null==i?void 0:i.status_code)!==0)return F.kg.error("获取团员列表失败",i,r),Promise.reject(i);return l(null==i?void 0:null===(n=i.data)||void 0===n?void 0:null===(t=n.members)||void 0===t?void 0:t.map(e=>(e.user.id_str=e.user.id_str?e.user.id_str:e.user.id.toString(),e))),Promise.resolve(i)})},[l,s]),(0,a.useEffect)(()=>{var e,l,o,a,u,s,d,c,v,_;if(!(null==r?void 0:null===(e=r[0])||void 0===e?void 0:e.user))return;let f=[];try{f=JSON.parse(null!==(l=localStorage.getItem(`linkmic-last-choose-people-${null==t?void 0:t.roomId}`))&&void 0!==l?l:"[]")}catch(e){}n&&(null==n?void 0:n.length)!==0?!r.some(e=>{var t;return(null===(t=e.user)||void 0===t?void 0:t.id_str)===f[0]})&&i((null==r?void 0:null===(c=r[0])||void 0===c?void 0:null===(d=c.user)||void 0===d?void 0:d.id_str)?[null==r?void 0:null===(_=r[0])||void 0===_?void 0:null===(v=_.user)||void 0===v?void 0:v.id_str]:[]):i(f.length>0?f:(null==r?void 0:null===(a=r[0])||void 0===a?void 0:null===(o=a.user)||void 0===o?void 0:o.id_str)?[null==r?void 0:null===(s=r[0])||void 0===s?void 0:null===(u=s.user)||void 0===u?void 0:u.id_str]:[])},[r,n,t,i]),(0,a.useEffect)(()=>{if(s)return e.on("GroupLiveMemberChangeMessage",e=>{e.forEach(e=>{var t;let{payload:n}=e;if(!!n)l(null===(t=n.members)||void 0===t?void 0:t.map(e=>e))})})},[l,s]),(0,a.useEffect)(()=>null==e?void 0:e.wrds.on("GroupLiveContainerChangeMessage","",e=>{var t;let n=(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.data)||[],i=[];n.forEach(e=>{if([3,5].includes(e.type)&&(e.horizontal_url_web||e.url_web)){let t="horizontal";try{t=JSON.parse(e.position||"{}").use}catch(e){}i.push({type:e.type,url:"horizontal"===t?e.horizontal_url_web:e.url_web,position:e.position,container_payload:e.container_payload})}}),u(i)}),[e])},tU=n("923805"),tV=n("884082"),tj=n("165153"),tF=n("285385"),tG=n("338426"),tH=n("545342"),tY=n("234062"),tZ=n("259537"),tz=n("266178"),tK=n("633098"),tB=n("700177"),tW=n("881233"),t$=n("74618"),tQ=n("309931"),tq=n("38555"),tJ=n("993574"),tX=n("670580"),t0=n("322072"),t1=n("946351"),t2=()=>(0,o.jsx)("div",{className:t1.default.opBar,children:(0,o.jsx)("div",{className:t1.default.wave})}),t3=(0,eb.Pi)(e=>{let{fullScreen:t,isTheaterOn:n}=e,{player:r}=(0,ef.n)(),{showOperatingBar:l}=(0,tJ.u)(e),{roomStore:{roomInfo:u},giftStore:{isGiftPanelVisible:s}}=(0,$.Z)(),d=()=>{var e,i;return(t||n)&&!s?null===(e=r.controls)||void 0===e?void 0:e.root:"undefined"==typeof document?null:document.getElementById(tB.Nd+(null==u?void 0:null===(i=u.room)||void 0===i?void 0:i.id_str))},[c,v]=(0,a.useState)(()=>d()),_=(0,w.Z)(()=>{v(d())});return((0,a.useEffect)(()=>{if(!!l){if(_(),n||t)return r.addClass(t0.default.operatingBarFade),()=>{r.removeClass(t0.default.operatingBarFade)}}},[n,t,l,s]),(0,a.useEffect)(()=>{let e=A.listen(A.EVENT.LiveMaxMemberLimit,()=>{v(null)});return()=>e()},[]),(0,tq.Z)(()=>{_()},l&&!c?500:void 0),l&&c)?(0,tQ.createPortal)((0,o.jsx)(t$.m,{className:eP()((n||t)&&t0.default.operatingBar,t&&"isDark",{[t0.default.newSkeleton]:n||t}),children:(0,o.jsx)(tX.n,{skeleton:(0,o.jsx)(t2,{}),children:(0,o.jsx)(tW.default,(0,i._)({},e))})}),c):null}),t6=n("459555");function t8(e){return(0,t6.R)()?(0,o.jsx)(t3,(0,i._)({},e)):(0,o.jsx)("div",{children:(0,o.jsx)(tK.default,(0,i._)({},e))})}var t5=n("719533"),t4=e=>{let{singletonStore:{message:t},feedStore:{isChangePending:n}}=(0,$.Z)(),[l,u]=a.useState(""),[s,d]=a.useState(""),[c,v]=a.useState(""),[_,f]=a.useState(!1);(0,a.useEffect)(()=>null==t?void 0:t.wrds.on("RoomDataSyncMessage","",e=>{var t,n,i,r,l,o,a,s;let c=null==e?void 0:null===(n=e.payload)||void 0===n?void 0:null===(t=n.payload)||void 0===t?void 0:t.highlight_items;if(null==c?void 0:null===(i=c[0])||void 0===i?void 0:i.appointment_data){let e=null==c?void 0:null===(r=c[0])||void 0===r?void 0:r.appointment_data;u(null!==(o=null==e?void 0:e.appointment_id)&&void 0!==o?o:""),d(null!==(a=null==e?void 0:e.date_text)&&void 0!==a?a:""),v(null!==(s=null==e?void 0:e.time_text)&&void 0!==s?s:""),f((null==e?void 0:null===(l=e.scheduled_weekdays)||void 0===l?void 0:l.length)>0)}else(null==c?void 0:c.length)===0&&u("")}),[t]);let m=(0,r._)((0,i._)({},e),{appointmentId:l,dateText:s,timeText:c,isCycle:_});return(0,o.jsx)(t5.default,(0,i._)({},m))},t7=n("799453"),t9=n("456354"),ne=n("157818"),nt=n("801887"),nn=n("533029"),ni=n("95596"),nr=n("207480"),nl=n("639194"),no=n("174430"),na=n("476309"),nu=n("16318"),ns=n("20427"),nd=n("730876"),nc=n("241465"),nv=n("512400");let n_=()=>{let{roomStore:{liveStatus:e}}=(0,$.Z)(),{abTestData:t}=(0,e_.j)(),[n,i]=a.useState(!1),{player:r}=(0,ef.n)();return a.useEffect(()=>{let t=()=>{e!==U.zZ.NORMAL?i(!0):i(!1)};return r.on(y.Events.PLAYER_BLUR,t),()=>{r.off(y.Events.PLAYER_BLUR,t)}},[e]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:nv.default.hintCenter,id:"video-center"}),(0,o.jsx)("div",{className:eP()(nv.default.hintBottom,{[nv.default.fadeAnimationHintBottom]:e!==U.zZ.NORMAL&&e!==U.zZ.WEB_FULL&&e!==U.zZ.WEB_FULL_NO_COMMENT&&n,[nv.default.fadeInit]:e!==U.zZ.NORMAL&&e!==U.zZ.WEB_FULL&&e!==U.zZ.WEB_FULL_NO_COMMENT&&!n}),id:"control-right"})]})};var nf=n("261397"),nm=n("944189"),nh=n("774438");let np=e=>{let{player:t}=e,{roomStore:{liveStatus:n}}=(0,$.Z)(),{innerFeedOn:i}=(0,nh.P)(),r=(0,a.useCallback)(e=>{if((null==e?void 0:e.pluginName)==="fullscreen"){let e=t.root.querySelector(".xgplayer-fullscreen .xg-tips");(0,nm.createRoot)(e).render((0,o.jsx)(eh.Z,{btn:"H",info:t.fullscreen?"退出全屏":"进入全屏"}))}if((null==e?void 0:e.pluginName)==="rotate"){let e=t.root.querySelector(".xgplayer-rotate .xg-tips");(0,nm.createRoot)(e).render((0,o.jsx)(eh.Z,{btn:"D",info:"屏幕旋转"}))}},[t]);(0,a.useEffect)(()=>(null==t||t.on("icon_mouseenter",r),()=>{null==t||t.off("icon_mouseenter",r)}),[t,r]);let{isInPreview:l,isInPreviewActive:u,hasModal:s}=(0,Q.DQ)();return(0,a.useEffect)(()=>{if(l&&!u)return;let e=e=>{var n,i,r,l;if(s())return;let o=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.tagName;if("INPUT"!==o&&"TEXTAREA"!==o&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.contentEditable)!=="true")(null==e?void 0:e.shiftKey)&&(null==e?void 0:e.code)==="KeyF"&&A.emit(A.EVENT.focusSearch,{isFocus:!0}),(null==e?void 0:e.code)==="KeyH"&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&(null===(l=t.plugins.fullscreen)||void 0===l||null===(r=l.changeFullScreen)||void 0===r||r.call(l))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,l,u,s]),null};var ng=n("809250"),ny=n("623504"),nE=n("282088");let nI=()=>Promise.all([n.e("92432"),n.e("90337")]).then(n.bind(n,674299)),nL=(0,a.forwardRef)(function(e,t){return(0,o.jsx)(nE.o,(0,i._)({innerRef:t,id:"island_a74ce",load:nI},e))});var nw=n("567006"),nN=n("751365"),nS=n("569541"),nC=n("729532"),nT=n("465571"),nx=n("483347"),nA=n("994572");function nP(e){let{feature:t}=e;return t?(0,o.jsx)(nA.default,(0,i._)({},e)):null}var nb=n("189515"),nR=n("783529"),nO=n("875052"),nk=n("767880"),nM=n("612997"),nD=n("452621"),nU=n("610369"),nV=n("650269"),nj=n("890170"),nF=n("639013"),nG=n("437126"),nH=n("714905"),nY=n("261698"),nZ=n("278630"),nz=n("268171"),nK=n("220113"),nB=n("70854"),nW=n("808317"),n$=n("794102"),nQ=n("701795"),nq=n("115052"),nJ=n("192738"),nX=n("832004"),n0=n("821530"),n1=n("769076"),n2=n("438085"),n3=n("565024"),n6=n("987475"),n8=e=>{let{isChildRoute:t}=e;(0,a.useEffect)(()=>{!t&&n3.Q.removeItem(n6.CookieKeys.LiveInvisibleQuery);let e=()=>{try{var e;n3.Q.setItem(n6.CookieKeys.LiveInvisibleQuery,(0,u.stringify)(null===(e=window)||void 0===e?void 0:e.__INVISIBLE_QUERY__),60)}catch(e){}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[t])},n5=n("553376"),n4=n("295259"),n7=n("213987"),n9=n("558452"),ie=n("816627"),it=n("134221"),ii=n("487330");let ir=e=>{var t;let{visible:n=!1}=e,l=(0,$.Z)(),{singletonStore:{message:o}}=l,[u,s]=(0,a.useState)({selectedGift:null,isVisible:n,gifts:[]});(0,a.useEffect)(()=>{let e=e=>{var t,n;let l=null==e?void 0:e[0],o=null==l?void 0:l.payload;if(o&&(null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.length)>0){let e=o.data[o.data.length-1];if((null==e?void 0:e.type)===6){if(null==e?void 0:e.container_payload){let t=null===(n=JSON.parse(e.container_payload))||void 0===n?void 0:n.data;(null==t?void 0:t.length)>0&&s(e=>(0,r._)((0,i._)({},e),{gifts:t,isVisible:!0}))}else s(e=>(0,r._)((0,i._)({},e),{isVisible:!1}))}}};return null==o||o.on("GroupLiveContainerChangeMessage",e),()=>{null==o||o.off("GroupLiveContainerChangeMessage",e)}},[]),(0,a.useEffect)(()=>{s(e=>(0,r._)((0,i._)({},e),{isVisible:n}))},[n]);let d=(null==l?void 0:null===(t=l.giftStore)||void 0===t?void 0:t.giftList)||[];return{gifts:(0,a.useMemo)(()=>u.gifts.map(e=>{let t=d.find(t=>t.id===e.id);return t?(0,r._)((0,i._)({},e),{price:t.price}):e}),[u.gifts,d]),selectedGift:u.selectedGift,isVisible:u.isVisible}};var il=n("465732"),io=n("709606"),ia=n("517997"),iu=e=>{let{gifts:t,isVisible:n}=ir(e),{sendGift:i}=(0,ia.Z)(),r=(0,a.useRef)(!1),[l,u]=(0,a.useState)(!1),s=async t=>{if(!r.current){r.current=!0;try{var n;await i({gift_id:t.id,count:1,price:t.price||0,giftSource:io._W.GIFT_MENU}),null===(n=e.onGiftSend)||void 0===n||n.call(e,t)}catch(e){}finally{r.current=!1}}};return n?(0,o.jsx)("div",{className:il.default.giftMenuOverlay,children:(0,o.jsx)("div",{className:il.default.giftMenu,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:(0,o.jsx)("div",{className:il.default.giftList,children:t.map(e=>(0,o.jsxs)("div",{className:il.default.giftListItem,children:[(0,o.jsx)("img",{src:e.icon,alt:e.name,className:il.default.giftIcon}),(0,o.jsxs)("div",{className:il.default.giftInfo,children:[(0,o.jsx)("span",{className:il.default.giftName,children:e.name}),l&&e.price&&(0,o.jsxs)("span",{className:il.default.giftPrice,children:[e.price,"钻"]})]}),l?(0,o.jsx)("button",{type:"button",className:il.default.sendGiftButton,onClick:()=>{s(e)},children:"赠送"}):null]},e.id))})})}):null};nC.z.markStart("living_player_js_load");let is=(0,ep.r)(e=>(0,o.jsx)(tH.Z,(0,i._)({className:eO.default.autoPlaySwitch,title:"连播"},e))),id=(0,tG.ZP)(()=>n.e("56362").then(n.bind(n,408661)),{ssr:!1}),ic=(0,tG.ZP)(()=>n.e("22987").then(n.bind(n,246502)),{ssr:!1}),iv=(0,tG.ZP)(()=>n.e("23881").then(n.bind(n,3991)),{ssr:!1}),i_=(0,tG.ZP)(()=>n.e("3047").then(n.bind(n,715465)),{ssr:!1}),im=(0,tG.ZP)(()=>n.e("54691").then(n.bind(n,580511)),{ssr:!1}),ih=(0,tG.ZP)(()=>Promise.all([n.e("28251"),n.e("26848"),n.e("30574")]).then(n.bind(n,166245)),{ssr:!1}),ip=(0,tG.ZP)(()=>n.e("18419").then(n.bind(n,873793)),{ssr:!1}),ig=(0,tG.ZP)(()=>n.e("624").then(n.bind(n,482368)),{ssr:!1}),iy=(0,tG.ZP)(()=>n.e("53051").then(n.bind(n,72915)),{ssr:!1}),iE=(0,tG.ZP)(()=>n.e("7680").then(n.bind(n,884087)),{ssr:!1}),iI=(0,tG.ZP)(()=>Promise.all([n.e("98653"),n.e("12247"),n.e("39331")]).then(n.bind(n,335566)),{ssr:!1}),iL=()=>{let e;try{let t="";t=O.s?(0,c.d)().querystring:window.location.href.split("?")[1],e=u.parse(t)}catch(e){}return e},iw=(e,t)=>{let n=null==e?void 0:e.split("?")[0];if(n===(null==t?void 0:t.split("?")[0]))return!0;try{if(new URL(e).pathname===new URL(t).pathname)return!0;return!1}catch(e){}},iN=e=>{try{var t,n,i,r;if(!(Object.values((null==e?void 0:null===(n=e.room)||void 0===n?void 0:null===(t=n.stream_url)||void 0===t?void 0:t.pull_datas)||{}).length>0&&Object.values((null==e?void 0:null===(i=e.web_stream_url)||void 0===i?void 0:i.pull_datas)||{}).length>0))return!1;return Object.values(null==e?void 0:null===(r=e.web_stream_url)||void 0===r?void 0:r.pull_datas).every(e=>{var t,n;return(null==e?void 0:null===(t=e.extension)||void 0===t?void 0:t.camera_clip)&&(null==e?void 0:null===(n=e.extension)||void 0===n?void 0:n.game_clip)||(0,k.V)(null==e?void 0:e.extension)})}catch(e){return!1}};var iS=(0,eb.Pi)(e=>{var t,n,u,c,y,k,B,J,et,en,ed,ec,ev,ef,em,eh,ep,eg,eA,eb,ek,eM,eD,eU,eV,ej,eF,eG,eH,eY,eB,eW,e$,{onPlay:eQ,onPause:eq,onError:eX,isTheaterOn:e2,onTheaterSwitch:e3,onFullScreenSwitch:e6,isLogPlay:e8,onSend:e4,onArrowClick:e7,isFoldChatroom:e9,isDanmakuFeatureOn:tn,playerCoverText:ti,isPause:tr,refreshPlayer:tl,recommendOnEndRoom:ta,livingRoomErrorStatus:t_,isVerifyed:th,immersive:tp,isFixedChat:tg,inRoomOnAppView:ty,isSpringSkin:tE,fullscreenTarget:tI,hideBanner:tL,onCameraChange:tw,multiCameraLogParams:tN,messageFrom:tS,getPlayer:tC,useContextMenu:tT,disableLiveRecommendOnEnd:tx=!1,onShowVipLiveBoundary:tA,rawStore:tP}=e,tb=(0,l._)(e,["onPlay","onPause","onError","isTheaterOn","onTheaterSwitch","onFullScreenSwitch","isLogPlay","onSend","onArrowClick","isFoldChatroom","isDanmakuFeatureOn","playerCoverText","isPause","refreshPlayer","recommendOnEndRoom","livingRoomErrorStatus","isVerifyed","immersive","isFixedChat","inRoomOnAppView","isSpringSkin","fullscreenTarget","hideBanner","onCameraChange","multiCameraLogParams","messageFrom","getPlayer","useContextMenu","disableLiveRecommendOnEnd","onShowVipLiveBoundary","rawStore"]);(0,nT.C)("living_player");let tO=(0,$.Z)(),tM=(0,v.a)(),tG=iL().r_id,{userStore:{userInfo:tH,odin:tK,setPlayerUserHandlePause:tW,headerUserInfo:t$},roomStore:{setRoomStatus:tQ,roomInfo:tq,setLiveStatus:tJ,liveStatus:tX,isUgcLive:t0,isGameHiddle:t1,setGameHiddle:t2,setPausePop:t3,likeStatus:t6,isAsianGames:t5,doubleScreenInfo:nv,setDoubleScreenInfo:nm,danmakuQueue:nE,danmakuQueueLength:nI,foldChatroom:nA,isFocus:n3,setIsFocus:n6,isAnchorBan:ir,isOlympicGame:il,autoHide:io,setAutoHide:ia,setPipStatus:iw,enableAutoPip:iS,setEnableAutoPip:iC,februaryOptimize:iT,setFebruaryOptimize:ix},feedStore:{isActive:iA,isChangePending:iP,slideStarted:ib,skipLowQuality:iR},linkmicStore:{linkRoomType:iO,linkRoomTypeHooks:ik,linkStatus:iM,guestBattleInfo:iD,orderSingInfo:iU,linkMicLayout:iV,setIsGroupLive:ij,isGroupLive:iF,uiLayout:iG,linkmicVideoEqualLayoutFrameOpt:iH},giftStore:{giftStatus:iY,supportedGiftPages:iZ,giftMessages:iz,effectList:iK,balance:iB,effectSwitchStatus:iW,setEffectSwitchStatus:i$,giftPanelSwitchStatus:iQ,setIsTheaterOn:iq,giftTrayConfig:iJ},appStore:{isSpider:iX},pkStore:{pkStatus:i0,showPKScoreBar:i1,isInPK:i2,isInPunish:i3,pkAppData:i6,pkStatusData:i8,pkListData:i5},audienceStore:{audiencePanelStatus:i4},fansClubStore:{fansClubShowStatus:i7},hybridStore:{containerList:i9},vipStore:{isShowVipPanel:re,setIsShowVipPanel:rt,vipLiveStatus:rn,vipInfoLoaded:ri},eventStore:{playerEvent:rr,tabEvent:rl,basicEvent:ro,ecomEvent:ra,userEvent:ru},isLiveModal:rs,cameraStore:{cameraInfo:rd},singletonStore:{container:rc,message:rv,playerHandler:r_,setPlayer:rf},paidLiveStore:{paidLiveData:rm,setViewType:rh,viewType:rp,setPaidLiveData:rg,retType:ry,setRetType:rE,paidLiveAuth:rI},activityIndicatorStore:{currentLandPage:rL},ecomStore:{cartVisible:rw,setCartVisible:rN,setShowAgreement:rS,showAgreement:rC},streamStore:{isUseVVC:rT,isH265:rx,streamData:rA,setVideoInit:rP,setIsH265Error:rb,lowH265:rR},rightPanelStore:{playerMargin:rO,renderItemList:rk,openItem:rM},vrStore:{isImmersive:rD,isVrLive:rU,isInVrView:rV}}=tO,{cityName:rj}=null!==(eY=(0,ii.Iq)(e=>{let{cityName:t}=e;return{cityName:t}}))&&void 0!==eY?eY:{},rF=(0,p.$s)(e=>{let{setFullscreen:t}=e;return{setFullscreen:t}}),{SlotsComponent:rG,isInPreviewActive:rH,fullScreenTarget:rY,isInPreview:rZ,isCssFullScreen:rz,isInPreviewEnter:rK,isPaidLive:rB,isDoubleScreen:rW,isFullScreen:r$,isAutoNext:rQ,onAutoNextChange:rq,previewOnLoadEnd:rJ,onPause:rX}=(0,Q.DQ)(),r0=(0,a.useRef)(rZ),r1=!rZ&&(0,S.Nr)(tM.pathname),{setDisableScroll:r2,setFullscreen:r3,fullscreen:r6}=(0,ts.Z)(),[r8,r5]=(0,a.useState)(0),{isLivingPip:r4,closeLivingPip:r7}=(0,ne.ds)(),r9=(0,ne.ng)(),le=(0,eI.fl)(),lt=()=>(0,C.DT)()?r9:r9||(0,T.Kv)();(0,a.useEffect)(()=>{[M.kx.LIVE_FINISH,M.kx.KICK_OUT,M.kx.BLOCK].includes(ti)&&r7()},[ti]),(0,a.useEffect)(()=>{rZ&&!rK&&r7()},[rZ,rK]),a.useEffect(()=>{if(!!rs)[eE.cK.LINKED,eE.cK.LINKING].includes(iM)?r2(!0):r2(!1)},[rs,iM]);let ln=(0,e_.j)(),li=a.useMemo(()=>(0,C.DT)(),[]),{name:lr}=(0,nt.V)(),{syncVolume:ll,liveVolumeBalance:lo}=null!=ln?ln:{},la=(0,X.Z)(),lu=W()(tq,"room.status"),ls=W()(tq,"room.live_room_mode"),ld=W()(tq,"room.id_str"),lc=W()(tq,"web_rid"),lv=!!ld,l_=W()(tq,"room.toolbar_data"),lf=(0,a.useRef)(),lm=(0,a.useRef)(!1),lh=(0,a.useRef)({}),lp=(0,a.useRef)(0),lg=(0,a.useRef)(!1),ly=(0,g.AH)(),[lE,lI]=(0,a.useState)(!1),[lL,lw]=(0,a.useState)(!1),[lN,lS]=(0,a.useState)(!1),[lC,lT]=(0,a.useState)(!1),[lx,lA]=(0,a.useState)(!0),[lP,lb]=(0,a.useState)([]),lR=iN(tq),{stream:lO,common:lk,options:lM}=(0,tz.ZP)({disabledH265:lL,doubleScreenAB:!0,doubleScreenInfo:nv,isPullDataExsit:rZ?!!rK&&lR:lR}),lD=(0,a.useMemo)(()=>!1,[]),{ticketInfo:lU}=(0,td.d)(),lV=(0,a.useRef)(null),lj=(0,a.useRef)(!1),lF=a.useMemo(()=>W()(lk,"secret_key",""),[lk]),lG=!1;try{lG="live.douyin.com"!==window.location.host&&(null===(eW=window)||void 0===eW?void 0:null===(eB=eW.location)||void 0===eB?void 0:eB.search.includes("r_player=1"))}catch(e){}let lH=a.useMemo(()=>Number(W()(rm,"paid_type",0))===eC.xc.PAID_LIVE,[rm]),lY=(0,a.useRef)(!0);(0,a.useEffect)(()=>{var e;let t=null===(e=lf.current)||void 0===e?void 0:e.getPlayer();t&&lY.current&&(lY.current=!1,(0,it.K)({scene:"live",location:rj,isLogin:null==t$?void 0:t$.isLogin,forceLoginCallback:()=>{null==t||t.pause()}}))},[lf.current]),a.useEffect(()=>{ij(W()(tq,"room.others.group_live_data.is_group_live",0))},[tq]),tD();let lZ=(0,g.dM)(lM),{openIntercepted:lz,interceptedQuality:lK,openTryWatching:lB,qualities:lW,startQuality:l$,bitrate:lQ}=(0,tZ.Z)({stream:lO,defaultQuality:lZ}),{addH265ErrorNum:lq,resetH265ErrorNum:lJ}=(0,n1.Z)({});n8({isChildRoute:r1});let[lX,l0]=(0,a.useState)(!lH),{url:l1,lowUrl:l2}=(0,tz.le)({stream:lO,startQuality:l$}),l3=(0,a.useRef)(""),[l6,l8]=(0,a.useState)(rZ?"":l1),l5=(0,a.useMemo)(()=>{let e=[];try{e=Object.keys(lO||{}).filter(e=>"ao"!==e).map(e=>{let t;try{t=JSON.parse(lO[e].main.sdk_params)}catch(e){t={resolution:"0x0"}}return{quality:e,resolution:t.resolution,url:(0,D.uC)(lO[e].main.flv)}})}catch(t){e=[]}let t={resolutions:e,dividing:ly,useArea:(null==ln?void 0:ln.liveUseArea)===1,useScore:ly>0,useLongFirstframe:(null==ln?void 0:ln.liveUseFirstFrame)===1};return(0,r._)((0,i._)({},t),{switchUrl:l1,lowUrl:l2})},[lO,ln]),{getSwitchStatus:l4,setSwitchStatus:l7}=(0,n4.P)(),{inActive:l9}=(0,tc.Z)({isActive:iA}),{setLoadStartTime:oe,setTtfbTime:ot,setStreamReceived:on}=(0,tY.Z)({from:rZ?"preview/live":"living",player:null===(t=lf.current)||void 0===t?void 0:t.getPlayer(),isRoomEnd:lu===U.LV.END,eventParams:ro,isH265:rx}),oi=(0,w.Z)(()=>{oe(),nC.z.markOnce("living_player_load_start")}),{innerFeedOn:or}=(0,nh.P)();(0,a.useEffect)(()=>{lb(iZ)},[iZ]),(0,a.useEffect)(()=>{lB&&lA(!1)},[lB]);let ol=(0,a.useCallback)(e=>{lT(e)},[]),[oo,oa]=(0,a.useState)(!1),ou=(0,a.useCallback)(e=>{oa(e)},[]);(0,a.useEffect)(()=>{var e;let t=null===(e=lf.current)||void 0===e?void 0:e.getPlayer();if(rf(t),!!t)null==t||t.on("detectedblackscreen",()=>{lw(!0)})},[null==lf?void 0:null===(n=lf.current)||void 0===n?void 0:n.getPlayer()]),(0,a.useEffect)(()=>{(0,tF.oh)()&&!r1&&!rZ&&(async()=>{let e=await x.invoke("IS_WINDOW_FULLSCREEN");(null==e?void 0:e.data)&&(0,tF.GP)(()=>{var e;let t=null===(e=lf.current)||void 0===e?void 0:e.getPlayer();null==t||t.getFullscreen(tI)})})()},[tI,rZ]),(0,a.useEffect)(()=>{if((0,tF.oh)()&&!rZ){let e=e=>{if(!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!rZ)"KeyH"===e.code&&lE&&A.emit(A.EVENT.exitClientFullscreen)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}},[lE,rZ]);let[os,od]=(0,a.useState)(0),[oc,ov]=(0,a.useState)(!1),[o_,of]=(0,a.useState)(!1),[om,oh]=(0,a.useState)({roomType:"",screenStyle:!1}),[op,og]=(0,a.useState)(!1),{playerWaterMark:oy,volumeWaterMark:oE,updatePlayerStyle:oI}=(0,n5.Z)({user_id:W()(tH,"id_str","")||(null==t$?void 0:null===(u=t$.info)||void 0===u?void 0:u.uid),uuid:null==tK?void 0:tK.user_unique_id,player:null===(c=lf.current)||void 0===c?void 0:c.getPlayer(),isLiveWaterMark:(null==ln?void 0:null===(y=ln.liveWaterMark)||void 0===y?void 0:y.livePlayer)===1&&(!iG||iG<=0),isSmallWindow:r4,isPlayerSucc:op,liveUserWaterMarkEvent:null==ru?void 0:ru.liveUserWaterMarkEvent}),oL=(0,a.useCallback)(e=>{var t;on(),"number"!=typeof e&&(e=void 0),nC.z.markOnce("living_player_loaded_data"),(0,L.j)({roomId:ld,type:"first_frame",duration:e}),of(!0),lg.current=!1,null===(t=tb.onLoadedData)||void 0===t||t.call(tb,e),og(!0);try{null==rJ||rJ()}catch(e){}},[tb.onLoadedData,rJ]),ow=a.useMemo(()=>lE?V.wq.FULL_SCREEN:e2?V.wq.THEATER:V.wq.NORMAL,[lE,e2]),oN=(null===(k=tq.room)||void 0===k?void 0:k.live_room_mode)===U.ke.MEDIA;(0,a.useEffect)(()=>{rs&&r6!==lE&&lI(r6),document.body.classList.toggle("xgplayer-fullscreen-parent",lE)},[r6,rs,lE,lI]);let oS=(0,a.useMemo)(()=>lH&&lu!==U.LV.END&&ti!==M.kx.ANCHOR_BAN&&ti!==M.kx.KICK_OUT,[lH,lu,ti]);a.useEffect(()=>((null==tq?void 0:tq.web_rid)&&(null==r_||r_.setCurrentRoom(tq,l6),null==r_||r_.startHeartDetect()),()=>{null==r_||r_.stopHeartDetect()}),[tq]),(0,a.useEffect)(()=>{if(iA){let e=rs?A.listen(A.EVENT.liveModalPlayerPause,()=>{var e,t;null==lf||null===(t=lf.current)||void 0===t||null===(e=t.getPlayer())||void 0===e||e.pause()}):()=>{};return()=>{null==e||e()}}},[iA,rs]),(0,a.useEffect)(()=>{if((0,tF.oh)()&&!rZ){let e=A.listen(A.EVENT.ControlLiveFullscreenByClient,e=>{let{isFull:t}=e;if(t)(0,I.a)(),(0,tF.GP)(()=>{var e;let t=null===(e=lf.current)||void 0===e?void 0:e.getPlayer();null==t||t.getFullscreen(tI)});else{var n;let e=null===(n=lf.current)||void 0===n?void 0:n.getPlayer();null==e||e.exitFullscreen()}});return()=>{null==e||e()}}},[tI,rZ]),(0,a.useEffect)(()=>{let e=document.getElementById("douyin-sidebar");ow!==V.wq.THEATER||e9?ow===V.wq.THEATER&&e9?tJ(U.zZ.WEB_FULL_NO_COMMENT):ow===V.wq.FULL_SCREEN?tJ(U.zZ.FULL):tJ(U.zZ.NORMAL):tJ(U.zZ.WEB_FULL),e&&(ow!==V.wq.THEATER||e9?e.style.visibility="visible":e.style.visibility="hidden")},[ow,e9]);let oC=a.useRef(!O.s&&(0,j.rC)());(0,s.Z)(()=>{var e;let t=null===(e=lf.current)||void 0===e?void 0:e.getPlayer();if(!!t)iM===eE.cK.LINKED?(oC.current=t.muted,t.muted=!0,t.plugins.play.hide(),t.plugins.volume.hide()):iM===eE.cK.NOT_LINK&&(t.muted=oC.current,t.plugins.play.show(),t.plugins.volume.show())},[iM]),a.useEffect(()=>{var e,t,n,i,r;let l=null===(e=lf.current)||void 0===e?void 0:e.getPlayer();if(!!l)ti===M.kx.KICK_OUT&&(l.muted=!0,l.plugins.play.hide(),l.plugins.volume.hide(),(0,T.DJ)()&&(null==l||null===(n=l.plugins)||void 0===n||null===(t=n.pip)||void 0===t||t.exitPIP())),ti===M.kx.ANCHOR_BAN&&(lm.current=!0,l.muted=!0),lm.current&&ti===M.kx.NONE&&(lm.current=!1,l.muted=!1),ti===M.kx.BLOCK&&(0,T.DJ)()&&(null==l||null===(r=l.plugins)||void 0===r||null===(i=r.pip)||void 0===i||i.exitPIP())},[ti]),a.useEffect(()=>{let e=document.querySelector("#chatroom");null==nm||nm({height:null==nv?void 0:nv.height,width:null==nv?void 0:nv.width,isHideCamera:(null==e?void 0:e.offsetHeight)<600,isInPicture:(0,T.DJ)()||r4})},[(0,T.DJ)(),null==nv?void 0:nv.isHideCamera,r4]),a.useEffect(()=>{var e;let t=null===(e=lf.current)||void 0===e?void 0:e.getPlayer();if(!!t){if(lu===U.LV.END){if(or)return;t.plugins.play.hide(),t.plugins.volume.hide(),(0,T.DJ)()&&t.plugins.pip.exitPIP()}}},[lu]);let oT=a.useCallback(()=>{if(null==r_||r_.setCurrentRoom(tq,l6),null==r_||r_.setUrlAutoChange(!1),lf.current){let e=lf.current.getPlayer();null==r_||r_.setPlayer(e)}return lu!==U.LV.END&&lu!==U.LV.PAUSE&&!0},[tq,l6,lu]),ox=a.useCallback(()=>{lp.current&&Date.now()-lp.current>200&&lp.current&&lg.current&&F.kg.event(`[${P.Tn.Error}]${P.Mo.LiveBasicPlayerWaiting}`,{room_id:W()(tq,"roomId"),url:l6,room_status:lu,is_client:(0,C.DT)(),type:"living"})},[tq,lu,l6]),oA=a.useCallback(()=>{if(oa(!1),oT()){let e=W()(tq,"roomId");null==r_||r_.handlePlaying(e),ox()}},[tq,l6,lu]),oP=a.useCallback(()=>{if(oT()){let e=W()(tq,"roomId");null==r_||r_.handleWaiting(e),!lg.current&&(lp.current=Date.now(),lg.current=!0)}},[tq,l6,lu]),ob=a.useCallback(()=>{if(rx&&lJ(),eQ&&eQ(),null==rX||rX(!1),rP&&rP(!0),od(e=>e+=1),(0,eo.yr)({isLive:1}),oc?null==rl||rl.liveStartEvent({event_page:"live_detail",if_mini_window:(0,tj.OL)()}):ov(!0),oT()){let e=W()(tq,"roomId");null==r_||r_.handlePlay(e)}},[tq,l6,lu,oc,rx]),oR=a.useCallback(()=>{if(lp.current=0,eq&&eq(),null==rX||rX(!0),null==rl||rl.livePauseEvent({event_page:"live_detail",if_mini_window:(0,tj.OL)()}),oT()){let e=W()(tq,"roomId");null==r_||r_.handlePause(e)}},[tq,l6,lu]),oO=a.useCallback(()=>{if(lu===U.LV.LIVING){var e;let t=null===(e=lf.current)||void 0===e?void 0:e.getPlayer();null==t||t.retry();return}if(oT()){let e=W()(tq,"roomId");null==r_||r_.handleEnded(e)}},[tq,l6,lu]),ok=a.useCallback(e=>{if(eX&&eX(e),oT()){if(!l6)return;let i=W()(tq,"roomId");if(rx||rR&&((null==l6?void 0:l6.includes("ld5"))||(null==l6?void 0:l6.includes("sd5")))){var t,n;rb(!0),null==lf||null===(n=lf.current)||void 0===n||null===(t=n.getPlayerLogger())||void 0===t||t.updateExt({h265_miss:1}),lq(),setTimeout(()=>{var t,n,i,r;let l=null===(t=lf.current)||void 0===t?void 0:t.getPlayer();null==l||l.retry(),F.kg.event("player_relegate_url",{room_id:W()(tq,"roomId"),url:null==l?void 0:null===(r=l.plugins)||void 0===r?void 0:null===(i=r.flvlive)||void 0===i?void 0:null===(n=i.loader)||void 0===n?void 0:n.finnalUrl,is_client:(0,C.DT)(),host:null==tM?void 0:tM.host,pathType:(()=>{try{if(tM.pathname.indexOf("root/live")>=0)return"root_live";if(tM.pathname.indexOf("follow/live")>=0)return"follow_live";if(tM.pathname.indexOf("follow")>=0)return"follow";if(tM.search.indexOf("recommend=1")>=0)return"recommend";if("www.douyin.com"===tM.host)return"main";if("live.douyin.com"===tM.host)return"live";return"other"}catch(e){return"error"}})(),isNewProject:0,code:(null==e?void 0:e.code)||(null==e?void 0:e.errorCode),info:(null==e?void 0:e.ex)||"",detail:(()=>{try{return JSON.stringify(e)}catch(e){return"err序列化失败"}})()})},1e3);return}null==r_||r_.handleError(i,e)}},[tq,l6,lu,t5,rx,rR]),oM=a.useCallback(e=>{let t=W()(tq,"roomId"),n=null==r_?void 0:r_.getRoomInfo(t);"switch_play_pause"===e.action&&(tW(!e.paused),n&&(n.USER_PAUSED=!e.paused)),(0,tF.oh)()&&!rZ&&(null==e?void 0:e.action)==="switch_fullscreen"&&(null==e?void 0:e.eventType)==="click"&&(null==e?void 0:e.fullscreen)&&A.emit(A.EVENT.exitClientFullscreen)},[tq,rZ]),{rectRef:oD,handleOpenLiveUserProfileByRect:oU}=(0,nS.FD)(),oV=a.useCallback(e=>{oU({clickSource:"ugc_avatar",targetUserType:"anchor",targetUid:W()(tq,"room.commentary_room_info.user_id","")||W()(tq,"room.commentary_room_info.userId",""),secTargetUid:"",popoverProps:{position:"rightBottom"}})},[tq,tH,tO,t0]),oj=(0,a.useCallback)(()=>{rt({isShow:!1})},[]),[oF,oG]=(0,a.useState)(!1),{isVip:oH,isVipLive:oY,freePreview:oZ}=(0,tV.Rk)(rm,ln);q(tq,lf,os),tk();let oz=(0,a.useMemo)(()=>{let e=[];return i9&&i9.size>0&&i9.forEach((t,n)=>{e.push((0,o.jsx)(tf.Z,{itemKey:n,autoOpen:!0,onClose:()=>{rc.close(n)},group:tm.k.Hybrid,children:(0,o.jsx)("div",{className:eO.default.hybridContainerWrapper,children:(0,o.jsx)("div",{id:(0,er.Mu)(n),className:eO.default.hybridContainer})})}))}),e},[i9]),{isLike:oK,isClickLike:oB,isShowLike:oW,icons:o$,userLike:oQ}=te({likeStatus:t6,roomId:W()(tq,"roomId"),userInfo:tH}),oq=(0,a.useMemo)(()=>({adCid:(0,G.V7)(),adId:(0,G.qV)(),adLogExtra:(0,G.u9)()}),[]);e5(iM);let{isGroupFight:oJ}=(0,z.Z)(),{isGuestBattle:oX}=(0,K.Z)(),o0=(0,a.useRef)(null),{isOrderSing:o1}=(0,e1.Z)(),o2=(0,tt.Z)();(0,a.useEffect)(()=>{var e,t,n,i;null==o0||null===(t=o0.current)||void 0===t||null===(e=t.setCurrentQuality)||void 0===e||e.call(t,l$),lu!==U.LV.END&&(!lO||lO&&(null===(i=Object)||void 0===i?void 0:null===(n=i.keys(lO))||void 0===n?void 0:n.length)===0)&&F.kg.event(`[${P.Tn.Error}]${P.Mo.LiveStreamDataErrror}`,{room_id:W()(tq,"roomId"),quality:l$,streamData:rA,is_client:(0,C.DT)()})},[lO,l$,tq,rA,lu]),(0,a.useEffect)(()=>{var e,t,n,i,r,l,o,a,u,s;if(!!lH)0===rI.FullScreen?null===(r=lf.current)||void 0===r||null===(i=r.getPlayer)||void 0===i||null===(n=i.call(r))||void 0===n||null===(t=n.plugins)||void 0===t||null===(e=t.maskiconplugin)||void 0===e||e.addMask("fullscreen"):null===(s=lf.current)||void 0===s||null===(u=s.getPlayer)||void 0===u||null===(a=u.call(s))||void 0===a||null===(o=a.plugins)||void 0===o||null===(l=o.maskiconplugin)||void 0===l||l.removeMaskIcon("fullscreen")},[rI,lH]);let o3=(0,a.useMemo)(()=>W()(tq,"room.episode_extra.mod.episode_stage")===nN.j.FIRST_LIVE,[tq]),{isHit:o6}=ei({toolbarData:l_,threshold:.1,playTime:.5}),o8=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];nC.z.markOnce("living_player_ready"),null===(e=tb.onReady)||void 0===e||e.call(tb,...n)},o5=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];nC.z.markOnce("living_player_before_player_init"),null===(e=tb.beforePlayerInit)||void 0===e||e.call(tb,...n)};(0,a.useEffect)(()=>{var e,t;let n=null===(t=lf.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);r8>0&&n&&l6&&(n.src=l6)},[l6,r8]),(0,a.useEffect)(()=>{var e;(null===(e=lf.current)||void 0===e?void 0:e.getPlayer)&&"function"==typeof tC&&tC(lf.current.getPlayer())},[lf.current,tC]),(0,a.useEffect)(()=>{let e=localStorage.getItem("webcast_local_quality")||"",t=Array.isArray(lW)&&lW.some(t=>t===e),n=rK!==r0.current||!e8.current;if(r0.current=rK,!rZ||!!rK){if(n&&(null==tH?void 0:tH.isReady)&&iA&&(null==tq?void 0:tq.web_rid)){var l,o,a,u,s,d,c;let e=(0,N.RE)();lX&&(null==rr||null===(d=rr.livePlayEvent)||void 0===d||d.call(rr,(0,i._)((0,r._)((0,i._)({anchor_id:W()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",muted:null===(o=lf.current)||void 0===o?void 0:null===(l=o.getPlayer())||void 0===l?void 0:l.muted,stream_type:la,definition:(e?"auto_":"")+V.Kt[l$],definition_set_type:e?"auto":t?"manual":"",enter_method_temai:null===(u=window)||void 0===u?void 0:null===(a=u.__INVISIBLE_QUERY__)||void 0===a?void 0:a.enter_method_temai,audience_type:(0,H.Zi)(tq)},null!==(c=null==ra?void 0:ra.getLiveShoppingParams(tq))&&void 0!==c?c:{}),{is_viplive:(null===(s=(0,tV.Rk)(rm))||void 0===s?void 0:s.isVipLive)?1:0}),tN))),e8.current=lX}}},[tq,tH,la,e8,l$,iA,tN,lX,rZ,rK]);let o4=i6.ver===t9.TG.DOUBLE?null==i8?void 0:i8.end_reason:null==i5?void 0:null===(B=i5.battle_stats)||void 0===B?void 0:B.end_reason;(0,a.useEffect)(()=>{if(!!i0){if(!i2&&!i3){var e,t,n,i,r;null==rr||null===(r=rr.liveLinkPlayEvent)||void 0===r||r.call(rr,{anchor_id:W()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",muted:null===(t=lf.current)||void 0===t?void 0:null===(e=t.getPlayer())||void 0===e?void 0:e.muted,enter_method_temai:null===(i=window)||void 0===i?void 0:null===(n=i.__INVISIBLE_QUERY__)||void 0===n?void 0:n.enter_method_temai,audience_type:(0,H.Zi)(tq)})}}},[i0,i2,i3,rr,tq,o4]),(0,a.useEffect)(()=>{var e,t,n;if(!!i0||void 0!==o4)null==rr||null===(n=rr.livePKPlayEvent)||void 0===n||n.call(rr,{anchor_id:W()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",stream_type:la,enter_method_temai:null===(t=window)||void 0===t?void 0:null===(e=t.__INVISIBLE_QUERY__)||void 0===e?void 0:e.enter_method_temai,audience_type:(0,H.Zi)(tq),end_reason:o4})},[i0,i2,i3,rr,tq,l$,o4]),(0,a.useEffect)(()=>{let e=localStorage.getItem("webcast_local_quality")||"",t=Array.isArray(lW)&&lW.some(t=>t===e);if(!iP&&ib){var n,l,o,a,u,s,d;null==rr||null===(s=rr.livePlayEvent)||void 0===s||s.call(rr,(0,i._)((0,r._)((0,i._)({anchor_id:W()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",muted:null===(l=lf.current)||void 0===l?void 0:null===(n=l.getPlayer())||void 0===n?void 0:n.muted,stream_type:la,definition:l$,definition_set_type:t?"manual":"",enter_method_temai:null===(a=window)||void 0===a?void 0:null===(o=a.__INVISIBLE_QUERY__)||void 0===o?void 0:o.enter_method_temai,audience_type:(0,H.Zi)(tq)},null!==(d=null==ra?void 0:ra.getLiveShoppingParams(tq))&&void 0!==d?d:{}),{is_viplive:(null===(u=(0,tV.Rk)(rm))||void 0===u?void 0:u.isVipLive)?1:0}),tN))}},[iP,null==tq?void 0:tq.roomId]),(0,a.useEffect)(()=>{var e,t,n;(null===(e=(0,tV.Rk)(rm))||void 0===e?void 0:e.isVipLive)&&ri&&(null==rr||null===(t=rr.vipLiveShowEvent)||void 0===t||t.call(rr,{anchor_id:W()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",livevip_status:rn}),null==rr||null===(n=rr.vipLivePlayEvent)||void 0===n||n.call(rr,{anchor_id:W()(tq,"anchor.id_str",""),room_id:(null==tq?void 0:tq.roomId)||"",livevip_status:rn}))},[rm,ri]),(0,a.useEffect)(()=>{if("app_continued"===(0,b.Rs)("url_source")){var e,t;let n=(0,b.Rs)("enter_from_on_cellphone"),i=(0,b.Rs)("previous_page_on_cellphone"),r=(0,b.Rs)("is_landscape_status_on_cellphone"),l=(0,b.Rs)("enter_method_on_cellphone"),o=(0,b.Rs)("from_device_id"),a=(0,b.Rs)("from_user_id"),u=null!==(t=(0,b.Rs)("from_app_id"))&&void 0!==t?t:"";null==rr||null===(e=rr.continuingRemindShow)||void 0===e||e.call(rr,{enter_from_on_cellphone:n,previous_page_on_cellphone:i,is_landscape_status_on_cellphone:Number(r),enter_method_on_cellphone:l,from_device_id:o,from_user_id:a,room_id:null==tq?void 0:tq.roomId,from_app_name:eT.AppID2AppName[u.toString()],enter_from_merge:"live_continue",enter_method:l})}},[tq]);let o7=(0,a.useMemo)(()=>t0||lR&&!(0,R.G6)(),[t0,lR]);try{or&&(window.__disableReuseAppend__=o7||lH)}catch(e){}(0,a.useMemo)(()=>rk.length>0||lN,[rk,lN]),(0,a.useEffect)(()=>{iA&&(lu!==U.LV.END||oF)&&re&&(!tL||oF)&&rM(tm.k.Vip)},[iA,lu,oF,re,tL,oF]),(0,a.useEffect)(()=>{if("undefined"!=typeof window&&lf.current&&!rZ){var e,t;window._livingPlayer_=null==lf?void 0:null===(t=lf.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t)}},[lf.current,rZ]);let o9=e=>{var t,n,i,r,l,o;if(lH&&0===rI.FullScreen){lU({interact_name:"cssfullscreen"});return}let a=null===(n=lf.current)||void 0===n?void 0:null===(t=n.getPlayer)||void 0===t?void 0:t.call(n);(null==a?void 0:a.fullscreen)&&a.plugins.fullscreen.changeFullScreen(),e&&(null==rr||rr.liveTheaterModeBtnClickEvent(!e,{action_type:"auto"})),!e&&rK&&(null==tO||null===(r=tO.roomStore)||void 0===r||null===(i=r.setFoldChatroom)||void 0===i||i.call(r,!1)),e3&&!(e2&&lE)&&e3(e),e&&(0,T.DJ)()&&(null==a||null===(o=a.plugins)||void 0===o||null===(l=o.pip)||void 0===l||l.exitPIP())};(0,a.useEffect)(()=>{if(l4(n4.$.JUNE_FULLSCREEN_SWITCH)&&o9(!0),(null==lf?void 0:lf.current)&&r1){var e,t,n;let i=null==lf?void 0:null===(t=lf.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);null===(n=E().instManager)||void 0===n||n.setActive(null==i?void 0:i.playerId,!0)}return null==ix||ix((null==ln?void 0:ln.liveFebruaryOptimize)===ex.LiveFebruaryOptimize.On),()=>{o9(!1)}},[r1]);let ae=(0,r._)((0,i._)((0,r._)((0,i._)({user_id:tH.id_str,device_id:null==tK?void 0:tK.user_unique_id,scene:rs?Y.C.liveModal:Y.C.liveDetail},t5?{act_code:"yyh"}:{},il?{act_code:"olympic"}:{}),{live_type:W()(tq,"room.live_room_mode",""),definition:l$,is_game:W()(tq,"room.game_data.game_tag_info.is_game",2),is_live_end:ti&&!(ti===M.kx.ANCHOR_BAN&&iO)?1:0,is_shopping:!!(null===(et=W()(tq,"room.toolbar_data"))||void 0===et?void 0:null===(J=et.entrance_list)||void 0===J?void 0:J.find(e=>e.component_type===ee.Ls.Cart))}),(null===(en=W()(rA,"H265_streamData",void 0))||void 0===en?void 0:en.stream)?{}:{h265_miss:1}),{anchor_id:null==tq?void 0:null===(ed=tq.anchor)||void 0===ed?void 0:ed.id_str,room_id:null==tq?void 0:tq.roomId,is_all_265:!((0,Z.ld)(null,null==rA?void 0:rA.H264_streamData)||(0,Z.ld)(null,null==rA?void 0:rA.H265_streamData)||(0,Z.ld)(null,null==rA?void 0:rA.UGC_streamData)||(0,Z.ld)(null,null==rA?void 0:rA.H265_UGC_streamData))});(0,a.useEffect)(()=>{var e;r1&&(null===(e=lf.current)||void 0===e?void 0:e.getPlayer())&&(null==rF||rF.setFullscreen(!0))},[r1,lf.current]),(0,a.useEffect)(()=>()=>{null==rF||rF.setFullscreen(!1)},[]);let at=(0,a.useMemo)(()=>!lG&&!lv,[lv]),an=(0,a.useMemo)(()=>nx.dr.includes(Number(iG)),[iG]);(0,a.useEffect)(()=>{if(rZ&&r$!==lE){let e=setTimeout(()=>{lI(r$),e6(r$)},1e3);return()=>clearTimeout(e)}},[r$,lE,rZ]);let ai=!rZ||rK;(0,a.useEffect)(()=>{if(l7(n4.$.JUNE_FULLSCREEN_SWITCH,e2||lE),lE&&!e2){ia(!0);return}null==iq||iq(e2),null==ia||ia((!rZ||ai)&&!1),oI()},[rZ,ai,ln,lE,e2]);let ar=async()=>{if(!rZ||!l1||o7){if(or&&!o7){var e;let t=lh.current[null==l1?void 0:null===(e=l1.split("?"))||void 0===e?void 0:e[0]];if(t){if(t.roomId!==(null==tq?void 0:tq.roomId))return;l8(t.finnalUrl)}}return l8(l1),l1}try{if(l3.current){let e=new URL(l3.current).pathname,t=new URL(l1).pathname;if(e===t){l3.current=l1;return}}l3.current=l1;let e=or?await (0,Z.Zb)(l1):await (0,Z.Zb)(l1,0,!0);return l8(e)}catch(e){return l8(l1)}};(0,a.useEffect)(()=>{ar()},[rZ,l1,o7]);let[al,ao]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(rZ&&o7||or&&(lj.current!==o7||lH))&&(lj.current=o7,ao(!1),setTimeout(()=>{ao(!0)},10))},[rK,rZ,o7,lH,or]);let aa=(0,a.useMemo)(()=>{let e=!0;if(rZ&&(e=rK),e&&o7)return"offscreen-video"},[o7,rZ,rK]),au=(0,a.useMemo)(()=>!!al&&(!!ti&&!(ti===M.kx.ANCHOR_BAN&&iO)||!rZ||!!l6),[rZ,l6,al,ti,iO]);(0,a.useEffect)(()=>{if(!r4&&or){var e;let t=null==lf?void 0:null===(e=lf.current)||void 0===e?void 0:e.getPlayer();(null==t?void 0:t.paused)&&(null==t||t.play())}},[r4]),(0,a.useEffect)(()=>{lu===U.LV.END&&((0,n7.q)(tB.a0),(0,n7.q)(tB.zY))},[lu]);let as=(0,a.useMemo)(()=>({stream:lO,options:lM}),[lO,lM]),ad=lz?lK:void 0,ac=(0,N.j_)([null==lM?void 0:null===(ec=lM.default_quality)||void 0===ec?void 0:ec.sdk_key,(0,eK.Hs)(ad)]),av=(0,w.Z)((e,t)=>{var n,i;return null==o0?void 0:null===(i=o0.current)||void 0===i?void 0:null===(n=i.setCurrentQuality)||void 0===n?void 0:n.call(i,e,t)});(0,a.useEffect)(()=>{if(iA&&lv){var e,t,n;if(iA&&lu!==U.LV.END&&!iP&&!i0&&!o7&&!oS&&!r4&&!ik&&lv&&!rw)return;let i=null==lf?void 0:null===(t=lf.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);(null==i?void 0:null===(n=i.plugins)||void 0===n?void 0:n.triplevideo)&&(i.plugins.triplevideo.enable=!1)}},[iA,lu,iP,i0,o7,oS,r4,ik,lv]);let a_=(0,a.useMemo)(()=>W()(tq,"room.linker_map")||{},[tq]),af=(0,a.useMemo)(()=>Object.keys(a_).length>=1,[a_]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:eP()({[eO.default.player]:!0,[eO.default.playerTheaterOn]:e2,[eO.default.isEnd]:iA&&ti&&!(ti===M.kx.ANCHOR_BAN&&iO),[eO.default.isImmersive]:rD,[eO.default.isInVrView]:rV}),style:{marginRight:rO},ref:lV,id:tB.f_+((null==lf?void 0:null===(ef=lf.current)||void 0===ef?void 0:null===(ev=ef.getPlayer())||void 0===ev?void 0:ev.playerId)||""),children:[(0,o.jsx)(eL.TY,{className:eP()(eO.default.basicPlayerPip,{[eO.default.pkEggLibAWrap]:i1}),pipAnchorId:tj.MA.BasicPlayer,placeholder:(0,o.jsx)(nn.o,{}),children:!at&&au?(0,o.jsx)(ni.k2,{componentName:nr.l.BASIC_PLAYER_KEEPER,fallback:()=>{var e,t,n;return null===(n=window)||void 0===n||null===(t=n.location)||void 0===t||null===(e=t.reload)||void 0===e||e.call(t),(0,o.jsx)("div",{children:(0,o.jsx)("p",{children:"请刷新页面"})})},children:(0,o.jsx)(d.wn,{reuseId:tG,container:lV,disabled:!lG||rZ||or&&(o7||lH),afterDomAppend:e=>{let{isReuse:t}=e;if(t){var n,i,r,l,o,a;let e=null==lf?void 0:null===(n=lf.current)||void 0===n?void 0:n.getPlayer(),t=null==lf?void 0:null===(i=lf.current)||void 0===i?void 0:i.getPlayerLogger();!(or&&r4)&&(null===(l=e.plugins)||void 0===l||null===(r=l.rotate)||void 0===r||r.show(),null===(a=e.plugins)||void 0===a||null===(o=a.fullscreen)||void 0===o||o.show()),setTimeout(o5,0),setTimeout(o8,1),setTimeout(oi,2),setTimeout(oL,3),setTimeout(ot,4),setTimeout(eQ,5),t.restart&&t.restart(!0)}},abTestData:ln,children:(0,o.jsx)(nl.Nu,(0,r._)((0,i._)({},tb),{closePauseVideoFocus:!1,roomId:null==tq?void 0:tq.roomId,onReady:o8,beforePlayerInit:o5,onFocus:()=>{n6(!0)},onBlur:()=>{n6(!1)},autoHide:!rZ||ai,videoInit:!iX&&lu!==U.LV.END,autoplay:!rZ&&iA,isPause:iX||lu===U.LV.END||tr,refreshPlayer:tl,className:eP()(eO.default.livingPlayer,r1?"living_player_child_route":"living_player","xgplayer-pc",r1?"isChildRoute":"",i0?"pk-status":"",lE?eO.default.operatingBarFade:""),volume:(0,j.T1)(),url:l6,bitrate:lQ,ref:lf,onFullScreen:e=>{var t,n,i,r,l;!e&&rK&&(null==tO||null===(i=tO.roomStore)||void 0===i||null===(n=i.setFoldChatroom)||void 0===n||n.call(i,!1)),lI(e),e6(e),null==r3||r3(e),null==l7||l7(n4.$.JUNE_FULLSCREEN_SWITCH,e);let o=null==lf?void 0:null===(t=lf.current)||void 0===t?void 0:t.getPlayer();o&&e&&(0,T.DJ)()&&(null==o||null===(l=o.plugins)||void 0===l||null===(r=l.pip)||void 0===r||r.exitPIP()),e3&&!(e2&&lE)&&e3(!1)},icons:{loadingIcon:(0,eR.renderToString)((0,o.jsx)(ew.gb,{className:"live-player-loading loading-optimize",text:"直播加载中"}))},resolutionsel:rZ?null:l5,bgplay:null,mediaType:rZ?rK?aa:void 0:aa,onWaiting:oP,onPlaying:oA,onPlay:ob,onPause:oR,onEnd:oO,onError:ok,onLoadStart:oi,onLoadedData:oL,onTtfb:ot,preloadTime:M.VC,onUserAction:oM,isBlackScreenProbe:(0,no.iz)(),isUgcLive:t0,sessionId:null==lk?void 0:lk.session_id,secretKey:lF,isPaidLive:lH,isVipLive:oY,isVip:oH,freePreview:oZ,needSr:(0,na.By)(ln),maskToast:lU,loggerOptions:ae,flvPreloader:nu.OG?(0,nu.TV)():null,fullscreenTarget:rY||tI,rotate:!0,volumeBalance:lD,playerWaterMark:oy,volumeWaterMark:oE,disableLogger:!!(ti&&!(ti===M.kx.ANCHOR_BAN&&iO)),children:(0,o.jsx)(_.NoSSR,{children:(0,o.jsx)(ez.dp,{player:null==lf?void 0:null===(em=lf.current)||void 0===em?void 0:em.getPlayer(),streamInfo:as,maxAbrQuality:ac,qualities:lW,disableChange:lB&&!lx,setQuality:av,children:(0,o.jsx)(m.x.Provider,{value:tO,children:(0,o.jsx)(h.X.Provider,{value:tP,children:(0,o.jsx)(eI.TC.Provider,{value:le,children:(0,o.jsx)(f.zS,{children:lv&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ni.k2,{componentName:nr.l.SHORT_CUT,children:[iA,!rs,!tL,ai,!iP,null==tq?void 0:tq.room,tH].every(Boolean)&&(0,o.jsx)(ic,{islandMode:"event",islandName:tB.n$,islandTimeout:tB.$4,isFullScreen:lE,isTheaterOn:e2})}),(0,o.jsx)(ni.k2,{componentName:nr.l.SHORT_CUT,children:[iA,!rs,!tL,ai,!iP,!rD].every(Boolean)&&(0,o.jsx)(nb.default,{islandMode:"event",islandName:tB.n$,islandTimeout:tB.$4,isFullScreen:lE,isTheaterOn:e2})}),[iA,!rs,!tL,ai,!iP].every(Boolean)&&(0,o.jsx)(ni.k2,{componentName:nr.l.LIVE_RESERVE_CARD,children:(0,o.jsx)(t4,{islandMode:"event",islandTimeout:tB.$4,islandName:tB.WG,isNormalScreen:!(lE&&!e2),uid:W()(tH,"id_str",""),isPip:r4})}),(0,o.jsx)(ni.k2,{componentName:nr.l.VIP_LIVE_BOUNDARY,children:(0,o.jsx)(iE,{messageInstance:rv,paidLiveData:rm,isInLivingRoom:!0,roomInfo:tq,roomId:ld,abTestData:ln,roomStatus:lu,onShowVipLiveBoundary:e=>{oG(e),null==tA||tA(e)},onBtnClick:()=>{if(null==t$?void 0:t$.isLogin)(0,n9.Z)("live");else{var e,t;(0,eN.default)({success:()=>{!(0,eZ.I)()&&window.location.reload()},enterMethod:"",headerText:"登录后查看更多作品",next:`https://${null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.host}`})}}})}),!r4&&iA&&oK&&!iP&&(0,o.jsx)(ni.k2,{componentName:nr.l.Live_Like,children:(0,o.jsx)(ns.default,{islandMode:"event",islandName:tB.kw,islandTimeout:tB.$4,isClickLike:oB,icons:o$,isFullScreen:lE,isTheaterOn:e2,userInfo:tH,userLike:oQ,classNames:eP()(eO.default.liveLike,{[eO.default.inActive]:l9})})}),ti&&!(ti===M.kx.ANCHOR_BAN&&iO)&&(0,o.jsxs)(nz.default,{islandMode:"idle",cover:W()(tq.anchor,"avatar_thumb.url_list[0]",""),playerEvent:rr,isAnchorBan:ir,isKickOut:ti===M.kx.KICK_OUT,roomId:ld,children:[(0===ta.length||oN)&&ti,!(0===ta.length||oN)&&(0,o.jsx)(nG.default,{islandMode:"idle",rooms:ta,target:"_self",disableLiveRecommendOnEnd:tx})]}),iA&&!iP&&t0&&!t1&&lu!==U.LV.END&&!ti&&(0,o.jsxs)("div",{className:eP()(eO.default.anchor),children:[(0,o.jsx)("img",{className:eO.default.avatar,src:W()(tq,"room.commentary_room_info.avatar.url_list[0]","")||W()(tq,"room.commentary_room_info.avatar.urlList[0]",""),ref:oD,onClick:oV}),(0,o.jsx)("div",{className:eO.default.nickname,children:W()(tq,"room.commentary_room_info.nickname","")})]}),(0,o.jsx)(e0,{messageFrom:tS}),(0,o.jsx)(nd.p,{ext:(0,i._)({ignoreEmptyUrlUpload:lu===U.LV.END||void 0===lu?1:0,roomMode:ls,roomId:ld,webRid:lc,enter_from_merge:null==ro?void 0:null===(eh=ro.getEnterEventParams())||void 0===eh?void 0:eh.enter_from_merge,enter_method:null==ro?void 0:null===(ep=ro.getEnterEventParams())||void 0===ep?void 0:ep.enter_method,_is_new_version:null!==(e$=null===(eg=window)||void 0===eg?void 0:eg.isNewVersionFirstOpen)&&void 0!==e$?e$:"",is_preview:ai?0:1},o2,ae)}),iA&&!iP&&(0,o.jsx)(ni.k2,{componentName:nr.l.ADMIN_PRIVILEGE_PLUGIN,children:(0,o.jsx)(nH.default,{islandMode:"event",islandName:tB.rv,islandTimeout:tB.$4})}),iP?null:(0,o.jsx)(ea.Z,{isVerifyed:th}),!r4&&(0,o.jsx)(nc.u,{}),iA&&(0,o.jsx)(n_,{}),(0,o.jsx)(ni.k2,{componentName:nr.l.ROTATE_PLUGIN,children:iA&&(0,o.jsx)(iv,{layoutType:iV})}),(0,o.jsx)(tv.l,{playerCoverText:ti}),(0,o.jsx)(ni.k2,{componentName:nr.l.DANMAKU_PLUGIN,children:iA&&ai&&!iP&&!rD&&(0,o.jsx)(nP,{islandMode:"event",islandName:tB.QN,islandTimeout:tB.$4,on:!0,feature:tn,livingRoomErrorStatus:t_,roomStatus:lu,containerTagName:"xg-icon",position:"controlsRight",index:11})}),iA&&(0,o.jsx)(eu.Z,{}),!r4&&tn&&ai&&(0,o.jsx)(ni.k2,{componentName:nr.l.DANMAKU_SETTINGS,children:(0,o.jsx)(nf.default,{containerTagName:"xg-icon",position:"controlsRight",index:5,danmakuQueue:nE,danmakuQueueLength:nI,islandMode:"event",islandName:tB.KA,islandTimeout:tB.$4,abTestData:ln})}),iA&&!iP&&iO&&lu!==U.LV.END&&[M.kx.NONE,M.kx.ANCHOR_BAN].includes(ti)&&(0,o.jsx)(ni.k2,{componentName:nr.l.RTC_LAYER_PLUGIN,children:(0,o.jsx)(nJ.default,{islandMode:"event",islandName:tB.GD,islandTimeout:tB.$4,isTheaterOn:e2})}),iA&&!iP&&an&&(0,o.jsx)(ni.k2,{componentName:nr.l.LINK_MIC_DYNAMIC_CONFIG,children:(0,o.jsx)(n0.default,{islandMode:"event",islandName:tB.hx,islandTimeout:tB.$4,isTheaterOn:e2})}),iA&&!iP&&!an&&"audio"===iO&&(0,o.jsx)(ni.k2,{componentName:nr.l.AUDIO_ROOM_PLUGIN,children:(0,o.jsx)(nR.default,{islandMode:"event",islandName:tB.hx,islandTimeout:tB.$4,isTheaterOn:e2,isFullScreen:lE})}),iA&&!iP&&!an&&"video"===iO&&(0,o.jsx)(ni.k2,{componentName:nr.l.VIDEO_ROOM_PLUGIN,children:(0,o.jsx)(nO.default,{islandMode:"event",islandName:tB.jr,islandTimeout:tB.$4,isTheaterOn:e2})}),iA&&!iP&&(an||"audio"===ik||"video"===ik)&&(0,o.jsx)(iy,{isVerifyed:th}),!iA&&!iP&&(an||"audio"===ik||"video"===ik)&&(0,o.jsx)(iI,{anchorId:null==tq?void 0:null===(eA=tq.anchor)||void 0===eA?void 0:eA.id_str,roomId:ld,functionType2:null==tq?void 0:null===(eb=tq.linker_detail)||void 0===eb?void 0:eb.function_type}),!r4&&iM!==eE.cK.LINKED&&lu!==U.LV.END&&(0,o.jsx)(es.Z,{containerTagName:"xg-icon",position:"controlsLeft",index:1,playerCoverText:ti}),iA&&(0,o.jsx)(tu,{}),iA&&lu!==U.LV.END&&iN(tq)&&!r4&&iT&&!ti&&(0,o.jsx)(t7.default,{islandMode:"event",islandName:tB.JR,islandTimeout:tB.$4,playerRef:lf}),!r4&&!rs&&ai&&(0,o.jsx)(ey,{on:e2,setDoubleScreenInfo:nm,cameraShape:om,onSwitch:e=>{var t,n,i,r;let l=lf.current.getPlayer();l.fullscreen&&l.plugins.fullscreen.changeFullScreen(),null==rr||rr.liveTheaterModeBtnClickEvent(!e),!e&&rK&&(null==tO||null===(n=tO.roomStore)||void 0===n||null===(t=n.setFoldChatroom)||void 0===t||t.call(n,!1)),e3&&e3(e),e&&(0,T.DJ)()&&(null==l||null===(r=l.plugins)||void 0===r||null===(i=r.pip)||void 0===i||i.exitPIP())},containerTagName:"xg-icon",position:"controlsRight",index:.5,useYInFull:lE,disableClick:lH&&0===rI.FullScreen,btnDisableCallBack:lU,hotKey:!0}),iM!==eE.cK.LINKED&&lu!==U.LV.END&&Object.keys(lO||{}).length&&l$&&(!rZ||rK)&&(0,o.jsx)(ni.k2,{componentName:nr.l.QUALITY_SWITCH,children:(0,o.jsx)(im,{streamData:lO,defaultQuality:l$,position:"controlsRight",qualityList:lW,sessionId:null==lk?void 0:lk.session_id,screenMode:ow,index:12,url:l6,ref:o0,roomId:ld,player:null===(ek=lf.current)||void 0===ek?void 0:ek.getPlayer(),isAsianGames:t5,showRefreshPage:ou,containerClassName:"QualitySwitchPluginContainer",cachedRedirectedUrlMap:lh.current,children:(0,o.jsx)(eJ,{qualityHandler:o0.current,player:null===(eM=lf.current)||void 0===eM?void 0:eM.getPlayer(),openIntercepted:lz,interceptedQuality:lK,openTryWatching:lB&&!lx,screenMode:ow,watchingFinished:lx,streamOptions:lM,isLogin:null==tH?void 0:tH.id_str,streamInfo:as})})}),rZ&&!rK&&(0,o.jsx)(is,{className:eO.default.autoOpacty,position:"controlsRight",open:rQ,onSwitchChange:rq}),oo&&(0,o.jsx)(ig,{}),iA&&lu!==U.LV.END&&"audio"!==iO&&!ti&&lt()&&!r4&&ai&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ni.k2,{componentName:nr.l.PIP_PLUGIN,children:(0,o.jsx)(nK.default,{islandMode:"event",islandName:tB.fB,islandTimeout:tB.$4,containerTagName:"xg-icon",position:"controlsRight",index:.7,isPip:lC,on:e2,isFullScreen:lE,onTheaterSwitch:e3,feature:tn})}),(0,o.jsx)(ni.k2,{componentName:nr.l.INPICTURE_PLUGIN,children:(0,o.jsx)(nn.D,{isActive:iA,playerRef:lf,handelIsInPic:ol})})]}),(0,o.jsx)(np,{player:null===(eD=lf.current)||void 0===eD?void 0:eD.getPlayer()}),(lE||e2||rZ)&&nA&&!tg&&!r4&&lu!==U.LV.END&&ai&&!iP&&(0,o.jsx)(ni.k2,{componentName:nr.l.FOLD_CHAT_ROOM_COMMENT_PLUGIN,children:(0,o.jsx)(el.default,{position:"controlsLeft",containerClassName:eO.default.liveCommentPlugin,isLogin:null==tH?void 0:tH.id_str,onSend:e4,index:13,isFixedChat:tg,islandMode:"event",islandName:tB.si,islandTimeout:tB.$4})}),(0,o.jsx)(nw.G5,{disEnabled:iO&&iM===eE.cK.LINKED,handleChangeGameHiddle:e=>{t2(e)},setCameraShape:oh,isFullScreen:lE,doubleScreenInfo:nv,linkmicVideoEqualLayoutFrameOpt:iH,ele:"#double_screen"}),iA&&(0,o.jsx)(ng.g,{}),iA&&!ty&&!oF&&!rD&&(0,o.jsx)(ni.k2,{componentName:nr.l.GIFT_BAR,children:(0,o.jsx)(t8,{islandMode:"event",islandName:tB.SH,islandTimeout:tB.$4,enabled:!0,fullScreen:lE&&io,isTheaterOn:e2&&io,giftStatus:iY,playerCoverText:ti,isSpringSkin:tE,giftPages:lP,balance:iB,isLogin:!!W()(tH,"id_str"),giftPanelSwitchStatus:iQ,onCameraChange:(e,t)=>{null==tw||tw(e,t),r5(e=>e+1)},onShowChanged:e=>{},abTestData:ln,isFade:!0,isFullScreen:lE})}),iA&&iY&&ai&&(0,o.jsxs)(o.Fragment,{children:[!r4&&(0,o.jsx)(ni.k2,{componentName:nr.l.EFFECT_SWITCH_PLUGIN,children:(0,o.jsx)(nB.default,{islandMode:"event",islandName:tB.LI,islandTimeout:tB.$4,containerTagName:"xg-icon",position:"controlsRight",index:1,onSwitch:i$})}),iA&&!iP&&(0,o.jsxs)(ni.k2,{componentName:nr.l.GIFT_TRAY_PLUGIN,children:[(0,o.jsx)(nW.default,{islandMode:"event",islandName:tB.T_,islandTimeout:tB.$4,effectSwitchStatus:iW&&ai,giftMessages:iz,giftTrayConfig:iJ})," "]}),iA&&!iP&&(0,o.jsx)(ni.k2,{componentName:nr.l.GIFT_EFFECT_PLUGIN,children:(0,o.jsx)(n$.default,{islandMode:"event",islandName:tB.dq,islandTimeout:tB.$4,effectSwitchStatus:iW&&ai,giftMessages:iz})})]}),iA&&!iP&&o1&&(0,o.jsx)(nF.default,{islandMode:"event",islandName:tB.ng,islandTimeout:tB.$4,orderSingInfo:iU}),iA&&!iP&&(0,o.jsx)(ip,{}),iA&&!iP&&oJ&&(0,o.jsx)(nV.default,{islandMode:"event",islandName:tB.UM,islandTimeout:tB.$4}),iA&&!iP&&oX&&(0,o.jsx)(nj.default,{islandMode:"load",islandName:tB.cE,islandTimeout:tB.$4,guestBattleInfo:iD}),iA&&!iP&&i0&&(0,o.jsx)(ni.k2,{componentName:nr.l.PK_VIEW_PLUGIN,children:(0,o.jsx)(nQ.default,{islandMode:"event",islandName:tB.HC,islandTimeout:tB.$4,currencyName:lr,isFullScreen:lE,isTheaterOn:e2,isFocus:n3})}),!r4&&iA&&iF?(0,o.jsx)(ni.k2,{componentName:nr.l.GROUP_LIVE_PLUGIN,children:(0,o.jsx)(nq.default,{islandMode:"event",islandName:tB.HC,islandTimeout:tB.$4,isTheaterOn:e2})}):null,(0,o.jsx)(ni.k2,{componentName:nr.l.TOOL_BAR_PLUGIN,children:lu!==U.LV.END&&ti!==M.kx.KICK_OUT&&iA&&!iP&&!rD&&(0,o.jsx)(nM.default,{islandMode:"event",islandName:tB.BN,islandTimeout:tB.$4,abTestData:ln,toolbarData:l_,headerUserInfo:t$,roomId:ld,authorId:null==tq?void 0:null===(eU=tq.anchor)||void 0===eU?void 0:eU.id_str,isLiveShopVisible:!0,isLiveShopPopVisible:!0,getLiveShoppingLogParams:null==ro?void 0:ro.getEnterEventParams,promotionListVisible:lN,setPromotionListVisible:lS,adData:oq,messageInstance:rv,layoutType:iV,isLiveModal:rs,isFullScreen:lE,isTheaterOn:e2,roomStatus:lu,isPopcardHitPrefetch:o6,newEcomStyle:!1,giftStatus:iY,isSpringSkin:tE,giftPages:lP,balance:iB,isLogin:!!W()(tH,"id_str"),giftPanelSwitchStatus:iQ,playerCoverText:ti,onCartChange:rN,cartVisible:rw,showAgreement:rC,setShowAgreement:rS})}),iA&&!iP&&!rD&&(0,o.jsx)(tf.Z,{itemKey:tm.k.Vip,onClose:oj,group:tm.k.ACTIndicatorGroup,children:(0,o.jsx)(ni.k2,{componentName:nr.l.VIP_VIEW_PLUGIN,children:(0,o.jsx)(ih,{userInfo:t$,roomInfo:tq,isLogin:!!W()(tH,"id_str"),currencyName:lr})})}),iA&&!iP&&!rD&&(0,o.jsx)(ni.k2,{componentName:nr.l.EFFECT_PLUGIN,children:(0,o.jsx)(nU.default,{islandMode:"event",islandName:tB.eL,islandTimeout:tB.$4,effectList:iK,messageInstance:rv})}),(0,o.jsx)(tU.default,{islandMode:"event",islandName:tB.Wt,islandTimeout:tB.$4,abtestData:(0,r._)((0,i._)({},null!=ln?ln:{}),{forceLogin:"v0"}),roomId:ld,openTryWatching:lB,qualityHandler:o0.current,defaultQuality:l$,setWatchingFinished:lA,interceptedQuality:lK,player:null===(eV=lf.current)||void 0===eV?void 0:eV.getPlayer(),openIntercepted:lz}),iA&&i9.size>0&&!tL&&oz,oS&&(0,o.jsx)(id,{paidLiveData:rm,isLogin:W()(tH,"id_str",""),display_id:W()(tH,"display_id",""),scene:ny.W.IN_LIVING_ROOM,setViewType:rh,viewType:rp,setPaidLiveData:rg,roomId:ld,retType:ry,setRetType:rE,isFirstLive:o3,hybridContainer:rc,message:rv,store:tO,setPaidLiveBurryContrl:l0}),(0,o.jsx)(eS.b,{isActive:iA,currentPlayer:null===(ej=lf.current)||void 0===ej?void 0:ej.getPlayer()}),(lu!==U.LV.END||oF)&&(!tL||oF)&&(0,o.jsx)(tR,{}),iA&&lu!==U.LV.END&&!iP&&(0,o.jsx)(nY.default,{islandMode:"event",islandName:tB.qi,islandTimeout:tB.$4}),iA&&!iP&&lu!==U.LV.END&&(0,o.jsx)(nZ.default,{islandMode:"event",islandName:tB.Io,islandTimeout:tB.$4}),rG?(0,o.jsx)(rG,{}):null,iA&&lu!==U.LV.END&&!iP&&!i0&&!o7&&!oS&&!r4&&!ik&&(0,o.jsx)(n2.Z,{}),iA&&lu!==U.LV.END&&!iP&&!i0&&!o7&&!oS&&!r4&&!ik&&lv&&!af&&!rw&&!rU&&(0,o.jsx)(i_,{index:11,position:"controlsRight",containerTagName:"xg-icon"}),(0,o.jsx)(ie.default,{store:tO,playerInstance:null===(eF=lf.current)||void 0===eF?void 0:eF.getPlayer(),isFullScreen:lE}),(0,o.jsx)("div",{id:`gift_effect_bg_${null==tq?void 0:tq.roomId}`,style:{position:"absolute",left:0,bottom:"-4px",width:"100%",height:"auto",background:"transparent",pointerEvents:"none",zIndex:-1,opacity:"0.5"}})]})})})})})})})}))})}):(0,o.jsx)("div",{style:{width:"100%",height:"100%",background:"#090909",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(ew.gb,{className:"live-player-loading"})})}),(0,o.jsx)(_.NoSSR,{children:lc&&(0,o.jsxs)(o.Fragment,{children:[iA&&!O.s&&!t5&&lu!==U.LV.END&&o_&&!lH&&iM!==eE.cK.LINKED&&!rZ&&(0,o.jsx)(nL,{islandMode:"event",islandName:tB.gC,islandTimeout:tB.$4,roomId:ld,cameraGroupId:null==rd?void 0:rd.groupId,cameraId:null==rd?void 0:rd.cameraId,playerRef:lf,anchorId:null==tq?void 0:null===(eG=tq.anchor)||void 0===eG?void 0:eG.id_str,roomStatus:lu,webRid:null==tq?void 0:tq.web_rid,setRoomStatus:tQ,reasonType:"detail",setPausePop:t3,strategyConfig:W()(tq,"room.others.web_live_port_optimization.strategy_config",""),strategyExtra:W()(tq,"room.others.web_live_port_optimization.strategy_extra",""),isFullScreen:lE,disabled:li,enableClientGuide:!0,abTestData:ln}),iA&&!iP&&iO&&lu!==U.LV.END&&(0,o.jsx)(nX.default,{islandMode:"event",islandName:tB.mp,islandTimeout:tB.$4}),iA&&tT&&(0,o.jsx)(nD.default,{islandMode:"event",islandName:tB.I7,islandTimeout:tB.$4,target:null===(eH=lf.current)||void 0===eH?void 0:eH.getPlayerDom()}),(null==ln?void 0:ln.giftMenu)&&!iP&&lu!==U.LV.END?(0,o.jsx)(iu,{islandMode:"event",islandName:tB.kr,islandTimeout:tB.$4}):null]})})]}),(0,o.jsxs)(_.NoSSR,{children:[(0,o.jsx)(to,{className:eP()(eO.default.rightPanel,{[eO.default.rightPanelTheaterOn]:e2})}),(0,o.jsx)(ni.k2,{componentName:nr.l.LIVING_PIP_WINDOW,children:iA&&lu!==U.LV.END&&"audio"!==iO&&!ti&&lt()?(0,o.jsx)(nk.default,{islandMode:"event",islandName:tB.Hf,islandTimeout:tB.$4,isDoubleScreen:o7,className:rZ?eO.default.inPreview:""},or&&(o7||lH)?"true":"false"):null})]})]})})},767412:function(e,t,n){n.d(t,{X7:function(){return i},xU:function(){return r}});let i={auto:"自动",origin:"原画",fhd:"1440P",uhd:"蓝光",hd:"超清",sd:"高清",ld:"标清"},r={uhd:"4K",hd:"超清1080P",sd:"高清720P",ld:"标清480P"}},269025:function(e,t,n){n.d(t,{Z:function(){return l}}),n("209955");var i=n("88648");let r=(0,i.createContext)({});var l=function(){let e=(0,i.useContext)(r);if(void 0===e)throw Error("feedContext must be used within FeedContextProvider");return e}},405310:function(e,t,n){n.d(t,{K:function(){return d},M:function(){return c}});var i=n(582746),r=n(88648),l=n(717864),o=n(544406),a=n(797973),u=n(802913),s=n(725887);function d(e){return"uhd"===e}function c(){let{triggerDownloadClient:e}=(0,l.o)({channelId:u.g.Lv4k}),{roomStore:{isOlympicGame:t,setIsEnableOlympic4k:n}}=(0,i.Z)(),d=(0,a.Z)(async()=>{try{window.collectEvent("add_to_desktop_click",{type:"4k",channel_id:u.g.Lv4k,enter_from:"live_detail",ug_channel_id:s.Le.getConfig(s.gI.WebUgChannelId)||""}),await o.a.openClient()}catch(t){e()}});return(0,r.useEffect)(()=>{n(t)},[t]),{enableOlympic4k:t,rediectDownload:t,openOrDownloadClient:d}}},460264:function(e,t,n){n.d(t,{FL:function(){return c},Yt:function(){return s},s1:function(){return d}}),n(429532);var i,r=n(362706),l=n(582746),o=n(956277),a=n(782580);let u={headerText:"登录后即可参与互动",next:"undefined"!=typeof location?`https://${null===(i=location)||void 0===i?void 0:i.host}`:void 0,enterMethod:"live_room"},s=()=>{var e;let t=(0,l.Z)(),n=null==t?void 0:null===(e=t.userStore)||void 0===e?void 0:e.userInfo,i=!!((null==n?void 0:n.id_str)||(null==n?void 0:n.id));return(0,o.Cg)()&&!i};function d(e){return t=>{var n,i,l;if(!(null==t?void 0:t.ignoreABCheck)&&!(0,a.getLoginLimitAB)(e))return!0;let o=null==e?void 0:null===(n=e.userStore)||void 0===n?void 0:n.userInfo;if((null==o?void 0:o.id_str)||(null==o?void 0:o.id))return!0;let s=Object.assign({headerText:"登录后即可参与互动",success:async()=>{window.location.reload()},next:`https://${null===(l=window)||void 0===l?void 0:null===(i=l.location)||void 0===i?void 0:i.host}`},u,t);return(0,r.x)(s),!1}}function c(){return d((0,l.Z)())}},956277:function(e,t,n){n.d(t,{Cg:function(){return l}});var i=n(782580),r=n(582746);let l=()=>(0,i.getLoginLimitAB)((0,r.Z)())},881725:function(e,t,n){n(250440);var i=n(88648),r=n(582746),l=n(490068),o=n(645260),a=n.n(o),u=n(471957);t.Z=()=>{let{linkmicStore:{guestBattleInfo:e},userStore:{userInfo:t}}=(0,r.Z)(),n=a()(t,"user_attr.is_admin",!1),o=a()(t,"user_attr.admin_privileges",[]),s=i.useMemo(()=>n&&Array.isArray(o)&&(o.includes(l.s.LinkmicGuestBattlePrivilege)||o.includes(l.s.AudienceLinkmicPlaymodeControl)),[n,o]),{isGuestBattle:d,status:c,isInPunish:v,isGuestPlaying:_}=(0,u.Z)({guestBattleInfo:e});return{isGuestBattle:d,status:c,isInPunish:v,isGuestPlaying:_,isGuestBattleManger:s}}},606006:function(e,t,n){n(874386);var i=n(88648);t.Z=e=>{let[t,n]=(0,i.useState)(!1),{isActive:r}=e;return(0,i.useEffect)(()=>{let e=null,t=()=>{e=setTimeout(()=>{n(!0)},2e3)},i=()=>{e&&(clearTimeout(e),n(!1)),t()};if(r)return i(),document.addEventListener("mousemove",i),document.addEventListener("mousedown",i),document.addEventListener("keydown",i),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mousedown",i),document.removeEventListener("keydown",i),e&&clearTimeout(e)}},[r]),{inActive:t}}},295259:function(e,t,n){n.d(t,{$:function(){return a},P:function(){return u}}),n(779788);var i=n(88648),r=n(273312),l=n(565024),o=n(987475),a={JUNE_EFFECT_SWITCH:"june_effect_switch",JUNE_DANMAKU_SWITCH:"june_danmaku_switch",JUNE_FULLSCREEN_SWITCH:"june_fullscreen_switch"};let u=()=>{let{liveJuneStorageOpt:e,liveJuneStorageOptNew:t}=(0,r.j)(),{isJuneOptimize:n,isJuneOptimizeNew:a}=(0,i.useMemo)(()=>({isJuneOptimize:1===e,isJuneOptimizeNew:1===t}),[e,t]),u=(0,i.useCallback)(e=>{if("june_fullscreen_switch"===e&&!a||"june_fullscreen_switch"!==e&&!n)return!0;try{return"true"===(l.Q.getItem({sKey:o.CookieKeys.JuneFullscreenSwitch})||"true")}catch(e){return!0}},[]);return{getSwitchStatus:u,setSwitchStatus:(0,i.useCallback)((e,t)=>{if(("june_fullscreen_switch"!==e||!!a)&&("june_fullscreen_switch"===e||!!n))try{return"june_fullscreen_switch"===e&&l.Q.setItem(o.CookieKeys.JuneFullscreenSwitch,JSON.stringify(t),31536e6),window.localStorage.setItem(e,JSON.stringify(t))}catch(e){return}},[])}}},156817:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n("582746"),r=n("88648"),l=e=>{let{orderSingInfo:t}=e;return{isOrderSing:r.useMemo(()=>!!t,[t])}},o=()=>{let{linkmicStore:{orderSingInfo:e}}=(0,i.Z)(),{isOrderSing:t}=l({orderSingInfo:e});return{isOrderSing:t}}},769076:function(e,t,n){var i=n(297640),r=n(565024),l=n(987475),o=n(88648),a=n(273312);t.Z=e=>{let{liveH265NoStoreErrNumber:t}=(0,a.j)(),n=(0,o.useMemo)(()=>l.CookieKeys.ClientPlayH265ErrorNum,[]),u=(0,o.useCallback)(()=>{try{let e=s();if(-1===e)return;e+=1,r.Q.setItem(n,e),window.localStorage.setItem(n,String(e))}catch(e){return}},[n]),s=(0,o.useCallback)(()=>{if(1===t)return -1;try{let e=r.Q.getItem({sKey:n}),t=window.localStorage.getItem(n),i=e||t;return i?Number(i):0}catch(e){return 0}},[n]);return{ishNewH265:()=>{var e;if(!(0,i.E)())return!1;let t=0;if((t=null===(e=window.navigator)||void 0===e?void 0:e.hardwareConcurrency)<=4)try{return Number(localStorage.getItem("gpu_score"))>6.4}catch(e){return!1}return t>4},addH265ErrorNum:u,getH265ErrorNum:s,resetH265ErrorNum:(0,o.useCallback)(()=>{try{r.Q.setItem(n,-1),window.localStorage.setItem(n,"-1")}catch(e){return}},[n]),islowLdH265:()=>{var e;if(!(0,i.E)())return!1;let t=0;return!!((t=null===(e=window.navigator)||void 0===e?void 0:e.hardwareConcurrency)<=4)||!1}}}},54803:function(e,t,n){var i=n(273312);t.Z=()=>{let{liveHighClientH265:e,liveHighWebH265:t}=(0,i.j)();return{liveHighClientH265:e,liveHighWebH265:t}}},234062:function(e,t,n){var i=n(520739),r=n(878389);n(874386);var l=n(88648),o=n(328155),a=n(797973),u=n(769076);let s=(()=>{try{let e=window.localStorage.getItem("h265ErrorNumNew")||window.localStorage.getItem("h265ErrorNum");return -1===Number(e)}catch(e){return!1}})();t.Z=e=>{let{from:t,player:n,isRoomEnd:d,eventParams:c,isH265:v,isActive:_}=e,f=(0,l.useRef)(!1),m=(0,l.useRef)(0),[h,p]=(0,l.useState)(0),[g,y]=(0,l.useState)(""),[E,I]=(0,l.useState)(0),[L,w]=(0,l.useState)(0),N=(0,l.useRef)(0),S=(0,l.useRef)(0),C=(0,l.useRef)(0),{resetH265ErrorNum:T}=(0,u.Z)({}),x={};x="living"===t||"preview/live"===t?(0,i._)({},null==c?void 0:c.getCommonEventParams(),null==c?void 0:c.getEnterEventParams()):c,!m.current&&(m.current=performance.now());let A=(0,l.useCallback)(()=>{C.current=1},[]),P=(0,a.Z)(()=>{window.collectEvent("player_firstframe",(0,r._)((0,i._)({},x),{start:m.current,loadstart:E,ttfb:L,end:performance.now()})),f.current=!0});(0,l.useEffect)(()=>{_&&(N.current=performance.now())},[_]);let b=(0,l.useMemo)(()=>window.location.href,[]);(0,l.useEffect)(()=>{if(n)return n.once("loadeddata",()=>{"living"===t&&!f.current&&P(),A()}),n.once("canplay",()=>{A()}),n.once("timeupdate",()=>{A()}),n.once("error",e=>{p((null==e?void 0:e.code)||(null==e?void 0:e.errorCode)||((null==e?void 0:e.errorType)==="parse"?31:21)),y(null==e?void 0:e.ex)}),()=>{n.off("loadeddata"),n.off("canplay"),n.off("timeupdate"),n.off("error")}},[n]);let R=(0,l.useCallback)(()=>{var e;let t;return C.current?t=0:d?t=1001:n?!n||(null==n?void 0:null===(e=n.config)||void 0===e?void 0:e.url)?n&&h&&!C.current?t=1004:n&&!C&&(t=1005):t=1003:t=1002,t},[n,d,h]),O=(0,l.useCallback)(e=>{var n,r,l;let o="living"===t?null===(n=window)||void 0===n?void 0:n.playerNewTime:N.current,a={is_stream_received:C.current,is_preview:"sliderCard"===t||"searchPlayer"===t?1:0,error_code:R(),log_type:e,resume_type:"living"===t?"switch_page":"draw",player_error_code:h,player_error_info:g,duration:Math.floor(performance.now()-N.current||(null===(r=window)||void 0===r?void 0:r.playerNewTime)||0),player_elapse:null===(l=window)||void 0===l?void 0:l.playerNewTime,from:t,href:b};if("searchPlayer"!==t||o!==S.current)window.collectEvent("play_leave",(0,i._)({},x,a)),S.current=o},[t,h,g,b]);(0,l.useEffect)(()=>{let e=location.pathname,n=()=>{("living"===t||"living"!==t&&_)&&O(3)};return window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n),(0,o.Nr)(e)&&n()}},[_,t,O]);let k=(0,l.useCallback)(()=>{A(),!L&&w(performance.now())},[L]),M=(0,l.useCallback)(()=>{!E&&I(performance.now())},[E]);return(0,l.useEffect)(()=>{if(n&&!s&&v){let e=()=>{T(),s=!0};return n.on("canplay",e),()=>{n.off("canplay",e)}}},[n,v]),{playerTeaEvtSubmit:O,setLoadStartTime:M,setTtfbTime:k,setStreamReceived:A}}},259537:function(e,t,n){n.d(t,{Z:function(){return w},B:function(){return L}}),n("874386");var i=n("645260"),r=n.n(i),l=n("88648"),o=n("920605");n("981168"),n("250440"),n("779788");var a=n("578580"),u=n("273312"),s=n("782580"),d=n("314325"),c=n("19670"),v={ao:0,0:"ao",ld:1,1:"ld",sd:2,2:"sd",hd:3,3:"hd",uhd:4,4:"uhd",fhd:5,5:"fhd",origin:6,6:"origin"};let _=["ld","sd","hd","uhd","fhd","origin"],f=e=>{let{streamData:t={},localQuality:n,openIntercepted:i=!1,interceptedQuality:r,defealutQuality:o,initQualities:f=_,openTryWatching:m=!1,isLogin:h=!1,innerFeedSlideSkipLowQuality:p=!1}=e,g=(0,u.j)(),y=l.useMemo(()=>{let e=f.slice();return e.sort((e,t)=>v[e]-v[t]),e},[f]),E=l.useMemo(()=>t?Object.keys(t).slice().filter(e=>y.includes(e)).sort((e,t)=>v[e]-v[t]):[],[t,y]),I=l.useCallback(e=>{let t=y.indexOf(e);if(t<1)return"";let n=y[t-1];return E.includes(n)?n:I(n)},[y,E]),L=l.useMemo(()=>{if(!E.length)return"";let e="";if(m)return E[E.length-1];n&&(n&&E.includes(String(n))?e=String(n):n&&(e=I(n)));let l=p&&(0,s.getInLiveInnerFeedAB)(g),u=e=>E.includes(e)?e:I(e),_=(()=>{let t=e||(0,d.qt)();return l?t:o&&v[o]<=v[t]?u(o):t})();if((0,c.qu)("useInitQuality-step2-new: ",{qualities:E,defealutQuality:o,innerFeedSkip:l,_lowQuality:_,_quality:e,streamData:t},JSON.stringify(t,null," ")),e!==_&&E.includes(_)&&(e=_),e&&i&&r&&v[r]<=v[e]&&(e=I(r)),!e){let t=(0,d.qt)();e=t&&E.includes(t)&&h?t:I(r)}return""===e?(a.kg.error("cannot get any quality"),a.kg.event("stream_data",{streamData:JSON.stringify(Object.keys(t)),initQualities:JSON.stringify(f)}),E[E.length-1]):e},[t,n,i,r,o,E,m,h,I,f]);return[E,L]};var m={ao:0,0:"ao",ld:1,1:"ld",sd:2,2:"sd",hd:3,3:"hd",uhd:4,4:"uhd",fhd:5,5:"fhd",origin:6,6:"origin"};let h=["ld","sd","hd","uhd","fhd","origin"],p=e=>{let{streamData:t={},localQuality:n,defealutQuality:i,initQualities:r=h,abtestData:o}=e,a=l.useMemo(()=>{let e=r.slice();return e.sort((e,t)=>m[e]-m[t]),e},[r]),u=l.useMemo(()=>t?Object.keys(t).slice().filter(e=>a.includes(e)).sort((e,t)=>m[e]-m[t]):[],[t,a]),s=l.useCallback(e=>{let t=a.indexOf(e);if(t<1)return"";let n=a[t-1];return u.includes(n)?n:s(n)},[a,u]);return[l.useMemo(()=>{if(!u.length)return"";let e="";n&&(n&&u.includes(String(n))?e=String(n):n&&(e=s(n)));let r=e=>u.includes(e)?e:s(e),l=(()=>{let t=e||(0,d.qt)();return i&&m[i]<=m[t]?r(i):t})();if((0,c.qu)("useInitQualityInPreview-step2-new: ",{qualities:u,defealutQuality:i,innerFeedSkip:!1,_lowQuality:l,_quality:e,streamData:t},JSON.stringify(t,null," ")),e!==l&&u.includes(l)&&(e=l),!e){let t=(0,d.qt)();e=t&&u.includes(t)?t:s("")}return""===e?u[u.length-1]:e},[t,n,i,u,s,r])]};var g=n("582746"),y=n("565024"),E=n("798747"),I=n("987475");let L=e=>{let{stream:t,abtestData:n,defaultQuality:i}=e,r=I.CookieKeys.WebcastLocalQuality,l="";try{l=y.Q.getItem({sKey:r})||localStorage.getItem(r)}catch(e){}let[o]=p({streamData:t,localQuality:l,defealutQuality:i,abtestData:n});return{startQuality:o}};var w=e=>{let{stream:t,defaultQuality:n}=e,{streamStore:{leadingData:i,localQuality:a,singleControlTime:u,renderTime:s},feedStore:{skipLowQuality:d}}=(0,g.Z)(),c=r()(i,"items.probation_lead.is_leading",!1),v=r()(i,"items.probation_lead.lead_content.trial_duration",0),_=r()(i,"items.label_lead.is_leading",!1),m=r()(i,"clatity_guide",0),h=r()(i,"last_show_time",0),p=r()(i,"total_show_times",0),y=r()(i,"singleControlMaxShowTime",0),I=l.useMemo(()=>!i.is_login&&_&&i.level>0,[i.is_login,i.level,_]),L=l.useMemo(()=>i.level&&i.level>0?i.level&&o.n[i.level]:"",[i.level]),w=l.useMemo(()=>(p>=15&&s-h>y&&(0,E.b0)(),p<15&&s-h>u),[s,u,h,p,y]),N=l.useMemo(()=>w&&I&&!i.is_login&&c&&v&&(3===m||4===m),[m,i.is_login,c,v,I,w]),[S,C]=f({streamData:t,localQuality:a,openIntercepted:I,interceptedQuality:L,defealutQuality:n,openTryWatching:N,isLogin:i.is_login,innerFeedSlideSkipLowQuality:d}),T=(0,l.useMemo)(()=>{try{var e,n;let i=r()(t,`${C}.main.sdk_params`,"{}"),l=null!==(e=JSON.parse(i))&&void 0!==e?e:{};return null!==(n=null==l?void 0:l.vbitrate)&&void 0!==n?n:0}catch(e){return 0}},[t,C]);return{openIntercepted:I,interceptedQuality:L,openTryWatching:N,qualities:S,startQuality:C,bitrate:T}}},266178:function(e,t,n){n.d(t,{Bq:function(){return h},bJ:function(){return p},le:function(){return g}});var i=n(273312),r=n(769076),l=n(1792),o=n(801034),a=n(852664),u=n(297640),s=n(259537),d=n(645260),c=n.n(d),v=n(88648),_=n(582746),f=n(314325);let m=e=>{var t;let{roomData:n,isFeedH265:i,isLowH265:r,abtestData:o}=e,a=c()(n,"stream_url"),u=(null===(t=c()(n,"additional_stream_url",null))||void 0===t?void 0:t.live_core_sdk_data)?c()(n,"additional_stream_url"):a,s=c()(a,"live_core_sdk_data.pull_data",{}),d=c()(u,"live_core_sdk_data.pull_data",{}),v=(null==s?void 0:s.stream_data)?JSON.parse(s.stream_data):null,_=(null==d?void 0:d.stream_data)?JSON.parse(d.stream_data):null,f=(0,l.oU)(c()(v,"data",{}),c()(_,"data",{}),"ld"),m=i?c()(_,"data",null):r?f:c()(v,"data",null);return{stream:m,options:i?c()(d,"options",null):c()(s,"options",null)}},h=e=>{let{room:t,abtestData:n,isFeedH265:i,isLowH265:r}=e,{stream:l,options:o}=m({roomData:t,isFeedH265:i,isLowH265:r,abtestData:n}),a=(0,f.dM)(o),{startQuality:u}=(0,s.B)({stream:l,abtestData:n,defaultQuality:a});return g({stream:l,startQuality:u})},p=(e,t)=>{if(e){let n=c()(e,`${t}.main`,{});return(0,o.uC)(n.flv||"")}return""},g=e=>{let{stream:t,startQuality:n}=e,i=v.useMemo(()=>p(t,n),[t,n]),r=v.useMemo(()=>p(t,"md")||p(t,"ld"),[t,i]);return{url:i,lowUrl:r}};t.ZP=e=>{let{disabledH265:t=!1,doubleScreenAB:n=!1,doubleScreenInfo:o={},isPullDataExsit:s=!1}=e,{roomStore:{forceEnableH265:d,isUgcLive:f},streamStore:{streamData:m,isUseVVC:h,isH265Error:p,setIsH265:g,setLowH265:y},vrStore:{isUseMutiCamera:E}}=(0,_.Z)(),{liveHighClientH265:I,liveHighWebH265:L}=(0,i.j)(),{ishNewH265:w,getH265ErrorNum:N,islowLdH265:S}=(0,r.Z)({}),C=v.useMemo(()=>{if(s&&!(0,a.G6)()&&c()(m,"H265_UGC_streamData",{}).stream&&3>N()&&!p)return g(!0),c()(m,"H265_UGC_streamData",{});if(f||E||n&&!(0,a.G6)()&&s&&c()(m,"UGC_streamData",{}).stream)return c()(m,"UGC_streamData",{});if((0,u.E)()&&!t&&!p&&3>N()&&(d||I||L||h||w())&&c()(m,"H265_streamData",{}).stream)return g(!0),c()(m,"H265_streamData",{});if(g(!1),S()&&!p&&3>N())return y(!0),(0,l.Ry)(c()(m,"H264_streamData",{}),c()(m,"H265_streamData",{}),"ld");return c()(m,"H264_streamData",{})},[m,d,I,t,f,L,n,o,p,s,E]),T=v.useMemo(()=>c()(C,"stream",{}),[C]),x=v.useMemo(()=>c()(C,"common",{}),[C]);return{stream:T,common:x,options:v.useMemo(()=>c()(C,"options",{}),[C])}}},31042:function(e,t,n){var i=n(742401),r=n(618618),l=n(867204),o=n(582746),a=n(88648),u=n(645260),s=n.n(u);t.Z=()=>{let{roomStore:{roomInfo:e}}=(0,o.Z)();return(0,a.useMemo)(()=>{var t,n;return i.s?"":(null===(n=window)||void 0===n?void 0:null===(t=n.__INVISIBLE_QUERY__)||void 0===t?void 0:t.enter_from_merge)==="web_share_link"&&e.enter_mode===r.gE.APP?l.R5.QRCODE:l.FO[s()(e,"room.stream_url.stream_orientation")]||""},[e])}},553376:function(e,t,n){var i=n(520739),r=n(878389);n(874386),n(779788);var l=n(88648),o=n(448721),a=n(167951),u=n(784106);t.Z=e=>{let{user_id:t,uuid:n,player:s,isLiveWaterMark:d,isPlayerSucc:c,liveUserWaterMarkEvent:v,logParams:_,isPlayerWaterMark:f=!0,isSmallWindow:m}=e,h=(0,l.useRef)(),p=(0,l.useRef)(),[g,y]=(0,l.useState)({}),[E,I]=(0,l.useState)({}),L=(0,l.useRef)(),w={height:"100%",backgroundSize:"calc(240px * 0.5) auto",backgroundPosition:"center",backgroundRepeat:"repeat"},N=(0,l.useCallback)(()=>{if(!!h.current&&!!p.current&&!!s&&!!c&&!!d)clearTimeout(L.current),L.current=setTimeout(()=>{var e,t,n,r,l,o,a,u,d,c,v,_;let f=(null==s?void 0:null===(e=s.video)||void 0===e?void 0:e.clientWidth)||(null==s?void 0:null===(t=s._video)||void 0===t?void 0:t.clientWidth)||(null==s?void 0:null===(n=s.root)||void 0===n?void 0:n.clientWidth),p=(null==s?void 0:null===(r=s.video)||void 0===r?void 0:r.clientHeight)||(null==s?void 0:null===(l=s._video)||void 0===l?void 0:l.clientHeight)||(null==s?void 0:null===(o=s.root)||void 0===o?void 0:o.clientHeight),g=(null==s?void 0:null===(a=s.video)||void 0===a?void 0:a.videoWidth)||(null==s?void 0:null===(u=s._video)||void 0===u?void 0:u.videoWidth)||(null==s?void 0:null===(d=s.root)||void 0===d?void 0:d.clientWidth),E=(null==s?void 0:null===(c=s.video)||void 0===c?void 0:c.videoHeight)||(null==s?void 0:null===(v=s._video)||void 0===v?void 0:v.videoHeight)||(null==s?void 0:null===(_=s.root)||void 0===_?void 0:_.clientHeight);if(m)y((0,i._)({width:"100%",backgroundImage:`url(${h.current})`},w));else{if(!f||!p||!g||!E)return;g>=E?y((0,i._)({width:"40%",backgroundImage:`url(${h.current})`},w)):y((0,i._)({width:`${g/E*p/f*100}%`,backgroundImage:`url(${h.current})`},w))}},50)},[s,m,c,d]),S=(0,l.useCallback)(()=>{var e;let l=t||(0,a.sq)(),s=n||(null===(e=(0,a.Es)())||void 0===e?void 0:e.user_unique_id),d=l?`u_${l}`:s?`d_${s}`:"",{os_name:c,os_version:m,browser_name:g,browser_version:y,screen_width:E,screen_height:L}=(0,u.f)(),S={DeviceType:"",OsType:c,OsVersion:m,BrowserType:g,BrowserVersion:y,ScreenModel:`${E}*${L}`};(0,o.Y5)({watermark_key_list:JSON.stringify([{watermark_uniq_idx:"v4u",watermark_key:d,algorithm:"v4u"},{watermark_uniq_idx:"v5p",watermark_key:d,algorithm:"v5p"}]),device_info:JSON.stringify(S),ignoreToast:!0}).then(e=>{let{data:t,status_code:n}=null==e?void 0:e.data;if(0===n){sessionStorage.setItem("waterMarkData",JSON.stringify(t));let{v5p:e,v4u:n}=t||{};h.current=null==e?void 0:e.watermark_url,p.current=null==n?void 0:n.watermark_url,f?N():I((0,r._)((0,i._)({},w),{width:"100%",backgroundImage:`url(${p.current})`,backgroundSize:"calc(320px * 0.5) auto"}))}else null==v||v((0,i._)({error_type:"interface_error"},_))}).catch(e=>{null==v||v((0,i._)({error_type:"interface_error"},_))})},[t,n,s,f,c,v,_,m]);(0,l.useEffect)(()=>{if(!d){y({}),I({});return}if(!f||!!s&&!!c)try{let{v5p:e,v4u:t}=JSON.parse(sessionStorage.getItem("waterMarkData"))||{};if(t&&e){h.current=null==e?void 0:e.watermark_url,p.current=null==t?void 0:t.watermark_url,f?N():I((0,r._)((0,i._)({width:"100%",backgroundImage:`url(${p.current})`},w),{backgroundSize:"calc(320px * 0.5) auto"}));return}S()}catch(e){S()}},[t,s,d,c,f,m]),(0,l.useEffect)(()=>{if(!!f&&!!s&&!!c){if(!d){y({}),I({});return}return window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N),L.current&&clearTimeout(L.current)}}},[t,s,f,m,c,d]);let C=(0,l.useMemo)(()=>{},[d,t,n]);return(0,l.useEffect)(()=>{let e=()=>{sessionStorage.removeItem("waterMarkData")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[d]),{playerWaterMark:g,chatWaterMark:E,volumeWaterMark:C,updatePlayerStyle:N}}},207480:function(e,t,n){n.d(t,{j:function(){return r},l:function(){return i}});var i={ROTATE_PLUGIN:"rotate_plugin",GLOBAL_APP:"global_app",GIFT_BAR:"gift_bar",GIFT_BAR_MINI:"gift_bar_mini",HEADER:"header",NAVIGATION:"navigation",SIDEBAR:"siderbar",CATEGORY_TAB:"category_tab",TAB:"tab",TITLE_PLUGIN:"title_plugin",FOLLOW_PLUGIN:"follow_plugin",COMMENT_PLUGIN:"comment_plugin",GIFT_SWITCH_PLUGIN:"gift_switch_plugin",GIFT_BAR_PLUGIN:"gift_bar_plugin",EFFECT_SWITCH_PLUGIN:"effect_switch_plugin",GIFT_TRAY_PLUGIN:"gift_tray_plugin",GIFT_EFFECT_PLUGIN:"gift_effect_plugin",FANS_CLUB_PLUGIN:"fans_club_plugin",EXHIBITION_VIEW_PLUGIN:"exhibition_view_plugin",VIP_VIEW_PLUGIN:"vip_view_plugin",EFFECT_PLUGIN:"effect_plugin",HOUR_RANK_LIST_VIEW_PLUGIN:"hour_rank_list_view_plugin",TOOL_BAR_PLUGIN:"tool_bar_plugin",QUALITY_SWITCH_PLUGIN:"quality_switch_plugin",DANMAKU_PLUGIN:"danmaku_plugin",AUDIO_ROOM_PLUGIN:"audio_room_plugin",VIDEO_ROOM_PLUGIN:"video_room_plugin",RTC_LAYER_PLUGIN:"rtc_layer_plugin",PK_VIEW_PLUGIN:"pk_view_plugin",PIP_PLUGIN:"pip_plugin",INPICTURE_PLUGIN:"inpicture_plugin",ADMIN_PRIVILEGE_PLUGIN:"admin_privilege_plugin",LIVING_PLAYER:"living_plyaer",IFRAME_PLAYER:"iframe_player",GIFT_ITEM:"gift_item",GIFT_PANEL:"gift_panel",LIVE_CATEGORY:"live_category",LIVE_CARD:"live_card",LIVE_CARD_PREVIEW:"live_card_preview",RANK_LIST:"rank_list",ORDER_SING_LIST:"order_sing_list",ORDER_SING_RULE:"order_sing_rule",PROMOTION_POP:"promotion_pop",PROMOTION_LIST_WRAPPER:"promotion_list_wrapper",FANS_CLUB_POPUP:"fans_club_popup",USER_POPUP:"user_popup",CHAT_ROOM_PANEL:"chat_room_panel",AUDIENCE_PANEL:"audience_panel",FIXED_CHAT:"fixed_chat",LIVE_CAROUSEL:"live_carousel",LIVE_COVER:"live_cover",LIVE_FULLPLAYER_QULIATY:"live_fullplayer_quality",Live_Like:"live_like",Live_Flutter_Like:"live_flutter_like",DANMAKU_SETTINGS:"danmaku_settings",VIP_LIVE_BOUNDARY:"vip_live_boundary",FOLD_CHAT_ROOM_COMMENT_PLUGIN:"fold_chat_room_comment_plugin",LIVING_PIP_WINDOW:"living-pip-window",SHORT_CUT:"short_cut",QUALITY_SWITCH:"quality_switch",LivePreviewEnterRoom:"LivePreviewEnterRoom",LiveUserProfile:"live_user_profile",LOTTERY_COMPONENT:"lottery_componet",LOTTERY_COMPONENT_PLUGIN:"lottery_componet_plugin",LINK_MIC_DYNAMIC_CONFIG:"link_mic_dynamic_config",LIVE_RESERVE_CARD:"live_reserve_card",GROUP_LIVE_PLUGIN:"group_live_plugin",ORDER_SING_SELECT_GUEST:"order_sing_select_guest",COMMENT_EDITOR:"comment_editor",GIFT_PANEL_RIGHT:"gift_panel_right",LIVE_CHANNEL_BANNER:"live_channel_banner",LIVE_CHANNEL_BANNER_ROOMS:"live_channel_banner_rooms",LIVE_CHANNEL_FOLLOW_LIST:"live_channel_follow_list",LIVE_CHANNEL_HOT_CATEGORY:"live_channel_hot_category",LIVE_CHANNEL_RECOMMEND_CAROUSEL:"live_channel_recommend_carousel",LIVE_CHANNEL_RECOMMEND_LIST:"live_channel_recommend_list",BASIC_PLAYER_KEEPER:"basic_player_keeper"};let r="live_component_error_boundary"},95596:function(e,t,n){n.d(t,{k2:function(){return d}});var i=n(563097),r=n(88648),l=n(222406),o=n(207480),a=n(746309),u=n(742401);let s=function(e,t,n,i){var r,l;let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"component";null==i||i(e,t),"module"===u&&(null===(l=(0,a.OK)())||void 0===l||l("report",{ev_type:"blank_screen",payload:{timestamp:Date.now(),score:0,error:{type:"js_error",message:e.message}}})),null===(r=(0,a.OK)())||void 0===r||r("sendEvent",{name:o.j,categories:{componentName:n,message:e.message,stack:e.stack,componentStack:t},type:"event"})},d=e=>{let{onError:t,beforeCapture:n,fallback:o,Slardar:d,children:c,type:v="component",componentName:_}=e,f=r.useCallback((e,n)=>{s(e,n,_,t,v)},[v,t,_]),m=r.useCallback(()=>{if(!u.s)return d||(0,a.OK)()},[d]);return(0,i.jsx)(l.SV,{onError:f,beforeCapture:n,fallback:o,Slardar:m(),children:c})}},483347:function(e,t,n){n.d(t,{OY:function(){return a},dr:function(){return _},fh:function(){return u},gb:function(){return s},hO:function(){return c},oP:function(){return v},qK:function(){return d},re:function(){return o}});var i=n(39738),r=n(167698),l=n(829021);let o=[i.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC,i.V_.LINKMICUILAYOUT_AUDIOCHAT_TOP2V4V4,i.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8_STAGE,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V8,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V3,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V6,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V8,i.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_1V2,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_2V2,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_TOP3V2,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_TOP3V3,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_TOP3V3V1,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_TOP3V3V2,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_1V1,i.V_.LINKMICUILAYOUT_VIDEOEQUAL_3X3,i.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8,i.V_.LINKMICUILAYOUT_AUDIOCHAT_3X3],a=[l.yP.AUDIO_DOUBLE_C,l.yP.AUDIO_1V8_STAGE,l.yP.AUDIO_1V8,l.yP.AUDIO_GRID],u=[l.yP.AUDIO_DOUBLE_C,l.yP.AUDIO_1V8_STAGE,l.yP.VIDEO_GRID,l.yP.VIDEO_1_V_3,l.yP.VIDEO_1_V_6,l.yP.VIDEO_1_V_8,l.yP.VIDEO_DYNAMIC,l.yP.AUDIO_1V8,l.yP.AUDIO_GRID],s=[r.t.VIDEO_EQUAL,r.t.VIDEO_DYNAMIC_1V3,r.t.VIDEO_DYNAMIC_1V6,r.t.VIDEO_C,r.t.VIDEO_DYNAMIC],d=[l.yP.VIDEO_GRID,l.yP.VIDEO_1_V_3,l.yP.VIDEO_1_V_8,l.yP.VIDEO_DYNAMIC],c={[r.t.VIDEO_EQUAL]:i.V_.LINKMICUILAYOUT_VIDEOEQUAL_3X3,[r.t.VIDEO_DYNAMIC_1V3]:i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V3,[r.t.VIDEO_DYNAMIC_1V6]:i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V6,[r.t.VIDEO_C]:i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V8,[r.t.VIDEO_DYNAMIC]:i.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT},v={[l.yP.VIDEO_GRID]:i.V_.LINKMICUILAYOUT_VIDEOEQUAL_3X3,[l.yP.VIDEO_1_V_3]:i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V3,[l.yP.VIDEO_DYNAMIC_FLOAT]:i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V6,[l.yP.VIDEO_1_V_8]:i.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V8,[l.yP.VIDEO_DYNAMIC]:i.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT};i.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8,i.V_.LINKMICUILAYOUT_AUDIOCHAT_3X3,i.V_.LINKMICUILAYOUT_AUDIOCHAT_DYNAMIC,i.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC,i.V_.LINKMICUILAYOUT_AUDIOCHAT_TOP2V4V4,i.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8_STAGE,i.V_.LINKMICUILAYOUT_CROSSROOMLINKMIC_6V6;let _=[i.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC];i.V_.LINKMICUILAYOUT_CROSSROOMLINKMIC_6V6,i.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC},307741:function(e,t,n){n.d(t,{gX:function(){return A},iE:function(){return x},PS:function(){return R},us:function(){return b}});var i=n("368200"),r=n("480226"),l=n("907831"),o=n.n(l),a=JSON.parse('{"scene":5,"ui_layout":25,"sei_ver":3,"spatial_id":6,"ui_container":{"top":0,"bottom":0},"canvas":{"w":360,"h":640,"scale":2,"align":3},"content":{"x":0,"y":0,"w":360,"h":640},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":360.0,"h":640.0},{"z":1,"p":1,"x":275.0,"y":509.0,"w":75.0,"h":75.0},{"z":1,"p":2,"x":275.0,"y":434.0,"w":75.0,"h":75.0},{"z":1,"p":3,"x":275.0,"y":359.0,"w":75.0,"h":75.0},{"z":1,"p":4,"x":275.0,"y":284.0,"w":75.0,"h":75.0},{"z":1,"p":5,"x":275.0,"y":209.0,"w":75.0,"h":75.0},{"z":1,"p":6,"x":275.0,"y":134.0,"w":75.0,"h":75.0}]}'),u=JSON.parse('{"scale":1,"align":8,"scene":5,"ui_layout":26,"sei_ver":3,"sei_sub_scene":5,"spatial_id":7,"adjust_map":{"android":{"ui_container":{"top":128,"left":0,"bottom":48,"right":0}},"ios":{"ui_container":{"top":158,"left":0,"bottom":38,"right":0}}},"canvas":{"w":360,"h":640},"content":{"x":0,"y":0,"w":372,"h":326},"regions":[{"z":0,"p":0,"x":48.0,"y":6.0,"w":110.0,"h":104.0},{"z":0,"p":1,"x":214.0,"y":6.0,"w":110.0,"h":104.0},{"z":0,"p":2,"x":20.0,"y":116.0,"w":83.0,"h":102.0},{"z":0,"p":3,"x":103.0,"y":116.0,"w":83.0,"h":102.0},{"z":0,"p":4,"x":186.0,"y":116.0,"w":83.0,"h":102.0},{"z":0,"p":5,"x":269.0,"y":116.0,"w":83.0,"h":102.0},{"z":0,"p":6,"x":20.0,"y":221.0,"w":83.0,"h":102.0},{"z":0,"p":7,"x":103.0,"y":221.0,"w":83.0,"h":102.0},{"z":0,"p":8,"x":186.0,"y":221.0,"w":83.0,"h":102.0},{"z":0,"p":9,"x":269.0,"y":221.0,"w":83.0,"h":102.0}]}'),s=JSON.parse('{"scale":1,"align":8,"scene":5,"ui_layout":27,"sei_ver":3,"sei_sub_scene":5,"spatial_id":7,"adjust_map":{"android":{"ui_container":{"top":128,"left":0,"bottom":48,"right":0}},"ios":{"ui_container":{"top":158,"left":0,"bottom":38,"right":0}}},"canvas":{"w":360,"h":640},"content":{"x":0,"y":115,"w":372,"h":326},"regions":[{"z":0,"p":0,"x":131.0,"y":6.0,"w":110.0,"h":104.0},{"z":0,"p":1,"x":20.0,"y":110.0,"w":83.0,"h":100},{"z":0,"p":2,"x":103.0,"y":110.0,"w":83.0,"h":100},{"z":0,"p":3,"x":186.0,"y":110.0,"w":83.0,"h":100},{"z":0,"p":4,"x":269.0,"y":110.0,"w":83.0,"h":100},{"z":0,"p":5,"x":20.0,"y":210.0,"w":83.0,"h":100},{"z":0,"p":6,"x":103.0,"y":210.0,"w":83.0,"h":100},{"z":0,"p":7,"x":186.0,"y":210.0,"w":83.0,"h":100},{"z":0,"p":8,"x":269.0,"y":210.0,"w":83.0,"h":100}]}'),d=JSON.parse('{"scene":12,"ui_layout":5,"sei_ver":9,"spatial_id":5,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":120,"h":106.667},{"z":0,"p":1,"x":120,"y":0,"w":120,"h":106.667},{"z":0,"p":2,"x":240,"y":0,"w":120,"h":106.667},{"z":0,"p":3,"x":0,"y":106.667,"w":120,"h":106.667},{"z":0,"p":4,"x":120,"y":106.667,"w":120,"h":106.667},{"z":0,"p":5,"x":240,"y":106.667,"w":120,"h":106.667},{"z":0,"p":6,"x":0,"y":213.334,"w":120,"h":106.667},{"z":0,"p":7,"x":120,"y":213.334,"w":120,"h":106.667},{"z":0,"p":8,"x":240,"y":213.334,"w":120,"h":106.667}]}'),c=JSON.parse('{"scene":12,"ui_layout":11,"sei_ver":20,"spatial_id":-1,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":252,"h":320},{"z":0,"p":1,"x":252,"y":0,"w":108,"h":106.667},{"z":0,"p":2,"x":252,"y":106.667,"w":108,"h":106.667},{"z":0,"p":3,"x":252,"y":213.334,"w":108,"h":106.667}]}'),v=JSON.parse('{"scene":12,"ui_layout":12,"sei_ver":21,"spatial_id":-1,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":180,"h":320},{"z":0,"p":1,"x":180,"y":0,"w":90,"h":106.667},{"z":0,"p":2,"x":270,"y":0,"w":90,"h":106.667},{"z":0,"p":3,"x":180,"y":106.667,"w":90,"h":106.667},{"z":0,"p":4,"x":270,"y":106.667,"w":90,"h":106.667},{"z":0,"p":5,"x":180,"y":213.334,"w":90,"h":106.667},{"z":0,"p":6,"x":270,"y":213.334,"w":90,"h":106.667}]}'),_=JSON.parse('{"scene":12,"ui_layout":3,"sei_ver":13,"spatial_id":3,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":180,"h":320},{"z":0,"p":1,"x":180,"y":0,"w":90,"h":80},{"z":0,"p":2,"x":270,"y":0,"w":90,"h":80},{"z":0,"p":3,"x":180,"y":80,"w":90,"h":80},{"z":0,"p":4,"x":270,"y":80,"w":90,"h":80},{"z":0,"p":5,"x":180,"y":160,"w":90,"h":80},{"z":0,"p":6,"x":270,"y":160,"w":90,"h":80},{"z":0,"p":7,"x":180,"y":240,"w":90,"h":80},{"z":0,"p":8,"x":270,"y":240,"w":90,"h":80}]}'),f=JSON.parse('{"scene":12,"ui_layout":102,"sei_ver":11,"spatial_id":2,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":180.0,"h":320.0},{"z":0,"p":1,"x":180.0,"y":0,"w":180.0,"h":320.0}]}'),m=JSON.parse('{"scene":12,"ui_layout":103,"sei_ver":11,"spatial_id":2,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":180.0,"h":320.0},{"z":0,"p":1,"x":180.0,"y":0,"w":180.0,"h":160.0},{"z":0,"p":2,"x":180.0,"y":160.0,"w":180.0,"h":160.0}]}'),h=JSON.parse('{"scene":12,"ui_layout":104,"sei_ver":11,"spatial_id":2,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":180.0,"h":160.0},{"z":0,"p":1,"x":180.0,"y":0,"w":180.0,"h":160.0},{"z":0,"p":2,"x":0,"y":160.0,"w":180.0,"h":160.0},{"z":0,"p":3,"x":180.0,"y":160.0,"w":180.0,"h":160.0}]}'),p=JSON.parse('{"scene":12,"ui_layout":105,"sei_ver":11,"spatial_id":2,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":120.0,"h":160.0},{"z":0,"p":1,"x":120.0,"y":0,"w":120.0,"h":160.0},{"z":0,"p":2,"x":240.0,"y":0,"w":120.0,"h":160.0},{"z":0,"p":3,"x":60.0,"y":160.0,"w":120.0,"h":160.0},{"z":0,"p":4,"x":180.0,"y":160.0,"w":120.0,"h":160.0}]}'),g=JSON.parse('{"scene":12,"ui_layout":106,"sei_ver":11,"spatial_id":2,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":120.0,"h":160.0},{"z":0,"p":1,"x":120.0,"y":0,"w":120.0,"h":160.0},{"z":0,"p":2,"x":240.0,"y":0,"w":120.0,"h":160.0},{"z":0,"p":3,"x":0,"y":160.0,"w":120.0,"h":160.0},{"z":0,"p":4,"x":120.0,"y":160.0,"w":120.0,"h":160.0},{"z":0,"p":5,"x":240.0,"y":160.0,"w":120.0,"h":160.0}]}'),y=JSON.parse('{"scene":12,"ui_layout":107,"sei_ver":11,"spatial_id":2,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":120.0,"h":106.6667},{"z":0,"p":1,"x":120.0,"y":0,"w":120.0,"h":106.6667},{"z":0,"p":2,"x":240.0,"y":0,"w":120.0,"h":106.6667},{"z":0,"p":3,"x":0,"y":106.6667,"w":120.0,"h":106.6667},{"z":0,"p":4,"x":120.0,"y":106.6667,"w":120.0,"h":106.6667},{"z":0,"p":5,"x":240.0,"y":106.6667,"w":120.0,"h":106.6667},{"z":0,"p":6,"x":120.0,"y":213.3333,"w":120.0,"h":106.6667}]}'),E=JSON.parse('{"scene":12,"ui_layout":108,"sei_ver":11,"spatial_id":2,"scale":1,"align":8,"adjust_map":{"android":{"ui_container":{"top":123,"left":0,"bottom":0,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":0,"right":0}}},"canvas":{"w":360,"h":640,"background_color":"#322542"},"content":{"x":0,"y":129.216,"w":360,"h":320},"regions":[{"z":0,"p":0,"x":0,"y":0,"w":120.0,"h":106.6667},{"z":0,"p":1,"x":120.0,"y":0,"w":120.0,"h":106.6667},{"z":0,"p":2,"x":240.0,"y":0,"w":120.0,"h":106.6667},{"z":0,"p":3,"x":0,"y":106.6667,"w":120.0,"h":106.6667},{"z":0,"p":4,"x":120.0,"y":106.6667,"w":120.0,"h":106.6667},{"z":0,"p":5,"x":240.0,"y":106.6667,"w":120.0,"h":106.6667},{"z":0,"p":6,"x":60.0,"y":213.3333,"w":120.0,"h":106.6667},{"z":0,"p":7,"x":180.0,"y":213.3333,"w":120.0,"h":106.6667}]}'),I=JSON.parse('{"scale":1,"align":8,"scene":5,"ui_layout":21,"sei_ver":3,"sei_sub_scene":5,"spatial_id":7,"adjust_map":{"android":{"ui_container":{"top":114,"left":0,"bottom":48,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":38,"right":0}}},"canvas":{"w":360,"h":640},"content":{"x":0,"y":0,"w":372,"h":326},"regions":[{"z":0,"p":0,"x":131.0,"y":6.0,"w":110.0,"h":116.0},{"z":0,"p":1,"x":20.0,"y":116.0,"w":83.0,"h":102.0},{"z":0,"p":2,"x":103.0,"y":116.0,"w":83.0,"h":102.0},{"z":0,"p":3,"x":186.0,"y":116.0,"w":83.0,"h":102.0},{"z":0,"p":4,"x":269.0,"y":116.0,"w":83.0,"h":102.0},{"z":0,"p":5,"x":20.0,"y":221.0,"w":83.0,"h":102.0},{"z":0,"p":6,"x":103.0,"y":221.0,"w":83.0,"h":102.0},{"z":0,"p":7,"x":186.0,"y":221.0,"w":83.0,"h":102.0},{"z":0,"p":8,"x":269.0,"y":221.0,"w":83.0,"h":102.0}]}'),L=JSON.parse('{"scale":1,"align":8,"scene":5,"ui_layout":22,"sei_ver":3,"sei_sub_scene":5,"spatial_id":8,"adjust_map":{"android":{"ui_container":{"top":114,"left":0,"bottom":48,"right":0}},"ios":{"ui_container":{"top":144,"left":0,"bottom":38,"right":0}}},"canvas":{"w":360,"h":640},"content":{"x":0,"y":115,"w":361,"h":330},"regions":[{"z":0,"p":0,"x":20.0,"y":0,"w":107.0,"h":110.0},{"z":0,"p":1,"x":127.0,"y":0,"w":107.0,"h":110.0},{"z":0,"p":2,"x":234.0,"y":0,"w":107.0,"h":110.0},{"z":0,"p":3,"x":20.0,"y":110.0,"w":107.0,"h":110.0},{"z":0,"p":4,"x":127.0,"y":110.0,"w":107.0,"h":110.0},{"z":0,"p":5,"x":234.0,"y":110.0,"w":107.0,"h":110.0},{"z":0,"p":6,"x":20.0,"y":220.0,"w":107.0,"h":110.0},{"z":0,"p":7,"x":127.0,"y":220.0,"w":107.0,"h":110.0},{"z":0,"p":8,"x":234.0,"y":220.0,"w":107.0,"h":110.0}]}'),w=n("39738"),N=n("483347");let S={[w.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC]:a,[w.V_.LINKMICUILAYOUT_AUDIOCHAT_TOP2V4V4]:u,[w.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8_STAGE]:s,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_3X3]:d,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V3]:c,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V6]:v,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V8]:_,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_1V2]:m,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_2V2]:h,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_TOP3V2]:p,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_TOP3V3]:g,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_TOP3V3V1]:y,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_TOP3V3V2]:E,[w.V_.LINKMICUILAYOUT_VIDEOEQUAL_1V1]:f,[w.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT]:f,[w.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8]:I,[w.V_.LINKMICUILAYOUT_AUDIOCHAT_3X3]:L},C=(e,t)=>{e&&Object.keys(e).forEach(n=>{t[n]=t[n]+e[n]})},T=(e,t)=>{e&&e.forEach(e=>{let n=t.find(t=>t.p===e.p);if(n){let{p:t}=e;Object.keys((0,i._)(e,["p"])).forEach(t=>{n[t]=n[t]+e[t]})}})},x=e=>{let t=S[e||""];if(!t)return;let{content:n,regions:i}=r.P.processLayoutOffset(e),l=o()(t);return C(n,l.content),T(i,l.regions),l},A=e=>{let{content:t}=e,n=t.h,i=t.w;return i/(16/9*n)*100},P=e=>{let{canvas:t,content:n}=e,i=t.h;return{h:n.h/i,y:n.y/i}},b=(e,t)=>{let n=N.hO[e];n===w.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT&&(t||0)>=2&&(n=r.P.mapGuestCountToLayout(t));let i=x(n);return n&&i?P(i):{y:0,h:1}},R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0,n=N.oP[e];n===w.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT&&(t||0)>=2&&(n=r.P.mapGuestCountToLayout(t));let i=x(n);return n&&i?P(i):{y:0,h:1}}},540294:function(e,t,n){n.d(t,{J:function(){return i}});let i="PREVIEW_ENTERROOM_CSS_FULL"},352308:function(e,t,n){n.d(t,{T:function(){return o},y:function(){return l}}),n(675373);var i=n(96008),r=n.n(i);let l=(0,n(158041).kr)({userProfileData:{},refreshData:r(),reportArgs:{reportType:"user"},eventParams:{},close:r(),targetUid:"",secTargetUid:"",anchorId:"",secAnchorId:"",roomId:"",currentUid:"",currentSecUid:"",targetUserType:"audience",openSchema:()=>Promise.resolve({code:0}),liveContainer:null,openVip:r(),openFansClub:r(),openGiftPanel:r(),isLinkMicManger:!1,inLinkMicSeats:!1,setFaceRecognitionShow:r(),linkmicEvent:{},slardarEvent:{},linkRoomType:"",functionType2:"",isPaidLinking:!1,isInPk:!1}),o=l.Provider},569541:function(e,t,n){n.d(t,{$6:function(){return x},AB:function(){return E},AP:function(){return S},D1:function(){return D},FD:function(){return F},Fx:function(){return k},HL:function(){return p},JJ:function(){return O},Ol:function(){return m},PS:function(){return P},Qd:function(){return H},Qg:function(){return f},Vi:function(){return L},ZP:function(){return M},aA:function(){return b},b$:function(){return y},c5:function(){return V},gc:function(){return w},iA:function(){return C},jG:function(){return Z},m$:function(){return T},nD:function(){return g},o0:function(){return G},o2:function(){return Y},pJ:function(){return h},sb:function(){return U},uK:function(){return I},uZ:function(){return N},yr:function(){return j},z4:function(){return A},zw:function(){return R}});var i=n(520739),r=n(211147),l=n(742740),o=n(983253),a=n(110479),u=n(595814),s=n.n(u),d=n(352308),c=n(284979),v=n(582746),_=n(88648);let f=(0,a.Z)(d.y),m=()=>f(e=>{var t;return(null===(t=e.userProfileData)||void 0===t?void 0:t.user_profile)||{}}),h=()=>f(e=>{var t;return(null===(t=e.userProfileData)||void 0===t?void 0:t.user_data)||{}}),p=()=>f(e=>(0,r.cM)({currentUid:e.currentUid,targetUid:e.targetUid,currentAnchorId:e.anchorId,targetIsAnchor:"anchor"===e.targetUserType})),g=()=>f(e=>e.reportArgs||{reportType:"user"}),y=()=>f(e=>e.refreshData),E=()=>f(e=>{var t,n;return(null===(n=e.userProfileData)||void 0===n?void 0:null===(t=n.user_profile)||void 0===t?void 0:t.profile_tag_content)||[]}),I=()=>f(e=>{var t,n;return null===(n=e.userProfileData)||void 0===n?void 0:null===(t=n.user_profile)||void 0===t?void 0:t.open_area}),L=()=>f(e=>e.openSchema),w=()=>f(e=>e.liveContainer),N=()=>f(e=>e.openVip),S=()=>f(e=>e.openFansClub),C=()=>f(e=>e.openGiftPanel),T=()=>f(e=>e.close),x=()=>f(e=>!!e.isPaidLinking),A=()=>f(e=>{var t,n;return null===(n=e.userProfileData)||void 0===n?void 0:null===(t=n.user_data)||void 0===t?void 0:t.web_rid}),P=()=>f(e=>{var t,n;return(0,r.jJ)(Number(null===(n=e.userProfileData)||void 0===n?void 0:null===(t=n.user_data)||void 0===t?void 0:t.mystery_man))}),b=()=>f(e=>!!e.isLinkMicManger),R=()=>f(e=>e.setFaceRecognitionShow),O=()=>f(e=>e.linkmicEvent),k=()=>f(e=>e.slardarEvent),M=()=>f(e=>!!e.inLinkMicSeats),D=()=>f(e=>e.functionType2),U=()=>f(e=>e.linkRoomType),V=()=>{let{anchorId:e,roomId:t,eventParams:n,targetUserType:r,targetUid:a,currentUid:u,pkStatus:d,channel_id:c,invite_mode:v,anchor_connect_status:_,pkTeamCount:m,pk_id:h,team_mode:p}=f(e=>s()(e,["anchorId","roomId","eventParams","targetUserType","targetUid","currentUid","pkStatus","channel_id","invite_mode","anchor_connect_status","pkTeamCount","pk_id","team_mode"])),g=()=>u===a?"audience_c_self":"anchor"===r?"audience_c_anchor":"guest"===r?"audience_c_guest":"audience_c_audience",y="audio"===U()?"voice_live":"",E=()=>{var r;return(0,i._)({anchor_id:e,room_id:t,enter_from_merge:(null===(r=window.__INVISIBLE_QUERY__)||void 0===r?void 0:r.enter_from_merge)||(0,l.yW)(),request_page:g(),enter_method:(0,o.Rs)("enter_method"),request_id:(0,o.Rs)("request_id"),to_user_id:a,action_type:"click",from_pk:d,channel_id:c,invite_mode:v,team_mode:p,anchor_connect_status:_,pk_team_count:m,pk_id:h,live_type:y},n)};return{collectProfileEvent:(e,t)=>{window.collectEvent(e,(0,i._)({},E(),t))},getProfileCommonParams:E}},j=()=>{let{collectProfileEvent:e}=V();return t=>{e("livesdk_profile_card_function_click",{function_type:t})}},F=()=>{let e=(0,_.useRef)(null),t=(0,v.Z)(),n=(e,n)=>(0,c.qs)((0,i._)({store:t,position:n},e));return{rectRef:e,handleOpenLiveUserProfileByRect:t=>{var i;let r=null===(i=e.current)||void 0===i?void 0:i.getBoundingClientRect();if(!!r)return n(t,{height:r.height,width:r.width,left:r.x,top:r.y})},handleOpenLiveUserProfileByEvent:(e,t)=>{let{clientX:i,clientY:r}=t;return n(e,{height:1,width:1,left:i,top:r})}}},G=()=>{let{collectProfileEvent:e}=V();return()=>{e("livesdk_anchor_room_manage_click",{user_type:"admin",is_anchor:"0",event_page:"live_detail",request_page:"personal_profile"})}},H=()=>{let{collectProfileEvent:e}=V();return()=>{e("livesdk_show_feedback_popup",{popup_title:"管理用户",is_anchor:"0",event_page:"live_detail"})}},Y=()=>{let{collectProfileEvent:e}=V();return t=>{e("livesdk_click_feedback_popup",{button_name:t,popup_title:"管理用户",is_anchor:"0",user_type:"admin",event_page:"live_detail"})}},Z=()=>{let{collectProfileEvent:e}=V();return t=>{e("livesdk_blocklist_toast_click",{action_type:t,popup_title:"管理用户",is_anchor:"0",user_type:"admin",event_page:"live_detail"})}}},284979:function(e,t,n){let i;n.d(t,{DS:function(){return y},Dy:function(){return p},Q5:function(){return E},o8:function(){return h},qs:function(){return m},u_:function(){return g},yX:function(){return I}});var r=n(520739),l=n(878389),o=n(368200);n(675373),n(527785);var a=n(563097);n(88648);var u=n(746309),s=n(944189),d=n(338426),c=n(147914),v=n(563278);let _=(0,d.ZP)(()=>Promise.all([n.e("28251"),n.e("264"),n.e("26848"),n.e("60770")]).then(n.bind(n,970094)));let f=(i=null,e=>{i&&i.close();let{position:t,popoverProps:n}=e,u=(0,o._)(e,["position","popoverProps"]),d=document.createElement("div");document.body.appendChild(d);let c=(0,s.createRoot)(d),f={close:()=>{var e;c.unmount(),null===(e=d.parentElement)||void 0===e||e.removeChild(d),i=null}};return c.render((0,a.jsx)("div",{children:(0,a.jsx)(_,(0,l._)((0,r._)({},u),{popoverProps:(0,l._)((0,r._)({},n),{defaultVisible:!0}),onClose:f.close,children:(0,a.jsx)("span",{className:v.default.popHolder,style:t})}))})),i=f,f}),m=e=>{let{store:t}=e,n=(0,o._)(e,["store"]),i=(0,c.C)(t);return f((0,r._)({},i,n))},h=async(e,t)=>{try{let n=e.rightPanelStore.rootEl.getBoundingClientRect(),i={height:1,width:1,left:void 0===t.left?n.x:t.left,top:void 0===t.top?n.y:t.top};m((0,l._)((0,r._)({store:e},t),{popoverProps:{position:t.position||"leftTop"},targetUserType:"audience",position:i,clickSource:`h5_${t.source}`,needMask:!0}))}catch(e){(0,u.OK)().sendEvent({name:"JSBOpenProfileError",categories:{error:e,params:t}})}};var p={Follow:"follow",SendGift:"send_gift",ToOtherAnchor:"to_other_anchor",ProfileSetting:"profile_setting",PersonalCenter:"personal_center",FansGroup:"fans_group",At:"mention",Report:"report",Manage:"manage",Mute:"mute",SecondaryFollow:"secondary_follow",FlashSale:"flash_sale",Block:"block",Avatar:"avatar",UserName:"user_name",SmallShopEntrance:"small_shop_entrance",TakeLive:"take_live"},g={PayGrade:"pay_grade",FansClub:"fans_club",GiftHome:"gift_home",Subscription:"subscription",DressSuit:"dress_suit",ShopFansClub:"shop_fans_club",HighScoreSong:"high_score_song",PK:"pk",Match:"match",GiftExhibitionBanner:"gift_exhibition_banner",Shop:"shop",LocalLife:"local_life"},y={SendGift:"send_gift",LinkMic:"link_mic",Like:"like",FlashShopping:"flash_shopping",AnchorUserRelation:"anchor_user_relation",PotentialAnchorUserRelation:"potential_anchor_user_relation",AdventureInvite:"adventure_invite",AdventureList:"adventure_list",More:"more",Comment:"comment",GetSameDressButton:"get_same_dress_button",EnterEffectFloatShow:"enter_effect_float_show",GiftTrayFloatShow:"gift_tray_float_show",VisitorEntrance:"visitor_entrance"},E={LiveAnchorRankHonor:"live_anchor_rank_honor",AuthInfo:"auth_info",WhiteCategoryCert:"white_category_cert",IndustryCertification:"industry_certification",Admin:"admin",ContributorRank:"contributor_rank",CardInterCom:"card_inter_com",GenderAndAge:"gender_and_age",LocationInfo:"location_info",SchoolInfo:"school_info",FollowInfo:"follow_info",Poi:"poi"};let I=e=>[p,g,y,E].reduce((t,n,i)=>{let o=`function_list_${i+1}`,a=Object.values(n).filter(t=>{var n;return!!(null==e?void 0:null===(n=e.getElementsByClassName(t))||void 0===n?void 0:n.length)}).join("|");return(0,l._)((0,r._)({},t),{[o]:a})},{})},147914:function(e,t,n){n.d(t,{C:function(){return m},V:function(){return h}});var i=n(520739);n(675373),n(250440);var r=n(563097);n(88648);var l=n(709606),o=n(53562),a=n(338426),u=n(582746),s=n(490068),d=n(645260),c=n.n(d),v=n(460264),_=n(558452);let f=(0,a.ZP)(()=>Promise.all([n.e("28251"),n.e("264"),n.e("26848"),n.e("60770")]).then(n.bind(n,970094))),m=e=>{var t,n,i,r;let{roomStore:{roomInfo:o},userStore:{userInfo:a},activityIndicatorStore:{JSBInstance:u},vipStore:{setIsShowVipPanel:d},fansClubStore:{setFansClubShowStatus:f},linkmicStore:{linkRoomType:m,functionType2:h,setChoosePeopleAll:p,setChoosePeopleArr:g,setFaceRecognitionShow:y,linkMicSeatsRaw:E,groupLiveMemberList:I=[],isPaidLinking:L},singletonStore:{liveContainer:w},giftStore:{setGiftPanelShowFrom:N,setGiftPanelSwitchStatus:S},pkStore:{pkUserIdList:C,pkStatus:T,pkAppData:x,pkTeamCount:A,pkPlayMode:P,pkId:b,pkListData:R},eventStore:{linkmicEvent:O,slardarEvent:k}}=e,M=null==o?void 0:null===(t=o.anchor)||void 0===t?void 0:t.id_str,D=c()(R,"battle_stats.battle_settings.battle_config_setting.team_mode",0);return{anchorId:M,secAnchorId:null==o?void 0:null===(n=o.anchor)||void 0===n?void 0:n.sec_uid,roomId:null==o?void 0:null===(i=o.room)||void 0===i?void 0:i.id_str,currentUid:null==a?void 0:a.id_str,currentSecUid:null==a?void 0:a.sec_uid,openSchema:u.openScheme,liveContainer:w,setFaceRecognitionShow:y,linkmicEvent:O,slardarEvent:k,linkRoomType:m,functionType2:h,isPaidLinking:L,pkStatus:T,team_mode:D,channel_id:null==x?void 0:x.channelId,invite_mode:P,anchor_connect_status:(null==x?void 0:null===(r=x.grids)||void 0===r?void 0:r.length)||-1,pkTeamCount:A,pk_id:b,openVip:()=>{(0,_.Z)("personal_profile")},openFansClub:()=>{f({isShow:!0,source:"profile"})},openGiftPanel:e=>{null==p||p(!1),null==g||g([e]),null==N||N("profile"),null==S||S(l.nN.OPEN_GIFT)},checkIsGuestUser:e=>e!==M&&(C.includes(e)||Object.values(E).some(t=>{var n,i;return(null==t?void 0:null===(i=t.user)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.id_str)===e})),checkCanShowProfile:e=>{var t,n,i,r;let l=null==o?void 0:o.room;if(null==l?void 0:null===(t=l.room_auth)||void 0===t?void 0:t.UserCard)return!0;let u=null==a?void 0:a.id_str,s=null==a?void 0:null===(n=a.user_attr)||void 0===n?void 0:n.is_admin;if(s||e===M||e===u||u===M)return!0;let d=!!(null==l?void 0:null===(r=l.others)||void 0===r?void 0:null===(i=r.group_live_data)||void 0===i?void 0:i.is_group_live),c=I.some(t=>{var n;return(null==t?void 0:null===(n=t.user)||void 0===n?void 0:n.id_str)===e});return d&&c},isLinkMicManger:(()=>{var e,t;let n=null==a?void 0:null===(e=a.user_attr)||void 0===e?void 0:e.is_admin,i=(null==a?void 0:null===(t=a.user_attr)||void 0===t?void 0:t.admin_privileges)||[];return n&&i.includes(s.s.LinkMicPrivilege)})(),beforeFetchData:(0,v.s1)(e),store:e}},h=(0,o.Pi)(e=>{let t=(0,i._)({},m((0,u.Z)()),e);return(0,r.jsx)(f,(0,i._)({},t))})},670580:function(e,t,n){n.d(t,{Q:function(){return u},n:function(){return s}}),n(874386);var i=n(563097),r=n(88648),l=n(946351),o=n(713097),a=n.n(o);let u=(0,r.createContext)({}),s=e=>{let{children:t,skeleton:n}=e,o=r.useRef(null),[s,d]=r.useState(!1),[c,v]=r.useState(!0);return(0,r.useEffect)(()=>{setTimeout(()=>{d(!0)},1e4)},[]),(0,r.useEffect)(()=>{s&&setTimeout(()=>{v(!1)},300)},[s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(u.Provider,{value:{triggerLoadDone:()=>{d(!0)}},children:[c?(0,i.jsx)("div",{className:a()(l.default.skeleton,s?l.default.hide:""),children:n}):null,(0,i.jsx)("div",{ref:o,style:{display:"contents",opacity:s?1:0},children:t})]})})}},623504:function(e,t,n){n.d(t,{W:function(){return f},Z:function(){return h}});var i=n(520739),r=n(563097),l=n(88648),o=n(650081),a=n(75978),u=n(88506),s=n(805591),d=n(842392),c=n(906177),v=n(109539);let _=e=>{let t=e%60,n=Math.floor(e/60);return 0===n?`${t}秒`:0===t?`${n}分钟`:`${n}分钟${t}秒`};var f={IN_LIVING_ROOM:1,1:"IN_LIVING_ROOM",COMMON_SCENE:2,2:"COMMON_SCENE",IN_LIVING_RECOMMEND:3,3:"IN_LIVING_RECOMMEND",LIVING_SEARCH:4,4:"LIVING_SEARCH"};let m={FIRST:"首",STRIGHT:"直"},h=e=>{var t;let{scene:n=1,logParams:f={},isFirstLive:h=!1,onPaidLiveTryWatch:p=()=>{},watchTime:g=180}=e,{player:y}=(0,s.n)(),E=()=>{setTimeout(()=>{null==y||y.pause()},1)};l.useEffect(()=>{null==y||y.pause();let e=y.video.style.display,t=(0,d.K)(y,"xg-controls");return(0,d.K)(y,"xg-enter"),y.video.style.display="none",null==y||y.on("play",E),()=>{try{t(),null==y||y.play(),null==y||y.off("play",E),y.video.style.display=e}catch(e){}}},[y]);let{dispatch:I}=null!==(t=(0,v.useUserInfoContext)())&&void 0!==t?t:{},L=()=>{1===n||3===n?(0,a.p)().then(e=>{var t,n;e({headerText:`登录后免费试看${_(g)}`,success:async()=>{!(0,c.I)()&&window.location.reload()},next:`https://${null===(n=window)||void 0===n?void 0:null===(t=n.location)||void 0===t?void 0:t.host}`,enterMethod:"paidlive"})}):(2===n||4===n)&&(0,a.p)().then(e=>{var t,n;e({headerText:`登录后免费试看${_(g)}`,success:async()=>{null==I||I({type:"updateUserInfo"})},next:`https://${null===(n=window)||void 0===n?void 0:null===(t=n.location)||void 0===t?void 0:t.host}`,enterMethod:"paidlive"})});try{null==p||p()}catch(e){}};return l.useEffect(()=>{1===n?(0,u.zq)(1===n?"paidlive_inlive":"paidlive_window"):(0,u.Wr)((0,i._)({},f))},[n]),(0,r.jsxs)("div",{className:o.default.smegmae_contianer,children:[(0,r.jsxs)("div",{className:o.default.smegmae_contianer_title,children:["本",h?m.FIRST:m.STRIGHT,"播为付费",h?m.FIRST:m.STRIGHT,"播"]}),(0,r.jsxs)("div",{className:o.default.smegmae_contianer_desc,children:["购票后可观看整场",h?m.FIRST:m.STRIGHT,"播"]}),(0,r.jsxs)("div",{className:o.default.smegmae_contianer_button,onClick:()=>L(),children:["免费试看",_(g)]})]})}},842392:function(e,t,n){n.d(t,{K:function(){return p},V:function(){return g}});var i=n(520739);n(874386);var r=n(563097),l=n(88648),o=n(718135),a=n(805591),u=n(910863),s=n(684767),d=n(632766),c=n(623504),v=n(96008),_=n.n(v),f=n(645260),m=n.n(f),h=n(88506);let p=(e,t)=>{let n=e.root.querySelector(t);return n?(n.style.display="none",()=>{n&&(n.style.display="block")}):_()},g=e=>{let{webRid:t="",scene:n=c.W.COMMON_SCENE,logParams:v={},isFirstLive:_=!1,onPaidLiveBuyTicket:f=()=>{},jumpHref:g="",isActive:y=!1,container:E,store:I}=e,{player:L}=(0,a.n)(),w=l.useRef(!1),[N,S]=(0,l.useState)("https://lf-dy-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/h5/vs_paid_live_audience_pc_buy_ticket_h5_douyin/pages/ticket_pc/index.html?ticket_entrance=paidlive_live_tryend_card"),C=()=>{setTimeout(()=>{null==L||L.pause()},1)};l.useEffect(()=>{null==L||L.pause();let e=L.video.style.opacity,t=p(L,"xg-controls");return p(L,"xg-enter"),L.video.style.opacity=0,null==L||L.on("play",C),()=>{try{t(),null==L||L.play(),null==L||L.off("play",C),L.video.style.opacity=e}catch(e){}}},[]),(0,l.useEffect)(()=>{try{(async()=>{let e=await (0,d.ZP)({service_name:"webcast.douyin.live_pc",key:"hybrid_schema"}),t=m()(e,"paid_live_ticket_panel","");t&&S(`${t}?ticket_entrance=paidlive_live_tryend_card`)})()}catch(e){}},[]);let T=()=>{try{null==f||f()}catch(e){}if(n===c.W.IN_LIVING_ROOM){var e,i;null==I||null===(i=I.singletonStore)||void 0===i||null===(e=i.setPaidLiveQRCodeVisible)||void 0===e||e.call(i,!0),(0,h.c9)("tryend")}else(0,h.dh)(v),g?window.open((0,u.G7)({if_paid_live_card:"1",ticket_entrance:"paidlive_window_tryend_card",entrance_form:"paidlive_window_tryend_card"},g),(0,s.f)()?"_self":void 0):window.open(`https://live.douyin.com/${t}?if_paid_live_card=1&ticket_entrance=paidlive_window_tryend_card`,(0,s.f)()?"_self":void 0)};return l.useEffect(()=>{n===c.W.IN_LIVING_ROOM&&(0,h.t4)()},[]),l.useEffect(()=>{(n===c.W.COMMON_SCENE||n===c.W.LIVING_SEARCH)&&w.current!==y&&y&&(0,h.B5)((0,i._)({},v))},[y]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:o.default.smegmae_contianer_mask}),(0,r.jsxs)("div",{className:o.default.smegmae_contianer,children:[(0,r.jsx)("div",{className:o.default.smegmae_contianer_title,children:"免费试看结束"}),(0,r.jsxs)("div",{className:o.default.smegmae_contianer_desc,children:["购票后可观看整场",_?"首":"直","播"]}),(0,r.jsx)("div",{className:o.default.smegmae_contianer_button,onClick:e=>T(),children:"购票继续看"})]})]})}},639194:function(e,t,n){let i;n.d(t,{Nu:function(){return th}});var r=n("520739"),l=n("878389");n("874386"),n("429532"),n("413806"),n("826893"),n("268917"),n("779788");var o=n("563097"),a=n("948375"),u=n("713097"),s=n.n(u),d=n("88648"),c=n("734123"),v=n("441447"),_=n("725887"),f=n("607412"),m=n("878511"),h=n("521481"),p=n("837457"),g=n("370302"),y=n("368200"),E=n("308602"),I=n.n(E),L=n("926418"),w=n("852477"),N=n("780553"),S=n("550295"),C=n("770543"),T=n("496691");n("746071");var x=n("814903"),A=n("222256"),P=n("509090"),b=n("852664"),R=n("246050"),O=n("355649"),k=n("385021");n("699034");var M=n("760608");n("50031"),n("610839"),n("964421"),n("169581");var D=n("850643");n("4030"),n("361191"),n("87955"),n("285897");var U=n("134761");n("906120");class V extends c.Plugin{static get pluginName(){return"LiveMonitorPlugin"}static get defaultConfig(){return{show:!0}}computedInfo(){let e=this.player;try{var t;let n=Math.round(1e3/e.plugins.flvlive._context._instanceMap.TRACKS.videoTrack.meta.refSampleDuration),i=e.plugins.flvlive._context._instanceMap.TRACKS.videoTrack.meta.codec,r=e.video,l=null===(t=e.video)||void 0===t?void 0:t.getVideoPlaybackQuality().totalVideoFrames,o=l-this.lastTotalFrames;return this.lastTotalFrames=l,{fps:n,codec:i,currentTime:r.currentTime,decoder:-1!==i.indexOf("avc1")?"H264":"H265",buffered:r.buffered.end(0)-r.currentTime,renderFps:o,width:r.videoWidth,height:r.videoHeight}}catch(e){}}renderMoniorItem(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return`<div class="m_item">
      <span>${t}</span>:${e}${null!=n?n:`&npsp;<span>${n}</span>`}
    </div>`}renderMonitorInfo(){let e=this.computedInfo();if(!e)return;let{fps:t,codec:n,currentTime:i,decoder:r,buffered:l,renderFps:o,width:a,height:u}=e;return`
      <div class="live-monitor-content">
       ${this.renderMoniorItem(t,"视频帧率","fps")}
       ${this.renderMoniorItem(r,"视频编码")}
       ${this.renderMoniorItem(i,"当前播放时间")}
       ${this.renderMoniorItem(l,"buffer缓存","s")}
       ${this.renderMoniorItem(o,"渲染帧率","fps")}
       ${this.renderMoniorItem(`${a}/${u}`,"分辨率","单位w/h")}
      </dv>
    `}startRender(){if(!!this.config.show)clearInterval(this.timmer),this.timmer=setInterval(()=>{let e=this.renderMonitorInfo();c.Util.findDom(void 0,".xg-live-monitor").innerHTML=e},1e3)}endRender(){clearInterval(this.timmer)}getDom(){return c.Util.findDom(void 0,".xg-monitor-pannel")}show(){this.getDom().style.display="block",this.startRender()}hidden(){this.getDom().style.display="none",this.endRender()}afterPlayerInit(){}afterCreate(){this.bind(".close-pannel",this.hidden)}destroy(){clearInterval(this.timmer),this.unbind(".close-pannel",this.hidden)}render(){return`
      <div class="xg-monitor-pannel">
        <span class="close-pannel">关闭</span>
        <div class="xg-live-monitor"></div>
      </div>
    `}constructor(e){super(e),(0,U._)(this,"lastTotalFrames",0),(0,U._)(this,"timmer",null)}}n("123007");let j={danmu:".danmu-icon",fullscreen:".xgplayer-fullscreen",cssFullscreen:".full-cssfullscreen"};class F extends c.Plugin{static get pluginName(){return"MaskIconPlugin"}static get defaultConfig(){return{icons:["danmu","fullscreen","cssFullscreen"]}}maskCall(e){var t;e.preventDefault(),e.stopPropagation();let n=e.target;null===this||void 0===this||this.maskToast({interact_name:null==n?void 0:null===(t=n.dataset)||void 0===t?void 0:t.maskKey})}getDom(e){let t=j[e];return document.querySelector(t)}appendMask(e){let t=this.getDom(e);if(!t||this.recorder[e])return;this.recorder[e]=!0;let n=document.createElement("div");n.dataset.maskKey=e,n.addEventListener("click",this.maskCall),n.classList.add("mask-icon-live-cus"),t.classList.add("mask-icon-live-cus-container"),t.append(n)}removeMask(e){let t=this.getDom(e);if(!!t){for(let i of(this.recorder[e]=!1,(null==t?void 0:t.children)||[])){var n;(null==i?void 0:null===(n=i.className)||void 0===n?void 0:n.indexOf("mask-icon-live-cus"))>-1&&t.removeChild(i)}t.classList.remove("mask-icon-live-cus-container")}}initMask(){this.icons.forEach(e=>{this.appendMask(e)})}desMask(){this.icons.forEach(e=>{e&&this.removeMask(e)}),this.recorder={}}addMask(e){if(!!j[e])this.appendMask(e)}removeMaskIcon(e){if(!!j[e]&&!!this.recorder[e])this.removeMask(e)}afterCreate(){}destroy(){this.desMask()}constructor(e){var t;super(e),this.icons=["danmu","fullscreen"],this.recorder={},this.maskToast=null===(t=this.playerConfig)||void 0===t?void 0:t.maskToast,this.maskCall=this.maskCall.bind(this)}}var G=n("174430");let H=(0,d.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.29 10.29a2 2 0 0 1 2-2h10.693a2 2 0 0 1 2 2v5.404a5.55 5.55 0 0 0-2.472-.55v-2.871a.6.6 0 0 0-.6-.6h-.772l.322-.478a.6.6 0 0 0-.996-.67l-.772 1.148h-.317l-.772-1.148a.6.6 0 1 0-.995.67l.321.478h-.774a.6.6 0 0 0-.6.6v3.772a.6.6 0 0 0 .6.6h1.609a5.602 5.602 0 0 0-.625.69h-1.463a.6.6 0 1 0 0 1.2h.763a5.554 5.554 0 0 0-.443 2.181c0 .76.152 1.484.428 2.144h-5.136a2 2 0 0 1-2-2V10.29zm11.021 4.997a5.535 5.535 0 0 0-.552.158h-.626v-.684h1.178v.526zm-9.034-3.955a.6.6 0 0 1 .6-.6h2.377a.6.6 0 0 1 .6.6v2.83a.6.6 0 0 1-.6.6h-1.777v1.157h1.777a.6.6 0 0 1 .6.6v3.3a.6.6 0 0 1-.6.6h-2.377a.6.6 0 0 1 0-1.2h1.777v-2.1h-1.777a.6.6 0 0 1-.6-.6V14.16a.6.6 0 0 1 .6-.6h1.777v-1.629h-1.777a.6.6 0 0 1-.6-.6zm5.48 4.113v-.684h1.176v.684h-1.177zm0-1.884h1.176v-.688h-1.177v.688zm2.376 0h1.178v-.688h-1.178v.688z",fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("circle",{cx:20.566,cy:20.716,r:3.855,fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.613 22.826a2.355 2.355 0 0 1-3.157-3.157l3.157 3.157zm1.061-1.06l-3.158-3.159a2.355 2.355 0 0 1 3.159 3.159zm1.747-1.05a3.855 3.855 0 1 1-7.71 0 3.855 3.855 0 0 1 7.71 0z",fill:"#FE2C55"})]}))),Y=(0,d.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.29 10.29a2 2 0 0 1 2-2h10.693a2 2 0 0 1 2 2v5.404a5.55 5.55 0 0 0-2.472-.55v-2.871a.6.6 0 0 0-.6-.6h-.772l.322-.478a.6.6 0 0 0-.996-.67l-.772 1.148h-.317l-.772-1.148a.6.6 0 1 0-.995.67l.321.478h-.774a.6.6 0 0 0-.6.6v3.772a.6.6 0 0 0 .6.6h1.609a5.603 5.603 0 0 0-.625.69h-1.463a.6.6 0 1 0 0 1.2h.763a5.554 5.554 0 0 0-.443 2.181c0 .76.152 1.484.428 2.144h-5.136a2 2 0 0 1-2-2V10.29zm11.021 4.997a5.56 5.56 0 0 0-.552.158h-.626v-.684h1.178v.526zm-9.034-3.955a.6.6 0 0 1 .6-.6h2.377a.6.6 0 0 1 .6.6v2.83a.6.6 0 0 1-.6.6h-1.777v1.157h1.777a.6.6 0 0 1 .6.6v3.3a.6.6 0 0 1-.6.6h-2.377a.6.6 0 0 1 0-1.2h1.777v-2.1h-1.777a.6.6 0 0 1-.6-.6V14.16a.6.6 0 0 1 .6-.6h1.777v-1.629h-1.777a.6.6 0 0 1-.6-.6zm5.48 4.113v-.684h1.176v.684h-1.177zm0-1.884h1.176v-.688h-1.177v.688zm2.376 0h1.178v-.688h-1.178v.688z",fill:"#fff"}),(0,o.jsx)("path",{d:"M24.423 20.715a3.857 3.857 0 1 1-7.714 0 3.857 3.857 0 0 1 7.714 0z",fill:"#fff"}),(0,o.jsx)("path",{d:"M18.802 20.5l1.384 1.502 2.214-2.38",stroke:"#FE2C55",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})]}))),Z=(0,d.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 10a2 2 0 0 1 2-2h13a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-13a2 2 0 0 1-2-2V10zm3 4.5v-2h1.499V11h2v2.5a1 1 0 0 1-1 1H10.5zM20 11h-2v2.498a1 1 0 0 0 1 1h2.5v-2H20V11zm0 8.5h1.5v-2H19a1 1 0 0 0-1 1V21h2v-1.5zM12 21v-1.498h-1.5v-2H13a1 1 0 0 1 1 1V21h-2z",fill:"#fff"})}))),z=(0,d.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h13a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2h-13zm10 11h-1.501v2H20.5a1 1 0 0 0 1-1v-2.5h-2V19zm-7 0v-1.5h-2V20a1 1 0 0 0 1 1h2.499v-2H12.5zm0-6h1.499v-2H11.5a1 1 0 0 0-1 1v2.5h2V13zm7 0h-1.501v-2H20.5a1 1 0 0 1 1 1v2.5h-2V13z",fill:"#fff"})}))),K=(0,d.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("rect",{x:9,y:8,width:5,height:16,rx:1,fill:"#fff"}),(0,o.jsx)("rect",{x:18,y:8,width:5,height:16,rx:1,fill:"#fff"})]}))),B=(0,d.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M23.5 15.134a1 1 0 0 1 0 1.732l-11.25 6.495a1 1 0 0 1-1.5-.866V9.505a1 1 0 0 1 1.5-.866l11.25 6.495z",fill:"#fff"})}))),W=(0,d.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4zM18 19a3 3 0 1 0 0-6v6z",fill:"#fff"}),(0,o.jsx)("path",{d:"M18 23.734l.095-.007A7.75 7.75 0 0 0 18 8.266v2.507a5.25 5.25 0 0 1 0 10.454v2.507z",fill:"#fff"})]}))),$=(0,d.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4zM18 19a3 3 0 1 0 0-6v6z",fill:"#fff"}),(0,o.jsx)("path",{opacity:".3",d:"M18 23.734l.095-.007A7.75 7.75 0 0 0 18 8.266v2.507a5.25 5.25 0 0 1 0 10.454v2.507z",fill:"#fff"})]}))),Q=(0,d.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4z",fill:"#fff"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.002 17.55l2.499 2.954 1.502-1.316-2.693-3.185 2.694-3.185-1.503-1.316-2.499 2.955-2.5-2.955L17 12.818l2.694 3.185-2.693 3.185 1.502 1.316 2.499-2.955z",fill:"#fff"})]}))),q=(0,d.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.588 7.702l-.512.52C22.936 9.12 25 11.823 25 15h-2c0-2.829-2.253-5.095-5-5.095a1 1 0 0 1-.713-1.702l1.875-1.905 1.426 1.404zM9 12a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2H9zm0 2h10v8H9v-8z",fill:"#fff",fillOpacity:".9"})})));var J=n("149620"),X=n("713111"),ee=n("738582");let et={play:(0,ee.I)(B),pause:(0,ee.I)(K),fullscreen:(0,ee.I)(z),exitFullscreen:(0,ee.I)(Z),openDanmu:(0,ee.I)(Y),closeDanmu:(0,ee.I)(H),loadingIcon:(0,J.renderToString)((0,o.jsx)(X.gb,(0,r._)({},i))),volumeMuted:(0,ee.I)(Q),volumeSmall:(0,ee.I)($),volumeLarge:(0,ee.I)(W),rotate:(0,ee.I)(q)},{POSITIONS:en}=c.Plugin;var ei="miniscreen",er="time",el="definition",eo="error",ea="cssfullscreen",eu="fullscreen",es="i18n",ed="loading",ec="mobile",ev="pip",e_="pc",ef="play",em="poster",eh="progress",ep="replay",eg="start",ey="volume",eE="playbackrate",eI="danmu",eL="danmuicon",ew="title",eN="anchor",eS="comment",eC="dyreplay",eT="livestop",ex="report",eA="controls",eP="dynamicBg",eb="enter",eR="cancelMute";en.ROOT,en.ROOT_TOP,en.CONTROLS_LEFT,en.CONTROLS_RIGHT;let eO=(0,r._)({miniscreen:ei,time:er,definition:el,error:eo,cssfullscreen:ea,fullscreen:eu,i18n:es,loading:ed,mobile:ec,pip:ev,pc:e_,play:ef,poster:em,progress:eh,replay:ep,start:eg,volume:ey,playbackrate:eE,danmu:eI,danmuicon:eL,title:ew,anchor:eN,comment:eS,dyreplay:eC,livestop:eT,report:ex,controls:eA,dynamicbg:eP,enter:eb,cancelMute:eR},{keyboard:"keyboard",abr:"abr"});var ek=n("106245"),eM=n("92969"),eD=n("627445"),eU=n("505567"),eV=n("393033"),ej=n("812905"),eF=n("542680"),eG=n("135319"),eH=n("232410");let eY=[eO.i18n,eO.progress,eO.replay,eO.time,eO.playbackrate,eO.definition,eO.start,eO.error],eZ=[ek.Z,eM.Z,eD.Z,eU.Z,eV.Z,ej.Z,eF.Z,eH.Z],ez=[eG.Z];var eK=n("973113");let eB=(0,J.renderToString)((0,o.jsx)(X.gb,{className:eK.default.livePlayerLoading}));var eW=n("130003");n("927234"),n("250440"),n("882732"),n("544943");var e$=n("49762"),eQ=n("476309");let eq=e=>e?{mammon:{compressorOptions:{attack:.003,knee:10,ratio:8,release:.25,threshold:-18},meta:{loudness:-12,peak:1,targetLufs:-12},logger:!0,debugger:!0},videoAttributes:{crossOrigin:"anonymous"}}:{};n("284961"),n("242079"),n("851912"),n("954372"),n("668156"),n("179133");let eJ=e=>{var t;return(null===(t=window.pre302Map)||void 0===t?void 0:t[e])||e},eX=()=>{var e;return void 0!==(null===(e=window)||void 0===e?void 0:e.InstallTrigger)||/firefox/i.test(navigator.userAgent)},e0=()=>/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);function e1(e){return e.toString().padStart(2,"0")}let e2=()=>{let e=new Date;return`${Math.random().toString().slice(-3)}-${e.getFullYear()}${e1(e.getMonth()+1)}${e1(e.getDate())}${e1(e.getHours())}${e1(e.getMinutes())}${e1(e.getSeconds())}${e.getMilliseconds()}${Math.random().toString().slice(-7)}${Math.random().toString(16).toUpperCase().slice(-10)}`},e3={width:"100%",height:"100%",videoInit:!0,autoplay:!0,closePlayerBlur:!1,leavePlayerTime:0,volume:.3,start:{isShowPause:!1,disableAnimate:!0},rotate:!1,keyboard:h.Ht,ignores:eY};var e6={ALIVE:9999,9999:"ALIVE"},e8=n("73528"),e5=n("910374"),e4=n("88012");c.I18N.use(k.Z);let e7=(e,t)=>{let{icons:n={}}=e;Object.assign(t,{icons:(0,r._)({},et,n),enter:{innerHtml:eB}})},e9=(e,t)=>{var n;let{player:i,logger:r}=t,{isFullscreen:l,fullscreenTarget:o,monitor:a,mini:u,miniscreen:s,isBlackScreenProbe:d=!1,adaptiveConfig:c,beforePlayerInit:v,resolutionsel:f,bgplay:m,isPaidLive:h,volumeBalance:p,isWebSr:g,volumeWaterMark:y,showValueLabel:E}=e;e7(e,i.config),null==v||v(),E&&(i.config.volume={default:i.config.volume,showValueLabel:!0}),l&&i.getFullscreen(o);let I=[...eZ,...a?[V]:[],...u||s?ez:[],...d?[S.Z]:[],...(null==c?void 0:c.thresholdDown)?[L.Z]:[],...f?[C.Z]:[],...m?[N.Z]:[],...h?[F]:[],...p?[eW.Z]:[],T.Z];for(let e of(!(0,b.G6)()&&!(0,b.vU)()&&I.push(M.Z),g&&I.push(e8.o),!(0,A.tq)()&&I.push(D.Z),I))i.registerPlugin(e);return r.updateExt({abvids:null!==(n=_.Le.getConfig(_.gI.AbtestVids))&&void 0!==n?n:""}),{player:i,logger:r}};var te=n("273312");let tt=(0,d.createContext)({main:{},search:{},web:{}}),tn=()=>(0,d.useContext)(tt);n("275377");let ti=e=>({});n("338172");var tr=n("96008"),tl=n.n(tr);let to=(e,t,n)=>{let{onReady:i=tl(),onComplete:r=tl(),onLoadedData:l=tl(),onLoadStart:o=tl(),beforePlayerInit:a=tl()}=n;if(!e)return;let{__inline_player__:u}=window;if(u.beforePlayerInit&&a(u.beforePlayerInit),u.ready&&i(u.ready),u.complete&&r(u.complete),u.loadeddata){var s;l(u.loadeddata),null===(s=n.onPlay)||void 0===s||s.call(n)}u.loadstart&&o(u.loadstart)},ta=(e,t)=>{let n=e.root;if(n!==t.current){for(let[e,i]of Object.entries(t.current))e.startsWith("__react")&&(n[e]=t.current[e],i.stateNode&&(i.stateNode=n,i.alternate&&(i.alternate.stateNode=n)));t.current.replaceWith(n),t.current=n,window.__inline_player__.useDom()}},tu=e=>{let{__inline_player__:t}=window;if(!!t.error)setTimeout(()=>{e.emit(c.Events.ERROR,t.errorRet)},100)};var ts=n("774444");n("595814");var td=n("876877"),tc=n("550387"),tv=n("774438"),t_=n("907940"),tf=n("805591");let tm=e=>{let{disableLogger:t}=e,n=(0,tf.n)(),i=(0,d.useCallback)(e=>{var t;null==n||null===(t=n.logger)||void 0===t||t.updateExt(e)},[null==n?void 0:n.logger]);return(0,e5.re)({disableLogger:t,updateExt:i}),null},th=d.memo(d.forwardRef((e,t)=>{var n,i,u;let{url:E,className:k,style:U,isPure:j,isPause:H,isFullscreen:Y,fullscreenTarget:Z,disableFullScreen:z,disableKeyboard:K,loadTimeout:B=5e3,retryCount:W=3,beforePlayerInit:$,onPlay:Q,onPause:q,onPlaying:J,onReady:X,onComplete:ee,onLoadStart:et,onLoadedData:en,onTtfb:ei,onError:er,onFullScreen:el,onVolumeChange:eo,onEnd:ea,onWaiting:eu,onUserAction:es,onBlur:ed,onFocus:ec,onClick:ev,plugins:e_=[],volume:ef=.3,videoInit:em=!0,autoplayMuted:eh=!1,autoplay:ep=!0,icons:eg={},resolutionsel:ey,bgplay:eE,children:eI,closeFocusVideoFocus:eL=!1,closePlayVideoFocus:ew=!1,closePauseVideoFocus:eN=!1,closeVideoDblclick:eS=!1,closeVideoClick:eC=!1,poster:eT="",preloadTime:ex=4,mediaType:eA,mini:eP,miniscreen:eb,refreshPlayer:eR,dynamicBgConf:ek,monitor:eM,isBlackScreenProbe:eD=!1,marginControls:eU=!1,enableContextmenu:eV=!1,sessionId:ej,loggerOptions:eF,flvPreloader:eG=null,adaptiveConfig:eH,abrPts:eB,markuse:e1,isPaidLive:e8,secretKey:tt,bitrate:tr,maskToast:tf,rotate:th=!1,autoHide:tp=!0,isVideoSupportMP4:tg=!0,isVipLive:ty=!1,isVip:tE=!1,freePreview:tI=!1,needSr:tL=!1,volumeBalance:tw=!1,playerAction:tN,isGovern:tS=!0,onReplay:tC=()=>{},stream:tT,disconnectTime:tx=0,playerWaterMark:tA,volumeWaterMark:tP,showValueLabel:tb=!0,disableLogger:tR=!1}=e,tO=d.useRef(null),tk=d.useRef(),tM=d.useRef(),[tD,tU]=d.useState(!1),{abrPts:tV=h.CL,adaptiveConfig:tj=null}=(0,m.Z)(),tF=null!==(u=(0,te.j)())&&void 0!==u?u:{},tG=Object.assign({},eH||tj,ti(tF)),{onLoadStart:tH}=(0,tc.V)(tk.current),tY=null===(i=tn().main)||void 0===i?void 0:null===(n=i.live_sr_config)||void 0===n?void 0:n.minCpuCnt,tZ=(0,eQ.QS)({tccSrMinCpuCnt:tY,abTestData:tF,needSr:tL}),tz=(0,g.GT)(E,{abr_pts:eB||tV}),tK=d.useRef(tz);tK.current=tz,d.useEffect(()=>{var e,t,n,i;if(!!tD&&!!tk.current)K?null===(t=tk.current.plugins)||void 0===t||null===(e=t.keyboard)||void 0===e||e.disable():null===(i=tk.current.plugins)||void 0===i||null===(n=i.keyboard)||void 0===n||n.enable()},[K,tD]),d.useEffect(()=>{if(tD){var e,t,n;null===(n=tk.current)||void 0===n||null===(t=n.plugins)||void 0===t||null===(e=t.rotate)||void 0===e||e.hide()}},[tD]),d.useEffect(()=>{if(tM.current){let e=v.listen(v.EVENT.updateAbVids,()=>{tM.current.updateExt({abvids:_.Le.getConfig(_.gI.AbtestVids)})});return()=>e()}},[tD]),d.useEffect(()=>{if(tk.current&&tk.current.config){let e=tk.current;e&&(e.volume=ef)}},[ef]),d.useEffect(()=>{if(tk.current&&tk.current.config){let e=tk.current;null==e||e.setConfig({maskToast:tf})}},[tf]),d.useEffect(()=>{if(tk.current&&tk.current.config){let e=tk.current;null==e||e.setConfig({closeVideoClick:eC,closePauseVideoFocus:eN})}},[eC,eN]),d.useEffect(()=>{if(tk.current&&tk.current.config){let e=tk.current;if("boolean"!=typeof e.config.controls)e.plugins.controls.config.autoHide=tp,tp?e.plugins.controls.recoverAutoHide():e.plugins.controls.pauseAutoHide()}},[tp]);let{isInPreview:tB}=(0,ts.DQ)(),{innerFeedOn:tW}=(0,tv.P)(),t$=d.useRef("");d.useEffect(()=>{if(tk.current&&tk.current.config&&tK.current&&E){var e,t,n,i;let r=tk.current;if((0,g.sw)(tK.current)&&(0,g.VU)()){if(r.paused){if((tB||tW)&&(null===(n=t$.current)||void 0===n?void 0:n.split("?")[0])===(null===(i=tK.current)||void 0===i?void 0:i.split("?")[0]))return;if(!(0,t_.C)(tK.current,r.config.url)&&(null==r||r.setConfig({url:tK.current,videoInit:em,autoplay:ep,autoplayMuted:eh})),t$.current=tK.current,tW){r.retry();return}H&&!r.paused?r.pause():!H&&r.paused&&r.play()}else{window.performance.mark("change streamData end");if((tB||tW)&&(null===(e=t$.current)||void 0===e?void 0:e.split("?")[0])===(null===(t=tK.current)||void 0===t?void 0:t.split("?")[0]))return;if(t$.current=tK.current,(0,t_.C)(tK.current,tk.current.src))return;tk.current.src=tK.current}}}},[E,tK.current,tB]),d.useEffect(()=>{tk.current&&tk.current.config&&(tk.current.mediaType=eA)},[eA]);let tQ=d.useRef(0);d.useEffect(()=>{if(!tB){if(tD&&void 0!==H&&tk.current){let e=tk.current;if(H&&!e.paused)e.pause();else if(!H&&e.paused){if(0===tQ.current&&e.config.autoplay){tQ.current+=1;return}(0,g.sw)(e.config.url)&&(0,g.VU)()&&!tB&&e.play()}}}},[H,tD,tB]),d.useEffect(()=>{let e=tk.current;tD&&(null==e?void 0:e.paused)&&eR&&(null==e||e.retry())},[eR]);let tq=(0,a.Z)(Q||tl()),tJ=(0,a.Z)(ec||tl()),tX=(0,a.Z)(ed||tl()),t0=(0,a.Z)(J||tl()),t1=(0,a.Z)(eu||tl()),t2=(0,a.Z)(X||tl()),t3=(0,a.Z)(ee||tl()),t6=(0,a.Z)(er||tl()),t8=(0,a.Z)(el||tl()),t5=(0,a.Z)(eo||tl()),t4=(0,a.Z)(q||tl()),t7=(0,a.Z)(ea||tl()),t9=(0,a.Z)(et||tl()),ne=(0,a.Z)(en||tl()),nt=(0,a.Z)(tC||tl()),nn=(0,a.Z)(es||tl()),ni=(0,a.Z)(ei||tl());d.useEffect(()=>{let e=tk.current;e&&tD&&e_.forEach(t=>{t&&e.registerPlugin(t)})},[e_,tD]),d.useImperativeHandle(t,()=>({getPlayer:()=>tk.current,getPlayerDom:()=>tO.current,getPlayerLogger:()=>tM.current}));let nr=d.useMemo(()=>({isPure:j,disableFullScreen:z,url:tK.current,bitrate:tr,volume:ef<0?.6:ef,poster:eT,icons:eg,resolutionsel:ey,bgplay:eE,videoInit:(0,g.sw)(tK.current)&&em,autoplay:(0,g.sw)(tK.current)&&ep&&!(ty&&!tE&&!tI),autoplayMuted:(0,g.sw)(tK.current)&&eh,isFullscreen:Y,loadTimeout:B,retryCount:W,preloadTime:ex,flvPreloader:eG,monitor:eM,mini:eP,miniscreen:eb,closeFocusVideoFocus:eL,closePauseVideoFocus:eN,closePlayVideoFocus:ew,closeVideoDblclick:eS,closeVideoClick:eC,enableContextmenu:eV,isBlackScreenProbe:eD,adaptiveConfig:tG,marginControls:eU,mediaType:eA,dynamicBgConf:ek,beforePlayerInit:$,markuse:e1,loggerOptions:eF,isPaidLive:e8,secretKey:tt,maskToast:tf,sessionId:ej,rotate:th,autoHide:tp,isVideoSupportMP4:tg,isVipLive:ty,isVip:tE,freePreview:tI,needSr:tL,volumeBalance:tw,isGovern:tS,stream:tT,fullscreenTarget:Z,volumeWaterMark:tP,showValueLabel:tb}),[]);d.useEffect(()=>{let{error_report_stop:t}=null!=eF?eF:{},n=[];if(tO.current){var i;if(ey&&!(null==tN?void 0:tN.inlinePlayer)){let e=tO.current.getBoundingClientRect();ey.playWidth=e.width,ey.playHeight=e.height}let{ret:t,used:o}=null!==(i=window.__inline_player__)&&void 0!==i?i:{},a=!!((null==tN?void 0:tN.inlinePlayer)&&t&&!o),{player:u,logger:s}=a?e9(nr,t):function(e){var t,n,i,o,a,u;let s=function(e){let{isPure:t=!1,disableFullScreen:n=!1,el:i,url:o,volume:a=.3,poster:u="",icons:s={},videoInit:d=!0,autoplay:c=!0,autoplayMuted:v=!1,fullscreenTarget:_,loadTimeout:f=5e3,retryCount:m=3,preloadTime:p=4,flvPreloader:g=null,mini:y,miniscreen:E,closeFocusVideoFocus:I=!1,closePauseVideoFocus:L=!1,closePlayVideoFocus:w=!1,closeVideoDblclick:N=!1,closeVideoClick:S=!1,enableContextmenu:C=!1,enableTripleScreen:T=!1,adaptiveConfig:x,marginControls:A=!1,mediaType:P,dynamicBgConf:b,resolutionsel:R,bgplay:O,isPaidLive:k,secretKey:M,maskToast:D,sessionId:U,rotate:V=!1,autoHide:j=!0,isVipLive:F,isVip:G,freePreview:H,isWebSr:Y,volumeBalance:Z,stream:z,disconnectTime:K,isSsr:B,volumeWaterMark:W,showValueLabel:$}=e,Q=[...eY,eO.play,eO.volume,eO.fullscreen,eO.keyboard],q=t?Q:eY;n&&!q.includes(eO.fullscreen)&&q.push(eO.fullscreen);let J=eq(Z),X=a;$&&!B&&(X={default:a,showValueLabel:!0});let ee=(0,l._)((0,r._)((0,l._)((0,r._)({},e3),{el:i,url:o,poster:u,videoInit:d,autoplay:c,autoplayMuted:v,ignores:q,i18n:[{LANG:"zh",TEXT:{FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",OPEN:"开启弹幕",OFF:"关闭弹幕",ROTATE_TIPS:"屏幕旋转"}}],volume:X,fullscreen:{target:_},isLive:!0,preProcessUrl:e=>{if(!e)return{url:e};e=eJ(e);try{let t=new URL(e);return t.searchParams.set("_session_id",function(e){let t=e||e2();return`${t}.${Date.now()}.${Math.random().toString().slice(-5)}`}(U)),t.searchParams.set("rsi",String(Number(!!U))),{url:t.href}}catch(t){return{url:e}}},flvlive:(0,r._)({seamlesslyReload:!0,loadTimeout:f,retryCount:m,seiOnDemand:!0,preloadTime:p,preloader:g,stream:z,disconnectTime:K},M&&(k||F&&(G||H))?{FlvDemuxer:e$.Z,keyStr:M}:{}),controls:{initShow:!0,autoHide:j},mini:y,miniscreen:E,closeFocusVideoFocus:I,closePauseVideoFocus:L,closePlayVideoFocus:w,closeVideoDblclick:N,closeVideoClick:S,enableContextmenu:C,pip:!0,resolutionsel:R,bgplay:O,adaptive:x,marginControls:A,mediaType:P||void 0,rotate:!!V&&{index:11,disable:!1}}),J),{triplevideo:{enable:!1}});return!e0()&&!eX()&&(ee.dynamicBg=b||h.Yr),k&&D&&(ee.maskToast=D),Y&&(ee=(0,eQ.D4)(ee)),ee}(e),{url:d,isFullscreen:v,fullscreenTarget:f,monitor:m,mini:p,miniscreen:g,isBlackScreenProbe:E=!1,adaptiveConfig:k,mediaType:U,beforePlayerInit:j,resolutionsel:H,bgplay:Y,loggerOptions:Z={},isPaidLive:z,secretKey:K,bitrate:B,isVideoSupportMP4:W=!0,volumeBalance:$,isGovern:Q,volumeWaterMark:q}=e;e7(e,s),s.plugins=[...eZ,...m?[V]:[],...p||g?ez:[],...E?[S.Z]:[],...(null==k?void 0:k.thresholdDown)?[L.Z]:[],...H?[C.Z]:[],...Y?[N.Z]:[],...z?[F]:[],...$?[eW.Z]:[],T.Z,e4.Z],!(0,b.G6)()&&!(0,b.vU)()&&(s.plugins=[...s.plugins,M.Z]),e.isWebSr&&(s=(0,eQ.tH)(s));let{keepalivetime:J=0}=(0,R.D)(d),X=e6.ALIVE;K&&z&&0!==Number(J)&&(X=Number(J)-Math.floor(Date.now()/1e3)),null==j||j();let ee=new c.SimplePlayer(s);window.playerNewTime=performance.now();let{device_id:et,user_id:en,error_report_stop:ei}=Z,er=(0,y._)(Z,["device_id","user_id","error_report_stop"]),el=new(I())({aid:x.xo.aid,project_key:x.xo.project_key,app_name:x.xo.app_name,user_unique_id:et,device_id:et,user_id:en,ext:(0,l._)((0,r._)({},er),{isSupportedH265:(0,G.iz)()?1:0,isSupportedH266:(0,G.ue)()?1:0,isSupportedAvx2:(0,G.ws)()?1:0,cache_nosupport265:(0,G.$I)(),arch:null!==(i=null===(n=window)||void 0===n?void 0:null===(t=n.TTE_ENV)||void 0===t?void 0:t.arch)&&void 0!==i?i:"",scm_version:null!==(o=window.version)&&void 0!==o?o:"unknown",tce_cluster:null!==(a=window.tce_cluster)&&void 0!==a?a:"unknown",mediaType:U||"video",aes_flv_stream:K&&z?1:0,aes_flv_keepAliveTime:K&&z?X:0,abvids:null!==(u=_.Le.getConfig(_.gI.AbtestVids))&&void 0!==u?u:"",bitrate:B}),error_report_stop:!0,player:ee,playResultThreshold:Q?3e4:21e3,onReport:w.X,isDisableReport:e5.vw});return v&&ee.getFullscreen(f),!(0,A.tq)()&&(ee.registerPlugin(D.Z),ee.registerPlugin(O.ZP),W&&!O.ZP.isSupported()&&P.F.info("抱歉，当前浏览器无法正常观看直播，建议下载客户端或更换浏览器看播")),{player:ee,logger:el}}((0,l._)((0,r._)({},nr),{el:tO.current,videoInit:(0,g.VU)()&&nr.videoInit,autoplay:(0,g.VU)()&&nr.autoplay,autoplayMuted:(0,g.VU)()&&nr.autoplayMuted,disconnectTime:tx}));a&&(window.__inline_player__.used=!0,ta(t.player,tO),tu(t.player)),(0,f.B1)({tag:td.AL.new_preview_live}),tM.current=s,tk.current=u,u.__getPlayerLogger=()=>s,tU(!0),to(a,u,(0,l._)((0,r._)({},e),{onLoadStart:t=>{var n;tH(t),null===(n=e.onLoadStart)||void 0===n||n.call(e,t)}})),u.on(c.Events.PLAY,tq),u.on(c.Events.PLAYER_FOCUS,tJ),u.on(c.Events.PLAYER_BLUR,tX),u.on(c.Events.PLAYING,t0),u.on(c.Events.WAITING,t1),u.on(c.Events.READY,t2),u.on(c.Events.COMPLETE,t3),u.on(c.Events.ERROR,t6),u.on(c.Events.FULLSCREEN_CHANGE,t8),u.on(c.Events.VOLUME_CHANGE,t5),u.on(c.Events.PAUSE,t4),u.on(c.Events.ENDED,t7),u.on(c.Events.LOAD_START,t9),u.on(c.Events.LOADED_DATA,ne),u.on(c.Events.REPLAY,nt),u.on(c.Events.USER_ACTION,nn),u.on("ttfb",ni),(0,eQ.ie)(tZ)&&n.push((0,eQ.GO)(u)),(0,eQ.Sv)(tZ)&&n.push((0,eQ.m1)(u,s))}return()=>{try{var e,i;n.forEach(e=>e());let r=tk.current;null===(e=tk.current)||void 0===e||e.destroy(),tk.current=null,null===(i=tM.current)||void 0===i||i.destroy(!!t),tM.current=null,r.__getPlayerLogger=null}catch(e){}}},[]),d.useEffect(()=>{let e=tk.current;e&&(e.config.fullscreenTarget=Z)},[Z]);let{inlinePlayerScript:nl,loadDeferredScript:no}=d.useMemo(()=>{let e=null,t=null;if(!tN)return{inlinePlayerScript:e,loadDeferredScript:t};let{inlinePlayer:n,isDoubleScreen:i,anchorInfo:r,roomInfo:l}=tN;return n&&nr.url?e=(0,o.jsx)("script",{nonce:"",suppressHydrationWarning:!0,"data-config":"","data-ab":"","data-is-double-screen":JSON.stringify(i),"data-anchor-info":JSON.stringify(r),"data-room-info":JSON.stringify(l),dangerouslySetInnerHTML:{__html:""}}):t=(0,o.jsx)("script",{nonce:"",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:""}}),{inlinePlayerScript:e,loadDeferredScript:t}},[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{ref:tO,onClick:ev,className:s()("basicPlayer",eK.default.player,k,"xgplayer"),style:U,"data-e2e":"basicPlayer",children:[tD&&(0,o.jsxs)(p.E.Provider,{value:{player:tk.current,logger:tM.current},children:[(0,o.jsx)(tm,{disableLogger:tR}),eI]}),tA&&(null==tA?void 0:tA.backgroundImage)&&(0,o.jsx)("div",{className:s()("playerWaterMark"),style:tA})]}),nl,no,(null==tN?void 0:tN.pre302)&&(0,o.jsx)("script",{nonce:"",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:""}})]})}))},476309:function(e,t,n){n.d(t,{By:function(){return _},D4:function(){return h},GO:function(){return g},GY:function(){return f},QS:function(){return d},Sv:function(){return c},ie:function(){return v},m1:function(){return m},tH:function(){return p}});var i=n(520739),r=n(878389);n(413806),n(826893),n(874386),n(250440);var l=n(112501),o=n(73528),a=n(47047),u=n(920605);let s=!!("undefined"!=typeof window&&window.TTCommon),d=e=>{let{tccSrMinCpuCnt:t=8,needSr:n=!1}=e;if(!n)return 0;let i=Number("undefined"!=typeof navigator&&Number(navigator.hardwareConcurrency));return s&&i>=5?1:(0,l.Gb)()&&i>=t?2:0},c=e=>1===e,v=e=>2===e,_=e=>s?!!(0,a.dz)()||((0,a.Q5)()?!!e.liveSrOptimizeMac:void 0):!!e.liveSrOptimize,f=e=>{if(!s&&a.dz)return!!e.liveSuper};function m(e,t){let{TTCommon:n}=window;n.execute("applyConfig",'{"gpu_sr_max_input_size_w":2560,"gpu_sr_max_input_size_h":2560}'),n.execute("applyConfig",'{"gpu_use_single_video_decoder_texture":1, "sr_win_skia_enable": 1}');let i=()=>{if(e.video instanceof HTMLElement)n.executeWithElement(e.video,"updateSrState","255"),t.updateExt({is_sr_called:1})};e.once("canplay",i);let r=()=>{n.execute("applyConfig",'{"gpu_sr_max_input_size_w":4320,"gpu_sr_max_input_size_h":4320}'),n.execute("applyConfig",'{"gpu_use_single_video_decoder_texture":0, "sr_win_skia_enable": 0}'),t.updateExt({is_sr_called:0})};return window.addEventListener("beforeunload",r),()=>{e.off("canplay",i),window.removeEventListener("beforeunload",r),r()}}function h(e){let t="1.0.9".split(".").join("_");return(0,r._)((0,i._)({},e),{videoConfig:(0,r._)((0,i._)({},e.videoConfig),{crossOrigin:"anonymous"}),srplugin:{wasmUrl:`https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/super_resolution_${t}.wasm`,isSingle:!0,useDelayedSR:!0,maxWidth:2e3,maxHeight:2e3}})}function p(e){return(0,r._)((0,i._)({},e),{plugins:[...e.plugins,o.o]})}function g(e){let t=()=>{var t;null===(t=e.plugins.srplugin)||void 0===t||t.active()};e.once("loadeddata",t);let n=t=>{let{srplugin:n}=e.plugins,{isLive:i,quality:r}=(null==t?void 0:t.detail)||{};if(!!i&&n instanceof o.o&&!!u.n.includes(r)&&!!n.core.video)["md","ld","sd","hd"].includes(r)?n.setRunning(!0):n.setRunning(!1)};return document.addEventListener("webcast_qualityEvent",n),()=>{e.off("loadeddata",t),document.removeEventListener("webcast_qualityEvent",n)}}},521481:function(e,t,n){n.d(t,{CL:function(){return l},Ht:function(){return i},Yr:function(){return r}});let i={checkVisible:!1,isGlobalTrigger:!0,keyCodeMap:{space:{code:32,action:"playPause",disable:!1},left:{code:37,disable:!0},right:{code:39,disable:!0},up:{keyCode:187,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:189,action:"downVolume",disable:!1,noBodyTarget:!0},up1:{keyCode:107,action:"upVolume",disable:!1,noBodyTarget:!0},down1:{keyCode:109,action:"downVolume",disable:!1,noBodyTarget:!0}}},r={addMask:!0,maskBg:"rgba(0, 0, 0, 0.5)",disable:!1,frameRate:1/60,mode:"framerate",startInterval:4e3},l="-1800"},920605:function(e,t,n){n.d(t,{n:function(){return i}});let i=["ao","ld","sd","hd","uhd","fhd","origin"]},618105:function(e,t,n){n.d(t,{r:function(){return f}});var i=n(520739),r=n(368200);n(981168);var l=n(563097),o=n(713097),a=n.n(o),u=n(88648),s=n(309931),d=n(734123),c=n(805591),v=n(991148);let _={controlsLeft:".xg-left-grid",controlsRight:".xg-right-grid",controlCenter:".xg-center-grid",controlBottom:".xgplayer-controls",rootTop:".xg-top-bar",rootLeft:".xg-left-bar",rootRight:".xg-right-bar"},f=e=>t=>{let{index:n,position:o,containerClassName:f,containerTagName:m="div"}=t,h=(0,r._)(t,["index","position","containerClassName","containerTagName"]),{player:p}=(0,c.n)(),g=u.useMemo(()=>{if(o)return d.Util.findDom(p.root,_[o])},[o]);return u.useEffect(()=>{g&&Array.from(g.children).sort((e,t)=>Number(e.dataset.index||Number.MAX_SAFE_INTEGER)-Number(t.dataset.index||Number.MAX_SAFE_INTEGER)).forEach(e=>g.appendChild(e))},[g]),g?s.createPortal(u.createElement(m,{"data-index":n,className:a()(v.default.pluginContainer,f,"pluginContainer")},(0,l.jsx)(e,(0,i._)({},h))),g):u.createElement(m,{"data-index":n,className:a()(v.default.pluginContainer,f,"pluginContainer")},(0,l.jsx)(e,(0,i._)({},h)))}},16318:function(e,t,n){n.d(t,{OG:function(){return o},TV:function(){return l}});var i=n(339424);let r=null,l=e=>{var t,n,l,o;return r?r:r=new i.Z({loadTimeout:null!==(t=null==e?void 0:e.loadTimeout)&&void 0!==t?t:4e3,maxReaderInterval:null!==(n=null==e?void 0:e.maxReaderInterval)&&void 0!==n?n:4e3,retryCount:null!==(l=null==e?void 0:e.retryCount)&&void 0!==l?l:0,retryDelay:null!==(o=null==e?void 0:e.retryDelay)&&void 0!==o?o:1e3})},o=!1},370302:function(e,t,n){n.d(t,{GT:function(){return s},VU:function(){return u},sw:function(){return a}}),n(882732),n(544943),n(874386);var i=n(222256),r=n(910863),l=n(174430);let o=e=>{let t="";try{let n=new URL(e);t=null==n?void 0:n.host}catch(e){return"err"}return t},a=e=>void 0!==e&&""!==e&&null!==e&&""!==o(e),u=()=>(0,i.tq)()||!(0,i.tq)()&&(0,l.mJ)(),s=(e,t)=>{let n=!(0,i.tq)()&&e?{abr_pts:null==t?void 0:t.abr_pts,switch_front:null==t?void 0:t.switch_front}:{};return(0,r.G7)(n,e)}},567006:function(e,t,n){n.d(t,{G5:function(){return w}});var i=n(520739),r=n(878389),l=n(368200);n(250440),n(110006),n(826893);var o=n(563097),a=n(88648),u=n(948375),s=n(544845),d=n(167698),c=n(772310),v=n(737074),_=n(734123),f=n(805591),m=n(116326),h=n(307741),p=n(483347);function g(e){[].forEach.call(e.children,e=>{"CANVAS"===e.tagName&&e.remove()})}let y={ts:-1,gameHidden:0},E={Rate:.35,Rectangle:639},I=(e,t,n,i,r)=>{if(100===t.code)try{var l,o,a,u,s;let v=new TextDecoder().decode(t.content),_=(0,m.KR)(v);if(null==_?void 0:_.app_data){let t=JSON.parse(_.app_data);if(p.gb.includes(t.ver)&&"1"===r){if(n)return;let i=(0,h.us)(t.ver,(t.grids||[]).length);e.position(i)}else switch(t.ver){case d.t.VIDEO_TALK_ROOM:case d.t.VIDEO_EQUAL:case d.t.VIDEO_DYNAMIC:case d.t.VIDEO_C:if(n)return;e.position({y:.203,h:.5});break;case d.t.VIDEO_T1B8:if(n)return;e.position({y:.11,h:.7375});break;case d.t.AUDIO_TALK_ROOM:case d.t.VIDEO_DYNAMIC_FLOAT:if(n)return;e.position({y:0,h:1});break;case d.t.VIDEO_CAMERA_NEW:case d.t.C_VIDEO_CAMERA:case d.t.VIDEO_1V8:if(n)return;e.position({y:1-.7375,h:.7375});break;case d.t.VIDEO_DYNAMIC_1V3:case d.t.VIDEO_DYNAMIC_1V6:if(n)return;e.position({y:.203,h:.5});break;case d.t.VIDEO_2V4v4:if(n)return;e.position({y:.203,h:.625});break;case d.t.PK:case d.t.MULTI_ANCHOR:let i,s;if(t.is_game){e.position({y:0,h:1});return}let c=t.ver===d.t.MULTI_ANCHOR&&t.grids.length>=4,v=!!(null===(l=t.anchor_interact_info)||void 0===l?void 0:l.layout_type);if((null==_?void 0:_.live_crop)&&t.ver===d.t.PK)i=_.live_crop.crop_y/_.live_crop.stride_h,s=_.live_crop.crop_h/_.live_crop.stride_h;else if(v){let e=null===(o=t.anchor_interact_info)||void 0===o?void 0:o.focus_id,n=t.grids.find(t=>t.uid_str===e);i=null==n?void 0:n.y,s=null==n?void 0:n.h}else i=null===(a=t.grids[0])||void 0===a?void 0:a.y,s=null===(u=t.grids[0])||void 0===u?void 0:u.h;let f=9===t.grids.length?3:2;e.position({y:i,h:c&&!v?s*f:s});break;case d.t.VIDEO_6V6:if(n)return;e.position({y:.183,h:.52});break;default:if(null==_?void 0:_.live_crop){let t=_.live_crop.crop_y/_.live_crop.stride_h,n=_.live_crop.crop_h/_.live_crop.stride_h;e.position({y:t,h:n})}}}else(null==_?void 0:_.game_live_data)||(0,c.V)(_)?null==i||i(_):(null==_?void 0:null===(s=_.source)||void 0===s?void 0:s.includes("TTLiveSDK"))&&e.position({y:0,h:1})}catch(e){}},L=e=>{let{disEnabled:t=!1,playerRef:n,isFullScreen:i,doubleScreenInfo:r,gameLiveDataHandler:l,linkmicVideoEqualLayoutFrameOpt:o}=e,d=(0,a.useRef)(!1),c=(0,a.useRef)(null),f=(0,u.Z)(e=>{I(n.current,e.detail||e,t,l,o)}),m=(0,a.useCallback)(e=>{if(d.current){d.current=!1;return}n.current.position({y:0,h:1})},[]),h=(0,a.useCallback)(()=>{!d.current&&(d.current=!0),c.current=v.Z.setTimeoutWarp(()=>{d.current&&(d.current=!1),v.Z.clearTimeoutWarp(c.current),c.current=null},3e3)},[]);return(0,a.useEffect)(()=>(n.current.on(_.Events.URL_CHANGE,m),document.addEventListener("webcast_qualityEvent",h),()=>{var e;null===(e=n.current)||void 0===e||e.off(_.Events.URL_CHANGE,m),document.removeEventListener("webcast_qualityEvent",h)}),[]),(0,a.useEffect)(()=>(n.current.on(_.Events.SEI_PARSED,f),()=>{if(!!n.current)n.current.off(_.Events.SEI_PARSED,f)}),[i,r]),(0,s.Z)(()=>{if(!n.current)return;let e=n.current;e.video&&e.position({y:0,h:1})}),null},w=(0,a.memo)(e=>{var{ele:t,setCameraShape:n,handleChangeGameHiddle:s}=e,d=(0,l._)(e,["ele","setCameraShape","handleChangeGameHiddle"]);let{player:v}=(0,f.n)(),_=(0,a.useRef)(v);_.current=v;let m=(0,a.useRef)(!1),h=(0,a.useRef)(d);h.current=d;let p=(0,a.useCallback)(e=>{var t,n;null===(n=_.current.video)||void 0===n||null===(t=n.updateMeta)||void 0===t||t.call(n,{mainPointers:[0,0,1,1],miniPointers:[0,0,0,0],displayMode:0}),m.current=!1},[]);(0,a.useEffect)(()=>(document.addEventListener("hide_double_screen",p),()=>{document.removeEventListener("hide_double_screen",p)}),[]);let I=(0,u.Z)(e=>{var i,r,l,o;(null==e?void 0:e.multi_view_data)&&(0,c.F)(e);let{camera_clip_custom:a,game_hidden:u,game_clip:d,camera_hidden:_}=null==e?void 0:e.game_live_data,{doubleScreenInfo:f}=h.current||{};if((null==e?void 0:e.ts)<y.ts)return;y.ts=null==e?void 0:e.ts;let p=(o=t,document.querySelector(o));!m.current&&(null===(r=v.video)||void 0===r||r.updateMeta({mainPointers:[d.x,d.y,d.w,d.h],miniPointers:[a.x,a.y,a.w,a.h],displayMode:0}),m.current=!0);let I=1===u?1:0;if(p&&(null==v?void 0:null===(i=v.video)||void 0===i?void 0:i.pipScreen)){if(I!==y.gameHidden)g(p);else if(0===I){if(0===_){let e=a.w>E.Rate?`${f.width/E.Rectangle*360}`:`${f.width}`;p.parentElement&&p.parentElement.style.setProperty("margin-bottom","10px"),p&&p.style.setProperty("height",`${e}px`,"important"),n({roomType:"double",screenStyle:a.w>E.Rate}),p.appendChild(null==v?void 0:null===(l=v.video)||void 0===l?void 0:l.pipScreen)}else p.parentElement&&p.parentElement.style.setProperty("margin-bottom","0px"),g(p),p&&p.style.setProperty("height","0px","important")}}I!==y.gameHidden&&(s&&s(I),y.gameHidden=I)});return(0,o.jsx)(L,(0,r._)((0,i._)({},d),{gameLiveDataHandler:I,playerRef:_}))})},241465:function(e,t,n){n.d(t,{u:function(){return R}});var i=n("563097"),r=n("88648"),l=n("520739"),o=n("878389");n("874386");var a=n("988381"),u=n("205832"),s=n("578580"),d=n("735636"),c=n("734123"),v=n("948375"),_=n("582746"),f=n("805591");let m=(0,r.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,l._)({width:36,height:37,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.808 10.928a.833.833 0 0 0-1.354-.651l-5.605 3.984h-3.041a.833.833 0 0 0-.833.833v6.667c0 .46.373.833.833.833h3.04l5.606 3.984a.833.833 0 0 0 1.354-.65v-15zM22.7 23.035a1.384 1.384 0 0 1 0-1.958l2.284-2.284-2.284-2.285a1.385 1.385 0 1 1 1.958-1.958l2.284 2.285 2.285-2.285a1.385 1.385 0 1 1 1.958 1.958L28.9 18.793l2.285 2.284a1.385 1.385 0 0 1-1.958 1.958l-2.285-2.284-2.284 2.284c-.541.541-1.418.541-1.958 0z",fill:"#fff"})})));var h=n("53562"),p=n("799046");let g=e=>{let{playerRef:t,getControlsEl:n}=e,{eventStore:{playerEvent:o,slardarEvent:f}}=(0,_.Z)(),[h,g]=(0,r.useState)(!1),[y,E]=(0,r.useState)(!1),I=r.useRef(!0),L=(0,v.Z)(()=>{var e,n;null!==(n=(e=window).__INVISIBLE_QUERY__)&&void 0!==n||(e.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1,null==o||o.volumeBrowserLimitedMute();let i=t.current;I.current&&(setTimeout(()=>{i.muted=!0,i.play(),(0,a.w)(!1)}),I.current=!1),setTimeout(()=>{if(null==i?void 0:i.muted){if(g(!0),null==o||o.volumeBrowserLimitedToastShow(),location.hostname===(0,u.iE)().DOMAIN){var e;null==o||null===(e=o.liveCancelMutePromptShowEvent)||void 0===e||e.call(o)}setTimeout(()=>{g(!1)},1e4)}},5e3)});(0,r.useEffect)(()=>{if(!!t.current)return t.current.on(c.Events.AUTOPLAY_PREVENTED,L),()=>{var e;null===(e=t.current)||void 0===e||e.off(c.Events.AUTOPLAY_PREVENTED,L)}},[t.current]),(0,r.useEffect)(()=>{let e=n();e&&(e.style.display=h?"none":"block"),y&&(t.current.muted=h,t.current.volume=h?0:(0,a.T1)())},[h,y]);let w=(0,r.useCallback)(()=>{if(g(!1),E(!0),location.hostname===(0,u.iE)().DOMAIN){var e;null==o||null===(e=o.liveCancelMutePromptClickEvent)||void 0===e||e.call(o)}null==o||o.volumeBrowserLimitedClickOpen(),s.kg.event("click_bottom_cancel_mute",(0,l._)({},null==f?void 0:f.getCommonInfo()))},[]);return(0,i.jsx)(d.Z,{in:h,timeout:500,classNames:"transition-node",children:(0,i.jsxs)("button",{className:p.default.cancel_mute_btn,type:"button",onClick:w,children:[(0,i.jsx)(m,{className:p.default.icon}),(0,i.jsx)("span",{children:"点击取消静音"})]})})};var y=(0,h.Pi)(e=>{let{player:t}=(0,f.n)(),n=(0,r.useRef)(t);n.current=t;let a=(0,v.Z)(()=>c.Util.findDom(t.root,".xgplayer-controls"));return(0,i.jsx)(g,(0,o._)((0,l._)({},e),{playerRef:n,getControlsEl:a}))}),E=n("70755"),I=n("713097"),L=n.n(I),w=n("720573"),N=n("789609");let S=(0,r.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,o._)((0,l._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M24.601 24.6a1.362 1.362 0 0 1-1.927 0L18.5 20.427l-4.174 4.175a1.362 1.362 0 1 1-1.927-1.927l4.174-4.174-4.174-4.175a1.362 1.362 0 0 1 1.927-1.926l4.174 4.174 4.174-4.174a1.362 1.362 0 0 1 1.927 1.926L20.427 18.5l4.174 4.174a1.362 1.362 0 0 1 0 1.927z",fill:"#fff",fillOpacity:".8"})})));var C=n("115627"),T=n("146725");let x=e=>{let{className:t,onClose:n,onOpen:l,preventModalVisible:o,onModalVisibleChange:a}=e,[u,s]=(0,r.useState)(!1),d=()=>{s(!1),null==a||a(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:L()(N.default.autoplayPreventTip,t),children:[(0,i.jsx)("span",{className:N.default.text,children:"因"}),(0,i.jsx)("span",{className:N.default.limitText,onClick:()=>{s(!0),null==a||a(!0)},children:"浏览器限制静音"}),(0,i.jsx)("span",{className:N.default.text,children:",按"}),(0,i.jsx)("span",{className:N.default.key,children:"P"}),(0,i.jsx)("span",{className:N.default.text,children:"或"}),(0,i.jsx)("span",{className:N.default.openText,onClick:l,children:"点击打开声音"}),(0,i.jsx)(C.Z,{className:N.default.closeIcon,height:36,width:36,src:S,onClick:n})]}),(void 0===o?u:o)&&(0,i.jsx)(w.h,{children:(0,i.jsx)(T.T6,{className:N.default.maskContainer,children:(0,i.jsxs)("div",{className:N.default.maskMain,children:[(0,i.jsxs)("div",{className:N.default.maskHeader,children:[(0,i.jsx)("div",{className:N.default.maskTitle,children:"浏览器限制"}),(0,i.jsx)(C.Z,{className:N.default.maskClose,width:36,height:36,src:S,onClick:d})]}),(0,i.jsxs)("div",{className:N.default.maskContent,children:[(0,i.jsx)("div",{className:N.default.maskText,children:"当你访问抖音次数较少，或经常静音播放时，浏览器可能会限制网站音量，使网站无法有声播放"}),(0,i.jsx)("div",{className:N.default.maskConfirm,onClick:d,children:"我知道了"})]})]})})})]})};var A=n("343140");let P=e=>{let{playerRef:t}=e,{eventStore:{playerEvent:n}}=(0,_.Z)(),[l,o]=(0,r.useState)(!1),[u,s]=(0,r.useState)(!1),d=(0,r.useRef)(!1);(0,r.useEffect)(()=>()=>{d.current=!0},[]);let f=r.useRef(!0),m=(0,v.Z)(()=>{var e,i;null!==(i=(e=window).__INVISIBLE_QUERY__)&&void 0!==i||(e.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1;let r=t.current;null==n||n.volumeBrowserLimitedMute(),f.current&&(setTimeout(()=>{r.muted=!0,r.play(),setTimeout(()=>{(0,a.w)(!1),r.once(c.Events.VOLUME_CHANGE,()=>{!d.current&&s(!1)})})},0),f.current=!1,s(!0),null==n||n.volumeBrowserLimitedToastShow())});(0,r.useEffect)(()=>{if(!!t.current)return t.current.on(c.Events.AUTOPLAY_PREVENTED,m),()=>{var e;null===(e=t.current)||void 0===e||e.off(c.Events.AUTOPLAY_PREVENTED,m)}},[t.current]),(0,r.useEffect)(()=>{if(!t.current)return;let e=e=>{var n,i;if(!t.current)return;let r=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.tagName;if("INPUT"!==r&&"TEXTAREA"!==r&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.contentEditable)!=="true")(null==e?void 0:e.code)==="KeyP"&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&(t.current.muted=!t.current.muted)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t.current]);let h=(0,v.Z)(()=>{if(null==n||n.volumeBrowserLimitedClickOpen(),t.current){let e=t.current;e.muted?e.muted=!1:e.volume=.5,e.emit("volumechange")}s(!1)}),p=(0,r.useCallback)(()=>{null==n||n.volumeBrowserLimitedClickClose(),s(!1)},[]);return(0,i.jsx)(E.l,{showHint:u,priority:2,duration:30,delay:0,onClose:()=>{s(!1)},children:(0,i.jsx)(x,{className:A.default.cancelMute,onClose:p,onModalVisibleChange:o,onOpen:h,preventModalVisible:l})})};var b=e=>{let{player:t}=(0,f.n)(),n=(0,r.useRef)(t);return(0,i.jsx)(P,(0,o._)((0,l._)({},e),{playerRef:n}))};let R=e=>{let{disableStrengthen:t=!1}=e;return t?(0,i.jsx)(y,{}):(0,i.jsx)(b,{})}},438085:function(e,t,n){var i=n(134761);n(429532),n(874386);var r=n(563097),l=n(805591),o=n(88648),a=n(734123),u=n(53562),s=n(273312),d=n(582746),c=n(153253),v=n(618618);class _{updateMeta(e){this._meta=e,this._updateMainVideoSize()}get _mainVideo(){return this._player.video}_takeOverRotate(){var e,t;if(null===(t=this._player)||void 0===t?void 0:null===(e=t.plugins)||void 0===e?void 0:e.rotate){this._player.plugins.rotate.config.disable=!0;let e=this._player.plugins.rotate.root;this._mainVideo.setAttribute("data-custom-rotate","true");let t=()=>{let e=this._mainVideo,t=Number(e.dataset.rotateDeg||0)-90;t=-360===t?0:t,e.dataset.rotateDeg=`${t}`};this._player.on(a.Events.ROTATE,t),e.addEventListener("click",t),this._disableTakeOverRotate=()=>{this._player.off(a.Events.ROTATE,t),this._mainVideo.dataset.rotateDeg="",this._mainVideo.removeAttribute("data-custom-rotate"),e.removeEventListener("click",t),this._player.plugins.rotate.config.disable=!1}}}_createMainVideoContainer(){let e=this._mainVideoContainer=document.createElement("div");Object.assign(e.style,{position:"absolute",overflow:"hidden",height:"100%",width:"100%"}),this._mainVideo.replaceWith(e),e.appendChild(this._mainVideo),this._mainVideo.style.transformOrigin="top left"}_initMain(){this._player.on(a.Events.FULLSCREEN_CHANGE,this._updateMainVideoSize),this._createMainVideoContainer(),this._takeOverRotate(),(this._mainResizeObserver=new ResizeObserver(this._updateMainVideoSize)).observe(this._player.root),(this._mainMutationObserver=new MutationObserver(this._updateMainVideoSize)).observe(this._mainVideo,{attributeFilter:["data-rotate-deg"]})}destroy(){try{var e,t,n;this._isDestory=!0,null===(e=this._disableTakeOverRotate)||void 0===e||e.call(this),null===(t=this._mainResizeObserver)||void 0===t||t.disconnect(),null===(n=this._mainMutationObserver)||void 0===n||n.disconnect(),this._player.off(a.Events.FULLSCREEN_CHANGE,this._updateMainVideoSize),this._player.position=this._originPlayerPostion,this._player.resizePosition=this._originPlayerResizePostion,this._mainVideoContainer.replaceWith(this._mainVideo),this._resetVideoStyle(),this._player.position(...this._positionParams)}catch(e){}}constructor(e){var t=this;(0,i._)(this,"_isDestory",!1),(0,i._)(this,"_updateMainVideoSize",()=>{let e;if(!this._meta)return;let{x:t,y:n,w:i,h:r}=this._meta,l=this._mainVideo,{videoHeight:o,videoWidth:a}=l,{width:u,height:s}=this._player.root.getBoundingClientRect(),d=a*i,c=o*r,v=d/c,_=Number(l.dataset.rotateDeg||0),f=_%180!=0;if(0===a&&(clearTimeout(this._updateTimer),!this._isDestory&&(this._updateTimer=setTimeout(()=>{if(this._isDestory){clearTimeout(this._updateTimer);return}this._updateMainVideoSize()},100))),u/s>=(f?c/d:v)){let t=f?s/v:s*v,n={height:"100%",width:`${t}px`,left:"50%",top:"0",transform:"translateX(-50%)"};Object.assign(this._mainVideoContainer.style,n),e=f?{height:`${t/r}px`,width:`${s/i}px`}:{width:`${100/i}%`,height:`${100/r}%`}}else{let t=f?u*v:u/v,n={height:`${t}px`,width:"100%",left:"0",top:"50%",transform:"translateY(-50%)"};Object.assign(this._mainVideoContainer.style,n),e=f?{height:`${u/r}px`,width:`${t/i}px`}:{height:`${t/r}px`,width:`${100/i}%`}}let m=0===_?`translate(-${100*t}%, -${100*n}%)`:-90===_?`translate(-${(i+t)*100}%, -${100*n}%)`:-180===_?`translate(-${(i+t)*100}%, -${(r+n)*100}%)`:`translate(-${100*t}%, -${(r+n)*100}%)`;Object.assign(this._mainVideo.style,e,{rotate:_+"deg",transform:m})}),(0,i._)(this,"_resetVideoStyle",()=>{this._mainVideo.removeAttribute("style")}),this._player=e,this._initMain(),this._originPlayerPostion=e.position,this._originPlayerResizePostion=e.resizePosition,e.position=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];t._positionParams=n},e.resizePosition=()=>{}}}let f=()=>{let{player:e}=(0,l.n)(),t=(0,s.j)();return(0,o.useEffect)(()=>{if(e){let n=null;try{let i={x:0,y:0,w:1,h:.9};2===t.useEnlargeStream&&(i={x:0,y:.056,w:1,h:.844}),(n=new _(e)).updateMeta(i)}catch(e){}return()=>{try{null==n||n.destroy()}catch(e){}}}},[e]),null};t.Z=(0,u.Pi)(e=>{var t;let n=(0,d.Z)(),i=o.useMemo(()=>{var t;return(null==e?void 0:e.room)?{room:e.room}:null==n?void 0:null===(t=n.roomStore)||void 0===t?void 0:t.roomInfo},[null==n?void 0:n.roomInfo,e.room]),l=(0,s.j)(),a=o.useMemo(()=>l.useEnlargeStream&&0!==Number(l.useEnlargeStream),[]),u=o.useMemo(()=>{var e,t;return((null===(t=i.room)||void 0===t?void 0:null===(e=t.toolbar_data)||void 0===e?void 0:e.entrance_list)||[]).some(e=>[c.Ls.Cart,c.Ls.LifeGroupon,c.Ls.LiveItem,c.Ls.WelfareProject,c.Ls.MicroApp,c.Ls.GamePromotion,c.Ls.PaidLiveTicket,c.Ls.LittleGame,c.Ls.MiniGame].some(t=>e.component_type===t))},[i.room]),_=o.useMemo(()=>{var e,t;let n=null==i?void 0:null===(t=i.room)||void 0===t?void 0:null===(e=t.stream_url)||void 0===e?void 0:e.extra;return!!n&&(null==n?void 0:n.height)/(null==n?void 0:n.width)>=1.48},[i.room]),m=o.useMemo(()=>{var e;return(null==i?void 0:null===(e=i.room)||void 0===e?void 0:e.live_room_mode)===v.ke.MEDIA},[]);return(o.useEffect(()=>{var e,t;if(null==n?void 0:null===(e=n.singletonStore)||void 0===e?void 0:e.message)return null==n?void 0:null===(t=n.singletonStore)||void 0===t?void 0:t.message.syncOn("ToolBarControlMessage",e=>{let{method:t,payload:n}=e;if(!t||!n)return})},[null==n?void 0:null===(t=n.singletonStore)||void 0===t?void 0:t.message]),!a||u||!_||m)?null:(0,r.jsx)(f,{})})},809250:function(e,t,n){n.d(t,{g:function(){return o}});var i=n(88648),r=n(805591),l=n(441447);let o=(0,i.memo)(function(){let{player:e}=(0,r.n)();return(0,i.useEffect)(()=>{let t=l.listen(l.EVENT.livePause,()=>{e.pause()});return()=>{t()}},[]),null})},533029:function(e,t,n){n.d(t,{o:function(){return g},D:function(){return p}}),n("874386");var i=n("563097"),r=n("88648"),l=n("734123"),o=n("828782"),a=n("455499"),u=n("465769"),s=n("812771"),d={smallWindowExit:{eventName:"small_window_exit",params:{enter_from:"",action:"",action_type:"",stream_type:""}}},c=n("805591"),v=n("157818"),_=n("582746"),f=n("872136"),m=n("774444");let h=e=>{let{onClick:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:s.default.inPictureCover}),(0,i.jsxs)("div",{className:s.default.inPictureContainer,children:[(0,i.jsx)("div",{className:s.default.inPictureTitle,children:"正在「小窗」模式下播放"}),(0,i.jsx)("div",{className:s.default.inPictureBtn,onClick:t,children:"返回大窗播放"})]})]})},p=e=>{let{isActive:t,playerRef:n,handelIsInPic:s}=e,[v,_]=(0,r.useState)(!1),{player:p}=(0,c.n)(),g=(0,r.useRef)(new f.h(d));(0,r.useEffect)(()=>{let e;let n=null==p?void 0:p.video;if(n&&t&&p){let t=()=>{var t,n,i;!(0,o.DT)()&&(0,a.DJ)()&&((null==p?void 0:null===(t=p.video)||void 0===t?void 0:t.readyState)>2||p.currentTime)&&!(null==p?void 0:p.isInPicture)&&(null==p||null===(i=p.video)||void 0===i||null===(n=i.requestPictureInPicture)||void 0===n||n.call(i).then(()=>{_(!0),p.isInPicture=!0,clearTimeout(e)}).catch(e=>{p.isInPicture=!0,_(!1)}))};e=setTimeout(t,0),null==p||p.on(l.Events.LOADED_DATA,t);let i=()=>{_(!0)},r=()=>{_(!1)};return n.addEventListener("enterpictureinpicture",i),n.addEventListener("leavepictureinpicture",r),()=>{n.removeEventListener("leavepictureinpicture",r),n.removeEventListener("enterpictureinpicture",i),null==p||p.off(l.Events.LOADED_DATA,t),p.isInPicture=!1,clearTimeout(e)}}},[t,p]),(0,r.useEffect)(()=>{s&&s(v)},[v]);let{isInPreview:y,isInPreviewActive:E}=(0,m.DQ)();return(0,r.useEffect)(()=>{if(y&&!E&&v){if((0,a.DJ)()){var e,t;null===(e=(t=document).exitPictureInPicture)||void 0===e||e.call(t)}_(!1)}},[y,E,v]),v?(0,i.jsx)(h,{onClick:e=>{if(e.stopPropagation(),(0,a.DJ)()){var t,n;null===(t=(n=document).exitPictureInPicture)||void 0===t||t.call(n)}_(!1),g.current.sendLog("smallWindowExit",{enter_from:(0,u.vM)()})}}):null},g=()=>{let{isLivingPip:e,closeLivingPip:t}=(0,v.ds)(),{eventStore:{playerEvent:n}}=(0,_.Z)();return e?(0,i.jsx)(h,{onClick:()=>{t(),n.livesdkMiniWindowExit({click_position:"web_icon_exit"})}}):null}},730876:function(e,t,n){n.d(t,{p:function(){return l}});var i=n(88648),r=n(805591);let l=e=>{let{ext:t}=e,{logger:n}=(0,r.n)();return i.useEffect(()=>{n&&n.updateExt(t)},[t]),null}},545342:function(e,t,n){var i=n(520739),r=n(563097),l=n(713097),o=n.n(l),a=n(88648),u=n(31277),s=n(721222);t.Z=e=>{let{title:t,open:n,onSwitchChange:l,className:d,logCommonParams:c}=e,v=a.useCallback(()=>{l(!n),(0,s.u7)((0,i._)({status:n?"off":"on"},c))},[n]);return(0,r.jsxs)("div",{className:o()(u.default.switch,d),children:[(0,r.jsx)("div",{className:o()(u.default.sliderContainer,{[u.default.sliderContainerOpen]:n}),onClick:v,children:(0,r.jsx)("div",{className:o()(u.default.slider,{[u.default.toggle]:n})})}),(0,r.jsx)("span",{className:u.default.title,children:t})]})}},558452:function(e,t,n){n.d(t,{R:function(){return a},Z:function(){return u}});var i=n(273312),r=n(582746),l=n(441447),o=n(88648);let a=()=>{let e=(0,i.j)(),{vipStore:t,singletonStore:n,activityIndicatorStore:a,userStore:u}=(0,r.Z)(),{setIsShowVipPanel:s,isShowVipPanel:d}=t,{liveContainer:c}=n,{setCurrentLandPage:v}=a,{pcVipLr3:_}=e;(0,o.useEffect)(()=>{let e=l.listen(l.EVENT.OpenLiveVipLandPage,e=>{let{openSource:t}=e;if(_){var n;let e=`https://lf-webcast-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/lynx/vip_user_core_rl3_douyin/web/pages/panel_v3/template.js?appid=6383&request_page=${t}&initialProps=vip-user-core-rl3-panel-v3-cahce-2256641802902575&user_id=${null==u?void 0:null===(n=u.odin)||void 0===n?void 0:n.user_id}`;null==c||c.openLandPage({url:`sslocal://lynxview?url=${encodeURIComponent(e)}`,reset:!0})}else s({isShow:!0,source:t}),!d&&v([])});return()=>{e()}},[_,s,d,v,c])},u=e=>{l.emit(l.EVENT.OpenLiveVipLandPage,{openSource:e})}},878511:function(e,t){t.Z=()=>({abrPts:"-800",adaptiveConfig:{hurryEndMs:1800,hurryStartMs:2500,hurrySpeed:1.1,thresholdDown:!0}})},377181:function(e,t,n){n.d(t,{wn:function(){return y}});var i=n("520739"),r=n("878389");n("413806"),n("826893"),n("882732"),n("544943"),n("874386"),n("250440"),n("179133");var l=n("563097"),o=n("909543"),a=n("88648");let u=(0,a.createContext)(!1);var s=n("671689"),d=n("328155"),c=n("828782"),v=n("774438"),_=n("578580");let f={left:"x",top:"y",width:"width",height:"height"},m=(e,t)=>{let n=null==e?void 0:e.split("?")[0];if(n===(null==t?void 0:t.split("?")[0]))return!0;try{if(new URL(e).pathname===new URL(t).pathname)return!0;return!1}catch(e){}},h=["/","/follow"],p=e=>h.includes(e),g=e=>{var t;let n=(0,a.useRef)({}),{pathname:h}=(0,o.a)(),p=(0,a.useContext)(u),{innerFeedOn:g}=(0,v.P)(),{reuseId:y,children:E,container:I,isParent:L,abTestData:w,afterDomAppend:N,afterDomDetach:S,beforePropsUpdate:C}=e,{_getPortalElementById:T,_updatePlayerPropsById:x,_dropScopeById:A,_checkIsParentContainerInBody:P,_getPlayerPropsById:b,_reuseStateMap:R,_reuseMapForCollection:O}=(0,s.Z)(),k=(0,a.useRef)(null);k.current=A;let M=(0,a.useRef)(null),D=null===(t=I.current)||void 0===t?void 0:t.getBoundingClientRect();(null==D?void 0:D.width)&&(n.current=D);let U=()=>{try{try{delete O[y]}catch(e){}if(M.current.hasChildNodes())return;let{isReuse:e,element:t}=T(y,E),n=document.getElementById(s.Ur).getBoundingClientRect();if(M.current.appendChild(t),N){let r=(0,i._)({},R[y]||{});N({element:t,isReuse:e,rect:n,reuseState:r})}R[y]=void 0}catch(e){_.kg.event("old_player_back_no_reuse",{message:e,isSaveError:1}),location.reload()}};(0,a.useEffect)(()=>{if(I.current){if(L){if(!p){if(g&&(0,d.yk)(h))return;U()}}else U()}},[h,I.current]);let V=e=>{let t=document.getElementById(s.Ur);if(!t.hasChildNodes()&&M.current.hasChildNodes()){let i=M.current.childNodes[0],r={};if(Object.keys(f).forEach(e=>{let i=n.current[f[e]];r[e]=i,t.style[e]=`${i}px`}),e&&(window._HOLDER_STYLE_=r),t.appendChild(i),!e){let e=document.querySelector(`#${y}_parent`);setTimeout(()=>{try{if(t.childNodes[0]===i){let t=O[y]||!1,i=(null==e?void 0:e.hasChildNodes())||!1,a="",u="",s="",d="";try{if(i){var n,r,l,o;a=(null==e?void 0:null===(n=e.childNodes[0])||void 0===n?void 0:n.nodeName)||"",u=(null==e?void 0:null===(r=e.childNodes[0])||void 0===r?void 0:r.className)||"",s=(null==e?void 0:null===(o=e.childNodes[0])||void 0===o?void 0:null===(l=o.getAttribute)||void 0===l?void 0:l.call(o,"data-e2e"))||""}}catch(e){d=e.message}_.kg.event("old_player_back_no_reuse",{isContainerHasChild:i?1:0,isNoReuse:t?1:0,childNodesName:a,childNodesClassName:u,childNodesE2e:s,isError:d,reuseId:y,isClient:null===c.DT||void 0===c.DT?void 0:(0,c.DT)()}),location.reload()}}catch(e){}},1e3)}S&&S({setReuseState:e=>{R[y]=e}});try{O[y]=!0}catch(e){}}};return(0,a.useLayoutEffect)(()=>{var e,t,n,i;let r="live.douyin.com"!==window.location.host&&(null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.search.includes("r_player=1")),l=null===(i=window)||void 0===i?void 0:null===(n=i.location)||void 0===n?void 0:n.search.includes(y);L&&p&&l&&r&&V(!0)},[p]),(0,a.useEffect)(()=>()=>{var e;L&&k.current(y),g&&(null===(e=window)||void 0===e?void 0:e.__disableReuseAppend__)&&k.current(y)},[]),(0,a.useLayoutEffect)(()=>()=>{if(!L){var e;if(!g||(null===(e=window)||void 0===e?!void 0:!e.__disableReuseAppend__))P(y)?V(!1):k.current(y)}},[]),(0,a.useEffect)(()=>{if(!M.current.hasChildNodes())return;let e=b(y)||{},t=E.props,n=(null==t?void 0:t.isRedirectUrl)||(null==e?void 0:e.isRedirectUrl);(()=>{let l=e.url;!t.url&&(t=(0,r._)((0,i._)({},t),{url:l}));let o=m(l,t.url),a=L&&l,u=!!(n&&l)&&!(null==t?void 0:t.isH265Error);!((null==w?void 0:w.liveInnerFeed)&&(null==t?void 0:t.roomId)===(null==e?void 0:e.roomId))&&(o||a||u)&&(t=(0,r._)((0,i._)({},t),{url:(null==t?void 0:t.isH265Error)||!l?null==t?void 0:t.url:l}))})(),C&&(t=C({props:e,nextProps:t})),n&&!(null==t?void 0:t.isH265Error)&&(t=(0,r._)((0,i._)({},t),{isRedirectUrl:!0})),x(y,t)},[E.props,h]),(0,l.jsx)("div",{ref:M,id:`${y}_${L?"parent":"child"}`,style:{display:"block",width:"100%",height:"100%"}})},y=e=>{let{reuseId:t,children:n,container:u,disabled:d}=e,c=(0,s.Z)();if(null===c)return(0,l.jsx)(l.Fragment,{children:n});let{_roomParentContainerMap:v,_checkIsPlayerInBody:_,_getPlayerById:f,_dropScopeById:m}=c;if(d||!t)return(0,l.jsx)(l.Fragment,{children:n});let h=(0,a.useRef)(!0),y=(0,a.useRef)(!1),{pathname:E}=(0,o.a)(),I=(0,a.useRef)(p(E)).current;return(h.current&&(h.current=!1,!I&&!f(t)&&(y.current=!0)),y.current)?(0,l.jsx)(l.Fragment,{children:n}):(I&&v.set(t,u.current),(0,l.jsx)(g,(0,r._)((0,i._)({},e),{isParent:I})))}},700177:function(e,t,n){n.d(t,{$4:function(){return G},BN:function(){return p},GD:function(){return M},HC:function(){return h},Hf:function(){return S},I7:function(){return N},Io:function(){return y},JR:function(){return x},KA:function(){return k},LA:function(){return V},LI:function(){return _},Nd:function(){return H},Pj:function(){return B},QN:function(){return s},RY:function(){return X},SH:function(){return L},T_:function(){return f},UE:function(){return J},UM:function(){return C},V7:function(){return I},WG:function(){return F},Wt:function(){return b},_1:function(){return q},_P:function(){return W},a0:function(){return Q},aD:function(){return ee},cE:function(){return T},dq:function(){return m},eL:function(){return g},fB:function(){return v},f_:function(){return Y},gC:function(){return P},hx:function(){return d},jq:function(){return el},jr:function(){return c},kr:function(){return K},kw:function(){return R},mp:function(){return w},n$:function(){return U},ng:function(){return A},qi:function(){return E},rv:function(){return O},si:function(){return D},vM:function(){return et},vu:function(){return j},zY:function(){return Z},zv:function(){return z}}),n(981168);var i=n(441447),r=n(223526),l=n(277429),o=n(213987),a=n(527459),u=n(399);let s="ISLAND_PLUGIN_DANMAKUNEW",d="ISLAND_PLUGIN_AUDIO",c="ISLAND_PLUGIN_VIDEO",v="ISLAND_PLUGIN_PICTURE",_="ISLAND_PLUGIN_EFFECT_SWITCH",f="ISLAND_PLUGIN_GIFT_TRAY",m="ISLAND_PLUGIN_GIFT_EFFECT",h="ISLAND_PLUGIN_PK",p="ISLAND_PLUGIN_TOOLBAR",g="ISLAND_PLUGIN_EFFECT",y="ISLAND_PLUGIN_EFFECT",E="ISLAND_LIVE_SHARE_PLUGIN",I="ISLAND_PLUGIN_HOUR_RANK_LIST",L="ISLAND_PLUGIN_OPERATING_BAR",w="ISLAND_PLUGIN_LINKMIC_APPLY",N="ISLAND_CONTEXT_MENU",S="ISLAND_LIVING_PIP_WINDOW",C="ISLAND_PLUGIN_GROUP_FIGHT",T="ISLAND_PLUGIN_GUEST_BATTLE",x="ISLAND_LIVING_PIP_WINDOW_DOUBLE",A="ISLAND_PLUGIN_ORDER_SING",P="ISLAND_USE_PAUSE_POP",b="ISLAND_LEAD_LOGIN_WITH_HIDE_LOGIN",R="ISLAND_LIVE_LIKE",O="ISLAND_ADMIN_PRIVILEGE_PLUGIN",k="ISLAND_DANMUKU_SETTINGS",M="ISLAND_RTC_LAYER_PLUGIN",D="ISLAND_PLAYER_COMMENT_PLUGIN",U="ISLAND_SHORT_TOUCH",V="ISLAND_LOTTERY",j="ISLAND_REDPACKET",F="ISLAND_LIVE_RESERVE",G=1e4,H="living_room_player_container",Y="living_player_container",Z="ISLAND_LAYOUT_NAVIGATION",z="ISLAND_DETAIL_CHATROOM",K="ISLAND_GIFT_MENU",B="ISLAND_DETAIL_ROOMINFOBARNEW",W="ISLAND_SIDE_BAR",$="ISLAND_CATEGORY_TAB",Q="ISLAND_SYNC_HEADER",q="ISLAND_NEW_YEAR_LIVE",J="ISLAND_PROGRAMME",X="ISLAND_AUDIO_CHEAT_TIPS",ee="ISLAND_AUTO_RUN_MODAL",et="ISLAND_SPRING_BACK",en=["/category/:categoryId","/follow/live/:webrid","/root/live/:webrid"],ei=()=>-1,er={[i.EVENT.afterVideoPlayed]:[{name:Z,priority:-1,get delay(){return(0,l.VM)()||2e3}},{name:Q,priority:-1,get delay(){return(0,l.VM)()||2e3}},{name:z,priority:1},{name:B,priority:2},{name:s,priority:-1,get delay(){return 2e3}},d,c,{name:v,get priority(){return ei()}},"ISLAND_PLUGIN_FANSCLUB",_,f,m,h,{name:h,priority:2},{name:"ISLAND_PLUGIN_EXHIBITION_VIEW",get priority(){return ei()}},g,{name:I,get priority(){return ei()}},{name:L,priority:4},{name:w,get priority(){return ei()}},C,T,A,W,$,q,X,J,ee,et,P,b,R,O,k,M,D,{name:V,priority:3},j,{name:U,priority:3},{name:S,get priority(){return ei()}},{name:E,get priority(){return ei()},get delay(){return 1e3}},N,F,{name:p,priority:2},x]};function el(){if("undefined"==typeof window)return;let{pathname:e,hostname:t}=window.location;if(!("live.douyin.com"===t&&((0,a.m)("/",window.location.pathname)||(0,a.m)("/:id",window.location.pathname)||(0,a.m)("/live/:id",window.location.pathname))||(0,u.l)(e)||(0,u.Y)(e)))return;let n=!1;Object.keys(er).forEach(e=>{i.listen(e,()=>{if(n)return;n=!0;let t=Object.values(er[e]).sort((e,t)=>{let n="string"==typeof e?0:e.priority;return("string"==typeof t?0:t.priority)-n}),i=en.some(e=>(0,a.m)(e,window.location.pathname));t.forEach(e=>{let t="string"==typeof e?e:e.name,n="string"!=typeof e&&(null==e?void 0:e.delay);r.p.postTask({task:()=>{switch(t){case W:!i||n?setTimeout(()=>{(0,o.q)(W)},n||2e3):(0,o.q)(W);break;case $:i?(0,o.q)($):setTimeout(()=>{(0,o.q)($)},2e3);break;default:n?setTimeout(()=>{(0,o.q)(t)},n):(0,o.q)(t)}},priority:"user-visible"})})})})}},601362:function(e,t,n){n.d(t,{x:function(){return i}});var i={DETAIL:1,1:"DETAIL",OLD_CARD:2,2:"OLD_CARD",NEW_CARD:3,3:"NEW_CARD"}},609609:function(e,t,n){n.d(t,{s:function(){return c}}),n(675373);var i=n(88648),r=n(645260),l=n.n(r),o=n(496292),a=n(601362),u=n(578580),s=n(623527),d=n(828782);let c=e=>{let{roomId:t,anchorId:n}=e,r=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uid:"",exhibitionSource:a.x.DETAIL};return o.CI({roomId:t,anchorId:e.uid,exhibitionSource:null==e?void 0:e.exhibitionSource}).then(e=>{var t,n;let{data:i}=e,r=l()(i,"status_code");if(0===r)return Promise.resolve({data:i,code:r});return u.ZN.error(s.Mo.LiveExhibitionError,{content:{statusCode:r,logId:null!==(n=e.logId)&&void 0!==n?n:"",is_client:(0,d.DT)(),data:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data}}),Promise.resolve({data:i,code:r})})},[t]),c=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{exhibitionSource:a.x.DETAIL};return o.CI({roomId:t,anchorId:n,exhibitionSource:null==e?void 0:e.exhibitionSource}).then(e=>{var t,n;let{data:i}=e,r=l()(i,"status_code");if(0===r)return Promise.resolve({data:i,code:r});return u.ZN.error(s.Mo.LiveExhibitionError,{content:{statusCode:r,logId:null!==(n=e.logId)&&void 0!==n?n:"",is_client:(0,d.DT)(),data:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data}}),Promise.resolve({data:i,code:r})})},[t,n]),v=(0,i.useCallback)(async()=>o.Dm({anchorId:n,roomId:t}).then(e=>{let{data:t}=e,n=l()(t,"status_code");return 0===n?Promise.resolve({data:t,code:n}):Promise.resolve({data:t,code:n})}),[t,n]),_=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uid:""};return o.Dm({anchorId:e.uid,roomId:t}).then(e=>{let{data:t}=e,n=l()(t,"status_code");return 0===n?Promise.resolve({data:t,code:n}):Promise.resolve({data:t,code:n})})},[t,n]),f=(0,i.useCallback)(async e=>o.$e({roomId:t,anchorId:n,groupId:null==e?void 0:e.groupId}).then(e=>{let{data:t}=e;return Promise.resolve(t)}),[t,n]);return{getExhibitionHome:c,getExhibitionRare:v,getMedalDetail:f,getGiftDetail:(0,i.useCallback)(async e=>o.yH({roomId:t,anchorId:n,giftId:null==e?void 0:e.giftId,groupId:null==e?void 0:e.groupId,taskId:null==e?void 0:e.taskId}).then(e=>{let{data:t,logId:n}=e;return 0===l()(t,"status_code")?Promise.resolve(t):Promise.reject(t)}),[t,n]),getExhibitionHomeByid:r,getExhibitionRareById:_}}},174430:function(e,t,n){n.d(t,{$I:function(){return d},iz:function(){return a},mJ:function(){return o},ue:function(){return u},ws:function(){return s}});var i=n(742401),r=n(574756),l=n(828782);let o=()=>{if(i.s)return!0;try{var e;return null===(e=MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}catch(e){return!1}},a=()=>{if(i.s)return!1;try{var e,t;return(null===(e=MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="hev1.1.6.L153.B0"'))&&(null===(t=MediaSource)||void 0===t?void 0:t.isTypeSupported('video/mp4; codecs="hev1.2.4.L153.B0"'))}catch(e){return!1}},u=()=>{if(i.s)return!1;try{var e;return(0,l.DT)()&&(null===(e=MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="vvc1.1.6.L93.B0"'))}catch(e){return!1}},s=()=>{if(i.s)return!1;try{return"true"===(0,r.b)("hasAvx2")}catch(e){return!1}},d=()=>{if(i.s)return"";try{return window.localStorage.getItem("h265ErrorNumNew")||window.localStorage.getItem("h265ErrorNum")||""}catch(e){return""}}},751365:function(e,t,n){n.d(t,{j:function(){return i}});var i={UNK_NOWN:0,0:"UNK_NOWN",LIVE:1,1:"LIVE",FIRST_LIVE:2,2:"FIRST_LIVE",RECORD_LIVE:3,3:"RECORD_LIVE"}},550387:function(e,t,n){n.d(t,{V:function(){return s}});var i=n(520739),r=n(276932),l=n(88648),o=n(797973),a=n(434739),u=n(734123);function s(e){let t=(0,l.useRef)(0),n=(0,o.Z)(e=>{var n,i;t.current="number"==typeof e?e:performance.now(),null===(n=(i=window).collectEvent)||void 0===n||n.call(i,"livesdk_perf_load_start",(0,r.zS)())});(0,l.useEffect)(()=>{if(!!e)return e.on(u.Events.LOAD_START,n),()=>{e.off(u.Events.LOAD_START,n)}},[e]);let s=(0,o.Z)(()=>{var e,n;if(!t.current)return;let l=performance.now()-t.current;null===(e=(n=window).collectEvent)||void 0===e||e.call(n,"livesdk_perf_wacth_duration",(0,i._)({duration:l},(0,r.zS)())),t.current=0});return(0,a.Z)("beforeunload",()=>{s()},{target:"undefined"==typeof window?void 0:window,capture:!0}),(0,l.useEffect)(()=>{if(!e)return;let t=[u.Events.PAUSE,u.Events.ENDED,u.Events.ERROR];return t.map(t=>e.on(t,s)),()=>{s(),t.map(t=>e.off(t,s))}},[e]),(0,l.useEffect)(()=>()=>s(),[]),{onLoadStart:n,onEnd:s,onPause:s,onError:s}}},659335:function(e,t,n){n.d(t,{X:function(){return o},h:function(){return l}});var i=n(64814),r=n(88648);let l=()=>()=>(0,i.ZP)((e,t,n)=>({rootElement:null,childElementList:[],setRootElement:t=>e(()=>({rootElement:t})),setChildElementList:t=>e(()=>({childElementList:t.slice()}))})),o=(0,r.createContext)({})},201445:function(e,t,n){n.d(t,{b:function(){return I}}),n(250440);var i=n(805591),r=n(116326),l=n(734123),o=n(578580),a=n(618618),u=n(721222),s=n(632766),d=n(645260),c=n.n(d),v=n(96008),_=n.n(v),f=n(88648),m=n(104013),h=n(582746),p=n(996990),g=n(623527),y=n(828782),E=n(391211);let I=e=>{let{isVerifyed:t}=e,{roomStore:{roomInfo:n,setNotSupportReason:d},linkmicStore:{setIsPlayModeNotSupport:v,imLinkMicLayout:I,uiLayout:L,setAsrSubtitle:w},singletonStore:{message:N},userStore:{userInfo:S},eventStore:{linkmicEvent:C}}=(0,h.Z)(),{player:T}=(0,i.n)(),x=(0,E.k)(),A=f.useCallback(()=>{o.kg.info("玩法限制",(0,m.toJS)(n)),v(!0),d(a.Ly.MULTI_CONSUMER_LINE)},[v,n]),P=(0,f.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()(n,"room.linker_detail.linker_ui_layout");(null==S?void 0:S.isReady)&&((0,u.Qz)({anchor_id:c()(n,"anchor.id_str",""),room_id:null==n?void 0:n.roomId,user_id:null==S?void 0:S.id_str,scene:Number(Object.keys(c()(n,"room.linker_map",{}))),playmode:c()(n,"room.linker_detail.linker_play_modes",[]),ui_layout:e}),o.kg.event(`[${g.Tn.Error}]${g.Mo.LiveNotSupportError}`,{room_id:null==n?void 0:n.roomId,user_id:null==S?void 0:S.id_str,scene:Number(Object.keys(c()(n,"room.linker_map",{}))),playmode:c()(n,"room.linker_detail.linker_play_modes",[]),ui_layout:e,is_client:(0,y.DT)()}))},[n,S]);f.useEffect(()=>{let e=c()(n,"room.linker_detail.linker_ui_layout"),t=Number(Object.keys(c()(n,"room.linker_map",{}))),i=c()(n,"room.linker_detail.linker_play_modes",[]);(e||t||(null==i?void 0:i.length)>0)&&o.kg.event("linkmic_user_page_view",{room_id:null==n?void 0:n.roomId,user_id:null==S?void 0:S.id_str,scene:t,playmode:i,ui_layout:e,is_client:(0,y.DT)()})},[n,S]),f.useEffect(()=>{(async()=>{let e=c()(n,"room.linker_detail.linker_ui_layout"),t=await (0,s.ZP)({service_name:"webcast.douyin.live_pc",key:"linkmic_not_support_uilayout"}),{uilayout:i}=t[null==x?void 0:x.XTTENV]?t[null==x?void 0:x.XTTENV]:t,r=e=>{if(i&&(null==i?void 0:i.includes(e)))return P(e),!0};[e,L].some(e=>r(e))&&A()})()},[n,L]);let b=c()(n,"room.live_room_mode"),R=f.useCallback(e=>{if(100===e.code)try{var t,i,l;let o=new TextDecoder().decode(e.content),u=(0,r.KR)(o);if(void 0===I&&u&&u.ktv_sei&&(null==u?void 0:null===(t=u.ktv_sei)||void 0===t?void 0:t.scene)>0&&(null==u?void 0:null===(i=u.ktv_sei)||void 0===i?void 0:i.scene)!==3&&A(),u&&u.app_data)_()();else if(null==u?void 0:null===(l=u.source)||void 0===l?void 0:l.includes("TTLiveSDK")){let e=c()(n,"room.basis.is_customize_audio_room",!1);b===a.ke.AUDIO&&!e&&A()}}catch(e){}},[A,I,b,n]);return f.useEffect(()=>(null==T||T.on(l.Events.SEI_PARSED,R),()=>{null==T||T.off(l.Events.SEI_PARSED,R)}),[T,R]),f.useEffect(()=>{let e=c()(n,"room.linker_map",{}),t=c()(n,"room.linker_detail.linker_play_modes",[]),i=!1;(e[p.xs.Scene_AudioChatRoom]||e[p.xs.Scene_VideoChatRoom]||e[p.xs.Scene_VideoEqualRoom])&&t.forEach(e=>{e===p.V0.LinkmicPlayMode_Teamfight&&(P(),i=!0)}),e[p.xs.Scene_AudioChatRoom]&&(t.includes(p.V0.LinkmicPlayMode_Teamfight)||t.includes(p.V0.LinkmicPlayMode_AudioChat_3x3_N_EMPTY))&&(i=!1),t.forEach(e=>{e===p.V0.LinkmicPlayMode_KTVSingingChallenge&&(P(),i=!0)}),(t.includes(p.V0.LinkmicPlayMode_Teamfight)||t.includes(p.V0.LinkmicPlayMode_AudioChat_3x3_N_EMPTY))&&(i=!1),i&&A()},[A,n]),f.useEffect(()=>null==N?void 0:N.on("KtvChallengeConfigMessage",e=>{e.forEach(e=>{let{method:t,payload:n}=e;if(!!t&&!!n)"WebcastKtvChallengeConfigMessage"===t&&(null==n?void 0:n.switch_status)==="1"&&A()})}),[A,N]),null};t.Z=I},993574:function(e,t,n){n.d(t,{u:function(){return u}}),n(250440);var i=n(88648),r=n(157818),l=n(582746),o=n(616003),a=n(618618);function u(e){var t;let{enabled:n,fullScreen:u,giftStatus:s,playerCoverText:d=""}=e,{isLivingPip:c}=(0,r.ds)(),{roomStore:{roomInfo:v},linkmicStore:{linkRoomType:_,isPlayModeNotSupport:f,isPaidLinking:m},cameraStore:{cameraInfoList:h},vrStore:{isVrLive:p}}=(0,l.Z)(),g=(null==h?void 0:h.length)>1,y=(0,i.useMemo)(()=>[o.kx.NONE,o.kx.ANCHOR_BAN].includes(d),[d]),E=Number(null===(t=v.room)||void 0===t?void 0:t.status_str)===a.LV.END,I=!c&&!u&&y&&_&&!f&&!E&&!m;return{showOperatingBar:!!(s||I)&&n||p||g,isShowLinkMicButton:I}}},153299:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(88648),r=n(582746),l=n(805591),o=n(734123);function a(e){let{eventStore:{playerEvent:t}}=(0,r.Z)(),{player:n}=(0,l.n)(),a=(0,i.useCallback)(n=>{switch(n.action){case"switch_danmu":null==t||t.liveDanmakuBtnClickEvent(!n.isOpen,e.logObj);break;case"switch_play_pause":null==t||t.livePlayBtnClickEvent(!n.paused,e.logObj);break;case"switch_fullscreen":null==t||t.liveFullScreenBtnEvent(n.fullscreen,e.logObj)}},[e.logObj]);return(0,i.useEffect)(()=>(n.on(o.Events.USER_ACTION,a),()=>{n.off(o.Events.USER_ACTION,a)}),[a]),null}},648050:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n("563097"),r=n("520739"),l=n("878389"),o=n("88648");let a=(0,o.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,l._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M24.932 16.444c0-4.687-3.89-8.444-8.634-8.444a8.679 8.679 0 0 0-7.207 3.79v-1.558a.99.99 0 0 0-1.98 0v4.038c0 .547.444.99.99.99h4.038a.99.99 0 0 0 0-1.98h-1.646c1.137-1.963 3.304-3.3 5.804-3.3 3.7 0 6.655 2.918 6.655 6.464 0 3.547-2.956 6.465-6.655 6.465-2.963 0-5.459-1.88-6.326-4.453a.99.99 0 0 0-1.876.633c1.138 3.38 4.39 5.8 8.202 5.8 4.746 0 8.635-3.758 8.635-8.445z",fill:"#fff"})})));var u=n("616003"),s=n("582746"),d=n("805591"),c=n("623947"),v=n("794848"),_=n("618105"),f=n("128231"),m=n.n(f),h=n("774444"),p=(0,_.r)(function(e){let{noTips:t=!1}=e,{eventStore:{playerEvent:n}}=(0,s.Z)(),{player:r}=(0,d.n)(),{playerCoverText:l}=e,_=m()(()=>{window.location.reload()},200),{Icon:f}=e,p=(0,o.useCallback)(()=>{var t;if(l&&l===u.kx.KICK_OUT){_();return}r.emit(u.Cw.REFRESH),r.retry(),null==n||null===(t=n.liveRefreshBtnClickEvent)||void 0===t||t.call(n,e.logObj)},[n,l,r]),{isInPreview:g,isInPreviewActive:y,hasModal:E}=(0,h.DQ)();return((0,o.useEffect)(()=>{if(g&&!y)return;let e=e=>{var t,n;if(E())return;let i=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.tagName;if("INPUT"!==i&&"TEXTAREA"!==i&&(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.contentEditable)!=="true")(null==e?void 0:e.code)==="KeyR"&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&p()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[p,g,y,E]),t)?(0,i.jsx)("div",{onClick:p,children:f?(0,i.jsx)(f,{}):(0,i.jsx)(a,{})}):(0,i.jsx)(c.Z,{content:(0,i.jsx)(v.Z,{btn:"R",info:"刷新"}),children:(0,i.jsx)("div",{onClick:p,children:f?(0,i.jsx)(f,{}):(0,i.jsx)(a,{})})})})},309427:function(e,t,n){n.d(t,{l:function(){return f}});var i=n(88648),r=n(734123),l=n(784492),o=n(988381),a=n(987475),u=n(847191),s=n(273312),d=n(582746),c=n(805591),v=n(72405),_=n(165153);function f(e){let{playerCoverText:t=""}=e,{eventStore:{playerEvent:n},linkmicStore:{linkStatus:f}}=(0,d.Z)(),{player:m}=(0,c.n)(),{syncVolume:h}=(0,s.j)(),p=(0,i.useCallback)(()=>{var e,i;if(0===m.currentTime||f===v.cK.LINKED||f===v.cK.LINKING||t)return;0===(0,u.$o)(a.LocalStorageKeys.PLAYER_IS_MUTE)&&m.muted&&(0,u.qQ)(a.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,o.w)(m.muted);let r=m.volume,l=(0,o.T1)(),s=(0,o.rC)();null==n||n.volumeChanged({before_voice_value:s?0:Math.round((null!=l?l:0)*100),voice_value:Math.round((null!=r?r:0)*100),voice_status:m.muted?0:1,if_browser_limited:null!==(i=null===(e=window.__INVISIBLE_QUERY__)||void 0===e?void 0:e.if_browser_limited)&&void 0!==i?i:0,if_mini_window:(0,_.OL)()}),0===r?(0,o.w)(!0):(0,o.n$)(Number(null!=r?r:.1))},[f,t]);return(0,l.Z)(()=>{m.muted=(0,o.rC)()},[p]),(0,i.useEffect)(()=>{let e=m.getPlugin("volume");return e&&e.useHooks&&e.useHooks("muted_change",()=>{var e,t,i,r,l;if(0===m.volume){let e=(0,o.T1)();return m.volume=e,(0,o.w)(!1),null==n||n.volumeChanged({before_voice_value:Math.round(100*e),voice_value:0,voice_status:1,if_browser_limited:null!==(i=null===(t=window.__INVISIBLE_QUERY__)||void 0===t?void 0:t.if_browser_limited)&&void 0!==i?i:0}),!1}return setTimeout(()=>{(0,o.w)(m.muted)},50),null==n||n.volumeChanged({before_voice_value:0,voice_value:Math.round((null!==(r=m.volume)&&void 0!==r?r:0)*100),voice_status:0,if_browser_limited:null!==(l=null===(e=window.__INVISIBLE_QUERY__)||void 0===e?void 0:e.if_browser_limited)&&void 0!==l?l:0}),!0}),m.on(r.Events.VOLUME_CHANGE,p),()=>{m.off(r.Events.VOLUME_CHANGE,p)}},[p]),null}},976928:function(e,t,n){var i=n(520739),r=n(368200),l=n(563097),o=n(88648),a=n(582746),u=n(53562),s=n(309931),d=n(713097),c=n.n(d),v=n(284116);t.Z=(0,u.Pi)(e=>{let{rightPanelStore:{rootEl:t,registerItem:n,itemClassName:u,itemIndex:d,renderItemList:_,closeItem:f,isItemShow:m,openItem:h}}=(0,a.Z)(),{children:p,autoOpen:g}=e,y=(0,r._)(e,["children","autoOpen"]),E=o.useMemo(()=>_.findIndex(t=>t.itemKey===e.itemKey)>=0,[_,e.itemKey]);(0,o.useEffect)(()=>{e.itemKey&&n((0,i._)({showClose:!0,closeStyle:{fill:"rgba(0, 0, 0, 0.24)",stroke:"rgba(255, 255, 255, 0.1)"}},y))},[e.itemKey]),(0,o.useEffect)(()=>()=>{f(e.itemKey)},[]),(0,o.useEffect)(()=>{g&&!m(e.itemKey)&&h(e.itemKey)},[g]);let I=o.useMemo(()=>e.itemKey.indexOf("exhibition")>-1?v.k.Exhibition:e.itemKey,[e.itemKey]);return t&&E?(0,s.createPortal)((0,l.jsx)("div",{className:c()(u,e.className||""),"data-e2e":I,style:{zIndex:d(e.itemKey),height:e.height||"100%"},children:p},e.itemKey),t):null})},284116:function(e,t,n){n.d(t,{k:function(){return i}}),n(88648);var i={HourRank:"__hour_rank__",FansClub:"__fans_club__",ECommerce:"__e_commerce__",ECommerceSmall:"__e_commerce_small__",WhishList:"__whish_list__",Exhibition:"__exhibition__",ECommerceCloseEvent:"__e_commerce_close__",ACTIndicatorGroup:"__act_indicator__",Vip:"__vip__",Hybrid:"__hybrid__",ChatRoom:"__chat_room__",GiftPanel:"__right_gift_panel__",CEnlargeRule:"__c_enlarge_rule__"}},153253:function(e,t,n){n.d(t,{Ls:function(){return i},M1:function(){return r}});var i={TUnkown:0,0:"TUnkown",Cart:1,1:"Cart",LiveItem:2,2:"LiveItem",MicroApp:3,3:"MicroApp",WelfareProject:4,4:"WelfareProject",GamePromotion:5,5:"GamePromotion",MiniGame:6,6:"MiniGame",LifeGroupon:7,7:"LifeGroupon",PaidLiveTicket:8,8:"PaidLiveTicket",LittleGame:9,9:"LittleGame",ShareComponent:20,20:"ShareComponent",IMComponent:21,21:"IMComponent",EasterEgg:22,22:"EasterEgg",Vr:23,23:"Vr",MoreComponent:24,24:"MoreComponent",ExchangeCoupon:25,25:"ExchangeCoupon",LinkmicComponent:26,26:"LinkmicComponent",LiuyanComponent:27,27:"LiuyanComponent",GiftComponent:28,28:"GiftComponent",SpeedyGift:29,29:"SpeedyGift",IncomeExchange:30,30:"IncomeExchange",RoomChannel:31,31:"RoomChannel",Operation:32,32:"Operation",SnapShot:33,33:"SnapShot",MultiCamera:34,34:"MultiCamera",Clarity:35,35:"Clarity",Anthology:36,36:"Anthology",MatchMultiCamera:37,37:"MatchMultiCamera",MultiTabs:38,38:"MultiTabs",InteractionPanel:39,39:"InteractionPanel",DecorationPanel:40,40:"DecorationPanel",Treasure:41,41:"Treasure",DouYinMultiStream:42,42:"DouYinMultiStream",Prompt:1001,1001:"Prompt",WishList:1002,1002:"WishList",GiftVote:1003,1003:"GiftVote",Manager:1004,1004:"Manager",DouPlus:1005,1005:"DouPlus",DanmakuSetting:1006,1006:"DanmakuSetting",GiftEffect:1007,1007:"GiftEffect",CleanScreen:1008,1008:"CleanScreen",CastScreen:1009,1009:"CastScreen",PadPlay:1010,1010:"PadPlay",PcPlay:1011,1011:"PcPlay",PadPcPlay:1012,1012:"PadPcPlay",PlaySetting:1013,1013:"PlaySetting",DiggShake:1014,1014:"DiggShake",WindowSetting:1015,1015:"WindowSetting",WindowPlay:1016,1016:"WindowPlay",Record:1017,1017:"Record",VipIM:1018,1018:"VipIM",Collect:1019,1019:"Collect",Definition:1020,1020:"Definition",TimingClose:1021,1021:"TimingClose",GamePointsPlay:1022,1022:"GamePointsPlay",Denounce:1023,1023:"Denounce",DisLike:1024,1024:"DisLike",OptimizeRecommend:1025,1025:"OptimizeRecommend",GiftConsumeRemind:1026,1026:"GiftConsumeRemind",MinorRefund:1027,1027:"MinorRefund",Renqibao:1028,1028:"Renqibao",ScreenSetting:1029,1029:"ScreenSetting",Widget:1030,1030:"Widget",ShakeLinkmic:1031,1031:"ShakeLinkmic",InteractSwitch:1032,1032:"InteractSwitch",MarketWidget:1033,1033:"MarketWidget",ShareStory:1034,1034:"ShareStory",BackRecord:1035,1035:"BackRecord",UnionAnchors:1036,1036:"UnionAnchors",WebcastSetting:1037,1037:"WebcastSetting",LinkmicGame:1038,1038:"LinkmicGame",AudioSubtitle:1039,1039:"AudioSubtitle",AudioEffect:1040,1040:"AudioEffect",EmergencyHelp:1041,1041:"EmergencyHelp",GiftConsumptionManager:1042,1042:"GiftConsumptionManager",LiveListen:1043,1043:"LiveListen",LiveExperienceOpt:1044,1044:"LiveExperienceOpt",PublicAreaSetting:1050,1050:"PublicAreaSetting",LinkmicAnnounce:1051,1051:"LinkmicAnnounce",GameTeamManage:1052,1052:"GameTeamManage",FollowerShare:1053,1053:"FollowerShare",SwitchAccount:1054,1054:"SwitchAccount",ConsumptionProtect:1055,1055:"ConsumptionProtect",Copy:1056,1056:"Copy",QRCode:1057,1057:"QRCode",IMListVirtual:1058,1058:"IMListVirtual",MessageNotification:1059,1059:"MessageNotification",RechargeRecord:1060,1060:"RechargeRecord",MerchantQualifications:1061,1061:"MerchantQualifications",WatchLaterComponent:1062,1062:"WatchLaterComponent",AnchorCompMusic:3001,3001:"AnchorCompMusic",AnchorCompFansGroup:3002,3002:"AnchorCompFansGroup",AnchorCompComment:3003,3003:"AnchorCompComment",AnchorCompPreview:3007,3007:"AnchorCompPreview",AnchorCompContentManage:3051,3051:"AnchorCompContentManage",AnchorCompShare:3053,3053:"AnchorCompShare",AnchorCompRecord:3056,3056:"AnchorCompRecord",AnchorCompContentSelection:3057,3057:"AnchorCompContentSelection",AnchorCompPublicAreaSetting:3058,3058:"AnchorCompPublicAreaSetting",AnchorCompPause:3059,3059:"AnchorCompPause",AnchorStableMode:3060,3060:"AnchorStableMode",AnchorRoomChannel:3061,3061:"AnchorRoomChannel",AnchorPublicAreaHelper:3062,3062:"AnchorPublicAreaHelper",AnchorCompLiveManage:3103,3103:"AnchorCompLiveManage",AnchorCompFunctionSetting:3104,3104:"AnchorCompFunctionSetting"},r={NoOp:0,0:"NoOp",Up:1,1:"Up",Down:2,2:"Down",HasPermission:3,3:"HasPermission",NoPermission:4,4:"NoPermission",UpdateData:5,5:"UpdateData"}},728974:function(e,t,n){n.d(t,{iM:function(){return i}});var i={TYPE_NONE:0,0:"TYPE_NONE",TYPE_TURNON:1,1:"TYPE_TURNON",TYPE_PERMIT:2,2:"TYPE_PERMIT",TYPE_KICKOUTED:3,3:"TYPE_KICKOUTED",TYPE_FINISH:4,4:"TYPE_FINISH",TYPE_WAITING_LIST_CHANGED:5,5:"TYPE_WAITING_LIST_CHANGED",TYPE_LINKED_LIST_CHANGED:6,6:"TYPE_LINKED_LIST_CHANGED",TYPE_ALL_LIST_CHANGED:7,7:"TYPE_ALL_LIST_CHANGED",TYPE_FAN_TICKET_CHANGED:8,8:"TYPE_FAN_TICKET_CHANGED",TYPE_RANKING_UPDATE:9,9:"TYPE_RANKING_UPDATE",TYPE_SILENCE:10,10:"TYPE_SILENCE",TYPE_UNSILENCE:11,11:"TYPE_UNSILENCE",TYPE_INVITE:12,12:"TYPE_INVITE",TYPE_REPLY:13,13:"TYPE_REPLY",TYPE_AUTO_JOIN:14,14:"TYPE_AUTO_JOIN",TYPE_AGREE_ADMIN_FIRST_INVITE:15,15:"TYPE_AGREE_ADMIN_FIRST_INVITE",TYPE_SILENCE_PASSIVE:16,16:"TYPE_SILENCE_PASSIVE",TYPE_SWITCH_SCENE:17,17:"TYPE_SWITCH_SCENE",TYPE_JOIN_GAME_BARRAGE_RTC:18,18:"TYPE_JOIN_GAME_BARRAGE_RTC",TYPE_LEAVE_GAME_BARRAGE_RTC:19,19:"TYPE_LEAVE_GAME_BARRAGE_RTC",TYPE_BATTLE_DATA:202,202:"TYPE_BATTLE_DATA"}},519917:function(e,t,n){n.d(t,{Qq:function(){return i}});var i={TypeEcology_Unknown:0,0:"TypeEcology_Unknown",TYPE_LIVE_MATRIX_ENTRANCE_CHANGE:1,1:"TYPE_LIVE_MATRIX_ENTRANCE_CHANGE",TYPE_WEB_ANTI_CHEAT:2,2:"TYPE_WEB_ANTI_CHEAT",TYPE_XPLAY_INIT:3,3:"TYPE_XPLAY_INIT",TYPE_XPLAY_CLOSE:4,4:"TYPE_XPLAY_CLOSE",TYPE_NOTIFY_MULTI_AVATAR_PUBLIC_STREAM:5,5:"TYPE_NOTIFY_MULTI_AVATAR_PUBLIC_STREAM",TYPE_FEATURE_HAMLET_AVATAR_START:100,100:"TYPE_FEATURE_HAMLET_AVATAR_START",TYPE_FEATURE_HAMLET_AVATAR_END:101,101:"TYPE_FEATURE_HAMLET_AVATAR_END"}},737466:function(e,t,n){n.d(t,{Ue:function(){return _},Ul:function(){return s},mp:function(){return d}});var i=n(134761);class r{start(){this.startDate=Date.now()}getTotal(){return this.startDate?Math.ceil((Date.now()-this.startDate)/1e3):0}reset(){this.startDate=void 0}constructor(){(0,i._)(this,"startDate",void 0)}}let l=new r,o=new r,a=new r,u=new r,s=new r,d=new r,c=new r,v=new r,_=()=>{l.reset(),o.reset(),a.reset(),s.reset(),d.reset(),c.reset(),u.reset(),v.reset()}},772310:function(e,t,n){n.d(t,{F:function(){return a},V:function(){return o}});var i=n(520739),r=n(878389),l=n(481154);let o=e=>{if(null==e?void 0:e.multi_view_data){let{displays:t=[]}="string"==typeof e.multi_view_data?JSON.parse(e.multi_view_data):e.multi_view_data;if(t.some(e=>e.display_id===l.m))return!0}return!1},a=e=>{if(null==e?void 0:e.multi_view_data){let{displays:o=[],inputs:a=[]}="string"==typeof e.multi_view_data?JSON.parse(e.multi_view_data):e.multi_view_data,u=o.find(e=>e.display_id===l.m);if(u){var t,n;let{outputs:l=[]}=u,o=null===(t=l.find(e=>0===e.level))||void 0===t?void 0:t.id,s=null===(n=l.find(e=>1===e.level))||void 0===n?void 0:n.id,d=a.find(e=>e.id===o),c=a.find(e=>e.id===s);e.game_live_data=(0,r._)((0,i._)({},e.game_live_data||{}),{camera_clip_custom:c.rect,camera_hidden:c.visible?0:1,game_clip:d.rect,game_hidden:d.visible?0:1})}}}},841195:function(e,t,n){n.d(t,{Y:function(){return l},s:function(){return o}});let i=e=>{var t;return null===(t=document)||void 0===t?void 0:t.querySelector(e)},r=(e,t,n,i)=>{e.style.setProperty(t,n,i?"important":"")},l=e=>{let t=i("#chatroom");if(!t||!((null==t?void 0:t.offsetWidth)<300))t&&(null==e||e({height:null==t?void 0:t.offsetHeight,width:null==t?void 0:t.offsetWidth,isHideCamera:(null==t?void 0:t.offsetHeight)<600}))},o=e=>{let t=i("#double_screen"),n=i("#chatroom");n&&t&&r(t,"height",e?`${(null==n?void 0:n.offsetWidth)/639*360}px`:`${null==n?void 0:n.offsetWidth}px`,!0)}},222256:function(e,t,n){n.d(t,{M0:function(){return l},SA:function(){return u},tq:function(){return o},zO:function(){return a}}),n(284961),n(826893),n(250440),n(954372);var i=n(567754),r=n(725887);let l=e=>[1,2,3,4].includes(e),o=e=>(!e&&"undefined"!=typeof window&&(e=window.navigator.userAgent),/android|ip(ad|hone|od)|symbianos|windows\s(ce|phone)/i.test(null!=e?e:"")),a=(e,t)=>t&&-1!==t.indexOf("https://live.douyin.com")?-1===t.indexOf("?")?`${t}?${(0,i.stringify)(e)}`:`${t}&${(0,i.stringify)(e)}`:t,u=()=>{try{let{prefetchRoomId:e,prefetchStream:t}=r.Le.getConfig(r.gI.FirstPreviewData)||{};t&&(t.getReader().cancel(),r.Le.setConfig(r.gI.FirstPreviewData,{}))}catch(e){}}},362706:function(e,t,n){n.d(t,{x:function(){return l}}),n(954372),n(826893);var i=n(674379),r=n(75978);let l=e=>{/iframe/.test(location.pathname)?(0,i.dn)({headerText:e.headerText,enterMethod:e.enterMethod}):(0,r.p)().then(t=>{t(e)})}},211147:function(e,t,n){n.d(t,{Ad:function(){return i},F4:function(){return l},Ox:function(){return u},Rr:function(){return a},cM:function(){return r},dc:function(){return o},jJ:function(){return d},qH:function(){return s}});var i={Unknown:0,0:"Unknown",toAudience:1,1:"toAudience",toAnchor:2,2:"toAnchor",toOtherAnchor:3,3:"toOtherAnchor",toSelf:4,4:"toSelf"};let r=e=>{let{currentUid:t,targetUid:n,targetIsAnchor:i,currentAnchorId:r}=e;return t===n?4:i?n===r?2:3:1},l=e=>2===e,o=e=>3===e;var a={Level:1,1:"Level",FansClub:2,2:"FansClub",Exhibition:3,3:"Exhibition",Vip:4,4:"Vip",Dress:5,5:"Dress",ShoppingFansClub:6,6:"ShoppingFansClub",HighScoreSongList:8,8:"HighScoreSongList"};let u=e=>2===e,s=e=>3===e,d=e=>2===e},798747:function(e,t,n){n.d(t,{QX:function(){return o},WY:function(){return u},b0:function(){return s},b7:function(){return a}});var i=n(396169),r=n(565024),l=n(987475);let o=e=>{localStorage.setItem("webcast_local_quality",e),document.cookie=(0,i.serialize)("webcast_local_quality",localStorage.getItem("webcast_local_quality"),{domain:".douyin.com",path:"/"})},a=e=>{document.cookie=(0,i.serialize)("webcast_leading_last_show_time",e,{domain:".douyin.com",path:"/"})},u=()=>{let e=r.Q.originGetItem(l.CookieKeys.WebcastLeadingTotalShowTimes);document.cookie=(0,i.serialize)("webcast_leading_total_show_times",Number(e)+1,{domain:".douyin.com",path:"/"})},s=()=>{document.cookie=(0,i.serialize)("webcast_leading_total_show_times",0,{domain:".douyin.com",path:"/"})}},988381:function(e,t,n){n.d(t,{Sv:function(){return d},T1:function(){return c},n$:function(){return v},rC:function(){return _},w:function(){return f}});var i=n(520739),r=n(878389);n(927234);var l=n(683849),o=n(674379),a=n(565024),u=n(987475),s=n(742401);function d(){var e,t;if(s.s)return 0;let n=localStorage.getItem((0,o.DS)()?l.YN:l.xQ);if(!!(n=null!==(t=null===(e=(a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{}).volume)||void 0===e?void 0:e.toString())&&void 0!==t?t:n))return Number(n)}function c(){var e;return null!==(e=d())&&void 0!==e?e:.6}function v(e){let t=a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{};return a.Q.setItem(u.CookieKeys.VolumeInfo,(0,r._)((0,i._)({},t),{volume:e})),localStorage.setItem((0,o.DS)()?l.YN:l.xQ,e.toString())}function _(){var e;if(s.s)return!1;let t="1"===localStorage.getItem((0,o.DS)()?l.FR:l.mI);return t=null!==(e=(a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{}).isMute)&&void 0!==e?e:t}function f(e){let t=a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{};return a.Q.setItem(u.CookieKeys.VolumeInfo,(0,r._)((0,i._)({},t),{isMute:e,isUserMute:e})),localStorage.setItem((0,o.DS)()?l.FR:l.mI,e?"1":"0")}},765208:function(e,t,n){n.d(t,{b:function(){return m}});var i=n(520739);n(777180),n(897860);var r=n(563097),l=n(88648),o=n(734123),a=n(725887),u=n(335101),s=n(443073),d=n(289228),c=n(664959);function v(e){let{click_method:t,player:n}=e;null==n||n.emit(o.Events.USER_ACTION,{action:"change_volume",logData:{click_method:t,is_mute:n.muted?"1":"0"},props:{volume:{to:n.volume}}})}let _=(e,t)=>{var n,i,r,l,o,a;if(!e)return;if(null===(r=e.plugins)||void 0===r||null===(i=r.volume)||void 0===i||null===(n=i.focus)||void 0===n||n.call(i),null===(a=e.plugins)||void 0===a||null===(o=a.volume)||void 0===o||null===(l=o.unFocus)||void 0===l||l.call(o,1e3,!0,null),e.muted){e.muted=!1,e.volume=Math.max(t/100,0),v({click_method:"wheel",player:e});return}let u=e.volume+t/100;u=Math.max(u=Math.min(u,1),0),e.volume=Number(u.toFixed(2)),0===u&&(e.muted=!0),v({click_method:"wheel",player:e})},f=e=>{let{isActive:t,currentPlayer:n}=e,i=(0,u.n)(),r=n||i;(0,l.useEffect)(()=>{let e=a.Le.getConfig(a.gI.AbtestData);if((null==r?void 0:r.getPlugin)&&t&&(null==e?void 0:e.useCache)!==1){let e=r.getPlugin("volume");if(!e)return;let t=e.root,n=e=>{let t=(0,c.G1)();e.stopPropagation(),e.preventDefault();let n=(t?1:-1)*parseInt(String(e.deltaY/20),10);0!==n&&_(r,n)},i=()=>{a.Le.setConfig(a.gI.DisableNextPre,!0)},l=()=>{a.Le.setConfig(a.gI.DisableNextPre,!1)};return t.addEventListener("wheel",n),t.addEventListener("mouseover",i),t.addEventListener("mouseout",l),()=>{t.removeEventListener("wheel",n),t.removeEventListener("mouseover",i),t.removeEventListener("mouseout",l)}}},[r,t]);let o=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{let e=a.Le.getConfig(a.gI.AbtestData);if(r&&r.on&&t&&(null==e?void 0:e.useCache)===1){let e=e=>{e.preventDefault(),e.stopPropagation();let t=((0,c.G1)()?1:-1)*parseInt(String(e.deltaY/20),10);0!==t&&_(r,t)},t=t=>{if("volume"===t.pluginName){var n;a.Le.setConfig(a.gI.DisableNextPre,!0),(null==r?void 0:null===(n=r.getPlugin("volume"))||void 0===n?void 0:n.root)&&(r.getPlugin("volume").root.addEventListener("wheel",e),o.current=!0)}},n=t=>{if("volume"===t.pluginName){var n;a.Le.setConfig(a.gI.DisableNextPre,!1),(null==r?void 0:null===(n=r.getPlugin("volume"))||void 0===n?void 0:n.root)&&(r.getPlugin("volume").root.removeEventListener("wheel",e),o.current=!1)}};return r.on("icon_mouseenter",t),r.on("icon_mouseleave",n),()=>{if(r.off("icon_mouseenter",t),r.off("icon_mouseleave",n),o.current){var i,l;null==r||null===(l=r.getPlugin("volume"))||void 0===l||null===(i=l.root)||void 0===i||i.removeEventListener("wheel",e),o.current=!1}}}},[r,t]),(0,l.useEffect)(()=>()=>{a.Le.setConfig(a.gI.DisableNextPre,!1)},[]),null},m=e=>{let t=(0,s.N)();return(0,r.jsx)(d.k,{componentName:"VolumePlugin",Slardar:t,children:(0,r.jsx)(f,(0,i._)({},e))})}}}]);