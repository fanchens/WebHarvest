/*! For license information please see routes-route.fb4a0988.js.LICENSE.txt */
(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["71242"],{171624:function(e,t,i){"use strict";let l,o,n,r;i.r(t),i.d(t,{default:function(){return vv}}),i("874386");var a,d,u,s,c,v=i("563097"),f=i("88648"),m=i("713097"),p=i.n(m),_=i("549519"),g=i("832052"),h=i("833181"),y=i("501206"),w=i("737470"),x=i("597087"),C=i("725887"),I=i("76223"),b=i("634362"),E=i("520739");i("338172"),i("268917"),i("413806"),i("826893");var S=i("567754"),T=i("439837"),k=i.n(T),L=i("645260"),A=i.n(L),R=i("987475"),N=i("158166"),P=i("713503"),M=i("440932"),j=i("983253"),D=i("459132"),F=i("167951"),V=i("565024"),O=i("797460"),B=i("847191"),U=i("828782"),H=i("684922"),W=i("905754"),z=i("487330"),G=i("109050");let Z=e=>e.defaultStream;var q=i("230535").Z;i("981168"),i("897860");let K=()=>{let e=C.Le.getConfig(C.gI.itemIdToVideoPreferData)||{},t=Object.keys(e).sort((t,i)=>{var l,o;return(null===(l=e[i])||void 0===l?void 0:l.timestamp)-(null===(o=e[t])||void 0===o?void 0:o.timestamp)}).slice(0,50),i={fsn:[],lk:[],halfMin:[],min:[],show:[],skip:[],head:[]};return t.forEach(t=>{Object.keys(e[t].interaction).forEach(l=>{var o,n,r,a,d,u;"dislike"===l&&i.skip.push({[t]:{user_act:$(e[t].interaction),s_ts:(null===(o=e[t].player)||void 0===o?void 0:o.playTimestamp)||0,p_t_a:(null===(n=e[t].player)||void 0===n?void 0:n.overallPlayTime)||0,aid:e[t].aid,v_t:e[t].v_t,timestamp:e[t].interaction.dislike||0}}),"follow"===l&&i.head.push({[t]:{user_act:$(e[t].interaction),s_ts:(null===(r=e[t].player)||void 0===r?void 0:r.playTimestamp)||0,p_t_a:(null===(a=e[t].player)||void 0===a?void 0:a.overallPlayTime)||0,aid:e[t].aid,v_t:e[t].v_t,timestamp:e[t].interaction.follow||0}}),e[t].interaction[l]&&i[l]&&i[l].push({[t]:{user_act:$(e[t].interaction),s_ts:(null===(d=e[t].player)||void 0===d?void 0:d.playTimestamp)||0,p_t_a:(null===(u=e[t].player)||void 0===u?void 0:u.overallPlayTime)||0,aid:e[t].aid,v_t:e[t].v_t,timestamp:e[t].interaction[l]}})})}),Object.keys(i).forEach(e=>{i[e].sort((e,t)=>{var i,l,o,n;let r=(null===(l=Object.values(e))||void 0===l?void 0:null===(i=l[0])||void 0===i?void 0:i.timestamp)||0;return((null===(n=Object.values(t))||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.timestamp)||0)-r})}),i},$=e=>parseInt([Number(!!e.dislike)||0,Number(!!e.clickComment)||0,Number(!!e.fav)||0,Number(!!e.click)||0,Number(!!e.head)||0,Number(!!e.follow)||0,Number(!!e.share)||0,Number(!!e.comment)||0,Number(!!e.like)||0,Number(!!e.fsn)||0].join(""),2),Y=()=>C.Le.getConfig(C.gI.PlayerStatus);var Q=i("878389"),X=i("465571"),J=i("245861"),ee=i("613480"),et=i("583165"),ei=i("492652"),el={recommend:"recommend"};let eo=new Map([["recommend","recommend"],["follow","follow"],["friend","friend"],["topic","topic"]]);var en=i("557546"),er=i("915841"),ea=i("45095"),ed=i("876877");i("250440");var eu=i("784492"),es=i("261234"),ec=i("909543"),ev=i("734123"),ef=i.n(ev),em=i("399242"),ep=i("623582"),e_=i("87908"),eg=i("302461"),eh=i("905003"),ey=i("226683"),ew=i("255288"),ex=i("999137"),eC=i("53659"),eI=i("465769"),eb=i("441447"),eE=i("328155"),eS=i("737271"),eT=i("669624"),ek=i("127311"),eL=i("852664"),eA=i("795012"),eR=i("643385"),eN=i("92754"),eP={playerContainer:"RfzxKpCc",miniModalContainer:"BOR0iz6l",miniModalFullScreen:"WOm1ahv4",playerCommentWrapper:"RkpaIapm",transparent:"i5mEDG2r",hiddenFeedPlayer:"oEFkPKbG",adapterMiniHeight:"h79QOQKw",adapterMiniHeight455:"bSHnWRfe",adapterMiniHeightWithDislikeBtn:"_8Nire6B",isFullScreen:"d5qEqgqU",searchFit:"AmFETHbC",sideBar:"KBC38xJy",shopSidebar:"Bhq_SLit",sideBarDefaultWidth:"TXDErTB4",force300pxWidth:"FiS7WtRP",bgColorDarken1:"eP43L_0f",bgColorDarken2:"fxoT7ZjC",middle:"aYYq86ma",sideBarInnerWrapper:"TGBZzriM",sideBarInnerHidden:"Y8OchDEl",relatedVertical:"M6yUEcf3",inFullScreen:"Jk1REakD",sideBarHidden:"bROsz8dA",noTransition:"fbpFG9GX",sideBarInBottomLayer:"dz7XWXW5",sideBarInUnderLayer:"DPc34vLQ",sideBarInTopLayer:"XlVwluYx",chapterSideBarInTopLayer:"vMjfwrC9",displayNone:"TRqeuALV",forFixedLayer:"TH0ImJ2_",showSideBar:"L864Yi6a",interactionPos:"AG9xGiIv",removeSlideRelatedButton:"iKKqkYmw",isSafari:"esCXVhWG",videoImage:"aT8bD9FK",isHavePlayer:"Ul67dsbE",playerWrap:"kBufe8vM",electronDrag:"g9CoVpqo",playerWrapZIndex:"QdAExrbH",isMiniWindowActive:"YtsW3h84",btn:"polvG1tm",openBtn:"GzRmcqzQ",putBtn:"Z976I9aa",backgroundImg:"qOxKGHwO",backgroundMask:"kuebeYzr",backgroundImgSarari:"H63QFij1",videoInfoContainer:"pWDDuQoO",title:"bErghG2a",infoContainer:"S_cXBqxm",time:"e0v1UlSg",reportTool:"CMDLNMXl",report:"M1Uu7c59",publishTime:"dmDfjObE",statsContainer:"SArcmg4o",count:"VbZwWl65",statsItem:"T6zdY88M",share:"BaJ6xXQQ",active:"wDbuCexk",iconSvg:"eCTjIcCr",shareContainer:"ke6cG0eR",shareBox:"MQSBUEeE",shareBoxHidden:"m0gA1Hup",miniScreenBtn:"nUTZrUAT",hidden:"TzZqd6sD",imgPlaceHolder:"hnjbJlmS",programCardHidden:"FHcolcEH",linkHashTag:"xWebYY0y",hide:"lcOz0kR7",inOutFeed:"XUEV85Gd",shopCard:"fFThBG8A",adapterSeventh:"NmKL6to4",playSwitch:"gJd6_icg",maskBackgroundHidden:"BQEods9l",posTransition:"xQFJO0tI"};let eM=e=>{let{children:t,fallback:i}=e,[l,o]=f.useState(!1);return(f.useEffect(()=>o(!0),[]),l)?t:null!=i?i:(0,v.jsx)(v.Fragment,{})};i("675373");var ej=i("309931"),eD=i("871350"),eF=i("343049"),eV={panelWrapper:"TxRzI8fX",panel:"EEkJwb9u",buttonWraper:"aMihkNzy",button:"LHhi6VQS",right:"gYdltpi8",opacityAnimation:"HVqdGvSC"};let eO=null,eB=!1;function eU(e){let{text:t,style:i}=e;async function l(){(0,eD.J)(null==eO?void 0:eO.innerText),M.F.info({text:"已复制",duration:1e3})}return(0,v.jsx)("div",{className:eV.panel,style:{height:i.height,width:i.width},onDoubleClick:l,children:t})}function eH(e){let{name:t,text:i,showPanelRightside:l}=e;return(0,v.jsx)("div",{className:eV.button,onClick:function(e){eB?(eO.style="display: none;",eB=!1):(!function(e,t){if(eO){let e=`top:${t.top}px; left:${t.left}px;`;0===t.right&&(e=`top:${t.top}px; right:0px;`),eO.style=e}else{let e=`top:${t.top}px; left:${t.left}px;`;0===t.right&&(e=`top:${t.top}px; right:0px;`),(eO=document.createElement("div")).className=eV.panelWrapper,eO.id="panelContainer",eO.style=e,document.body.appendChild(eO)}ej.render((0,v.jsx)(eU,{text:e,style:t}),eO)}(i,function(e,t){let i={width:300,height:600,top:0,left:0,right:""},l=t.target.getBoundingClientRect(),o=document.documentElement.scrollTop,n=document.documentElement.clientWidth;return i.right=l.right+4+300>n?0:"unset",i.top=l.bottom+4+o,e?i.left=l.right+4:i.left=l.left-i.width-4,i}(l,e)),eB=!0),e.stopPropagation(),e.preventDefault()},children:t})}function eW(e){let{req:t=null,video:i,isLeft:l=!0,showPanelRightside:o=!1,size:n=null,gear:r}=e;return(0,f.useEffect)(()=>()=>void(eO&&(document.body.removeChild(eO),eO=null,eB=!1)),[]),(0,v.jsxs)("div",{className:p()(eV.buttonWraper,eV.opacityAnimation,{[eV.right]:!l}),children:[t&&(0,v.jsx)(eH,{name:"请求",text:t,showPanelRightside:o}),i&&(0,v.jsx)(eH,{name:"视频",text:function(e,t,i){if("String"!==(0,eF.tQ)(e))return"";let l=e.split("\r\n");if(t){let e=`播放分辨率: ${t.height},${t.width}`;l.splice(2,0,e)}if(i){let e=`播放档位: ${i}`;l.splice(2,0,e)}return l.join("\r\n")}(i,n,r),showPanelRightside:o})]})}var ez=i("872136"),eG=i("953342"),eZ=new ez.h({clickAuthorHead:{eventName:"click_author_head",params:{click_from:"",action:"open",author_id:"",group_id:"",enter_from:"",previous_page:"",is_full_screen:"0",is_full_webscreen:"",log_pb:"",from_follow_list:"0",from_xigua:0,music_id:"",aweme_type:"",clarity:"",is_auto:1,to_user_id:"",is_co_publish:0,co_publish_author_list:void 0}},clickCommentButton:{eventName:"click_comment_button",params:{action:"",author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",from_follow_list:"0",relation:"",clarity:"",aweme_type:"",click_from:"",item_duration_ms:0}},follow:{eventName:"follow",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",from_xigua:0,relation:"",from_group_id:"",music_id:"",compilation_id:"",aweme_type:"",is_pure:""}},followCancel:{eventName:"follow_cancel",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",relation:"",from_group_id:"",music_id:"",compilation_id:""}},volumeNormReady:{eventName:"volume_norm_ready",params:{state:"",isReady:void 0,muted:void 0,volume:void 0,enter_from:"",peak:void 0,loudness:void 0,vid:""}},volumeNormError:{eventName:"volume_norm_error",params:{state:"",error:"",muted:void 0,volume:void 0,currentTime:void 0,enter_from:"",peak:void 0,loudness:void 0,vid:""}},videoAnchorShow:{eventName:"video_anchor_show",params:{group_id:"",author_id:"",enter_from:"",type:""}},videoAnchorClick:{eventName:"video_anchor_click",params:{group_id:"",author_id:"",enter_from:"",type:""}},vsVideoShow:{eventName:"vs_video_show",params:{enter_from_merge:"",enter_method:"",previous_page:"",action_type:"",is_vs:1,vs_season_id:"",vs_episode_id:"",room_id:"",vs_ep_group_id:"",vs_episode_stage:"",vs_episode_type:"",vs_episode_sub_type:"",vs_play_status:"",vs_is_portraid_content:""}},clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"scroll",compilation_id:"",is_card_expand:"",is_small_window:"0",is_update:"",is_seen:"",play_material:"video"}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"scroll",compilation_id:"",is_card_expand:"",is_small_window:"0",is_update:"",is_seen:"",play_material:"video"}},clickMainPage:{eventName:"click_main_page",params:{enter_from:""}},closePlayer:{eventName:"close_player",params:{click_method:"",enter_from:""}},dislikeRecallShow:{eventName:"dislike_recall_show",params:{}},dislikeRecallClick:{eventName:"dislike_recall_click",params:{}}});let eq=e=>{var t,i,l,o,n;let r={to_user_id:null==e?void 0:null===(t=e.authorInfo)||void 0===t?void 0:t.uid,is_co_publish:0,co_publish_author_list:void 0};if((null==e?void 0:null===(l=e.cooperationInfo)||void 0===l?void 0:null===(i=l.cooperationCreators)||void 0===i?void 0:i.length)>1){r.is_co_publish=1;let t=null==e?void 0:null===(n=e.cooperationInfo)||void 0===n?void 0:null===(o=n.cooperationCreators)||void 0===o?void 0:o.filter(e=>e.roleId!==eG.CooperationRoleId.Author);(null==t?void 0:t.length)&&(r.co_publish_author_list=t.map(e=>`${e.uid}_${null==e?void 0:e.roleId}`))}return r},eK=e=>{let{player:t,abTestData:i,awemeInfo:l,chapterScrollElRef:o,topLevelSidebar:n,activateCard:r,resetClosingShopRef:a,isActive:d,isInnerFeed:u}=e,[s,c]=(0,f.useState)(-1),[v,m]=(0,f.useState)(!1),p=(0,f.useRef)(""),_=(0,f.useRef)(!0),g=null==l?void 0:l.chapterInfo,h=e=>{null==e||e.stopPropagation()};return(0,f.useEffect)(()=>{if(t&&(null==g?void 0:g.status)){let e=e=>{var t;let i=(null!==(t=e.currentTime)&&void 0!==t?t:0)*1e3,{list:l}=g,o=l.map(e=>e.timestamp),n=-1;for(let e=0;e<o.length;e++)i>=o[e]&&(n=e);c(n)};return t.on("timeupdate",e),()=>{t.off("timeupdate",e)}}},[t,i,g]),(0,f.useEffect)(()=>{let e=u&&p.current!==(null==l?void 0:l.awemeId);if(o.current||e){var t;return null===(t=o.current)||void 0===t||t.addEventListener("wheel",h),()=>{var e;null===(e=o.current)||void 0===e||e.removeEventListener("wheel",h)}}},[o,d,l,u]),(0,f.useEffect)(()=>{if(u&&p.current!==(null==l?void 0:l.awemeId)){var e;m(!1),p.current=null!==(e=null==l?void 0:l.awemeId)&&void 0!==e?e:""}},[l,u]),{chapterProgress:s,chapterSliderShow:v,setChapterSliderShow:m,triggerChapterSliderShow:()=>{if(!!_.current){if(_.current=!1,setTimeout(()=>{_.current=!0},500),v&&"sidebar"===n){r("chapterSidebar");return}!v&&a(),m(!v)}}}};var e$=i("633364"),eY=i.n(e$),eQ=i("907831"),eX=i.n(eQ),eJ=i("948375"),e0=i("544406"),e1=i("500899"),e2=i("694624"),e3=i("699872");let e6=async e=>{var t,i;let{secUid:l,uid:o}=e,n=await (0,e1.fetchUserProfile)(l),r=null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.followStatus,a=null==n?void 0:null===(i=n.user)||void 0===i?void 0:i.followerStatus,d=C.Le.getConfig(C.gI.FollowStatusCache)||{};d[o]={followerStatus:a,followStatus:r},C.Le.setConfig(C.gI.FollowStatusCache,d),eb.emit(eb.EVENT.syncInteractionStatus,{action:"follow",toUserId:o})},e5=()=>(!C.Le.getConfig(C.gI.FollowStatusCache)&&C.Le.setConfig(C.gI.FollowStatusCache,{}),C.Le.getConfig(C.gI.FollowStatusCache)),e4=e=>{let{actionUid:t,followStatus:i,followerStatus:l}=e,o=eX()(e5());o[t]={followerStatus:l,followStatus:i},C.Le.setConfig(C.gI.FollowStatusCache,o)},e8=e=>{let{selfUid:t,actionUid:i,defaultFollowStatus:l,onLoginSuccess:o,isLogin:n,logExtraParams:r={},accountParentEl:a=document.body,fail:d,success:u,complete:s,defaultFollowerStatus:c,preventReport:v=!1,scene:m,from:p}=e,_=(0,f.useRef)(!1),g=(0,f.useRef)(0),h=(0,eJ.Z)(async e=>{let{action:o,clickFrom:n="icon"}=e,a="",f=0;try{let{statusCode:e,followStatus:s,errMsg:m,logPb:_}=await (0,e2.Z)(i,"follow"===o?1:0);a=_,f=e,e?null==d||d({action:o,errMsg:m,statusCode:e,logPb:a,clickFrom:n}):(null==u||u({action:o,followStatus:s,beforeFollowStatus:l,logPb:a,clickFrom:n}),"follow"===o&&(e0.a.TrayPushGuideManager.emitFollowEvent(),eb.emit(eb.EVENT.showClientDownloadGuide,{isShow:!0,type:"follow",text:"及时接收「关注的人」开播提醒",from:p})),!v&&("follow"===o?ep.logInstance.sendLog("follow",(0,E._)({urlParamList:["previous_page"],log_pb:a,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",click_method:n,relation:String(l)},r)):ep.logInstance.sendLog("followCancel",(0,E._)({urlParamList:["previous_page"],log_pb:a,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",click_method:n,relation:String(l)},r))),e4({actionUid:i,followerStatus:c,followStatus:s}),eb.emit(eb.EVENT.syncInteractionStatus,{action:o,fromUserId:t,toUserId:i}))}catch(e){null==d||d({action:o,logPb:a,clickFrom:n})}return null==s||s({action:o,logPb:a,clickFrom:n}),{statusCode:f}}),y=(0,eJ.Z)(async e=>{var t,i;let{clickFrom:l,noLoginCb:n,loginPanelTarget:r}=e||{};(0,e3.ZP)({success:async()=>{_.current=!0,await (null==o?void 0:o());let{statusCode:e}=await h({action:"follow",clickFrom:l})||{};_.current=!1,g.current=e,g.current===x.ERROR_CODE.ERROR_USER_UNLOGIN&&(null==n||n())},headerText:"登录后即可关注",enterMethod:"follow",next:`https://${null===(i=window)||void 0===i?void 0:null===(t=i.location)||void 0===t?void 0:t.host}`},a instanceof HTMLElement?a:a.current)}),w=(0,eJ.Z)(async e=>{let{clickFrom:t="icon",loginPanelTarget:l}=e||{};if(ep.logInstance.sendLog("clickFollow",(0,E._)({enter_from:(0,eI.mo)(),click_method:(null==r?void 0:r.clickFrom)||t||"icon",tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||""},eY()(r,["parentEle","clickFrom"]))),!_.current&&!!i)n?(_.current=!0,await h({action:"follow",clickFrom:t}),eb.emit(eb.EVENT.userBlockEvent,{uid:i,isBlock:!1,action:"follow"}),_.current=!1):y({clickFrom:t,noLoginCb:()=>{setTimeout(()=>{y({clickFrom:t,noLoginCb:void 0,loginPanelTarget:l})},1e3)},loginPanelTarget:l})});return{unFollow:(0,eJ.Z)(async e=>{let{clickFrom:t="icon",loginPanelTarget:l}=e||{};if(n){if(_.current||!i)return;_.current=!0,await h({action:"unFollow",clickFrom:t}),_.current=!1}else{var r,d;(0,e3.ZP)({success:async()=>{await (null==o?void 0:o()),await h({action:"unFollow",clickFrom:t})},headerText:"登录后即可关注",enterMethod:"follow",next:`https://${null===(d=window)||void 0===d?void 0:null===(r=d.location)||void 0===r?void 0:r.host}`},a instanceof HTMLElement?a:a.current)}}),follow:w}};var e7=i("369881"),e9=i("134761");let te=new class e{removeCb(e){let t=this.cbList.findIndex(t=>t===e);t>-1&&this.cbList.splice(t,1)}addCb(e){return this.cbList.push(e),()=>{this.removeCb(e)}}destroyCenter(){var e;null===(e=this.destroy)||void 0===e||e.call(this)}constructor(){(0,e9._)(this,"destroy",void 0),(0,e9._)(this,"cbList",[]);this.destroy=eb.listen(eb.EVENT.syncInteractionStatus,e=>{var t,i,l,o,n,r;let a,d;let{action:u,fromUserId:s,toUserId:c,awemeId:v,mixId:f,musicId:m,seriesId:p}=e,_=null===(t=C.Le.getConfig(C.gI.FollowStatusCache))||void 0===t?void 0:t[c];(null==_?void 0:_.followStatus)===e7.$u.Followed?(a=e7.vc.Followed,d=e7.TT.Inactive):(null==_?void 0:_.followStatus)===e7.$u.FollowEach?(a=e7.vc.FollowEach,d=e7.TT.Inactive):(null==_?void 0:_.followStatus)===e7.$u.Requested?(a=e7.vc.Requested,d=e7.TT.Inactive):((null==_?void 0:_.followerStatus)>e7.z5.UnFollow?(d=e7.vc.FollowByOther,a=e7.vc.FollowByOther):a=e7.vc.UnFollow,d=e7.TT.Active);let g=null===(i=C.Le.getConfig(C.gI.DiggStatusCache))||void 0===i?void 0:i[v],h=null===(l=C.Le.getConfig(C.gI.CollectStatusCache))||void 0===l?void 0:l[v],y=null===(o=C.Le.getConfig(C.gI.CollectMixStatusCache))||void 0===o?void 0:o[f],w=null===(n=C.Le.getConfig(C.gI.CollectSeriesStatusCache))||void 0===n?void 0:n[p],x=null===(r=C.Le.getConfig(C.gI.CollectMusicStatusCache))||void 0===r?void 0:r[m];try{this.cbList.forEach(e=>{e&&e({followStatus:null==_?void 0:_.followStatus,followButtonText:a,followButtonType:d,awemeId:v,selfUid:s,action:u,actionUid:c,mixId:f,seriesId:p,musicId:m,diggCount:null==g?void 0:g.count,diggStatus:null==g?void 0:g.diggStatus,collectCount:null==h?void 0:h.count,collectStatus:null==h?void 0:h.collectStatus,collectMixStatus:null==y?void 0:y.collectStatus,collectSeriesStatus:null==w?void 0:w.collectStatus,collectMusicStatus:null==x?void 0:x.collectStatus})})}catch(e){}})}},tt=e=>{let{followStatus:t,followerStatus:i}=e,l=e7.vc.UnFollow,o=e7.TT.Active;return t===e7.$u.Followed?(l=e7.vc.Followed,o=e7.TT.Inactive):t===e7.$u.FollowEach?(l=e7.vc.FollowEach,o=e7.TT.Inactive):t===e7.$u.Requested?(l=e7.vc.Requested,o=e7.TT.Inactive):(l=i>e7.z5.UnFollow?e7.vc.FollowByOther:e7.vc.UnFollow,o=e7.TT.Active),{text:l,buttonType:o}},ti=e=>{var t,i,l;let{selfUid:o,defaultFollowStatus:n=e7.$u.UnFollow,defaultFollowerStatus:r=e7.z5.UnFollow,actionUid:a}=e,d=null===(t=C.Le.getConfig(C.gI.FollowStatusCache))||void 0===t?void 0:t[a],u=null!==(i=null==d?void 0:d.followStatus)&&void 0!==i?i:n,s=null!==(l=null==d?void 0:d.followerStatus)&&void 0!==l?l:r,[c,v]=(0,f.useState)(tt({followStatus:u,followerStatus:s}).text),[m,p]=(0,f.useState)(tt({followStatus:u,followerStatus:s}).buttonType);return(0,f.useEffect)(()=>{let{text:e,buttonType:t}=tt({followStatus:u,followerStatus:s});v(e),p(t)},[n,r]),(0,f.useEffect)(()=>{let e=te.addCb(e=>{let{selfUid:t,actionUid:i,action:l}=e,n=t===o,r=void 0===t||void 0===o;if((n||r)&&i===a&&("follow"===l||"unFollow"===l)){var d,u;let{text:e,buttonType:t}=tt({followStatus:null===(u=C.Le.getConfig(C.gI.FollowStatusCache))||void 0===u?void 0:null===(d=u[a])||void 0===d?void 0:d.followStatus,followerStatus:s});v(e),p(t)}});return()=>{null==e||e()}},[o,a,s]),{text:c,buttonType:m,followStatus:u}};var tl=i("275963"),to={container:"Y6lNxPyh",loading:"Z3osxCIB",text:"UJjZqfuq"};function tn(e){let{className:t,text:i,textClassName:l,style:o}=e;return(0,v.jsxs)("div",{className:p()(to.container,t,"HideInLynxClassName"),style:o,children:[(0,v.jsx)("div",{className:to.loading}),i&&(0,v.jsx)("div",{className:p()(to.text,l),children:i})]})}var tr=i("874830");let ta=e=>{let t=(0,tr.n)(),{onPlayer:i}=e;return(0,f.useEffect)(()=>{t&&(null==i||i(t))},[t]),null};var td=i("128231"),tu=i.n(td),ts=i("613063"),tc=i.n(ts),tv=i("292904");i("927234"),i("179133");var tf=i("594235"),tm=i("888163");let tp=function(){let e={};return{setPreloadCache:(t,i)=>{e[t]=i},getPreloadCache:t=>{if(t in e)return e[t]}}}(),t_=new Map;var tg={COMMENT_BTN_CLICKED:"commentBtnClicked"},th={COMMENT_PRELOAD:"commentPreload"};let ty=async e=>{try{return await tf.get({key:e,defaultValue:tm.TCC_DEFAULT_VALUE_MAP.get(e)})}catch(e){return null}};async function tw(e){let t=t_.get(e);if(t)return t;let i=await ty(e);return t_.set(e,i),i}let tx=function(e,t,i,l,o){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],r=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0,d="commentPreload"===i,u=d?"commentInferenceResult":"profileInferenceResult",s=tp.getPreloadCache(u)||{};s={scene:d?"comment_preload_ml":"profile_preload_ml",model_name:l,s_result:String(t),f_result:e,threshold:o,with_feature:n.toString(),is_ad:r,vid:a},tp.setPreloadCache(u,s)},tC=()=>{let e=tp.getPreloadCache("commentInferenceResult")||{};if(e&&Object.keys(e).length>0){let t=tp.getPreloadCache("commentBtnClicked"),i=(0,Q._)((0,E._)({},e),{s_real:String(t),f_real:t?1:0});ep.logInstance.sendLog("aiPreloadResult",i)}tI()},tI=()=>{tp.setPreloadCache("commentInferenceResult",{}),tp.setPreloadCache("profileInferenceResult",{}),tp.setPreloadCache("commentBtnClicked",!1),tp.setPreloadCache("profileBtnClicked",!1)},tb=e=>{tp.setPreloadCache(e,!0)},tE=(e,t)=>{let i=e.indexOf(t);return i>-1&&e.splice(i,1),i};class tS{getValue(e){return void 0!==e?this.storage[e]:this.storage}anyValue(e,t){return new Promise(i=>{if(e in this.storage)t(this.storage[e]),i(this.storage[e]);else{let l=this.subscribe(e,e=>{l(),t(e),i(e)})}})}useValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=()=>"function"==typeof e?e(this.storage):t?t(this.storage[e]):this.storage[e],[o,n]=(0,f.useState)(l);return(0,f.useLayoutEffect)(()=>(n(l()),"function"==typeof e)?this.subscribe(()=>n(e(this.storage))):t?this.subscribe(e,e=>n(t(e))):this.subscribe(e,n),i),o}subscribe(e,t){switch(typeof e){case"string":case"number":case"symbol":return!(e in this.subscribers)&&(this.subscribers[e]=[]),this.subscribers[e].push(t),()=>{tE(this.subscribers[e],t)};default:return this.subscriberList.push(e),()=>{tE(this.subscriberList,e)}}}bootstrap(e,t){return e in this.storage&&t(this.storage[e]),this.subscribe(e,t)}dispatch(e,t){if("object"==typeof e)return Object.entries(e).forEach(e=>{let[t,i]=e;return this.dispatch(t,i)});if(this.storage[e]!==(this.storage[e]="function"==typeof t?t(this.storage[e]):t)){for(let t of this.subscriberList.slice())try{t(e,this.storage[e])}catch(e){}if(this.subscribers[e])for(let t of this.subscribers[e].slice())try{t(this.storage[e])}catch(e){}}}constructor(e={}){(0,e9._)(this,"subscribers",{}),(0,e9._)(this,"subscriberList",[]),(0,e9._)(this,"storage",void 0),this.storage=e}}let tT=(0,f.createContext)({awemeFeed:new tS({modalAwemeInfo:null,nextAwemeInfo:null,prevAwemeInfo:null,activeIndex:0}),metaCtxId:""}),tk=()=>(0,f.useContext)(tT),tL=e=>{var t;let{originAwemeInfo:i,player:l,toast:o,isActive:n,isLast:r,modalEnterFrom:a,handleNextOnLast:d,handleOuterPlayNext:u,handleOuterPlayPrev:s,handlePrev:c,handleNext:v,isInnerFeedCondition:m,scene:p}=e,[_,g]=(0,f.useState)(i),{awemeFeed:h}=tk(),y=h.useValue("prevAwemeInfo"),w=h.useValue("nextAwemeInfo"),[x,I]=(0,f.useState)((null==i?void 0:null===(t=i.logParams)||void 0===t?void 0:t.enter_from)||""),b=(0,f.useRef)({});(0,f.useEffect)(()=>{g(i)},[i,m]);let E=null!=m?m:i.awemeId!==_.awemeId,S=(0,f.useCallback)(e=>{var t,l,o,r;let{inComingAwemeInfo:d,card:u}=e;if(u){let e=C.Le.getConfig(C.gI.PlayerCardInfo);C.Le.setConfig(C.gI.PlayerCardInfo,{isActive:(null==d?void 0:d.awemeId)===(null==i?void 0:i.awemeId)||n,videoCardType:u!==e_.L.Comment?u:null==e?void 0:e.videoCardType,expandCardType:"chat"===u?null==e?void 0:e.expandCardType:u})}if((null==d?void 0:d.awemeId)!==(null==_?void 0:_.awemeId)||(null==d?void 0:null===(t=d.seriesInfo)||void 0===t?void 0:t.seriesId)!==(null==_?void 0:null===(l=_.seriesInfo)||void 0===l?void 0:l.seriesId)||(null==d?void 0:null===(o=d.authorInfo)||void 0===o?void 0:o.uid)!==(null==_?void 0:null===(r=_.authorInfo)||void 0===r?void 0:r.uid)||"im"===a)tc()(d,"logPb",(null==d?void 0:d.scrollLogPb)||(null==d?void 0:d.logPb)),g(e=>(I(t=>{var i,l,o,n,r;return(null===(i=d.logParams)||void 0===i?void 0:i.enter_from)?d.logParams.enter_from:"author_compilation_card"===t&&(null===(l=e.mixInfo)||void 0===l?void 0:l.mixId)!==(null===(o=d.mixInfo)||void 0===o?void 0:o.mixId)||"author_playlet_card"===t&&(null===(n=e.seriesInfo)||void 0===n?void 0:n.seriesId)!==(null===(r=d.seriesInfo)||void 0===r?void 0:r.seriesId)?"":t}),d)),setTimeout(()=>{eb.emit(eb.EVENT.feedVideoCardLocateCurrentVideo)})},[_,null==i?void 0:i.awemeId,l]);(0,eu.Z)(()=>{n&&eb.emit(eb.EVENT.videoChange)},[_,n]),(0,eu.Z)(()=>{n&&l&&(l.replayed=!1,p===em.lT.Recommend&&!m&&tC())},[_,n,l]);let T=(0,f.useCallback)(tu()(e=>{if(!n||es.ZP.instManager.getActiveId()!==(null==l?void 0:l.playerId))return;let t=null==e?void 0:e.from;(0,tv.Y3)(t);if(E||p===em.lT.Search){var i;let e=null===(i=C.Le.getConfig(C.gI.PlayerCardInfo))||void 0===i?void 0:i.videoCardType,n=new Map([[e_.L.Related,"该视频暂无更多相关作品"],[e_.L.Music,"该音乐暂无更多相关作品"],[e_.L.Topic,"该话题暂无更多相关作品"],[e_.L.Mix,"暂无更多作品"],[e_.L.Author,"该作者已无更多作品"],[e_.L.Comment,"暂无更多作品"],[e_.L.CollectFolder,"暂无更多作品"],[e_.L.Search,"暂无更多搜索结果"],[e_.L.Like,"暂无更多作品"],[e_.L.Collection,"暂无更多作品"],[e_.L.Record,"暂无更多作品"]]),r=new Map([[e_.L.Related,"暂时无法切换，可查看其他相关视频"],[e_.L.Music,"暂时无法切换，可查看其他音乐视频"],[e_.L.Topic,"暂时无法切换，可查看其他话题视频"],[e_.L.Mix,"暂无无法切换"],[e_.L.Author,"暂时无法切换，可查看作者的其他视频"],[e_.L.Comment,"暂无无法切换"],[e_.L.CollectFolder,"暂无无法切换"],[e_.L.Search,"暂无无法切换，请在「搜索结果」中选择"],[e_.L.Like,"暂无无法切换"],[e_.L.Collection,"暂无无法切换"],[e_.L.Record,"暂无无法切换"]]);if(w)S({inComingAwemeInfo:w,card:e}),("scroll"===t||"keyboard"===t||"auto"===t)&&eb.emit(eb.EVENT.reportPlayNext,{clickFrom:t});else if("auto"===t)l&&(l.isReplay=!0,l.replay(),l.replayed=!0);else if(null===w){let t=r.get(e);t&&o(t)}else{let t=n.get(e);t&&o(t)}}else r&&(null==d||d()),u(e),r&&(null==e?void 0:e.from)==="auto"&&l&&(l.isReplay=!0,l.replay(),l.replayed=!0);null==v||v()},400,{leading:!0,trailing:!1}),[w,l,n,d,E,r,u]),k=(0,f.useCallback)(tu()(e=>{if(!n)return;let t=null==e?void 0:e.from;if((0,tv.Y3)(t),E){var i;let e=null===(i=C.Le.getConfig(C.gI.PlayerCardInfo))||void 0===i?void 0:i.videoCardType,l=new Map([[e_.L.Related,"暂时无法切换，可查看其他相关视频"],[e_.L.Music,"暂时无法切换，可查看其他音乐视频"],[e_.L.Topic,"暂时无法切换，可查看其他话题视频"],[e_.L.Mix,"暂无无法切换"],[e_.L.Author,"暂时无法切换，可查看作者的其他视频"],[e_.L.Search,"暂无无法切换"]]);if(y)S({inComingAwemeInfo:y,card:e}),("scroll"===t||"keyboard"===t||"auto"===t)&&eb.emit(eb.EVENT.reportPlayPrev,{clickFrom:t});else if(null===y){let t=l.get(e);t&&o(t)}}else setTimeout(()=>null==s?void 0:s(e),0);null==c||c()},400,{leading:!0,trailing:!1}),[y,n,E,s]);return{awemeInfo:_,enterFrom:x,updateAwemeInfo:S,changePrevVideo:k,changeNextVideo:T,nextAwemeInfo:w,prevAwemeInfo:y,isInnerFeed:E,updateLogParams:(0,f.useCallback)(e=>{let{logParams:t}=e;b.current=t},[])}};i("950331");var tA=i("953208"),tR=i("119422"),tN=i("320028"),tP=i("774281"),tM=i("985703");let tj=e=>{var t,i;let{showRelateVideo:l=tA.TP.ShowSideCarOnly}=(null==e?void 0:null===(i=e.webRawData)||void 0===i?void 0:null===(t=i.CTR)||void 0===t?void 0:t.recommendScore)||{};return l===tA.TP.ShowSideCarOnly},tD=e=>{let{awemeInfo:t,scene:i,modalEnterFrom:l,filterData:o,currentVideoFeedRef:n,lastVideoFeedAwemeRef:r,outFeedItem:a,isInnerFeed:d,abtestData:u}=e,s=[],{normalList:c,relatedBlockedByRecommendScore:v}=(0,f.useMemo)(()=>{var e,o,u,s,c,v,f,m;let p=[e_.L.Comment],_=!1;if((null==t?void 0:t.awemeType)!==(null==eG?void 0:g.e.XgVideo)&&!(0,h.Jt)(t)&&!(0,h.gc)(t)&&p.unshift(e_.L.Author),"collection_folder"===l)p.unshift(e_.L.CollectFolder);let y=[em.lT.Recommend,em.lT.Follow,em.lT.Topic].includes(i),w=i===em.lT.Modal&&![eh.a.Im,eh.a.Search,eh.a.GeneralSearch].includes(l),x=[h.Jt,h.gc,h.Kf,tR.L,tN.A,tP.u,J.p,tM.hj,ey.o4];return(y||w)&&x.every(e=>!e(t))&&(!d||(null==a?void 0:a.awemeId)===t.awemeId&&x.every(e=>!e(a))||(null===(o=r.current)||void 0===o?void 0:null===(e=o[e_.t.Related])||void 0===e?void 0:e.awemeId)===t.awemeId||n.current===e_.t.Related)&&(tj(d?a:t)?p.push(e_.L.Related):_=!0),(null==t?void 0:null===(u=t.mixInfo)||void 0===u?void 0:u.mixId)&&!(null==t?void 0:null===(s=t.seriesInfo)||void 0===s?void 0:s.seriesId)&&p.push(e_.L.Mix),(null==t?void 0:null===(c=t.seriesInfo)||void 0===c?void 0:c.seriesId)&&p.push(e_.L.Series),(null==t?void 0:t.hotList)&&(null==t?void 0:null===(v=t.hotList)||void 0===v?void 0:v.rank)!==51&&(null==t?void 0:null===(f=t.hotList)||void 0===f?void 0:f.type)!==2&&p.push(e_.L.Hot),(null==t?void 0:t.videoAbstract)&&[2,3].includes(null==t?void 0:null===(m=t.videoAbstract)||void 0===m?void 0:m.displayType)&&(i===em.lT.Search||em.lT.Modal===i&&[eh.a.GeneralSearch,eh.a.Search].includes(l)&&!d)&&p.push(e_.L.AbstractList),{normalList:p,relatedBlockedByRecommendScore:_}},[t,l,i,n.current,a,d,r.current]);return[em.lT.Recommend,em.lT.Follow,em.lT.Friend,em.lT.Modal,em.lT.Topic,em.lT.Search].includes(i)&&(s=c),{showRelatedTabList:(0,f.useMemo)(()=>o?o(s):s,[s.join(","),o]),relatedBlockedByRecommendScore:v}};var tF={relatedSearch:"aCKfEafK",rankHot:"BSZlMINE",mix:"fRKngaPX",hot:"wvQEPUYQ",rankHotText:"VSsOxImL",hotText:"HF51J7Lo",relatedSearchText:"f2N6jiUl",mixText:"r1JYusP8"};let tV=(e,t)=>{var i;let{needFoldText:l=!1}=t||{},o=null==e?void 0:null===(i=e.suggestWords)||void 0===i?void 0:i.find(e=>e.scene===tA.gQ.FeedBottomRec);if(o){let{words:e=[],hintText:t}=o,i=(null==e?void 0:e.length)||0;return e.map((e,o)=>{let{word:n}=e;return n?{index:o,type:em.WZ.RelatedSearch,title:l?`${t}`:`${t}：${n}`,word:n,hintText:t,searchWord:e,wordsNum:i,itemClassName:p()(tF.relatedSearch),textClassName:p()(tF.relatedSearchText)}:null})}return[]},tO=e=>{var t,i;let{useCTR:l,awemeInfo:o,scene:n,showRelatedTabList:r,isActive:a,abtestData:d,recommendScore:u={}}=e,{showHot:s,showMix:c,showRelateSearch:v}=u||{};return[{isShow:(!l||(null==d?void 0:d.searchUseCtr)!==1||c)&&(null==o?void 0:null===(t=o.seriesInfo)||void 0===t?void 0:t.seriesId),cardTab:e_.L.Series,feedBarTag:em.WZ.Series},{isShow:!l||c,cardTab:e_.L.Mix,feedBarTag:em.WZ.Mix},{isShow:!l||s,cardTab:e_.L.Hot,feedBarTag:em.WZ.Hot},{isShow:(!l||(null==d?void 0:d.searchUseCtr)!==1||v)&&(null===(i=tV(o))||void 0===i?void 0:i.length),feedBarTag:em.WZ.RelatedSearch}].filter(e=>{let{cardTab:t,feedBarTag:i,isShow:l}=e;return l&&(r.includes(t)||i===em.WZ.RelatedSearch)}).map(e=>{let{feedBarTag:t}=e;return t})},tB=e=>{var t,i,l;let{clickedCard:o,showRelatedTabList:n,awemeInfo:r,scene:a,isActive:d,abtestData:u}=e||{},s=(null==r?void 0:null===(i=r.webRawData)||void 0===i?void 0:null===(t=i.CTR)||void 0===t?void 0:t.recommendScore)||{},{showRelateSearch:c}=a===em.lT.Friend?{showRelateSearch:!0}:s,v={defaultCard:o||e_.L.Author,videoTag:[]};return a===em.lT.Recommend?r.awemeType===g.e.XgVideo?v.defaultCard=e_.L.Related:v.videoTag=tO({useCTR:!0,awemeInfo:r,scene:a,showRelatedTabList:n,isActive:d,abtestData:u,recommendScore:s}):r.awemeType===g.e.XgVideo?v.defaultCard=e_.L.Related:r.awemeType===g.e.Normal?v.videoTag=tO({useCTR:!0,awemeInfo:r,scene:a,showRelatedTabList:n,isActive:d,abtestData:u,recommendScore:s}):r.awemeType===g.e.Note&&!((null==u?void 0:u.searchUseCtr)===1&&!c)&&(null===(l=tV(r))||void 0===l?void 0:l.length)&&(v.videoTag=[em.WZ.RelatedSearch]),v},tU=e=>{let{clickedCard:t,showRelatedTabList:i,awemeInfo:l,scene:o,isActive:n,abtestData:r}=e||{},a={defaultCard:t||e_.L.Author,videoTag:[]};if(o===em.lT.Recommend)![g.e.XgVideo].includes(l.awemeType)&&(a.videoTag=tO({useCTR:!1,awemeInfo:l,scene:o,showRelatedTabList:i,isActive:n,abtestData:r}));else if(l.awemeType===g.e.Normal)a.videoTag=tO({useCTR:!1,awemeInfo:l,scene:o,showRelatedTabList:i,isActive:n,abtestData:r});else if(l.awemeType===g.e.Note){var d;(null===(d=tV(l))||void 0===d?void 0:d.length)&&(a.videoTag=[em.WZ.RelatedSearch])}return a},tH=e=>{let{awemeInfo:t,showRelatedTabList:i=[],clickedCard:l,isActive:o,useCTR:n=!0,scene:r,abtestData:a}=e;(0,f.useEffect)(()=>{let e=C.Le.getConfig(C.gI.PlayerCardInfo);return l&&C.Le.setConfig(C.gI.PlayerCardInfo,{isActive:o,videoCardType:l!==e_.L.Comment?l:null==e?void 0:e.videoCardType,expandCardType:l}),()=>{C.Le.setConfig(C.gI.PlayerCardInfo,null)}},[]);let d={defaultCard:l||e_.L.Author,videoTag:[]},u=(0,f.useMemo)(()=>n?tB({showRelatedTabList:i,awemeInfo:t,clickedCard:l,scene:r,isActive:o,abtestData:a}):tU({showRelatedTabList:i,awemeInfo:t,clickedCard:l,scene:r,isActive:o,abtestData:a}),[t,i,n,l,r,o,a]);return t?l?{defaultCard:l,videoTag:u.videoTag}:u:d},tW=e=>{let{isShow:t,player:i,isActive:l,awemeInfo:o,abtestData:n}=e,r=(0,f.useRef)(!1),a=(0,f.useRef)(()=>{});a.current=(0,f.useCallback)(()=>{r.current&&(setTimeout(()=>{eb.emit(eb.EVENT.videoRemoveStopPlayNext)}),r.current=!1)},[i]);let d=(0,eJ.Z)(()=>{i&&l&&i.duration-i.currentTime>0&&i.duration-i.currentTime<=5&&!r.current&&t&&(null==o?void 0:o.awemeType)!==g.e.Note&&(eb.emit(eb.EVENT.videoStopPlayNext),r.current=!0,i.once(ev.Events.ENDED,a.current))});return(0,f.useEffect)(()=>{if(t)return()=>{a.current()}},[t]),(0,f.useEffect)(()=>{if(o)return()=>{a.current()}},[o]),{stopAutoPlay:d}};var tz=i("182891"),tG=i("798644");let tZ=e=>({[e_.L.Author]:e_.t.Author,[e_.L.Mix]:e_.t.Mix,[e_.L.Series]:e_.t.Series,[e_.L.Search]:e_.t.Search,[e_.L.CollectFolder]:e_.t.CollectFolder,[e_.L.Collection]:e_.t.Collection,[e_.L.Hot]:e_.t.Hot,[e_.L.Related]:e_.t.Related,[e_.L.Search]:e_.t.Search,[e_.L.Record]:e_.t.Record,[e_.L.Like]:e_.t.Like})[e],tq=e=>({[e_.t.Author]:e_.L.Author,[e_.t.Mix]:e_.L.Mix,[e_.t.Series]:e_.L.Series,[e_.t.Search]:e_.L.Search,[e_.t.CollectFolder]:e_.L.CollectFolder,[e_.t.Collection]:e_.L.Collection,[e_.t.Hot]:e_.L.Hot,[e_.t.Related]:e_.L.Related,[e_.t.Like]:e_.L.Like,[e_.t.Record]:e_.L.Record})[e],tK=e=>{let{defaultTab:t,isActive:i,stopAutoPlay:l,awemeInfo:o}=e,{awemeFeed:n}=tk(),[r,a]=(0,f.useState)(t),[d,u]=(0,f.useState)(tZ(r)),[s,c]=(0,f.useState)(()=>{if(tZ(r))return{[tZ(r)]:o}}),v=(0,f.useRef)(t),m=(0,f.useRef)(!1);v.current=r;let p=(0,f.useCallback)(e=>{let{tab:t,from:i}=e;if(n.dispatch("cardType",t),void 0!==tZ(t)&&n.dispatch("feedType",t),a(e=>{var o;return null===(o=C.Le.getConfig(C.gI.IsInLookMiniModal))||void 0===o||o.isInMiniModal,e!==t&&"auto"!==i&&(null==l||l()),t}),t!==e_.L.Comment&&eb.emit(eb.EVENT.changeTab,t),t){let e=C.Le.getConfig(C.gI.PlayerCardInfo);C.Le.setConfig(C.gI.PlayerCardInfo,{isActive:!0,videoCardType:t!==e_.L.Comment?t:null==e?void 0:e.videoCardType,expandCardType:t})}},[l]);return(0,f.useEffect)(()=>{i&&t&&a(t)},[i]),(0,f.useEffect)(()=>{r&&u(e=>{if(r===e_.L.Comment)return c(t=>(0,Q._)((0,E._)({},t),{[e]:o})),e;let t=tZ(r);return t!==e?t:(c(t=>(0,Q._)((0,E._)({},t),{[e]:o})),e)})},[r,o]),(0,f.useEffect)(()=>{var e;let t=null===(e=C.Le.getConfig(C.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal;t&&(m.current=t),i&&C.Le.setConfig(C.gI.IsInMixCard,!1)},[r,i]),{curTab:r,changeTab:p,curVideoFeed:tZ(r)||d,lastVideoFeedAweme:s}},t$=e=>{let{awemeInfo:t,onAwemeInfoChange:i}=e;(0,f.useEffect)(()=>{var e;(null===(e=C.Le.getConfig(C.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)&&eb.emit(eb.EVENT.livePause)},[]),(0,f.useEffect)(()=>{null==i||i({awemeInfo:t})},[t])},tY=e=>{let{curTab:t,awemeInfo:i,isActive:l,abtestData:o,modalAwemeInfo:n}=e,{setSlideVideoTab:r}=(0,f.useContext)(ee.C);(0,f.useEffect)(()=>{l&&(null==r||r(t))},[t,l,null==n?void 0:n.awemeId])},tQ=e=>{let{onChangeAwemeInfo:t}=e,i=(0,eJ.Z)(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e_.L.Author;return t({inComingAwemeInfo:e,card:i})});return{handleAuthorVideoChange:i,handleOtherVideoChange:(0,f.useCallback)(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e_.L.Related;t({inComingAwemeInfo:e,card:i})},[t])}};var tX=i("368200"),tJ=i("894621");let t0="",t1=null,t2=e=>{var t;let{awemeInfo:i,enablePreload:l,player:o}=e,[n,r]=(0,f.useState)((null==i?void 0:null===(t=i.stats)||void 0===t?void 0:t.commentCount)||0);(0,f.useEffect)(()=>{var e;r((null==i?void 0:null===(e=i.stats)||void 0===e?void 0:e.commentCount)||0)},[i]);let a=(0,f.useCallback)(async function(e,t,l,o,n,r){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=null==i?void 0:i.awemeId,u=`${d}-0-${t}-${e}-${n}-${l}`;if(t0===u&&t1)return t1;let s=await (0,tJ.iq)({awemeId:null==i?void 0:i.awemeId,cursor:e,count:t,itemType:(null==i?void 0:i.awemeType)===g.e.XgVideo?1:0,fetchType:l,cancleFunc:o,cid:n,whaleCutToken:r});return a&&s&&(t0=u,t1=s),s},[null==i?void 0:i.awemeId]),d=(0,f.useCallback)((e,t,l,o)=>(0,tJ.rs)({awemeId:null==i?void 0:i.awemeId,commentId:e,cursor:t,count:l,itemType:(null==i?void 0:i.awemeType)===g.e.XgVideo?1:0,whaleCutToken:o}),[null==i?void 0:i.awemeId]),u=(0,f.useCallback)(function(){let{cursor:e=0,count:t,needPage:l=!0,ctx:o=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,tJ.Yp)({cursor:e,count:t,needPage:l,ctx:o,groupId:null==i?void 0:i.awemeId})},[null==i?void 0:i.awemeId]),s=(0,f.useCallback)(function(){let{cid:e,diggType:t,level:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,tJ.y6)({awemeId:null==i?void 0:i.awemeId,cid:e,diggType:t,itemType:(null==i?void 0:i.awemeType)===g.e.XgVideo?1:0,level:l})},[null==i?void 0:i.awemeId]),c=(0,f.useCallback)(function(){let{cid:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,tJ.YF)({cid:e})},[]);return{globalCommentCount:n,updateGlobalCommentCount:r,fetchComment:a,fetchReply:d,fetchCommentMention:u,publishCommentItem:(0,f.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var{text:t,textExtra:l,replyId:n,replyToReplyId:r,commentSendCelltime:a,commentVideoCelltime:d}=e,u=(0,tX._)(e,["text","textExtra","replyId","replyToReplyId","commentSendCelltime","commentVideoCelltime"]);let s=await (0,tJ.uo)((0,E._)({awemeId:null==i?void 0:i.awemeId,text:t,textExtra:l,replyId:n,replyToReplyId:r,commentVideoCelltime:d,commentSendCelltime:a},u));return!s.statusCode&&(eb.emit(eb.EVENT.showClientDownloadGuide,{isShow:!0,type:"comment",text:"及时接收互动消息通知"}),null==o||o.emit(ev.Events.USER_ACTION,{action:"comment"})),s},[null==i?void 0:i.awemeId,o]),deleteCommentItem:c,diggCommentItem:s}};var t3=i("848625"),t6=i("132607");let t5=(a=0,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];try{window.location.search.indexOf("pylon-debug")}catch(e){}}),t4=[t6.CommentAIPreloadStatus.CommentPreloadHighThreshold,t6.CommentAIPreloadStatus.CommentPreloadLowThreshold,t6.CommentAIPreloadStatus.CommentPreloadAll],t8=e=>{let{isModal:t,awemeInfo:l,isActive:o,fetchComment:n,player:r,commentpreloadAbStatus:a,adCommentpreloadAbStatus:d,scene:u,showSideCard:s,abtestData:c,abUseSimpleNN:v,abVid:f}=e;(0,t3.b)(async()=>{if(!!(t4.includes(a)&&u===em.lT.Recommend&&!1===t&&!0===o&&(null==r?void 0:r.currentTime)>=0&&!1===s)&&((null==l?void 0:l.isAds)!==!0||!![t6.AdCommentAIPreloadStatus.AdCommentPreloadHighThreshold,t6.AdCommentAIPreloadStatus.AdCommentPreloadLowThreshold].includes(d))&&"undefined"!=typeof WebAssembly)try{let e=()=>{let e=(null==c?void 0:c.commentRenderOptimize)===2?10:20;n(0,e,"user",{current:null},"",void 0,!0)},t=!(null==l?void 0:l.isAds)&&v,{Pylon:o,EScene:u,EBiz:s}=await i.e("74770").then(i.bind(i,198991)),m=new o({biz:s.DOUYIN_WEB_RECOMMEND}),p=a===t6.CommentAIPreloadStatus.CommentPreloadHighThreshold?tm.TccKey.CommentPreloadHighThreshold:tm.TccKey.CommentPreloadLowThreshold;d===t6.AdCommentAIPreloadStatus.AdCommentPreloadHighThreshold?p=tm.TccKey.AdCommentPreloadHighThreshold:d===t6.AdCommentAIPreloadStatus.AdCommentPreloadLowThreshold&&(p=tm.TccKey.AdCommentPreloadLowThreshold),t&&(p=tm.TccKey.clientAIOptimizeConfig);let _=await tw(p),g=m.createStrategyEngine({abConfig:_,scene:u.COMMENT});g.setThresholdCallback(async()=>{var i,o,n,a,d,s,c,v;if(tp.getPreloadCache(tg.COMMENT_BTN_CLICKED))return;let{package:p="",engine_config:h={}}=null!==(c=_.preload_ml)&&void 0!==c?c:{},y=await m.createEngine({scene:u.COMMENT,modelUrl:p,inputs:null==h?void 0:h.inputs,outputs:null==h?void 0:h.outputs,runTime:t?"simplenn":"bytenn"}),w=1e3*((null==r?void 0:r.currentTime)||0),x=y.inference({features:{videoPlayTime:w}}),C=g.hitThresholdValue(x),I=null==_?void 0:null===(i=_.preload_ml)||void 0===i?void 0:i.package,b=null==_?void 0:null===(d=_.preload_ml)||void 0===d?void 0:null===(a=d.output)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:null===(o=n.args)||void 0===o?void 0:o[0],E=null!==(v=y.getFeatureVector({features:{scene:u.COMMENT,videoPlayTime:w}}))&&void 0!==v?v:[];if(tx(x,C,th.COMMENT_PRELOAD,I,b,E,0,f),t5("comment-ret:",x,",hit:",C,", nickname:",null==l?void 0:null===(s=l.authorInfo)||void 0===s?void 0:s.nickname,", playTime: ",w),C){e();return}})}catch(e){t5("comment inference error: ",e)}},[o,r])};var t7=i("338478"),t9=i("590682"),ie=i("742740"),it=i("907170");let ii=(e,t,i)=>{if(["douyin_dcd_model","douyin_disease","xiaohe_disease","baikemy_disease","medicines_baikemy"].includes(i)||!e)return"search_related_card";switch(e){case"user":return"author_card";case"mix":var l;return(null==t?void 0:null===(l=t.seriesInfo)||void 0===l?void 0:l.seriesId)?"playlet_card":"compilation_card";case"hot":return"hot_card";default:return"general_search"}};var il=i("922267");let io=e=>{let{awemeInfo:t,logParams:i={},originAwemeInfo:l,tagId:o,expandCard:n,curCard:r="",isInnerFeedCondition:a=!1,searchSideCardProps:d,modalEnterFrom:u}=e,s=(0,f.useRef)(i),c=(0,f.useMemo)(()=>{var e,i,l;return null!==(l=null===(i=C.Le.getConfig(C.gI.UnLookVideos))||void 0===i?void 0:null===(e=i[null==t?void 0:t.awemeId])||void 0===e?void 0:e.status)&&void 0!==l?l:""},[t]);return(0,f.useEffect)(()=>{var e,v,f,m,p,_,y,x,I,b,S,T,k,L,A,R,N,P,M,D,F,V,O,B,U,H,W,z,G,Z;let q=null==i?void 0:i.enter_from,K="";""!==r&&(K=r===n&&"comment"!==r?"1":"0");let $={};if((0,t7.n)(t)){let e=(null==t?void 0:null===(U=t.anchorInfo)||void 0===U?void 0:null===(B=U.extra)||void 0===B?void 0:B[0])||{};$={anchor_product_comment_cnt:e.comment_count,anchor_product_category_id:e.front_category_id,anchor_product_price:e.price,anchor_product_sales:e.sales}}let Y=(0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)({enter_from:null!==(H=i.enter_from)&&void 0!==H?H:(0,ie.yW)(),web_rid:null==t?void 0:null===(f=t.authorInfo)||void 0===f?void 0:null===(v=f.roomData)||void 0===v?void 0:null===(e=v.owner)||void 0===e?void 0:e.web_rid},i),{is_card_expand:K,from_group_id:null!==(W=i.from_group_id)&&void 0!==W?W:null==l?void 0:l.awemeId,music_id:null==t?void 0:null===(m=t.music)||void 0===m?void 0:m.mid,compilation_id:null==t?void 0:null===(p=t.mixInfo)||void 0===p?void 0:p.mixId,tag_id:o,from_xigua:(null==t?void 0:t.awemeType)===g.e.XgVideo?1:0,insert_task_id:(null==t?void 0:t.libfinsertTaskId)||"0",enter_from_merge:null!==(z=i.enter_from_merge)&&void 0!==z?z:(0,ie.yW)(),search_params:null==t?void 0:t.searchLogParams,from_video_id:C.Le.getConfig(C.gI.PageEnterFromVideoID),is_seen:u===eh.a.FollowAuthorModal&&""===c?1:c,is_update:(null===(_=C.Le.getConfig(C.gI.UnLookVideos))||void 0===_?void 0:_[null==t?void 0:t.awemeId])?1:0,post_time:(0,it.MH)(1e3*t.createTime),is_from_skylight:null!==(G=null==i?void 0:i.is_from_skylight)&&void 0!==G?G:0}),(0,eT.t)()),{is_co_publish:(null==t?void 0:null===(x=t.cooperationInfo)||void 0===x?void 0:null===(y=x.cooperationCreators)||void 0===y?void 0:y.length)>1?1:0,co_publish_author_list:null==t?void 0:null===(S=t.cooperationInfo)||void 0===S?void 0:null===(b=S.cooperationCreators)||void 0===b?void 0:null===(I=b.filter(e=>e.roleId!==eG.CooperationRoleId.Author))||void 0===I?void 0:I.map(e=>`${e.uid}_${null==e?void 0:e.roleId}`),cid:null===(T=(0,h.Rx)(t))||void 0===T?void 0:T.creative_id,if_qianchuan_ad:(0,h.nT)(t)===w.Z9.Live||(0,h.nT)(t)===w.Z9.ShopVideo?1:0,ad_type:(0,h.nT)(t),brand_ad_type:t9.AD_LOG_MAP[null==t?void 0:null===(L=t.webRawData)||void 0===L?void 0:null===(k=L.brandAd)||void 0===k?void 0:k.brand_type]}),(null==t?void 0:t.logParams)||{},$),{playlet_id:null==t?void 0:null===(A=t.seriesInfo)||void 0===A?void 0:A.seriesId,is_trailer:(null==t?void 0:null===(N=t.chargeInfo)||void 0===N?void 0:null===(R=N.preview_config)||void 0===R?void 0:R.is_preview)?1:0,module:decodeURIComponent((0,j.Rs)("module")||""),payment_status:(0,il.wQ)(t),episode_rank:(null==t?void 0:null===(P=t.seriesInfo)||void 0===P?void 0:P.currentEpisode)||(null==t?void 0:null===(M=t.mixInfo)||void 0===M?void 0:M.currentEpisode)||0,episode_id:String((null==t?void 0:null===(D=t.seriesInfo)||void 0===D?void 0:D.currentEpisode)||(null==t?void 0:null===(F=t.mixInfo)||void 0===F?void 0:F.currentEpisode)||0),is_charge_content:(null==t?void 0:null===(V=t.chargeInfo)||void 0===V?void 0:V.is_charge_content)?1:0,is_hard_ad:(0,h.Jt)(t)?(0,h.Gu)(t)?1:0:void 0}),X=[e_.L.Author,e_.L.Hot,e_.L.Mix,e_.L.Music,e_.L.Related,e_.L.Topic,e_.L.AwemeRelated,e_.L.Search,e_.L.History,e_.L.Like,e_.L.CollectFolder,e_.L.Collection,e_.L.Handpick];if(null!=a?a:(null==l?void 0:l.awemeId)!==(null==t?void 0:t.awemeId)){if(X.includes(r))q=r;else{if(r===e_.L.Comment){let e=C.Le.getConfig(C.gI.PlayerCardInfo),t=C.Le.getConfig(C.gI.CurLookCard);q=(null==t?void 0:t.curCard)?null==t?void 0:t.curCard:(null==e?void 0:e.isActive)&&(null==e?void 0:e.videoCardType)?null==e?void 0:e.videoCardType:null==i?void 0:i.enter_from}s.current=(0,E._)({},Y)}}(null==d?void 0:d.scene)&&(null==l?void 0:l.awemeId)!==(null==t?void 0:t.awemeId)&&!a&&(q=ii(null==d?void 0:d.scene,t,null==i?void 0:null===(Z=i.search_params)||void 0===Z?void 0:Z.token_type),C.Le.setConfig(C.gI.PlayerCardInfo,{videoCardType:q,expandCardType:q,isActive:!0})),(null==t?void 0:null===(O=t.logParams)||void 0===O?void 0:O.enter_from)?s.current=(0,Q._)((0,E._)({},Y),{enter_from:t.logParams.enter_from}):q?s.current=(0,Q._)((0,E._)({},Y),{enter_from:q}):s.current=(0,E._)({},Y)},[i,r,n,t,l,o,c,a]),{reportParams:s.current}},ir=e=>{let{isActive:t,player:i,showSideCard:l}=e,[o,n]=(0,f.useState)(!1),r=(0,f.useRef)(!1);return(0,f.useEffect)(()=>{var e;let o;r.current?t&&l&&n(!0):o=setTimeout(()=>{t&&l&&n(!0)},3e3);let a=()=>{r.current=!0,clearTimeout(o),l&&n(!0)};return null==i||null===(e=i.on)||void 0===e||e.call(i,ev.Events.CANPLAY,a),()=>{var e;null==i||null===(e=i.off)||void 0===e||e.call(i,ev.Events.CANPLAY,a),clearTimeout(o)}},[i,t,l]),{hasRelatedCardShown:o}};var ia=i("594649"),id=i("490377"),iu=i("860805"),is=i("684767");let ic=e=>{let{awemeInfo:t,userInfo:i,onOpenCard:l,isActive:o,onCloseAdCard:n,abtestData:r,toast:a,isFirst:d,isUpperFeed:u,changeSplashAdStatus:s}=e,c=(0,f.useRef)(tm.TCC_DEFAULT_VALUE_MAP.get(tm.TccKey.AdConfig)),[v,m]=(0,f.useState)(!1),p=(0,f.useRef)(!1),_=(0,f.useRef)(!1);(0,f.useEffect)(()=>{p.current=!1,_.current=!1,m(!1)},[t]),(0,f.useEffect)(()=>{let e=!1;return(async()=>{let t=await tf.get({key:tm.TccKey.AdConfig,defaultValue:tm.TCC_DEFAULT_VALUE_MAP.get(tm.TccKey.AdConfig)});!e&&(c.current=t)})(),()=>{e=!0}},[]);let g=(0,f.useCallback)(e=>{let{from:t}=e||{};"closeIcon"===t&&(p.current=!0),_.current&&(_.current=!1,eb.emit(eb.EVENT.videoRemoveStopPlayNext,{openSideCard:!0})),m(!1),null==n||n()},[n]),y=(0,f.useCallback)(e=>{var o,n,r,d;let{from:u}=e||{},s=(0,h.Rx)(t),v=(0,h.BD)(t);if("automatic"!==u&&!_.current&&(_.current=!0,eb.emit(eb.EVENT.videoStopPlayNext,{openSideCard:!0})),"keyboard"===u&&(0,ia.E)("realtime_click",{tag:(0,iu.f)(),value:null==s?void 0:s.creative_id,log_extra:null==s?void 0:s.log_extra,refer:"enter"}),(0,ey.o4)(t))return;if((0,tM.hj)(t)){if(eb.emit(eb.EVENT.videoPause),(null==v?void 0:null===(n=v.lynx_raw_data)||void 0===n?void 0:n.open_url)||(null==s?void 0:s.open_url)){let e=(0,tM.at)({rawAdData:s,extraParams:{enter_from_merge:"web_homepage_hot",enter_method:"web_video_commercialize",action_type:"click",group_id:t.awemeId,request_id:t.logPb}});window.open(e,(0,is.f)()?"_self":"_blank")}else a?a("广告链接获取失败，请跳过"):M.F.info("广告链接获取失败，请跳过"),(0,ia.E)("load_failed",{tag:(0,iu.f)(),value:s.creative_id,log_extra:s.log_extra});return}if((0,tR.L)(t)||(0,tP.u)(t)){(null==v?void 0:null===(r=v.lynx_raw_data)||void 0===r?void 0:r.web_url)?(m(!0),null==l||l({isAuto:"automatic"===u}),(0,ia.E)("detail_show",{tag:"landing_ad",value:s.creative_id,log_extra:s.log_extra})):(a?a("广告链接获取失败，请跳过"):M.F.info("广告链接获取失败，请跳过"),(0,ia.E)("load_failed",{tag:(0,iu.f)(),value:null==s?void 0:s.creative_id,log_extra:null==s?void 0:s.log_extra}));return}let f=!1;if(null==v?void 0:null===(o=v.lynx_raw_data)||void 0===o?void 0:o.web_url){if(!(null===(d=c.current)||void 0===d?void 0:d.openInSidebarCondition.siteTypes.includes(s.site_type))||(0,U.DT)()){if("automatic"!==u){let e=(0,id.J2)({awemeInfo:t,userInfo:i});f=!0,window.open(e,(0,is.f)()?"_self":"_blank")}}else m(!0),f=!0,null==l||l({isAuto:"automatic"===u})}else a?a("广告链接获取失败，请跳过"):M.F.info("广告链接获取失败，请跳过"),(0,ia.E)("load_failed",{tag:(0,iu.f)(),value:null==s?void 0:s.creative_id,log_extra:null==s?void 0:s.log_extra});f&&(0,ia.E)("detail_show",{tag:"landing_ad",value:s.creative_id,log_extra:s.log_extra})},[t,i,l,r]);return(0,eg.o)(()=>eb.listen(eb.EVENT.openAdSideCard,e=>{if(o){(null==e?void 0:e.from)==="automatic"&&p.current||y({from:null==e?void 0:e.from});let i=(0,h.Rx)(t);(null==e?void 0:e.from)==="keyboard"&&(0,ia.E)("slide",{tag:(0,iu.f)(),value:i.creative_id,log_extra:i.log_extra})}}),[o,y,t]),(0,f.useEffect)(()=>{d&&!u&&o&&(null==s||s((0,J.p)(t)?w.QB.Fullscreen:w.QB.Normal))},[]),(0,f.useEffect)(()=>{o?(!d&&(null==s||s(w.QB.Normal)),_.current=!1):m(!1)},[o]),{closeAdCard:g,openAdCard:y,isShowAdCard:v,isAdAweme:(0,h.Jt)(t)}},iv=e=>{let{awemeInfo:t,isActive:i,abtestData:l,toast:o,isLogin:n,onLoginSuccess:r,accountParentEl:a,onOpenCard:d}=e,[u,s]=(0,f.useState)(!1),[c,v]=(0,f.useState)(!1),[m,p]=(0,f.useState)(""),_=e=>{let{from:t}=e;s(!0)};return(0,eg.o)(()=>{let e=eb.listen(eb.EVENT.openAiCard,e=>{if((null==e?void 0:e.awemeId)===(null==t?void 0:t.awemeId)&&!!i)if(n)u();else{var l,o;(0,e3.ZP)({success:async()=>{null==r||r(),u()},headerText:"登录后即可使用 AI 抖音",enterMethod:"ai_search_card_click",next:`https://${null===(o=window)||void 0===o?void 0:null===(l=o.location)||void 0===l?void 0:l.host}`},a)}function u(){p(null==e?void 0:e.word),d(),_({from:null==e?void 0:e.from})}}),l=eb.listen(eb.EVENT.renderAiCard,e=>{if((null==e?void 0:e.awemeId)===(null==t?void 0:t.awemeId)&&!!i)v(!0)});return()=>{e(),l()}},[i,_,t,n,r,a,d]),(0,f.useEffect)(()=>{!i&&s(!1)},[i]),{isShowAiSearchCard:u,closeAiSearchCard:()=>{s(!1)},word:m,renderAiSearchSideCard:c}};var im=i("175018"),ip=i("607412");let i_=e=>{let{isActive:t,onOpenCard:i,isLogin:l,accountParentEl:o,awemeInfo:n,onLoginSuccess:r,onCloseCard:a,abtestData:d,toast:u}=e,[s,c]=(0,f.useState)(!1),v=(0,f.useRef)(!1),m=(0,f.useMemo)(()=>(0,ey.o4)(n),[n]),p=(0,f.useMemo)(()=>(0,h.Rx)(n),[n]),[_,g]=(0,f.useState)(!1),y=(0,f.useRef)(!1),w=(0,f.useRef)(!0),x=(0,f.useCallback)(e=>{let{from:t}=e||{};g("automatic"===t),!y.current&&"automatic"!==t&&(y.current=!0,eb.emit(eb.EVENT.videoStopPlayNext,{openSideCard:!0}));let n=()=>{c(!0),(0,ip.B1)({tag:"ecom_load_start"}),null==i||i(),m&&(0,ia.E)("detail_show",{tag:"landing_ad",value:p.creative_id,log_extra:p.log_extra})};if(l)n();else{var a,d;(0,e3.ZP)({success:async()=>{null==r||r(),n()},headerText:"登录后即可查看商品详情",enterMethod:"product_entrance_click",next:`https://${null===(d=window)||void 0===d?void 0:null===(a=d.location)||void 0===a?void 0:a.host}`},o)}},[c,l,o,i,p,m]);(0,eg.o)(()=>{let e=eb.listen(eb.EVENT.openAdSideCard,e=>{let i=(null==e?void 0:e.from)!=="automatic"||!v.current;if(t&&m&&i){var l,o;let t=null==p?void 0:null===(l=p.lynx_components)||void 0===l?void 0:l.find(e=>(null==e?void 0:e.lynx_type)===t9.AD_FEED_TYPE);if(!(null==t?void 0:null===(o=t.lynx_raw_data)||void 0===o?void 0:o.open_url)&&!(null==p?void 0:p.open_url)&&(0,h.Gu)(n)){u?u("广告链接获取失败，请跳过"):im.F.info("广告链接获取失败，请跳过"),(0,ia.E)("load_failed",{tag:(0,iu.f)(),value:p.creative_id,log_extra:p.log_extra});return}x({from:null==e?void 0:e.from}),(null==e?void 0:e.from)==="automatic"&&(0,ia.E)("realtime_click",{tag:(0,iu.f)(),value:null==p?void 0:p.creative_id,log_extra:null==p?void 0:p.log_extra,refer:"enter"})}});return()=>e()},[t,n,l,x,p,m]);let C=(0,f.useCallback)(e=>{let{action:t}=e||{};"manual"===t&&(v.current=!0),c(!1),w.current=!1,y.current&&(y.current=!1,eb.emit(eb.EVENT.videoRemoveStopPlayNext,{openSideCard:!0})),m&&(0,ia.E)("close",{tag:(0,iu.f)(),value:p.creative_id,log_extra:p.log_extra,content:"ad_detail"}),null==a||a()},[c,m,p,a]);return(0,f.useEffect)(()=>{!t&&s&&C()},[t]),(0,f.useEffect)(()=>{!(0,t7.n)(n)&&s&&C()},[n]),{isShowShopDetailSideCard:s,isAutoOpen:_,closeShopDetailCard:C,openShopDetailCard:x,isFirstLoad:w.current}},ig=e=>{let{showSideCard:t,isActive:i,originAwemeInfo:l,showRelatedTabList:o,slideVideoTab:n,changeTab:r,isUpperFeed:a,defaultLandingTab:d,handleShowSidebar:u,logParams:s,searchFrom:c}=e,v=(0,f.useRef)(!d),m=(0,f.useRef)(!1),p=(0,f.useMemo)(()=>{if(i){if(t){var e;return(null==o?void 0:null===(e=o.includes)||void 0===e?void 0:e.call(o,n))?n:o[0]}if(d)return o[0]}},[i,t,d,o[0],o[1],o[2],o[3],o[4]]);return(0,eg.o)(()=>{!m.current&&!(0,h.Jt)(l)&&i&&p&&!a&&!v.current&&d&&(setTimeout(()=>{if(u(!0,{from:"auto"}),r({tab:d,from:"auto"}),d===e_.L.AbstractList){var e;ep.logInstance.sendLog("enterVideoCardTab",{type:d,enter_method:"video_abstract_text"===c?"click_video_abstract":"click_card_entrance",enter_from_merge:(0,eI.vM)(),enter_from:null!==(e=null==s?void 0:s.enter_from)&&void 0!==e?e:(0,eI.mo)(),tab_name:(null==s?void 0:s.tab_name)||(0,eA.zD)(),module_name:null==s?void 0:s.module_name})}}),v.current=!0)},[p,l,i,s,c]),{openSpecificTab:(0,f.useCallback)(e=>{m.current=!0,u(!0),r({tab:e});let t=setTimeout(()=>{m.current=!1,clearTimeout(t)},3e3)},[u,r])}};i("311137"),i("284961");let ih=e=>{var t,i,l,o,n,r,a,d,u,s,c,v,f,m;let p=null!==(d=null==e?void 0:null===(t=e.hotList)||void 0===t?void 0:t.schema)&&void 0!==d?d:"",_=NaN,g="";return p&&(_=p.startsWith("aweme://")?Number(/\"board_type\":([\w|_]*)&/.exec(p)):Number(null===(u=/board_type=([\w|_]*)&/.exec(p))||void 0===u?void 0:u[1]),g=null!==(m=p.startsWith("aweme://")?null===(v=/\"board_sub_type\":([\w|_\"]*)\,/.exec(p))||void 0===v?void 0:null===(c=v[1])||void 0===c?void 0:null===(s=c.replaceAll)||void 0===s?void 0:s.call(c,'"',""):null===(f=/board_sub_type=([\w|_]*)&/.exec(p))||void 0===f?void 0:f[1])&&void 0!==m?m:""),{boardType:_,boardSubType:g,sentence:(null==e?void 0:null===(i=e.hotList)||void 0===i?void 0:i.sentence)||"",sentenceId:(null==e?void 0:null===(l=e.hotList)||void 0===l?void 0:l.sentenceId)||"",footer:null==e?void 0:null===(o=e.hotList)||void 0===o?void 0:o.footer,rank:null==e?void 0:null===(n=e.hotList)||void 0===n?void 0:n.rank,type:null==e?void 0:null===(r=e.hotList)||void 0===r?void 0:r.type,hotName:null==e?void 0:null===(a=e.hotList)||void 0===a?void 0:a.header}},iy=e=>{let{awemeInfo:t}=e,[i,l]=(0,f.useState)(ih(t));return(0,f.useEffect)(()=>{l(ih(t))},[t]),{hotData:i}},iw=e=>{let{player:t,isActive:i,isNext:l,showSideCard:o,abtestData:n}=e,[r,a]=(0,f.useState)(!1),d=(0,f.useRef)(!1);return(0,f.useEffect)(()=>{if(o){if(i&&t){if(t.isPlaying)a(!0),d.current=!0;else{let e=setTimeout(()=>{a(!0),d.current=!0},3e3),i=()=>{clearTimeout(e),a(!0),d.current=!0};return t.once(ev.Events.AUTOPLAY_STARTED,i),()=>{t.off(ev.Events.AUTOPLAY_STARTED,i),clearTimeout(e)}}}else!i&&r?a(!1):!r&&a(!0)}},[t,i,n,o]),r},ix=e=>{let{scene:t,originAwemeInfo:i,awemeInfo:l,videoTag:o,toast:n,player:r,reportParams:a={},canShowMixCard:d=!1,canShowSeriesCard:u=!1,canShowRelatedCard:s=!1,canShowRelatedSearchFeedBar:c=!1,canShowChapterFeedbar:v=!1,curCard:m,handleAvatarClick:_,handleMixClick:y,handleSeriesClick:w,handleRelatedClick:x,handleHotClick:I,isShowSideBar:b,isInnerFeed:S,abtestData:T,showRelatedTabList:k,chapterProgress:L,triggerChapterSliderShow:A}=e,R=(0,f.useRef)(null!=o?o:[]),N=(0,f.useCallback)((e,i)=>{var o,r,d,u,s,c,v,f;let{to_user_id:p,is_co_publish:y,co_publish_author_list:w}=eq(l)||{};if((null==l?void 0:l.awemeType)===g.e.XgVideo){eZ.sendLog("clickAuthorHead",(0,E._)({click_from:(null==i?void 0:i.clickMethod)||"head",action:"",urlParamList:["previous_page"],author_id:null==l?void 0:null===(u=l.authorInfo)||void 0===u?void 0:u.uid,group_id:null==l?void 0:l.awemeId,log_pb:null==l?void 0:l.logPb,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",from_follow_list:(null===(s=C.Le.getConfig(C.gI.FromFollowList))||void 0===s?void 0:s.tag)?"1":"0"},(0,eT.t)(),a)),(null==l?void 0:l.awemeType)===g.e.XgVideo&&eb.emit(eb.EVENT.videoPause);return}if((0,h.Jt)(l)){if(t!==em.lT.Recommend){if((0,h.gc)(l)){null==e||null===(c=e.preventDefault)||void 0===c||c.call(e),n?n("广告视频不支持此功能"):M.F.info("广告视频不支持此功能");return}}else{null==e||null===(v=e.preventDefault)||void 0===v||v.call(e),eb.emit(eb.EVENT.openAdSideCard);let t=(0,h.Rx)(l);(0,ia.E)("realtime_click",{tag:(0,iu.f)(),value:null==t?void 0:t.creative_id,log_extra:null==t?void 0:t.log_extra,refer:"source"});return}}if((0,h.gc)(l)){null==e||null===(f=e.preventDefault)||void 0===f||f.call(e),M.F.info("广告视频不支持此功能");return}return null==e||null===(o=e.preventDefault)||void 0===o||o.call(e),eZ.sendLog("clickAuthorHead",(0,Q._)((0,E._)((0,Q._)((0,E._)({click_from:(null==i?void 0:i.clickMethod)||"head",urlParamList:["previous_page"],author_id:null==l?void 0:null===(r=l.authorInfo)||void 0===r?void 0:r.uid,group_id:null==l?void 0:l.awemeId,log_pb:null==l?void 0:l.logPb,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",from_follow_list:(null===(d=C.Le.getConfig(C.gI.FromFollowList))||void 0===d?void 0:d.tag)?"1":"0"},a),{action:b&&m===e_.L.Author?"close":"open"}),(0,eT.t)()),{to_user_id:p,is_co_publish:y,co_publish_author_list:w})),null==_||_(i),!0},[l,a,m,_,b]),P=(0,f.useCallback)(()=>{null==I||I()},[I]),j=(0,f.useCallback)((e,t)=>{if(!k.includes(e_.L.Related)){var i;return null==e||null===(i=e.preventDefault)||void 0===i||i.call(e),n?n("暂无相关推荐"):M.F.info("暂无相关推荐"),!1}return x(t),!0},[x,k,n]);return(0,f.useEffect)(()=>{o&&i.awemeId===l.awemeId&&(R.current=o)},[o]),{videoInfoTags:(0,f.useMemo)(()=>{var e,t,i,o,n,r,a,s,v,f,m,_,g,h,x,C,I;let b=[];if(d&&(null==l?void 0:null===(e=l.mixInfo)||void 0===e?void 0:e.status)!==-1){let e=`合集：${null==l?void 0:null===(r=l.mixInfo)||void 0===r?void 0:r.mixName}`;b.push({type:em.WZ.Mix,title:e,onClick:e=>null==y?void 0:y(e),itemClassName:p()(tF.mix),textClassName:p()(tF.mixText)})}if(u&&(null==l?void 0:null===(t=l.seriesInfo)||void 0===t?void 0:t.status)!==-1&&b.push({type:em.WZ.Series,title:(null==l?void 0:null===(a=l.seriesInfo)||void 0===a?void 0:a.seriesName)||"",onClick:e=>null==w?void 0:w(e),itemClassName:p()(tF.mix),textClassName:p()(tF.mixText)}),(null==l?void 0:null===(i=l.hotList)||void 0===i?void 0:i.title)&&(null==l?void 0:null===(o=l.hotList)||void 0===o?void 0:o.rank)!==51&&(null==l?void 0:null===(n=l.hotList)||void 0===n?void 0:n.type)!==2){let e=(null==l?void 0:null===(s=l.hotList)||void 0===s?void 0:s.rank)?`${null==l?void 0:null===(v=l.hotList)||void 0===v?void 0:v.header}TOP${null==l?void 0:null===(f=l.hotList)||void 0===f?void 0:f.rank}： ${null==l?void 0:null===(m=l.hotList)||void 0===m?void 0:m.title}`:`置顶热榜：${null==l?void 0:null===(_=l.hotList)||void 0===_?void 0:_.title}`;b.push({type:em.WZ.Hot,title:e,customProps:{trending_topic:null==l?void 0:null===(g=l.hotList)||void 0===g?void 0:g.title,first_tag_name:null==l?void 0:null===(h=l.hotList)||void 0===h?void 0:h.header,top:null==l?void 0:null===(x=l.hotList)||void 0===x?void 0:x.rank},onClick:P,itemClassName:(null==l?void 0:null===(C=l.hotList)||void 0===C?void 0:C.rank)?p()(tF.rankHot):p()(tF.hot),textClassName:(null==l?void 0:null===(I=l.hotList)||void 0===I?void 0:I.rank)?p()(tF.rankHotText):p()(tF.hotText)})}if(c){let e=tV(l,{needFoldText:!1});b.push(...e)}if(S)return b.filter(e=>e.type===em.WZ.RelatedSearch);let E=R.current,T=b.filter(e=>{let{type:t}=e;return E.includes(t)}).sort((e,t)=>E.indexOf(e.type)-E.indexOf(t.type));return T.forEach((e,t)=>{e.idx=t}),T},[y,d,l,P,s,i,x,c,b,S]),onAvatarClick:N,onRelatedClick:j}},iC=e=>{let{player:t,isActive:i,isOuter:l,scene:o}=e;(0,f.useEffect)(()=>{let e;return t&&i&&o===em.lT.Recommend&&(()=>{if(l){var e;(null===(e=C.Le.getConfig(C.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)&&setTimeout(()=>{var e;null===(e=t.pause)||void 0===e||e.call(t),t.config.autoplay=!1,t.autoplay=!1},20)}})(),()=>{clearTimeout(e)}},[t,i])};var iI=i("543711"),ib=i("530029");let iE=e=>{let{isUpperFeed:t,awemeInfo:i,scrollElRef:l,swiper:o,isActive:n,changeNextVideo:r,changePrevVideo:a,player:d,onFullScreen:u,onCssFullScreen:s,onFullScreenrestore:c,onChangeMinWindows:v,onCanPlay:m,onPlay:p,onEnterVideo:_,onLeaveVideo:g,onVideoTitleClick:h,feedCssFullScreen:y}=e,w=(0,eJ.Z)(e.onTriggerModalPlayerClose),[x,C]=(0,f.useState)(!1),I=null!=y?y:x,[b,E]=(0,f.useState)(!1),{isFullscreen:S}=(0,iI.$)(),T=(0,f.useRef)(s);T.current=s,(0,f.useEffect)(()=>{let e=e=>{null==e||e.stopPropagation(),eb.emit(eb.EVENT.globalEventPrevented)},t=e=>{null==e||e.stopPropagation(),eb.emit(eb.EVENT.globalEventPrevented)};if(l.current){var i,o,r,a;null===(i=l.current)||void 0===i||i.addEventListener("wheel",e),null===(o=l.current)||void 0===o||o.addEventListener("mousedown",t),null===(r=l.current)||void 0===r||r.addEventListener("pointerdown",t),null===(a=l.current)||void 0===a||a.addEventListener("touchstart",t)}let d=eb.listen(eb.EVENT.pageFullScreen,e=>{if(!n)return;let{fullScreen:t}=e;C(e=>null!=t?t:!e)});return()=>{var i,o,n,r;null===(i=l.current)||void 0===i||i.removeEventListener("wheel",e),null===(o=l.current)||void 0===o||o.removeEventListener("mousedown",t),null===(n=l.current)||void 0===n||n.removeEventListener("pointerdown",t),null===(r=l.current)||void 0===r||r.removeEventListener("touchstart",t),null==d||d()}},[l,d,n]),(0,eg.o)(()=>{if(n&&o){let e=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];(0,ib.i0)(ib.CK.User),r(...t)},t=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];(0,ib.i0)(ib.CK.User),a(...t)};try{null==o||o.on("changeNext",e),null==o||o.on("changePrev",t)}catch(e){}return()=>{var i,l;null==o||null===(i=o.off)||void 0===i||i.call(o,"changeNext",e),null==o||null===(l=o.off)||void 0===l||l.call(o,"changePrev",t)}}},[n,o,r,a]),(0,eu.Z)(()=>{n&&!(I||S)&&(null==c||c())},[S,I]),(0,eu.Z)(()=>{n&&(S?null==u||u(!0):null==u||u(!1))},[S]),(0,eu.Z)(()=>{if(n){var e,t;I?null===(e=T.current)||void 0===e||e.call(T,!0):null===(t=T.current)||void 0===t||t.call(T,!1)}},[I]),(0,f.useEffect)(()=>{let e=eb.listen(eb.EVENT.triggerModalPlayerClose,w);return()=>{null==e||e()}},[w]),(0,eg.o)(()=>{let e=eb.listen(eb.EVENT.changeMinWindows,e=>{let t=tG.s.getPlayersByScene(em.lT.Modal).length>0;if(tG.s.getPlayerScene(null==d?void 0:d.playerId)!==em.lT.Modal&&t)return;let{isMiniWin:i}=e||{};E(i),null==v||v(i)});return()=>e()},[v,d]);let k=(0,f.useRef)(m);k.current=m,(0,f.useEffect)(()=>{if(d&&n){let e=()=>{var e;null===(e=k.current)||void 0===e||e.call(k)};return d.once("canplay",e),()=>{d.off("canplay",e)}}},[d,n,t]);let L=(0,f.useRef)(p);return L.current=p,(0,f.useEffect)(()=>{if(d){let e=()=>{var e;null===(e=L.current)||void 0===e||e.call(L)};return d.on("play",e),()=>{d.off("play",e)}}},[d]),(0,eu.Z)(()=>{n&&(null==_||_()),!n&&(null==g||g())},[n]),(0,f.useEffect)(()=>{let e=eb.listen(eb.EVENT.videoTitleClick,e=>{let{awemeId:t,playerId:l}=e;if((null==i?void 0:i.awemeId)===t&&(null==d?void 0:d.playerId)===l)null==h||h()});return()=>{null==e||e()}},[i,d,h]),{isCssFullScreen:I,isFullScreen:S,isMiniWin:b}};var iS=i("602188"),iT=i("622273");let ik=e=>{let{isActive:t,awemeInfo:i,isNext:l,scene:o,isUpperFeed:n=!1,smoothInner:r=!1,modalEnterFrom:a}=e,d=(0,iS.t)();(0,iT.t)(function(){var e;let l=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!l)t&&!(null==d?void 0:null===(e=d.current)||void 0===e?void 0:e.isRecoveryFromChild)&&eb.emit(eb.EVENT.postCurVideoInfo,{awemeId:null==i?void 0:i.awemeId,groupId:null==i?void 0:i.groupId,scene:o,suggestWords:null==i?void 0:i.suggestWords,modalEnterFrom:a,isRecovery:!0})}),(0,f.useEffect)(()=>{if(i&&o!==em.lT.Search){if(!n||!!r)t?(eb.emit(eb.EVENT.postCurVideoInfo,{awemeId:null==i?void 0:i.awemeId,groupId:null==i?void 0:i.groupId,scene:o,suggestWords:null==i?void 0:i.suggestWords,modalEnterFrom:a}),!C.Le.getConfig(C.gI.FirstFeedVideoSearchInfo)&&C.Le.setConfig(C.gI.FirstFeedVideoSearchInfo,{awemeId:null==i?void 0:i.awemeId,groupId:null==i?void 0:i.groupId,scene:o,suggestWords:null==i?void 0:i.suggestWords,modalEnterFrom:a})):l&&eb.emit(eb.EVENT.postCurVideoInfo,{awemeId:null==i?void 0:i.awemeId,groupId:null==i?void 0:i.groupId,scene:o,suggestWords:null==i?void 0:i.suggestWords,preload:!0,modalEnterFrom:a})}},[i,t,o,l])},iL=e=>{let{awemeInfo:t,customProps:i,reportParams:l,fullScreenTarget:o,tab:n,showSideCard:r,player:a,scrollElRef:d,followStatus:u,handleCommentClick:s,isShowRelatedCard:c,isActive:v,isUpperFeed:m=!1,globalIsCommentTrayPushGuideShow:p,globalCommentTrayPushGuideType:_,setCommentTrayPushGuideTypeFunc:g,setIsCommentTrayPushGuideShowFunc:h,onSearchTextClick:y,scene:w}=e,{abtestData:x,userContext:I,insertCommentId:b,tab:S}=i||{},{userInfo:T,dispatch:k}=I||{};(0,f.useEffect)(()=>{var e,t;let i;if(!v)return;c&&(i=setTimeout(()=>eb.emit(eb.EVENT.feedVideoCardLocateCurrentVideo),0));let{isShow:l,isModal:o,tab:r}=C.Le.getConfig(C.gI.IsSidebarShow)||{},a=(null===(e=C.Le.getConfig(C.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)||!1,d=(null===(t=C.Le.getConfig(C.gI.IsInModalVideo))||void 0===t?void 0:t.isInModal)||!1,u=o!==(d||a)?{tab:r,isShow:void 0}:{tab:r,isShow:l};return C.Le.setConfig(C.gI.IsSidebarShow,{isShow:c,tab:n,isModal:d||a,lastStatus:(0,Q._)((0,E._)({},u),{isModal:o})}),eb.emit(eb.EVENT.changeVideoSideBar,{isShowRelatedCard:c,isShowComment:n===e_.L.Comment,lastStatus:u}),()=>{clearTimeout(i)}},[c,n]);let L=(0,f.useMemo)(()=>({awemeInfo:t,sense:"slider_video",onCloseClick:()=>{},onCollapseClick:()=>{},userContext:I,abtestData:x,changeLoginStatus:()=>{k({type:"updateUserInfo"})},logParams:l}),[t,I,k,l,x]),{fetchComment:A,fetchReply:R,fetchCommentMention:N,deleteCommentItem:P,publishCommentItem:M,diggCommentItem:j}=t2({awemeInfo:t,player:a});return{authorConfig:L,commentConfig:{abtestData:x,fullScreenTarget:o,isDetail:!1,isShowComment:n===e_.L.Comment&&r,total:0,onCloseCommentClick:s,awemeInfo:t,awemelogPb:null==t?void 0:t.logPb,userInfo:T,scrollContainerEl:null==d?void 0:d.current,player:a,shortcutMode:null==x?void 0:x.shortcutMode,fetchComment:A,fetchReply:R,fetchEmoticonGif:tJ.D2,fetchCommentMetionList:N,diggCommentItem:j,deleteCommentItem:P,puhlishCommentItem:M,count:(null==x?void 0:x.commentRenderOptimize)===2?10:20,defaultommentList:[],defaultCursor:0,defaultHotsoonHasMoreRef:0,defaultHasMore:!0,defaultStatusCode:0,defaultCommentId:m?"":b,isNeedCommentInput:!0,changeLoginStatus:()=>{k({type:"updateUserInfo"})},reportExtraParams:(0,Q._)((0,E._)({},l),{relation:String(u)}),dispatch:k,globalIsCommentTrayPushGuideShow:p,globalCommentTrayPushGuideType:_,setCommentTrayPushGuideTypeFunc:g,setIsCommentTrayPushGuideShowFunc:h,tab:S,onSearchTextClick:y,isSearch:w===em.lT.Search}}},iA=e=>{let{isActive:t,isUpperFeed:i,modalAwemeInfo:l,showSideCard:o,isShowAdCard:n,isShowAiSearchCard:r,isShowShopDetailSideCard:a,abtestData:d,scene:u}=e,s=(0,f.useRef)(!0);(0,f.useEffect)(()=>{if(s.current){s.current=!1;return}t&&eb.emit(eb.EVENT.sideCardShowChange,{isUpperFeed:i,isModalAwemeShow:!!l,isShow:o||n||a||r})},[o,n,i,a,t,null==l?void 0:l.awemeId,r])},iR=e=>{let{curTab:t,awemeInfo:i,handleChangeVideo:l,handleCooperationAvatarClick:o,reportParams:n,isShowVideoCard:r}=e,a=(0,f.useRef)(!1),d=(0,f.useCallback)(e=>{var l,d;a.current=!0,null==o||o(e);let{to_user_id:u,is_co_publish:s,co_publish_author_list:c}=eq(e)||{};eZ.sendLog("clickAuthorHead",(0,Q._)((0,E._)((0,Q._)((0,E._)({click_from:"click_co_author_head",urlParamList:["previous_page"],author_id:null==e?void 0:null===(l=e.authorInfo)||void 0===l?void 0:l.uid,group_id:null==i?void 0:i.awemeId,log_pb:null==i?void 0:i.logPb,is_full_screen:(0,eS.r)()?"1":"0",from_follow_list:(null===(d=C.Le.getConfig(C.gI.FromFollowList))||void 0===d?void 0:d.tag)?"1":"0"},n),{action:r&&t===e_.L.Author?"close":"open"}),(0,eT.t)()),{to_user_id:u,is_co_publish:s,co_publish_author_list:c})),eb.emit(eb.EVENT.feedVideoCardLocateCurrentVideo,{offsetHeight:0,scrollBehavior:"smooth"})},[o,i,t,r,n]);return(0,f.useEffect)(()=>{if(void 0!==i.authorInfo.roleId&&i.authorInfo.roleId!==eG.CooperationRoleId.Author&&[e_.L.Mix,e_.L.Hot].includes(t)){var e,o;let t=eX()(i),n=null==t?void 0:null===(o=t.cooperationInfo)||void 0===o?void 0:null===(e=o.cooperationCreators)||void 0===e?void 0:e.filter(e=>e.roleId===eG.CooperationRoleId.Author)[0];n&&(t.authorInfo=n),null==l||l(t)}},[t]),{onCooperationAvatarClick:d,changeIsInCooperation:e=>{a.current=e},isInCooperation:a.current}};i("110006");var iN=i("679028"),iP=i("266671"),iM=i("265656"),ij="i3q1YmQF",iD="Zt9jTCPt",iF="aYPViAdO",iV="JlGxOq1w",iO=i("218805"),iB=i("28528"),iU=i("66627"),iH=i("97199"),iW=i("385236"),iz={container:"KSW7LFT0",fixed:"y3Dct5zK",circle:"idHrLIvj",return:"eabxVRkt",clientHomeStyleWrap:"ru4NJujb",back:"KSsgI_Us"},iG=i("455330");let iZ=new Map([[e_.L.Related,`${iB.a.t("related",{},"相关推荐")}`],[e_.L.AwemeRelated,`${iB.a.t("related",{},"相关推荐")}`],[e_.L.Music,`${iB.a.t("music",{},"音乐")}`],[e_.L.Topic,`${iB.a.t("topic",{},"话题")}`],[e_.L.Mix,`${iB.a.t("mix",{},"合集")}`],[e_.L.Series,`${iB.a.t("series",{},"短剧")}`],[e_.L.Comment,`${iB.a.t("comment",{},"评论")}`],[e_.L.Hot,`${iB.a.t("hot",{},"热点")}`],[e_.L.Author,`${iB.a.t("ta_s_works",{},"TA的作品")}`],[e_.L.Handpick,`${iB.a.t("handplick",{},"编辑精选")}`],[e_.L.Search,"搜索结果"],[e_.L.History,`${iB.a.t("history",{},"历史记录")}`],[e_.L.Like,"TA的喜欢"],[e_.L.Collection,"TA的收藏"],[e_.L.CollectFolder,`${iB.a.t("collect_folder",{},"收藏夹")}`],[e_.L.AbstractList,`${iB.a.t("abstract_list",{},"摘要")}`],[e_.L.Record,`${iB.a.t("record",{},"观看历史")}`]]),iq=e=>{let{exitTextProps:t,onHandleReturn:i,positionFixed:l}=e,o=iK(t),n=(0,f.useRef)(),r=(0,U.DT)()&&(0,iU.y)((0,U.FJ)().awemePcClient,">=","5.4.0");return(0,v.jsx)("div",{className:p()("isDark",iz.container,l&&iz.fixed,r&&iz.clientHomeStyleWrap),children:(0,v.jsx)(iO.Tooltip,{getPopupContainer:()=>n.current||document.body,position:"bottom",content:o,children:(0,v.jsxs)("div",{className:iz.circle,onClick:i,ref:n,children:[!r&&(0,v.jsx)(iG.z,{size:"large",svg:(0,v.jsx)(iH.Z,{}),className:iz.return}),r&&(0,v.jsx)(iG.z,{svg:(0,v.jsx)(iW.Z,{style:{fontSize:"24px"}}),className:p()(iz.back)})]})})})},iK=e=>{let{getCurrentTab:t,modalEnterFrom:i,isSelf:l,uidEquals:o,awemeInfo:n}=e,[r,a]=(0,f.useState)("");return(0,f.useEffect)(()=>{var e;let r=null==t?void 0:t();if(r===e_.L.Comment)return;let d=iZ.has(r);r===iZ[e_.L.Series]&&(null==n?void 0:null===(e=n.seriesInfo)||void 0===e?void 0:e.isSeries2Mix)&&(d=iZ[e_.L.Mix]);let u=d?`退出${d}`:"";switch(r){case e_.L.Like:"userLike"===i&&l&&(u=u.replace("TA","我"));break;case e_.L.Collection:"userCollection"===i&&l&&(u=u.replace("TA","我"));break;case e_.L.Author:"userPost"===i&&o&&l&&(u=u.replace("TA","我"))}a(u||"退出")},[t,i,l,o]),(0,f.useEffect)(()=>eb.listen(eb.EVENT.changeTab,e=>{let t=iZ.has(e)?`退出${iZ.get(e)}`:"";t&&a(t)}),[]),r};var i$=i("82297"),iY=i("877639"),iQ=i.n(iY),iX=i("262648"),iJ=i("223526");let i0=e=>{let{EventListener:t,refContainerStatus:i,isClientMiniWin:l}=e,o=(0,f.useRef)(!1),n=(0,f.useRef)(null),r=(0,f.useRef)([]),a=(0,f.useRef)(null),d=(0,f.useRef)(null),u=(0,f.useRef)((0,eL.vU)()?120:0),s=(0,f.useCallback)((e,t)=>{let i=0,l=e.slice(Math.max(e.length-t,1));for(let e=0;e<l.length;e++)i+=l[e];return Math.ceil(i/t)},[]),c=(0,f.useCallback)(()=>{eb.emit(eb.EVENT.swiperVideo)},[]),v=(0,f.useCallback)(e=>{var i;c(),null==e||null===(i=e.preventDefault)||void 0===i||i.call(e),n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{r.current=[]},400);let l=new Date().getTime(),o=e.wheelDelta||-e.deltaY||-e.detail,v=Math.max(-1,Math.min(1,o)),f=void 0!==e.wheelDeltaX||void 0!==e.deltaX,m=Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!f;r.current=[...r.current,u.current+Math.abs(o)];let p=l-a.current;a.current=l,p>400&&1===r.current.length&&(r.current=[,,].fill(r.current[0]),d.current=!1);let _=s(r.current,20),g=_>s(r.current,40);g&&!d.current&&m&&((0,C.Vv)(eG.PagingType.scroll),v<0?t.emit("changeNext",{from:"scroll"}):t.emit("changePrev",{from:"scroll"}),d.current=!0),!g&&d.current&&m&&(d.current=!1)},[t]);return(0,f.useEffect)(()=>{if(t)return null==t||t.on("sliderMove",c),()=>{null==t||t.off("sliderMove",c)}},[t]),(0,f.useEffect)(()=>{if(i)return null==i||i.addEventListener("wheel",v),()=>{null==i||i.removeEventListener("wheel",v)}},[i,v]),(0,eg.o)(()=>{let e=l?[iX.bf.ArrowUp.keyCode]:[iX.bf.ArrowUp.keyCode,iX.bf.W.keyCode],i=l?[iX.bf.ArrowDown.keyCode]:[iX.bf.ArrowDown.keyCode,iX.bf.S.keyCode],n=iQ()(l=>{var n,r,a,d;if(l.nativeEvent||(null===(n=C.Le.getConfig(C.gI.IsInModalVideo))||void 0===n?void 0:n.isInModal)||(null===(r=C.Le.getConfig(C.gI.PlayerShortcutConf))||void 0===r?void 0:r.pausePlayControlShortcut)||o.current)return;let u=C.Le.getConfig(C.gI.DisableNextPre);!e.includes(l.keyCode)||l.shiftKey||u&&l.keyCode===iX.bf.ArrowUp.keyCode?i.includes(l.keyCode)&&!l.shiftKey&&(!u||l.keyCode!==iX.bf.ArrowDown.keyCode)&&((0,C.Vv)(eG.PagingType.hotkey),iJ.p.postTask({task:()=>{t.emit("changeNext",{from:"keyboard"})},priority:"user-blocking",immediate:(null===(d=C.Le.getConfig(C.gI.AbtestData))||void 0===d?void 0:d.longtask)!==1})):((0,C.Vv)(eG.PagingType.hotkey),iJ.p.postTask({task:()=>{t.emit("changePrev",{from:"keyboard"})},priority:"user-blocking",immediate:(null===(a=C.Le.getConfig(C.gI.AbtestData))||void 0===a?void 0:a.longtask)!==1}))},500,{leading:!0,trailing:!1});document.addEventListener("keydown",n);let r=eb.listen(eb.EVENT.showLoginPanel,e=>{o.current=e});return()=>{document.removeEventListener("keydown",n),r()}},[l,t]),null},i1="undefined"!=typeof window?f.useLayoutEffect:f.useEffect,i2="slide-mode-0",i3=()=>{let e=parseInt(i2.match(/\d+$/)[0]);e++,i2=i2.replace(/\d+$/,e)},i6=()=>{let e=parseInt(i2.match(/\d+$/)[0]);e--,i2=i2.replace(/\d+$/,e)},i5=e=>{var t,i,l;let{close:o,clickedCard:n,customProps:r,isEnterByFullScreen:a=!1,modalEnterFrom:d,currentAwemeInfo:u,isClientMiniWin:s,relatedSmooth:c}=e,{tab:m,userContext:_}=r||{},{userInfo:g}=_,[h,y]=(0,f.useState)({}),{isCssFullScreen:w,isFullScreen:x,isSelf:I}=(0,f.useContext)(ee.C),[b,S]=(0,f.useState)(!1),T=(0,f.useRef)(i2),k=(0,f.useRef)(null),L=(0,f.useRef)(null),A=(0,f.useRef)(null),N=(0,f.useRef)("click_screen");(0,f.useEffect)(()=>(eb.emit(eb.EVENT.InnerFeedReady,T.current),i3(),()=>{eb.emit(eb.EVENT.InnerFeedExit,T.current),i6()}),[]);let P=(0,f.useCallback)(e=>{e.target===k.current&&(N.current="click_screen",S(!0))},[]),M=(0,f.useCallback)(()=>{y({width:"100%",height:"100%"})},[]);return((0,f.useEffect)(()=>{var e,t,i;M();let l=null===ef()||void 0===ef()?void 0:null===(e=ef().getCurrentUserActivePlayerId)||void 0===e?void 0:e.call(ef()),o=tG.s.getPlayer(l);return null==o||null===(t=o.pause)||void 0===t||t.call(o),null===ef()||void 0===ef()||null===(i=ef().instManager)||void 0===i||i.setActive(l,!1),()=>{var e;if(null===(e=ef().instManager)||void 0===e||e.setActive(l,!0),setTimeout(()=>{var e;eb.emit(eb.EVENT.syncInteraction),null==o||null===(e=o.play)||void 0===e||e.call(o)}),C.Le.getConfig(C.gI.IsInMixCard)){let e=Number((0,B.$o)(R.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY)),t=C.Le.getConfig(C.gI.AutoPlayChanged);!(null==t?void 0:t.changed)&&(null==t?void 0:t.autoEmit)&&e&&((0,B.qQ)(R.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,"0"),eb.emit(eb.EVENT.changeInnerAutoPlay,2),C.Le.setConfig(C.gI.InnerAutoPlay,null),C.Le.setConfig(C.gI.AutoPlayChanged,{autoEmit:!1})),C.Le.setConfig(C.gI.IsInMixCard,!1)}}},[M]),i1(()=>(C.Le.setConfig(C.gI.SlideStartTime,{slideStartTime:0}),C.Le.setConfig(C.gI.IsInLookMiniModal,{isInMiniModal:!0}),()=>{C.Le.setConfig(C.gI.IsInLookMiniModal,{isInMiniModal:!1})}),[]),(0,f.useEffect)(()=>{let e=()=>{if(b){var t,i,l;null==o||o(N.current,null===(i=A.current)||void 0===i?void 0:null===(t=i.getCurTab)||void 0===t?void 0:t.call(i)),null===(l=L.current)||void 0===l||l.removeEventListener("animationend",e)}};if(b){var t,i;null==o||o(N.current,null===(i=A.current)||void 0===i?void 0:null===(t=i.getCurTab)||void 0===t?void 0:t.call(i))}let l=eb.listen(eb.EVENT.sendImUserMsg,()=>{var e,t;null==o||o(N.current,null===(t=A.current)||void 0===t?void 0:null===(e=t.getCurTab)||void 0===e?void 0:e.call(t))}),n=L.current;return n.addEventListener("animationend",e),()=>{n.removeEventListener("animationend",e),l()}},[w,x,b,o,s]),(0,eg.o)(()=>{let e=e=>{if(e.shiftKey||e.metaKey||e.ctrlKey)return;let t=C.Le.getConfig(C.gI.DisableExit);if("Escape"===e.code&&(!w||m===em.lT.Modal)&&!x&&!s&&!t){var i,l;return e.preventDefault(),e.returnValue=!1,null==o||o("esc",null===(l=A.current)||void 0===l?void 0:null===(i=l.getCurTab)||void 0===i?void 0:i.call(l)),!1}};return iN.k.bind("Escape",e),()=>{iN.k.remove("Escape",e)}},[w,x,s,o]),(0,f.useEffect)(()=>{if(w)return y({}),()=>{M()}},[w]),(0,f.useEffect)(()=>{if(x)return y({}),()=>{M()}},[x]),(0,f.useEffect)(()=>{if(s)return y({}),()=>{M()}},[s]),(0,f.useEffect)(()=>{if(!a&&m!==em.lT.Modal){var e,t,i;eb.emit(eb.EVENT.pageFullScreen,{fullScreen:!0,playerId:null===(i=A.current)||void 0===i?void 0:null===(t=i.getPlayer)||void 0===t?void 0:null===(e=t.call(i))||void 0===e?void 0:e.playerId,clickMethod:"inner_player",fromAuthorCard:!0})}},[]),c)?null:(0,v.jsxs)(i$.T6,{onMaskClick:()=>{N.current="click_screen",S(!0)},className:p()(iV),children:[(0,v.jsxs)("div",{className:iD,ref:k,onClick:P,children:[!s&&(0,v.jsx)(iq,{positionFixed:!0,exitTextProps:{getCurrentTab:()=>{var e,t;return(null==A?void 0:null===(t=A.current)||void 0===t?void 0:null===(e=t.getCurTab)||void 0===e?void 0:e.call(t))||n},modalEnterFrom:d,isSelf:I,uidEquals:(null==u?void 0:null===(t=u.authorInfo)||void 0===t?void 0:t.uid)===(null==g?void 0:null===(i=g.info)||void 0===i?void 0:i.uid),awemeInfo:u},onHandleReturn:()=>{var e,t;N.current="click_button",null==o||o(N.current,null===(t=A.current)||void 0===t?void 0:null===(e=t.getCurTab)||void 0===e?void 0:e.call(t))}}),(0,v.jsx)("div",{className:iF,ref:L,style:{height:"100%"},children:(0,v.jsx)(lj,(0,Q._)((0,E._)({},e),{style:h,isUpperFeed:!0,isMultiInstanceScene:!1,className:ij,close:o,ref:A,swiper:null!==(l=null==e?void 0:e.swiper)&&void 0!==l?l:eb.commonEvent}))})]}),m===em.lT.Search&&k.current&&(0,v.jsx)(i0,{EventListener:eb.commonEvent,refContainerStatus:k.current})]})},i4=e=>{let t=(0,f.useRef)(document.createElement("div")),i=(0,f.useRef)(!1);return(0,f.useEffect)(()=>{let e=Array.from(document.querySelectorAll('.sliderVideo[data-e2e="feed-active-video"]')),l=e[e.length-1]||document.body,o=document.querySelector(".searchUpperFeedContainer")||l,n=document.getElementById("upperFeedContainer")||(0,iP.t)()||l,r=(0,iM.En)()?o:n;return null==r||r.appendChild(t.current),()=>{var e,l,o;(null===(e=t.current)||void 0===e?void 0:e.parentNode)&&(null===(o=t.current)||void 0===o||null===(l=o.remove)||void 0===l||l.call(o)),t.current=null,i.current=!0}},[]),(0,ej.createPortal)((0,v.jsx)(i5,(0,Q._)((0,E._)({},e),{close:function(){for(var l,o,n,r,a,d=arguments.length,u=Array(d),s=0;s<d;s++)u[s]=arguments[s];(null===(l=t.current)||void 0===l?void 0:l.parentNode)&&(null===(a=t.current)||void 0===a||a.remove()),null==e||null===(o=e.close)||void 0===o||o.call(e,...u),eb.emit(null==eb?void 0:null===(n=eb.EVENT)||void 0===n?void 0:n.clarityRel,{exitInner:!0}),eb.emit(null==eb?void 0:null===(r=eb.EVENT)||void 0===r?void 0:r.quitInnerFeed,!0),i.current=!0}})),t.current)};var i8=e=>((0,f.useEffect)(()=>()=>{},[]),(0,v.jsx)(i4,(0,E._)({},e)));function i7(e){let{player:t,isActive:i}=e,[l,o]=(0,f.useState)(void 0);return(0,f.useEffect)(()=>{if(t&&i){let e=e=>{"boolean"==typeof(null==e?void 0:e.isOn)&&o(e.isOn)};return t.on(tz.B.ImmersiveSwitchChange,e),()=>{t.off(tz.B.ImmersiveSwitchChange,e)}}!i&&t&&o(!1)},[t,i]),{inImmersive:l}}var i9="M2Cx2WWy",le="vBKoBKmq",lt="VvSEgNtQ",li="jf0sSEl9",ll="hi7mbKuv";let lo=(0,f.forwardRef)((e,t)=>(0,v.jsxs)("svg",(0,Q._)((0,E._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,v.jsx)("path",{d:"M7.978 8.5H14a4.5 4.5 0 0 1 4.5 4.5v0a4.5 4.5 0 0 1-4.5 4.5H7.5",stroke:"#222",strokeWidth:2,strokeLinecap:"round"}),(0,v.jsx)("path",{d:"M8.5 5.5l-3 3 3 3",stroke:"#222",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})]})));var ln=i("297273"),lr=i("146106"),la=i("227296"),ld=i("279688");let lu=e=>{let{src:t,width:i,height:l,id:o,viewBox:n,className:r,onClick:a,isSpider:d=!1,color:u,notJudgeIsUse:s=!1}=e,c=(0,f.useContext)(ld.P),m=(0,f.useRef)(c);m.current=c;let p=(0,f.useRef)((0,ln.o)()),_=(0,f.useRef)();(0,f.useEffect)(()=>{let e=m.current;if(e&&_.current!==o){_.current=o;let t=(e.usedIconMap[o]||[]).concat([]);t.push({id:p.current,width:Number(i),height:Number(l)}),(0,lr.L)(()=>{e.setUsedIconMap((0,Q._)((0,E._)({},e.usedIconMap),{[o]:t}))})}return()=>{let e=m.current;if(e){let i=e.usedIconMap[o]||[],l=i.findIndex(e=>e.id===p.current);if(l>-1){var t;i.splice(l,1),e.usedIconMap[o]=i,null===(t=e.setUsedIconMap)||void 0===t||t.call(e,(0,E._)({},e.usedIconMap))}}}},[o]);let g=(0,f.useMemo)(()=>{if(s)return!1;if(c){var e,t;let i=c.usedIconMap[o]||[];return(null===(e=i[0])||void 0===e?void 0:e.id)&&(null===(t=i[0])||void 0===t?void 0:t.id)!==p.current}return!1},[o,null==c?void 0:c.usedIconMap]);return d?null:g?(0,v.jsx)("svg",{onClick:a,width:Number(i),height:Number(l),viewBox:`0 0 ${i} ${l}`,className:r,children:(0,v.jsx)("use",{xlinkHref:`#${o}`})}):(0,v.jsx)(la.Z,{onClick:a,src:t,width:Number(i),height:Number(l),viewBox:n,id:o,className:r,color:u})},ls=e=>{let{width:t=24,height:i=24,className:l}=e;return(0,v.jsx)(lu,(0,Q._)((0,E._)({},e),{width:t,height:i,src:lo,id:"svg_icon_revoke",defaultWidth:24,defaultHeight:24,viewBox:"0 0 24 24",className:l}))},lc=e=>{let{onRevokeDislike:t,isActive:i=!1}=e;return(0,f.useEffect)(()=>{i&&eZ.sendLog("dislikeRecallShow")},[i]),(0,v.jsxs)("div",{className:i9,children:[(0,v.jsx)("span",{className:le,children:"你已对该视频不感兴趣"}),(0,v.jsxs)("div",{className:lt,onClick:()=>{null==t||t(),eZ.sendLog("dislikeRecallClick")},children:[(0,v.jsx)(ls,{className:li}),(0,v.jsx)("span",{className:ll,children:"撤销"})]})]})};var lv=i("636111"),lf=i("909723"),lm={staticImgBackground:"UCfTkxBe",videoCover:"WkoFzfX2",blackVideoCover:"r3SKANwK",playerImgBackground:"iSwKgBPe",inactive:"_WgNtfIG"},lp={backgroundImg:"oZNz00pU",isError:"ks8hqnSY",hideFilterBlur:"VEdhkyVB",backgroundMask:"TdPThG8b",backgroundImgSarari:"PJM9viXN",backgroundImgQq:"MNY0QzqI",backgroundImgFirefox:"KGzTEjX3"};let l_=e=>{var t,i,l,o,n,r,a,d,u;let s;let{awemeInfo:c,useServerFilterCover:m=(0,eL.b_)()||(0,eL.Sb)()||(0,U.tq)(),className:_,maskClassName:g,abtestData:h,priorityServerBackupBg:y}=e,w=(0,tX._)(e,["awemeInfo","useServerFilterCover","className","maskClassName","abtestData","priorityServerBackupBg"]),x=!1,C=!1,I=!!(null==c?void 0:null===(t=c.video)||void 0===t?void 0:t.gaussianCover);m||(0,eL.G6)()?I&&!(0,eL.G6)()?(x=!0,s="low"):C=!0:y&&I&&(x=!0,s="low");let b=(0,eL.GP)(),S=!1,T=(null==c?void 0:null===(i=c.video)||void 0===i?void 0:i.originCover)||(null==c?void 0:null===(r=c.cellRoom)||void 0===r?void 0:null===(n=r.rawdata)||void 0===n?void 0:null===(o=n.cover)||void 0===o?void 0:null===(l=o.url_list)||void 0===l?void 0:l[0])||(null==c?void 0:null===(u=c.varietyVideo)||void 0===u?void 0:null===(d=u.cover)||void 0===d?void 0:null===(a=d.url_list)||void 0===a?void 0:a[0]);C?T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAALQAQMAAAD1s08VAAAAA1BMVEUAAACnej3aAAAAlElEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOD24JAAAAAAQND/154wAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqwDE3wABfajOdgAAAABJRU5ErkJggg==":x&&I&&(T=c.video.gaussianCover,S=!0);let[k,L]=(0,f.useState)(!1);return(0,v.jsxs)("div",{className:p()(_,{[lp.backgroundImg]:!C,[lp.backgroundImgSarari]:C,[lp.backgroundImgQq]:b,[lp.backgroundImgFirefox]:(0,eL.vU)(),[lp.hideFilterBlur]:S&&I,[lp.isError]:k}),children:[(0,v.jsx)("img",(0,Q._)((0,E._)({},w),{fetchPriority:(null==w?void 0:w.fetchPriority)||s,src:T,onError:()=>L(!0)})),(0,v.jsx)(f.Fragment,{children:!C&&(0,v.jsx)("div",{className:p()(lp.backgroundMask,g)})})]})},lg=e=>{let{isActive:t,isRenderInSSR:i,awemeInfo:l,abtestData:o,className:n}=e,r=(0,f.useMemo)(()=>{var e,t,i,n;return o.searchSuspenseFetch===t6.SearchSuspenseFetch.StreamWithBlackBg?lf:l.awemeType===g.e.Note?null===(n=l.images)||void 0===n?void 0:null===(i=n[0])||void 0===i?void 0:null===(t=i.urlList)||void 0===t?void 0:t[0]:null===(e=l.video)||void 0===e?void 0:e.originCover},[l,o]),a=(0,f.useMemo)(()=>{var e;return(null===(e=(0,lv.P)(o))||void 0===e?void 0:e.multiPlayer)&&!t?lm.inactive:""},[o,t]);return(0,v.jsxs)("div",{className:p()(lm.staticImgBackground,n,a,"HideInLynxClassName"),children:[(0,v.jsx)("img",{src:r,className:p()(lm.videoCover,{[lm.blackVideoCover]:o.searchSuspenseFetch===t6.SearchSuspenseFetch.StreamWithBlackBg})}),(0,v.jsx)(l_,{className:lm.playerImgBackground,isRenderInSSR:i,awemeInfo:l,elementtiming:"lcp_ele",abtestData:o,fetchPriority:"auto",priorityServerBackupBg:!1})]})};var lh=i("577603"),ly=i.n(lh),lw=i("236758"),lx={staticControls:"G1akiTss",progress:"gtKs_2Ep",innerControls:"mRvAqMPL",leftGrid:"Wm8OhxDl",time:"Qyz49w8g",timeSeparator:"FYwJ2SlC",rightGrid:"guYXrAs3",desc:"PyTD4AKM",detailSvg:"PKhLe9UP",inactive:"pQOmA4Xe"};let lC=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{d:"M23.5 15.134a1 1 0 0 1 0 1.732l-11.25 6.495a1 1 0 0 1-1.5-.866V9.505a1 1 0 0 1 1.5-.866l11.25 6.495z",fill:"#fff"})})));k().extend(ly());let lI=e=>{let{isActive:t,time:i,abtestData:l,enableEnterDetail:o}=e,n=(0,f.useMemo)(()=>k().duration(Math.round(i/1e3),"seconds").format("mm:ss"),[i]),r=(0,f.useMemo)(()=>{var e;return(null===(e=(0,lv.P)(l))||void 0===e?void 0:e.multiPlayer)&&!t?lx.inactive:""},[l,t]);return(0,v.jsxs)("div",{className:p()(lx.staticControls,r),children:[(0,v.jsx)("div",{className:lx.progress}),(0,v.jsxs)("div",{className:lx.innerControls,children:[(0,v.jsxs)("div",{className:lx.leftGrid,children:[(0,v.jsx)(lC,{}),i>0&&(0,v.jsxs)("div",{className:lx.time,children:[(0,v.jsx)("span",{children:"00:00"}),(0,v.jsx)("span",{className:lx.timeSeparator,children:"/"}),(0,v.jsx)("span",{children:n})]})]}),o&&(0,v.jsxs)("div",{className:lx.rightGrid,children:[(0,v.jsx)("div",{className:lx.desc,children:"详情"}),(0,v.jsx)("div",{className:lx.detailSvg,children:(0,v.jsx)(lw.Z,{width:6,height:9,viewBox:"0 0 6 9"})})]})]})]})},lb=e=>{var t;let{isActive:i,isRenderInSSR:l,awemeInfo:o,player:n,abtestData:r,className:a}=e,[d,u]=(0,f.useState)(!1);(0,f.useEffect)(()=>{u(!0)},[]);let s=!d||(null===(t=(0,lv.P)(r))||void 0===t?void 0:t.multiPlayer)&&!i;return(0,v.jsxs)(v.Fragment,{children:[s&&(0,v.jsx)(lg,{isActive:i,isRenderInSSR:l,awemeInfo:o,abtestData:r,className:a}),(!n||!i)&&(0,v.jsx)(lI,{isActive:i,time:o.video.duration,abtestData:r})]})};var lE=i("839321");let lS=M.F.info.bind(M.F),lT=e=>{let{awemeInfo:t,reportExtraParams:i,onDislikeSuccess:l,onDislikeError:o,initIsDislike:n,toast:r=lS,player:a}=e,[d,u]=(0,f.useState)(null!=n&&n);(0,f.useLayoutEffect)(()=>{void 0!==n&&u(n)},[n]);let s=(0,f.useRef)(),c=(0,eJ.Z)(async function(){var e,n,d,c;let{clickMethod:v,reportExtraParams:f}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clickMethod:"icon"};if((0,h.Jt)(t)){null==a||a.emit(tz.B.AdDislike,{onAddDislikeSuccess:()=>{null==l||l(),s.current=setTimeout(()=>{u(!0)},2500)}});return}let{statusCode:m,errMsg:p}=await (0,lE.w)(null==t?void 0:t.awemeId),_=(null===(e=C.Le.getConfig(C.gI.WallPaperIds))||void 0===e?void 0:e.includes(null==t?void 0:t.awemeId))?1:0;0===m?(null==r||r("操作成功，将减少此类视频出现"),ep.logInstance.sendLog("dislike",(0,E._)({urlParamList:["previous_page"],enter_from:(0,eI.mo)(),author_id:null==t?void 0:null===(n=t.authorInfo)||void 0===n?void 0:n.uid,group_id:null==t?void 0:t.awemeId,log_pb:null==t?void 0:t.logPb,is_full_screen:(0,eS.r)()?"1":"0",tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",click_method:v,from_follow_list:(null===(d=C.Le.getConfig(C.gI.FromFollowList))||void 0===d?void 0:d.tag)?"1":"0",aweme_type:null==t?void 0:t.awemeType,is_insert_wallpaper:_,item_duration_ms:(null==t?void 0:null===(c=t.video)||void 0===c?void 0:c.duration)||0},f,i)),null==l||l(),s.current=setTimeout(()=>{u(!0)},2500)):(null==r||r(p),null==o||o(p)),_&&(0,B.qQ)(R.LocalStorageKeys.WallPaper,{disappear:!0})}),v=(0,eJ.Z)(async()=>{let{statusCode:e}=await (0,lE.m)(null==t?void 0:t.awemeId);0===e&&u(!1)});return(0,f.useEffect)(()=>()=>{clearTimeout(s.current)},[]),{dislike:c,revokeDislike:v,isDislike:d}},lk=e=>{let{abtestData:t,scene:i,isModal:l,awemeInfo:o,dislikeIdList:n=new Set,deleteCurrentSwiper:r,videoToast:a,uuid:d,player:u}=e,{dislike:s,revokeDislike:c}=lT({awemeInfo:o,toast:e=>{a(e)},onDislikeSuccess:()=>{null==r||r()},initIsDislike:n.has(o.awemeId),player:u});return{isDislikePanelVisible:!1,dislike:s,revokeDislike:c,isPermanentDislikeBtn:!1,disableShortCut:!1,isAdapterMiniHeightWithDislikeBtn:!1}},lL=new ez.h({prf_slider_modal_video:{eventName:"prf_slider_modal_video",params:{fps:0,duration:0,scene:"",jank:0,jank_duration:0,bjank:0,bjank_duration:0,tab:""}}}),lA=1e3/24*2,lR=1e3/24*3,lN=()=>{var e,t;return(null===(t=performance)||void 0===t?void 0:null===(e=t.now)||void 0===e?void 0:e.call(t))||Date.now()||0},lP=function(){},lM=e=>{let{sidebarHidden:t,chapterSidebarHidden:i,bottomLevelSidebar:l,setBottomLevelSidebar:o,topLevelSidebar:n,setTopLevelSidebar:r}=e;return(0,f.useEffect)(()=>{if(t&&i){o(void 0),r(void 0);return}t||i?(r(void 0),o(t?"chapterSidebar":"sidebar")):r("sidebar"===l?"chapterSidebar":"sidebar")},[t,i]),{isTopLevelSidebar:"sidebar"===n,isTopLevelChapterSidebar:"chapterSidebar"===n,isBottomLevelSidebar:"sidebar"===l,isBottomLevelChapterSidebar:"chapterSidebar"===l}},lj=(0,f.forwardRef)(function(e,t){var i,l,o,n,r,a,d,u,s,c,m,_,y,x,I,b,S,T,k,L,A,R,N,P,j,D,V,O,B,H,W,z,G,Z;let{item:q,playPrevFunc:K,playNextFunc:$,deleteCurrentSwiper:Y,fullScreenTarget:X,isActive:et,isNext:ei,swiper:el,children:eo,customProps:en,isLast:er,handleNextOnLast:ea,slideListInsideFunc:ed,InnerPlayer:ef,className:ej,isShowGuide:eD,isClientMiniWin:eF,style:eV,close:eO,hotDefaultList:eB,mixDefault:eU,seriesDefault:eH,relatedDefault:ez,currentAwemeInfo:eG,onAwemeInfoChange:eq,clickedCard:e$,moreBoxShowList:eY,getCurrentTime:eQ,modalInnerFeedCard:eX,modalEnterFrom:eJ,defaultCommentShow:e0,startTime:e1,splashAdStatus:e2,changeSplashAdStatus:e3,isSplashTransitionEnd:e6,isFirst:e5,needStaticContainer:e4,searchSideCardProps:e7,onSearchTextClick:e9,searchListType:te,hideSidebarSwitch:tt,searchFrom:to}=e,{abtestData:tr={},tab:td,userContext:tu,logParams:ts}=en||{},tc=(0,f.useRef)(0),tv=(0,f.useMemo)(()=>({Feed:[em.lT.Recommend,em.lT.Follow,em.lT.Friend,em.lT.Topic],Whole:[em.lT.Recommend,em.lT.Follow,em.lT.Friend,em.lT.Topic,em.lT.Modal]}),[]),tf=(0,f.useMemo)(()=>(null==tr?void 0:tr.relatedSmooth)===1?tv.Feed.includes(td):(null==tr?void 0:tr.relatedSmooth)===2?em.lT.Modal===td:(null==tr?void 0:tr.relatedSmooth)===3&&tv.Whole.includes(td),[null==tr?void 0:tr.relatedSmooth,td,tv]),tm=tf?null==tr?void 0:tr.relatedSmooth:0,tp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inner_player",t=arguments.length>1?arguments[1]:void 0;if(!tm&&tX)return null==eO?void 0:eO(e,t);eZ.sendLog("closePlayer",{click_method:e,enter_from:t});let i=e;"click_screen"===e&&(i="click_blank"),ep.logInstance.sendLog("closeVideoCard",{enter_method:i,type:t,enter_from_merge:(0,eI.vM)()}),tz.dispatch("modalAwemeInfo",null),!ip.current&&eb.emit(eb.EVENT.pageFullScreen,{fullScreen:!1,playerId:null==tB?void 0:tB.playerId,oldFullScreen:!0,clickMethod:"inner_player"}),eX&&setTimeout(()=>{null==eO||eO()})},t_=(0,f.useRef)(null),{userInfo:th,dispatch:ty}=tu||{},{isLogin:tw}=th||{},{globalIsSideBarShow:tx,setIsSideBarShowFunc:tC,isFullScreen:tI,isCssFullScreen:tE,setTargetVideoRef:tS=()=>{},slideVideoTab:tT,setSlideVideoTab:tA,videoToast:tR=e=>M.F.info(e,t_.current),dislikeIdList:tN,globalIsCommentTrayPushGuideShow:tP,globalCommentTrayPushGuideType:tM,setCommentTrayPushGuideTypeFunc:tj,setIsCommentTrayPushGuideShowFunc:tF}=(0,f.useContext)(ee.C),[tV,tO]=(0,f.useState)(!0),[tB,tU]=(0,f.useState)(null),{awemeFeed:tz,metaCtxId:tG}=tk(),tZ=tz.useValue("modalAwemeInfo"),tX=e.isUpperFeed||!!(tm&&tZ),{pathname:tJ}=(0,ec.a)(),t0=(0,f.useRef)(tJ),t1=(0,f.useRef)(tJ);!(0,eE.Nr)(tJ)&&(t1.current=tJ);let[t3,t6]=(0,f.useState)(!1),[t5,t4]=(0,f.useState)(e_.L.Author),[t7,t9]=(0,f.useState)(!1),[it,il]=(0,f.useState)(),[ia,id]=(0,f.useState)(),iu=tC||t6,is=tA?tT:e_.L.AbstractList,im=tA||t4,ip=(0,f.useRef)(!1);(0,f.useEffect)(()=>{if(tB&&et&&tX&&tm){!tB.fullscreen&&eb.emit(eb.EVENT.pageFullScreen,{clickMethod:"inner_feed",fullScreen:!0,playerId:tB.playerId});let e=e=>{eb.emit(eb.EVENT.pageFullScreen,{clickMethod:"inner_feed",fullScreen:!e,playerId:tB.playerId})};return null==tB||tB.on(ev.Events.FULLSCREEN_CHANGE,e),()=>{null==tB||tB.off(ev.Events.FULLSCREEN_CHANGE,e),eb.emit(eb.EVENT.pageFullScreen,{clickMethod:"inner_feed",fullScreen:!1,playerId:tB.playerId})}}},[tX,tm]);let ih=(0,f.useRef)(!1),iI=(0,f.useRef)(!1),ib=(0,f.useRef)(!1),iS=(0,f.useRef)(null),iT=(0,f.useRef)(null),iN=(0,f.useRef)(null),iP=(0,f.useRef)(null),iM=(0,f.useRef)(null),ij=(0,f.useRef)(),iD=(0,f.useRef)(null),iF=(0,f.useMemo)(()=>"string"==typeof to&&to.startsWith("video_abstract"),[to]),iV=tX?tV:(!(0,h.Jt)(q)||is===e_.L.Comment)&&(tC?tx:t3),iO=(0,f.useCallback)(M.F.infoInModalVideo.bind(M.F),[]),iB=tX||td===em.lT.Modal?iO:tR;(0,f.useEffect)(()=>{if(!tm)return;let e=tz.subscribe("modalAwemeInfo",e=>{let t=document.querySelector('[data-e2e="recommend-guide-mask"]');t&&e&&eb.emit(eb.EVENT.RecommendGuideClose),t=null,tB&&!eX&&e&&tB.isActive&&tB.paused&&tB.play()});return()=>{e()}},[tm,tB,eX]);let{changeNextVideo:iU,changePrevVideo:iH,awemeInfo:iW,updateAwemeInfo:iz,prevAwemeInfo:iG,nextAwemeInfo:iZ,isInnerFeed:iq,enterFrom:iK,updateLogParams:i$}=tL({player:tB,originAwemeInfo:tm&&tZ||eG||q,isActive:et,isLast:er,toast:iB,modalEnterFrom:eJ,handleNextOnLast:ea,handleOuterPlayNext:$,handleOuterPlayPrev:K,isInnerFeedCondition:tX,scene:td});(0,f.useEffect)(()=>{null==eq||eq(iW)},[iW]),(0,f.useEffect)(()=>{let e=tz.getValue("activeIndex");return tz.subscribe("activeIndex",t=>{tm&&tz.getValue("modalAwemeInfo")&&(t>e?iU():t<e&&iH(),e=t)})},[iU,iH]),(0,f.useEffect)(()=>{if(tZ&&et)return tm&&(tO(!0),tB&&(tc.current=tB.currentTime,tZ.awemeId===iW.awemeId&&setTimeout(()=>{null==tB||tB.emit("enter_inner_feed")}))),()=>{var e,i,l,o;tm&&(null==tB||tB.emit("exit_inner_feed",iW.awemeId),(null===(o=t.current)||void 0===o?void 0:null===(l=o.getCurrAweme)||void 0===l?void 0:null===(i=l.call(o))||void 0===i?void 0:i.awemeId)===iW.awemeId&&(tc.current=0)),eb.emit(null==eb?void 0:null===(e=eb.EVENT)||void 0===e?void 0:e.quitInnerFeed,!0),tz.dispatch("modalAwemeInfo",null)}},[!tZ,tm]);let iY=(0,f.useMemo)(()=>!(0,J.p)(iW)||e2===w.QB.Fullscreen||e2===w.QB.Normal,[iW,e2,e6]),{showRelatedTabList:iQ,relatedBlockedByRecommendScore:iX}=tD({awemeInfo:iW,currentVideoFeedRef:iS,lastVideoFeedAwemeRef:iT,outFeedItem:q,scene:td,modalEnterFrom:eJ,abtestData:tr,isInnerFeed:iq}),{defaultCard:iJ,videoTag:i0}=tH({abtestData:tr,isActive:et,awemeInfo:iW,showRelatedTabList:iQ,clickedCard:null!=e$?e$:is===e_.L.Comment?e_.L.Comment:void 0,useCTR:td===em.lT.Recommend,scene:td}),i1=(0,f.useMemo)(()=>iF?e_.L.AbstractList:(null==iW?void 0:iW.awemeType)!==g.e.XgVideo||[e_.L.CollectFolder].includes(iJ)?iJ:e_.L.Comment,[iJ,iW,is,iF]),{stopAutoPlay:i2}=tW({isShow:iV||t7||iI.current,player:tB,isActive:et,awemeInfo:iW,abtestData:tr}),{curTab:i3,curVideoFeed:i6,changeTab:i5,lastVideoFeedAweme:i4}=tK({defaultTab:i1,isActive:et,stopAutoPlay:i2,awemeInfo:iW,abtestData:tr});iS.current=i6,iT.current=i4,t$({originAwemeInfo:q,awemeInfo:iW}),tY({awemeInfo:iW,curTab:i3,isActive:et,abtestData:tr,isUpperFeed:tX,modalAwemeInfo:tZ});let{handleAuthorVideoChange:i9,handleOtherVideoChange:le}=tQ({onChangeAwemeInfo:e=>{tX?iz(e):(null==e?void 0:e.inComingAwemeInfo)&&tz.dispatch("modalAwemeInfo",e.inComingAwemeInfo),(null==e?void 0:e.card)&&i5({tab:e.card})}}),{globalCommentCount:lt,updateGlobalCommentCount:li,fetchComment:ll}=t2({awemeInfo:iW});t8({isModal:tX,awemeInfo:iW,isActive:et,fetchComment:ll,player:tB,showSideCard:iV,commentpreloadAbStatus:null==tr?void 0:tr.commentAiPreloadStatus,adCommentpreloadAbStatus:null==tr?void 0:tr.adCommentAiPreloadStatus,scene:td,abUseSimpleNN:null==tr?void 0:tr.useSimpleNN,abVid:null==tr?void 0:tr.commentAiVid});let{reportParams:lo}=io({originAwemeInfo:q,awemeInfo:iW,logParams:ts,curCard:i3,expandCard:iV?i3:"",isSideBarShow:iV,isInnerFeedCondition:tX,searchSideCardProps:e7,modalEnterFrom:eJ}),{hasRelatedCardShown:ln}=ir({isActive:et,player:tB,showSideCard:iV});(0,f.useEffect)(()=>{i$({logParams:lo})},[lo]);let lr=(0,f.useCallback)(e=>{let t="chapterSidebar"===e;il(t?"sidebar":"chapterSidebar"),id(t?"chapterSidebar":"sidebar")},[]),la=(0,f.useCallback)(e=>{var t,i;let{tab:l,clickMethod:o="",awemeInfo:n=iW,isFromUserPersonalPannel:r=!1}=e;lv();let a="chapterSidebar"===ia;if(a&&lr("sidebar"),l!==e_.L.Comment){if(tX){if(l===i3&&!a)return tp()}else{im(l),i5({tab:l}),tz.dispatch({modalAwemeInfo:n,nextAwemeInfo:null,prevAwemeInfo:null}),ep.logInstance.sendLog("enterVideoCardTab",{from_group_id:null==n?void 0:n.awemeId,type:l,enter_method:o,enter_from_merge:(0,eI.vM)(),enter_from:null!==(t=null==ts?void 0:ts.enter_from)&&void 0!==t?t:(0,eI.mo)(),tab_name:(null==ts?void 0:ts.tab_name)||(0,eA.zD)(),module_name:null==ts?void 0:ts.module_name});return}}iV&&l===i3&&!a?(lD(!1,{from:o}),ep.logInstance.sendLog("closeVideoCard",{type:l,enter_method:o,enter_from_merge:(0,eI.vM)()})):(i5({tab:l}),im(l),lD(!0,{from:o}),ep.logInstance.sendLog("enterVideoCardTab",{from_group_id:null==n?void 0:n.awemeId,type:l,enter_method:o,enter_from_merge:(0,eI.vM)(),enter_from:null!==(i=null==ts?void 0:ts.enter_from)&&void 0!==i?i:(0,eI.mo)(),tab_name:(null==ts?void 0:ts.tab_name)||(0,eA.zD)(),module_name:null==ts?void 0:ts.module_name}))},[iV,iW,tX,i3,eO,tr,tE,ia,lr]);(0,eg.o)(()=>eb.listen(eb.EVENT.OpenRelatedCard,e=>{la(e)}),[tr]),(0,f.useEffect)(()=>{if(!tX&&et&&eX){let e;let t="auto";"mix"===eX?e=e_.L.Mix:"author_card"===eX?(e=e_.L.Author,eJ===eh.a.FollowAuthorModal&&(t="click_follow_head_show")):"series"===eX?e=e_.L.Series:"collect_folder"===eX&&(e=e_.L.CollectFolder),e&&setTimeout(()=>{la({tab:e,clickMethod:t})})}},[tX,eX,la,eJ]),(0,f.useEffect)(()=>{if(tB&&tZ&&!tm&&et&&!tX){let e=tB.playerId;if(es.ZP.instManager.getActiveId()===e||!tB.paused)return es.ZP.instManager.setActive(e,!1),tB.pause(),()=>{es.ZP.instManager.setActive(e,!0),setTimeout(()=>{tB.play()})}}},[tB,tZ,et,tm,tX]),(0,f.useEffect)(()=>{if(et){let e=iV&&i3===e_.L.Comment;C.Le.setConfig(C.gI.IsCommetTab,e)}},[et,iV,i3]);let{closeAdCard:ld,isShowAdCard:lu,isAdAweme:ls}=ic({awemeInfo:iW,userInfo:th,isActive:et,abtestData:tr,toast:iB,isFirst:e5,isUpperFeed:tX,changeSplashAdStatus:e3}),{closeAiSearchCard:lv,isShowAiSearchCard:lf,word:lm,renderAiSearchSideCard:lp}=iv({awemeInfo:iW,isActive:et,onOpenCard:()=>{lu&&ld(),lh&&ly(),!oi&&lH()},abtestData:tr,toast:iB,isLogin:tw,accountParentEl:(0,eS.r)()&&X,onLoginSuccess:()=>{null==ty||ty({type:"updateUserInfo"})}});(0,eu.Z)(()=>{lv()},[null==iW?void 0:iW.awemeId]);let{openShopDetailCard:lg,isShowShopDetailSideCard:lh,closeShopDetailCard:ly,isFirstLoad:lw,isAutoOpen:lx}=i_({awemeInfo:iW,isActive:et,onOpenCard:()=>{lu&&ld(),lf&&lv()},isLogin:tw,accountParentEl:(0,eS.r)()&&X,onLoginSuccess:()=>{null==ty||ty({type:"updateUserInfo"})},onCloseCard:()=>{ib.current=!0},abtestData:tr,toast:iB}),lC=(0,f.useMemo)(()=>(0,ey.o4)(iW),[iW]),lI=lC?(0,ey.ZO)({rawAdData:(0,h.Rx)(iW)}):{},lE=lC?{promotion_id:lI.promotion_id,product_id:lI.product_id,shop_info:{author_id:null==iW?void 0:null===(i=iW.authorInfo)||void 0===i?void 0:i.uid}}:(null==iW?void 0:null===(o=iW.anchorInfo)||void 0===o?void 0:null===(l=o.extra)||void 0===l?void 0:l[0])||{},{sendPrefetch:lS,cancelPrefetch:lT}=(0,ew._t)(()=>{var e;return(0,ex.L)({promotionId:null==lE?void 0:lE.promotion_id,originType:638302,secAuthorId:null==iW?void 0:null===(e=iW.authorInfo)||void 0===e?void 0:e.secUid,roomId:"",itemId:null==iW?void 0:iW.awemeId})}),lj=(0,f.useCallback)(e=>{let{clickMethod:t}=e||{};return("hot_key"===t||"click_icon"===t)&&iV&&i3===e_.L.Comment&&(lh||lu||lf)?(!ih.current&&(ih.current=!0,eb.emit(eb.EVENT.videoStopPlayNext,{openSideCard:!0})),ly(),ld(),lv(),!0):(la({tab:e_.L.Comment,clickMethod:t||"click_icon"}),(!iV||i3!==e_.L.Comment)&&(!!iV&&i3!==e_.L.Comment||!0))},[iV,la,i3,lh,lu,lf]);(0,eu.Z)(()=>{iI.current=lh},[lh]);let lD=(e,t)=>{let{from:i}=t||{};!ih.current&&e&&"auto"!==i&&(ih.current=!0,eb.emit(eb.EVENT.videoStopPlayNext,{openSideCard:!0})),ih.current&&!e&&(ih.current=!1,eb.emit(eb.EVENT.videoRemoveStopPlayNext,{openSideCard:!0})),tX?(tO(e),e&&!iV&&(ly(),lv())):(null==iu||iu(e),e&&(ld(),lv(),ly(),tb(tg.COMMENT_BTN_CLICKED)))},{openSpecificTab:lF}=ig({showSideCard:iV,isActive:et,originAwemeInfo:q,showRelatedTabList:iQ,slideVideoTab:is,abtestData:tr,changeTab:i5,isUpperFeed:tX,defaultLandingTab:(0,f.useMemo)(()=>iF?e_.L.AbstractList:e0?e_.L.Comment:void 0,[e0,iF]),handleShowSidebar:lD,logParams:ts,searchFrom:to}),{hotData:lV}=iy({awemeInfo:iW}),lO=iw({isActive:et,isNext:ei,player:tB,showSideCard:iV,abtestData:tr}),{chapterProgress:lB,chapterSliderShow:lU,triggerChapterSliderShow:lH}=eK({player:tB,awemeInfo:iW,abTestData:tr,chapterScrollElRef:iP,topLevelSidebar:ia,activateCard:lr,resetClosingShopRef:()=>{ib.current=!1},isActive:et,isInnerFeed:iq}),{onAvatarClick:lW,onRelatedClick:lz,videoInfoTags:lG}=ix({videoTag:i0,scene:td,reportParams:lo,originAwemeInfo:q,isInnerFeed:iq,player:tB,awemeInfo:iW,canShowMixCard:!0,canShowSeriesCard:!0,canShowRelatedCard:!0,canShowRelatedSearchFeedBar:!0,canShowChapterFeedbar:!0,updateVideoInfo:iz,curCard:i3,toast:iB,showRelatedTabList:iQ,handleAvatarClick:e=>{let{clickMethod:t,awemeInfo:i}=e||{};la({tab:e_.L.Author,clickMethod:t||"click_icon",awemeInfo:i})},handleMixClick:e=>{let{clickMethod:t,awemeInfo:i}=e||{};la({tab:e_.L.Mix,clickMethod:null!=t?t:"click_feed_bar",awemeInfo:i})},handleSeriesClick:e=>{let{clickMethod:t,awemeInfo:i}=e||{};la({tab:e_.L.Series,clickMethod:null!=t?t:"click_feed_bar",awemeInfo:i})},handleHotClick:()=>{la({tab:e_.L.Hot,clickMethod:"click_feed_bar"})},handleRelatedClick:e=>{la({tab:e_.L.Related,clickMethod:(null==e?void 0:e.clickMethod)||"click_feed_bar",awemeInfo:null==e?void 0:e.awemeInfo})},isShowSideBar:lu||lf||iV||lh,abtestData:tr,chapterProgress:lB,triggerChapterSliderShow:()=>{lv(),lH()}}),{inImmersive:lZ}=i7({player:tB,isActive:et}),{follow:lq,unFollow:lK}=e8({selfUid:null==th?void 0:null===(n=th.info)||void 0===n?void 0:n.uid,actionUid:null==iW?void 0:null===(r=iW.authorInfo)||void 0===r?void 0:r.uid,defaultFollowerStatus:null==iW?void 0:null===(a=iW.authorInfo)||void 0===a?void 0:a.followerStatus,defaultFollowStatus:null==iW?void 0:null===(d=iW.authorInfo)||void 0===d?void 0:d.followStatus,logExtraParams:(0,E._)({author_id:null==iW?void 0:null===(u=iW.authorInfo)||void 0===u?void 0:u.uid,group_id:null==iW?void 0:iW.awemeId,from_group_id:null==q?void 0:q.awemeId,music_id:null==iW?void 0:null===(s=iW.music)||void 0===s?void 0:s.mid,compilation_id:null==iW?void 0:null===(c=iW.mixInfo)||void 0===c?void 0:c.mixId,aweme_type:null==iW?void 0:iW.awemeType,is_pure:lZ?"1":"0",to_user_id:null==iW?void 0:null===(m=iW.authorInfo)||void 0===m?void 0:m.uid,item_duration_ms:(null==iW?void 0:null===(_=iW.video)||void 0===_?void 0:_.duration)||0},lo),isLogin:tw,accountParentEl:(0,eS.r)()&&X,onLoginSuccess:()=>{null==ty||ty({type:"updateUserInfo"})}}),{followStatus:l$}=ti({selfUid:null==th?void 0:null===(y=th.info)||void 0===y?void 0:y.uid,actionUid:null==iW?void 0:null===(x=iW.authorInfo)||void 0===x?void 0:x.uid,defaultFollowerStatus:null==iW?void 0:null===(I=iW.authorInfo)||void 0===I?void 0:I.followerStatus,defaultFollowStatus:null==iW?void 0:null===(b=iW.authorInfo)||void 0===b?void 0:b.followStatus});iC({scene:td,isOuter:!tX,isActive:et,player:tB});let{isMiniWin:lY}=iE({scene:td,awemeInfo:iW,scrollElRef:iN,changeNextVideo:iU,changePrevVideo:iH,isUpperFeed:tX,swiper:el,isActive:et&&!tZ||tX,feedCssFullScreen:tE,player:tB,onFullScreen:e=>{e&&lD(iq,{from:"auto"}),tX&&!tm&&!e&&eb.emit(eb.EVENT.pageFullScreen,{fullScreen:!0,playerId:null==tB?void 0:tB.playerId,clickMethod:"inner_player"})},onCssFullScreen:e=>{e&&lD(iq,{from:"auto"}),tX&&!e&&!(tI||(0,eS.r)())&&tp()},onFullScreenrestore:()=>{lD(iq,{from:"auto"})},onTriggerModalPlayerClose:()=>{tX&&tp("click_button",i3)},onCanPlay:()=>{let e=()=>{tB.seek(e1,"play"),C.Le.setConfig(C.gI.PreviewPlayInfoRecord,{awemeId:"",recordPlayTime:0})};if(tX){let t=null==eQ?void 0:eQ();t&&tB.seek(t,"play"),eX&&e()}else if(tc.current)tB.seek(tc.current,"play"),tc.current=0;else if(e1)e();else{let{continationInfo:e}=iW;(null==e?void 0:e.playProgress)&&(tB.seek(null==e?void 0:e.playProgress,"play"),delete e.playProgress)}},onPlay:()=>{!tX&&tz.getValue("modalAwemeInfo")&&!tm&&setTimeout(()=>{var e;return null===(e=tB.pause)||void 0===e?void 0:e.call(tB)})},onVideoTitleClick:()=>{var e,t;la({tab:e_.L.Author,clickMethod:"click_title"}),eZ.sendLog("clickAuthorHead",(0,E._)((0,Q._)((0,E._)({click_from:"title",urlParamList:["previous_page"],author_id:null==iW?void 0:null===(e=iW.authorInfo)||void 0===e?void 0:e.uid,group_id:null==iW?void 0:iW.awemeId,log_pb:null==iW?void 0:iW.logPb,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",from_follow_list:(null===(t=C.Le.getConfig(C.gI.FromFollowList))||void 0===t?void 0:t.tag)?"1":"0"},lo),{action:iV?"close":"open"}),(0,eT.t)()))}});ik({scene:td,awemeInfo:iW,isActive:et,isNext:ei,isUpperFeed:tX,modalEnterFrom:eJ,smoothInner:tf&&iq});let{authorConfig:lQ,commentConfig:lX}=iL({awemeInfo:iW,customProps:en,reportParams:lo,fullScreenTarget:X,tab:i3,showSideCard:iV,isShowRelatedCard:iV,player:tB,scrollElRef:iN,followStatus:l$,handleCommentClick:e=>lj(e),isActive:et,isUpperFeed:tX,globalIsCommentTrayPushGuideShow:tP,globalCommentTrayPushGuideType:tM,setCommentTrayPushGuideTypeFunc:tj,setIsCommentTrayPushGuideShowFunc:tF,onSearchTextClick:e9,scene:td});iA({isActive:et,isUpperFeed:tX,modalAwemeInfo:tZ,showSideCard:iV,isShowAdCard:lu,isShowAiSearchCard:lf,isShowShopDetailSideCard:lh,abtestData:tr,scene:td}),(0,f.useImperativeHandle)(t,()=>({getPlayer:()=>tB,setIsAuthorCardShow:lD,setIsShowRelatedCard:lD,getCurTab:()=>i3,getCurrAweme:()=>iW,player:tB}),[et,i3,tB,iW]);let{onCooperationAvatarClick:lJ,isInCooperation:l0,changeIsInCooperation:l1}=iR({curTab:i3,awemeInfo:iW,handleChangeVideo:e=>{iz({inComingAwemeInfo:e})},handleCooperationAvatarClick:e=>{var t;tX?(i5({tab:e_.L.Author}),lD(!0,{from:"auto"}),iz({inComingAwemeInfo:e})):(tz.dispatch({modalAwemeInfo:e,nextAwemeInfo:null,prevAwemeInfo:null}),i5({tab:e_.L.Author})),ep.logInstance.sendLog("enterVideoCardTab",{from_group_id:e.awemeId,type:e_.L.Author,enter_method:"click_co_author_head",enter_from:null!==(t=null==ts?void 0:ts.enter_from)&&void 0!==t?t:(0,eI.mo)(),enter_from_merge:(0,eI.vM)(),tab_name:(null==ts?void 0:ts.tab_name)||(0,eA.zD)(),module_name:null==ts?void 0:ts.module_name})},reportParams:lo,isShowVideoCard:iV});(0,eu.Z)(()=>{!tZ&&et&&(l1(!1),(tI||tE)&&lD(!1,{from:"auto"}))},[null==tZ?void 0:tZ.awemeId]);let{isPermanentDislikeBtn:l2,isDislikePanelVisible:l3,dislike:l6,revokeDislike:l5,disableShortCut:l4,isAdapterMiniHeightWithDislikeBtn:l8}=lk({awemeInfo:iW,scene:td,deleteCurrentSwiper:Y,isModal:tX,videoToast:iB,abtestData:tr,dislikeIdList:tN,uuid:null===(S=(0,F.Es)())||void 0===S?void 0:S.user_unique_id,player:tB}),l7=(0,f.useMemo)(()=>"waterFall"===eJ&&(null==tZ?void 0:tZ.awemeId)?(0,Q._)((0,E._)({},ts),{from_group_id:null==tZ?void 0:tZ.awemeId}):ts,[ts,null==tZ?void 0:tZ.awemeId,eJ]),l9=(0,f.useMemo)(()=>{if(!(null==e7?void 0:e7.scene))return{};let{awemeId:e,desc:t}=iW,i={aladdin_words:t,list_item_id:e};return!(null==e7?void 0:e7.removeThirdItemId)&&(i.search_third_item_id=e),i},[null==e7?void 0:e7.scene,iW]),oe=(0,f.useMemo)(()=>{if(null==e7?void 0:e7.toggleButtonText)return null==e7?void 0:e7.toggleButtonText;switch(null==e7?void 0:e7.scene){case"mix":var e,t;if(null==iW?void 0:null===(e=iW.seriesInfo)||void 0===e?void 0:e.seriesId)return(null==iW?void 0:null===(t=iW.seriesInfo)||void 0===t?void 0:t.isSeries2Mix)?"合集":"短剧";return"合集";case"user":return"相关作品";default:return""}},[e7]),ot=!iV||lh||lu||lf||td===em.lT.Search&&!et,oi=!lU||!et||lh||lu||lf,{isTopLevelSidebar:ol,isTopLevelChapterSidebar:oo,isBottomLevelSidebar:on,isBottomLevelChapterSidebar:or}=lM({sidebarHidden:ot,chapterSidebarHidden:oi,bottomLevelSidebar:it,setBottomLevelSidebar:il,topLevelSidebar:ia,setTopLevelSidebar:id}),oa=(0,f.useMemo)(()=>({showSideCard:!ot,curTab:is,setSideCard:lD,setCurTab:im}),[ot,is,lD,im]),od=(0,Q._)((0,E._)({},l9,null==ts?void 0:ts.search_params,null==lo?void 0:lo.search_params),{item_rank:((null===(k=ij.current)||void 0===k?void 0:null===(T=k.getCurIndex)||void 0===T?void 0:T.call(k))||0)+1});(0,f.useEffect)(()=>{(null==en?void 0:en.tab)===em.lT.Search&&(iW.searchLogParams=od)},[od]);let ou=iK&&[e_.t.Mix,e_.t.Series].includes(i6)?"author_":"";!function(e){let{awemeInfo:t,curTab:i}=e,l=(0,f.useRef)(null);(0,f.useEffect)(()=>{t?l.current=function(e){var t;if(!(null===(t=window)||void 0===t?void 0:t.requestAnimationFrame))return lP;let{timeout:i=1e4}=e,l={fps:0,duration:0,scene:(0,ie.yW)(),jank:0,jank_duration:0,bjank:0,bjank_duration:0,tab:e.curTab},o=0,n=lN(),r=n,a=null,d=null;return!function e(){a=requestAnimationFrame(function(){o++;let t=lN(),i=t-r;r=t,i>lA&&(l.jank++,l.jank_duration+=i),i>lR&&(l.bjank++,l.bjank_duration+=i),e()})}(),d=setTimeout(()=>{a&&cancelAnimationFrame(a)},i),function(){a&&cancelAnimationFrame(a),d&&clearTimeout(d);let e=lN()-n;l.fps=Math.min(Math.round(1e3*o/e),60),l.duration=Math.round(e),lL.sendLog("prf_slider_modal_video",l)}}({awemeInfo:t,curTab:i}):l.current=null},[t]),(0,f.useLayoutEffect)(()=>{let e=eb.listen(eb.EVENT.firstFrameReady,()=>{if(l.current){var e;null===(e=l.current)||void 0===e||e.call(l),l.current=null}});return()=>{e()}})}({awemeInfo:tZ,curTab:i3});let os=tX&&et?"slideMode":"sliderVideo",oc=(0,f.useMemo)(()=>({playerScene:td,globalCommentCount:lt,setGlobalCommentCount:li,authorVideoCardClick:i9,modalEnterFrom:eJ,player:tB,stopAutoPlay:i2}),[td,lt,li,i9,tB,eJ,i2]),ov=!ek._.isRenderOnActive(tr)||et;return et&&(null==iW||null===(L=iW.chapterInfo)||void 0===L||L.status),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(eR.v.Provider,{value:oc,children:(0,v.jsx)(tl.k,{componentName:"Container3",children:(0,v.jsxs)("div",{"data-e2e":et?"feed-active-video":"feed-video","data-e2e-vid":null==iW?void 0:iW.awemeId,id:os,className:p()(eP.playerCommentWrapper,"isDark isDeepDark",`video_${iW.awemeId}`,os,ej,{isMiniWindow:eF,[eP.isMiniWindowActive]:et&&eF,[eP.flex]:!lO,[eP.isFullScreen]:tI,[eP.inOutFeed]:!tX,[eP.miniWidth]:iV,[eP.adapterSeventh]:!lh,[eP.shopCard]:lh,[eP.adapterMiniHeight]:tX,[eP.adapterMiniHeight455]:tX&&td===em.lT.Recommend,[eP.adapterMiniHeightWithDislikeBtn]:l8,[eP.searchFit]:td===em.lT.Search,relatedUiAdapter:!(td===em.lT.Search&&!tX),[eP.transparent]:(0,J.p)(iW)&&!e6,upperFeedClass:tX,[eP.forFixedLayer]:eJ===eh.a.Im&&et}),style:eV,ref:iM,children:[(0,v.jsxs)("div",{className:p()(eP.playerContainer,"playerContainer",eN.z,{[eP.isHavePlayer]:iW,[eP.isSafari]:(0,eL.G6)(),[eP.showSideBar]:lh||lu||lf||iV||lU,[eP.noTransition]:!iV&&!lU||lh||ib.current}),children:[eo,(0,v.jsxs)("div",{className:p()(eP.playerWrap,"slider-video",{isVertical:(null==iW?void 0:null===(A=iW.video)||void 0===A?void 0:A.height)>(null==iW?void 0:null===(R=iW.video)||void 0===R?void 0:R.width)}),ref:e=>{et?!t_.current&&!tX&&(t_.current=e,tS(t_)):t_.current=null},children:[td===em.lT.Modal&&(0,U.DT)()&&!tZ&&(0,v.jsx)("div",{className:eP.electronDrag}),(null==iW?void 0:iW.debugInfo)&&(0,v.jsx)(eW,{req:null==iW?void 0:null===(N=iW.debugInfo)||void 0===N?void 0:N.web_debug_req,video:null==iW?void 0:null===(P=iW.debugInfo)||void 0===P?void 0:P.client_rec_debug_info,size:{height:null==tB?void 0:tB._videoHeight,width:null==tB?void 0:tB._videoWidth},gear:null==iW?void 0:null===(V=iW.video)||void 0===V?void 0:null===(D=V.bitRateList)||void 0===D?void 0:null===(j=D[0])||void 0===j?void 0:j.gearName,showPanelRightside:!0}),(0,v.jsx)(eM,{children:(0,v.jsx)(ef,(0,Q._)((0,E._)({},e),{actionFollow:lq,actionUnFollow:lK,isClientMiniWin:eF,userInfo:th,dispatch:ty,awemeInfo:iW,nextAwemeInfo:iZ,prevAwemeInfo:iG,videoTags:lG,isInnerFeed:iq,playNextFunc:iU,playPrevFunc:iH,deleteCurrentSwiper:Y,toggleComment:e=>lj(e),onCooperationAuthorClick:lJ,isShowCooperation:!0,onAvatarClick:lW,avatarTipText:tX&&i3===e_.L.Author?"退出作者主页":void 0,logParams:(0,Q._)((0,E._)({},lo,iW.logParams),{relation:String(l$),is_click_cover:Number(tX||q!==iW),enter_from:`${ou}${tX?tq(i6):null==lo?void 0:lo.enter_from}`,search_params:od}),videoToast:iB,abtestData:tr,openSpecificTab:lF,abTestData:tr,isFullScreen:tI,isAuthorCardShow:!1,slideListInsideFunc:ed,sideBarShow:iV,onRelatedClick:iQ.includes(e_.L.Related)||iX?lz:void 0,isShowRelatedCard:tX,isShowGuide:eD,showPlaySwitch:tE||tI||!1,moreBoxShowList:(0,Q._)((0,E._)({},eY),{notInterestingIcon:tX?!iq&&(null==q?void 0:q.awemeId)===(null==iW?void 0:iW.awemeId):null===(z=null==eY?void 0:eY.notInterestingIcon)||void 0===z||z,unfollow:!tX||null===(G=null==eY?void 0:eY.unfollow)||void 0===G||G,report:!tX||null===(Z=null==eY?void 0:eY.report)||void 0===Z||Z}),shortCutFiltered:(null==q?void 0:q.awemeId)!==(null==iW?void 0:iW.awemeId)||tX?[eC.getShortcut().dislike.badgeText]:[],positionBoxClassName:{right:p()(eP.posTransition,iV||lu||lf||lh||lU?null:eP.interactionPos,eP.removeSlideRelatedButton)},isAdShortCut:!iV,isShowAdCard:lu,isShowAiSearchCard:lf,isShowShopSideCard:lh,onShopAnchorClick:()=>{lh?ly():(lg(),lT())},onShopAnchorMouseEnter:()=>{!lh&&lS({reqKey:null==lE?void 0:lE.promotion_id})},onShopAnchorMouseLeave:()=>{!lh&&lT()},defaultIsPageFullScreen:!tI&&!!tX&&!tm||void 0,onDislike:l6,isPermanentDislikeBtn:l2,disableShortCut:l4,isDislike:l3,splashAdStatus:e2,fullScreenTarget:null!=X?X:iM.current,horizontalToggleProps:{showHorizontalToggle:!!(null==e7?void 0:e7.scene)&&!(t7||iV||lu||lf||lh),onClick:()=>{var e;t9(!0),ep.logInstance.sendLog("enterVideoCardTab",{enter_from:"general_search",enter_from_merge:"general_search",enter_method:"click_card_entrance",type:ii(null==e7?void 0:e7.scene,iW,null==ts?void 0:null===(e=ts.search_params)||void 0===e?void 0:e.token_type)})},buttonText:oe,buttonClassName:"",scene:null==e7?void 0:e7.scene},enableAutoPlayPlugin:!!(null==e7?void 0:e7.scene)||tX,isUpperFeed:tX,sideCardContext:oa,searchListType:te,disableFullScreenSearchBar:!1,chapterProps:{chapterProgress:lB,triggerChapterSliderShow:()=>{lv(),lH()}},children:(0,v.jsx)(ta,{onPlayer:tU})}))})]})]}),ov&&(0,v.jsx)("div",{id:"videoSideCard",className:p()(eP.sideBar,eP.sideBarDefaultWidth,"isDark",{[eP.sideBarHidden]:ot,[eP.noTransition]:!iV,[eP.middle]:!lO,[eP.force300pxWidth]:td===em.lT.Search&&!tX&&!ot,[eP.displayNone]:eF,[eP.sideBarInBottomLayer]:on,[eP.sideBarInUnderLayer]:oo,[eP.sideBarInTopLayer]:ol}),style:{position:or?"absolute":void 0},onWheel:e=>e.stopPropagation(),ref:iN,children:ek._.isHideSiderLoading(tr)?null:!lO&&iV&&(0,v.jsx)(tn,{})}),iY&&(0,v.jsx)(l_,{awemeInfo:iW,elementtiming:"lcp_ele",maskClassName:p()({[eP.maskBackgroundHidden]:(0,J.p)(iW)&&!e6}),fetchPriority:e5?"auto":void 0,abtestData:tr,priorityServerBackupBg:!1}),l3&&!eF&&(0,v.jsx)(lc,{onRevokeDislike:l5,isActive:et}),e4&&!eF&&(0,v.jsx)(lb,{isActive:et,awemeInfo:iW,player:tB,abtestData:tr})]})})}),tZ&&!tX&&et&&((null==t0?void 0:t0.current)===tJ||(null==t0?void 0:t0.current)===(null==t1?void 0:t1.current))&&(0,v.jsx)(i8,(0,Q._)((0,E._)({},e,{abtestData:tr,logParams:l7,customProps:(0,Q._)((0,E._)({},e.customProps),{logParams:l7}),close:tp,getCurrentTime:()=>tZ.awemeId===q.awemeId?null==tB?void 0:tB.currentTime:null,clickedCard:l0?e_.L.Author:i3,hotDefaultList:i3===e_.L.Hot?null==iD?void 0:null===(O=iD.current)||void 0===O?void 0:O.getHotDefaultList():null,mixDefault:i3===e_.L.Mix?null==iD?void 0:null===(B=iD.current)||void 0===B?void 0:B.getMixDefaultParam():null,seriesDefault:i3===e_.L.Series?null==iD?void 0:null===(H=iD.current)||void 0===H?void 0:H.getSeriesDefaultParam():null,relatedDefault:i3===e_.L.Related?((e,t,i)=>{if(i&&!e.find(e=>e.awemeId===i.awemeId)){var l;e=e.concat(i);let t=null===(l=i.relatedRecommend)||void 0===l?void 0:l.popoverAwemeInfo;t&&!e.find(e=>e.awemeId===t.awemeId)&&(e=e.concat(t))}return t&&!e.find(e=>e.awemeId===t.awemeId)&&(e=[t,...e]),e})((null==iD?void 0:null===(W=iD.current)||void 0===W?void 0:W.getRelatedDefaultList())||[],iW,tZ):null,currentAwemeInfo:tZ,isActive:!0,isEnterByCssFullScreen:tE,isEnterByFullScreen:tI,changeSplashAdStatus:e3,fullScreenTarget:null!=X?X:iM.current}),{isClientMiniWin:eF,hasPlaceholder:!0,relatedSmooth:tm}))]})}),lD=!1,lF=e=>{(0,f.useEffect)(()=>{let e=eb.listen(eb.EVENT.changeVideoSideBar,e=>{let{isShowRelatedCard:t,isShowComment:i,lastStatus:l}=e;(i&&t)===!((null==l?void 0:l.isShow)&&(null==l?void 0:l.tab)===e_.L.Comment)});return()=>{null==e||e()}},[e])};var lV=(0,f.forwardRef)((e,t)=>{let{customProps:i,modalEnterFrom:l}=e,{tab:o}=i||{},n=(0,f.useRef)(null);return(0,f.useImperativeHandle)(t,()=>{var e,t;return{getPlayer:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.player},setIsAuthorCardShow:null===(e=n.current)||void 0===e?void 0:e.setIsAuthorCardShow,setIsShowRelatedCard:null===(t=n.current)||void 0===t?void 0:t.setIsShowRelatedCard,setTab:e=>{var t,i;null===(i=n.current)||void 0===i||null===(t=i.setTab)||void 0===t||t.call(i,e)},getCurTab:()=>{var e,t;return null===(t=n.current)||void 0===t?void 0:null===(e=t.getCurTab)||void 0===e?void 0:e.call(t)},getCurrAweme:()=>{var e,t;return null===(t=n.current)||void 0===t?void 0:null===(e=t.getCurrAweme)||void 0===e?void 0:e.call(t)}}},[n.current]),lF(!0),(0,v.jsx)(lj,(0,E._)({ref:n},e))});let lO=(0,f.memo)(e=>{let t=(0,f.useContext)(I.C),i=(0,f.useContext)(ei.Context),{from:l,videoRef:o,InnerPlayer:n,item:r}=e;return(0,v.jsx)(lV,(0,Q._)((0,E._)({},e),{isMultiInstanceScene:!0,ref:o,InnerPlayer:n,slardarInstance:et.oe,customProps:{userContext:i,abtestData:t,logParams:{video_mode:"landscape",enter_from:eo.get(l),tab_name:eo.get(l)},showRelatedCardEntry:!1,showRelatedCardGuide:!1,showTopicAndMusicCard:!1,showMixCard:!1,showMixCardEntry:!1,tab:eo.get(l)}}))}),lB=e=>{let{fullScreenTarget:t}=(0,f.useContext)(ee.C),{changeSplashAdStatus:i}=(0,f.useContext)(b.r),{item:l,isActive:o,isFirst:n,isNext:r}=e;(0,X.C)(ed.w3.components.mixplayer),(0,f.useLayoutEffect)(()=>{n&&(l.awemeType!==g.e.Normal||!(0,J.p)(l))&&(null==i||i(w.QB.Normal))},[n,l]),(0,en.I)({isActive:o,awemeInfo:l}),(0,er.u)({isActive:o,awemeInfo:l,index:null==e?void 0:e.index}),(0,ea.J)({index:null==e?void 0:e.index});let a=(0,Q._)((0,E._)({},e),{fullScreenTarget:t});return f.createElement(lO,a)},lU=e=>(0,v.jsx)(tl.k,{componentName:"MixPlayer",children:(0,v.jsx)(lB,(0,E._)({},e))}),lH=()=>{let[e,t]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{let e=eb.listen(eb.EVENT.videoPlay,()=>{t(!0)});return()=>{e()}},[]),{isFirstScreenFrame:e}};var lW=JSON.parse('{"v":"5.9.4","fr":30,"ip":0,"op":60,"w":280,"h":280,"nm":"finger_swipe_up_Low","ddd":0,"assets":[{"id":"image_0","w":280,"h":280,"u":"images/","p":"img_0.png","e":0},{"id":"comp_0","nm":"Swipe Hand_Up","fr":30,"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"Null 3","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.2,"y":1},"o":{"x":0.16,"y":0},"t":8,"s":[172,232,0],"e":[346,232,0],"to":[0,0,0],"ti":[0,0,0]},{"t":40}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.2,0.2,0.2],"y":[1,1,1]},"o":{"x":[0.001,0.001,0.001],"y":[0,0,0]},"t":0,"s":[100,100,100],"e":[85,85,100]},{"t":8}],"ix":6,"l":2}},"ao":0,"ip":0,"op":60,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":2,"nm":"Hand-Output.png","cl":"png","parent":1,"refId":"image_0","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.2],"y":[1]},"o":{"x":[0.001],"y":[0]},"t":0,"s":[0],"e":[100]},{"t":8}],"ix":11},"r":{"a":0,"k":32,"ix":10},"p":{"a":0,"k":[-60,-121.765,0],"ix":2,"l":2},"a":{"a":0,"k":[36.666,47.192,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"mask","parent":1,"td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-204.706,-37.647,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[117.647,117.647,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[327.581,123.705],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[283.773,-62.8],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":60,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"line","tt":2,"sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[192,139,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[125,-12.5],[125,15],[-125,10],[-125,-7.5]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,1,1,1,0.5,1,1,1,1,1,1,1,0,1,0.5,0.5,1,0],"ix":9}},"s":{"a":0,"k":[125.95,0],"ix":5},"e":{"a":0,"k":[-64,0],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":60,"st":0,"ct":1,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"main controller","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[140,178,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[80,80,100],"ix":6,"l":2}},"ao":0,"ip":0,"op":60,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":3,"nm":"move controller","parent":1,"sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.2,"y":1},"o":{"x":0.16,"y":0},"t":8,"s":[-20,32,0],"e":[154,32,0],"to":[0,0,0],"ti":[0,0,0]},{"t":40}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.2,0.2,0.2],"y":[1,1,1]},"o":{"x":[0.001,0.001,0.001],"y":[0,0,0]},"t":0,"s":[100,100,100],"e":[85,85,100]},{"t":8}],"ix":6,"l":2}},"ao":0,"ip":0,"op":60,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":0,"nm":"Swipe Hand_Up","parent":1,"refId":"comp_0","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":40,"s":[100],"e":[0]},{"t":48}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2,"l":2},"a":{"a":0,"k":[200,200,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"w":400,"h":400,"ip":0,"op":60,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":3,"nm":"wave controller","parent":2,"sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-63.529,-111.882,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[117.647,117.647,100],"ix":6,"l":2}},"ao":0,"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":3,"nm":"Null 1","parent":4,"sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"ip":7,"op":63,"st":7,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"tap circle 1","parent":7,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.2],"y":[1]},"o":{"x":[0.001],"y":[0]},"t":40,"s":[30],"e":[0]},{"t":48}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[110,110],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,1,1,1,0.5,1,1,1,1,1,1,1,0,1,0.5,0.5,1,0],"ix":9}},"s":{"a":0,"k":[0,-55],"ix":5},"e":{"a":0,"k":[0,55],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":7,"op":63,"st":7,"ct":1,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"tap ring 1","parent":5,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.2],"y":[1]},"o":{"x":[0.001],"y":[0]},"t":40,"s":[50],"e":[0]},{"t":48}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.2,0.2,0.2],"y":[1,1,1]},"o":{"x":[0.001,0.001,0.001],"y":[0,0,0]},"t":7,"s":[0,0,100],"e":[70,70,100]},{"t":17}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[140,140],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":7,"op":63,"st":7,"ct":1,"bm":0}],"markers":[]}'),lz=i("879562").default,lG={Recommend:0,0:"Recommend",Follow:1,1:"Follow",Friend:2,2:"Friend",Modal:3,3:"Modal",Topic:4,4:"Topic"},lZ={OUTSIDE:"outside",OUTOFCONTAINER:"out-of-container",INSIDE:"inside",OCCUPATION:"occupation",CONTAINERSTART:"container-start",CONTAINEREND:"container-end",WRAPPERSTART:"wrapper-start",WRAPPEREND:"wrapper-end",WRAPPERRIGHT:"wrapper-right"};let lq=30,lK=24,l$=24;var lY={mobileSlideList:"PHtFiGMy",border:"dXBFTCfr",xgControlsNew:"TzbovS4G",xgControlsNewV2:"gFEryD3j",swipeUpLottieContainer:"lVS_yE0E",show:"ZqQaer0a",swipeUpLottie:"Y8Y6laaY",swipeUpLottieDesc:"c5nwvWr7"};let lQ=()=>{let[e,t]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{if(!(0,B.$o)(R.LocalStorageKeys.MobileFirstGuide)){let e=new Image;e.src="https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/mobile/images/img_0.png",e.onload=()=>t(!0),e.onerror=()=>t(!1)}},[]),e},lX=()=>{let[e,t]=(0,f.useState)(!(0,B.$o)(R.LocalStorageKeys.MobileFirstGuide));(0,f.useEffect)(()=>{(0,B.qQ)(R.LocalStorageKeys.MobileFirstGuide,1);let e=setTimeout(()=>{t(!1)},5e3);return()=>clearTimeout(e)},[]);let i=()=>{t(!1)};return(0,v.jsxs)("div",{className:p()(lY.swipeUpLottieContainer,e&&lY.show),slot:lZ.INSIDE,onClick:i,onTouchStart:i,children:[(0,v.jsx)(lz,{className:p()(lY.swipeUpLottie),data:lW,loop:!0,autoplay:!0,assetsPath:"//lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/mobile/images/"}),(0,v.jsx)("div",{className:p()(lY.swipeUpLottieDesc),children:"上滑查看更多"})]})};i("429532");var lJ=i("815389"),l0={container:"lH2ArNRX",closeButton:"ihpGn2rz",splashAdComponent:"iKAB1Vtc",videoInfo:"XOD4QLT3",rightPositionBox:"cAsaAFNW"},l1=i("480280"),l2=i("222406"),l3=i("623527"),l6=e=>{let{shouldRender:t=!1,disable:l=!1}=e||{},o=!l,n=(0,f.useMemo)(()=>({}),[o,t]),r=(0,f.useMemo)(()=>({PictureMode:o?function(e){let{fallback:t=(0,v.jsx)(f.Fragment,{}),Component:i=f.Fragment,shouldRender:l=!1,componentName:o,pageName:n}=e;return function(e){let r=(0,f.useCallback)((e,t)=>{var i;l3.oe.event.error({name:l3.Mo.LazyErrorBoundary,report:{message:e.message,stack:null!==(i=e.stack)&&void 0!==i?i:"",componentStack:t.toString(),componentName:o,pageName:n}})},[]);return(0,v.jsx)(eM,{fallback:t,children:l?(0,v.jsx)(l2.SV,{fallback:(0,v.jsx)(f.Fragment,{}),onError:r,Slardar:l3.oe.getSlardarInstance(),children:(0,v.jsx)(f.Suspense,{fallback:t,children:(0,v.jsx)(i,(0,E._)({},e))})}):t})}}({Component:(0,f.lazy)(()=>Promise.all([i.e("66945"),i.e("85623")]).then(i.bind(i,480280)).then(e=>({default:e.PictureMode}))),shouldRender:!0,componentName:"PictureMode",pageName:"recommend"}):l1.PictureMode}),[o]);return(0,E._)({},n,r)},l5=i("352982"),l4=i.n(l5),l8=i("47047"),l7="SB87rr7f",l9=i("49969"),oe=i("472474");let ot=!1;if(!ot){ot=!0;let e=0;try{e=(null===(d=window)||void 0===d?void 0:d.MediaSource)&&(null===(s=window)||void 0===s?void 0:null===(u=s.MediaSource)||void 0===u?void 0:u.isTypeSupported)?1:0}catch(e){}if((0,U.DT)())ep.logInstance.sendLog("hardParseSupported",{is_supported_hevc1:(0,oe._u)()?1:0,is_supported_264:(0,oe.b4)()?1:0,is_enable_mse:e});else try{ef().probeConfigSupported({type:"file",video:{contentType:'video/mp4;codecs="hev1.1.6.L120.90"',width:1920,height:1080,bitrate:2e6,framerate:30}}).then(t=>{let i=(null==t?void 0:t.powerEfficient)?1:0;(0,B.qQ)(R.LocalStorageKeys.PowerEfficient,i),ep.logInstance.sendLog("hardParseSupported",{is_supported_hevc1:ef().isHevcSupported()?1:0,powerEfficient:i,smooth:(null==t?void 0:t.smooth)?1:0,supported:(null==t?void 0:t.supported)?1:0,is_enable_mse:e})})}catch(e){}}var oi={PlayerCreated:"PlayerCreated",PlayerBeforeCreate:"PlayerBeforeCreate"};i("275377");var ol=i("553253");let oo=new class e{getReusePlayer(e,t,i){var l,o,n,r;let{scene:a,reuseId:d,autoCreate:u}=e||{},s=null==t?void 0:t.awemeInfo;if(!a||!d||!(null==s?void 0:s.awemeId)||d!==(null==s?void 0:s.awemeId)||(0,ol.GP)(s))return null;let c=null===(o=this.reusePlayers)||void 0===o?void 0:null===(l=o[a])||void 0===l?void 0:l[d];if(c)return null===(r=this.playerReuseable)||void 0===r||null===(n=r[a])||void 0===n||delete n[d],i.firstChild?i.insertBefore(c.root,i.firstChild):i.appendChild(null==c?void 0:c.root),c;if(u){let e=document.createElement("div");i.appendChild(e),c=new(ef())((0,E._)({el:e,width:"100%",height:"100%",closeFocusVideoFocus:!0},t)),!this.reusePlayers[a]&&(this.reusePlayers[a]={}),this.reusePlayers[a][d]=c}return c}setPlayerReuseAble(e,t){var i,l,o;(null===(l=this.reusePlayers)||void 0===l?void 0:null===(i=l[e])||void 0===i?void 0:i[t])&&(!(null===(o=this.playerReuseable)||void 0===o?void 0:o[e])&&(this.playerReuseable[e]={}),this.playerReuseable[e][t]=!0)}checkPlayerReuseAble(e,t){var i,l;return(null===(l=this.playerReuseable)||void 0===l?void 0:null===(i=l[e])||void 0===i?void 0:i[t])||!1}checkIsReusePlayer(e,t,i){var l,o;let n=null===this||void 0===this?void 0:null===(o=this.reusePlayers)||void 0===o?void 0:null===(l=o[e])||void 0===l?void 0:l[t];return!!(i&&n&&(null==i?void 0:i.playerId)===(null==n?void 0:n.playerId))}recyclePlayer(e,t){if(!this.checkPlayerReuseAble(e,t)){var i,l,o,n,r,a;null===(n=this.reusePlayers)||void 0===n||null===(o=n[e])||void 0===o||null===(l=o[t])||void 0===l||null===(i=l.destroy)||void 0===i||i.call(l),null===(a=this.reusePlayers)||void 0===a||null===(r=a[e])||void 0===r||delete r[t]}}constructor(){(0,e9._)(this,"reusePlayers",{}),(0,e9._)(this,"playerReuseable",{})}},on=(0,f.forwardRef)(function(e,t){let{isPrev:i,isActive:l,isNext:o,className:n,style:r,children:a,xgplayerConfig:d,isInitPlayer:u,onReady:s,onClick:c,slardarInstance:m,id:_,playerDOMRef:h,awemeInfo:y,reuseConfig:w={}}=e,[x,C]=(0,f.useState)(null),I=h||(0,f.useRef)(null),b=(0,f.useRef)();!b.current&&(b.current=new(l4())),(0,f.useEffect)(()=>{if(u){var e,t;let i;let l=I.current;(null===(e=(0,ip.bE)("new_player"))||void 0===e?void 0:e.length)<1&&(0,ip.B1)({tag:"new_player"});let o=null==d?void 0:d.awemeInfo;(null==o?void 0:o.awemeType)===g.e.Note&&Object.assign(d,{startTime:Math.max(d.startTime||0,(null==o?void 0:null===(t=o.imageAlbumMusicInfo)||void 0===t?void 0:t.beginTime)/1e3||0)}),(0,l8.O)()&&Object.assign(d,{domEventType:"compatible"}),b.current.emit(oi.PlayerBeforeCreate,i);let n=oo.getReusePlayer(w,d,l),{scene:r,reuseId:a}=w||{};i=n?n:new(ef())((0,E._)({el:l,width:"100%",height:"100%",closeFocusVideoFocus:!0},d)),b.current.emit(oi.PlayerCreated,i),i.dyLogStat=i.dyLogStat||{},C(i);let u=()=>{null==s||s(i)};return null==i||i.on(ev.Events.READY,u),()=>{var e;null==i||i.off(ev.Events.READY,u),null==i||i.emit(tz.B.BeforeDestroy),C(null),n?oo.recyclePlayer(r,a):(null==i||null===(e=i.destroy)||void 0===e||e.call(i),i.dyLogStat=null)}}},[u]),(0,f.useImperativeHandle)(t,()=>({getPlayer:()=>x,player:x,getPlayerRoot:()=>I.current,root:I.current}),[x]);let S=(0,f.useMemo)(()=>({player:x,slardarInstance:m,contextEvent:b.current}),[x]);return(0,v.jsx)("div",{onClick:c,className:p()(l7,"basePlayerContainer",n),style:r,id:_,ref:I,children:(0,v.jsx)(l9.E.Provider,{value:S,children:a})})}),or=e=>{if("undefined"==typeof location)return 0;let t=(C.Le.getConfig(C.gI.PlayRecord)||[]).filter(t=>t.awemeId===e&&t.scene===location.pathname&&t.recordTime+864e5>Date.now());return t.length>0?t[0].time:0};var oa={videoInteractionWrapper:"xOtXycMc",mobileAvatar:"wWpGyx3L"},od=new ez.h({clickLike:{eventName:"click_like",params:{enter_from:"",enter_from_merge:"",group_id:""}},clickCommentButton:{eventName:"click_comment_icon",params:{enter_from:"",enter_from_merge:"",group_id:""}},clickFollow:{eventName:"click_follow",params:{enter_from:"",enter_from_merge:"",group_id:""}},clickAuthorHead:{eventName:"click_author_head",params:{enter_from:"",enter_from_merge:"",group_id:""}},clickFavoriteVideo:{eventName:"click_favorite_video",params:{enter_from:"",enter_from_merge:"",group_id:""}},clickCancelFavoriteVideo:{eventName:"click_cancel_favorite_video",params:{enter_from:"",enter_from_merge:"",group_id:""}},openDouyinPanelShow:{eventName:"open_douyin_panel_show",params:{}}}),ou=i("647653"),os={digg:"fH3NBCNM",lottieWraper:"Ag0nZi4O",diggSvg:"TrCcA9tv",isDigg:"RVE8PCjJ",diggIcon:"iQGM6kNC",count:"LAeJh0Va",lessFontWeight:"pfH4xesb",animation4:"QynVFW5h",ableMiniType:"cgU6gV1H",comment:"j0GEBtBb",iconWrap:"eFTnRWue",commentIcon:"prAOQ4V0",collect:"b6ucrJlu",collectSvg:"lCmzyl8I",active:"U6CT9YtA",goPC:"czjBDPXP",appGuideCt:"PAYzdyMm",appLogo:"ypV1L5lQ",appGuideText:"alTGKjgw",title:"yetyywpO",subTitle:"PLMOetNd",appGuideBtn:"z4xIvkGF",pcGuideCt:"sOgA4gOD",pcLogo:"cFBtnfjd",pcGuideText:"oBXrpcIq",pcGuideImgCt:"ts2NEHFU",pcGuideImg:"sGkHM6jN"};let oc=()=>{(0,ou.ZP)({link:"https://z.douyin.com/JREXg",scheme:"snssdk1128://",schemeWaitTime:1500,debug:!0})},ov=()=>(0,v.jsxs)("div",{className:os.goPC,children:[(0,v.jsxs)("div",{className:os.appGuideCt,children:[(0,v.jsx)("div",{className:os.appLogo}),(0,v.jsxs)("div",{className:os.appGuideText,children:[(0,v.jsx)("span",{className:os.title,children:"抖音App"}),(0,v.jsx)("span",{className:os.subTitle,children:"记录美好生活"})]}),(0,v.jsx)(iO.Button,{theme:"solid",onClick:oc,className:os.appGuideBtn,children:"打开"})]}),(0,v.jsxs)("div",{className:os.pcGuideCt,children:[(0,v.jsx)("div",{className:os.pcLogo}),(0,v.jsxs)("div",{className:os.pcGuideText,children:[(0,v.jsx)("span",{className:os.title,children:"电脑访问douyin.com"}),(0,v.jsx)("span",{className:os.subTitle,children:"大屏观看更清晰"})]})]}),(0,v.jsx)("div",{className:os.pcGuideImgCt,children:(0,v.jsx)("div",{className:os.pcGuideImg})})]});var of=i("194236"),om=i("605862");let op=e=>{let{count:t,displayWord:i}=e;return 0===Number(t)?i:(0,it.qe)(Number(t))},o_=e=>{var t,i,l;let{awemeId:o,defaultCount:n,selfUid:r,defaultDiggStatus:a}=e,d=null===(t=C.Le.getConfig(C.gI.DiggStatusCache))||void 0===t?void 0:t[o],[u,s]=(0,f.useState)(null!==(i=null==d?void 0:d.count)&&void 0!==i?i:n),[c,v]=(0,f.useState)(null!==(l=null==d?void 0:d.diggStatus)&&void 0!==l?l:a);return(0,f.useEffect)(()=>{var e,t;s(null!==(e=null==d?void 0:d.count)&&void 0!==e?e:n),v(null!==(t=null==d?void 0:d.diggStatus)&&void 0!==t?t:a)},[a,n,o]),(0,f.useEffect)(()=>{let e=te.addCb(e=>{let{selfUid:t,awemeId:i,action:l}=e,d=t===r,u=void 0===t||void 0===r;if((d||u)&&i===o&&("digg"===l||"unDigg"===l)){var c,f,m;let e=null===(c=C.Le.getConfig(C.gI.DiggStatusCache))||void 0===c?void 0:c[o];s(null!==(f=null==e?void 0:e.count)&&void 0!==f?f:n),v(null!==(m=null==e?void 0:e.diggStatus)&&void 0!==m?m:a)}});return()=>{e()}},[r,o,n,a]),{count:Math.max(u,0),diggStatus:c}};i("779788");var og=i("316956"),oh=i("569454");let oy=e=>{let{errMsg:t,statusCode:i}=e;if(i!==x.ERROR_CODE.ERROR_USER_UNLOGIN)M.F.info(null!=t?t:e7.Qr.FollowFail)},ow=()=>(!C.Le.getConfig(C.gI.DiggStatusCache)&&C.Le.setConfig(C.gI.DiggStatusCache,{}),C.Le.getConfig(C.gI.DiggStatusCache)),ox=e=>{let{awemeId:t,diggStatus:i,count:l}=e,o=eX()(ow());o[t]={diggStatus:i,count:l,lastDiggTime:new Date().getTime()},C.Le.setConfig(C.gI.DiggStatusCache,o)},oC=e=>{let{defaultDiggStatus:t,selfUid:i,awemeInfo:l,isMobileOversea:o,fail:n=oy,success:r,complete:a,isLogin:d,onLoginSuccess:u,accountParentEl:s,reportExtraParams:c,loginPanelTarget:v,otherLoginMethod:m,scene:p,teaEvtParams:_={}}=e,y=(0,f.useRef)(!1),w=(0,f.useRef)(0),I=(0,f.useCallback)(async e=>{let{action:t,clickMethod:o}=e,d=null==l?void 0:l.awemeId,u="",s=0;try{let{statusCode:e,errMsg:a,logPb:S}=await (0,og.s)(d,"digg"===t?1:0,l.awemeType===g.e.XgVideo?1:0);if(u=JSON.stringify(S),s=e,e)null==n||n({logPb:u,errMsg:a,statusCode:e,action:t});else{var v,f,m,p,_,y,w,x,I,b;if("digg"===t){if(ep.logInstance.sendLog("like",(0,Q._)((0,E._)({urlParamList:["previous_page"],author_id:null==l?void 0:null===(f=l.authorInfo)||void 0===f?void 0:f.uid,group_id:null==l?void 0:l.awemeId,log_pb:u,enter_from:(0,eI.mo)(),tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",is_full_screen:(0,eS.r)()?"1":"0",is_full_webscreen:tG.s.getIsPageFullscreen()?"1":"0",click_method:o||"icon",from_follow_list:(null===(m=C.Le.getConfig(C.gI.FromFollowList))||void 0===m?void 0:m.tag)?"1":"0",trending_topic:null==l?void 0:null===(p=l.hotList)||void 0===p?void 0:p.sentence,first_tag_name:null==l?void 0:null===(_=l.hotList)||void 0===_?void 0:_.header,top:null==l?void 0:null===(y=l.hotList)||void 0===y?void 0:y.rank,aweme_type:`${null==l?void 0:l.awemeType}`,item_duration_ms:(null==l?void 0:null===(w=l.video)||void 0===w?void 0:w.duration)||0},c),{clarity:(null===(x=C.Le.getConfig(C.gI.Clarity))||void 0===x?void 0:x.logValue)||"",from_push:V.Q.getItem({sKey:R.CookieKeys.FromClientPush})?1:0})),(0,h.Jt)(l)){let e=(0,h.Rx)(l);(0,ia.E)("like",{tag:(0,iu.f)(),value:e.creative_id,log_extra:e.log_extra})}}else if(ep.logInstance.sendLog("cancelLike",(0,E._)({urlParamList:["previous_page"],author_id:null==l?void 0:null===(I=l.authorInfo)||void 0===I?void 0:I.uid,group_id:null==l?void 0:l.awemeId,log_pb:u,enter_from:(0,eI.mo)(),tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",is_full_screen:(0,eS.r)()?"1":"0",aweme_type:`${null==l?void 0:l.awemeType}`,item_duration_ms:(null==l?void 0:null===(b=l.video)||void 0===b?void 0:b.duration)||0},c)),(0,h.Jt)(l)){let e=(0,h.Rx)(l);(0,ia.E)("like_cancel",{tag:(0,iu.f)(),value:e.creative_id,log_extra:e.log_extra})}let e="digg"===t?e7.gZ.Digged:e7.gZ.UnDigg,n=(null==l?void 0:null===(v=l.stats)||void 0===v?void 0:v.diggCount)-Number(l.userDigged)+Number(e);ox({awemeId:d,diggStatus:e,count:n}),eb.emit(eb.EVENT.syncInteractionStatus,{fromUserId:i,awemeId:l.awemeId,action:t}),null==r||r({logPb:u,action:t,diggStatus:e})}}catch(e){null==n||n({logPb:u,action:t})}return null==a||a({logPb:u,action:t}),{statusCode:s}},[l,r,n,a,c,i]),b=(0,f.useCallback)(async e=>{var t,i;let{clickMethod:l,noLoginCb:o}=e||{};(0,e3.ZP)({success:async()=>{y.current=!0,await (null==u?void 0:u());let{statusCode:e}=await I({action:"digg",clickMethod:l})||{};y.current=!1,w.current=e,w.current===x.ERROR_CODE.ERROR_USER_UNLOGIN&&(null==o||o())},headerText:"登录后即可点赞",enterMethod:"digg",next:`https://${null===(i=window)||void 0===i?void 0:null===(t=i.location)||void 0===t?void 0:t.host}`,teaEvtParams:_},s)},[u,s,I,v,p,_]),S=(0,f.useCallback)(async e=>{var t,i,n,r;let{clickMethod:a}=e||{};if(ep.logInstance.sendLog("clickLike",(0,E._)({urlParamList:["previous_page"],author_id:null==l?void 0:null===(t=l.authorInfo)||void 0===t?void 0:t.uid,group_id:null==l?void 0:l.awemeId,enter_from:(0,eI.mo)(),tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",is_full_screen:(0,eS.r)()?"1":"0",click_method:a||"icon",from_follow_list:(null===(i=C.Le.getConfig(C.gI.FromFollowList))||void 0===i?void 0:i.tag)?"1":"0"},c)),!y.current)d?(y.current=!0,await I({action:"digg",clickMethod:a}),y.current=!1):o?(0,oh.Z)({success:async()=>{window.location.reload()},enterMethod:"digg",next:`https://${null===(r=window)||void 0===r?void 0:null===(n=r.location)||void 0===n?void 0:n.host}`,headerText:"登录后即可点赞"}):m?m():b({clickMethod:a,noLoginCb:()=>{setTimeout(()=>{b({clickMethod:a})},1e3)}})},[l,d,s,u,i,I,c,b,t,m]),T=(0,f.useCallback)(async e=>{let{clickMethod:t}=e||{};if(d){if(y.current)return;y.current=!0,await I({action:"unDigg",clickMethod:t}),y.current=!1}else{var i,l;(0,e3.ZP)({success:async()=>{await (null==u?void 0:u()),await I({action:"unDigg",clickMethod:t})},headerText:"登录后即可点赞喜欢的内容",enterMethod:"digg",next:`https://${null===(l=window)||void 0===l?void 0:null===(i=l.location)||void 0===i?void 0:i.host}`},s)}},[l,i,I,p]);return{digg:S,unDigg:T,hoverDigg:(0,f.useCallback)(()=>{ep.logInstance.sendLog("hover_like_icon",{enter_from:(0,eI.mo)()})},[])}};var oI=i("134585");let ob=e=>{var t,i,l;let{awemeInfo:o,loginUserInfo:n,isLogin:r,abtestData:a,fullScreenTarget:d,isMobileOversea:u,reportExtraParams:s,loginPanelTarget:c,recordPreferVideoSwitch:m,loginDispatch:_,onDiggSuccessCb:g}=e||{},h=(0,tr.n)(),y=(0,f.useRef)(!1),{count:w,diggStatus:x}=o_({selfUid:null==n?void 0:null===(t=n.info)||void 0===t?void 0:t.uid,awemeId:null==o?void 0:o.awemeId,defaultCount:null==o?void 0:null===(i=o.stats)||void 0===i?void 0:i.diggCount,defaultDiggStatus:(null==o?void 0:o.userDigged)?e7.gZ.Digged:e7.gZ.UnDigg}),{digg:I,unDigg:b}=oC({selfUid:null==n?void 0:null===(l=n.info)||void 0===l?void 0:l.uid,isLogin:r,awemeInfo:o,isMobileOversea:u,onLoginSuccess:async()=>{if(await (null==_?void 0:_({type:"updateUserInfo"})),"video_detail"===(0,eI.vM)()){var e,t;await e6({secUid:null==o?void 0:null===(e=o.authorInfo)||void 0===e?void 0:e.secUid,uid:null==o?void 0:null===(t=o.authorInfo)||void 0===t?void 0:t.uid})}},reportExtraParams:s,accountParentEl:(0,eS.r)()&&d,defaultDiggStatus:(null==o?void 0:o.userDigged)?e7.gZ.Digged:e7.gZ.UnDigg,success:g,loginPanelTarget:c,scene:tG.s.getPlayerScene(null==h?void 0:h.playerId),teaEvtParams:{is_small_window:0}}),E=(0,f.useCallback)(e=>{if(y.current=!0,m){var t;let e=C.Le.getConfig(C.gI.AwemePcRecRawData)||{videoPrefer:{fsn:[],like:[],halfMin:[],min:[]}},i=e.videoPrefer.like;i.filter((e,t)=>t%2==0).includes(null==o?void 0:o.groupId)||i.push(null==o?void 0:o.groupId,null==o?void 0:null===(t=o.authorInfo)||void 0===t?void 0:t.uid),C.Le.setConfig(C.gI.AwemePcRecRawData,e)}x===e7.gZ.Digged?b({clickMethod:e}):I({clickMethod:e}),h.emit(ev.Events.USER_ACTION,{action:"digg",status:x===e7.gZ.Digged?"close":"open"}),(0,of.VY)({info:{[oI.BW.Favorite]:x!==e7.gZ.Digged},awemeId:null==o?void 0:o.awemeId,abData:null==a?void 0:a.discoverRelatedRecommend})},[x,I,b,m]);return(0,v.jsxs)("div",{className:p()(os.digg,os.animation4,os.ableMiniType),onClick:()=>{null==E||E()},"data-e2e-state":"video-player-no-digged","data-e2e":"video-player-digg",children:[(0,v.jsx)("div",{className:os.lottieWraper,children:(0,v.jsx)(iG.z,{svg:(0,v.jsx)(om.Z,{}),className:p()(os.diggSvg,{[os.isDigg]:x})})}),(0,v.jsx)("div",{className:p()(os.count,os.diggIcon,os.lessFontWeight),children:op({count:w,displayWord:"赞"})})]})};var oE=i("546894");let oS=e=>{let{count:t,className:i,textClassName:l,ableMiniType:o,onComment:n,awemeInfo:r}=e,a=(0,f.useCallback)(()=>{null==n||n(),od.sendLog("clickCommentButton",{enter_from_merge:(0,ie.yW)(),enter_from:(0,ie.yW)(),group_id:null==r?void 0:r.awemeId})},[n,r]);return(0,v.jsxs)("div",{className:p()(os.comment,i,{[os.ableMiniType]:o,[os.animation4]:!0}),"data-e2e":"feed-comment-icon",onClick:()=>a(),children:[(0,v.jsx)("div",{className:os.iconWrap,children:(0,v.jsx)(iG.z,{svg:(0,v.jsx)(oE.Z,{}),className:os.commentIcon})}),!!t&&(0,v.jsx)("div",{className:p()(os.count,l,os.lessFontWeight),children:t})]})};var oT=i("956428"),ok=i("746302"),oL=i("250972");let oA=e=>{let{errMsg:t,statusCode:i}=e;if(i!==x.ERROR_CODE.ERROR_USER_UNLOGIN)M.F.info(null!=t?t:e7.Qr.FollowFail)},oR=()=>(!C.Le.getConfig(C.gI.CollectStatusCache)&&C.Le.setConfig(C.gI.CollectStatusCache,{}),C.Le.getConfig(C.gI.CollectStatusCache)),oN=e=>{let{awemeId:t,collectStatus:i,count:l}=e,o=eX()(oR());o[t]={collectStatus:i,count:l},C.Le.setConfig(C.gI.CollectStatusCache,o)},oP=e=>{let{selfUid:t,awemeInfo:i,fail:l=oA,success:o,complete:n,isLogin:r,onLoginSuccess:a,accountParentEl:d,reportExtraParams:u,loginPanelTarget:s,otherLoginMethod:c,scene:v,teaEvtParams:m={},isMobileOversea:p}=e,_=(0,f.useRef)(!1),h=(0,f.useRef)(0),y=(0,f.useCallback)(async e=>{let{action:r,clickMethod:a,nextFunc:d,logParams:s}=e,c=null==i?void 0:i.awemeId,v="",f=0;try{var m,p,_,h,y,w,x;let{statusCode:e,logPb:n,statusMsg:I}=await (0,ok.KM)({awemeId:c,collectAction:"collect"===r?1:0,awemeType:i.awemeType});if(v=JSON.stringify(n),f=e,e)ep.logInstance.sendLog("favoriteVideoFailed",(0,E._)({click_from:null!=a?a:"icon",err_code:e,urlParamList:["previous_page"],author_id:null==i?void 0:null===(m=i.authorInfo)||void 0===m?void 0:m.uid,group_id:null==i?void 0:i.awemeId,log_pb:v,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",aweme_type:`${null==i?void 0:i.awemeType}`},u,s)),null==l||l({logPb:v,errMsg:I,statusCode:e,action:r});else{"collect"===r?ep.logInstance.sendLog("favoriteVideo",(0,E._)({click_from:"icon",urlParamList:["previous_page","enter_method"],author_id:null==i?void 0:null===(_=i.authorInfo)||void 0===_?void 0:_.uid,group_id:null==i?void 0:i.awemeId,log_pb:v,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",is_full_webscreen:tG.s.getIsPageFullscreen()?"1":"0",click_method:a,from_xigua:(null==i?void 0:i.awemeType)===g.e.XgVideo?1:0,clarity:(null===(h=C.Le.getConfig(C.gI.Clarity))||void 0===h?void 0:h.logValue)||"",tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",item_duration_ms:(null==i?void 0:null===(y=i.video)||void 0===y?void 0:y.duration)||0,is_from_aweme_search_engine:(0,oL.V)()?1:0},u,s)):ep.logInstance.sendLog("cancelFavoriteVideo",(0,E._)({click_from:null!=a?a:"icon",urlParamList:["previous_page"],author_id:null==i?void 0:null===(w=i.authorInfo)||void 0===w?void 0:w.uid,group_id:null==i?void 0:i.awemeId,log_pb:v,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",item_duration_ms:(null==i?void 0:null===(x=i.video)||void 0===x?void 0:x.duration)||0},u,s));let e=await (null==d?void 0:d()),l="collect"===r?e7.c.Collected:e7.c.Uncollected,n=(null==i?void 0:null===(p=i.stats)||void 0===p?void 0:p.collectCount)-Number(i.userCollected)+Number(l);oN({awemeId:c,collectStatus:l,count:n}),eb.emit(eb.EVENT.syncInteractionStatus,{fromUserId:t,awemeId:i.awemeId,action:r}),null==o||o({logPb:v,action:r,collectStatus:l,successMsg:null==e?void 0:e.successMsg})}}catch(e){null==l||l({logPb:v,action:r})}return null==n||n({logPb:v,action:r}),{statusCode:f}},[i,o,l,n,u,t]),w=(0,f.useCallback)(async e=>{var t,i;let{clickMethod:l,noLoginCb:o,nextFunc:n,logParams:r}=e||{};(0,e3.ZP)({success:async()=>{_.current=!0,await (null==a?void 0:a());let{statusCode:e}=await y({action:"collect",clickMethod:l,nextFunc:n,logParams:r})||{};_.current=!1,h.current=e,h.current===x.ERROR_CODE.ERROR_USER_UNLOGIN&&(null==o||o())},headerText:"登录后即可收藏",enterMethod:"favorite_video",next:`https://${null===(i=window)||void 0===i?void 0:null===(t=i.location)||void 0===t?void 0:t.host}`,teaEvtParams:m},d)},[a,d,y,s,v,m]),I=(0,f.useCallback)(async e=>{let{clickMethod:t,nextFunc:i,logParams:l}=e||{};if(!_.current)if(r)_.current=!0,await y({action:"collect",clickMethod:t,nextFunc:i,logParams:l}),_.current=!1;else if(p){var o,n;(0,oh.Z)({success:async()=>{window.location.reload()},enterMethod:"favorite_video",next:`https://${null===(n=window)||void 0===n?void 0:null===(o=n.location)||void 0===o?void 0:o.host}`,headerText:"登录后即可收藏"})}else c?c():w({clickMethod:t,logParams:l,noLoginCb:()=>{setTimeout(()=>{w({clickMethod:t,nextFunc:i})},1e3)}})},[i,r,d,a,t,y,u,w]);return{collect:I,unCollect:(0,f.useCallback)(async e=>{let{clickMethod:t,nextFunc:i,logParams:l}=e||{};if(!_.current)if(r)_.current=!0,await y({action:"unCollect",clickMethod:t,nextFunc:i,logParams:l}),_.current=!1;else{var o,n;(0,e3.ZP)({success:async()=>{await (null==a?void 0:a()),await y({action:"unCollect",clickMethod:t,nextFunc:i,logParams:l})},headerText:"登录后即可收藏",enterMethod:"favorite_video",next:`https://${null===(n=window)||void 0===n?void 0:null===(o=n.location)||void 0===o?void 0:o.host}`},d)}},[i,t,y,v])}},oM=e=>{var t,i,l,o;let{awemeId:n,defaultCount:r,selfUid:a,defaultCollectStatus:d}=e,u=C.Le.getConfig(C.gI.CollectStatusCache),[s,c]=(0,f.useState)(null!==(l=null==u?void 0:null===(t=u[n])||void 0===t?void 0:t.count)&&void 0!==l?l:r),[v,m]=(0,f.useState)(null!==(o=null==u?void 0:null===(i=u[n])||void 0===i?void 0:i.collectStatus)&&void 0!==o?o:d);return(0,f.useEffect)(()=>{var e,t,i,l;c(null!==(i=null==u?void 0:null===(e=u[n])||void 0===e?void 0:e.count)&&void 0!==i?i:r),m(null!==(l=null==u?void 0:null===(t=u[n])||void 0===t?void 0:t.collectStatus)&&void 0!==l?l:d)},[d,r,n]),(0,f.useEffect)(()=>{let e=te.addCb(e=>{let{selfUid:t,awemeId:i,action:l}=e,o=t===a,u=void 0===t||void 0===a;if((o||u)&&i===n&&("collect"===l||"unCollect"===l)){var s,v,f;let e=null===(s=C.Le.getConfig(C.gI.CollectStatusCache))||void 0===s?void 0:s[n];c(null!==(v=null==e?void 0:e.count)&&void 0!==v?v:r),m(null!==(f=null==e?void 0:e.collectStatus)&&void 0!==f?f:d)}});return()=>{e()}},[a,n,r,d]),{count:Math.max(s,0),collectStatus:v}};function oj(e){var t,i,l;let{awemeInfo:o,isLogin:n,loginUserInfo:r,loginDispatch:a,fullScreenTarget:d,ableMiniType:u=!1,reportExtraParams:s={},abtestData:c,loginPanelTarget:m,isMobileOversea:_}=e,g=(0,f.useRef)(null),h=(0,tr.n)(),y=(0,eS.r)()&&d,w=tG.s.getPlayerScene(null==h?void 0:h.playerId),C=e=>{M.F.info(e)},I=async()=>{if(null==a||a({type:"updateUserInfo"}),"video_detail"===(0,eI.vM)()){var e,t;await e6({secUid:null==o?void 0:null===(e=o.authorInfo)||void 0===e?void 0:e.secUid,uid:null==o?void 0:null===(t=o.authorInfo)||void 0===t?void 0:t.uid})}},{unCollect:b,collect:S}=oP({isMobileOversea:_,selfUid:null==r?void 0:null===(t=r.info)||void 0===t?void 0:t.uid,awemeInfo:o,defaultCollectStatus:(null==o?void 0:o.userCollected)?e7.c.Collected:e7.c.Uncollected,isLogin:n,accountParentEl:y,loginPanelTarget:m,reportExtraParams:s,scene:w,onLoginSuccess:I,success:e=>{let{action:t,successMsg:i}=e;"collect"===t&&C(i||e7.a$.CollectSuccess),null==h||h.emit(ev.Events.USER_ACTION,{action:"collect",status:"collect"===t?"on":"off"})},fail:e=>{switch(e.statusCode){case x.ERROR_CODE.ERROR_USER_UNLOGIN:return;case x.ERROR_CODE.ERROR_COLLECT_TOO_FAST:C(e7.a$.TooFast);return;case x.ERROR_CODE.ERROR_COLLECT_RESTRICTED:C(e7.a$.CollectBan);return;default:C(e7.a$.CollectFail);return}},teaEvtParams:{is_small_window:0}}),T=(0,f.useCallback)(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];b(...t),(0,of.VY)({info:{[oI.BW.Collect]:!1},awemeId:null==o?void 0:o.awemeId,abData:null==c?void 0:c.discoverRelatedRecommend})},[b]),k=(0,f.useCallback)(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];S(...t),(0,of.VY)({info:{[oI.BW.Collect]:!0},awemeId:null==o?void 0:o.awemeId,abData:null==c?void 0:c.discoverRelatedRecommend})},[S]),{collectStatus:L,count:A}=oM({selfUid:null==r?void 0:null===(i=r.info)||void 0===i?void 0:i.uid,awemeId:null==o?void 0:o.awemeId,defaultCollectStatus:(null==o?void 0:o.userCollected)?e7.c.Collected:e7.c.Uncollected,defaultCount:null==o?void 0:null===(l=o.stats)||void 0===l?void 0:l.collectCount}),R=e=>{var t,i;let{clickMethod:l="icon"}=e||{};L===e7.c.Collected?od.sendLog("clickCancelFavoriteVideo",(0,E._)({click_from:"icon",urlParamList:["previous_page"],author_id:null==o?void 0:null===(t=o.authorInfo)||void 0===t?void 0:t.uid,group_id:null==o?void 0:o.awemeId,log_pb:null==o?void 0:o.logPb,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",tab_name:(0,eA.zD)()||getRouteParams("tab_name")||""},s)):od.sendLog("clickFavoriteVideo",(0,E._)({click_from:"icon",urlParamList:["previous_page"],author_id:null==o?void 0:null===(i=o.authorInfo)||void 0===i?void 0:i.uid,group_id:null==o?void 0:o.awemeId,log_pb:null==o?void 0:o.logPb,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",click_method:l,tab_name:(0,eA.zD)()||getRouteParams("tab_name")||""},s)),null==h||h.emit("shortcutTopic"),L===e7.c.Collected?T({clickMethod:l}):k({clickMethod:l})};return(0,v.jsxs)("div",{className:p()(os.collect,{[os.ableMiniType]:u,[os.animation4]:!0}),onClick:()=>R(),ref:g,"data-e2e-state":L?"video-player-is-collected":"video-player-no-collect","data-e2e":"video-player-collect",children:[(0,v.jsx)("div",{className:os.lottieWraper,children:(0,v.jsx)(iG.z,{svg:(0,v.jsx)(oT.Z,{}),className:p()(os.collectSvg,{[os.active]:L})})}),(0,v.jsx)("div",{className:p()(os.count,os.lessFontWeight),children:op({count:A,displayWord:"收藏"})})]})}var oD=i("768492"),oF={avatarWrap:"ScjQyUCx",followIcon:"Cl347PmJ",followIconLow:"__bKoXgf",hideFollowedLottie:"OvVCwL2E",imIcon:"NiQXPi1G",avatar:"_AYjBvRf",shortcutTip:"OuZsZfYH",tipKey:"xskNSWex",shortcutTipWrap:"I5qxL3nd",keyTip:"sfBVwmGS",followWrap:"wzN01tMb",followWrapMobile:"flj3Hn8E",avatarBothWrap:"MHKPMz5p",liveTip:"gF8Q0nrp",liveWrap:"By80SxJN",liveLottie:"Alj6RRov",liveText:"Snu5gAgs",animation:"gQUo0KHr",avatarImageWrap:"kZ1bxSpd",followWrapBox:"m9rtcJGU",disableTransition:"tNn7Nsc4",xgTip:"VACIrect",xgIcon:"wXMqFgit",ableMiniType:"gLH175hK",tipStyle:"e5O7fwV_",hidden:"C_L7uSgt",cooperAvatar:"miPwusNs"},oV=i("338426"),oO=i("774575"),oB=i("140202"),oU=new ez.h({hover_author_head:{eventName:"hover_author_head",params:{enter_from:"",click_from:""}},hover_follow_icon:{eventName:"hover_follow_icon",params:{enter_from:""}},livesdkLiveShow:{eventName:"livesdk_live_show",params:{enter_from_merge:"",enter_method:"web_video_head",action_type:"",request_id:"",is_vs:0,vs_episode_id:"",vs_ep_group_id:"",vs_season_id:"",vs_episode_stage:"",anchor_id:"",room_id:"",is_paidlive:"",watch_paidlive_status:""}},livesdkRecLivePlay:{eventName:"livesdk_rec_live_play",params:{anchor_id:"",room_id:"",enter_from_merge:"web_others_homepage",enter_method:"web_video_head",game_name:"",live_type:"",is_aweme_tied:0,game_live_source:"",url:"",url_path:"",action_type:"click",request_id:"",stream_type:"",is_vs:0,vs_episode_id:"",vs_ep_group_id:"",vs_season_id:"",vs_episode_stage:"",is_paidlive:0,watch_paidlive_status:""}},livesdkMiniWindowPlay:{eventName:"livesdk_mini_window_preview_play",params:{anchor_id:"",room_id:"",enter_from_merge:"web_others_homepage",enter_method:"web_video_head",game_name:"",live_type:"",is_aweme_tied:0,game_live_source:"",url:"",url_path:"",action_type:"click",request_id:"",is_click_mini_window:"0"}},follow:{eventName:"follow",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",aweme_type:"",from_xigua:0,relation:""}},followCancel:{eventName:"follow_cancel",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:""}},topknotLoginShow:{eventName:"topknot_login_show",params:{group_id:"",relation:0}},chatIconHover:{eventName:"chat_icon_hover",params:{}},chatIconClick:{eventName:"chat_icon_click",params:{}}}),oH=i("327984"),oW=i("765595"),oz={aLink:"YJp_iuhK"};function oG(e){var{href:t="",children:i,style:l,className:o,passParamKeys:n=[],spa:r,isNeedSeoOpt:a=!0,tabSSRHrefEnhance:d=!1,refEl:u}=e,s=(0,tX._)(e,["href","children","style","className","passParamKeys","spa","isNeedSeoOpt","tabSSRHrefEnhance","refEl"]);let[c,m]=(0,f.useState)(""),_=(0,f.useRef)(null);(0,f.useEffect)(()=>{let e=(0,oW.U)({passParamKeys:n});m((0,S.stringify)(e))},[]);let g=(0,f.useMemo)(()=>{let e,i;if(!t)return;let l=t.indexOf("#");-1!==l?(e=t.slice(0,l),i=t.slice(l+1)):(e=t,i="");let o=e.indexOf("?"),[n,r]=["",""];-1!==o?(n=e.slice(0,o),r=e.slice(o+1)):(n=e,r="");let a=[];return(c&&a.push(c),r&&a.push(r),a.length>0)?[n,a.join("&")].join("?")+(i&&`#${i}`):n+(i&&`#${i}`)},[c,t]),h=g,y="",w="";return a&&!r&&h&&([h,w]=h.split("#"),[h,y]=h.split("?"),d&&(null==y?void 0:y.includes("recommend=1"))&&(h=`${h}?recommend=1`)),r?(0,v.jsx)(oH.Link,(0,Q._)((0,E._)({to:g,className:p()(oz.aLink,o),style:l},s),{suppressHydrationWarning:!0,children:i})):(0,v.jsx)("a",(0,Q._)((0,E._)({suppressHydrationWarning:!0,href:h,className:p()(oz.aLink,o),style:l,ref:e=>{_.current=e,u&&(u.current=e)}},s),{target:(0,is.f)()?"_self":s.target,onClick:e=>{try{var t;_.current.href=g,null==s||null===(t=s.onClick)||void 0===t||t.call(s,e),(0,is.f)()&&!(null==s?void 0:s.onClick)&&(e.preventDefault(),window.open(h,"_self"))}catch(e){}},children:i}))}function oZ(e){var t;let{awemeInfo:i,ableMiniType:l,followStatus:o,logParams:n}=e,r=(0,f.useRef)(null);return(0,v.jsx)(iO.Tooltip,{className:p()(oF.xgTip,{[oF.ableMiniType]:l}),position:"left",content:(0,v.jsx)(v.Fragment,{children:"前往西瓜视频关注该作者"}),getPopupContainer:()=>r.current||document.body,children:(0,v.jsx)("div",{ref:r,children:(0,v.jsx)(oG,{id:"xgIcon",href:(0,oD.GN)(null==i?void 0:null===(t=i.authorInfo)||void 0===t?void 0:t.uid),target:"_blank",rel:"noopener noreferrer",className:oF.xgIcon,onClick:()=>{var e;eb.emit(eb.EVENT.videoPause),oU.sendLog("follow",(0,E._)({urlParamList:["previous_page"],author_id:null==i?void 0:null===(e=i.authorInfo)||void 0===e?void 0:e.uid,group_id:null==i?void 0:i.awemeId,enter_from:(0,eI.mo)(),is_full_screen:(0,eS.r)()?"1":"0",tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",aweme_type:null==i?void 0:i.awemeType,from_xigua:1,relation:String(o)},n))}})})})}var oq=JSON.parse('{"v":"5.7.1","fr":60,"ip":0,"op":91,"w":90,"h":90,"nm":"合成 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"形状图层 2","parent":2,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":80,"s":[100],"e":[0]},{"t":90}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.8,"y":0.66},"o":{"x":0.4,"y":0},"t":2,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}]},{"i":{"x":0.6,"y":1},"o":{"x":0.2,"y":0.34},"t":7,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-7.224,-14.544],[10.21,2.806]],"c":true}]},{"t":13}],"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[1,1,1,1],"e":[0.996078431606,0.172549024224,0.333333343267,1]},{"t":13}],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":90,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.8,"y":0.68},"o":{"x":0.4,"y":0},"t":2,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-0.062,9.062],[0.021,-8.958]],"c":true}]},{"i":{"x":0.6,"y":1},"o":{"x":0.2,"y":0.32},"t":7,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-0.062,9.062],[0.021,-8.958]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-2.81,10.208],[-12.518,0.573]],"c":true}]},{"t":13}],"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[1,1,1,1],"e":[0.996078431606,0.172549024224,0.333333343267,1]},{"t":13}],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"形状图层 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[1],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":19,"s":[100],"e":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.4],"y":[0]},"t":80,"s":[100],"e":[0]},{"t":90}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[45,45,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.6,0.6,0.833],"y":[1,1,5.167]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,3.333]},"t":0,"s":[100,100,100],"e":[60,60,100]},{"i":{"x":[0.6,0.6,0.833],"y":[1,1,1]},"o":{"x":[0.4,0.4,0.167],"y":[0,0,5.682]},"t":2,"s":[60,60,100],"e":[115,115,100]},{"i":{"x":[0.6,0.6,0.833],"y":[1,1,1]},"o":{"x":[0.4,0.4,0.167],"y":[0,0,0]},"t":13,"s":[115,115,100],"e":[95,95,100]},{"i":{"x":[0.6,0.6,0.564],"y":[1,1,1]},"o":{"x":[0.314,0.314,0.206],"y":[0,0,0]},"t":19,"s":[95,95,100],"e":[100,100,100]},{"i":{"x":[1,1,0.839],"y":[1,1,1]},"o":{"x":[0.4,0.4,0.304],"y":[0,0,0]},"t":25,"s":[100,100,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,14.333]},"o":{"x":[0.4,0.4,0.167],"y":[0,0,-13.333]},"t":80,"s":[100,100,100],"e":[20,20,100]},{"t":90}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-19.882,0],[0,-19.882],[19.882,0],[0,19.882]],"o":[[19.882,0],[0,19.882],[-19.882,0],[0,-19.882]],"v":[[0,-36],[36,0],[0,36],[-36,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0.996078431606,0.172549024224,0.333333343267,1],"e":[1,1,1,1]},{"t":13}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0}],"markers":[]}'),oK=JSON.parse('{"v":"5.7.1","fr":60,"ip":0,"op":11,"w":90,"h":90,"nm":"合成 2","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"形状图层 2","parent":2,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0],"e":[100]},{"t":10}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":90,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"形状图层 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.412],"y":[1]},"o":{"x":[0],"y":[0]},"t":0,"s":[0],"e":[100]},{"t":10}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[45,45,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.392,0.392,0.839],"y":[1,1,1]},"o":{"x":[0,0,0.167],"y":[0,0,13.333]},"t":0,"s":[20,20,100],"e":[100,100,100]},{"t":10}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-19.882,0],[0,-19.882],[19.882,0],[0,19.882]],"o":[[19.882,0],[0,19.882],[-19.882,0],[0,-19.882]],"v":[[0,-36],[36,0],[0,36],[-36,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.996078431606,0.172549024224,0.333333343267,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0}],"markers":[]}');let o$=(0,oV.ZP)(()=>Promise.resolve().then(i.bind(i,879562)),{ssr:!1}),oY=(0,eL.b_)();function oQ(e){var t,i,l,o,n,r,a;let{awemeInfo:d={},loginUserInfo:u,shortcut:s={},isShowKeyHotTip:c,ableMiniType:m=!1,followBtnMouseEnter:_,followBtnMouseLeave:g,isXgVideo:y,isFollowClickedRef:w,actionFollow:x,actionUnFollow:C,showImBtn:I,player:b,isMobileOversea:E,onCooperAitonClick:S,loginPanelTarget:T,toast:k,abtestData:L,onFollowBtnClick:A,isLogin:R}=e,N=(0,f.useRef)(null),P=(0,f.useRef)(!1),j=(0,f.useRef)(null),[D,F]=(0,f.useState)(!1),[V,O]=(0,f.useState)(!0),[B,H]=(0,f.useState)(!1),W=null==L?void 0:L.reduceLottie,z=(0,f.useRef)(null),G=(0,f.useRef)(null),{followStatus:Z}=ti({selfUid:null==u?void 0:null===(t=u.info)||void 0===t?void 0:t.uid,actionUid:null==d?void 0:null===(i=d.authorInfo)||void 0===i?void 0:i.uid,defaultFollowerStatus:null==d?void 0:null===(l=d.authorInfo)||void 0===l?void 0:l.followerStatus,defaultFollowStatus:null==d?void 0:null===(o=d.authorInfo)||void 0===o?void 0:o.followStatus}),q=()=>{var e,t,i,l;let o=null===(t=z.current)||void 0===t?void 0:null===(e=t.getLottieInstance)||void 0===e?void 0:e.call(t),n=null===(l=G.current)||void 0===l?void 0:null===(i=l.getLottieInstance)||void 0===i?void 0:i.call(l),r=()=>{var e;null==o||null===(e=o.goToAndStop)||void 0===e||e.call(o,0),F(!1),O(!0)},a=()=>{var e;null==n||null===(e=n.goToAndStop)||void 0===e||e.call(n,0),F(!0),O(!1)},d=()=>{r(),P.current=!1},u=()=>{a(),P.current=!1};return{follow:()=>{r(),setTimeout(()=>{var e;null==o||null===(e=o.play)||void 0===e||e.call(o),oY&&d()}),!I&&(P.current=!0),w.current=!1},unfollow:()=>{a(),setTimeout(()=>{var e;null==n||null===(e=n.play)||void 0===e||e.call(n),oY&&u()}),!I&&(P.current=!0),w.current=!1},followEnd:d,unfollowEnd:u,setFollowStatus:a,setUnFollowStatus:r}};(0,f.useEffect)(()=>{var e,t,i;P.current=!1,(null===(t=N.current)||void 0===t?void 0:null===(e=t.authorInfo)||void 0===e?void 0:e.uid)!==(null==d?void 0:null===(i=d.authorInfo)||void 0===i?void 0:i.uid)?Z===e7.$u.UnFollow?q().setUnFollowStatus():q().setFollowStatus():((0,oO.F)(Z)?q().follow():q().unfollow(),W&&H(!0)),N.current=d},[Z]);let K=(0,f.useCallback)(async()=>{if(y){var e;eb.emit(eb.EVENT.videoPause),window.open((0,oD.GN)(null==d?void 0:null===(e=d.authorInfo)||void 0===e?void 0:e.uid),(0,is.f)()?"_self":"_blank");return}if((0,h.gc)(d)){k?k("广告视频不支持此功能"):M.F.info("广告视频不支持此功能");return}if(S)return;w.current=!0;let t=(0,oO.V)(Z);!P.current&&(t?null==C||C({clickFrom:"hot_key",loginPanelTarget:T}):null==x||x({clickFrom:"hot_key",loginPanelTarget:T}),I&&(P.current=!1),(0,of.VY)({info:{[oI.BW.Follow]:!t},awemeId:null==d?void 0:d.awemeId,abData:0}))},[d,C,x,Z,y,S,w,I,T]);(0,f.useEffect)(()=>{if(b)return null==b||b.on("onFollow",K),()=>{null==b||b.off("onFollow",K)}},[b,K]);let{inImmersive:$}=i7({player:b,isActive:!0});return(0,v.jsx)(iO.Tooltip,{position:"left",style:!c||D||y||E?{display:"none"}:{},className:oF.tipStyle,content:(0,v.jsx)("div",{className:oF.shortcutTip,children:(0,v.jsxs)(v.Fragment,{children:["关注",(null==s?void 0:null===(n=s.follow)||void 0===n?void 0:n.badgeText)&&(0,v.jsx)("span",{className:oF.tipKey,children:s.follow.badgeText})]})}),getPopupContainer:()=>j.current||document.body,children:(0,v.jsx)("div",{ref:j,className:p()(oF.followWrap,{[oF.followWrapMobile]:(0,U.tq)()}),"data-e2e":"feed-follow-icon",children:(0,v.jsxs)("div",{onMouseEnter:e=>{!D&&(null==_||_(e))},onMouseLeave:e=>{oU.sendLog("hover_follow_icon",{enter_from:(0,eI.mo)()}),!D&&(null==g||g(e))},onClick:e=>{var t,i,l,o;if(E&&e.stopPropagation(),!R&&E){(0,oh.Z)({success:async()=>{window.location.reload()},enterMethod:"comment",next:`https://${null===(l=window)||void 0===l?void 0:null===(i=l.location)||void 0===i?void 0:i.host}`,headerText:"登录抖音"});return}if(null==b||b.emit("shortcutTopic"),(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.id)==="xgIcon")return;if(y){eb.emit(eb.EVENT.videoPause),window.open((0,oD.GN)(null==d?void 0:null===(o=d.authorInfo)||void 0===o?void 0:o.uid),(0,is.f)()?"_self":"_blank");return}w.current=!0,null==A||A();let n=(0,oO.V)(Z);(!P.current&&!D||oY)&&(n?null==C||C({clickFrom:void 0,loginPanelTarget:T}):null==x||x({clickFrom:void 0,loginPanelTarget:T}),(0,of.VY)({info:{[oI.BW.Follow]:!n},awemeId:null==d?void 0:d.awemeId,abData:0}))},className:p()(oF.followWrapBox),children:[y&&(0,v.jsx)(oZ,{awemeInfo:d,ableMiniType:m,followStatus:Z,logParams:{is_pure:$?"1":"0"}}),!y&&!oY&&(B||!W?(null==d?void 0:null===(r=d.authorInfo)||void 0===r?void 0:r.uid)!==(null==u?void 0:null===(a=u.info)||void 0===a?void 0:a.uid)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o$,{hidden:D,onComplete:()=>q().unfollowEnd(),className:oF.followIcon,data:oq,ref:z,loop:!1,autoplay:!1,onInit:()=>{W&&((0,oO.F)(Z)?q().follow():q().unfollow())}}),(0,v.jsx)(o$,{hidden:V,onComplete:()=>q().followEnd(),className:p()(oF.followIcon,{[oF.hideFollowedLottie]:E&&D}),data:oK,ref:G,loop:!1,autoplay:!1})]}):(0,v.jsx)(iG.z,{svg:(0,v.jsx)(oB.Z,{}),className:p()(oF.followIcon,oF.followIconLow,{[oF.hidden]:(0,oO.V)(Z)})})),!y&&oY&&(0,v.jsx)(iG.z,{svg:(0,v.jsx)(oB.Z,{}),className:p()(oF.followIcon,oF.followIconLow,{[oF.hidden]:(0,oO.V)(Z)})})]})})})}var oX=i("793586");function oJ(e){let{onAvatarClick:t,preventAvatarDefaultHandle:i,handleAvatarClick:l,player:o,toast:n}=e,r=(0,f.useCallback)(()=>{n?n("广告视频不支持此功能"):M.F.info("广告视频不支持此功能")},[]);return(0,f.useEffect)(()=>{if(o)return null==o||o.on("onFollow",r),()=>{null==o||o.off("onFollow",r)}},[o,r]),(0,v.jsx)("div",{className:p()(oF.followWrap),children:(0,v.jsx)("div",{className:p()(oF.followWrapBox),onClick:e=>{null==t||t(e,{clickMethod:"click_icon"}),i||null==l||l()},children:(0,v.jsx)(iG.z,{className:oF.followIcon,svg:(0,v.jsx)(oX.Z,{style:{fontSize:"24px"}})})})})}let o0=(0,f.forwardRef)((e,t)=>(0,v.jsxs)("svg",(0,Q._)((0,E._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10z",fill:"#fff"}),(0,v.jsx)("path",{d:"M4.876 8.407l8.918-3.185a.9.9 0 0 1 1.15 1.15l-3.185 8.919a.9.9 0 0 1-1.62.16l-1.431-2.387a.72.72 0 0 1 .071-.84l4.327-5.037c.072-.084-.043-.199-.127-.126l-5.037 4.326a.72.72 0 0 1-.84.072l-2.387-1.432a.9.9 0 0 1 .16-1.62z",fill:"#FE2C55"})]})));function o1(e){var t,i;let{isShowKeyHotTip:l,imBtnMouseEnter:o,imBtnMouseLeave:n,awemeInfo:r,player:a,loginUserInfo:d,abtestData:u}=e,s=f.useRef(null);return(0,v.jsx)(iO.Tooltip,{position:"left",style:l?{}:{display:"none"},className:oF.tipStyle,content:(0,v.jsx)("div",{className:oF.shortcutTip,children:"私信"}),getPopupContainer:()=>s.current||document.body,children:(0,v.jsx)("div",{ref:s,className:p()(oF.followWrap),children:(0,v.jsx)("div",{onMouseEnter:e=>{null==o||o(e),oU.sendLog("chatIconHover")},onMouseLeave:e=>null==n?void 0:n(e),onClick:()=>{var e,t;oU.sendLog("chatIconClick"),eb.emit(eb.EVENT.sendImUserMsg,{uid:null==r?void 0:null===(e=r.authorInfo)||void 0===e?void 0:e.uid,enterMethod:"friend_im_icon"}),null==a||null===(t=a.exitFullscreen)||void 0===t||t.call(a),eb.emit(eb.EVENT.pageFullScreen,{fullScreen:!1,playerId:null==a?void 0:a.playerId})},className:p()(oF.followWrapBox),children:(null==r?void 0:null===(t=r.authorInfo)||void 0===t?void 0:t.uid)!==(null==d?void 0:null===(i=d.info)||void 0===i?void 0:i.uid)&&(0,v.jsx)(la.Z,{className:p()(oF.followIcon,oF.imIcon),src:o0,width:20,height:20,viewBox:"0 0 20 20"})})})})}var o2=i("388128"),o3={avatarIcon:"lnTv2lw3",avatar:"G82AGRg9",image:"zH2vYZzz",live:"rR9TAfP5",extraExtraExtraSmall:"PiKq_Tjf",extraExtraSmall:"SIwURXGv",extraSmall:"yObu_gaU",small:"g21cvHON",middle:"n_L8Qq9H",default:"Ih0LjTZQ",showOverflow:"OkskYx0s",self:"zmezjFFE",pendant:"Golkwogh"};function o6(e){let{type:t="default",src:i,alt:l="",isSpider:o=!1,isSelf:n=!1,showImageInSSR:r=!1,className:a,defaultClassName:d,imgClassName:u,maskConf:s,onMouseEnter:c,onMouseLeave:m,onClick:_,children:g}=e,[h,y]=(0,f.useState)(0),w=i&&(1===h||o||r),{showMask:x,MaskItem:C,className:I}=s||{},b=()=>y(1);return(0,f.useEffect)(()=>{let e=!1,t=new Image;t.onload=function(){if(!e)e=!0,b(),t=null},t.onerror=function(){if(!e)e=!0,y(-1),t=null};let l=setTimeout(()=>{e=!0,b()},3e3);return t.src=i,()=>{t&&(t.onload=null,t.onerror=null),clearTimeout(l)}},[i]),(0,v.jsxs)(iO.Avatar,{className:p()(o3.avatar,o3[t],"avatar-component-avatar-container",{[a]:a,[o3.self]:n}),onMouseEnter:c,onMouseLeave:m,"data-e2e":"live-avatar",onClick:_,style:{backgroundColor:"transparent"},hoverMask:x?(0,v.jsx)(C,{className:I}):null,children:[w?(0,v.jsx)("img",{src:i,alt:l,className:p()(o3.image,u),onError:()=>y(-1),onLoad:b}):(0,v.jsx)("div",{className:p()(o3[t],o3.avatarIcon,{[a]:d})}),g]})}function o5(e){var t,i,l;let{player:o,awemeInfo:n={},customHrefParams:r={},shortcut:a={},onAvatarClick:d=null,preventAvatarDefaultHandle:u=!0,ableMiniType:s=!1,showFollowBtn:c=!0,showImBtn:m=!1,showAdBtn:_=!1,onCooperAitonClick:y,loginUserInfo:w,isShowKeyHotTip:x,isFollowClickedRef:I,loginPanelTarget:b,actionFollow:T,actionUnFollow:k,followBtnMouseEnter:L,followBtnMouseLeave:A,imBtnMouseEnter:R,imBtnMouseLeave:N,isMobileOversea:P,className:j,avatarClassName:D,toast:F,abtestData:V,onFollowBtnClick:O,onAvatarRef:B,avatarType:U="extraSmall",isLogin:H}=e,[W,z]=(0,f.useState)(!1),G=(0,f.useCallback)(()=>{var e;return null==o?void 0:null===(e=o.pause)||void 0===e?void 0:e.call(o)},[o]),Z=(0,f.useRef)(null),q=(0,f.useRef)(null),K=(0,f.useMemo)(()=>{var e,t;return(null==n?void 0:n.awemeType)===g.e.XgVideo?(0,oD.GN)(null==n?void 0:null===(e=n.authorInfo)||void 0===e?void 0:e.uid):(0,oD.HC)(null==n?void 0:null===(t=n.authorInfo)||void 0===t?void 0:t.secUid,(0,S.stringify)((0,E._)({is_full_screen:(0,eS.r)()?"1":"0",enter_method:"video_title",from_gid:n.groupId,vid:null==n?void 0:n.awemeId},r)))},[n,r]),$=(0,f.useMemo)(()=>(0,v.jsx)("div",{className:oF.shortcutTip,children:"前往西瓜视频访问作者主页"}),[]),Y=null==n?void 0:null===(t=n.authorInfo)||void 0===t?void 0:t.avatarUri,X=(null==n?void 0:n.awemeType)===g.e.XgVideo;!function(e){let{awemeInfo:t,onAvatarClick:i,preventAvatarDefaultHandle:l,onCooperAitonClick:o,handleAvatarClick:n,userHref:r,player:a,toast:d,abtestData:u}=e,s=(0,f.useCallback)(e=>{var s;let{isInModal:c}=null!==(s=C.Le.getConfig(C.gI.IsInModalVideo))&&void 0!==s?s:{};if(c||tG.s.getPlayerScene(null==a?void 0:a.playerId)===em.lT.Detail){if((0,h.gc)(t)){d?d("广告视频暂不支持此快捷方式"):M.F.info("广告视频暂不支持此快捷方式");return}}else if((0,h.Jt)(t)&&(0,h.Gu)(t)){d?d("广告视频暂不支持此快捷方式"):M.F.info("广告视频暂不支持此快捷方式");return}if(o)return;let v=null==i?void 0:i(e,{clickMethod:"hot_key"});if(!(0,h.Jt)(t)||!!(0,h.Gu)(t))l||n(),!v&&((0,o2.$)(u,t)?eb.emit(eb.EVENT.changeRoute,{to:r}):window.open(r,(0,is.f)()?"_self":"_blank"))},[t,i,n,l,r,o,a,u,d]),c=(0,f.useCallback)(()=>{var e;let{isInModal:i}=null!==(e=C.Le.getConfig(C.gI.IsInModalVideo))&&void 0!==e?e:{};if((i||tG.s.getPlayerScene(null==a?void 0:a.playerId)===em.lT.Detail)&&(0,h.gc)(t)){d?d("广告视频不支持此功能"):M.F.info("广告视频不支持此功能");return}},[t]);(0,f.useEffect)(()=>{if(a)return null==a||a.on("onAvatar",s),null==a||a.on("onFollow",c),()=>{null==a||a.off("onAvatar",s),null==a||a.off("onFollow",c)}},[a,s,c])}({awemeInfo:n,onAvatarClick:d,preventAvatarDefaultHandle:u,onCooperAitonClick:y,handleAvatarClick:G,userHref:K,player:o,toast:F,abtestData:V});let J=(0,f.useCallback)(()=>{oU.sendLog("hover_author_head",{enter_from:(0,eI.mo)(),click_from:"click_icon"})},[]);return(0,v.jsxs)("div",{className:p()(oF.avatarWrap,oF.animation,{[oF.ableMiniType]:s,[oF.cooperAvatar]:y},j),ref:Z,children:[(0,v.jsx)(oG,{className:oF.avatar,"data-e2e":"video-avatar",onMouseEnter:J,onClick:e=>{if(!P){if(y){e.preventDefault(),null==y||y();return}null==o||o.emit("shortcutTopic"),null==d||d(e,{clickMethod:"click_icon"}),u||G()}},href:K,target:"_blank",rel:"noopener noreferrer",children:(0,v.jsx)(iO.Tooltip,{position:"left",className:oF.shortcutTipWrap,style:X?{}:{display:"none"},content:$,getPopupContainer:()=>(null==q?void 0:q.current)||document.body,children:(0,v.jsx)("div",{ref:e=>{q.current=e,null==B||B(e)},children:(0,v.jsx)(o6,{src:Y,type:"extraSmall",className:p()(oF.horizontalAvatar,oF.avatarImageWrap,D)})})})}),c&&(null==n?void 0:null===(i=n.authorInfo)||void 0===i?void 0:i.uid)!==(null==w?void 0:null===(l=w.info)||void 0===l?void 0:l.uid)&&(0,v.jsx)(oQ,{isLogin:H,awemeInfo:n,loginUserInfo:w,shortcut:a,isMobileOversea:P,isShowKeyHotTip:x,ableMiniType:s,followBtnMouseEnter:L,followBtnMouseLeave:A,setShowAvatarTip:z,showAvatarTip:W,isXgVideo:X,isFollowClickedRef:I,actionFollow:T,actionUnFollow:k,showImBtn:m,player:o,onCooperAitonClick:y,loginPanelTarget:b,abtestData:V,onFollowBtnClick:O}),m&&(0,v.jsx)(o1,{isShowKeyHotTip:x,showAvatarTip:W,setShowAvatarTip:z,imBtnMouseEnter:R,imBtnMouseLeave:N,awemeInfo:n,player:o,loginUserInfo:w,abtestData:V}),_&&(0,v.jsx)(oJ,(0,Q._)((0,E._)({},e),{player:o}))]})}var o4=i("258521"),o8=i("944189"),o7=i("934134"),o9={mask:"oAuzpU38",bottomCardCt:"n0J0RE7l",show:"IVrOFzKJ",bottomTitleCt:"uXJmWt47",bottomCardTitle:"YFiVXfNo",closeIcon:"XGKzmFkw"};let ne=e=>{var t;let{close:i,title:l,renderItem:o}=e||{},[n,r]=(0,f.useState)(!1),a=(0,f.useRef)(null===(t=window.player)||void 0===t?void 0:t.paused),d=()=>{var e,t;r(!1),a.current||null===(t=window.player)||void 0===t||null===(e=t.play)||void 0===e||e.call(t),setTimeout(()=>{null==i||i()},300)};return(0,f.useEffect)(()=>{setTimeout(()=>r(!0))},[]),(0,f.useEffect)(()=>{let e=eb.listen(eb.EVENT.CloseMobileBottomCard,e=>{let{title:t}=e;l===t&&d()});return()=>{null==e||e()}},[]),(0,v.jsxs)(v.Fragment,{children:[n&&(0,v.jsx)("div",{className:o9.mask,onClick:d}),(0,v.jsxs)("div",{className:p()(o9.bottomCardCt,{[o9.show]:n}),children:[(0,v.jsxs)("div",{className:o9.bottomTitleCt,children:[l&&(0,v.jsx)("span",{className:o9.bottomCardTitle,children:l}),o&&(0,v.jsx)(la.Z,{onClick:d,className:o9.closeIcon,src:o7.Z,width:16,height:16,viewBox:"0 0 16 16"})]}),null==o?void 0:o()]})]})},nt=(0,oV.ZP)(()=>Promise.all([i.e("72835"),i.e("29191")]).then(i.bind(i,634099))),ni="undefined"==typeof window,nl=(e,t)=>{if(!!t)od.sendLog("openDouyinPanelShow"),!function(e){let{parent:t}=e||{},i=document.createElement("div"),l=document.fullscreenElement||document.body;t?(l=t,null==t||t.appendChild(i)):null==l||l.appendChild(i);let o=(0,o8.createRoot)(i);o.render((0,v.jsx)(ne,(0,Q._)((0,E._)({},e),{close:()=>{var t;o.unmount(),i.remove(),null==e||null===(t=e.close)||void 0===t||t.call(e)},container:i})))}({renderItem:ov,title:e})},no=e=>{var t,i,l,o,n,r;let{awemeInfo:a,loginUserInfo:d,loginDispatch:u,fullScreenTarget:s,onAvatarClick:c,abtestData:m,moreBoxShowList:_,reportExtraParams:g={},shortcutKeyDisable:h,canShowAvatarFollowBtn:y=!0,canShowAvatarImBtn:w=!1,className:x,actionFollow:C,actionUnFollow:I,isActive:b,toast:S,isMainland:T=!0}=e,{isLogin:k}=d,L=(0,f.useRef)(!1),A=(0,f.useRef)(null),R=(0,f.useRef)(null),N=(0,tr.n)();(0,f.useRef)(N).current=N;let{globalCommentCount:P}=(0,f.useContext)(eR.v)||{},[M,j]=(0,f.useState)(!1),{followStatus:D,text:F}=ti({selfUid:null==d?void 0:null===(t=d.info)||void 0===t?void 0:t.uid,actionUid:null==a?void 0:null===(i=a.authorInfo)||void 0===i?void 0:i.uid,defaultFollowerStatus:null==a?void 0:null===(l=a.authorInfo)||void 0===l?void 0:l.followerStatus,defaultFollowStatus:null==a?void 0:null===(o=a.authorInfo)||void 0===o?void 0:o.followStatus}),V=(0,f.useMemo)(()=>["related"],[]),O=eC.getShortcut({disable:h,exclude:V}),B=(0,f.useCallback)(()=>{od.sendLog("clickAuthorHead",{enter_from:(0,ie.yW)(),enter_from_merge:(0,ie.yW)(),group_id:null==a?void 0:a.awemeId}),nl("前往抖音app/电脑端看更多内容",T)},[a]),U=(0,f.useCallback)(()=>{if(T){nl("前往抖音app/电脑端查看、发布评论",T);return}j(!0)},[T]);return(0,f.useCallback)(()=>nl("前往抖音app/电脑端进行收藏"),[]),(0,v.jsxs)("div",{className:p()(oa.videoInteractionWrapper,x),ref:A,children:[(0,v.jsx)("div",{onClick:B,children:(0,v.jsx)(o5,{player:N,loginUserInfo:d,actionFollow:C,actionUnFollow:I,awemeInfo:a,isLogin:k,isMobileOversea:!0,loginDispatch:u,fullScreenTarget:s,isFollowClickedRef:L,onAvatarClick:c,shortcut:O,reportExtraParams:g,ableMiniType:!0,isShowTip:!0,isShowKeyHotTip:!0,followStatus:D,followBtnMouseEnter:()=>null,followBtnMouseLeave:()=>null,imBtnMouseEnter:()=>null,imBtnMouseLeave:()=>null,showImBtn:w,showFollowBtn:y,showAdBtn:!1,loginPanelTarget:R.current,toast:S,abtestData:m,avatarClassName:oa.mobileAvatar,className:oa.mobileAvatarWrap,isActive:b})}),(0,v.jsx)(ob,{loginPanelTarget:R.current,awemeInfo:a,isMobileOversea:!0,isLogin:k,loginUserInfo:d,loginDispatch:u,fullScreenTarget:s,reportExtraParams:(0,Q._)((0,E._)({},g),{relation:null!==(n=null==g?void 0:g.relation)&&void 0!==n?n:String(D)}),ableMiniType:!0,onDiggSuccessCb:e=>{if((null==e?void 0:e.action)!=="digg")return},abtestData:m}),(0,v.jsx)(oS,{awemeInfo:a,count:op({count:Number(P||0),displayWord:"抢首评"}),ableMiniType:!0,onComment:U}),(0,v.jsx)(oj,{loginPanelTarget:R.current,awemeInfo:a,isLogin:k,isMobileOversea:!0,loginUserInfo:d,loginDispatch:u,fullScreenTarget:s,shortcut:O,ableMiniType:!0,reportExtraParams:(0,Q._)((0,E._)({},g),{relation:null!==(r=null==g?void 0:g.relation)&&void 0!==r?r:String(D)}),abtestData:m}),!ni&&(0,v.jsx)(nt,{awemeId:null==a?void 0:a.awemeId,visible:M,isLogin:k,onClose:()=>j(!1),onCommentItemClick:()=>void 0,popupContentstyle:{height:"70vh"},contextData:{awemeId:null==a?void 0:a.awemeId,loginUserInfo:d,isMainland:T,awemeInfo:a}})]})},nn=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"Interaction",Slardar:t,children:(0,v.jsx)(no,(0,E._)({},e))})};var nr=i("451118"),na="SBq27Aqv",nd="m8X8A9oL",nu="Lz908zfq";let ns={isHideChangeGlobal:!1,newMiniAvatarGlobal:!1,newMiniFontSizeGlobal:!1,newMiniSpacingGlobal:!1,newMiniIconGlobal:!1,initializated:!1},nc=e=>{let[t,i]=(0,f.useState)(!1),{children:o,awemeInfo:n,style:r={},className:a,isClientMiniWin:d=!1,abtestData:u,from:s,immediatelyResize:c=!1}=e,[m,_]=(0,f.useState)(null==ns?void 0:ns.newMiniIconGlobal),[g,h]=(0,f.useState)(null==ns?void 0:ns.newMiniAvatarGlobal),[y,w]=(0,f.useState)(null==ns?void 0:ns.newMiniFontSizeGlobal),[x,C]=(0,f.useState)(null==ns?void 0:ns.newMiniSpacingGlobal),[I,b]=(0,f.useState)(null==ns?void 0:ns.newMiniIconGlobal),S=(0,tr.n)(),[T,k]=(0,f.useState)({}),L=(0,f.useRef)(),A=e=>{var t,i,l;let{contentRect:o}=(null==e?void 0:e[0])||{},n=(null==o?void 0:o.height)||(null==S?void 0:null===(t=S.root)||void 0===t?void 0:t.offsetHeight)||(null===(l=L.current)||void 0===l?void 0:null===(i=l.parentNode)||void 0===i?void 0:i.offsetHeight);if(!n)return;let{MaxHeight:r,MiniAvatar:a,MiniText:d,MiniPadding:u,MiniIocn:s,OldHideChangeVideo:c}=em.nl;k({transformOrigin:"bottom",transform:`scale(${n>r?n/2/425:1})`});let v=72,m=n<c+72,p=n<=a+72,g=n<=d+72,y=n<=u+72,x=n<=s+72;(0,f.startTransition)(()=>{_(m),h(p),w(g),C(y),b(x)}),ns={isHideChangeGlobal:m,newMiniAvatarGlobal:p,newMiniFontSizeGlobal:g,newMiniSpacingGlobal:y,newMiniIconGlobal:x,initializated:!0}};return(0,f.useLayoutEffect)(()=>{var e;let t=(null==S?void 0:S.root)||(null===(e=L.current)||void 0===e?void 0:e.parentNode);if((c||!(null==ns?void 0:ns.initializated)&&S)&&A(t),t&&!d){let e=nr.Z.bind(t,A);return()=>{e&&(null==e||e())}}},[S,d,null==u?void 0:u.feedFlowEntrance,s,c]),(0,f.useEffect)(()=>{if(void 0===l&&(l=(0,eL.vU)()),l&&S)return S.on(ev.Events.FULLSCREEN_CHANGE,i),()=>{S.off(ev.Events.FULLSCREEN_CHANGE,i)}},[S]),(0,v.jsx)("div",{className:p()(na,null==a?void 0:a.right,"positionBox",{[nd]:l&&!t&&(null==n?void 0:n.awemeType)!==68,hideChangeVideo:m,newMiniAvatar:g,newMiniFontSize:y,newMiniSpacing:x,newMiniIcon:I}),style:(0,E._)({},r,T),ref:L,children:o})},nv=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"PositionBoxRight",Slardar:t,children:(0,v.jsx)(nc,(0,E._)({},e))})};var nf=i("332679");let nm=e=>{let t=(0,tr.n)(),{isActive:i,fullScreenTarget:l,loginDispatch:o,scene:n,disableHook:r,isLogin:a}=e;return(0,f.useEffect)(()=>{t&&(t.config&&t.config.fullscreenTarget!==l&&(t.config.fullscreenTarget=l,"detail"===n&&(t.config.fullscreenTarget=document.documentElement)),i&&(0,eS.r)()&&(t.getFullscreen(l),"detail"===n&&t.getFullscreen(document.documentElement)))},[t,i,l]),(0,f.useEffect)(()=>{if(t&&i){let e=eb.listen(eb.EVENT.fullScreen,e=>{let{fullScreen:i}=e;!i&&t.exitFullscreen()});return()=>{e()}}},[t,i]),(0,f.useEffect)(()=>{t&&t.usePluginHooks("fullscreen","fullscreen_change",()=>((0,nf.QD)()&&eb.emit(eb.EVENT.changeMinWindows,{event:"close",isMiniWin:!1,clickMethod:"click_fullScreen"}),!0))},[t,i,r]),(0,f.useEffect)(()=>{if(i&&t)return eb.listen(eb.EVENT.syncInteraction,()=>{(0,eS.r)()&&t.isUserActive&&t.getFullscreen()})},[t,i]),null},np=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"FullScrren",Slardar:t,children:(0,v.jsx)(nm,(0,E._)({},e))})};var n_=i("596876"),ng={imgBackground:"HcSNTHJC",baseWidth:"p4Gqx5DP",baseHeight:"A4lR987l",playerShowInfo:"HUMH8Hbl",splashAd:"y6erE6sv",backgroundImg:"jS0GMnxT",backgroundMask:"BKjNXcci",backgroundImgFirefox:"FtXoPRj_",imgPlaceHolder:"hUedT7mV",isHide:"EXPZ2_ww",isFirefox:"xv5t_lrC",displayNone:"DRa58czG"};let nh=()=>{let{contextEvent:e}=(0,f.useContext)(l9.E);return e},ny=e=>{var t,i,l,o,n,r;let{isActive:a,awemeInfo:d,className:u,imgPlaceHolderClassName:s,showImg:c=!0,isPlaying:m=!1,controlHeight:_,abtestData:h}=e,y=(0,tr.n)(),[w,x]=(0,f.useState)(!0),[C,I]=(0,f.useState)(!1),[b,E]=(0,f.useState)(m),[S,T]=(0,f.useState)(null),k=(0,f.useRef)(0),L=(0,eL.vU)();k.current=(null==d?void 0:null===(t=d.video)||void 0===t?void 0:t.width)/(null==d?void 0:null===(i=d.video)||void 0===i?void 0:i.height);let[A,R]=(0,f.useState)(!1);(0,n_.Z)(()=>{R(!0)},[d]);let N=(0,f.useCallback)(()=>{R(!1),S&&k.current&&(S.offsetWidth/k.current>=S.offsetHeight-(null!=_?_:em.fp.Default)?x(!0):x(!1))},[S,_]),P=(0,f.useCallback)(()=>{C||I(!0)},[C]);(0,f.useEffect)(()=>{if(S&&N){let e=nr.Z.bind(S,N);return()=>{e&&e()}}},[S,N]),(0,f.useEffect)(()=>{!a&&E(!1)},[a]);let M=nh();return(0,f.useEffect)(()=>{var e,t,i;let l=()=>{E(!0)};if(y)return null===(e=y.on)||void 0===e||e.call(y,ev.Events.CANPLAY,l),null===(t=y.once)||void 0===t||t.call(y,ev.Events.TIME_UPDATE,l),()=>{var e,t;null===(e=y.off)||void 0===e||e.call(y,ev.Events.CANPLAY,l),null===(t=y.off)||void 0===t||t.call(y,ev.Events.TIME_UPDATE,l)};{let e=e=>{e.once(ev.Events.CANPLAY,l)};return null==M||null===(i=M.on)||void 0===i||i.call(M,oi.PlayerCreated,e),()=>{var t;null==M||null===(t=M.off)||void 0===t||t.call(M,oi.PlayerCreated,e)}}},[y]),(0,eu.Z)(()=>{I(!1),E(!1)},[d]),(0,v.jsxs)("div",{className:p()(u,ng.imgBackground,ng.playerShowInfo,{[ng.isFirefox]:L,hiddenImgbackgroundPlugin:a&&b&&!(0,ol.GP)(d),[ng.displayNone]:(null==d?void 0:d.awemeType)===g.e.Note&&c,inlinePlayerImgbackgroundPlugin:!1},"imgBackground"),ref:T,children:[!C&&c&&(0,v.jsx)("img",{src:(null==d?void 0:null===(l=d.video)||void 0===l?void 0:l.originCover)||(null==d?void 0:null===(r=d.varietyVideo)||void 0===r?void 0:null===(n=r.cover)||void 0===n?void 0:null===(o=n.url_list)||void 0===o?void 0:o[0]),className:p()("backgroundCover",{[ng.baseWidth]:!w,[ng.baseHeight]:w,[ng.isHide]:A,[ng.splashAd]:(0,J.p)(d)},ng.imgPlaceHolder,s),onLoad:N,onError:P}),(0,v.jsx)(l_,{className:p()(ng.backgroundImg,"background",{[ng.backgroundImgFirefox]:L}),maskClassName:ng.backgroundMask,awemeInfo:d,abtestData:h,priorityServerBackupBg:!1})]})};var nw=i("646304"),nx={container:"yq0qePgT",damaIcon:"KNjBL_hG",damaText:"lEAhTjWW",damaTime:"bK1MwKOJ",nums:"vml4bojr"},nC=new ez.h({checkVideoUnsafe:{eventName:"check_video_unsafe",params:{aweme_ids:[],counts:0}},checkVideoUnsafeModal:{eventName:"check_video_unsafe_modal",params:{aweme_id:""}}});let nI={},nb=48e4;{let e=localStorage.getItem("check_safe_time");nb=e?Number(e):nb}let nE=e=>{let{awemeInfo:t,isActive:i,isUseOneCheck:l,playPrevFunc:o,playNextFunc:n,deleteCurrentSwiper:r}=e,a=(0,tr.n)(),[d,u]=(0,f.useState)(!1),[s,c]=(0,f.useState)(5),m=(0,eJ.Z)(async()=>{if(Date.now()-1e3*Number(t.dyQ)>nb){let e=t.awemeId,i=[{item_id:e,dy_q:t.dyQ,tag:t.isAds?2:0,potential_risk_level:0,authentication_token:""}],l=await (0,nw.Y)(i);0===l.statusCode&&(nI[e]=Date.now(),l.result.find(t=>t.item_id===e)&&(a.pause(),u(!0),nC.sendLog("checkVideoUnsafe",{aweme_ids:[t.awemeId],counts:1}),nC.sendLog("checkVideoUnsafeModal",{aweme_id:t.awemeId})));return}}),p=(0,f.useCallback)(async()=>{var e;let i=t.awemeId,l=null!==(e=C.Le.getConfig(C.gI.CheckAwemeList))&&void 0!==e?e:[],o=l.findIndex(e=>e.vid===i);if(-1!==o&&Date.now()-l[o].time>nb){let e=l.slice(o,o+6).map(e=>({item_id:e.vid,dy_q:e.dy_q,tag:e.tag,potential_risk_level:0,authentication_token:""})),n=await (0,nw.Y)(e);if(0===n.statusCode){let e=l.length;for(let t=o;t<Math.min(o+6,e);t++){let e=n.result.find(e=>e.item_id===l[t].vid);l[t].time=Date.now(),l[t].hasCheck=(null==e?void 0:e.safety_code)===0}C.Le.setConfig(C.gI.CheckAwemeList,l),n.result.find(e=>e.item_id===i)&&(a.pause(),u(!0),nC.sendLog("checkVideoUnsafeModal",{aweme_id:t.awemeId}));let r=n.result.filter(e=>e.item_id!==i&&1===e.safety_code).map(e=>e.item_id);eb.emit(eb.EVENT.checkSafeAwemeList,r),nC.sendLog("checkVideoUnsafe",{aweme_ids:n.result.map(e=>e.item_id),counts:n.result.length})}}},[a,t]),_=(0,f.useCallback)(async e=>{if(!e||"firstFrame"===e.eventType)l?m():p()},[l,m,p]);return(0,iT.t)(e=>{!e&&i&&a&&m()}),(0,f.useEffect)(()=>{if(d&&s>0){a.pause();let e=setTimeout(()=>{c(s-1)},1e3);return()=>clearTimeout(e)}},[d,s]),(0,f.useEffect)(()=>{if(d&&0===s&&r){if(l){if("reverse"===C.Le.getConfig(C.gI.InnerAutoPlay).mode){o();return}n();return}r()}},[d,s,l,r]),(0,f.useEffect)(()=>{l&&(c(5),u(!1))},[l,t]),(0,f.useEffect)(()=>{if(a&&i)return a.on(ev.Events.XGLOG,_),a.on(ev.Events.REPLAY,_),()=>{a.off(ev.Events.XGLOG,_),a.off(ev.Events.REPLAY,_)}},[a,i,_]),d&&(0,v.jsxs)("div",{className:nx.container,children:[(0,v.jsx)("div",{className:nx.damaIcon}),(0,v.jsx)("div",{className:nx.damaText,children:"当前视频出现问题，无法播放"}),(0,v.jsxs)("div",{className:nx.damaTime,children:[(0,v.jsx)("span",{className:nx.nums,children:s}),(0,v.jsx)("span",{children:"秒后自动切换至下一个内容"})]})]})};var nS=i("404171"),nT=i("475160");let nk=e=>{let{isActive:t,abtestData:i}=e,l=(0,tr.n)(),o=(0,nS.U)();return(0,f.useEffect)(()=>{if(l&&t){let e=e=>{if((null==e?void 0:e.isInternalOp)!==!0)0===(0,B.$o)(R.LocalStorageKeys.PLAYER_IS_MUTE)&&l.muted&&(0,B.qQ)(R.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,B.qQ)(R.LocalStorageKeys.PLAYER_VOLUME,l.volume),(0,B.qQ)(R.LocalStorageKeys.PLAYER_IS_MUTE,l.muted?1:0),(0,nT.c)({isMute:l.muted,volume:l.volume})};new Promise((e,t)=>{let{volume:o,autoplayMuted:n}=(0,nT.J)(i);try{var r;null===(0,B.$o)(R.LocalStorageKeys.PLAYER_VOLUME)&&(0,B.qQ)(R.LocalStorageKeys.PLAYER_VOLUME,o),null===(0,B.$o)(R.LocalStorageKeys.PLAYER_IS_MUTE)&&(0,B.qQ)(R.LocalStorageKeys.PLAYER_IS_MUTE,0),l.video.volume=o,!(l.__isInlinePlayer&&!l.paused)&&(l.video.muted=n),null===(r=l.getPlugin("volume"))||void 0===r||r.onVolumeChange(),!V.Q.getItem({sKey:R.CookieKeys.VolumeInfo})&&V.Q.setItem(R.CookieKeys.VolumeInfo,{isUserMute:!1,isMute:l.video.muted,volume:l.video.volume}),e(0)}catch(e){l.volume=o,!(l.__isInlinePlayer&&!l.paused)&&(l.video.muted=n),t(e)}}).then(()=>{null==l||l.on(ev.Events.VOLUME_CHANGE,e)}).catch(e=>{});let t=eb.listen(eb.EVENT.syncInteraction,()=>{if(null==l?void 0:l.video){let{volume:e,autoplayMuted:t}=(0,nT.J)(i);l.video.volume=e,l.video.muted=t}});return()=>{null==l||l.off(ev.Events.VOLUME_CHANGE,e),t()}}},[l,t,i,o]),(0,f.useEffect)(()=>{if(t&&l&&[t6.SyncVolume.PreventTip,t6.SyncVolume.PreventTipAndSyncVolume].includes(null==i?void 0:i.syncVolume)){let e=e=>{((null==e?void 0:e.action)==="change_muted"||(null==e?void 0:e.action)==="change_volume")&&setTimeout(()=>{(0,nT.c)({isUserMute:!0===l.muted||0===l.volume,isMute:l.muted,volume:l.volume})})};return l.on(ev.Events.USER_ACTION,e),()=>{l.off(ev.Events.USER_ACTION,e)}}},[l,i,t]),(0,f.useEffect)(()=>{if(t&&l&&[t6.SyncVolume.PreventTip,t6.SyncVolume.PreventTipAndSyncVolume].includes(null==i?void 0:i.syncVolume)){let e=e=>{("volumeDown"===e.action||"volumeUp"===e.action)&&setTimeout(()=>{(0,nT.c)({isUserMute:0===l.volume,isMute:l.muted,volume:l.volume})})};return l.on(tz.B.CustomShortCut,e),()=>{l.off(tz.B.CustomShortCut,e)}}},[l,i,t]),null},nL=e=>{let{isActive:t,abtestData:i,awemeInfo:l,scene:o="",toast:n}=e,r=(0,tr.n)();return(0,f.useEffect)(()=>{if(r&&t){let e=setTimeout(()=>{var e,t,i;r.muted=!0,r.volume=0,r.musicMute=!0,null===(i=r.plugins)||void 0===i||null===(t=i.volume)||void 0===t||null===(e=t.disable)||void 0===e||e.call(t)});return()=>{var t,i,l;clearTimeout(e),r.musicMute=!1,null===(l=r.plugins)||void 0===l||null===(i=l.volume)||void 0===i||null===(t=i.enable)||void 0===t||t.call(i)}}},[r,t]),(0,f.useEffect)(()=>{if(r&&t&&["modal","detail"].includes(o)){if(n){n("该声音不可用");return}M.F.info("该声音不可用")}},[r,t,o]),null},nA=e=>{var t,i;let l=(0,o4.N)(),{awemeInfo:o}=e;return(null==o?void 0:null===(i=o.status)||void 0===i?void 0:null===(t=i.videoMute)||void 0===t?void 0:t.isMute)?(0,v.jsx)(nL,(0,E._)({},e)):(0,v.jsx)(tl.k,{componentName:"VolumePlugin",Slardar:l,children:(0,v.jsx)(nk,(0,E._)({},e))})},nR=e=>{var t,i,l;let{isActive:o}=e||{},n=(0,tr.n)(),r=(0,l8.O)()?null==n?void 0:null===(t=n.getPlugin("progress"))||void 0===t?void 0:t.parent:null==n?void 0:null===(i=n.getPlugin("progress"))||void 0===i?void 0:i.outer,a=null==n?void 0:null===(l=n.getPlugin("volume"))||void 0===l?void 0:l.root;return(0,f.useEffect)(()=>{let e=e=>{null==e||e.stopPropagation()};return null==r||r.addEventListener("pointerdown",e),null==r||r.addEventListener("touchstart",e),null==a||a.addEventListener("pointerdown",e),null==a||a.addEventListener("touchstart",e),()=>{null==r||r.removeEventListener("pointerdown",e),null==r||r.removeEventListener("touchstart",e),null==a||a.removeEventListener("pointerdown",e),null==a||a.removeEventListener("touchstart",e)}},[r,a]),(0,f.useEffect)(()=>{if(n&&o){n.addClass("hide-loading");let e=setTimeout(()=>{n.removeClass("hide-loading")},2e3),t=()=>{n.removeClass("hide-loading"),clearTimeout(e)};return n.once("playing",t),()=>{clearTimeout(e),n.off("playing",t)}}},[o,n]),null},nN=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"SwiperFitPlugin",Slardar:t,children:(0,v.jsx)(nR,(0,E._)({},e))})};var nP=i("167961"),nM=i.n(nP),nj=i("933598"),nD=i("639101"),nF=i("297640"),nV=i("685761");i("527785");var nO=i("418456");let nB=e=>{var t,i;if((0,eL.G6)())return(null!==(t=(0,lJ.G)(R.SessionStorageKeys.DecodeError))&&void 0!==t?t:0)>=2;if(!(0,eL.un)())return!1;if((0,eL.un)()&&(0,eL.Lq)().browser_version<"124.0.0.0")return!0;let l=(0,B.$o)(R.LocalStorageKeys.IsSupportHevc);if(!l||l.has_detect&&!1===l.is_support||3>(0,nO.G)())return!0;let o=null!==(i=(0,B.$o)(R.LocalStorageKeys.FrameInfoList))&&void 0!==i?i:[],n=o.filter(e=>0===e.isH265),r=o.filter(e=>1===e.isH265);if(r.length>=2&&r.every(e=>0===e.total))return ep.logInstance.sendLog("hevcFrameList",{type:"fail",h264_list:n,h265_list:r}),(0,B.qQ)(R.LocalStorageKeys.IsSupportHevc,{has_detect:!0,is_support:!1,pure_support:!0}),!0;let a=n.filter(e=>e.total>20),d=r.filter(e=>e.total>20),u=a.reduce((e,t)=>e+t.rate,0)/a.length,s=d.reduce((e,t)=>e+t.rate,0)/d.length;return!!(d.length>=2)&&!!(s-u>=10)&&(ep.logInstance.sendLog("hevcFrameList",{type:"drop",h264_list:n,h265_list:r,h264_drop:u,h265_drop:s}),(0,B.qQ)(R.LocalStorageKeys.IsSupportHevc,{has_detect:!0,is_support:!1,pure_support:!0}),!0)},nU=e=>{var t,i,l;let{awemeInfo:o,abtestData:n}=e;return!!(0,U.DT)()&&(!!((null==o?void 0:null===(l=o.video)||void 0===l?void 0:null===(i=l.bitRateList)||void 0===i?void 0:null===(t=i.some)||void 0===t?void 0:t.call(i,e=>2===e.isH265))&&(0,oe.Yk)())&&(null==n?void 0:n.useClientH266)===t6.UseClientH266.On||!1)},nH=!1,nW=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(nH)return!0;let t=(0,E._)({preloadDecoder:"h265",wasmFallbackToAsm:!1,evaluateVVCount:1,disabledByLowdecodePrecent:1,reuseMseForAudio:!0,preciseSeek:1/0,offscreenCanvas:!0,lowDecodeFpsDelta:10,lowDecodeThreshold:75},e);nj.Z.setDecodeCapacity(t),nH=!0},nz=()=>nj.Z.isSupported(),nG=()=>{let{simd:e,thread:t,nbCpu:i}=nj.Z.getDeviceCapacity();return e&&i>=8||t&&i>8},nZ=e=>{var t,i,l,o,n,r,a;if((0,U.DT)()||(null==e?void 0:null===(t=e.abtestData)||void 0===t?void 0:t.use265Web)!==t6.Use265Web.On)return!1;let{awemeInfo:d,abtestData:u}=e,{isInMiniModal:s}=null!==(a=C.Le.getConfig(C.gI.IsInLookMiniModal))&&void 0!==a?a:{},c=null==d?void 0:null===(o=d.video)||void 0===o?void 0:null===(l=o.bitRateList)||void 0===l?void 0:null===(i=l.some)||void 0===i?void 0:i.call(l,e=>1===e.isH265),v="recommend"===(0,ie.yW)();return!!(c&&v&&!s&&C.Le.getConfig(C.gI.isVideoPlayed)&&(null===(n=(0,nD.$)())||void 0===n?void 0:n.score)>(null==u?void 0:null===(r=u.xgvideoOptions)||void 0===r?void 0:r.score)&&(null==d?void 0:d.awemeType)===g.e.Normal&&nz()&&nG())&&(nW(null==u?void 0:u.xgvideoOptions),!0)},nq=e=>{var t,i,l,o;if((0,U.DT)())return!1;let{awemeInfo:n,abtestData:r,bitRateList:a}=e;return!nB(null==e?void 0:e.abtestData)&&((null==r?!void 0:!r.noStartedDowngrade)||!!(null===(t=(0,B.$o)(R.LocalStorageKeys.IsSupportHevc))||void 0===t?void 0:t.pure_support))&&(!!((null==n?void 0:null===(o=n.video)||void 0===o?void 0:null===(l=o.bitRateList)||void 0===l?void 0:null===(i=l.some)||void 0===i?void 0:i.call(l,e=>1===e.isH265))&&(null==r?void 0:r.use265HardParse)===t6.Use265HardParse.On&&(0,nF.E)())&&!(0,nV.p)()||!1)},nK=e=>{var t,i;let{awemeInfo:l}=e;if(!(0,U.DT)()||!(null==l?void 0:null===(t=l.video)||void 0===t?void 0:t.bitRateList.some(e=>1===e.isH265))||!(0,oe.Ko)())return!1;let o=null===(i=navigator)||void 0===i?void 0:i.hardwareConcurrency;if(o&&o>=8)return!0;if((0,oe._u)())return!0;if((0,oe.b4)())return!1;if(o<=4)return!1;else return!0},n$=e=>{var t,i,l,o;let{player:n}=e;if(null==n?void 0:null===(t=n.curDefinition)||void 0===t?void 0:t.isH265)return(null==n?void 0:null===(o=n.currentSrc)||void 0===o?void 0:null===(l=o.includes)||void 0===l?void 0:l.call(o,"downgrade_264"))?0:1;return(null==n?void 0:null===(i=n.curDefinition)||void 0===i?void 0:i.isH265)===0?0:nK(e)||nZ(e)?1:0},nY=e=>{let{player:t}=e;return(null==t?void 0:t.curDefinition)?!(2!==t.curDefinition.isH265):!!nU(e)||!1},nQ=e=>{var t,i,l;let{player:o}=e;return(null==o?void 0:null===(t=o.curDefinition)||void 0===t?void 0:t.isH265)&&(null==o?void 0:null===(l=o.currentSrc)||void 0===l?void 0:null===(i=l.includes)||void 0===i?void 0:i.call(l,"downgrade_264"))?1:0},nX=e=>(0,U.DT)()||1!==nQ(e)?0:1,nJ=e=>(0,U.DT)()&&1===nQ(e)?1:0,n0=!1,n1=async()=>{var e,t;if(!(0,U.DT)())return 0;if((null===(e=(0,l8.fV)())||void 0===e?void 0:e.os)!=="Windows")return(0,oe.$n)();{let e=await (null===nM()||void 0===nM()?void 0:null===(t=nM().app)||void 0===t?void 0:t.getHardwareDecodeState());return(null==e?void 0:e.code)===0&&(null==e?void 0:e.data)===1?1:0}},n2=e=>{var t,i,l,o,n,r,a,d,u,s,c,v,f,m,p,_,g,h,y,w,x,C,I,b,E,S;return{author_id:null==e?void 0:null===(t=e.authorInfo)||void 0===t?void 0:t.uid,group_id:null==e?void 0:e.awemeId,log_pb:null==e?void 0:e.logPb,compilation_id:null==e?void 0:null===(i=e.mixInfo)||void 0===i?void 0:i.mixId,playlet_id:null==e?void 0:null===(l=e.seriesInfo)||void 0===l?void 0:l.seriesId,impressionData:null==e?void 0:e.impressionData,awemeId:null==e?void 0:e.awemeId,vduration:null==e?void 0:null===(o=e.video)||void 0===o?void 0:o.duration,qualityType:(null==e?void 0:null===(a=e.video)||void 0===a?void 0:null===(r=a.bitRateList)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.qualityType)||(null==e?void 0:null===(d=e.video)||void 0===d?void 0:d.qualityType),bitRate:(null==e?void 0:null===(c=e.video)||void 0===c?void 0:null===(s=c.bitRateList)||void 0===s?void 0:null===(u=s[0])||void 0===u?void 0:u.bitRate)||(null==e?void 0:null===(v=e.video)||void 0===v?void 0:v.bitRate),gearName:(null==e?void 0:null===(p=e.video)||void 0===p?void 0:null===(m=p.bitRateList)||void 0===m?void 0:null===(f=m[0])||void 0===f?void 0:f.gearName)||"",bitrate_set:null==e?void 0:null===(g=e.video)||void 0===g?void 0:null===(_=g.bitRateList)||void 0===_?void 0:_.map(e=>null==e?void 0:e.gearName),quality_bitrate:null==e?void 0:null===(y=e.video)||void 0===y?void 0:null===(h=y.bitRateList)||void 0===h?void 0:h.map(e=>`${null==e?void 0:e.qualityType}:${null==e?void 0:e.bitRate}`),aweme_type:null==e?void 0:e.awemeType,pic_cnt:null!==(S=null==e?void 0:null===(w=e.images)||void 0===w?void 0:w.length)&&void 0!==S?S:0,trending_topic:null==e?void 0:null===(x=e.hotList)||void 0===x?void 0:x.header,first_tag_name:null==e?void 0:null===(C=e.hotList)||void 0===C?void 0:C.sentence,top:null==e?void 0:null===(I=e.hotList)||void 0===I?void 0:I.rank,awemeRequestTime:null==e?void 0:e.requestTime,is_landscape:(null==e?void 0:null===(b=e.video)||void 0===b?void 0:b.width)>(null==e?void 0:null===(E=e.video)||void 0===E?void 0:E.height)?1:0}},n3={videoPlay:["is_click_cover"],playTime:["is_click_cover"],videoPlayFinish:["is_click_cover"]};var n6=i("986694"),n5=i("30601");let n4=e=>{eb.emit(eb.EVENT.syncInteractionStatus,{action:"lookVideo",awemeId:e.awemeId,fromUserId:e.authorInfo.secUid,extraAwemeInfo:{isFromSort:e.isFromSort}})},n8=e=>{var t;let{awemeInfo:i}=e,l=C.Le.getConfig(C.gI.UnLookVideos);if(!!l)(null===(t=l[null==i?void 0:i.awemeId])||void 0===t?void 0:t.status)===em.Pl.UnLook&&(l[null==i?void 0:i.awemeId].status=em.Pl.Looked,n4(i))};function n7(e){let{networkSpeed:t}=(null==e?void 0:e.curDefinition)||{};return null!=o?o:t?Math.floor(t/1e3):0}var n9=i("152422"),re=i("437089"),rt=i("759070");let ri={disable:!1,used:!1,player:null,firstFrame:{used:!1,data:null,perfTime:0},autoplayStarted:{used:!1,data:null,perfTime:0},loadstart:{used:!1,data:null,perfTime:0},loadeddata:{used:!1,data:null,perfTime:0},playtime:{used:!1,data:null,perfTime:0},playfinish:{used:!1,data:null},prfFirstFeedShow:{used:!1,data:null},prfFirstFrameStart:{used:!1,data:null}},rl=eX()(ri),ro=()=>(!window.__INLINE_PLAYER_DATA__&&(window.__INLINE_PLAYER_DATA__=ri),window.__INLINE_PLAYER_DATA__.disable)?rl:window.__INLINE_PLAYER_DATA__;var rn=i("78837");let rr=e=>{let{getLogInfo:t,clickFrom:i}=e,{author_id:l,group_id:o,log_pb:n,extraParams:r,isMini:a,trending_topic:d,first_tag_name:u,top:s}=t();return(0,Q._)((0,E._)({urlParamList:["previous_page"],author_id:l,group_id:o,log_pb:n,enter_from:(0,eI.mo)(),click_from:i,tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",trending_topic:d,first_tag_name:u,top:s},r),{is_small_window:(0,nf.QD)()?"1":"0"})},ra=e=>{let{getLogInfo:t,isAutoPlay:i,customParams:l}=e,{author_id:o,group_id:n,log_pb:r,extraParams:a}=t();return(0,Q._)((0,E._)({urlParamList:["previous_page"],author_id:o,group_id:n,log_pb:r,enter_from:(0,ie.yW)(),status:i?"on":"off"},a,l),{is_small_window:(0,nf.QD)()?"1":"0"})};i("209955");let rd={click:"click_button",dblclick:"double_click"},ru=e=>{let{getLogInfo:t,clickFrom:i}=e,{author_id:l,group_id:o,log_pb:n,extraParams:r}=t();return(0,E._)({urlParamList:["previous_page"],author_id:l,group_id:o,log_pb:n,enter_from:(0,ie.yW)(),click_from:i,is_small_window:(0,nf.QD)()?"1":"0",player_display_mode:(0,eI.Ok)()},r)};i("777180");var rs=i("22469"),rc=i("9147");let rv={playbacksettingplugin:"hover_speed_cell",immersiveswitchsettingplugin:"hover_pure_mode",volume:"hover_volume",playclaritysettingplugin:"hover_clarity_cell",innerautoplayplugin:"hover_auto_play_mode",watchlaterplugin:"hover_watch_later_add"};var rf=i("733666"),rm=i("958736"),rp=i("280526"),r_=i("23180"),rg=i("292258"),rh=i("612638"),ry=i("641414"),rw=i("124074"),rx=i("982440"),rC=i("300621"),rI=i("60915"),rb=i("527021"),rE=i("166236");let rS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>0?{ufq_src:e.src,ufq_enh:e.enh,ufq_trans:e.trans,ufq_playback_ori:e.playback.ori,ufq_playback_srv1:e.playback.srv1}:{}},rT=e=>{var t,i;return(null==e?void 0:null===(t=e.video)||void 0===t?void 0:t.seeking)?"seeking":(null==e?void 0:null===(i=e.video)||void 0===i?void 0:i.ended)?"end":"playing"},rk=(e,t)=>{var i,l,o,n;let{group_id:r,vduration:a,bitRate:d,qualityType:u,extraParams:s,bitrate_set:c,quality_bitrate:v,action_type:f,aweme_type:m,video_play_mode:p,is_landscape:_,bitrate_set_client:g}=t,{bitrate:h}=(null==e?void 0:e.curDefinition)||{};return(0,E._)({group_id:r,vduration:a,bitrate_set:c,quality_bitrate:v,video_play_mode:p,is_landscape:_,aweme_type:m,action_type:"click"===f?"click":"up"===f?"down":"up",video_quality:(0,rI.S)({player:e,qualityType:u}),video_bitrate:h||d,audio_bitrate:(null===(l=e.curDefinition)||void 0===l?void 0:null===(i=l.audioDefinition)||void 0===i?void 0:i.bitrate)||0,real_bitrate:(null===(o=e.curDefinition)||void 0===o?void 0:o.realBitrate)||0,feature_id:null===(n=e.curDefinition)||void 0===n?void 0:n.featureId,bitrate_set_client:g},s)},rL=e=>{let t=C.Le.getConfig(C.gI.PagingType),i=C.Le.getConfig(C.gI.FastSlowSlide);return{paging_type:e?null==t?void 0:t.current:null==t?void 0:t.pre,slide_speed:i}},rA=(e,t)=>{var i,l,o,n,r,a,d,u,s,c,v,f,m,p,_,g,y,w;let{codecFormat:x,isH265:I,videoFormat:b}=(0,rb.Z)({awemeInfo:t,player:e}),{currentLowDecodeCount:E=0,decoderMode:S=0,lowdecodeVV:T=0,vv:k=0,fps:L=0,currentState:A=0}=(null===(l=e.video)||void 0===l?void 0:null===(i=l.getStats)||void 0===i?void 0:i.call(l))||{},R=null===(o=e.videoFrameInfo)||void 0===o?void 0:o.dropped,N=null===(n=e.videoFrameInfo)||void 0===n?void 0:n.droppedRate;try{if(null==e?void 0:null===(_=e.plugins)||void 0===_?void 0:null===(p=_.srplugin)||void 0===p?void 0:null===(m=p.getStat())||void 0===m?void 0:m.usingSR){let{totalFrames:t,droppedRate:i}=(null==e?void 0:null===(y=e.plugins)||void 0===y?void 0:null===(g=y.srplugin)||void 0===g?void 0:g.getStat())||{};N=i,R=Math.floor(t*i)}}catch(e){}return{duration:e.cumulateTime?e.cumulateTime:0,player_version:e.version,codec_format:x,video_format:b,video_fps:null==e?void 0:null===(r=e.curDefinition)||void 0===r?void 0:r.fps,is_over_rect:(null==e?void 0:null===(a=e.config)||void 0===a?void 0:a.isOverRect)?1:0,internet_speed:n7(e),drop_frame:null===(d=e.videoFrameInfo)||void 0===d?void 0:d.dropped,drop_frame_sr:R,total_play_frame:null===(u=e.videoFrameInfo)||void 0===u?void 0:u.total,drop_frame_rate_sr:N,drop_frame_rate:null===(s=e.videoFrameInfo)||void 0===s?void 0:s.droppedRate,drop_frame_duration:null===(c=e.videoFrameInfo)||void 0===c?void 0:c.droppedDuration,end_status:rT(e),is_bytevc1:I,current_low_decode_count:E,decoder_mode:S,h265_failure_rate:10===k?T/k:-1,decode_fps:null!==(w=null===(v=e.video)||void 0===v?void 0:v.decodeFps)&&void 0!==w?w:0,is_supported_265:nG()?1:0,is_265_degrade_client:nJ({player:e}),is_265_degrade_web:nX({player:e}),frame_rate:L,current_state:A,is_ad:(0,h.Jt)(t)?1:0,is_compilation:(null==t?void 0:null===(f=t.mixInfo)||void 0===f?void 0:f.mixId)?1:0,is_full_screen:(0,eS.r)(),is_show_comment:C.Le.getConfig(C.gI.IsCommetTab)?1:0,is_visible:"visible"===document.visibilityState?1:0}};var rR=i("449536"),rN=i("600921"),rP=i("401156"),rM=i("357162"),rj=i("684881"),rD=i("206965"),rF=i("680222"),rV=i("55052"),rO=i("104481");let rB=(e,t)=>{let i=ro();if(i.playtime.used=!0,i.playtime.data){let e=i.playtime.data;return i.playtime.data=null,e}return e?e:t.paused?0:Date.now()};var rU=i("453498"),rH=i("501984");i("882732"),i("544943");let rW=(e,t)=>{if("string"!=typeof e||!Array.isArray(t))return{pcdnSrcIndex:-1,isPcdnSource:!1};let i=t.findIndex(e=>!!(e.src&&e.ispcdn));if(i>-1){let l=t[i].src,o=new URL(e.startsWith("https:")?e:`https:${e}`),n=new URL(l.startsWith("https:")?l:`https:${l}`),r=o.host===n.host;return{isPcdnSource:r,pcdnSrcIndex:r?i:-1}}return{pcdnSrcIndex:i,isPcdnSource:!1}};var rz=i("595814"),rG=i.n(rz),rZ=i("297250"),rq=i("58577"),rK=i("146836");let r$=e=>{try{var t;if(!window)return;(null===(t=window.videoPlayQuality)||void 0===t?void 0:t.length)?window.videoPlayQuality.push(e):window.videoPlayQuality=[e]}catch(e){}};var rY=i("188408");let rQ=()=>{let e=C.Le.getConfig(C.gI.ModalStartOpenTime);return e?(C.Le.setConfig(C.gI.ModalStartOpenTime,0),Date.now()-e):-1},rX=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>0?{ufq_src:e.src,ufq_enh:e.enh,ufq_trans:e.trans,ufq_playback_ori:e.playback.ori,ufq_playback_srv1:e.playback.srv1}:{}};var rJ=i("379788"),r0=i("431053"),r1=e=>{let{player:t,awemeInfo:i,isActive:l,getLogInfo:o}=e;(0,f.useEffect)(()=>{var e,n,r;if(!t||!i||!l||(null===(e=C.Le.getConfig(C.gI.AbtestData))||void 0===e?void 0:e.longtask))return;let{group_id:a,vduration:d,extraParams:u,bitrate_set:s,bitrate_set_client:c,quality_bitrate:v,action_type:f,aweme_type:m,video_play_mode:p,is_landscape:_}=o(),{codecFormat:g,isH265:y,videoFormat:w}=(0,rb.Z)({awemeInfo:i,player:t}),{battery:x={},memory:I={}}=(0,rD.J)();n9.Z.sendLog("videoInit",(0,Q._)((0,E._)((0,Q._)((0,E._)({urlParamList:["previous_page","tab_name"]},(0,rx.Z)(t)),{group_id:a,bitrate_set:s,bitrate_set_client:c,vduration:d,player_version:t.version,video_format:w,codec_format:g,is_mute:(null==t?void 0:t.muted)?"1":"0",player_volume:null==t?void 0:t.volume,local_mute:(0,B.$o)(R.LocalStorageKeys.PLAYER_IS_MUTE),local_volume:(0,B.$o)(R.LocalStorageKeys.PLAYER_VOLUME),is_video_support:Number((0,rU.k)().isSupport),quality_bitrate:v,action_type:f,is_ad:(0,h.Jt)(i)?1:0,is_compilation:(null==i?void 0:null===(n=i.mixInfo)||void 0===n?void 0:n.mixId)?1:0,aweme_type:m,is_bytevc1:y,video_play_mode:p,is_landscape:_,play_order:(0,nO.G)()}),u),{buffer_duration:(0,rp.U)(t,null==i?void 0:null===(r=i.video)||void 0===r?void 0:r.duration),battery_charging:x.charging,battery_level:x.level,memory_js_heap_size_limit:I.jsHeapSizeLimit,memory_free_js_heap_size:I.freeJSHeapSize,memory_free_level:I.freeLevel,memory_used_js_heap_size:I.usedJSHeapSize}))},[t,i,l])},r2=i("73528");let r3=0,r6=e=>{var t,i,l,o,n,r,a,d,u,s;if(!Array.isArray(null==e?void 0:null===(n=e.plugins)||void 0===n?void 0:null===(o=n.mp4encryptplayer)||void 0===o?void 0:null===(l=o.mp4)||void 0===l?void 0:null===(i=l.meta)||void 0===i?void 0:null===(t=i.moov)||void 0===t?void 0:t.trak))return{mediaTime:0,fixEditListOffset:!1};let c=e.plugins.mp4encryptplayer.mp4.meta.moov.trak.find(e=>{var t,i;return(null===(i=e.mdia)||void 0===i?void 0:null===(t=i.hdlr)||void 0===t?void 0:t.handlerType)==="vide"});if(!c)return{mediaTime:0,fixEditListOffset:!1};let v=null===(a=c.edts)||void 0===a?void 0:null===(r=a.elst)||void 0===r?void 0:r.entries,f=null===(u=c.mdia)||void 0===u?void 0:null===(d=u.mdhd)||void 0===d?void 0:d.timescale;if(Array.isArray(v)&&v.length>0&&f>0){let t=v[0].media_time;if(t>0)return{mediaTime:t/f,fixEditListOffset:null===(s=e.plugins.mp4encryptplayer.config)||void 0===s?void 0:s.fixEditListOffset}}return{mediaTime:0,fixEditListOffset:!1}},r5=["MP4_MSE","DASH","MP4_MSE_SOFT"],r4=e=>{let{isNext:t,player:i,awemeInfo:l,getLogInfo:o,isActive:n}=e;(0,f.useEffect)(()=>{if(t&&i&&l){let e=(0,ie.yW)(),t=()=>{var t,n,r,a,d,u;if(r5.includes(i.vtype.toUpperCase()))return;let{awemeId:s}=l,c=(null===(t=i.curDefinition)||void 0===t?void 0:t.bitrate)||0,v=(0,rp.U)(i,null==l?void 0:null===(n=l.video)||void 0===n?void 0:n.duration),f=(0,rf.e)(v*c),m=(0,r_.A)(i),{qualityType:p}=o(),_={user_unique_id:null===(r=(0,F.Es)())||void 0===r?void 0:r.user_unique_id,enter_from:e,group_id:s,preload_size:f,preload_time:v,video_bitrate:c,audio_bitrate:(null===(d=i.curDefinition)||void 0===d?void 0:null===(a=d.audioDefinition)||void 0===a?void 0:a.bitrate)||0,real_bitrate:(null===(u=i.curDefinition)||void 0===u?void 0:u.realBitrate)||0,video_quality:(0,rI.S)({player:i,qualityType:p}),data_player_type:m,vtype:i.vtype,duration:i.duration,type:0};n9.Z.sendLog("prfLastPreloadDataSize",_,!1)};return i.on(tz.B.BeforeDestroy,t),window.addEventListener("beforeunload",t),()=>{i.off(tz.B.BeforeDestroy,t),window.removeEventListener("beforeunload",t)}}},[i,l,t])},r8=e=>{let{awemeInfo:t,isActive:i,isNext:l,isPrev:n,logParams:r,userInfo:a,isClientMiniWin:d,isFirst:u,index:s}=e||{},c=(0,tr.n)(),{getH265DegradeReportFlag:v,getSupportHwClientFlag:m}=function(e){let{awemeInfo:t,isActive:i}=e,l=(0,f.useRef)(!1),o=(0,f.useRef)((0,oe.$n)());l.current=(0,f.useMemo)(()=>!n0&&!nz()&&(n0=!0,!0),[t]),(0,f.useEffect)(()=>{(async()=>{i&&(o.current=await n1())})()},[t,i]);let n=(0,f.useCallback)(()=>o.current,[]);return{getH265DegradeReportFlag:(0,f.useCallback)(()=>l.current?1:0,[]),getSupportHwClientFlag:n}}({awemeInfo:t,isActive:i}),{getActionType:p,getIsChangingVideoSrc:_}=function(e){let{awemeInfo:t}=e,{isNext:i,isPrev:l,isActive:o}=e,n=(0,f.useRef)(null),r=(0,f.useRef)("click"),a=(0,f.useRef)(!1),d=(0,f.useRef)();i?r.current="down":l&&(r.current="up"),n.current&&(null==t?void 0:t.awemeId)&&(null==t?void 0:t.awemeId)!==n.current&&(o&&d.current?(a.current=!0,r.current="click"):a.current=!1),d.current=o,n.current=null==t?void 0:t.awemeId;let u=(0,f.useCallback)(()=>r.current,[]);return{getActionType:u,getIsChangingVideoSrc:(0,f.useCallback)(()=>a.current,[])}}({awemeInfo:t,isNext:l,isPrev:n,isActive:i}),{getLogInfo:y}=function(e){let{awemeInfo:t,player:i,isActive:l}=e,{isFirst:o,isClientMiniWin:n,specialParams:r,logParams:a}=e,{getActionType:d}=e,{inImmersive:u}=i7({player:i,isActive:l});(0,f.useEffect)(()=>{if(!i||!l)return;let e=e=>{let t=(null==e?void 0:e.from)||(null==e?void 0:e.clickFrom),i="auto";["click_button","scroll"].includes(t)?i="manual":"auto"===t&&(i="auto_play_open"),C.Le.setConfig(C.gI.VideoPlayMethod,i)},t=eb.listen(eb.EVENT.reportPlayNext,e),o=eb.listen(eb.EVENT.reportPlayPrev,e);return()=>{o(),t()}},[i,t,l]);let s=(0,f.useRef)(null);return s.current=(0,f.useMemo)(()=>{var e,l,s,c,v,f,m,p,_,g,h,y;let w=(0,Q._)((0,E._)({item_duration_ms:(null==t?void 0:null===(e=t.video)||void 0===e?void 0:e.duration)||0},a),{log_pb:null==t?void 0:t.logPb});Object.keys(r).forEach(e=>{r[e].forEach(e=>{delete w[e]})});let x={is_click_cover:o?1:0,action_type:d(),is_pure:u?"1":"0",extraParams:w,isMini:n,video_play_mode:(null===(l=V.Q.getItem({sKey:R.CookieKeys.VideoFilterMemoSelect,refresh:!1}))||void 0===l?void 0:l.type)===1?"landscape":"all",is_insert_wallpaper:(null===(s=C.Le.getConfig(C.gI.WallPaperIds))||void 0===s?void 0:s.includes(null==t?void 0:t.awemeId))?1:0,latest_group_id:null===(c=C.Le.getConfig(C.gI.FeedLatestViewedAweme))||void 0===c?void 0:c.awemeId,if_first_big_card:a.if_first_big_card||0};return(0,Q._)((0,E._)({},n2(t),x),{isFromNextAutoPlay:(null==i?void 0:null===(m=i.plugins)||void 0===m?void 0:null===(f=m.autoplaysettingplugin)||void 0===f?void 0:null===(v=f.config)||void 0===v?void 0:v.nextAutoPlay)||(null==i?void 0:null===(g=i.plugins)||void 0===g?void 0:null===(_=g.searchautoplaysettingplugin)||void 0===_?void 0:null===(p=_.config)||void 0===p?void 0:p.nextAutoPlay),bitrate_set_client:null==i?void 0:null===(h=i.definitionList)||void 0===h?void 0:h.map(e=>null==e?void 0:e.gearName),quality_bitrate_client:null==i?void 0:null===(y=i.definitionList)||void 0===y?void 0:y.map(e=>`${e.qualityType}:${e.bitrate}`)})},[t,a,o,n,u,i,d]),{getLogInfo:(0,f.useCallback)(()=>s.current,[])}}({awemeInfo:t,player:c,specialParams:n3,logParams:r,isFirst:u,isClientMiniWin:d,isActive:i,getActionType:p}),{getSpecialParams:w}=function(e){let{getLogInfo:t}=e,i=t(),l=(0,f.useRef)(null);return l.current=(0,f.useMemo)(()=>{let e={};return Object.keys(n3).forEach(t=>{let l={};n3[t].forEach(e=>{l[e]=i[e]}),e[t]=l}),e},[i]),{getSpecialParams:(0,f.useCallback)(()=>l.current,[])}}({getLogInfo:y});return!function(e){let{player:t}=e;(0,f.useEffect)(()=>{if(!t)return;let e=()=>{t.emit("focus")};return!t.paused&&e(),t.on("autoplay_started",e),()=>{t.off("autoplay_started",e)}},[t]),(0,f.useEffect)(()=>{if(!t||(0,B.$o)(R.LocalStorageKeys.MobileFirstGuide))return;let e=i=>{let{currentTime:l}=i;l>.5&&(eb.emit(eb.EVENT.videoPlay),t.off(ev.Events.TIME_UPDATE,e))};return null==t||t.on(ev.Events.TIME_UPDATE,e),()=>{t.off(ev.Events.TIME_UPDATE,e)}},[t])}({player:c}),!function(e){let{player:t,awemeInfo:i,userInfo:l,isActive:o}=e,n=(0,f.useRef)(!1),r=(0,f.useRef)({});(0,f.useEffect)(()=>{if(i&&o)return()=>{let{awemeId:e,progress:t}=r.current;C.Le.setConfig(C.gI.PreAwemeSeenStatus,{id:e,seen:t>=95?1:0})}},[o,i]),(0,f.useEffect)(()=>{n.current=!1},[i.awemeId]),(0,f.useEffect)(()=>{if(!t||!i)return;let e=()=>{var e,t,o;if(!n.current){if(n.current=!0,(null==l?void 0:l.isLogin)&&(null==i?void 0:i.awemeId)){let{id:e,seen:t}=C.Le.getConfig(C.gI.PreAwemeSeenStatus)||{};(0,n6.w6)({awemeId:null==i?void 0:i.awemeId,authorId:null==i?void 0:null===(o=i.authorInfo)||void 0===o?void 0:o.uid,preItemId:e,preItemSeen:t})}n4(i),(null===(t=C.Le.getConfig(C.gI.UnLookVideos))||void 0===t?void 0:null===(e=t[null==i?void 0:i.awemeId])||void 0===e?void 0:e.status)===em.Pl.UnLook&&((0,n5.fetchHomeImpression)({awemeIds:i.awemeId}),n8({awemeInfo:i}))}},o=e=>{let l=0;if((null==i?void 0:i.awemeType)===g.e.Note){var o;let e=null==t?void 0:null===(o=t.getPlugin)||void 0===o?void 0:o.call(t,"pictureProgress");l=100*((null==e?void 0:e.percent)||0)}else l=(null==e?void 0:e.currentTime)/(null==e?void 0:e.duration)*100;let n=null==i?void 0:i.awemeId,{awemeId:a,progress:d}=r.current;if(n!==a||!(l<d))r.current={awemeId:n,progress:l}};return t.on("timeupdate",o),t.once("timeupdate",e),()=>{t.off("timeupdate",o),t.off("timeupdate",e)}},[t,i,l,o])}({player:c,awemeInfo:t,userInfo:a,isActive:i}),!function(e){let{player:t}=e;(0,f.useEffect)(()=>{if(!t)return;let e=e=>{let{speed:t}=e;o=t,C.Le.setConfig(C.gI.NetworkSpeed,t)};return t.on("download_speed_change",e),()=>{t.off("download_speed_change",e)}},[t])}({player:c}),!function(e){let{awemeInfo:t,player:i,isActive:l,isNext:o,index:n}=e,{getIsChangingVideoSrc:r,getLogInfo:a,getH265DegradeReportFlag:d,getSpecialParams:u,getReportNetworkSpeed:s,getSupportHwClientFlag:c}=e;!function(e){let{player:t,awemeInfo:i}=e,{getLogInfo:l}=e;(0,f.useEffect)(()=>{if(!t)return;let e=!1,i=()=>{e=!0},o=()=>{e=!1},n=1,r=setInterval(()=>{if(!e)return;let{author_id:t,group_id:i,log_pb:o,compilation_id:r,extraParams:a,trending_topic:d,first_tag_name:u,top:s}=l(),c=0;try{var v,f,m;let e=null===(m=window)||void 0===m?void 0:null===(f=m.__LIVE_PLAYER__)||void 0===f?void 0:null===(v=f.getPlayer)||void 0===v?void 0:v.call(f);c=(null==e?void 0:e.paused)===!1&&(null==e?void 0:e.muted)===!1?1:0}catch(e){}n9.Z.sendLog("videoPlayCheckPoint",(0,E._)({urlParamList:["previous_page"],author_id:t,group_id:i,log_pb:o,enter_from:(0,eI.mo)(),compilation_id:r,order:n++,tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",trending_topic:d,first_tag_name:u,top:s,is_live_playing:c},a))},6e4);return!t.paused&&i(),t.on("autoplay_started",i),t.on("play",i),t.on("pause",o),()=>{r&&clearInterval(r),t.off("autoplay_started",i),t.off("play",i),t.off("pause",o)}},[t,i,l])}({awemeInfo:t,player:i,getLogInfo:a}),!function(e){let{awemeInfo:t,player:i,isActive:l}=e,{getLogInfo:o,getH265DegradeReportFlag:n,getSupportHwClientFlag:r}=e,a=(0,f.useRef)(null),d=(0,f.useRef)(null),u=nh(),s=()=>{var e,i;let l=C.Le.getConfig(C.gI.LynxInfo);return(!(0,O.r)()||(null==l?void 0:l.swiperIndex)===void 0||!((null==l?void 0:null===(e=l.awemeList)||void 0===e?void 0:e.length)>0)||(null===(i=l.awemeList[null==l?void 0:l.swiperIndex])||void 0===i?void 0:i.aweme_id)!==t.awemeId)&&(C.Le.setConfig(C.gI.hasReportVideoRequest,!0),!0)};(0,f.useEffect)(()=>{var e,c;let v;(a.current&&(null===(e=a.current)||void 0===e?void 0:e.awemeId)!==(null==t?void 0:t.awemeId)||!l||!t)&&(a.current=null,d.current=null);let f=i,m=()=>{a.current&&!a.current.isReport&&(a.current.isReport=!0,s()&&(0,re.Z)(a.current.data))},p=()=>{f&&(f.loadstart=1,f.firstfame=0),l&&m()},_=()=>{if(d.current&&!d.current.isReport){var e,t;(0,rt.Z)(d.current.data),(null===(t=d.current)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.is_success)&&(d.current.isReport=!0)}},g=()=>{f&&(f.loadeddata=1),l&&_()},h=e=>{var i,l;let d=o(),{awemeId:u,vduration:s,compilation_id:c,qualityType:v,extraParams:m}=d,p=(null===(i=a.current)||void 0===i?void 0:i.duration)?new Date().getTime()-a.current.duration:0;return{awemeId:t.awemeId,isReport:!1,data:{group_id:u,extraParams:m,duration:p,vduration:s,compilation_id:c,videoQuality:(null==f?void 0:null===(l=f.curDefinition)||void 0===l?void 0:l.qualityType)||v,is_success:e,logInfo:d,player:f,awemeInfo:t,h265DeGrade:n(),supportHw:r(),vtype:null==f?void 0:f.vtype}}},y=e=>{let i=o(),{awemeId:l,extraParams:a}=i;return{awemeId:t.awemeId,duration:new Date().getTime(),data:{group_id:l,extraParams:a,logInfo:i,player:f,awemeInfo:t,h265DeGrade:n(),supportHw:r(),host:null==e?void 0:e.host,fetchExpired:null==t?void 0:t.fetchExpired,vtype:null==f?void 0:f.vtype},isReport:!1}},w=e=>{var t,i;if("loadstart"===e.eventType){let i=C.Le.getConfig(C.gI.SearchVideoPlayMethod);i&&C.Le.setConfig(C.gI.VideoPlayMethod,i),a.current?!(null===(t=d.current)||void 0===t?void 0:t.isReport)&&(d.current=h(0),a.current.duration=new Date().getTime(),g()):(a.current=y(e),p())}else"loadeddata"===e.eventType&&(!(null===(i=d.current)||void 0===i?void 0:i.isReport)&&(d.current=h(1)),g())};t&&(p(),g(),f&&f.on(ev.Events.XGLOG,w));let x=e=>{if(t){var i,l;(f=e).dyLogStat&&f.dyLogStat.loadstart&&((null===(i=f.dyLogStat.loadstart.awemeInfo)||void 0===i?void 0:i.awemeId)===t.awemeId&&w(f.dyLogStat.loadstart.data),f.dyLogStat.loadstart=null);let o=ro();o.loadstart.used=!0,o.loadstart.data&&(w(o.loadstart.data),o.loadstart.data=null),f.dyLogStat&&f.dyLogStat.loadeddata&&((null===(l=f.dyLogStat.loadeddata.awemeInfo)||void 0===l?void 0:l.awemeId)===t.awemeId&&w(f.dyLogStat.loadeddata.data),f.dyLogStat.loadeddata=null),o.loadeddata.used=!0,o.loadeddata.data&&(w(o.loadeddata.data),o.loadstart.data=null),f.on(ev.Events.XGLOG,w),v=()=>{f.off(ev.Events.XGLOG,w)}}};return null==u||null===(c=u.on)||void 0===c||c.call(u,oi.PlayerCreated,x),()=>{var e;null==v||v(),null==f||f.off(ev.Events.XGLOG,w),null==u||null===(e=u.off)||void 0===e||e.call(u,oi.PlayerCreated,x)}},[t,l])}({awemeInfo:t,player:i,isActive:l,getLogInfo:a,getH265DegradeReportFlag:d,getSupportHwClientFlag:c}),!function(e){let{player:t,getLogInfo:i,awemeInfo:l}=e,o=(0,f.useRef)(-1);(0,f.useEffect)(()=>{if(!t)return;let e=null,n=n=>{"change_volume"===n.action&&(-1===o.current&&(o.current=n.volume),e&&clearTimeout(e),e=setTimeout(()=>{var e,r;if(!(null===(e=n.props)||void 0===e?void 0:e.volume))return;let{to:a}=null===(r=n.props)||void 0===r?void 0:r.volume,d=o.current;o.current=-1;let u=d>a,{extraParams:s}=i();n9.Z.sendLog("prfVolumeChange",(0,E._)((0,Q._)((0,E._)({down:u?1:0,enter_from:(0,eI.vM)(),group_id:null==s?void 0:s.from_group_id},s,null==n?void 0:n.logData),{is_mute:0===a?"1":"0",pre_player_volume:d,cur_player_volume:a,play_order:(0,nO.G)(),is_small_window:(0,nf.QD)()?"1":"0",listen_device:(0,eI.nj)()}),(0,rn.$)({player:t,awemeInfo:l})))},500))};return t.on("user_action",n),()=>{t.off("user_action",n)}},[t])}({player:i,getLogInfo:a,awemeInfo:t}),!function(e){let{player:t,awemeInfo:i,isActive:l,getH265DegradeReportFlag:o,getLogInfo:n,getSupportHwClientFlag:r}=e,a=(0,f.useRef)(0),d=(0,f.useRef)(0),u=(0,f.useRef)(0);(0,f.useEffect)(()=>{var e;if(!t||!l)return;let s=!1,c="",v="",f=-1,m=0,p=(null===(e=C.Le.getConfig(C.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1,_=e=>{c=null==e?void 0:e.host,v=null==e?void 0:e.vtype,t.removedBuffer=0},g=()=>{m=1},h=e=>{"firstFrame"===e.eventType&&(f=Date.now())},y=()=>{a.current++},w=e=>{let{eventType:t,pluginName:i,action:l,currentTime:o,prePlayTime:n}=e||{},r=()=>{d.current++,u.current=n-o};if("progress"===i)switch(t){case"click":r();break;case"drag":"dragend"===l&&r()}else l===tz.B.DyUserSeek&&r()},x=()=>{var e,l,_,g,h,y,w,x,C,I,b,S,T,k,L,A,R,N,P,M,j,D,F,V,O,B;if(s)return;s=!0;let U=(null==i?void 0:null===(_=i.video)||void 0===_?void 0:null===(l=_.playApi)||void 0===l?void 0:null===(e=l.startsWith)||void 0===e?void 0:e.call(l,"blob"))?1:0,{preloadTime:H,preloadSize:W,startBuffer:z,audioDuration:G,minDuration:Z}=(0,rg.P)(t),q=null==i?void 0:null===(h=i.video)||void 0===h?void 0:null===(g=h.bitRateList)||void 0===g?void 0:g.find(e=>{var i;return e.qualityType===(null==t?void 0:null===(i=t.curDefinition)||void 0===i?void 0:i.qualityType)}),K=(0,Q._)((0,E._)({preload_time:(0,rf.N)(H),preload_time_audio:G,preload_time_min:Z,preload_size:W||0,preload_type:(0,rE.me)(t)?2:1,hit_preload:(0,rE.qJ)(t),is_mute:(null==t?void 0:t.muted)?"1":"0",player_volume:null==t?void 0:t.volume,video_mute:(null==t?void 0:null===(y=t.video)||void 0===y?void 0:y.muted)?"1":"0",video_volume:null==t?void 0:null===(w=t.video)||void 0===w?void 0:w.volume,equalize_state:null!==(M=null==t?void 0:t.equalizeVolumeState)&&void 0!==M?M:0,use_new_mammon_worklet_processor:null!==(j=null==t?void 0:t.useMammonWorkletProcessorV3)&&void 0!==j&&j,use_new_mammon_worklet_processor_with_wasm:null!==(D=null==t?void 0:t.useMammonWorkletProcessorV3Wasm)&&void 0!==D&&D,hit_new_mammon_worklet_processor:null!==(F=null==t?void 0:t.hitMammonWorkletProcessorV3)&&void 0!==F&&F,volume_balance_longtest_consume_time:null!==(V=null==t?void 0:null===(x=t.effectNodeConsumeTime)||void 0===x?void 0:x.longest)&&void 0!==V?V:-2,volume_balance_shortest_consume_time:null!==(O=null==t?void 0:null===(C=t.effectNodeConsumeTime)||void 0===C?void 0:C.shortest)&&void 0!==O?O:-2,is_in_modal:p},(0,rn.$)({player:t,awemeInfo:i}),(()=>{try{var e,l,o,n;let{cdn:r,pcdn:s}=(null==t?void 0:t.bandwidth)||(null==t?void 0:t.bandWidth)||{},{size:c}=r||{},{size:v,trace_id:f,uri:m,fid:p}=s||{},_=u.current,g=d.current,h=(0,rm.a)(t,a.current),y=(null==t?void 0:null===(e=t.curDefinition)||void 0===e?void 0:e.realBitrate)||(null==t?void 0:null===(l=t.curDefinition)||void 0===l?void 0:l.bitrate)||0,w=(0,rp.U)(t,null==i?void 0:null===(o=i.video)||void 0===o?void 0:o.duration),x=(0,rf.e)(w*y),C=(0,r_.A)(t);if(U){let e=t.duration?(h>0?t.duration:t.currentTime)/t.duration:0;x*=e}let{pcdn_tracker_request_cnt:I,pcdn_tracker_failed_cnt:b,pcdn_download_request_cnt:E,pcdn_download_failed_cnt:S}=(null==t?void 0:t.pcdnReq)||(null==t?void 0:null===(n=t.config)||void 0===n?void 0:n.pcdnReq)||{};return{fid:p,trace_id:f,uri:m,pcdn_size_video:v||0,cdn_size_video:c||0,play_size:(0,rm.L)(t),loop_cnt:h,seek_cnt:g,seek_time:(0,rf.N)(_),play_leave_position:(0,rf.N)(t.currentTime),play_duration_clean:(0,rf.N)(h>0?t.duration:t.currentTime),cache_size:x,cache_duration:(0,rf.N)(w),data_player_type:C,pcdn_tracker_request_cnt:I,pcdn_tracker_failed_cnt:b,pcdn_download_request_cnt:E,pcdn_download_failed_cnt:S}}catch(e){return{}}})(),(0,rh.m)({player:t}),(0,rh.B)({player:t}),(null==t?void 0:t.superResolution)||{},(null==q?void 0:q.mvmaf)||{},rS(null==q?void 0:q.ufq)),{urlParamList:["previous_page","tab_name"],is_success:m||(null==t?void 0:null===(I=t.video)||void 0===I?void 0:I.readyState)>=2?1:0,host:c,vtype:v,play_order:(0,nO.G)(),is_265_degrade:o(),from_start_duration:-1===f?-1:Date.now()-f,is_support_hw:r(),is_hw:(null==t?void 0:null===(b=t.config)||void 0===b?void 0:b.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,oe._u)()?1:0,is_supported_264_hw:(0,oe.b4)()?1:0,is_hw_client:(0,ry.N)(t),is_gear_down:null!==(B=null==t?void 0:null===(S=t.curDefinition)||void 0===S?void 0:S.orgDefinition)&&void 0!==B?B:0,definition:null==t?void 0:null===(T=t.curDefinition)||void 0===T?void 0:T.definition,start_buffer:z,if_invisible:(0,nf.Vr)()?"1":"0",is_small_window:(0,nf.QD)()?"1":"0",buffer:(null==t?void 0:null===(k=t.bufferedPoint)||void 0===k?void 0:k.end)-(null==t?void 0:null===(L=t.bufferedPoint)||void 0===L?void 0:L.start)||0,has_down_definition:t.definitionList.find(e=>{var i;return(null==e?void 0:e.definition)===(null==t?void 0:null===(i=t.curDefinition)||void 0===i?void 0:i.definition)+1})?1:0});(0,rw.O)(t);let $=(null==t?void 0:null===(A=t.getSwitchDefinationInfos)||void 0===A?void 0:A.call(t))||{};n9.Z.sendLog("videoPlayEnd",(0,E._)((0,Q._)((0,E._)({},rL(!1),K,(0,rx.Z)(t),(0,rC.Z)(),rA(t,i),rk(t,n()),(null==t?void 0:t.pcdnVVStat)||{},(null==t?void 0:null===(P=t.plugins)||void 0===P?void 0:null===(N=P.srplugin)||void 0===N?void 0:null===(R=N.getStat)||void 0===R?void 0:R.call(N))||{},(null==t?void 0:t.novv)||{}),{firstframed:t.firstfame?1:0,is_cache_video:U,listen_device:(0,eI.nj)(),abr_upper_count:t.upperCount||0,abr_lower_count:t.lowerCount||0,abr_total_count:t.abrCount||0,abr_change_count:t.abrChangeCount||0,abr_change_upper_count:t.upperAbrChangeCount||0,abr_change_lower_count:t.lowerAbrChangeCount||0,video_play_speed:t.playbackRate}),$),!1),t.removedBuffer=0,t.preplayStat=0,t.prepauseStat=0,t.superResolution={},t.upperCount=0,t.lowerCount=0,t.abrCount=0,t.abrChangeCount=0,t.upperAbrChangeCount=0,t.lowerAbrChangeCount=0,t.bandWidth=null},I=e=>{t.removedBuffer+=e.removeDur};return t.on("removeBuffer",I),t.on(ev.Events.XGLOG,h),t.on(ev.Events.PLAY,_),t.once(ev.Events.LOADED_DATA,g),t.on(ev.Events.USER_ACTION,w),t.on(ev.Events.ENDED,y),window.addEventListener("beforeunload",x),t.once(tz.B.BeforeDestroy,x),()=>{x(),t.off(tz.B.BeforeDestroy,x),t.off(ev.Events.XGLOG,h),t.off(ev.Events.PLAY,_),t.off(ev.Events.LOADED_DATA,g),t.off(ev.Events.USER_ACTION,w),t.off(ev.Events.ENDED,y),t.off("removeBuffer",I),window.removeEventListener("beforeunload",x)}},[t,i,l]),(0,f.useEffect)(()=>{a.current=0,d.current=0,u.current=0},[i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a,getH265DegradeReportFlag:d,getSupportHwClientFlag:c}),!function(e){let{player:t,awemeInfo:i,isActive:l,index:o}=e,{getLogInfo:n,getSpecialParams:r}=e;(0,f.useEffect)(()=>{if(!t||!l||(null==i?void 0:i.awemeType)===68)return;let e=r(),a=()=>{var l,r,a,d,u,s,c,v,f,m,p;let{author_id:_,group_id:g,log_pb:y,compilation_id:w,playlet_id:x,extraParams:I,aweme_type:b,isMini:S,trending_topic:T,first_tag_name:k,top:L,is_click_cover:A,is_pure:N,is_insert_wallpaper:P,if_first_big_card:M}=n(),{isH265:D}=(0,rb.Z)({awemeInfo:i,player:t}),F=!1,O=(0,lJ.G)(R.SessionStorageKeys.CacheRecommendActiveAwemeID);O&&O===g&&(F=!0),n9.Z.sendLog("videoPlayFinish",(0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)({is_click_cover:A,urlParamList:["trending_topic","previous_page"],enter_from:(0,eI.mo)(),enter_from_merge:(0,rR.z)(""),enter_method:(0,j.Rs)("enter_method")||"",author_id:_,group_id:g,log_pb:y,compilation_id:w,playlet_id:x,is_insert_wallpaper:P,tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",is_full_screen:(0,eS.r)()?"1":"0",is_full_webscreen:tG.s.getIsPageFullscreen()?"1":"0",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:(null===(l=C.Le.getConfig(C.gI.IsCollapseAuthorCard))||void 0===l?void 0:l.isCollapseAuthorCard)?0:1,from_follow_list:(null===(r=C.Le.getConfig(C.gI.FromFollowList))||void 0===r?void 0:r.tag)?"1":"0",is_mute:(null==t?void 0:t.muted)?"1":"0"},(0,eT.t)()),{mute_type:null===(a=C.Le.getConfig(C.gI.ForceMuted))||void 0===a?void 0:a.currentMuteType,is_force:(null===(d=C.Le.getConfig(C.gI.ForceMuted))||void 0===d?void 0:d.currentMuteType)==="browser"?"1":"0",aweme_type:b,trending_topic:T,first_tag_name:k,top:L,is_pure:N,from_push:V.Q.getItem({sKey:R.CookieKeys.FromClientPush})?1:0}),I,e.videoPlayFinish||{}),{is_bytevc1:D,video_time:(0,rN.n)(null==i?void 0:null===(u=i.video)||void 0===u?void 0:u.duration),is_from_ad:(0,h.Jt)(i)?1:0,auto_play_mode:null===(s=C.Le.getConfig(C.gI.InnerAutoPlay))||void 0===s?void 0:s.mode,is_supported_hevc1_hw:(0,oe._u)()?1:0,is_supported_264_hw:(0,oe.b4)()?1:0,video_play_method:null!==(f=C.Le.getConfig(C.gI.VideoPlayMethod))&&void 0!==f?f:"auto",is_small_window:(0,nf.QD)()?"1":"0",is_hw_client:(0,ry.N)(t),from_click_group_id:null!==(m=null==i?void 0:i.insertId)&&void 0!==m?m:"",url_source:null!==(p=null==i?void 0:null===(c=i.continationInfo)||void 0===c?void 0:c.urlSource)&&void 0!==p?p:["recommend","personal_homepage"].includes((0,eI.vM)())?V.Q.getItem({sKey:R.CookieKeys.UrlSourceForBrowserPlugin}):"",is_cache_video:F,is_first_video:!o,column_type:(null==I?void 0:I.column_type)||(null==I?void 0:null===(v=I.search_params)||void 0===v?void 0:v.column_type),if_first_big_card:M}),(0,rP.Wc)()),{is_selected_label:(null==i?void 0:i.weeklyRecommend)?1:0}));let B=C.Le.getConfig(C.gI.SearchVideoPlayMethod);B&&C.Le.setConfig(C.gI.VideoPlayMethod,B)},d=ro();return d.playfinish.used=!0,d.playfinish.data?(a(),d.playfinish.data=null):t.once(ev.Events.ENDED,a),()=>{t.off(ev.Events.ENDED,a)}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a,getSpecialParams:u,index:n}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o}=e;(0,f.useEffect)(()=>{if(!t||!l)return;let e=e=>{n9.Z.sendLog("clickPreviousVideo",rr({getLogInfo:o,clickFrom:e}))},n=e=>{n9.Z.sendLog("clickNextVideo",rr({getLogInfo:o,clickFrom:e}))},r=()=>{var e,o;if(!l||!i||i&&(null==i?void 0:i.cell_room))return!1;let n=tG.s.getPlayerScene(t.playerId),r=tG.s.getPlayersByScene(em.lT.Modal)||[],a=null===(e=C.Le.getConfig(C.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal,d=null===(o=ef().instManager)||void 0===o?void 0:o.getActiveId();return(n===em.lT.Modal||!(r.length>0))&&(!a||t.playerId===d)&&!0},a=eb.listen(eb.EVENT.reportPlayNext,e=>{let{clickFrom:t}=e;if(!!r())n(t)}),d=eb.listen(eb.EVENT.reportPlayPrev,t=>{let{clickFrom:i}=t;if(!!r())e(i)});return()=>{a(),d()}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o}=e;(0,f.useEffect)(()=>{if(!t||!l)return;let e=e=>{if((null==e?void 0:e.isInnerReset)===!0)return;let t=null==e?void 0:e.isOn;n9.Z.sendLog("clickAutoPlay",ra({getLogInfo:o,isAutoPlay:t,customParams:"object"==typeof(null==e?void 0:e.logParams)?null==e?void 0:e.logParams:{}}))};return t.on(tz.B.AutoPlaySwitchChange,e),()=>{t.off(tz.B.AutoPlaySwitchChange,e)}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o}=e;(0,f.useEffect)(()=>{if(!t||!l)return;let e=e=>{if((0,h.Jt)(i)){let t=(0,h.Rx)(i);(0,ia.E)("full_screen",{tag:(0,iu.f)(),value:t.creative_id,log_extra:t.log_extra,player_form:e})}},n=t=>{n9.Z.sendLog("enterFullScreen",ru({getLogInfo:o,clickFrom:t})),e("browser_full")},r=t=>{n9.Z.sendLog("exitFullScreen",(0,Q._)((0,E._)({},ru({getLogInfo:o,clickFrom:t})),{stack_trace:"click_button"!==t?Error().stack:""})),e("normal")},a=(e,t)=>{e?r(t):n(t)},d=e=>{if("switch_fullscreen"===e.action){let t=rd[e.eventType]||"keyboard";a(e.fullscreen||"system"===e.eventType,t)}},u=e=>{a(!e.fullscreen,"hot_key")};return t.on(ev.Events.USER_ACTION,d),t.on(tz.B.SwitchFullScreen,u),()=>{t.off(ev.Events.USER_ACTION,d),t.off(tz.B.SwitchFullScreen,u)}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o,getSpecialParams:n}=e,r=(0,f.useRef)(0),a=(0,f.useRef)(!0);a.current=(0,nS.U)(),(0,f.useEffect)(()=>{if(t&&l){var e,d,u,s,c;let l=0,v=0,f=rB(r.current,t),m=0,p=0,_=0,g=!1,y=!1,w=!1,{vtype:x}=t,I="init",b="init",T=(null===(e=C.Le.getConfig(C.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)||tG.s.getPlayerScene(null==t?void 0:t.playerId)===em.lT.Modal,k=null!==(c=null===(d=window)||void 0===d?void 0:d.ROUTE_PARAMS)&&void 0!==c?c:(0,S.parse)(null===(s=window)||void 0===s?void 0:null===(u=s.location)||void 0===u?void 0:u.search),L=(0,eA.zD)()||(null==k?void 0:k.tab_name)||(0,j.Rs)("tab_name")||"",A={startTime:0,acc:0},N=e=>{if(f=Date.now(),y=!1,T&&!(null==t?void 0:t.paused)&&(g=!1),!!(null==t?void 0:t.video))v=t.currentTime,x=t.vtype,I="string"==typeof e?e:"play"},P=()=>{T&&(g=!1),p=1},M=(e,r)=>{var a,d,u,s,c,g,y,w,S,T,k,N,P,M,D,F,O,B,U,H,W,z,G,Z,q,K,$,Y,X,J,ee,et;let{author_id:ei,group_id:el,playlet_id:eo,log_pb:en,isFromNextAutoPlay:er,vduration:ea,extraParams:ed,pic_cnt:eu,aweme_type:es,isMini:ec,trending_topic:ev,first_tag_name:ef,top:em,is_click_cover:ep,is_pure:e_,is_insert_wallpaper:eg,is_landscape:eh,bitRate:ey,latest_group_id:ew,if_first_big_card:ex}=o(),eC=n(),eb=Date.now()-f,eE=t.cumulateTime-m;if(C.Le.getConfig(C.gI.IsSearchOuterAsync)){C.Le.setConfig(C.gI.IsSearchOuterAsync,!1);return}if(!f||!t||!el||Date.now()-_<100||eb<100)return;let ek=0;((0,j.Rs)("modeFrom")===rM.MODE_FROM||(0,j.Rs)("modeFrom")===rM.MODE_FROM_SEARCH)&&(ek=1);let eA=(0,j.Rs)("if_from_widget"),eR=l>0?f-l:0;l=0;let{isH265:eN}=(0,rb.Z)({awemeInfo:i,player:t}),eP=(null==t?void 0:null===(a=t.curDefinition)||void 0===a?void 0:a.bitrate)||ey||0,eM=(null===(d=t.curDefinition)||void 0===d?void 0:d.realBitrate)||0,ej=(0,rf.e)(eb/1e3*eM),eD=(null==t?void 0:null===(c=t.plugins)||void 0===c?void 0:null===(s=c.autoplaysettingplugin)||void 0===s?void 0:null===(u=s.config)||void 0===u?void 0:u.nextAutoPlay)||(null==t?void 0:null===(w=t.plugins)||void 0===w?void 0:null===(y=w.searchautoplaysettingplugin)||void 0===y?void 0:null===(g=y.config)||void 0===g?void 0:g.nextAutoPlay),eF=String(void 0===eD?null!=er?er:0:eD),{memory:eV={},battery:eO}=(0,rD.J)()||{};A.startTime&&(A.acc+=Date.now()-A.startTime,A.startTime=0);let eB=(null===(S=window.EXPOSE_DATA)||void 0===S?void 0:S.landingPage)==="discover",eU=(null===(T=window.EXPOSE_DATA)||void 0===T?void 0:T.landingPage)==="follow",eH=eB&&(null===(k=window.EXPOSE_DATA)||void 0===k?void 0:k.landingMode)!==2&&(null===(N=window.EXPOSE_DATA)||void 0===N?void 0:N.landingMode)!==3,eW=null!==(X=null!==(Y=(0,j.Rs)("enter_method"))&&void 0!==Y?Y:eB||eU?"default_landing":void 0)&&void 0!==X?X:"other";n9.Z.sendLog("playTime",(0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)({is_click_cover:ep,is_insert_wallpaper:eg,is_visible:String(e?1:0),duration:eb,duration_moving:eE,duration_waiting:A.acc,report_reason:r,duration_error:eR,play_time:f,from_percent:1e3*v/ea,to_percent:(null==t?void 0:t.currentTime)*1e3/ea,percentage:(null==t?void 0:t.currentTime)*1e3/ea,is_auto_play:eF,urlParamList:["trending_topic","previous_page"],enter_method:eW,tab_name:L,author_id:ei,enter_from:(0,eI.mo)(),enter_from_merge:(0,rR.z)(""),group_id:el,playlet_id:eo,log_pb:en,video_detail_enter_from:(0,rR.z)("web_link"),speed:String(null==t?void 0:t.playbackRate),is_loop:String(p),is_full_screen:(0,eS.r)()?"1":"0",is_full_webscreen:tG.s.getIsPageFullscreen()?"1":"0",is_author_card_expand:(null===(P=C.Le.getConfig(C.gI.IsCollapseAuthorCard))||void 0===P?void 0:P.isCollapseAuthorCard)?0:1,from_follow_list:(null===(M=C.Le.getConfig(C.gI.FromFollowList))||void 0===M?void 0:M.tag)?"1":"0",from_push:V.Q.getItem({sKey:R.CookieKeys.FromClientPush})?1:0,is_mute:(null==t?void 0:t.muted)?"1":"0"},(0,eT.t)()),{mute_type:null===(D=C.Le.getConfig(C.gI.ForceMuted))||void 0===D?void 0:D.currentMuteType,from_academy:ek,pic_cnt:eu,aweme_type:es,trending_topic:ev,first_tag_name:ef,top:em,is_pure:e_,is_from_ad:(0,h.Jt)(i)?1:0,is_bytevc1:eN,browser_height:(0,eL.P6)(),browser_width:(0,eL.wi)(),browser_ratio:(0,eL.P6)()/(0,eL.wi)(),is_landscape:eh,stage:`${I}-${b}`}),(0,rC.Z)(),ed,eC.playTime||{}),{is_force:(null===(F=C.Le.getConfig(C.gI.ForceMuted))||void 0===F?void 0:F.currentMuteType)==="browser"?"1":"0",video_time:(0,rN.n)(null==i?void 0:null===(O=i.video)||void 0===O?void 0:O.duration),auto_play_mode:null===(B=C.Le.getConfig(C.gI.InnerAutoPlay))||void 0===B?void 0:B.mode,seo_vids:rF.t("seo_vids")||"",video_play_method:null!==(J=C.Le.getConfig(C.gI.VideoPlayMethod))&&void 0!==J?J:"auto",if_invisible:(0,nf.Vr)()?"1":"0",is_small_window:(0,nf.QD)()?"1":"0",is_top:(0,nf.k)()?"1":"0",url_source:null!==(ee=null==i?void 0:null===(U=i.continationInfo)||void 0===U?void 0:U.urlSource)&&void 0!==ee?ee:["recommend","personal_homepage"].includes((0,eI.vM)())?V.Q.getItem({sKey:R.CookieKeys.UrlSourceForBrowserPlugin}):"",play_order:(0,nO.G)(),play_size:ej,video_bitrate:eP,audio_bitrate:(null===(W=t.curDefinition)||void 0===W?void 0:null===(H=W.audioDefinition)||void 0===H?void 0:H.bitrate)||0,real_bitrate:eM,latest_group_id:ew,vduration:ea,vtype:x}),(null==t?void 0:null===(Z=t.plugins)||void 0===Z?void 0:null===(G=Z.srplugin)||void 0===G?void 0:null===(z=G.getStat)||void 0===z?void 0:z.call(G))||{}),{video_quality:null==t?void 0:null===(q=t.curDefinition)||void 0===q?void 0:q.qualityType,gear_name:null==t?void 0:null===(K=t.curDefinition)||void 0===K?void 0:K.gearName,if_continued_play:C.Le.getConfig(C.gI.PlayRecord)?or(i.awemeId)?1:0:"",rate:C.Le.getConfig(C.gI.PlayRecord)?(null==t?void 0:t.currentTime)/(null==t?void 0:t.duration):""}),(0,rh.m)({player:t}),(0,rh.B)({player:t}),(0,rj.K)(i)),{if_from_widget:eA?1:0,from_click_group_id:null!==(et=null==i?void 0:i.insertId)&&void 0!==et?et:"",column_type:(null==ed?void 0:ed.column_type)||(null==ed?void 0:null===($=ed.search_params)||void 0===$?void 0:$.column_type),memory_js_heap_size_limit:eV.jsHeapSizeLimit,memory_used_js_heap_size:eV.usedJSHeapSize,memory_total_js_heap_size:eV.totalJSHeapSize,memory_free_js_heap_size:eV.freeJSHeapSize,memory_free_level:eV.freeLevel,memory_use_level:eV.usedLevel,battery_charging:null==eO?void 0:eO.charging,battery_level:null==eO?void 0:eO.level,if_first_big_card:ex}),(0,rP.Wc)()),{is_recommend:"default_landing"===eW?Number(eH):void 0,is_selected_label:(null==i?void 0:i.weeklyRecommend)?1:0}),!1),f=Date.now(),_=Date.now(),m=t.cumulateTime,x=t.vtype,I="reported",(0,rO.y)(t,p,i),A.acc=0},D=tu()(()=>{if(!w&&(null==t?!void 0:!t.paused))b="seeking",M("visible"===document.visibilityState,"seeking")},500,{leading:!0,trailing:!1}),F=tu()(()=>{N("seeked"),w=!1},500,{leading:!1,trailing:!0}),O=e=>{b=e,M("visible"===document.visibilityState,e),N(e)},B=()=>{if(T&&(g=!0),!a.current&&!(0,eE.Nr)(location.pathname)){y=!0;return}O("pause"),y=!0},U=()=>{T&&!g&&O("destroy")},H=e=>{t.video&&!(null==t?void 0:t.paused)&&(b="changetab",M(e,"page_visibility_change"),N("changetab"))},W=()=>{if(!y&&!t.isSeeking)O("degrade")},z=()=>{if(!t.paused)O("changeurl"),w=!0},G=()=>{l=Date.now()},Z=()=>{if(!t.isSeeking&&!t.paused)A.startTime=Date.now()},q=()=>{A.startTime&&(A.acc+=Date.now()-A.startTime,A.startTime=0)};return t.on("error",G),t.on("seeked",F),t.on("play",N),t.on("replay",P),t.on("seeking",D),t.on("pause",B),t.on("degrade",W),t.on("urlchange",z),(0,rV.vP)(H),t.once("destroy",U),t.on(ev.Events.WAITING,Z),t.on(ev.Events.PLAYING,q),t.on(ev.Events.TIME_UPDATE,q),()=>{t.off("error",G),t.off("seeked",F),t.off("seeking",D),t.off("play",N),t.off("replay",P),t.off("pause",B),t.off("destroy",U),t.off("degrade",W),t.off("urlchange",z),t.off(ev.Events.WAITING,Z),t.off(ev.Events.PLAYING,q),t.off(ev.Events.TIME_UPDATE,q),!y&&O("unmount"),(0,rV.xC)(H),r.current=0}}},[i,t,l]),(0,f.useEffect)(()=>{if(t){let e=()=>{t.errored=0,!r.current&&(r.current=Date.now())};return t.on(ev.Events.PLAY,e),()=>{t.off(ev.Events.PLAY,e)}}},[t])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a,getSpecialParams:u}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o}=e;(0,f.useEffect)(()=>{if(!t||!l)return;let e=e=>{let{author_id:t,group_id:i,log_pb:l,extraParams:n}=o();n9.Z.sendLog("clickVideoSpeed",(0,E._)({urlParamList:["previous_page"],author_id:t,group_id:i,log_pb:l,enter_from:(0,ie.yW)(),speed:Number(e).toFixed(2),is_small_window:(0,nf.QD)()?"1":"0",player_display_mode:(0,eI.Ok)()},n))};return t.on(tz.B.PlayRatioChange,e),()=>{t.off(tz.B.PlayRatioChange,e)}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o}=e;(0,f.useEffect)(()=>{if(!t||!l)return;let e=e=>{if((null==e?void 0:e.action)==="switch_play_pause"){var t;let l="pauseVideo";l=e.paused?"startVideo":"pauseVideo";let n=null!==(t=e.pluginName)&&void 0!==t?t:"click",{extraParams:r,isMini:a}=o();n9.Z.sendLog(l,(0,Q._)((0,E._)({enter_from:(0,ie.yW)(),click_method:n},r),{is_small_window:(0,nf.QD)()?"1":"0",player_display_mode:(0,eI.Ok)(),group_id:i.awemeId||""}))}};return t.on(ev.Events.USER_ACTION,e),()=>{t.off(ev.Events.USER_ACTION,e)}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o}=e;(0,f.useEffect)(()=>{if(!t||!l)return;let e=e=>{if((null==e?void 0:e.action)==="change_muted"||(null==e?void 0:e.action)==="change_volume"){let l=!1,{extraParams:n}=o();(null==e?void 0:e.action)==="change_muted"?(n9.Z.sendLog("clickVolume",(0,E._)({enter_from:(0,ie.yW)(),status:e.muted?"1":"0",player_display_mode:(0,eI.Ok)(),group_id:null==i?void 0:i.id},n)),(null==e?void 0:e.muted)&&(l=!0)):e.volume>0&&(l=!0),l&&(null==t||t.emit("openVolume"))}};return t.on(ev.Events.USER_ACTION,e),()=>{t.off(ev.Events.USER_ACTION,e)}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e;(0,f.useRef)({isDrag:!1}),(0,f.useEffect)(()=>{if(!t||!l)return;let e=e=>{var l,o,n,r;return{position:(null==t?void 0:t.currentTime)||0,enter_from:(0,eI.mo)(),enter_from_merge:(0,eI.vM)(),tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",rate:e.percent,action:e.currentTime>e.prePlayTime?"forward":"rewind",is_small_window:(0,nf.QD)()?"1":"0",is_chapter_bar:(null==i?void 0:null===(l=i.chapterInfo)||void 0===l?void 0:l.status)?1:0,chapter_index:(0,rs.P)({awemeInfo:i,currentTime:e.currentTime}),group_id:null==i?void 0:i.awemeId,author_id:null==i?void 0:null===(o=i.authorInfo)||void 0===o?void 0:o.uid,vduration:null==i?void 0:null===(n=i.video)||void 0===n?void 0:n.duration,if_continued_play:C.Le.getConfig(C.gI.PlayRecord)?or(i.awemeId)?1:0:"",before_rate:1e3*e.prePlayTime/(null==i?void 0:null===(r=i.video)||void 0===r?void 0:r.duration),before_position:e.prePlayTime,player_display_mode:(0,eI.Ok)()}},o=t=>{(null==t?void 0:t.action)==="click"&&n9.Z.sendLog("progressClick",(0,Q._)((0,E._)({},e(t)),{click_method:"click"}))};t.on(ev.Events.USER_ACTION,o);let n=t.getPlugin("progress"),r=t=>{n9.Z.sendLog("progressClick",(0,Q._)((0,E._)({},e(t)),{click_method:"drag"}))};return n.addCallBack("dragend",r),()=>{t.off(ev.Events.USER_ACTION,o),n.removeCallBack("dragend",r)}},[t,i,l])}({player:i,awemeInfo:t,isActive:l}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o}=e;(0,f.useEffect)(()=>{if(!t||!l)return;let e=e=>{let{getEnterFromDynamic:t,extraParams:l}=o();if(e.isInnerReset)return;let n=(null==t?void 0:t())||(0,eI.mo)(),r=(0,Q._)((0,E._)({enter_from:n},l,e.logParams||{}),{group_id:null==i?void 0:i.awemeId,is_full_screen:(0,eS.r)()?"1":"0",is_full_webscreen:tG.s.getIsPageFullscreen()?"1":"0",player_display_mode:(0,eI.Ok)()});e.isOn&&n9.Z.sendLog("openPureMode",r),e.isOn||n9.Z.sendLog("closePureMode",r)};return t.on(tz.B.ImmersiveSwitchChange,e),()=>{t.off(tz.B.ImmersiveSwitchChange,e)}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o,getH265DegradeReportFlag:n,getSupportHwClientFlag:r}=e,a=(0,f.useRef)([]),d=(0,f.useRef)(0),u=(0,f.useRef)(""),s=(0,f.useRef)([]),c=nh();(0,f.useEffect)(()=>{var e;let v;(u.current!==(null==i?void 0:i.awemeId)||!l||!i)&&(u.current=null==i?void 0:i.awemeId,a.current=[],d.current=0);let f=t,m=()=>{let e=a.current.length;if(e){let t=a.current[e-1];n9.Z.sendLog("videoPlayFailed",t),l3.oe.event.info({name:l3.Mo.VideoPlayFailed,report:t})}a.current=[],s.current.forEach(e=>{n9.Z.sendLog("linkPlayFailed",e)}),s.current=[]},p=()=>{l&&m()},_=e=>{var t,u,s,c,v,m,_,g,y,w;let{group_id:x,vduration:I,extraParams:b,action_type:S,aweme_type:T,awemeRequestTime:k,qualityType:L,log_pb:A,bitrate_set_client:N}=o(),{isH265:P,codecFormat:M,videoFormat:j}=(0,rb.Z)({awemeInfo:i,player:f}),D=(0,E._)((0,Q._)((0,E._)({urlParamList:["previous_page","tab_name"]},(0,rx.Z)(f),(0,rC.Z)()),{group_id:x,errorCode:(null==e?void 0:null===(t=e.mediaError)||void 0===t?void 0:t.code)||(null==e?void 0:e.errorCode)||"",errorDesc:(null==e?void 0:null===(u=e.mediaError)||void 0===u?void 0:u.message)||(null==e?void 0:e.errorMessage)||"",vduration:I,video_quality:(0,rI.S)({player:f,qualityType:L}),player_version:f.version,current_position:1e3*f.currentTime,is_video_support:Number((0,rU.k)().isSupport),host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null==f?void 0:f.vtype),action_type:S,bitrate_set_client:N,is_ad:(0,h.Jt)(i)?1:0,is_compilation:(null==i?void 0:null===(s=i.mixInfo)||void 0===s?void 0:s.mixId)?1:0,is_full_screen:(0,eS.r)(),is_show_comment:C.Le.getConfig(C.gI.IsCommetTab)?1:0,is_active:1,is_cdn_expired:1===(0,rH.q)(f.currentSrc)?1:0,is_bytevc1:P,aweme_type:T,log_pb:A,codec_format:M,video_format:j,play_order:(0,nO.G)(),is_supported_265:nG()?1:0,is_265_degrade:n(),has_report:d.current++,is_265_degrade_client:nJ({player:f}),is_support_hw:r(),is_hw:(null==f?void 0:null===(c=f.config)||void 0===c?void 0:c.mediaType)==="video"?1:0,if_invisible:(0,nf.Vr)()?"1":"0",is_small_window:(0,nf.QD)()?"1":"0",feature_id:null==f?void 0:null===(v=f.curDefinition)||void 0===v?void 0:v.featureId,clarity_now:null==f?void 0:null===(m=f.getClarity)||void 0===m?void 0:m.call(f,!1)}),(0,rh.m)({player:f}),(0,rh.B)({player:f}),b);if((null==e?void 0:null===(_=e.mediaError)||void 0===_?void 0:_.code)===6&&(D.aweme_info=null==f?void 0:null===(y=f.config)||void 0===y?void 0:y.url),l){if(null==f?void 0:f.errored)return;f.errored=1,n9.Z.sendLog("videoPlayFailed",D),l3.oe.event.info({name:l3.Mo.VideoPlayFailed,report:D})}else a.current.push(D),p();if((0,eL.G6)()&&(null==e?void 0:null===(g=e.mediaError)||void 0===g?void 0:g.code)===3&&1===P){let e=null!==(w=(0,lJ.G)(R.SessionStorageKeys.DecodeError))&&void 0!==w?w:0;(0,lJ.t_)(R.SessionStorageKeys.DecodeError,e+1)}},g=e=>{var t,n,r,a,d,u,c,v,m,_,g;let{group_id:h,aweme_type:y}=o(),{isH265:w,codecFormat:x,videoFormat:C}=(0,rb.Z)({awemeInfo:i,player:f}),I=rW(e.src,f.config.url).isPcdnSource,b={group_id:h,aweme_type:y,host:null==e?void 0:e.host,enter_from:(0,ie.yW)(),is_pcdn:Number(I),user_unique_id:null===(t=(0,F.Es)())||void 0===t?void 0:t.user_unique_id,src:null==e?void 0:e.src,errorDesc:null!==(m=null==e?void 0:null===(n=e.mediaError)||void 0===n?void 0:n.message)&&void 0!==m?m:null==e?void 0:e.message,errorCode:null!==(_=null==e?void 0:null===(r=e.mediaError)||void 0===r?void 0:r.code)&&void 0!==_?_:null==e?void 0:e.errorCode,vtype:null!==(g=null==e?void 0:e.vtype)&&void 0!==g?g:null==f?void 0:f.vtype,range:null==e?void 0:e.range,content_length:null==e?void 0:null===(a=e.headers)||void 0===a?void 0:a["content-length"],content_range:null==e?void 0:null===(d=e.headers)||void 0===d?void 0:d["content-range"],content_type:null==e?void 0:null===(u=e.headers)||void 0===u?void 0:u["content-type"],server_ip:null==e?void 0:null===(c=e.headers)||void 0===c?void 0:c.server_ip,x_response_cinfo:null==e?void 0:null===(v=e.headers)||void 0===v?void 0:v["x-response-cinfo"],is_bytevc1:w,codec_format:x,video_format:C,current_position:null==f?void 0:f.currentTime};l?n9.Z.sendLog("linkPlayFailed",b):(s.current.push(b),p())};i&&(p(),f&&(f.on(ev.Events.ERROR,_),f.on(ev.Events.SOURCE_ERROR,g)));let y=e=>{(f=e).on(ev.Events.ERROR,_),f.on(ev.Events.SOURCE_ERROR,g),v=()=>{f.off(ev.Events.ERROR,_),f.off(ev.Events.SOURCE_ERROR,g)}};return null==c||null===(e=c.on)||void 0===e||e.call(c,oi.PlayerCreated,y),()=>{var e;null==v||v(),null==f||f.off(ev.Events.ERROR,_),null==f||f.off(ev.Events.SOURCE_ERROR,g),null==c||null===(e=c.off)||void 0===e||e.call(c,oi.PlayerCreated,y)}},[i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a,getH265DegradeReportFlag:d,getSupportHwClientFlag:c}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o,getReportNetworkSpeed:n,getH265DegradeReportFlag:r,getIsChangingVideoSrc:a,getSupportHwClientFlag:d}=e;(0,f.useEffect)(()=>{var e;if(!t||!i||!l)return;let u=0,s=0,c=0,v=!0,f={},m=(null===(e=C.Le.getConfig(C.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1,p=e=>{var p,_,g,y,w,x,I,b,S,T,k,L,A,R,N,P;let{group_id:M,vduration:j,bitRate:D,qualityType:F,extraParams:V,action_type:O,aweme_type:B,video_play_mode:U,is_landscape:H,bitrate_set_client:W}=o(),{codecFormat:z,isH265:G,videoFormat:Z}=(0,rb.Z)({awemeInfo:i,player:t}),{bitrate:q}=(null==t?void 0:t.curDefinition)||{},K=(0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)({urlParamList:["previous_page","tab_name"],group_id:M,duration:e.costTime,duration_origin:e.fixedCostTime,interval:e.interval,diff_start:e.diffStart,diff_end:e.diffEnd,vduration:j,player_version:t.version,video_quality:(0,rI.S)({player:t,qualityType:F})},(0,rh.m)({player:t}),(0,rh.B)({player:t})),{video_format:Z,video_fps:null==t?void 0:null===(p=t.curDefinition)||void 0===p?void 0:p.fps,video_bitrate:q||D,audio_bitrate:(null===(g=t.curDefinition)||void 0===g?void 0:null===(_=g.audioDefinition)||void 0===_?void 0:_.bitrate)||0,real_bitrate:(null===(y=t.curDefinition)||void 0===y?void 0:y.realBitrate)||0,feature_id:null===(w=t.curDefinition)||void 0===w?void 0:w.featureId,codec_format:z,internet_speed:n(t),current_position:1e3*t.currentTime,percentage_position:1e3*t.currentTime/j*100,video_play_speed:t.playbackRate,is_ad:(0,h.Jt)(i)?1:0,is_compilation:(null==i?void 0:null===(x=i.mixInfo)||void 0===x?void 0:x.mixId)?1:0,is_full_screen:(0,eS.r)(),is_show_comment:C.Le.getConfig(C.gI.IsCommetTab)?1:0,buffer_time:(0,rp._)(t),bitrate_set_client:W,is_visible:Number(!document.hidden),is_visible_when_block_start:Number(v),block_type:null==e?void 0:e.type,end_type:null==e?void 0:e.endType,host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null==t?void 0:t.vtype),action_type:O,aweme_type:B,drop_frame:null===(I=t.videoFrameInfo)||void 0===I?void 0:I.dropped,total_play_frame:null===(b=t.videoFrameInfo)||void 0===b?void 0:b.total,drop_frame_rate:null===(S=t.videoFrameInfo)||void 0===S?void 0:S.droppedRate,drop_frame_duration:null===(T=t.videoFrameInfo)||void 0===T?void 0:T.droppedDuration,is_bytevc1:G,video_play_mode:U,is_landscape:H,play_order:(0,nO.G)(),is_supported_265:nG()?1:0,is_265_degrade:r(),is_support_hw:d(),is_hw:(null==t?void 0:null===(k=t.config)||void 0===k?void 0:k.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,oe._u)()?1:0,is_supported_264_hw:(0,oe.b4)()?1:0,is_hw_client:(0,ry.N)(t),if_invisible:(0,nf.Vr)()?"1":"0",is_small_window:(0,nf.QD)()?"1":"0"}),(0,rx.Z)(t),(0,rC.Z)(),V),{preload_type:(0,rE.me)(t)?2:1,hit_preload:(0,rE.qJ)(t)}),(null==t?void 0:null===(R=t.plugins)||void 0===R?void 0:null===(A=R.srplugin)||void 0===A?void 0:null===(L=A.getStat)||void 0===L?void 0:L.call(A))||{}),{battery_charging_when_block_start:null==f?void 0:f.charging,battery_level_when_block_start:null==f?void 0:f.level}),(null==t?void 0:t.novv)||{}),{firstframed:t.firstfame?1:0,is_in_modal:m,clarity_now:null==t?void 0:null===(N=t.getClarity)||void 0===N?void 0:N.call(t,!1),is_switch:null==t?void 0:null===(P=t.getIsInSwitching)||void 0===P?void 0:P.call(t)});if("waitingEnd"===e.eventType&&1===e.type){if(!1===l)K.duration=0,K.duration_origin=0;else{let{slideStartTime:t}=C.Le.getConfig(C.gI.SlideStartTime)||{},i=a()||!t?null==e?void 0:e.costTime:Date.now()-t>(null==e?void 0:e.costTime)?null==e?void 0:e.costTime:Date.now()-t,l=a()||!t||Date.now()-t>(null==e?void 0:e.fixedCostTime)?null==e?void 0:e.fixedCostTime:Date.now()-t;K.duration=i,K.duration_origin=l}n9.Z.sendLog("videoBlock",K),l3.oe.event.warn({name:l3.Mo.VideoPlayBlock,report:rG()(K,["player_version","video_quality","block_type","end_type","host","vtype","duration"])})}if("waitingStart"===e.eventType){u=Date.now(),s+=1,t.config.blockCount=s,v="visible"===document.visibilityState;let{battery:e}=(0,rD.J)()||{};f=e}if("waitingEnd"===e.eventType){if(c+=1,0===u||(null==e?void 0:e.type)===1)return;n9.Z.sendLog("videoBlock",K),l3.oe.event.warn({name:l3.Mo.VideoPlayBlock,report:rG()(K,["player_version","video_quality","block_type","end_type","host","vtype","duration"])}),u=0}},_=()=>{var e,i,l,n,r,a,d;if(null===(e=C.Le.getConfig(C.gI.AbtestData))||void 0===e?void 0:e.longtask)return;let{extraParams:u}=null!==(d=o())&&void 0!==d?d:{};n9.Z.sendLog("videoBlockCount",(0,E._)({block_count:s,differ_count:s-c,player_version:t.version,drop_frame:null===(i=t.videoFrameInfo)||void 0===i?void 0:i.dropped,total_play_frame:null===(l=t.videoFrameInfo)||void 0===l?void 0:l.total,drop_frame_rate:null===(n=t.videoFrameInfo)||void 0===n?void 0:n.droppedRate,drop_frame_duration:null===(r=t.videoFrameInfo)||void 0===r?void 0:r.droppedDuration,is_bytevc1:null==t?void 0:null===(a=t.curDefinition)||void 0===a?void 0:a.isH265,play_order:(0,nO.G)(),is_in_modal:m},(0,rx.Z)(t),u))};return t.on(ev.Events.XGLOG,p),window.addEventListener("beforeunload",_),()=>{_(),t.off(ev.Events.XGLOG,p),window.removeEventListener("beforeunload",_)}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a,getReportNetworkSpeed:s,getH265DegradeReportFlag:d,getIsChangingVideoSrc:r,getSupportHwClientFlag:c}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o,getReportNetworkSpeed:n,getH265DegradeReportFlag:r,getIsChangingVideoSrc:a,getSupportHwClientFlag:d}=e,u=nh(),s=(0,f.useRef)(!1),c=(0,f.useRef)(""),v=()=>{var e,t,l;let o=C.Le.getConfig(C.gI.LynxInfo);return(!!C.Le.getConfig(C.gI.hasReportVideoRequest)||(null==o?void 0:o.swiperIndex)===void 0||!((null==o?void 0:null===(e=o.awemeList)||void 0===e?void 0:e.length)>0)||!((null===(t=o.progressBarInfo)||void 0===t?void 0:t.timeCurrent)>0)||(null===(l=o.awemeList[null==o?void 0:o.swiperIndex])||void 0===l?void 0:l.aweme_id)!==i.awemeId)&&!0};(0,f.useEffect)(()=>{if(!l&&(s.current=!1),l){var e,i,o,n,r,a;c.current="";let l=null==t?void 0:null===(o=t.plugins)||void 0===o?void 0:null===(i=o.mp4encryptplayer)||void 0===i?void 0:null===(e=i.states)||void 0===e?void 0:e.length;l>0&&(c.current=(null==t?void 0:null===(a=t.plugins)||void 0===a?void 0:null===(r=a.mp4encryptplayer)||void 0===r?void 0:null===(n=r.states[l-1])||void 0===n?void 0:n.state)||"")}},[l]),(0,f.useEffect)(()=>{s.current=!1;let e=t,l=t=>{if("firstFrame"===t.eventType&&!s.current){var l,u,f,m,p,_,g,y,w,x,I,b,S,T,k,L,A,N,P,M,j,D,F,V,O,U,H,W,z,G,Z,q,K,$,Y,X,J,ee,et,ei,el,eo,en,er,ea,ed;s.current=!0;let{group_id:eu,vduration:es,bitRate:ec,qualityType:ef,extraParams:em,bitrate_set:ep,bitrate_set_client:e_,quality_bitrate:eg,action_type:eh,aweme_type:ey,video_play_mode:ew,is_landscape:ex}=o(),{codecFormat:eC,isH265:eE,videoFormat:eT}=(0,rb.Z)({awemeInfo:i,player:e});e.firstfame=1;let{preloadTime:ek,preloadSize:eL,startBuffer:eA,audioDuration:eR,minDuration:eN}=(0,rg.P)(e),{bitrate:eP}=(null==e?void 0:e.curDefinition)||{},{slideStartTime:eM}=C.Le.getConfig(C.gI.SlideStartTime)||{},ej=null==i?void 0:null===(u=i.video)||void 0===u?void 0:null===(l=u.bitRateList)||void 0===l?void 0:l.find(t=>{var i;return t.qualityType===(null==e?void 0:null===(i=e.curDefinition)||void 0===i?void 0:i.qualityType)}),{currentLowDecodeCount:eD=0,decoderMode:eF=0,lowdecodeVV:eV=0,vv:eO=0}=(null===(m=e.video)||void 0===m?void 0:null===(f=m.getStats)||void 0===f?void 0:f.call(m))||{},eB=a(),eU=Date.now(),eH=eB||!eM?null==t?void 0:t.costTime:eU-eM,eW=C.Le.getConfig(C.gI.StartPlayTime),ez=!eB&&eM&&eW?eW-eM:-1,eG=null==e?void 0:e.video,eZ={},eq=-1;!(null===(p=C.Le.getConfig(C.gI.AbtestData))||void 0===p?void 0:p.longtask)&&(eq=Number(!!(null==eG?void 0:eG.parentNode)),eZ=null==eG?void 0:eG.getBoundingClientRect());let eK=0,e$=C.Le.getConfig(C.gI.GeneralSearchVideoSlideIntoVisionTime);"general_search"===(0,ie.yW)()&&0!==e$&&(eK=Date.now()-e$);let eY=C.Le.getConfig(C.gI.MenuClick)||0,eQ=0;eY&&(C.Le.setConfig(C.gI.MenuClick,0),eQ=eU-eY);try{let i=(null==t?void 0:t.vtype)||(null==e?void 0:e.vtype),l=C.Le.getConfig(C.gI.recentVtypes)||[];l.push(i),C.Le.setConfig(C.gI.recentVtypes,l.slice(0,5))}catch(e){}let eX=(0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)({},rL(!0)),{urlParamList:["previous_page","tab_name"]}),(0,rx.Z)(e),(0,rC.Z)()),{group_id:eu,bitrate_set:ep,bitrate_set_client:e_,menu_total_duration:eQ,player_first_frame:null==t?void 0:t.costTime,buffer:null==t?void 0:t.buffer,duration:eH,vduration:es,video_width:null==eG?void 0:eG.videoWidth,video_height:null==eG?void 0:eG.videoHeight,video_ratio:(null==eG?void 0:eG.videoWidth)/(null==eG?void 0:eG.videoHeight),video_rect_width:null==eZ?void 0:eZ.width,video_rect_height:null==eZ?void 0:eZ.height,is_over_gear:(0,rq.E)(e),is_over_rect:(null==e?void 0:null===(_=e.config)||void 0===_?void 0:_.isOverRect)?1:0,device_ratio:null!==(J=window.devicePixelRatio)&&void 0!==J?J:-1,has_pkt_offset:(null==e?void 0:null===(w=e.curDefinition)||void 0===w?void 0:null===(y=w.pktOffsetMap)||void 0===y?void 0:null===(g=y.find)||void 0===g?void 0:g.call(y,e=>(null==e?void 0:e.time)===5))?1:0,has_first_segment_range:(null==e?void 0:null===(x=e.curDefinition)||void 0===x?void 0:x.first_segment_range)?1:0,feature_id:null==e?void 0:null===(I=e.curDefinition)||void 0===I?void 0:I.featureId,player_version:e.version,video_quality:(0,rI.S)({player:e,qualityType:ef}),video_size:null==e?void 0:null===(b=e.curDefinition)||void 0===b?void 0:b.size,video_fps:null==e?void 0:null===(S=e.curDefinition)||void 0===S?void 0:S.fps,definition:null===(T=e.curDefinition)||void 0===T?void 0:T.definition,video_format:eT,video_bitrate:eP||ec,audio_bitrate:(null===(L=e.curDefinition)||void 0===L?void 0:null===(k=L.audioDefinition)||void 0===k?void 0:k.bitrate)||0,real_bitrate:(null===(A=e.curDefinition)||void 0===A?void 0:A.realBitrate)||0,codec_format:eC,internet_speed:n(e),if_invisible:(0,nf.Vr)()?"1":"0",is_small_window:(0,nf.QD)()?"1":"0",preload_time:(0,rf.N)(ek),preload_time_audio:eR,preload_time_min:eN,preload_size:eL||0,preload_type:(0,rE.me)(e)?2:1,hit_preload:(0,rE.qJ)(e),start_buffer:eA,is_mute:(null==e?void 0:e.muted)?"1":"0",player_volume:null==e?void 0:e.volume,video_mute:(null==e?void 0:null===(N=e.video)||void 0===N?void 0:N.muted)?"1":"0",video_volume:null==e?void 0:null===(P=e.video)||void 0===P?void 0:P.volume,local_mute:(0,B.$o)(R.LocalStorageKeys.PLAYER_IS_MUTE),local_volume:(0,B.$o)(R.LocalStorageKeys.PLAYER_VOLUME),equalize_state:null!==(ee=null==e?void 0:e.equalizeVolumeState)&&void 0!==ee?ee:0,lufs:null!==(et=null==e?void 0:e.lufs)&&void 0!==et?et:rY.G7,use_new_mammon_worklet_processor:null!==(ei=null==e?void 0:e.useMammonWorkletProcessorV3)&&void 0!==ei&&ei,use_new_mammon_worklet_processor_with_wasm:null!==(el=null==e?void 0:e.useMammonWorkletProcessorV3Wasm)&&void 0!==el&&el,hit_new_mammon_worklet_processor:null!==(eo=null==e?void 0:e.hitMammonWorkletProcessorV3)&&void 0!==eo&&eo,volume_balance_longtest_consume_time:null!==(en=null==e?void 0:null===(M=e.effectNodeConsumeTime)||void 0===M?void 0:M.longest)&&void 0!==en?en:-2,volume_balance_shortest_consume_time:null!==(er=null==e?void 0:null===(j=e.effectNodeConsumeTime)||void 0===j?void 0:j.shortest)&&void 0!==er?er:-2,is_in_modal:(null===(D=C.Le.getConfig(C.gI.IsInModalVideo))||void 0===D?void 0:D.isInModal)||!1,host:null==t?void 0:t.host,vtype:(null==t?void 0:t.vtype)||(null==e?void 0:e.vtype),is_video_support:Number((0,rU.k)().isSupport),quality_bitrate:eg,action_type:eh,is_ad:(0,h.Jt)(i)?1:0,is_compilation:(null==i?void 0:null===(F=i.mixInfo)||void 0===F?void 0:F.mixId)?1:0,web_rid:null==i?void 0:null===(U=i.authorInfo)||void 0===U?void 0:null===(O=U.roomData)||void 0===O?void 0:null===(V=O.owner)||void 0===V?void 0:V.web_rid,is_full_screen:(0,eS.r)(),is_show_comment:C.Le.getConfig(C.gI.IsCommetTab)?1:0,aweme_type:ey,is_bytevc1:eE,is_hevc_error_down:null!==(ea=null==e?void 0:e.isHevcErrorDown)&&void 0!==ea?ea:0,video_play_mode:ew,is_landscape:ex,current_low_decode_count:eD,decoder_mode:eF,h265_failure_rate:10===eO?eV/eO:-1,play_order:(0,nO.G)(),first_video_after_cold_start:(0,rZ.R)(0)&&1===(0,nO.G)(),is_supported_265:nG()?1:0,is_265_degrade:r(),is_265_degrade_client:nJ({player:e}),is_265_degrade_web:nX({player:e}),is_support_hw:d(),is_hw:(null==e?void 0:null===(H=e.config)||void 0===H?void 0:H.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,oe._u)()?1:0,is_supported_264_hw:(0,oe.b4)()?1:0,is_hw_client:(0,ry.N)(e),is_support_hdr:ev.Sniffer.isHdrSupported(),active_stage:c.current,slide_start_to_play:ez,play_to_first_frame:eW?eU-eW:-1,click_to_modal_first_frame:rQ(),gear_name:null==e?void 0:null===(W=e.curDefinition)||void 0===W?void 0:W.gearName,media_type:null==e?void 0:null===(z=e.config)||void 0===z?void 0:z.mediaType,is_video_in_dom:eq,is_multiple:(null==e?void 0:e.isMultiple)?1:0,buffered_before_active:Math.floor(null==e?void 0:e.bufferedBeforeActive),loadstart_before_active:null==e?void 0:e.loadstartBeforeActive,loadeddata_before_active:null==e?void 0:e.loadeddataBeforeActive,load_range_type:null==e?void 0:null===(q=e.plugins)||void 0===q?void 0:null===(Z=q.mp4encryptplayer)||void 0===Z?void 0:null===(G=Z.config)||void 0===G?void 0:G.loadRangeType,load_range_type_preloader:null===(Y=window)||void 0===Y?void 0:null===($=Y.playerPreloader)||void 0===$?void 0:null===(K=$._config)||void 0===K?void 0:K.loadRangeType}),(0,rn.$)({player:e,awemeInfo:i}),(0,rK.D)({isChangeVideoSrc:eB,player:e,data:t,slideStartTime:eM}),(0,rh.m)({player:e}),(0,rh.B)({player:e}),em),{general_search_duration:eK}),(null==e?void 0:e.novv)||{},(null==e?void 0:null===(X=e.stat)||void 0===X?void 0:X.stage)||{},(null==ej?void 0:ej.mvmaf)||{},rX(null==ej?void 0:ej.ufq)),{preplay_stat:(null==e?void 0:e.preplayStat)?1:0,prepause_stat:(null==e?void 0:e.prepauseStat)?1:0,end_type:null==t?void 0:t.endType});v()&&n9.Z.sendLog("videoPlayQuality",(0,Q._)((0,E._)({},eX),{listen_device:(0,eI.nj)(),start_play_clarity_type:null==e?void 0:null===(ed=e.getClarity)||void 0===ed?void 0:ed.call(e,!0)})),r$(eX),eb.emit(eb.EVENT.firstFrame)}};if(!e){let t;let o=o=>{if(i){if((e=o).dyLogStat&&e.dyLogStat.firstFrame){var n;(null===(n=e.dyLogStat.firstFrame.awemeInfo)||void 0===n?void 0:n.awemeId)===i.awemeId&&(e.dyLogStat.firstFrame.data&&e.isReusePlayer&&(e.dyLogStat.firstFrame.data.costTime=0),l(e.dyLogStat.firstFrame.data)),e.dyLogStat.firstFrame=null}let r=ro();r.firstFrame.used=!0,r.firstFrame.data&&(l(r.firstFrame.data),r.firstFrame.data=null),e.on(ev.Events.XGLOG,l),t=()=>{e.off(ev.Events.XGLOG,l)}}};return u.on(oi.PlayerCreated,o),()=>{null==t||t(),u.off(oi.PlayerCreated,o)}}return e.on(ev.Events.XGLOG,l),()=>{e.off(ev.Events.XGLOG,l)}},[i])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a,getReportNetworkSpeed:s,getH265DegradeReportFlag:d,getIsChangingVideoSrc:r,getSupportHwClientFlag:c}),!function(e){let{player:t,awemeInfo:i,isActive:l,index:o}=e,n=(0,f.useRef)(!1);(0,f.useEffect)(()=>{var e,r;let a;if(!t||!i||!l)return;let d=()=>{eb.emit(eb.EVENT.pageFirstFrameLoadStart)},u=()=>{if(C.Le.setConfig(C.gI.isVideoPlayed,!0),eb.emit(eb.EVENT.pageFirstFrameLoaded),n.current=!0,(0,O.B)())return;let e=a||Date.now();try{if(C.Le.getConfig(C.gI.MarkFirstEnter)){var t,l,r,d,u,s,c,v,f,m,p,_,g,h,y,w,x,I,b,E;C.Le.setConfig(C.gI.MarkFirstEnter,null);let n=(null==i?void 0:null===(r=i.video)||void 0===r?void 0:null===(l=r.playApi)||void 0===l?void 0:null===(t=l.startsWith)||void 0===t?void 0:t.call(l,"blob"))?1:0;(0,U.DT)()?(0,rc.sE)(i,o):(null===(u=performance)||void 0===u?void 0:null===(d=u.timing)||void 0===d?void 0:d.fetchStart)&&n9.Z.sendLog("prfFirstFeedShow",{feed_total_duration:e-(null===(c=performance)||void 0===c?void 0:null===(s=c.timing)||void 0===s?void 0:s.fetchStart),is_landscape:(null==i?void 0:null===(v=i.video)||void 0===v?void 0:v.width)>(null==i?void 0:null===(f=i.video)||void 0===f?void 0:f.height)?1:0,group_id:null==i?void 0:i.awemeId,landing_page:(0,ie.yW)(),vduration:null==i?void 0:null===(m=i.video)||void 0===m?void 0:m.duration,if_invisible:(0,nf.Vr)()?"1":"0",is_small_window:(0,nf.QD)()?"1":"0",real_index:o,is_cache_video:n,aweme_type:null==i?void 0:i.awemeType,is_quick_player:(null===(_=window)||void 0===_?void 0:null===(p=_.__QUICK_PLAYER)||void 0===p?void 0:p.firstLoadDataTimeStamp)?1:0});try{n9.Z.sendLog("prfFirstFeedFirstFrameShow",{feed_total_duration:e-(null===(h=performance)||void 0===h?void 0:null===(g=h.timing)||void 0===g?void 0:g.fetchStart),is_landscape:(null==i?void 0:null===(y=i.video)||void 0===y?void 0:y.width)>(null==i?void 0:null===(w=i.video)||void 0===w?void 0:w.height)?1:0,group_id:null==i?void 0:i.awemeId,landing_page:(0,ie.yW)(),real_index:o,is_cache_video:n,aweme_type:null==i?void 0:i.awemeType,is_quick_player:(null===(I=window)||void 0===I?void 0:null===(x=I.__QUICK_PLAYER)||void 0===x?void 0:x.firstLoadDataTimeStamp)?1:0}),((null===(b=C.Le.getConfig(C.gI.AbtestData))||void 0===b?void 0:b.prefetchFirst)||(null===(E=C.Le.getConfig(C.gI.AbtestData))||void 0===E?void 0:E.prefetchFirstServer))&&eb.emit(eb.EVENT.firstLoadMore)}catch(e){}}"recommend"===(0,ie.yW)()&&C.Le.getConfig(C.gI.FirstEnterRecommend)&&(C.Le.setConfig(C.gI.FirstEnterRecommend,!1),eb.emit(eb.EVENT.firstEnterVideoPlay))}catch(e){}},s=()=>{if(C.Le.setConfig(C.gI.isVideoPlayed,!0),!(0,O.B)()&&!!n.current)u()},c=ro();c.prfFirstFeedShow&&!c.prfFirstFeedShow.used&&c.prfFirstFeedShow.data&&(a=c.prfFirstFeedShow.data,u(),c.prfFirstFeedShow.used=!0),c.prfFirstFrameStart&&!c.prfFirstFrameStart.used&&c.prfFirstFrameStart.data&&(d(),c.prfFirstFrameStart.used=!0);let v=null===(r=window)||void 0===r?void 0:null===(e=r.__QUICK_PLAYER)||void 0===e?void 0:e.firstLoadDataTimeStamp;return v&&(a=v,u()),t.on(ev.Events.PLAY,s),t.on(ev.Events.LOADED_DATA,u),t.on(ev.Events.LOAD_START,d),()=>{t.off(ev.Events.PLAY,s),t.off(ev.Events.LOADED_DATA,u),t.off(ev.Events.LOAD_START,d)}},[t,i,l,o])}({player:i,awemeInfo:t,isActive:l,index:n}),!function(e){let{player:t,awemeInfo:i,isActive:l,index:o}=e,{getLogInfo:n,getSpecialParams:r}=e,a=nh(),d=(0,f.useRef)(""),u=(0,f.useRef)(null),s=(0,f.useRef)(!1);(0,f.useEffect)(()=>{!l&&(d.current="")},[l]),(0,f.useEffect)(()=>{i.awemeId!==d.current&&(d.current="");let e=t,l=()=>{var t,l,a,c,v,f,m,p,_,g,y,w,x,I,b,S,T,k,L,A,N,P,M,D,F,O,B,U,H,W;if(d.current)return;d.current=i.awemeId;let{author_id:z,group_id:G,log_pb:Z,compilation_id:q,playlet_id:K,impressionData:$,extraParams:Y,aweme_type:X,pic_cnt:J,trending_topic:ee,first_tag_name:et,top:ei,is_pure:el,is_click_cover:eo,is_insert_wallpaper:en,isMini:er,latest_group_id:ea,if_first_big_card:ed}=n(),{isH265:eu}=(0,rb.Z)({awemeInfo:i,player:e}),es=C.Le.getConfig(C.gI.VideoFeedList),ec=(null==es?void 0:es.autoPlayCount)||1,ev=(0,j.Rs)("if_from_widget"),ef=0;((0,j.Rs)("modeFrom")===rM.MODE_FROM||(0,j.Rs)("modeFrom")===rM.MODE_FROM_SEARCH)&&(ef=1);let em=!1,ep=(0,lJ.G)(R.SessionStorageKeys.CacheRecommendActiveAwemeID);ep&&ep===G&&(em=!0);let e_=(null===(t=window.EXPOSE_DATA)||void 0===t?void 0:t.landingPage)==="discover",eg=(null===(l=window.EXPOSE_DATA)||void 0===l?void 0:l.landingPage)==="follow",eh=e_&&(null===(a=window.EXPOSE_DATA)||void 0===a?void 0:a.landingMode)!==2&&(null===(c=window.EXPOSE_DATA)||void 0===c?void 0:c.landingMode)!==3,ey=null!==(F=null!==(D=(0,j.Rs)("enter_method"))&&void 0!==D?D:e_||eg?"default_landing":void 0)&&void 0!==F?F:"other",ew=(null==i?void 0:i.weeklyRecommend)?1:0,ex="";try{ex=(null==i?void 0:null===(O=i.logPb)||void 0===O?void 0:O.includes("impr_id"))?JSON.parse(null==i?void 0:i.logPb).impr_id:null==i?void 0:i.logPb}catch(e){}n9.Z.sendLog("videoPlay",(0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)({is_click_cover:eo,is_insert_wallpaper:en,urlParamList:["trending_topic","previous_page","keywords_index","keywords_content"],enter_method:ey,author_id:z,enter_from:(0,eI.mo)(),enter_from_merge:(0,rR.z)(""),group_id:G,log_pb:Z,compilation_id:q,playlet_id:K,is_auto_play:String((null==e?void 0:null===(m=e.plugins)||void 0===m?void 0:null===(f=m.autoplaysettingplugin)||void 0===f?void 0:null===(v=f.config)||void 0===v?void 0:v.nextAutoPlay)||(null==e?void 0:null===(g=e.plugins)||void 0===g?void 0:null===(_=g.searchautoplaysettingplugin)||void 0===_?void 0:null===(p=_.config)||void 0===p?void 0:p.nextAutoPlay)?1:0),is_visible:String("visible"===document.visibilityState?1:0),impression_data:$,speed:`${null==e?void 0:e.playbackRate}`,auto_cnt:ec,impr_id:ex,video_detail_enter_from:(0,rR.z)("web_link"),is_full_screen:(0,eS.r)()?"1":"0",is_full_webscreen:tG.s.getIsPageFullscreen()?"1":"0",tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",from_follow_list:(null===(y=C.Le.getConfig(C.gI.FromFollowList))||void 0===y?void 0:y.tag)?"1":"0",is_mute:(null==e?void 0:e.muted)?"1":"0",mute_type:null===(w=C.Le.getConfig(C.gI.ForceMuted))||void 0===w?void 0:w.currentMuteType,is_pure:el},(0,eT.t)()),{from_academy:ef,aweme_type:(null==i?void 0:i.isSlides)?151:X,pic_cnt:J,trending_topic:ee,first_tag_name:et,top:ei,browser_height:(0,eL.P6)(),browser_width:(0,eL.wi)(),browser_ratio:(0,eL.P6)()/(0,eL.wi)(),is_from_ad:(0,h.Jt)(i)?1:0,is_ad:(0,h.Jt)(i)?1:0,is_compilation:(null==i?void 0:null===(x=i.mixInfo)||void 0===x?void 0:x.mixId)?1:0,is_bytevc1:eu,video_time:(0,rN.n)(null==i?void 0:null===(I=i.video)||void 0===I?void 0:I.duration),is_force:(null===(b=C.Le.getConfig(C.gI.ForceMuted))||void 0===b?void 0:b.currentMuteType)==="browser"?"1":"0",from_push:V.Q.getItem({sKey:R.CookieKeys.FromClientPush})?1:0,auto_play_mode:null===(S=C.Le.getConfig(C.gI.InnerAutoPlay))||void 0===S?void 0:S.mode,seo_vids:rF.t("seo_vids")||"",webdriver:navigator&&navigator.webdriver?1:0,vtype:null==e?void 0:e.vtype,is_long_not_use_refresh_vid:!!(null==e?void 0:null===(T=e.config)||void 0===T?void 0:T.notUseRefreshVid),is_supported_hevc1_hw:(0,oe._u)()?1:0,is_supported_264_hw:(0,oe.b4)()?1:0,is_hevc_error_down:null!==(B=null==e?void 0:e.isHevcErrorDown)&&void 0!==B?B:0}),(0,rC.Z)(),Y,(null===(k=r())||void 0===k?void 0:k.videoPlay)||{}),{video_play_method:null!==(U=C.Le.getConfig(C.gI.VideoPlayMethod))&&void 0!==U?U:"auto",if_invisible:(0,nf.Vr)()?"1":"0",is_small_window:(0,nf.QD)()?"1":"0",is_top:(0,nf.k)()?"1":"0"}),en&&C.Le.getConfig(C.gI.WallPaperPosition)>0?{vv_sync:1}:{}),{url_source:null!==(H=null==i?void 0:null===(L=i.continationInfo)||void 0===L?void 0:L.urlSource)&&void 0!==H?H:["recommend","personal_homepage"].includes((0,eI.vM)())?V.Q.getItem({sKey:R.CookieKeys.UrlSourceForBrowserPlugin}):"",latest_group_id:ea,expand_video_card_type:(null===(A=C.Le.getConfig(C.gI.PlayerCardInfo))||void 0===A?void 0:A.isActive)?null===(N=C.Le.getConfig(C.gI.PlayerCardInfo))||void 0===N?void 0:N.expandCardType:"",if_continued_play:C.Le.getConfig(C.gI.PlayRecord)?or(i.awemeId)?1:0:"",rate:C.Le.getConfig(C.gI.PlayRecord)?(null==e?void 0:e.currentTime)/(null==e?void 0:e.duration):""}),(0,rj.K)(i)),{if_from_widget:ev?1:0,from_click_group_id:null!==(W=null==i?void 0:i.insertId)&&void 0!==W?W:"",column_type:(null==Y?void 0:Y.column_type)||(null==Y?void 0:null===(P=Y.search_params)||void 0===P?void 0:P.column_type),is_cache_video:em,is_first_video:!o,if_first_big_card:ed,player_start_time:(null==e?void 0:null===(M=e.config)||void 0===M?void 0:M.startTime)||0,is_recommend:"default_landing"===ey?Number(eh):void 0}),(0,rP.Wc)(rP.rh.PLAY_START)),{is_selected_label:ew}));try{!s.current&&(0,r0.yr)()}catch(e){}u.current={aweme_type:X,item_id:G,source:0,play_delta:1,operation_info:null==i?void 0:i.webOperationInfo},C.Le.getConfig(C.gI.TeaBlocked)},c=()=>{d.current="",l()},v=e=>{d.current=e};if(!e){let t;let o=o=>{if(i){e=o;let i=ro();i.autoplayStarted.used=!0,i.autoplayStarted.data&&(l(),i.autoplayStarted.data=null),e.on("enter_inner_feed",c),e.on("exit_inner_feed",v),e.on(ev.Events.AUTOPLAY_STARTED,l),t=()=>{e.off("enter_inner_feed",c),e.off("exit_inner_feed",v),e.off(ev.Events.AUTOPLAY_STARTED,l)}}};return a.on(oi.PlayerCreated,o),()=>{a.off(oi.PlayerCreated,o),null==t||t()}}return e.on("enter_inner_feed",c),e.on("exit_inner_feed",v),e.on(ev.Events.AUTOPLAY_STARTED,l),()=>{e.off("enter_inner_feed",c),e.off("exit_inner_feed",v),e.off(ev.Events.AUTOPLAY_STARTED,l)}},[i.awemeId,l]),(0,f.useEffect)(()=>{let e=()=>{(0,rJ.x0)(u.current)};return l&&t?(t.once(ev.Events.TIME_UPDATE,e),()=>{t.off(ev.Events.TIME_UPDATE,e)}):()=>null},[l,t])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a,getSpecialParams:u,index:n}),r1({player:i,awemeInfo:t,isActive:l,getLogInfo:a}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e;(0,f.useEffect)(()=>{if(t){let e=e=>{var t,l;let{vid:o,force_set_min:n}=e||{};n9.Z.sendLog("prfTaskDataSize",(0,Q._)((0,E._)({},e||{}),{user_unique_id:null===(t=(0,F.Es)())||void 0===t?void 0:t.user_unique_id,group_id:o,force_set_min:n?1:0,vduration:null==i?void 0:null===(l=i.video)||void 0===l?void 0:l.duration,enter_from:(0,ie.yW)()}))};return t.on("prf_data_size",e),()=>{t.off("prf_data_size",e)}}},[t,i])}({player:i,awemeInfo:t,isActive:l}),r4({isNext:o,player:i,awemeInfo:t,getLogInfo:a,isActive:l}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o}=e;(0,f.useEffect)(()=>{if(t&&l)try{let e=e=>{try{var l,n,r,a;let{group_id:d,playlet_id:u,log_pb:s,extraParams:c,aweme_type:v,top:f,is_pure:m,bitRate:p,latest_group_id:_}=o(),{isH265:g}=(0,rb.Z)({awemeInfo:i,player:t}),h=(null===(l=t.curDefinition)||void 0===l?void 0:l.bitrate)||p||0;n9.Z.sendLog("fpsStuck",(0,Q._)((0,E._)((0,Q._)((0,E._)((0,Q._)((0,E._)({},e),{enter_from:(0,eI.mo)(),group_id:d,playlet_id:u,log_pb:s,speed:String(null==t?void 0:t.playbackRate)}),(0,eT.t)()),{aweme_type:v,top:f,is_pure:m,is_bytevc1:g}),(0,rC.Z)(),c),{play_order:(0,nO.G)(),video_bitrate:h,audio_bitrate:(null===(r=t.curDefinition)||void 0===r?void 0:null===(n=r.audioDefinition)||void 0===n?void 0:n.bitrate)||0,real_bitrate:(null===(a=t.curDefinition)||void 0===a?void 0:a.realBitrate)||0,latest_group_id:_,current_position:t.currentTime,vtype:t.vtype}),!1)}catch(e){l3.oe.event.error({name:l3.Mo.FpsStuckReportError,report:{type:1}})}};return t.on(ev.Events.FPS_STUCK,e),()=>{t.off(ev.Events.FPS_STUCK,e)}}catch(e){l3.oe.event.error({name:l3.Mo.FpsStuckReportError,report:{type:0}})}},[t,i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a,getSpecialParams:u}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o,getH265DegradeReportFlag:n,getSupportHwClientFlag:r}=e,a=(0,f.useRef)([]),d=(0,f.useRef)(0),u=(0,f.useRef)(""),s=nh();(0,f.useEffect)(()=>{let e;(u.current!==(null==i?void 0:i.awemeId)||!l||!i)&&(u.current=null==i?void 0:i.awemeId,a.current=[],d.current=0);let c=t,v=()=>{l&&(a.current.forEach(e=>{n9.Z.sendLog("videoDegrade",e)}),a.current=[])},f=e=>{var t,l;let{group_id:u,vduration:s,extraParams:f,action_type:m,aweme_type:p,awemeRequestTime:_,qualityType:g,log_pb:y,bitrate_set_client:w}=o(),{isH265:x,codecFormat:C,videoFormat:I}=(0,rb.Z)({awemeInfo:i,player:c}),b=(0,E._)((0,Q._)((0,E._)({urlParamList:["previous_page","tab_name"]},(0,rx.Z)(c),(0,rC.Z)()),{group_id:u,errorCode:null==e?void 0:e.errc,errorDesc:null==e?void 0:e.err_msg,vduration:s,video_quality:(0,rI.S)({player:c,qualityType:g}),player_version:c.version,current_position:1e3*c.currentTime,is_video_support:Number((0,rU.k)().isSupport),host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null==c?void 0:c.vtype),action_type:m,bitrate_set_client:w,is_ad:(0,h.Jt)(i)?1:0,is_compilation:(null==i?void 0:null===(t=i.mixInfo)||void 0===t?void 0:t.mixId)?1:0,is_active:1,is_cdn_expired:1===(0,rH.q)(c.currentSrc)?1:0,is_bytevc1:x,aweme_type:p,log_pb:y,codec_format:C,video_format:I,play_order:(0,nO.G)(),is_supported_265:nG()?1:0,is_265_degrade:n(),has_report:d.current++,is_265_degrade_client:nJ({player:c}),is_support_hw:r(),is_hw:(null==c?void 0:null===(l=c.config)||void 0===l?void 0:l.mediaType)==="video"?1:0,hit_preload:(0,rE.qJ)(c)}),(0,rh.m)({player:c}),(0,rh.B)({player:c}),f);a.current.push(b),v()};i&&(v(),c&&c.on("degrade",f));let m=t=>{(c=t).on("degrade",f),e=()=>{c.on("degrade",f)}};if(!c){var p;null==s||null===(p=s.on)||void 0===p||p.call(s,oi.PlayerCreated,m)}return()=>{var t;null==e||e(),null==c||c.off("degrade",f),null==s||null===(t=s.off)||void 0===t||t.call(s,oi.PlayerCreated,m)}},[i,l])}({player:i,awemeInfo:t,isActive:l,getLogInfo:a,getH265DegradeReportFlag:d,getSupportHwClientFlag:c}),!function(e){let{player:t,isActive:i}=e;(0,f.useEffect)(()=>{if(t&&i){var e;let i=e=>{var i,l,o,n,r,a,d,u,s,c,v,f,m,p;let _=null==e?void 0:e.code;n9.Z.sendLog("srDegrade",(0,E._)({enter_from:(0,ie.yW)(),group_id:null==t?void 0:null===(i=t.config)||void 0===i?void 0:i.vid,vtype:null==t?void 0:t.vtype,quality_type:null==t?void 0:null===(l=t.curDefinition)||void 0===l?void 0:l.qualityType,gear_name:null==t?void 0:null===(o=t.curDefinition)||void 0===o?void 0:o.gearName,definition:null==t?void 0:null===(n=t.curDefinition)||void 0===n?void 0:n.definition,is_bytevc1:null==t?void 0:null===(r=t.curDefinition)||void 0===r?void 0:r.isH265,current_time:null==t?void 0:t.currentTime},(null==t?void 0:null===(u=t.plugins)||void 0===u?void 0:null===(d=u.srplugin)||void 0===d?void 0:null===(a=d.getStat)||void 0===a?void 0:a.call(d))||{},e||{},(0,rh.m)({player:t}))),C.Le.setConfig(C.gI.SrDegradeCode,null!=_?_:-1),(null==t?void 0:null===(f=t.plugins)||void 0===f?void 0:null===(v=f.srplugin)||void 0===v?void 0:null===(c=v.getStat)||void 0===c?void 0:null===(s=c.call(v))||void 0===s?void 0:s.renderDelta)>(null==e?void 0:e.defaultRenderDelta)&&r3++;let g=null===(p=C.Le.getConfig(C.gI.AbtestData))||void 0===p?void 0:null===(m=p.SR)||void 0===m?void 0:m.renderDeltaAccumulate;r3>g&&(0,B.qQ)(R.LocalStorageKeys.srDegradePermanently,1),[2,3,-300,-600].includes(_)&&(window.srDegradeFinally=!0,C.Le.setConfig(C.gI.SrDegrade,1)),[-300,-600].includes(_)&&(0,B.qQ)(R.LocalStorageKeys.srDegradePermanently,1)};return null==t||null===(e=t.on)||void 0===e||e.call(t,r2.D.SR_DEGRADE,i),()=>{var e;null==t||null===(e=t.off)||void 0===e||e.call(t,r2.D.SR_DEGRADE,i)}}},[t,i])}({player:i,isActive:l}),!function(e){let{player:t,awemeInfo:i,isActive:l}=e,{getLogInfo:o,getSpecialParams:n}=e;(0,f.useEffect)(()=>{if(!t||!l||(null==i?void 0:i.awemeType)===68)return;let e=n(),r=l=>{try{var n;let{author_id:r,group_id:a,log_pb:d,compilation_id:u,playlet_id:s,extraParams:c,aweme_type:v,trending_topic:f,first_tag_name:m,top:p,is_click_cover:_,is_pure:g,is_insert_wallpaper:h}=o(),{isH265:y}=(0,rb.Z)({awemeInfo:i,player:t}),{mediaTime:w,fixEditListOffset:x}=r6(t);n9.Z.sendLog("videoEditListOffsetTime",(0,Q._)((0,E._)({duration:1e3*w,fix_edit_list_offset:Number(x),is_ended:null==l?void 0:l.ended,is_click_cover:_,urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,eI.mo)(),author_id:r,group_id:a,log_pb:d,compilation_id:u,playlet_id:s,is_insert_wallpaper:h,is_visible:String("visible"===document.visibilityState?1:0),is_mute:(null==t?void 0:t.muted)?"1":"0",aweme_type:v,trending_topic:f,first_tag_name:m,top:p,is_pure:g},c,e.videoPlayFinish||{}),{is_bytevc1:y,video_time:(0,rN.n)(null==i?void 0:null===(n=i.video)||void 0===n?void 0:n.duration)}))}catch(e){}};return t.on(ev.Events.ENDED,r),()=>{!t.ended&&r(),t.off(ev.Events.ENDED,r)}},[t,i,l])}({player:i,isActive:l,awemeInfo:t,getLogInfo:a,getSpecialParams:u}),!function(e){let{player:t,getLogInfo:i}=e;(0,f.useEffect)(()=>{if(!t)return()=>{};let e=e=>{let t=rv[null==e?void 0:e.pluginName];if((null==e?void 0:e.pluginName)==="fullscreen"&&(t=(0,eS.r)()?"hover_exit_full_screen":"hover_enter_full_webscreen"),!t)return;let l=i();n9.Z.sendLog(t,{enter_from:(0,eI.mo)(),player_display_mode:(0,eI.Ok)(),group_id:(null==l?void 0:l.group_id)||""})};t.on("icon_mouseleave",e);let l=t.getPlugin("progress"),o=()=>{let e=i();n9.Z.sendLog("hover_progress",{enter_from:(0,eI.mo)(),player_display_mode:(0,eI.Ok)(),group_id:(null==e?void 0:e.group_id)||""})};return null==l||l.addCallBack("mouseleave",o),()=>{t.off("icon_mouseleave",e),null==l||l.removeCallBack("mouseleave",o)}},[t])}({player:i,getLogInfo:a})}({player:c,isActive:i,awemeInfo:t,getIsChangingVideoSrc:_,getLogInfo:y,getH265DegradeReportFlag:v,getSpecialParams:w,getReportNetworkSpeed:n7,getSupportHwClientFlag:m,isNext:l,index:s}),null};var r7=i("498871"),r9=i("957201"),ae=i("613378"),at=i("44216"),ai=i("679584"),al=i("760710");let ao={5:1,4:2,3:3,2:4,10:-1,20:-2},{quality_filter:an,white_list:ar}=(0,al.E)(),aa=(e,t,i)=>{var l;let o=null!==(l=null==t?void 0:t.clarityMap)&&void 0!==l?l:t6.ClarityMap,n=[],r=e.filter(e=>(null==e?void 0:e.videoFormat)==="dash"),a=(null==r?void 0:r.length)>0&&i?r:e;return(Object.keys(o).forEach(e=>{let t=o[e];for(let i=0;i<t.length;i++){let l=a.filter(e=>{var l;return null==e?void 0:null===(l=e.gearName)||void 0===l?void 0:l.includes(t[i])});if(null==l?void 0:l.length){let t=Object.assign({},l[0]);t.definition=ao[e],n.push(t);break}}}),n.length>0)?n:a},ad=e=>{if(e&&e.core_cnt){var t;let i=null!==(t=navigator.hardwareConcurrency)&&void 0!==t?t:-1,[l,o]=e.core_cnt;return i>=l&&i<=o}return!0},au=e=>{if(e&&e.memory){var t;let i=null!==(t=navigator.deviceMemory)&&void 0!==t?t:-1,[l,o]=e.memory;return i>=l&&i<=o}return!0},as=(e,t)=>{if(e&&e.video_screen_mode){var i;let{width:l,height:o}=null!==(i=null==t?void 0:t.video)&&void 0!==i?i:{};return"landscape"===e.video_screen_mode[0]&&l>o}return!0},ac=(e,t)=>!e||!e.encoder||e.encoder[0]===t,av=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar,l=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,r=i;if((0,l8.fR)()&&(r=r.concat(["adapt_lowest_1440_1","adapt_lowest_4_1"])),null==l?void 0:null===(e=l.BitrateSelector)||void 0===e?void 0:e.multiFactors){let e=l.BitrateSelector.multiFactors.find(e=>{let t=ad(e.factor),i=au(e.factor),l=ac(e.factor,n),r=as(e.factor,o);return t&&i&&l&&r});e&&e.config&&e.config.white_list&&(r=e.config.white_list)}let a=t.filter(e=>r.some(t=>{var i;return null==e?void 0:null===(i=e.gearName)||void 0===i?void 0:i.includes(t)}));return a.length>0?a:t},af=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:an,l=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,r=i;if(null==l?void 0:null===(e=l.BitrateSelector)||void 0===e?void 0:e.multiFactors){let e=l.BitrateSelector.multiFactors.find(e=>{let t=ad(e.factor),i=au(e.factor),l=ac(e.factor,n),r=as(e.factor,o);return t&&i&&l&&r});e&&e.config&&e.config.quality_filter&&(r=e.config.quality_filter)}if(t.find(e=>[-1,-2].includes(e.definition)))return t;let a=t.filter(e=>{let t=!0;for(let[l,o]of Object.entries(r)){var i;if(null==e?void 0:null===(i=e.gearName)||void 0===i?void 0:i.includes(l)){let{lower:i,upper:l}=null!=o?o:{};(e.realBitrate<i||e.realBitrate>l)&&(t=!1)}}return t});if(0===a.length&&t.length>0){let e=t.reduce((e,t)=>e.realBitrate&&e.realBitrate<t.realBitrate?e:t,{});a.push(e)}return a},am=(e,t,i,l,o,n,r)=>{if((null==i?void 0:i.awemeType)===g.e.Note)return[];let a=null!=e?e:[],d=aa(a,t,n);if(d.length>0&&(a=d),o||r)!(0,l8.fR)()&&(a=(a=a.filter(e=>!e.gearName.includes("adapt_lowest_4_1"))).filter(e=>!e.gearName.includes("adapt_lowest_1440_1")));else{var u,s,c,v;let e=null!==(c=null==t?void 0:null===(u=t.BitrateSelector)||void 0===u?void 0:u.quality_filter)&&void 0!==c?c:an;a=af(a=av(a,null!==(v=null==t?void 0:null===(s=t.BitrateSelector)||void 0===s?void 0:s.white_list)&&void 0!==v?v:ar,t,i,l),e,t,i,l)}return a.map(e=>{var t,o;return{size:null==e?void 0:e.dataSize,uri:null==e?void 0:e.uri,url:[...(null==e?void 0:e.playAddr)||[],{src:null==e?void 0:e.playApi}],bitrate:null==e?void 0:e.bitRate,definition:(null==e?void 0:e.definition)||(null==e?void 0:e.qualityType),qualityType:null==e?void 0:e.qualityType,duration:(null==i?void 0:null===(t=i.video)||void 0===t?void 0:t.duration)/1e3,isH265:e.isH265,gearName:e.gearName,pktOffsetMap:(null==e?void 0:e.pktOffsetMap)||[],featureId:null==e?void 0:e.featureId,isH266:(null==e?void 0:e.isH265)===2?1:0,vtype:null==e?void 0:null===(o=e.videoFormat)||void 0===o?void 0:o.toUpperCase(),mediaType:"video",codecType:l,fps:null==e?void 0:e.fps,file_id:null==e?void 0:e.fileId,index_range:null==e?void 0:e.indexRange,init_range:null==e?void 0:e.initRange,audio_file_id:null==e?void 0:e.audioFileId,first_segment_range:null==e?void 0:e.firstSegmentRange,realBitrate:(null==e?void 0:e.realBitrate)||(null==e?void 0:e.bitRate),width:null==e?void 0:e.width,height:null==e?void 0:e.height}})},ap=e=>{let{audioList:t,abtestData:i}=e;return t.map(e=>{let{bitrate:t,codecType:i,fileId:l,quality:o,size:n,indexRange:r,initRange:a,urlList:d,firstSegmentRange:u}=e;return{bitrate:t,quality:o,size:n,codecType:"bytevc1"===i?"h265":"h264",file_id:l,index_range:r,init_range:a,first_segment_range:u,vtype:at.l0.DASH,fps:e.FPS,gearName:e.gear_name,mediaType:"audio",url:d}})};var a_=i("822754"),ag=i("738712"),ah=i.n(ag);let ay=e=>{var t,i,l,o;let n=new(ah())().getResult(),r=null==n?void 0:null===(t=n.browser)||void 0===t?void 0:t.name,a=Number(null==n?void 0:null===(i=n.browser)||void 0===i?void 0:i.major),d="Chrome"===r&&a<=100||"MetaSr"===r,u=navigator.hardwareConcurrency,s=null!==(o=null===(l=(0,nD.$)())||void 0===l?void 0:l.score)&&void 0!==o?o:-1,c={isBan1080:!1,isBan720:!1};return u>=8&&d&&(c.isBan1080=!0),u<8&&u>=4&&(d&&(c.isBan1080=!0),d&&s>0&&s<6&&(c.isBan720=!0)),u<4&&d&&(c.isBan1080=!0,c.isBan720=!0),c},aw={1:{width:1920,height:1080},2:{width:1280,height:720},3:{width:1024,height:576},4:{width:1024,height:576},"-1":{width:0,height:0},"-2":{width:0,height:0}},ax=()=>{if("general_search"===(0,eI.vM)())return{width:1114,height:660};let e=window.innerWidth>=1240?228:140,t=window.innerWidth-e;return{width:t,height:window.innerHeight-128}},aC=e=>{var t,i,l,o,n,r,a,d;let{awemeInfo:u,H264List:s,H265List:c,H266List:v,abtestData:f,userselection:m}=e;if(m||(0,eS.r)()||(null==f?void 0:f.disableOverRect)||(null==f?void 0:f.use265Web)||(null==f?void 0:f.revertOverRect)===1&&window.devicePixelRatio>1)return{};let p=C.Le.getConfig(C.gI.VideoRect);!p&&(p=ax(),C.Le.setConfig(C.gI.VideoRect,p));let _=null!==(n=C.Le.getConfig(C.gI.VideoRectList))&&void 0!==n?n:[],h=_.find(e=>e.id===u.awemeId);if(h&&h.rect.width!==(null==p?void 0:p.width))return h.config;let y=null!==(r=null!=v?v:c)&&void 0!==r?r:s,w=null==y?void 0:y.sort((e,t)=>(null==t?void 0:t.definition)-(null==e?void 0:e.definition)),x=(null==u?void 0:null===(t=u.video)||void 0===t?void 0:t.width)/(null==u?void 0:null===(i=u.video)||void 0===i?void 0:i.height),I=[],b={width:null==p?void 0:p.width,height:null==p?void 0:p.height};if((null==f?void 0:f.revertOverRect)===2&&window.devicePixelRatio>1&&(b.width=b.width*window.devicePixelRatio,b.height=b.height*window.devicePixelRatio),w&&x>1)for(let e=0;e<w.length;e++){let t=aw[null!==(a=w[e].definition)&&void 0!==a?a:1];if((null==b?void 0:b.width)>(null==t?void 0:t.width)&&(null==b?void 0:b.height)>(null==t?void 0:t.height)){I.push(w[e]);continue}I.push(w[e]);break}if(w&&x<1)for(let e=0;e<w.length;e++){let t=aw[null!==(d=w[e].definition)&&void 0!==d?d:1];if((null==b?void 0:b.width)>(null==t?void 0:t.height)&&(null==b?void 0:b.height)>(null==t?void 0:t.width)){I.push(w[e]);continue}I.push(w[e]);break}let E=w.find(e=>-1===e.definition),S=I.find(e=>-1===e.definition);E&&!S&&I.push(E);let T=w.find(e=>-2===e.definition),k=I.find(e=>-2===e.definition);if(T&&!k&&I.push(T),0===I.length)return{};let L={isOverRect:I.length!==y.length?1:0,defaultDefinition:(null==I?void 0:null===(l=I[0])||void 0===l?void 0:l.definition)||-1,defaultBitrate:(null==I?void 0:null===(o=I[0])||void 0===o?void 0:o.bitrate)||"",definition:{list:(null==u?void 0:u.awemeType)===g.e.Note?[]:I}};return h?(h.config=L,h.rect={width:null==p?void 0:p.width,height:null==p?void 0:p.height},L):(_.push({id:u.awemeId,config:L,rect:{width:null==p?void 0:p.width,height:null==p?void 0:p.height}}),C.Le.setConfig(C.gI.VideoRectList,_),L)};var aI=i("855066"),ab=i("827480"),aE=i("732365"),aS=i("596161");let aT={paramBf:.3,paramBp:.5,paramUpper:1.5,paramLower:.6,paramUpperBl:.7,paramVl1:.8,paramVl2:3,paramVlUpper:.9,paramVlLower:.7,bitrateUpper:2e6,bitrateLower:2e5,slidingWindowType:"by_weight",slidingWindowWeight:"size",slidingWindowWeightThreshold:2e7,slidingWindowCountThreshold:30,slidingWindowExtraction:"weighted_median",bitrateRange:[2e5,25e5],mode:"buffer-info",quality_filter:{}};var ak=i("738582"),aL=i("226264"),aA=i("799241"),aR=i("249928"),aN=i("175055"),aP=i("528770"),aM=i("665572"),aj=i("898097"),aD=i("15212"),aF=i("537503"),aV=i("440431"),aO=i("463902"),aB=i("140292"),aU=i("876393"),aH=i("395717");let aW={play:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aL.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),pause:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aA.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),startPlay:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aL.Z,{}),needRenderInSSR:!0}),startPause:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aA.Z,{}),needRenderInSSR:!0}),playNext:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aR.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),mini:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aN.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),volumeSmall:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aP.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),volumeLarge:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aM.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),volumeMuted:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aj.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),fullscreen:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aD.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),exitFullscreen:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aF.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),loadingIcon:(0,ak.Y)(tn,{})},az={play:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aL.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),pause:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aA.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),startPlay:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aL.Z,{}),needRenderInSSR:!0}),startPause:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aA.Z,{}),needRenderInSSR:!0}),playNext:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aR.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),mini:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aN.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),volumeSmall:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aV.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),volumeLarge:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aO.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),volumeMuted:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aB.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),fullscreen:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aU.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),exitFullscreen:(0,ak.Y)(iG.z,{svg:(0,v.jsx)(aH.Z,{style:{fontSize:"32px"}}),needRenderInSSR:!0}),loadingIcon:(0,ak.Y)(tn,{})},aG=e=>{let{player:t,abtestData:i,awemeInfo:l}=e;return nY({abtestData:i,awemeInfo:l,player:t})?2:n$({abtestData:i,awemeInfo:l,player:t})?1:0},aZ=e=>{var t,i,l,o;return(null==e?void 0:null===(l=e.video)||void 0===l?void 0:null===(i=l.playAddr)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.src.includes("video-web-cn"))||(null==e?void 0:null===(o=e.status)||void 0===o?void 0:o.privateStatus)>0&&(null==e?void 0:e.awemeType)!==g.e.Note},aq=e=>{let{abtestData:t,enableSr:i}=e,l={isOpen:!1,type:"filter",filterKey:"definition",filterList:[{source:1,target:[2]},{source:2,target:[3]}],enable266:!0};if(i){var o,n;return(null==t?void 0:null===(o=t.SR)||void 0===o?void 0:o.improvePictureQuality)||(null==t?void 0:null===(n=t.SR)||void 0===n?void 0:n.targetDefinition)?Object.assign({},l,null==t?void 0:t.SR,{isOpen:!1}):Object.assign({},l,null==t?void 0:t.SR)}return l},aK=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=(0,U.DT)()?"client":"web",o=null===(e=navigator)||void 0===e?void 0:e.hardwareConcurrency,n=(0,E._)({},t),r=new Date().getHours();return i.forEach(e=>{if(e.browser_mode.includes(l)&&e.core_number[0]<=o&&e.core_number[1]>=o){if(!e.time_range||!!(e.time_range[0]<=r&&e.time_range[1]>=r))"object"==typeof e.scale&&Object.keys(e.scale).forEach(t=>{n[t]=n[t]*e.scale[t]}),"object"==typeof e.absolute&&Object.keys(e.absolute).forEach(t=>{n[t]=e.absolute[t]})}}),n},a$=e=>{let{abtestData:t}=e,i=(0,a_.DH)(t);return(null==i?void 0:i.open)?{bitrateKey:"realBitrate"}:{}},aY=()=>(0,l8.fR)()?{bitrateUpper:2e7,bitrateRange:[2e5,25e6]}:{},aQ=e=>{var t;let{abtestData:i,enableSr:l}=e;if((null==i?void 0:null===(t=i.extraBitrateSelector)||void 0===t?void 0:t.length)>0){let e=null==i?void 0:i.extraBitrateSelector;return(0,Q._)((0,E._)({},aT,aK(null==i?void 0:i.BitrateSelector,e),a$({abtestData:i}),aY()),{overscore:aq({abtestData:i,enableSr:l})})}return(0,Q._)((0,E._)({},aT,(null==i?void 0:i.BitrateSelector)||{},a$({abtestData:i}),aY({abtestData:i})),{overscore:aq({abtestData:i,enableSr:l})})},aX=e=>{var t,i,l,o,n,r,a;let{awemeInfo:d={},abtestData:u={},enableSr:s}=e,c=aG({awemeInfo:d,abtestData:u}),{volume:v,autoplayMuted:f}=(0,nT.J)(),m=(0,J.p)(d)?{closeVideoClick:!0}:{},p=(null==u?void 0:u.reduceLottie)?'<div class="xg-douyin-loading-v2" />':'<div class="xg-douyin-loading" />',_=(0,Q._)((0,E._)({lang:"zh",inactive:2e3,leavePlayerTime:0,autoplay:!0,autoplayMuted:f,volume:v,loop:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,closePlayVideoFocus:!0,closeVideoPreventDefault:!0,closeVideoStopPropagation:!0,playbackRate:!1,cssFullscreen:!1,awemeType:d.awemeType,dynamicBg:{disable:!0,frameRate:10,filter:"blur(60px)",maskBg:"rgba(0,0,0,0.7)"},enter:{innerHtml:p},start:{disableAnimate:!0},ignores:["poster","definition","mobile"],progresspreview:{disable:!0},progress:!0,miniprogress:!1,miniscreen:{width:350,height:197,left:-1,top:-1,disableDrag:!0},vodLogOpts:{line_app_id:aS.APP_ID,line_user_id:(null===(t=(0,F.Es)())||void 0===t?void 0:t.user_unique_id)||"",vtype:"MP4",tag:(0,ie.yW)(),codec_type:2===c?"h266":1===c?"h265":"h264",drm_type:0,sendLocalCallback:(e,t)=>{},disableLocalCache:!0,channel:"cn",closeResolutionLog:!0,closeSeekLog:!0,maxQueueCount:5,isTask:!1,enableAbTest:!1,checkByInnerLog:!0,trackerWorker:window.TeaWorker},icons:(null==u?void 0:u.newControl)?az:aW,closeVideoDblclick:!0,plugins:[aI.default,ae.Z,aE.Z],BitrateSelector:aQ({abtestData:u,enableSr:s}),controls:{mode:"normal",autoHide:!1,initShow:!0},marginControls:!(0,J.p)(d)},m),{keyboard:{isGlobalTrigger:!0,disableRootTrigger:!0,keyCodeMap:{up:{disable:!0},down:{disable:!0}}},vtype:(null==d?void 0:d.awemeType)===g.e.Note?"MP3":"MP4",TestSpeed:{url:null===(i=(0,ab.preProcessUrl)(null!==(a=null==d?void 0:null===(n=d.video)||void 0===n?void 0:null===(o=n.playAddr)||void 0===o?void 0:null===(l=o[0])||void 0===l?void 0:l.src)&&void 0!==a?a:null==d?void 0:null===(r=d.video)||void 0===r?void 0:r.playApi))||void 0===i?void 0:i.url,openSpeed:!0,testCnt:2,addSpeedTypeList:["pcdn"],loadSize:204800,testTimeStep:5e3},videoConfig:{crossorigin:aZ(d)?"use-credentials":"anonymous"},i18n:[{LANG:"zh",TEXT:{MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式\n或\n设备无网络"}}],mobile:{gestureY:!1},enableContextmenu:!0,fpsdetect:{stuckCount:1},awemeInfo:d});return _.keyboard=(0,Q._)((0,E._)({},_.keyboard),{seekStep:5}),_.volume={default:v,showValueLabel:!0},_.preProcessUrl=ab.preProcessUrl,_},aJ=["normal_1440_0","normal_1080_0","normal_720_0","normal_540_0","normal_480_0","normal_360_0","lower_540_0"],a0=["low_1080_0","low_720_0","low_540_0","low_480_0","low_360_0","adapt_low_540_0"],a1=(e,t)=>{var i,l,o;let n=null==e?void 0:null===(i=e.filter)||void 0===i?void 0:i.call(e,e=>0===e.isH265),r=null==n?void 0:null===(l=n.filter)||void 0===l?void 0:l.call(n,e=>aJ.some(t=>e.gearName.includes(t))),a=(null==r?void 0:r.length)>0?r:n,d=null==n?void 0:null===(o=n.filter)||void 0===o?void 0:o.call(n,e=>a0.some(t=>e.gearName.includes(t)));if(d&&d.length>0){let e=null==a?void 0:a.find(e=>e.gearName.includes("normal_1080_0"));e&&d.unshift(e)}return(null==d?void 0:d.length)>0?d:a},a2=e=>{let{mixVtypeList:t,awemeInfo:i,abtestData:l,enableSr:o,userselection:n}=e,r=Array.from(new Set(null==t?void 0:t.map(e=>e.vtype)));if((null==r?void 0:r.length)>1){var a;let e=window.playerPreloader,r=null==e?void 0:e.getPreloadMetaByVid(null==i?void 0:i.awemeId),d=aQ({abtestData:l,enableSr:o}),u=(null==r?void 0:r.vtype)||(null===(a=ae.Z.getSuitableBitrate(t,n,d,0))||void 0===a?void 0:a.vtype),s=t.filter(e=>(null==e?void 0:e.vtype)===u)||[];return{vtype:u,pureVtypeList:s}}return{vtype:r[0],pureVtypeList:t}},a3=e=>e===at.l0.DASH,a6=e=>{let{url:t="",target:i}=e,l=t,[o,n]=t.split("?");try{if(t.includes("/aweme/v1/play")&&n){let e=(0,S.parse)(n);l=`${o}?${(0,S.stringify)((0,E._)({},e,(0,ai.F)({target:i})))}`}}catch(e){}return l},a5={},a4=e=>{var t,i,l,o,n,r,a,d,u,s,c,v,f,m,p,_,h,y,w,x,I,b,S,T,k,L,A,R,N,P,M,j,D,F,V,O,B,U,H;let W;let{awemeInfo:z,abtestData:G,userselection:Z,filter264InMix:q=!1,enableSr:K,enableDash:$=!0,disableBitRateFilter:Y=!1}=e,Q=eX()(z);if((null===(t=C.Le.getConfig(C.gI.AbtestData))||void 0===t?void 0:t.longtask)===2&&a5[null==Q?void 0:Q.awemeId]&&(null===(i=a5[null==Q?void 0:Q.awemeId])||void 0===i?void 0:i.userselection)===Z&&(null===(l=a5[null==Q?void 0:Q.awemeId])||void 0===l?void 0:l.enableSr)===K&&(null===(o=a5[null==Q?void 0:Q.awemeId])||void 0===o?void 0:o.enableDash)===$&&(null===(n=a5[null==Q?void 0:Q.awemeId])||void 0===n?void 0:n.disableBitRateFilter)===Y)return null===(T=a5[null==Q?void 0:Q.awemeId])||void 0===T?void 0:T.result;(null===(r=C.Le.getConfig(C.gI.RefetchAwemeInfo))||void 0===r?void 0:r[null==z?void 0:z.awemeId])&&(Q=eX()(C.Le.getConfig(C.gI.RefetchAwemeInfo)[null==z?void 0:z.awemeId]));let{video:X}=Q||{},{bitRateList:J=[],bitRateAudioList:ee=[]}=X||{},et=null==Q?void 0:null===(a=Q.video)||void 0===a?void 0:a.playAddr,ei=J.filter(e=>1!==e.manualOnly);(null==G?void 0:G.manualFilter)&&(ei=Z||Y?J:J.filter(e=>1!==e.manualOnly));let el=[];if(Array.isArray(et)&&(el=et.map(e=>({src:a6({url:e.src,target:null==Q?void 0:Q.awemeId})}))),null==Q?void 0:null===(d=Q.video)||void 0===d?void 0:d.playApi){let e={src:a6({url:null==Q?void 0:null===(k=Q.video)||void 0===k?void 0:k.playApi,target:null==Q?void 0:Q.awemeId})};el=[...el,e],W={src:`${e.src}&downgrade_264=1`}}let eo=am(a1(ei,G),G,Q,"h264",Z,!1,Y),en={},er={},ea=$&&(0,a_.yf)({abtestData:G,awemeInfo:Q});if(nq({awemeInfo:Q,bitRateList:ei,abtestData:G})){let e=am(null==ei?void 0:ei.filter(e=>1===e.isH265),G,Q,"h265",Z,ea,Y);el=[...Q.video.playAddrH265,{src:null==Q?void 0:null===(L=Q.video)||void 0===L?void 0:L.playApiH265}];let t=ay(G);if(t.isBan1080){e=e.filter(e=>1!==e.definition);let t=eo.find(e=>1===e.definition);t&&e.push(t)}if(t.isBan720){e=e.filter(e=>2!==e.definition);let t=eo.find(e=>2===e.definition);t&&e.push(t)}let{vtype:i,pureVtypeList:l}=a2({mixVtypeList:e,awemeInfo:Q,abtestData:G,enableSr:K,userselection:Z});e=[...l],!q&&!a3(i)&&(null==e||e.map(e=>(Array.isArray(e.url)&&W&&e.url.push(W),e))),Object.assign(en,{defaultDefinition:(null==e?void 0:null===(A=e[0])||void 0===A?void 0:A.definition)||-1,defaultBitrate:(null==e?void 0:null===(R=e[0])||void 0===R?void 0:R.bitrate)||"",codecType:"h265",definition:{list:(null==Q?void 0:Q.awemeType)===g.e.Note?[]:e}})}else if(nZ({awemeInfo:Q,abtestData:G})){let e=am(null==ei?void 0:ei.filter(e=>1===e.isH265),G,Q,"h265",Z,!1,Y);el=[...Q.video.playAddrH265,{src:null==Q?void 0:null===(N=Q.video)||void 0===N?void 0:N.playApiH265}],Object.assign(en,{H264DefinitionList:eo,codecType:"h265",mediaType:"xg-video",defaultDefinition:(null==e?void 0:null===(P=e[0])||void 0===P?void 0:P.definition)||-1,defaultBitrate:(null==e?void 0:null===(M=e[0])||void 0===M?void 0:M.bitrate)||"",definition:{list:(null==Q?void 0:Q.awemeType)===g.e.Note?[]:e},initCodecType:"h265soft"})}else if(nU({awemeInfo:Q,abtestData:G})){let e;let t=am(null==ei?void 0:ei.filter(e=>2===e.isH265),G,Q,"h266",Z,!1,Y);if(3===t.length){let i=am(null==ei?void 0:ei.filter(e=>1===e.isH265),G,Q,"h265",Z,ea,Y),l=i.find(e=>e.gearName.includes("adapt_lowest_1080_1")),o=i.find(e=>e.gearName.includes("adapt_lowest_1440_1")),n=i.find(e=>e.gearName.includes("adapt_lowest_4_1"));if(l||o||n){let i=a2({mixVtypeList:[...t,l,o,n].filter(e=>e),awemeInfo:Q,abtestData:G,enableSr:K,userselection:Z});e=null==i?void 0:i.vtype,t=null==i?void 0:i.pureVtypeList}}if(!q&&!a3(e)){let e={h264:"",h265:""};if(null==Q?void 0:null===(F=Q.video)||void 0===F?void 0:F.playApiH265){let t=a6({url:null==Q?void 0:null===(O=Q.video)||void 0===O?void 0:O.playApiH265,target:null==Q?void 0:Q.awemeId});e.h265=`${t}&is_h265=1`}if(null==Q?void 0:null===(V=Q.video)||void 0===V?void 0:V.playApi){let t=a6({url:null==Q?void 0:null===(B=Q.video)||void 0===B?void 0:B.playApi,target:null==Q?void 0:Q.awemeId});e.h264=`${t}&is_h264=1`}null==t||t.map(t=>(Array.isArray(t.url)&&(e.h265&&t.url.push({src:e.h265}),e.h264&&t.url.push({src:e.h264})),t))}Object.assign(er,{H264DefinitionList:eo,codecType:"h266",mediaType:"video",defaultDefinition:(null==t?void 0:null===(j=t[0])||void 0===j?void 0:j.definition)||-1,defaultBitrate:(null==t?void 0:null===(D=t[0])||void 0===D?void 0:D.bitrate)||"",definition:{list:(null==Q?void 0:Q.awemeType)===g.e.Note?[]:t}})}else if(nK({awemeInfo:Q})){let e=am(null==ei?void 0:ei.filter(e=>1===e.isH265),G,Q,"h265",Z,ea,Y),{vtype:t,pureVtypeList:i}=a2({mixVtypeList:e,awemeInfo:Q,abtestData:G,enableSr:K,userselection:Z});e=[...i],!q&&!a3(t)&&(null==e||e.map(e=>(Array.isArray(e.url)&&W&&e.url.push(W),e))),Object.assign(en,{H264DefinitionList:eo,codecType:"h265",mediaType:"video",defaultDefinition:(null==e?void 0:null===(U=e[0])||void 0===U?void 0:U.definition)||-1,defaultBitrate:(null==e?void 0:null===(H=e[0])||void 0===H?void 0:H.bitrate)||"",definition:{list:(null==Q?void 0:Q.awemeType)===g.e.Note?[]:e}})}let ed=Y?{}:aC({awemeInfo:Q,H264List:eo,H265List:null==en?void 0:null===(u=en.definition)||void 0===u?void 0:u.list,H266List:null==er?void 0:null===(s=er.definition)||void 0===s?void 0:s.list,abtestData:G,userselection:Z}),eu=(0,E._)({poster:null==Q?void 0:null===(c=Q.video)||void 0===c?void 0:c.cover,size:(null==Q?void 0:null===(v=Q.video)||void 0===v?void 0:v.dataSize)||0,uri:null==Q?void 0:null===(f=Q.video)||void 0===f?void 0:f.uri,vid:null==Q?void 0:Q.awemeId,authorId:null==Q?void 0:null===(m=Q.authorInfo)||void 0===m?void 0:m.uid,videoWidth:null==Q?void 0:null===(p=Q.video)||void 0===p?void 0:p.width,videHeight:null==Q?void 0:null===(_=Q.video)||void 0===_?void 0:_.height,defaultDefinition:(null==eo?void 0:null===(h=eo[0])||void 0===h?void 0:h.definition)||-1,defaultBitrate:(null==eo?void 0:null===(y=eo[0])||void 0===y?void 0:y.bitrate)||"",duration:(null==Q?void 0:null===(w=Q.video)||void 0===w?void 0:w.duration)/1e3||0,vtype:(null==Q?void 0:Q.awemeType)===g.e.Note?"MP3":"MP4",bizType:(null==Q?void 0:Q.isAds)?1:0,definition:{list:eo},bitrate:Math.floor((null==Q?void 0:null===(x=Q.video)||void 0===x?void 0:x.dataSize)*8/((null==Q?void 0:null===(I=Q.video)||void 0===I?void 0:I.duration)/1e3))||0,userSelectDefinition:Z,codecType:"h264",mediaType:"video",focusUserDefinition:!0,DASHPlugin:(0,a_.qs)(G),url:el,downgradeUrl:el},en,er,ed),es=null==eu?void 0:null===(b=eu.definition)||void 0===b?void 0:b.list;if(null==es?void 0:null===(S=es.find)||void 0===S?void 0:S.call(es,e=>a3(null==e?void 0:e.vtype))){let e=ap({audioList:ee,abtestData:G});eu.definition.list=[...es||[],...e||[]]}return a5[null==Q?void 0:Q.awemeId]={userselection:Z,enableSr:K,enableDash:$,disableBitRateFilter:Y,result:eu},eu},a8=e=>{let{isActive:t,awemeInfo:i,abtestData:l}=e,o=(0,tr.n)(),n=(0,f.useRef)(i||null);return(0,f.useEffect)(()=>{var e,r,a,d,u,s,c,v,f,m,p,_;if(o&&i&&n.current&&(null==i?void 0:i.awemeId)!==(null===(e=n.current)||void 0===e?void 0:e.awemeId)){!t&&o.pause();let e=Object.assign(aX({awemeInfo:i,abtestData:l}),a4({awemeInfo:i,abtestData:l,userselection:null===(r=(0,lJ.G)(R.SessionStorageKeys.manualSwitch))||void 0===r?void 0:r.gearType}));(0,a_.Zf)({config:e}),(0,rE.LX)({config:e,awemeInfo:i,abtestData:l}),(0,ol.Ni)(i)&&(e.secretKey=null==i?void 0:null===(m=i.video)||void 0===m?void 0:null===(f=m.bitRateList)||void 0===f?void 0:null===(v=f[0])||void 0===v?void 0:v.playerAccessKey),(null==e?void 0:null===(a=e.plugins)||void 0===a?void 0:a.includes(r7.default))?(o.unRegisterPlugin(r9.default.pluginName,!0),!(null==o?void 0:null===(p=o.plugins)||void 0===p?void 0:p.dashplugin)&&o.registerPlugin(r7.default)):(null==e?void 0:null===(d=e.plugins)||void 0===d?void 0:d.includes(r9.default))?(o.unRegisterPlugin(r7.default.pluginName,!0),!(null==o?void 0:null===(_=o.plugins)||void 0===_?void 0:_.mp4encryptplayer)&&o.registerPlugin(r9.default)):(o.unRegisterPlugin(r7.default.pluginName,!0),o.unRegisterPlugin(r9.default.pluginName,!0)),null===(u=o.playNext)||void 0===u||u.call(o,(0,E._)((0,Q._)((0,E._)({},e),{autoplay:t}),null==e?void 0:e.mp4encryptplayer)),null===(c=o.getPlugin)||void 0===c||null===(s=c.call(o,"PlayClaritySettingPlugin"))||void 0===s||s.updateConfig({awemeInfo:i}),o.crossOrigin=aZ(i)?"use-credentials":"anonymous"}n.current=i},[o,t,i.awemeId,l]),null},a7=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"VideoSrcChange",Slardar:t,children:(0,v.jsx)(a8,(0,E._)({},e))})},a9=e=>{let{player:t,isActive:i}=e;(0,f.useEffect)(()=>{if(t&&i){let e=()=>{C.Le.setConfig(C.gI.VideoHasPrevent,!0)};return t.on("autoplay_was_prevented",e),()=>{t.off("autoplay_was_prevented",e)}}},[t,i])};var de=i("257858");let dt=e=>{var t;let{player:i,isActive:l,awemeInfo:o,abtestData:n,startTime:r}=e;i.isPlaying=!1,i.resetState();let a=a4({awemeInfo:o,abtestData:n,userselection:null===(t=(0,lJ.G)(R.SessionStorageKeys.manualSwitch))||void 0===t?void 0:t.gearType});return!!a.url.find(e=>!!e.src)&&(i.setConfig((0,E._)({autoplay:l},a)),l?(i.config.startTime=r,i.play()):i.start(),!0)},di=()=>{ep.logInstance.sendLog("videoRetryError",{type:"retry_success"})},dl=()=>{ep.logInstance.sendLog("videoRetryError",{type:"retry_error"})},dn=e=>{e.off("error",dl),e.off("loadeddata",di)},dr=e=>{dn(e),e.once("error",dl),e.once("loadeddata",di)},da=e=>{let{player:t,isActive:i,awemeInfo:l,deleteCurrentSwiper:o,abtestData:n}=e,r=(0,f.useRef)(i);r.current=i;let a=(0,f.useRef)(null==l?void 0:l.awemeId);a.current=null==l?void 0:l.awemeId;let d=(0,f.useRef)(!1),u=(0,f.useRef)(!1),s=(0,f.useRef)(!1),c=(0,f.useRef)(0),v=(0,eJ.Z)(async(e,i,l)=>{if((i||Date.now()-c.current>6e4)&&(u.current=!1,s.current=!1),u.current&&s.current)return ep.logInstance.sendLog("videoRetryError",{type:"real_blank_screen",aweme_id:e}),!1;if(c.current=Date.now(),t.removeClass(ev.STATE_CLASS.ERROR),t.addClass(ev.STATE_CLASS.LOADING),dr(t),u.current||6===l)u.current=!0;else{var v;if(u.current=!0,t.dash)return t.retry(),!0;let i=t.currentSrc&&1===(0,rH.q)(t.currentSrc),l=t.currentTime,o=t.config.url instanceof Array?null===(v=t.config.url)||void 0===v?void 0:v.find(e=>{var t;return null==e?void 0:null===(t=e.src)||void 0===t?void 0:t.includes("www.douyin.com")}):null;return!o&&ep.logInstance.sendLog("videoRetryError",{type:"retry_base_url_miss",aweme_id:e}),i&&o?(t.src=o.src,t.load(),t.currentTime=l):t.retry(),!0}ep.logInstance.sendLog("videoRetryError",{type:"retry_native",aweme_id:e});try{s.current=!0;let i=t.currentTime,l=await (0,rJ.m_)({awemeId:e,originType:de.F.PlayerRetry});if(!d.current&&a.current===e){let a=null;if(0===l.statusCode&&l.detail){if(a=l.detail,!dt({player:t,awemeInfo:l.detail,isActive:r.current,abtestData:n,startTime:i}))return t.addClass(ev.STATE_CLASS.ERROR),t.removeClass(ev.STATE_CLASS.LOADING),!1;ep.logInstance.sendLog("videoRetryError",{type:"retry_api_aweme_ok",aweme_id:e})}else{if(!l.isUnknownAweme)return t.addClass(ev.STATE_CLASS.ERROR),t.removeClass(ev.STATE_CLASS.LOADING),ep.logInstance.sendLog("videoRetryError",{type:"retry_api_statuscode_error",aweme_id:e}),!1;null==o||o(),r.current&&M.F.info("该视频已被删除"),ep.logInstance.sendLog("videoRetryError",{type:"retry_api_aweme_404",aweme_id:e})}C.Le.setConfig(C.gI.RefetchAwemeInfo,{[e]:a})}}catch(i){return t.addClass(ev.STATE_CLASS.ERROR),t.removeClass(ev.STATE_CLASS.LOADING),ep.logInstance.sendLog("videoRetryError",{type:"retry_api_catch",aweme_id:e}),!1}return!0});(0,f.useEffect)(()=>(d.current=!1,()=>{d.current=!0}),[]);let m=e=>{var i,o,n,r,a,d;let{isH265:u}=(0,rb.Z)({awemeInfo:l,player:t}),s=(0,Q._)((0,E._)({urlParamList:["previous_page","tab_name"]},(0,rx.Z)(t)),{group_id:l.groupId,aweme_type:l.awemeType,player_type:"xgplayer",player_version:t.version,errorCode:(null==e?void 0:null===(i=e.mediaError)||void 0===i?void 0:i.code)||(null==e?void 0:e.errorCode)||"",errorDesc:(null==e?void 0:null===(o=e.mediaError)||void 0===o?void 0:o.message)||(null==e?void 0:e.errorMessage)||"",is_cdn_expired:1===(0,rH.q)(t.currentSrc)?1:0,vduration:null==l?void 0:null===(n=l.video)||void 0===n?void 0:n.duration,is_video_support:Number((0,rU.k)().isSupport),is_bytevc1:u,log_pb:null==l?void 0:l.logPb,video_play_mode:(null===(r=V.Q.getItem({sKey:R.CookieKeys.VideoFilterMemoSelect,refresh:!1}))||void 0===r?void 0:r.type)===1?"landscape":"all",is_landscape:(null==l?void 0:null===(a=l.video)||void 0===a?void 0:a.width)>(null==l?void 0:null===(d=l.video)||void 0===d?void 0:d.height)?1:0});ep.logInstance.sendLog("videoPlayError",s)};(0,f.useEffect)(()=>{var e;t&&(null==l?void 0:null===(e=l.video)||void 0===e?void 0:e.playApi)&&(t.usePluginHooks("error","errorHandler",(e,t)=>Promise.resolve().then(async()=>{let e=await v(l.awemeId,!1,null==t?void 0:t.errorCode);return!e&&m(t),!e})),t.usePluginHooks("error","errorRetry",()=>(v(l.awemeId,!0),ep.logInstance.sendLog("videoRetryError",{type:"user_click",aweme_id:null==l?void 0:l.awemeId}),!1)))},[t,l,n]),(0,f.useEffect)(()=>{i&&t&&t.isError&&l&&v(l.awemeId,!0)},[n,i,t,l,v]),(0,f.useEffect)(()=>()=>t&&t.off&&dn(t),[t])};var dd=i("458343");let du=e=>{var t;let{player:i,state:l}=e;tc()(i,"config.autoplay",l),tc()(i,"autoplay",l),tc()(i,"preloadActive",l),null===(t=ef().instManager)||void 0===t||t.setActive(i.playerId,l)},ds=e=>{var t,i,l,o,n,r;let{player:a,gearType:d,config:u,awemeInfo:s}=e;a.config.userSelectDefinition=d,a.config.definition=null==u?void 0:u.definition,a.config.DASHPlugin=null==u?void 0:u.DASHPlugin;try{(null==u?void 0:null===(l=u.plugins)||void 0===l?void 0:l.includes(r7.default))?(a.unRegisterPlugin(r9.default.pluginName,!0),!(null==a?void 0:null===(n=a.plugins)||void 0===n?void 0:n.dashplugin)&&a.registerPlugin(r7.default)):(null==u?void 0:null===(o=u.plugins)||void 0===o?void 0:o.includes(r9.default))?(a.unRegisterPlugin(r7.default.pluginName,!0),!(null==a?void 0:null===(r=a.plugins)||void 0===r?void 0:r.mp4encryptplayer)&&a.registerPlugin(r9.default)):(a.unRegisterPlugin(r7.default.pluginName,!0),a.unRegisterPlugin(r9.default.pluginName,!0))}catch(e){}null===(i=a.getPlugin)||void 0===i||null===(t=i.call(a,"PlayClaritySettingPlugin"))||void 0===t||t.updateConfig({awemeInfo:s})},dc=e=>{let{player:t}=e;du({player:t,state:!1}),t.pause()},dv=e=>{var t;let{player:i,config:l,awemeInfo:o}=e;du({player:i,state:!0});let n=null===(t=(0,lJ.G)(R.SessionStorageKeys.manualSwitch))||void 0===t?void 0:t.gearType,r=e=>{var t,l,o;let n=tG.s.getPlayerScene(i.playerId)===em.lT.Modal||(null==i?void 0:null===(t=i.config)||void 0===t?void 0:t.isModal),r=tG.s.getPlayersByScene(em.lT.Modal).length>0,a=!!(null===(l=(0,S.parse)(location.search))||void 0===l?void 0:l.webRid);if((!!n||!r)&&!a)C.Le.setConfig(C.gI.StartPlayTime,Date.now()),null==i||null===(o=i[e])||void 0===o||o.call(i,null)};i.isPlaying?(i.config.userSelectDefinition!==n&&ds({player:i,gearType:n,config:l,awemeInfo:o}),i.resetState(),i.isPlaying=!1,r("start")):i.config.userSelectDefinition!==n?(ds({player:i,gearType:n,config:l,awemeInfo:o}),i.resetState(),i.isPlaying=!1,r("start")):(r("play"),i.emit("immediatePlay"))},df=e=>{let{player:t,isActive:i,awemeInfo:l,config:o,abtestData:n,currentIndex:r}=e,a=(0,f.useRef)(!1),d=()=>{t.pause()};(0,f.useEffect)(()=>{if(t){if(t.__isInlinePlayer&&i&&!t.isBlockedInlinePlayerRestart&&(t.isPlaying=!1,t.isBlockedInlinePlayerRestart=!0),i)dv({player:t,config:o,awemeInfo:l});else if(!i)return t.__isInlinePlayer&&(a.current=!0),dc({player:t}),t.on(ev.Events.TIME_UPDATE,d),()=>{t.off(ev.Events.TIME_UPDATE,d)}}},[t,i]),(0,f.useEffect)(()=>{let e=null;if(t&&i){var l;e=window.player,window.player=t;let i=tG.s.getPlayersByScene(em.lT.Modal).length>0&&tG.s.getPlayerScene(t.playerId)!==em.lT.Modal;(null===(l=(0,S.parse)(location.search))||void 0===l?void 0:l.webRid)&&(t.pause(),t.config.autoplay=!1),!i&&(null==t||t.setUserActive(!0));let o=eb.listen(eb.EVENT.videoPause,()=>{t.pause(),t.config.autoplay=!1});return()=>{e&&(window.player=e),o()}}},[t,i]),(0,f.useEffect)(()=>{let e=()=>{t&&i&&tG.s.getPlayersByScene(em.lT.Modal).length>0&&tG.s.getPlayerScene(t.playerId)!==em.lT.Modal&&(t.pause(),t.config.autoplay=!1,t.autoplay=!1)};if(t&&i)return t.once("play",e),()=>{t.off("play",e)}},[t,i]),(0,dd.w)(()=>{if(t&&i){t.pause();let e=()=>{t.pause()};return t.on(ev.Events.PLAY,e),t.on(ev.Events.TIME_UPDATE,e),()=>{t.off(ev.Events.PLAY,e),t.off(ev.Events.TIME_UPDATE,e)}}},[i,t])},dm=e=>{let{player:t,isActive:i}=e;(0,f.useEffect)(()=>{if(t&&t.root.getElementsByClassName("xgplayer-start")[0]&&(t.root.getElementsByClassName("xgplayer-start")[0].className=`${t.root.getElementsByClassName("xgplayer-start")[0].className} douyinHide`,i)){let e=setTimeout(()=>{t.root.getElementsByClassName("xgplayer-start")[0]&&(t.root.getElementsByClassName("xgplayer-start")[0].className=t.root.getElementsByClassName("xgplayer-start")[0].className.split(" ").filter(e=>"douyinHide"!==e).join(" "))},1e3),i=()=>{clearTimeout(e),t.root.getElementsByClassName("xgplayer-start")[0]&&(t.root.getElementsByClassName("xgplayer-start")[0].className=t.root.getElementsByClassName("xgplayer-start")[0].className.split(" ").filter(e=>"douyinHide"!==e).join(" "))};return t.once(ev.Events.AUTOPLAY_STARTED,i),()=>{t.off(ev.Events.AUTOPLAY_STARTED,i),t.root.getElementsByClassName("xgplayer-start")[0]&&(t.root.getElementsByClassName("xgplayer-start")[0].className=`${t.root.getElementsByClassName("xgplayer-start")[0].className} douyinHide`)}}},[t,i])};var dp=i("138871"),d_=i.n(dp),dg=i("899731"),dh=i.n(dg),dy=i("298432"),dw=i("399629");let dx=()=>{let[e,t]=(0,f.useState)(null==n||n);return(0,f.useEffect)(()=>{void 0===n&&(async()=>{let{enable:e=!0}=await tf.get({key:tm.TccKey.PhoneResumeConfig,defaultValue:tm.TCC_DEFAULT_VALUE_MAP.get(tm.TccKey.PhoneResumeConfig)})||{};n=e,t(e)})()},[]),e},dC=null,dI=async()=>{if(dC)return dC;try{let{data:e=null}=await (0,dw.Dn)();return null!=(dC=e)?dC:{}}catch(e){return{}}},db=null,dE=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[i,l]=(0,f.useState)({});return(0,f.useEffect)(()=>{t&&(async()=>{null===db&&(db=dI());let t=await db;l(null==t?void 0:t[e])})()},[t,e]),i},dS=(e,t)=>{let i=[g.e.Normal,g.e.XgVideo].includes(null==e?void 0:e.awemeType),l=t.currentTime>=3&&t.duration-t.currentTime>=30;return i&&l},dT=e=>{var t,i;let{player:l,isActive:o,awemeInfo:n,scene:r,userInfo:a}=e,d=dx(),u=dE("multi_device_resume",null==a?void 0:a.isLogin),s=d&&(null==u?void 0:u.enable)===1&&(null==u?void 0:u.pc_auto_record)===1;(0,f.useEffect)(()=>{var e,t;if(l&&(null==a?void 0:null===(e=a.info)||void 0===e?void 0:e.uid)&&(null==n?void 0:null===(t=n.continationInfo)||void 0===t?void 0:t.continationVideoAlreadyConsume)===!1){let{fwsExample:e}=C.Le.getConfig(C.gI.fwsExample)||{},t=e=>{var t,i,l,o,r;let d={app_id:aS.APP_ID,message_type:new(dh())(dy.Cs.ReplyConsume||"0"),user_id:new(dh())(a.info.uid||"0"),device_id:new(dh())((null===(t=(0,F.Es)())||void 0===t?void 0:t.user_unique_id)||"0"),to_device_type:new(dh())(dy.Yi.Phone||"0"),to_device_id:new(dh())((null==n?void 0:null===(i=n.continationInfo)||void 0===i?void 0:i.fromDeviceId)||"0"),continuation_info:{ItemId:new(dh())(null==n?void 0:n.awemeId),RecordType:new(dh())(null==n?void 0:null===(l=n.continationInfo)||void 0===l?void 0:l.recordType),EpisodeId:new(dh())((null==n?void 0:null===(r=n.lvideoBrief)||void 0===r?void 0:null===(o=r.episodeInfo)||void 0===o?void 0:o.episodeId)||"0")}},u=d_().stringify(d);e.send(u,{service:dy.oU.Multicast,method:10}),tc()(n,"continationInfo.continationVideoAlreadyConsume",!0)};if(e){let i=()=>{t(e)};if(!l.isPlaying)return l.once(ev.Events.CANPLAY,i),()=>{l.off(ev.Events.CANPLAY,i)};i()}else{let e=null,i=eb.listen(eb.EVENT.fwsExampleInit,i=>{l.isPlaying?t(i):(e=()=>{t(i)},l.once(ev.Events.CANPLAY,e))});return()=>{i(),l.off(ev.Events.CANPLAY,e)}}}},[l,n]),(0,f.useEffect)(()=>{var e;if(l&&o&&(null==a?void 0:null===(e=a.info)||void 0===e?void 0:e.uid))return eb.listen(eb.EVENT.sendPullMessage,e=>{if(l.isUserActive&&dS(n,l)){var t,i,o,r,d,u,s;let{toDeviceId:c,toDeviceType:v}=e||{},{fwsExample:f}=C.Le.getConfig(C.gI.fwsExample)||{},m={app_id:new(dh())("6383"),message_type:2,user_id:new(dh())((null==a?void 0:null===(t=a.info)||void 0===t?void 0:t.uid)||"0"),device_id:new(dh())((null===(i=(0,F.Es)())||void 0===i?void 0:i.user_unique_id)||"0"),to_device_type:new(dh())(v),to_device_id:new(dh())(c),continuation_info:{UserId:new(dh())((null==a?void 0:null===(o=a.info)||void 0===o?void 0:o.uid)||"0"),ItemId:new(dh())((null==n?void 0:n.awemeId)||"0"),ItemType:new(dh())((null==n?void 0:n.awemeType)||"0"),PlayTime:Math.floor(l.currentTime),Cover:(null==n?void 0:null===(r=n.video)||void 0===r?void 0:r.cover)||"",FromDeviceId:new(dh())((null===(d=(0,F.Es)())||void 0===d?void 0:d.user_unique_id)||"0"),FromDeviceType:Number(dy.Yi.PC),RecordType:Number(dy.ns.auto),EpisodeId:new(dh())((null==n?void 0:null===(s=n.lvideoBrief)||void 0===s?void 0:null===(u=s.episodeInfo)||void 0===u?void 0:u.episodeId)||"0")}},p=d_().stringify(m);f.send(p,{service:dy.oU.Multicast,method:10})}})},[l,o,null==a?void 0:null===(t=a.info)||void 0===t?void 0:t.uid]),(0,f.useEffect)(()=>{var e;if(l&&o&&[dy.b.Default,dy.b.Open].includes(null==a?void 0:null===(e=a.info)||void 0===e?void 0:e.continuationState)&&s){let e=()=>{"hidden"===document.visibilityState&&l.isUserActive&&dS(n,l)&&(0,dw.wU)({item_id:null==n?void 0:n.awemeId,item_type:null==n?void 0:n.awemeType,play_progress:Math.floor(l.currentTime),to_client:Number(dy.Yi.Phone),record_type:Number(dy.ns.auto)})},t=()=>{l.isUserActive&&dS(n,l)&&(0,dw.wU)({item_id:null==n?void 0:n.awemeId,item_type:null==n?void 0:n.awemeType,play_progress:Math.floor(l.currentTime),to_client:Number(dy.Yi.Phone),record_type:Number(dy.ns.auto)})};return window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",e),()=>{window.removeEventListener("beforeunload",t),document.removeEventListener("visibilitychange",e)}}},[l,o,null==a?void 0:null===(i=a.info)||void 0===i?void 0:i.uid,s])};var dk=i("762641");let dL=e=>{let{awemeInfo:t,abtestData:i}=e;return(0,f.useCallback)(()=>{var e,l,o;let{control:n,nextBufferMin:r,nextStartPos:a,nextStartBuffer:d,scale:u,scaleAd:s}=null!==(o=null==i?void 0:i.nextBufferConfig)&&void 0!==o?o:{},c={control:n,nextBufferMin:r,nextStartPos:a,nextStartBuffer:d,scale:(null==t?void 0:t.isAds)&&s?s:u};null===(l=es.ZP.instManager)||void 0===l||null===(e=l.updateStrategyConfig)||void 0===e||e.call(l,dk.l,(0,E._)({},c||{}))},[t,i])},dA=e=>{let{player:t,isNext:i,awemeInfo:l,abtestData:o}=e,n=dL({awemeInfo:l,abtestData:o});(0,f.useEffect)(()=>{if(t&&i){var e;null===(e=ef().instManager)||void 0===e||e.setNext(null==t?void 0:t.playerId,!0),window.nextPlayer=t,t.isMultiple=1,n()}},[t,i])};var dR=new ez.h({hover_related_video_icon:{eventName:"hover_related_video_icon",params:{enter_from:""}},h265DownInfo:{eventName:"h265_down_info",params:{type:""}},relatedVideoClick:{eventName:"related_video_click",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:0}},bottomBarShow:{eventName:"bottom_bar_show",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:"",player_display_mode:""}},bottomBarClick:{eventName:"bottom_bar_click",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:"",action:"open",player_display_mode:""}},videoSwitchUrl:{eventName:"video_switch_url",params:{aweme_id:"",vduration:0,current_position:0,vtype:"",buffer:0,is_visible:0,host:""}},refreshNoMatchVid:{eventName:"refresh_no_match_vid",params:{vid:""}}});let dN=e=>{let{player:t,awemeInfo:i,abtestData:l}=e,o=nh();(0,f.useEffect)(()=>{var e;let t=()=>{let e=null==i?void 0:i.isAds;if(window.TTCommon){var t,l;null===(t=(l=window.TTCommon).execute)||void 0===t||t.call(l,"applyConfig",e?'{"gpu_use_single_video_decoder_texture":1}':'{"gpu_use_single_video_decoder_texture":0}')}};return null==o||null===(e=o.on)||void 0===e||e.call(o,oi.PlayerBeforeCreate,t),()=>{var e;null==o||null===(e=o.off)||void 0===e||e.call(o,oi.PlayerBeforeCreate,t)}},[i,l]),(0,f.useEffect)(()=>{if((null==l?void 0:l.checkUrlTime)&&t){let e=async e=>{var o,n,r,a,d,u,s;if((null==l?void 0:l.checkUrlTime)===2&&(null==i?void 0:null===(o=i.video)||void 0===o?void 0:o.duration)>=6e4||"MP4_MSE"===t.vtype||"MP4_MSE_SOFT"===t.vtype||0===t.currentTime)return;let{bitrate:c,gearName:v}=null!==(n=t.curDefinition)&&void 0!==n?n:{},f=await (0,rJ.m_)({awemeId:i.awemeId,originType:de.F.PlayerRetry});if((null==f?void 0:f.statusCode)===0&&(null==f?void 0:f.detail)){let e=(null!==(d=null==f?void 0:null===(a=f.detail)||void 0===a?void 0:null===(r=a.video)||void 0===r?void 0:r.bitRateList)&&void 0!==d?d:[]).find(e=>e.bitRate===c&&e.gearName===v);if(e){let l=[].concat(e.playAddr).concat([{src:e.playApi}]);null===(u=t.switchURL)||void 0===u||u.call(t,{url:l},{action:"UPDATE_URL"}),dR.sendLog("videoSwitchUrl",{aweme_id:null==i?void 0:i.awemeId,vduration:null==i?void 0:null===(s=i.video)||void 0===s?void 0:s.duration,current_position:(null==t?void 0:t.currentTime)*1e3,vtype:null==t?void 0:t.vtype,buffer:(0,rp._)(t),is_visible:Number(!document.hidden)})}}};return t.on("MEDIA_EXPIRED",e),()=>{t.off("MEDIA_EXPIRED",e)}}},[t,i,l])},dP=e=>{let t=(0,tr.n)(),{isActive:i,awemeInfo:l,deleteCurrentSwiper:o,config:n,abtestData:r,scene:a,userInfo:d,isNext:u,currentIndex:s}=e;return a9({player:t,isActive:i,awemeInfo:l}),da({player:t,isActive:i,awemeInfo:l,deleteCurrentSwiper:o,abtestData:r}),df({player:t,isActive:i,awemeInfo:l,config:n,abtestData:r,currentIndex:s}),dm({player:t,isActive:i}),dT({player:t,isActive:i,awemeInfo:l,scene:a,userInfo:d}),dA({player:t,isNext:u,awemeInfo:l,abtestData:r}),dN({player:t,awemeInfo:l,abtestData:r}),null};var dM=i("23902"),dj=i.n(dM),dD=i("112501");let dF=()=>void 0!==r?r:((0,dD.Gb)()&&(r=1),r),dV=e=>{var t,i,l,o,n;let{abtestData:r,awemeInfo:a,isInnerFeed:d,isModalVideo:u,modalEnterFrom:s}=e;if(!(null==r?void 0:null===(t=r.SR)||void 0===t?void 0:t.isOpen)||(null==a?void 0:a.awemeType)!==g.e.Normal||(0,nO.G)()<(null!==(l=null==r?void 0:null===(i=r.SR)||void 0===i?void 0:i.effectOrder)&&void 0!==l?l:3)||(0,ol.Ni)(a))return!1;if((0,U.DT)()){if(!(0,oe.b4)()||!(0,oe._u)())return!1}else{if((0,B.$o)(R.LocalStorageKeys.srDegradePermanently)||!(0,B.$o)(R.LocalStorageKeys.PowerEfficient))return!1;if(!dF()||(0,U.tq)())return(0,B.qQ)(R.LocalStorageKeys.srDegradePermanently,1),!1;if((null==a?void 0:a.isPrivate)||u&&![eh.a.WaterFall,eh.a.UserCollection,eh.a.UserLike,eh.a.UserPost,eh.a.UserRecord].includes(s)||d||!(null==r?void 0:null===(n=r.SR)||void 0===n?void 0:null===(o=n.applyPage)||void 0===o?void 0:o.includes((0,ie.yW)()))||C.Le.getConfig(C.gI.SrDegrade)||nZ({abtestData:r,awemeInfo:a}))return!1}return!0},dO=[g.e.Normal],dB=e=>{let{isActive:t,abtestData:i,awemeInfo:l,isInnerFeed:o,scene:n}=e||{},r=(0,tr.n)(),a=(0,f.useMemo)(()=>{if(!dj()(i))return(0,rE.hG)({abtestData:i})},[i]),d=(0,f.useCallback)(()=>{var e,t,n;let r=window.playerPreloader,d=C.Le.getConfig(C.gI.PreloadList)||[],u=null===(e=(0,lJ.G)(R.SessionStorageKeys.manualSwitch))||void 0===e?void 0:e.gearType,s=null!==(t=null==a?void 0:a.preloadTime)&&void 0!==t?t:5,c=(null==i?void 0:i.payloadUrl)||(null==i?void 0:i.payloadUrlServer);if((null==d?void 0:d.length)>0){let e=dV({abtestData:i,awemeInfo:l,isInnerFeed:o}),t=d.filter(e=>{var t;return t=e,dO.includes(t.awemeType)}).map((t,l)=>{var o,n,r;let a=a4({awemeInfo:t,abtestData:i,userselection:u,filter264InMix:!0,enableSr:e}),d=null==a?void 0:null===(o=a.definition)||void 0===o?void 0:o.list;c&&!(null==d?void 0:d.length)&&(d=[{url:null==a?void 0:a.url,duration:(null==t?void 0:null===(n=t.video)||void 0===n?void 0:n.duration)/1e3,uri:null==t?void 0:null===(r=t.video)||void 0===r?void 0:r.uri,bitrate:null==a?void 0:a.bitrate,size:null==a?void 0:a.size}]);let v=(null==d?void 0:d.find(e=>(null==e?void 0:e.vtype)==="DASH"))?null==i?void 0:i.stepPreloadDashConfig:null==i?void 0:i.stepPreloadConfig;return{order:l,data:(0,E._)({codecType:null==a?void 0:a.codecType,vid:null==t?void 0:t.awemeId,payload:d,preloadTime:s,vtype:null==a?void 0:a.vtype,bizType:(null==t?void 0:t.isAds)?tA._6.Ad:tA._6.Normal},v)}});null===(n=r.addPreloadList)||void 0===n||n.call(r,t)}},[l,i,a]);return(0,f.useEffect)(()=>{let e=window.playerPreloader;r&&t&&e&&2!==i.longtask&&d()},[r,t,i]),(0,f.useEffect)(()=>{if(2===i.longtask){let e=window.playerPreloader;r&&t&&e&&iJ.p.postTask({task:()=>d()})}},[r,t,i]),(0,f.useEffect)(()=>{let e=window.playerPreloader;if(r&&t&&e){var l,o;let t;let n=()=>{var i,l,o,a;((null==r?void 0:null===(i=r.plugins)||void 0===i?void 0:i.mp4encryptplayer)||(null==r?void 0:null===(l=r.plugins)||void 0===l?void 0:l.dashplugin))&&(null==e||null===(o=e.attachPlayer)||void 0===o||o.call(e,r),null==r||null===(a=r.off)||void 0===a||a.call(r,ev.Events.TIME_UPDATE,n),clearTimeout(t))},a=(0,iM.En)()?null===(l=(0,lv.P)(i))||void 0===l?void 0:l.preloadAttachDelay:null==i?void 0:i.preloadAttachDelay;return a?t=setTimeout(n,a||3e3):null==r||null===(o=r.on)||void 0===o||o.call(r,ev.Events.TIME_UPDATE,n),()=>{var i;clearTimeout(t),null==r||null===(i=r.off)||void 0===i||i.call(r,ev.Events.TIME_UPDATE,n),null==e||e.detachPlayer(r)}}},[t,r,l]),null},dU=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"Preload",Slardar:t,children:(0,v.jsx)(dB,(0,E._)({},e))})},dH=e=>{let{awemeInfo:t,isActive:i,abTestData:l}=e,o=(0,tr.n)(),n=()=>{let e=C.Le.getConfig(C.gI.AwemePcRecRawData);return!e&&(e={videoPrefer:{fsn:[],like:[],halfMin:[],min:[]}},C.Le.setConfig(C.gI.AwemePcRecRawData,e)),e};return(0,f.useEffect)(()=>{if(o){let e=()=>{o.playTimestamp=new Date().getTime()};return null==o||o.on(ev.Events.PLAY,e),()=>o.off(ev.Events.PLAY,e)}},[o]),(0,f.useEffect)(()=>{if(o&&i){let e=()=>{var e;let{fsn:i}=n().videoPrefer;i.filter((e,t)=>t%2==0).includes(null==t?void 0:t.groupId)||i.push(null==t?void 0:t.groupId,null==t?void 0:null===(e=t.authorInfo)||void 0===e?void 0:e.uid),(0,C.xL)(t,o,"fsn")};return null==o||o.on(ev.Events.ENDED,e),()=>null==o?void 0:o.off(ev.Events.ENDED,e)}},[o,i,t]),(0,f.useEffect)(()=>{if(o&&i)return()=>{[3e4,6e4].filter(e=>o.cumulateTime>=e).map(e=>3e4===e?"halfMin":"min").map(e=>{var i;return{field:e,groupId:null==t?void 0:t.groupId,authorId:null==t?void 0:null===(i=t.authorInfo)||void 0===i?void 0:i.uid}}).forEach(e=>{let i=n().videoPrefer[e.field];i.filter((e,t)=>t%2==0).includes(null==t?void 0:t.groupId)||i.push(e.groupId,e.authorId),(0,C.xL)(t,o,e.field)}),o.cumulateTime<2e3&&(0,C.xL)(t,o,"skip"),o.overallPlayTime?o.overallPlayTime+=o.cumulateTime:o.overallPlayTime=o.cumulateTime}},[o,i,t]),null},dW=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"CumulativeTime",Slardar:t,children:(0,v.jsx)(dH,(0,E._)({},e))})},dz=e=>{let{children:t,style:i={},className:l}=e;return(0,v.jsx)("div",{className:p()(nu,null==l?void 0:l.bottom),style:i,children:t})},dG=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"PositionBoxBottom",Slardar:t,children:(0,v.jsx)(dz,(0,E._)({},e))})};var dZ=i("645003"),dq={button:"mpOpSj9v",hashTagSpan:"snaeU6JK",linkHashTag:"J3e5e_LS",userText:"TZ3T8Hae",videoTitleWrapper:"nhAQt83a",videoTitle:"TZk94hHd",brandAd:"bEFEjgzT",adaptive:"BlzFZfGl",expandButton:"s2BjIUer",infoContainer:"iPTEs0tk",pictureStyle:"UmVkCRgg",hide:"OYydsxuz",underTitleTagContainer:"ZezSdRwp",rsBarOpt:"X6UXVnyt",videoTagContainer:"KxVmuuVy",friendIcon:"wxNCuUfE",marginTop:"z8CwPIo1",oneLineText:"bLG_lQ29"},dK=i("824790"),d$=new ez.h({clickTitleAt:{eventName:"click_title_at",params:{to_user_id:"",author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0"}},clickVideoTitle:{eventName:"click_video_title",params:{action:"expand",author_id:"",group_id:"",enter_from:"",log_pb:"",previous_page:"",is_full_screen:"0",player_display_mode:""}},clickTitleHashtag:{eventName:"click_title_hashtag",params:{hashtag:"",author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tag_id:"",status:"",player_display_mode:""}},xiguaAnchorShow:{eventName:"xigua_anchor_show",params:{author_id:"",group_id:""}},xiguaAnchorClick:{eventName:"xigua_anchor_click",params:{author_id:"",group_id:""}},clickAuthorHead:{eventName:"click_author_head",params:{author_id:"",group_id:"",enter_from:"",previous_page:"",is_full_screen:"0",log_pb:"",from_follow_list:"0",from_xigua:0,click_from:"",clarity:"",aweme_type:"",is_auto:1}},trendingShow:{eventName:"trending_show",params:{words_source:"related_search_anchor_v2",enter_from:"",words_num:0,enter_group_id:"",impr_id:""}},trendingWordsClick:{eventName:"trending_words_click",params:{words_source:"title_named_entity",enter_group_id:"",enter_group_type:"",group_id:"",search_position:"",words_content:"",words_position:0,impr_id:""}},trendingWordsShow:{eventName:"trending_words_show",params:{words_source:"title_named_entity",enter_group_id:"",enter_group_type:"",group_id:"",search_position:"",words_content:"",words_position:0,impr_id:""}}});let dY=e=>e<=1440?22:e>=1920?26:.015277777777777777*e,dQ=()=>{let[e,t]=(0,f.useState)(()=>window.innerWidth);return(0,f.useEffect)(()=>{let e=tu()(()=>{t(window.innerWidth)},100,{trailing:!0});return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e},dX=e=>{let t=dQ(),i=dY(t),[l,o]=(0,f.useState)(500),n=Math.floor((l-45-16)/i),r=t>=1920?1:2;return(0,f.useEffect)(()=>{if(C.Le.getConfig(C.gI.AbtestData).reduceRender)return()=>{};let t=window.setTimeout(()=>{var t;let i=(null==e?void 0:e.root)||(null===(t=window.player)||void 0===t?void 0:t.root);o(i&&parseInt(window.getComputedStyle(i,null).height,10)||800)},200);return()=>{window.clearTimeout(t)}},[]),{lineHeight:i,maxLine:n,videoLineCamp:r}};i("954372");var dJ=i("733306"),d0=i("89087"),d1=i.n(d0),d2=i("280839"),d3=i("355192"),d6=i("178016"),d5=i("854979"),d4={actionableText:"VQcg6vyB",twemojiText:"LRgMnWas",userText:"olAv2hxF",hashtagText:"UG3hsf3u",searchText:"JMQ5h4Bt",text:"ix9vMAFg",icon:"E8ncbdjJ",clarity:"WyU6eVhC"};let d8={trendingShow:{eventName:"trending_show",params:{words_source:"title_named_entity",enter_group_id:"",enter_group_type:"",search_position:"",words_position:0,impr_id:""}}};var d7=i("475255");let d9=(0,d7.kv)(),ue=/(\[\S+?\])/g;var ut=f.memo(e=>{let{text:t,imgClassname:i,renderTextWithTag:l}=e,[o,n]=(0,f.useState)(d9);if((0,f.useEffect)(()=>{(async()=>{let{statusCode:e,data:t}=await (0,d7.zk)();0===e&&(d9=t,n(t))})()},[]),!t)return null;let r=t.split(ue).map((e,t)=>{var n;if(!e)return null;if(!o[e])return(0,v.jsx)("span",{children:l?l(e):e},`emoji-text-${t}`);return(0,v.jsx)("img",{className:i,src:null===(n=o[e])||void 0===n?void 0:n.img,alt:e,style:{margin:"0 4px",verticalAlign:"text-bottom"}},`emoji-text-${t}`)});return(0,v.jsx)("span",{children:r})});let ui=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:9,height:9,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{clipRule:"evenodd",d:"M1.2 4.024c0-1.375 1.05-2.426 2.426-2.426 1.217 0 2.269 1.051 2.269 2.426 0 1.218-1.051 2.269-2.27 2.269-1.374 0-2.425-1.051-2.425-2.269zM3.626.398C1.588.398 0 1.987 0 4.024 0 5.96 1.645 7.493 3.626 7.493c.729 0 1.414-.239 1.98-.64l1.57 1.57a.6.6 0 0 0 .848-.85l-1.57-1.57c.402-.565.64-1.25.64-1.979 0-1.98-1.533-3.626-3.468-3.626z"})})));var ul=i("406852"),uo="Q7ijXiTR";i("50013");var un=i("586415");let ur=(e,t)=>{let{pathname:i}=location,l=i.indexOf("/search/");return l>-1?`${i.slice(0,l)}/search/${e}?${t}`:"/"===i?`/root/search/${e}?${t}`:`${i.endsWith("/")?i.slice(0,-1):i}/search/${e}?${t}`},ua=(0,f.createContext)({});var ud=e=>{let{className:t,style:i,children:l,query:o,params:n,onClick:r,onMouseLeave:a,isAiSearch:d,onMouseEnter:u}=e,s=(0,f.useContext)(ua),{changeKeyword:c,resetSearchParams:m}=(0,ul.w)(),_=(0,f.useMemo)(()=>{let e={};if(!(0,U.DT)()&&!(0,iM.En)()&&(null==s?void 0:s.searchSpa)>0){let t=encodeURIComponent(o),i=(0,S.stringify)(n),l=(0,oD.Sp)(t,i);e.href=l}return e},[o,n,null==s?void 0:s.searchSpa]),g=e=>{e.stopPropagation(),e.nativeEvent.stopPropagation()};return(0,v.jsx)("a",(0,Q._)((0,E._)({},_),{className:p()(uo,t),style:i,suppressHydrationWarning:!0,onClick:e=>{if(null==r||r(e),!e.defaultPrevented){let t=null==s?void 0:s.searchOpenCurrentTab,i=null==s?void 0:s.clientSpaV2;if(e.stopPropagation(),e.nativeEvent.stopPropagation(),!!function(e){var t,i;let l=null===(t=e.target)||void 0===t?void 0:t.target;return 0===e.button&&(!l||"_self"===l)&&!((i=e).metaKey||i.altKey||i.ctrlKey||i.shiftKey)}(e)){e.preventDefault();d||function(e,t,i,l,o,n,r){var a,d,u;let s=/firefox/i.test(navigator.userAgent),c=i&&!(0,U.DT)()&&((null===(a=window)||void 0===a?void 0:a.location.pathname)==="/"||(null===(d=window)||void 0===d?void 0:d.location.pathname.startsWith("/search/"))),v=(0,eE.j9)();if(n&&(0,iM.En)()&&(o||v)){eb.emit(eb.EVENT.triggerModalPlayerClose),n(e,t.source,"",t.is_n1);return}l&&c&&un.H.save();let f=encodeURIComponent(e),m=(0,S.stringify)(t),p=(0,oD.Sp)(f,m);if(v){(0,ip.B1)({tag:"search_triggered_by_search_action"});let i=ur(f,m);eb.emit(eb.EVENT.beforeSearchSpaJump,{query:e,params:t,toPath:i}),(0,eS.r)()?document.exitFullscreen().then(()=>{setTimeout(()=>{eb.emit(eb.EVENT.searchSpa,{to:i}),r(e,t)},120)}):(eb.emit(eb.EVENT.searchSpa,{to:i}),r(e,t));return}if(c)window.location.href=p;else if(s){let e=window.open("about:blank",(0,is.f)()?"_self":"_blank");e&&(e.location.href=p)}else{;if((0,eL.G6)()||(0,eL.i7)()&&70>parseInt(null===(u=(0,eL.Lq)().browser_version.split("."))||void 0===u?void 0:u[0],10))window.open(p,(0,is.f)()?"_self":"_blank");else window.open(p,(0,is.f)()?"_self":"_blank","noopener")}}(o,n,(null==t?void 0:t.open_current_tab)===1,(null==t?void 0:t.save_video)===1,i===t6.CommonSwitch.On&&(0,U.DT)(),c,m)}}},onMouseEnter:u,onMouseLeave:a,onTouchStartCapture:g,onPointerDownCapture:g,onContextMenuCapture:g,children:l}))};let uu=(0,f.createContext)(null),us=f.memo(e=>{var t;let{searchQueryId:i,text:l,onSearchTextClick:o,onCloseVideoPlayer:n,href:r,className:a,onMounted:d,searchTextPos:u,isSpider:s,abTestData:c}=e,[m,_]=(0,f.useState)(""),{userInfo:g}=(0,f.useContext)(uu)||{},[h,y]=(0,f.useState)(""),w=(0,f.useCallback)(e=>{n&&n(),o&&o(l,i,u,e)},[i,u,l,o,n]);(0,f.useEffect)(()=>{let{uid:e}=JSON.parse(localStorage.getItem("user_info")||"{}");_(e)},[]);let x=(null==g?void 0:null===(t=g.info)||void 0===t?void 0:t.secUid)||m,{unshiftWord:C}=(0,d3.u)(x),I=(0,f.useCallback)(e=>{let t=e.split("/");return decodeURIComponent(t[t.length-1].split("?")[0])},[]),b=(0,f.useMemo)(()=>{if(null==r?void 0:r.includes("/search/")){let e=I(r),t=(0,iM.pf)(r);return(0,v.jsxs)(ud,{className:p()(d4.searchText,a),onClick:e=>{w(e)},query:e,params:t,children:[(0,v.jsx)("span",{className:d4.text,children:l}),(0,v.jsx)(la.Z,{className:d4.icon,width:9,height:9,viewBox:"0 0 9 9",src:ui})]})}return(0,v.jsxs)(oG,{className:p()(d4.searchText,a),onClick:w,href:r,target:"_blank",isNeedSeoOpt:!0,children:[(0,v.jsx)("span",{className:d4.text,children:l}),(0,v.jsx)(la.Z,{className:d4.icon,width:9,height:9,viewBox:"0 0 9 9",src:ui})]})},[r,l,w]);(0,f.useEffect)(()=>{d&&d(l,i,u)},[i,l,u]);let E=!s||s&&!(0,d5.y2)(l,5);return(0,f.useEffect)(()=>{var e;y((null===(e=window)||void 0===e?void 0:e.location.href)||"")},[]),(0,v.jsx)(v.Fragment,{children:r&&E?b:(0,v.jsxs)("span",{className:p()(d4.searchText,a),onClick:w,children:[(0,v.jsx)("span",{className:d4.text,children:l}),(0,v.jsx)(la.Z,{className:d4.icon,width:9,height:9,viewBox:"0 0 9 9",src:ui})]})})}),uc=(e,t,i)=>{try{return null==i?void 0:i(e,t)}catch(l){return null==i?void 0:i((0,it.eC)(e),t)}};var uv="NYC6YxfU",uf=e=>{let{text:t,href:i,className:l,style:o,searchQueryId:n,searchTextPos:r,abTestData:a,onMounted:d,onSearchTextClick:u}=e;(0,f.useEffect)(()=>{d&&d(t,n,r)},[n,t,r]);let s=(0,f.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),u&&u(t,n,r,e)},[n,r,t,u]);return(0,v.jsx)(oG,{className:l,onClick:s,style:o,href:i,target:"_blank",isNeedSeoOpt:!0,children:(0,v.jsx)("span",{className:p()(uv),children:t})})};let um=f.memo(e=>{var t;let{hashtagId:i,text:l,onClickHashtag:o,onCloseVideoPlayer:n,href:r,className:a,isCommerce:d,isSpider:u,abTestData:s}=e,{userInfo:c}=(0,f.useContext)(uu)||{},[m,_]=(0,f.useState)(""),g=(0,f.useCallback)(e=>{n&&n(),o&&o(i,l,d,e)},[i,o,n,l,d]),h=(0,f.useCallback)(e=>{let t=e.split("/");return decodeURIComponent(t[t.length-1].split("?")[0])},[]);(0,f.useEffect)(()=>{let{uid:e}=JSON.parse(localStorage.getItem("user_info")||"{}");_(e)},[]);let y=(null==c?void 0:null===(t=c.info)||void 0===t?void 0:t.secUid)||m,{unshiftWord:w}=(0,d3.u)(y),x=(0,f.useCallback)(e=>{l.slice(1),g(e)},[l,w,g]),C=(0,f.useMemo)(()=>{if(null==r?void 0:r.includes("/search/")){let e=h(r),t=(0,iM.pf)(r);return(0,v.jsx)(ud,{className:p()(d4.hashtagText,a),onClick:x,query:e,params:t,children:(0,v.jsx)("span",{children:l})})}return(0,v.jsx)(oG,{className:p()(d4.hashtagText,a),onClick:g,href:r,target:"_blank",isNeedSeoOpt:!0,children:(0,v.jsx)("span",{children:l})})},[r,l,x]),I=!u||u&&!(0,d5.y2)(l,6);return(0,v.jsx)(v.Fragment,{children:r&&I?C:(0,v.jsx)("span",{className:p()(d4.hashtagText,a),onClick:x,children:(0,v.jsx)("span",{children:l})})})}),up=f.memo(e=>{let{userId:t,secUid:i,text:l,enterMethod:o,onClickUser:n,onCloseVideoPlayer:r,className:a,awemeInfo:d}=e,u=(0,f.useCallback)(e=>{r&&r(e),n&&n(t,e)},[t,n,r]),s=`enter_method=${o}&enter_from=${(0,eI.mo)()}&from_gid=${null==d?void 0:d.awemeId}`,c=i&&(0,oD.HC)(i,s);return(0,v.jsx)(oG,{onClick:e=>{u(e),!c&&e.preventDefault()},className:p()(d4.userText,a),href:c,target:"_blank",rel:"noreferrer",isNeedSeoOpt:!0,children:(0,v.jsx)("span",{id:l,children:l})})});function u_(e){let{text:t,isRemoveRowspan:i,renderTextWithTag:l,seoInfo:o}=e,n=t;i&&(n=(0,it.LT)(n));let r=n.replaceAll("\\N","\n").split("\n");return(0,v.jsx)(v.Fragment,{children:r.map((e,t)=>(null==o?void 0:o.isSpider)&&(null==o?void 0:o.awemeId)&&e.trim()&&!/^#/.test(e.trim())?(0,v.jsx)("a",{href:(0,oD.JF)(null==o?void 0:o.awemeId),children:e},t):(null==o?void 0:o.isSpider)?(0,v.jsx)(v.Fragment,{children:e}):(0,v.jsxs)("span",{children:[(0,v.jsx)(ut,{text:e,imgClassname:d4.twemojiText,renderTextWithTag:l}),t<r.length-1?(0,v.jsx)("br",{}):""]},t))})}let ug={[d2.w.User]:(e,t)=>{let{text:i,enterMethod:l,userTextClassName:o,onClickUser:n,onCloseVideoPlayer:r,awemeInfo:a}=e,{userId:d,secUid:u}=t;return(0,v.jsx)(up,{text:i,enterMethod:l,className:o,onClickUser:n,onCloseVideoPlayer:r,awemeInfo:a,userId:d,secUid:u})},[d2.w.HashTag]:(e,t)=>{let{hashTagClassName:i,text:l,getHashTagHref:o,onClickHashtag:n,onCloseVideoPlayer:r,seoInfo:a,abTestData:d}=e,{hashtagId:u,isCommerce:s}=t;return(0,v.jsx)(um,{className:i,href:uc((null==l?void 0:l.slice(1))||"",u||"",o),hashtagId:u,text:l,onClickHashtag:n,onCloseVideoPlayer:r,isCommerce:s,isSpider:null==a?void 0:a.isSpider,abTestData:d})},[d2.w.Search]:(e,t)=>{let{text:i,onCloseVideoPlayer:l,onSearchTextClick:o,getSearchTextUrl:n,searchTextClass:r,showSearchHighlight:a,isRemoveRowspan:d,onSearchTextMounted:u,seoInfo:s,abTestData:c}=e,{searchQueryId:f,searchTextPos:m,searchText:p}=t;return a?(0,v.jsx)(us,{onCloseVideoPlayer:l,href:uc(i,f,n),text:i,onSearchTextClick:o,searchQueryId:f,className:r,onMounted:u,searchTextPos:m,isSpider:null==s?void 0:s.isSpider,abTestData:c}):(0,v.jsx)(uf,{text:i,abTestData:c,onSearchTextClick:o,searchQueryId:f,className:r,onMounted:u,searchTextPos:m,isSpider:null==s?void 0:s.isSpider})},[d2.w.Unknown]:e=>{let{isRemoveRowspan:t,text:i,renderTextWithTag:l,seoInfo:o}=e;return(0,v.jsx)(u_,{isRemoveRowspan:t,text:i,renderTextWithTag:l,seoInfo:o})}};function uh(e,t){let i=ug[function(e){if(!e)return d2.w.Unknown;let{type:t,userId:i,hashtagId:l}=e;return d1()(t)?i?d2.w.User:l?d2.w.HashTag:d2.w.Unknown:t}(t)];return i?i(e,t):ug[d2.w.Unknown](e)}var uy=f.memo(function(e){let{text:t="",textExtra:i=null,onClick:l=null,children:o,type:n="",className:r,seoInfo:a,wrapperClassName:d,showSearchHighlight:u,awemeInfo:s}=e,c=(0,f.useRef)(null),m=(0,f.useRef)(0),_=t||"",h=[],y=(0,f.useMemo)(()=>(0,d6.y$)(d8),[]);if((0,f.useEffect)(()=>{m.current>0&&!u&&s&&(null==i?void 0:i.length)!==0&&y("trendingShow",{words_num:m.current,enter_group_id:s.awemeId,enter_group_type:s.awemeType===g.e.Note?"aweme_image":"aweme_video",search_position:(0,ie.yW)(),impr_id:(0,dK.U)(s).impr_id})},[s,u]),!i||Array.isArray(i)&&0===i.length)h.push(uh((0,Q._)((0,E._)({},e),{text:_})));else{let t=0,l=function(e){if(!(e&&Array.isArray(e))||!(e.length>0))return e;{let t=[...e];return t.sort((e,t)=>e.start-t.start),t}}(i);l.some(e=>{let{type:t,start:i,end:l,hashtagName:o}=e;return t===d2.w.HashTag&&`#${o}`.toLowerCase()!==_.slice(i,l).toLowerCase()||!1})&&(_=_.replace(/\s*\n/gi,"\n")),m.current=0,l.forEach(e=>{let{type:t,searchText:i}=e;if(t===d2.w.Search){e.searchTextPos=m.current,m.current+=1;let t=_.indexOf(i);t>=0&&(e.start=t,e.end=t+i.length)}}),l.forEach(i=>{let{start:l,end:o}=i;t<l&&h.push(uh((0,Q._)((0,E._)({},e),{text:_.slice(t,l)})));let n=_.slice(l,o);h.push(uh((0,Q._)((0,E._)({},e),{text:n}),i)),t=o}),t<_.length&&h.push(uh((0,Q._)((0,E._)({},e),{text:_.slice(t)})))}return(null==a?void 0:a.isSpider)?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{ref:c,className:d,children:(0,v.jsxs)("span",{className:p()(d4.actionableText,d4[n],r),onClick:l,children:[o||"",h.map((e,t)=>(0,v.jsx)(v.Fragment,{children:e})),(null==a?void 0:a.appendKeyword)&&(0,v.jsx)("h1",{children:a.appendKeyword})]})})}):(0,v.jsx)("span",{ref:c,className:d,children:(0,v.jsx)(dJ.default,{noWrapper:!0,options:{className:d4.twemojiText,base:"//p-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/twemoji/"},children:(0,v.jsxs)("span",{className:p()(d4.actionableText,d4[n],r),onClick:l,children:[o||"",h.map((e,t)=>(0,v.jsx)("span",{children:e},t)),(null==a?void 0:a.appendKeyword)&&(0,v.jsx)("h1",{children:a.appendKeyword})]})})})}),uw=i("554631"),ux={wrapper:"LItO3U_T",expandMask:"mJBIOten",isDetailSearch:"KEUJ7WzT",text:"iTtO2XvS",showButton:"JYujzvWH",expandText:"oSg2ExQ7",isMobile:"q7qUTkp1",isSafari:"f7hGYSVX",lowChome:"wTcoDQJC",btn:"XB53T7oi",btnWrap:"BgbXcBtD",btnShow:"CwNskNWF",notChrome:"BoCaxql8",isUnfold:"Hx8K2Iyo",isFixAfter:"YPqVPPGO"};let uC=(e,t)=>{var i;let l=(null==t?void 0:t.root)||(null===(i=window.player)||void 0===i?void 0:i.root);return Math.floor(((l&&parseInt(window.getComputedStyle(l,null).height,10)||800)-45-16)/e)};var uI=f.memo(e=>{let{children:t,lineClamp:i=2,btnClassName:l,onlyKey:o="",maxLine:n=999,btnOnClick:r,renderContent:a,lineHeight:d=20,renderButton:u,player:s,showExpandButton:c=!0,renderBeforeContent:m,isMobile:_,isActive:g}=e,[h,y]=(0,f.useState)(!1),[w,x]=(0,f.useState)(!1),[I,b]=(0,f.useState)(0),E=(0,f.useRef)(n);E.current=n;let[S,T]=(0,f.useState)(i),{isFullScreen:k,isCssFullScreen:L}=(0,f.useContext)(ee.C),A=(0,f.useRef)(null),[R,N]=(0,f.useState)(!1),[P,M]=(0,f.useState)(!1),[j,D]=(0,f.useState)(()=>{let e=C.Le.getConfig(C.gI.IsInModalVideo),t=(null==e?void 0:e.isInModal)||!1;return"video_detail"===(0,eI.vM)()&&!k&&!L&&!t&&!0});(0,f.useEffect)(()=>{if(s){let e=e=>{let t=C.Le.getConfig(C.gI.IsInModalVideo),i=(null==t?void 0:t.isInModal)||!1;"video_detail"!==(0,eI.vM)()||e||L||i?D(!1):D(!0)};return s.on(ev.Events.FULLSCREEN_CHANGE,e),()=>{s.off(ev.Events.FULLSCREEN_CHANGE,e)}}},[]),(0,f.useEffect)(()=>{N((0,eL.i7)()&&!(0,eL.GP)())},[]);let F=(0,f.useCallback)(()=>{(0,f.startTransition)(()=>{if((null==A?void 0:A.current)&&!w){let{scrollHeight:e,clientHeight:t}=null==A?void 0:A.current;t>0&&(e-t>15||e>=d*i+15)?y(!0):y(!1)}})},[d,i,w]);return(0,f.useEffect)(()=>{if(!w){var e;null===(e=A.current)||void 0===e||e.scrollTo(0,0)}},[w]),(0,f.useEffect)(()=>{let e=null;return A.current&&(e=nr.Z.bind(A.current,F)),()=>{e&&(null==e||e())}},[F]),(0,f.useEffect)(()=>{x(!1),T(i),y(!1),F()},[o,i,d]),(0,f.useEffect)(()=>{!g&&(x(!1),T(i),y(!1),F())},[g,i]),(0,f.useEffect)(()=>{if(A.current&&w&&s){var e,t,i,l,o;let n=e=>{var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e)},r=e=>{var t,i;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),(null==A?void 0:null===(i=A.current)||void 0===i?void 0:i.scrollTop)?M(!0):M(!1)},a=iQ()(()=>{var e,t,i,l;b(((null==s?void 0:null===(l=s.config)||void 0===l?void 0:null===(i=l.el)||void 0===i?void 0:null===(t=i.getBoundingClientRect)||void 0===t?void 0:null===(e=t.call(i))||void 0===e?void 0:e.height)-48)/4)},200);return a(),null===(e=A.current)||void 0===e||e.addEventListener("wheel",n),null===(t=A.current)||void 0===t||t.addEventListener("scroll",r),null===(i=A.current)||void 0===i||i.addEventListener("mousedown",n),null===(l=A.current)||void 0===l||l.addEventListener("pointerdown",n),null===(o=A.current)||void 0===o||o.addEventListener("touchstart",n),window.addEventListener("resize",a),()=>{var e,t,i,l,o;null===(e=A.current)||void 0===e||e.removeEventListener("wheel",n),null===(t=A.current)||void 0===t||t.removeEventListener("scroll",r),null===(i=A.current)||void 0===i||i.removeEventListener("mousedown",n),null===(l=A.current)||void 0===l||l.removeEventListener("pointerdown",n),null===(o=A.current)||void 0===o||o.removeEventListener("touchstart",n),window.removeEventListener("resize",a)}}},[w,s]),(0,v.jsxs)("div",{className:p()(ux.wrapper,{[ux.notChrome]:!R,[ux.isDetailSearch]:j,[ux.isFixAfter]:!c,[ux.expandMask]:P}),children:[(0,v.jsxs)("div",{ref:A,className:p()(ux.text,{[ux.showButton]:h,[ux.expandText]:w,[ux.isMobile]:_,[ux.lowChome]:(0,eL.h5)("69.0"),[ux.isSafari]:(0,eL.G6)()}),style:{"--lineClamp":S,"--lineHeight":`${d}px`,"--maxHeight":`${d*S}px`,maxHeight:w?I:""},children:[m&&m(h),a&&a({isUnfold:w}),"function"==typeof t?t(h):t]}),(0,v.jsx)("div",{className:p()(ux.btnWrap,{[ux.btnShow]:h,[ux.isUnfold]:w}),style:{height:`${d-2}px`},children:c&&(0,v.jsx)("button",{type:"button",onClick:e=>{if(!w){let e=uC(d,s);e&&(E.current=e)}T(e=>e===i?E.current:i),x(e=>!e),r&&r(w),(null==e?void 0:e.target)&&e.target.blur()},className:p()(l,ux.btn),children:u?u(w):w?iB.a.t("fold",{},"收起"):iB.a.t("expand",{},"展开")})})]})}),ub=i("254457"),uE=new ez.h({hover_bottom_bar:{eventName:"hover_bottom_bar",params:{enter_from:"",bar_type:"",player_display_mode:""}},compilationEntranceShow:{eventName:"compilation_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",compilation_id:"",entrance_cnt:1,is_update:0}},hotEntranceShow:{eventName:"hot_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",trending_topic:"",first_tag_name:"",top:0,entrance_cnt:1}},compilationEntranceClick:{eventName:"compilation_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",compilation_id:"",entrance_cnt:1,is_update:0}},hotEntranceClick:{eventName:"hot_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",trending_topic:"",first_tag_name:"",top:0,entrance_cnt:1}},moreVideoEntranceShow:{eventName:"more_video_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},moreVideoEntranceClick:{eventName:"more_video_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},trendingWordsShow:{eventName:"trending_words_show",params:{words_source:"related_search_anchor_v2",enter_from:"",words_content:"",enter_group_id:"",words_position:0,entrance_cnt:1,words_num:0,group_id:"",impr_id:""}},trendingWordsClick:{eventName:"trending_words_click",params:{words_source:"related_search_anchor_v2",enter_from:"",words_content:"",enter_group_id:"",words_position:0,entrance_cnt:1,words_num:0,group_id:"",impr_id:""}},relatedVideoEntranceShow:{eventName:"related_video_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},relatedVideoEntranceClick:{eventName:"related_video_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},bottomBarShow:{eventName:"bottom_bar_show",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:"",player_display_mode:""}},bottomBarClick:{eventName:"bottom_bar_click",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:"",action:"open",player_display_mode:""}},relatedVideoClick:{eventName:"related_video_click",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:0}},compilationNextVideoShow:{eventName:"compilation_next_video_show",params:{enter_from:"",group_id:"",compilation_id:""}},compilationNextVideoHover:{eventName:"compilation_next_video_hover",params:{enter_from:"",group_id:"",compilation_id:""}},compilationNextVideoClick:{eventName:"compilation_next_video_click",params:{enter_from:"",group_id:"",compilation_id:""}},aiChatButtonShow:{eventName:"ai_chat_button_show",params:{enter_from:"",group_id:"",ai_chat_button_position:""}},aiChatButtonClick:{eventName:"ai_chat_button_click",params:{enter_from:"",group_id:"",ai_chat_button_position:""}}}),uS={root:"BOG8y_Gl",tag:"MI4md1rh",tagBg:"YZSP9XdN",tagWithNextContainer:"dVehvEoQ",nextTag:"zwwE1733",tagText:"fODRvBzb",nextMixIcon:"p8UAwkzl",tagIcon:"I35AzGH5",aiSearchIcon:"YSzLfUCY",searchRelatedTag:"XFWEH3bU",text:"PUrbR8X8",hintText:"jT6lZ25H",titleWord:"fJkKIHkx",rsBarOpt:"z8V78c17",enterIcon:"iPUYNM4B",searchIcon:"vgghN89F",updateTextContainer:"enxLTyHX",divide:"VZ1XTMI7",updateText:"yChcK6Lu"};let uT=(0,f.forwardRef)((e,t)=>(0,v.jsxs)("svg",(0,Q._)((0,E._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,v.jsx)("path",{d:"M.678 3.845a.778.778 0 0 1 0-1.367L4.662.22a1.707 1.707 0 0 1 1.676 0l3.984 2.258a.778.778 0 0 1 0 1.367L6.338 6.103a1.707 1.707 0 0 1-1.676 0L.678 3.845z",fill:"#fff"}),(0,v.jsx)("path",{d:"M.076 5.273a.562.562 0 0 1 .753-.188l4.112 2.331c.345.195.773.195 1.118 0l4.112-2.33a.562.562 0 0 1 .753.187.518.518 0 0 1-.195.724l-4.112 2.33c-.69.39-1.545.39-2.234 0L.27 5.997a.518.518 0 0 1-.195-.724z",fill:"#fff"}),(0,v.jsx)("path",{d:"M.83 7.465a.562.562 0 0 0-.754.187.518.518 0 0 0 .195.724l4.112 2.331c.69.39 1.545.39 2.234 0l4.112-2.33a.518.518 0 0 0 .195-.725.562.562 0 0 0-.753-.187l-4.112 2.33a1.138 1.138 0 0 1-1.118 0L.83 7.466z",fill:"#fff"})]}))),uk=(0,f.forwardRef)((e,t)=>(0,v.jsxs)("svg",(0,Q._)((0,E._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,v.jsx)("g",{filter:"url(#series_svg__filter0_d_1599_82712)",children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.09 2.49l9.505 5.515A5.2 5.2 0 0 0 6.457 2h-3.58c-.344 0-.643.2-.787.49zm9.165 6.719L9.077 7.945l-6.95 4.033a.877.877 0 0 0 .75.422h3.58a5.201 5.201 0 0 0 4.798-3.191zM2 10.65l3.066-1.78V5.618L2 3.838v6.813z",fill:"#fff"})}),(0,v.jsx)("defs",{children:(0,v.jsxs)("filter",{id:"series_svg__filter0_d_1599_82712",x:1,y:1,width:11.657,height:12.4,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,v.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,v.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,v.jsx)("feOffset",{}),(0,v.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,v.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,v.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.7 0"}),(0,v.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_1599_82712"}),(0,v.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_1599_82712",result:"shape"})]})})]}))),uL=(0,f.forwardRef)((e,t)=>(0,v.jsxs)("svg",(0,Q._)((0,E._)({width:10,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,v.jsx)("mask",{id:"hot_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:-2,width:10,height:14,children:(0,v.jsx)("path",{d:"M.5-1.05h9.208v8.234A4.516 4.516 0 0 1 5.192 11.7 4.692 4.692 0 0 1 .5 7.008V-1.05z",fill:"#C4C4C4"})}),(0,v.jsxs)("g",{mask:"url(#hot_svg__a)",children:[(0,v.jsx)("path",{d:"M8.393 3.553c.961 1.063 1.315 2.125 1.315 3.188 0 1.416-.067 1.796 0 1.77-1.858.738-5.122-.93-6.02-3.187-.899-2.257.38-4.25 2.353-5.312.078-.042.126.027.126.132 0 1.638 1.265 2.347 2.226 3.41z",fill:"url(#hot_svg__paint0_linear_23665_194053)"}),(0,v.jsx)("path",{d:"M9.545 8.872c.191-.348.557 1.057.164-1.226.354-1.967-1.142-2.745-2.125-2.322-1.645.709-2.48.709-3.542.355-.69-.23-1.638-.709-1.934-1.771-.329 1.416.66 4.065 2.157 4.964 1.497.899 5.09.348 5.28 0z",fill:"url(#hot_svg__paint1_linear_23665_194053)"}),(0,v.jsx)("path",{d:"M1.775 3.339C1.534 3.58.5 4.826.5 6.816c0 1.99 1.063 4.884 4.604 4.884 3.542 0 4.931-1.406 5.313-3.255-3.188 1.77-5.656 0-6.021-.354-.9-.872-2.125-2.412-2.338-4.604-.029-.302-.042-.39-.283-.148z",fill:"url(#hot_svg__paint2_linear_23665_194053)"})]}),(0,v.jsxs)("defs",{children:[(0,v.jsxs)("linearGradient",{id:"hot_svg__paint0_linear_23665_194053",x1:3.536,y1:".28",x2:7.934,y2:6.743,gradientUnits:"userSpaceOnUse",children:[(0,v.jsx)("stop",{offset:".021",stopColor:"#FADF32"}),(0,v.jsx)("stop",{offset:".451",stopColor:"#EB9B46"}),(0,v.jsx)("stop",{offset:".782",stopColor:"#EB5854"})]}),(0,v.jsxs)("linearGradient",{id:"hot_svg__paint1_linear_23665_194053",x1:2.616,y1:4.79,x2:10.598,y2:9.517,gradientUnits:"userSpaceOnUse",children:[(0,v.jsx)("stop",{stopColor:"#FFC533"}),(0,v.jsx)("stop",{offset:".436",stopColor:"#F26461"}),(0,v.jsx)("stop",{offset:".809",stopColor:"#FF0544"})]}),(0,v.jsxs)("linearGradient",{id:"hot_svg__paint2_linear_23665_194053",x1:8.195,y1:11.127,x2:".577",y2:4.974,gradientUnits:"userSpaceOnUse",children:[(0,v.jsx)("stop",{offset:".134",stopColor:"#FA0951"}),(0,v.jsx)("stop",{offset:".354",stopColor:"#FA3E65"}),(0,v.jsx)("stop",{offset:".881",stopColor:"#F2AE49"}),(0,v.jsx)("stop",{offset:".998",stopColor:"#FAC032"})]})]})]}))),uA=(0,f.forwardRef)((e,t)=>(0,v.jsxs)("svg",(0,Q._)((0,E._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,v.jsx)("g",{filter:"url(#semi-icons-search_svg__filter0_d_2327_94143)",children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 2a4.25 4.25 0 1 0 2.428 7.739l2.042 2.041a.75.75 0 1 0 1.06-1.06L9.74 8.678A4.25 4.25 0 0 0 6.25 2zM3.5 6.25a2.75 2.75 0 1 1 5.5 0 2.75 2.75 0 0 1-5.5 0z",fill:"#fff"})}),(0,v.jsx)("defs",{children:(0,v.jsxs)("filter",{id:"semi-icons-search_svg__filter0_d_2327_94143",x:1,y:1,width:12,height:12,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,v.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,v.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,v.jsx)("feOffset",{}),(0,v.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,v.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,v.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),(0,v.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2327_94143"}),(0,v.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_2327_94143",result:"shape"})]})})]}))),uR=e=>{let{className:t}=e,i=(0,f.useMemo)(()=>`paint0_linear_29_${Math.random().toString(36).substring(2,15)}`,[]);return(0,v.jsxs)("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,v.jsx)("path",{d:"M11.4435 7.12305H10.0543V10.7496H11.4435V7.12305Z",fill:"#E8E8E9"}),(0,v.jsx)("path",{d:"M4.82377 10.7498L6.50665 7.00456L8.18954 10.7498H9.70893L7.158 5.25061H5.85518L3.30425 10.7498H4.82377Z",fill:"#E8E8E9"}),(0,v.jsx)("path",{d:"M10.7477 6.72761C11.1773 6.72761 11.5256 6.37935 11.5256 5.94974C11.5256 5.52014 11.1773 5.17188 10.7477 5.17188C10.3181 5.17188 9.96988 5.52014 9.96988 5.94974C9.96988 6.37935 10.3181 6.72761 10.7477 6.72761Z",fill:"#E8E8E9"}),(0,v.jsx)("path",{d:"M14.5081 12.853C13.9615 12.1176 12.9426 11.9194 12.163 12.4006C11.9047 12.5601 11.6713 12.6986 11.5304 12.77C10.3605 13.3634 9.01917 13.7863 7.9112 13.8161L7.89396 13.8167C4.79597 13.9707 2.15574 11.6839 2.00836 8.7192C1.838 5.29261 4.61037 2.36036 8.18847 2.18251C10.7992 2.05274 13.1632 3.92921 13.3529 6.42119C13.4769 8.04962 12.9506 9.28487 12.1247 10.1914C12.4603 10.527 12.7957 10.8625 13.1313 11.1981C14.3879 9.91548 14.9783 8.24709 14.7957 6.25458C14.5044 3.07528 11.7254 0.64138 8.12015 0.807995C3.78342 1.00846 0.425767 4.60317 0.633723 8.78752C0.818448 12.5046 4.09654 15.3739 7.94505 15.1917C7.94817 15.1917 7.95116 15.1916 7.95429 15.1915C7.95704 15.1913 7.95966 15.1915 7.96228 15.1912C9.50341 15.1485 11.2601 14.5513 12.8584 13.6115C13.0561 13.4952 13.3102 13.5482 13.447 13.7323L14.2622 14.8294L15.3669 14.0084L14.5082 12.8529L14.5081 12.853Z",fill:`url(#${i})`}),(0,v.jsx)("defs",{children:(0,v.jsxs)("linearGradient",{id:i,x1:"2.96063",y1:"3.01023",x2:"14.6635",y2:"14.7132",gradientUnits:"userSpaceOnUse",children:[(0,v.jsx)("stop",{stopColor:"#00E6F0"}),(0,v.jsx)("stop",{offset:"0.11",stopColor:"#05E3F0"}),(0,v.jsx)("stop",{offset:"0.24",stopColor:"#15DDF3"}),(0,v.jsx)("stop",{offset:"0.39",stopColor:"#2FD3F7"}),(0,v.jsx)("stop",{offset:"0.55",stopColor:"#52C4FC"}),(0,v.jsx)("stop",{offset:"0.61",stopColor:"#64BEFF"}),(0,v.jsx)("stop",{offset:"0.71",stopColor:"#4FADFF"}),(0,v.jsx)("stop",{offset:"0.92",stopColor:"#1B84FF"}),(0,v.jsx)("stop",{offset:"1",stopColor:"#0573FF"})]})})]})};var uN=i("732178");let uP={[em.WZ.Mix]:"compilation",[em.WZ.Series]:"playlet",[em.WZ.Hot]:"trending_topic",[em.WZ.RelatedSearch]:"related_search_anchor_v2"},uM=new Map([[em.WZ.Mix,(0,v.jsx)(la.Z,{src:uT,width:12,height:12,viewBox:"0 0 12 12"},em.WZ.Mix)],[em.WZ.Series,(0,v.jsx)(la.Z,{src:uk,width:14,height:14,viewBox:"0 0 14 14"},em.WZ.Series)],[em.WZ.Hot,(0,v.jsx)(la.Z,{src:uL,width:12,height:12,viewBox:"0 0 12 12"},em.WZ.Hot)]]),uj=e=>{let{item:t,awemeInfo:i,feedbarCount:l,isShowUpdateText:o,player:n,reportExtraParams:r,onMouseLeave:a}=e,{awemeId:d,mixInfo:u,seriesInfo:s}=i,c=(0,f.useMemo)(()=>{let{totalEpisode:e,currentEpisode:t}=(null==i?void 0:i.mixInfo)||{};return o&&(null==i?void 0:i.mixInfo.mixId)?e===t?"已是最新集":`更新至第${e}集`:null},[o,i,null==i?void 0:i.mixInfo]),m=(0,f.useMemo)(()=>{let{totalEpisode:e,currentEpisode:t}=(null==i?void 0:i.seriesInfo)||{};return o&&(null==i?void 0:i.seriesInfo.seriesId)?e===t?"已是最新集":`更新至第${e}集`:null},[o,i,null==i?void 0:i.seriesInfo]),_=(0,dZ.x)(()=>{var e,o,n,a,c,v,f,m;if(t.type===em.WZ.Mix&&uE.sendLog("compilationEntranceShow",{enter_from:(0,ie.yW)(),group_id:d,author_id:null==i?void 0:null===(c=i.authorInfo)||void 0===c?void 0:c.uid,compilation_id:null==u?void 0:u.mixId,entrance_cnt:l,is_update:(null==i?void 0:null===(v=i.mixInfo)||void 0===v?void 0:v.totalEpisode)===(null==i?void 0:null===(f=i.mixInfo)||void 0===f?void 0:f.currentEpisode)?0:1}),t.type===em.WZ.Hot){let{trending_topic:e,first_tag_name:o,top:n}=t.customProps||{};uE.sendLog("hotEntranceShow",{enter_from:(0,ie.yW)(),group_id:d,author_id:null==i?void 0:null===(m=i.authorInfo)||void 0===m?void 0:m.uid,trending_topic:e,first_tag_name:o,top:n,entrance_cnt:l})}let p=0;p=(null==s?void 0:s.seriesId)?(null==s?void 0:s.totalEpisode)===(null==s?void 0:s.currentEpisode)?0:1:(null==u?void 0:u.totalEpisode)===(null==u?void 0:u.currentEpisode)?0:1,uE.sendLog("bottomBarShow",(0,E._)({playlet_id:null==s?void 0:s.seriesId,compilation_id:null==u?void 0:u.mixId,group_id:d,enter_from:(0,ie.yW)(),enter_from_merge:(0,eI.vM)(),bar_type:uP[t.type],entrance_cnt:l,is_update:p,item_duration_ms:(null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.duration)||0,bar_tag_name:null==i?void 0:null===(a=i.webRawData)||void 0===a?void 0:null===(n=a.CTR)||void 0===n?void 0:null===(o=n.recommendScore)||void 0===o?void 0:o.relateAiTag,player_display_mode:(0,eI.Ok)()},r||{}))}),g=e=>{var o,a,c,v,f,m,p,_;if(t.onClick({awemeInfo:e}),t.type===em.WZ.Mix&&(uE.sendLog("compilationEntranceClick",{enter_from:(0,ie.yW)(),group_id:d,author_id:null==i?void 0:null===(f=i.authorInfo)||void 0===f?void 0:f.uid,compilation_id:u.mixId,entrance_cnt:l,is_update:(null==e?void 0:null===(m=e.mixInfo)||void 0===m?void 0:m.totalEpisode)===(null==e?void 0:null===(p=e.mixInfo)||void 0===p?void 0:p.currentEpisode)?0:1}),null==n||n.emit(ev.Events.USER_ACTION,{action:"click_compilation"})),t.type===em.WZ.Hot){let{trending_topic:e,first_tag_name:o,top:r}=(null==t?void 0:t.customProps)||{};uE.sendLog("hotEntranceClick",{enter_from:(0,ie.yW)(),group_id:d,author_id:null==i?void 0:null===(_=i.authorInfo)||void 0===_?void 0:_.uid,trending_topic:e,first_tag_name:o,top:r,entrance_cnt:l}),null==n||n.emit(ev.Events.USER_ACTION,{action:"click_hot"})}t.type===em.WZ.Series&&(null==n||n.emit(ev.Events.USER_ACTION,{action:"click_series"}));let g=0;g=(null==s?void 0:s.seriesId)?(null==s?void 0:s.totalEpisode)===(null==s?void 0:s.currentEpisode)?0:1:(null==u?void 0:u.totalEpisode)===(null==u?void 0:u.currentEpisode)?0:1,uE.sendLog("bottomBarClick",(0,E._)({playlet_id:null==s?void 0:s.seriesId,compilation_id:null==u?void 0:u.mixId,group_id:d,enter_from:(0,ie.yW)(),enter_from_merge:(0,eI.vM)(),bar_type:uP[t.type],entrance_cnt:l,is_update:g,item_duration_ms:(null==e?void 0:null===(o=e.video)||void 0===o?void 0:o.duration)||0,bar_tag_name:null==e?void 0:null===(v=e.webRawData)||void 0===v?void 0:null===(c=v.CTR)||void 0===c?void 0:null===(a=c.recommendScore)||void 0===a?void 0:a.relateAiTag,player_display_mode:(0,eI.Ok)()},r||{}))},{isSeries2Mix:h,darkIconUrl:y}=null!=s?s:{},w=(0,v.jsxs)("div",{className:p()(t.itemClassName,uS.tag),ref:_,onClick:()=>g(i),onMouseLeave:a,children:[(0,v.jsx)("span",{className:p()(uS.tagBg)}),(0,v.jsx)("span",{className:p()(uS.tagIcon),children:h&&y&&t.type===em.WZ.Series?(0,v.jsx)("img",{height:18,src:y}):uM.get(t.type)}),(0,v.jsx)("span",{className:p()(uS.tagText,t.textClassName),children:t.title}),t.type===em.WZ.Mix&&o&&(0,v.jsxs)("div",{className:p()(uS.updateTextContainer),children:[(0,v.jsx)("div",{className:p()(uS.divide)}),(0,v.jsx)("div",{className:p()(uS.updateText),children:c})]}),t.type===em.WZ.Series&&o&&(0,v.jsxs)("div",{className:p()(uS.updateTextContainer),children:[(0,v.jsx)("div",{className:p()(uS.divide)}),(0,v.jsx)("div",{className:p()(uS.updateText),children:m})]})]},t.type);return(0,U.tq)()||(0,U._1)()||(0,U.iO)()||"undefined"==typeof window||"/"!==window.location.pathname||(t.type!==em.WZ.Mix||!(i.mixInfo.totalEpisode>i.mixInfo.currentEpisode))&&(t.type!==em.WZ.Series||!(i.seriesInfo.totalEpisode>i.seriesInfo.currentEpisode))?w:(0,v.jsx)(uD,{item:t,awemeInfo:i,onClick:g,children:w})},uD=e=>{var t,i;let{item:l,children:o,awemeInfo:n}=e,r={enter_from:(0,ie.yW)(),group_id:n.awemeId,compilation_id:(null===(t=n.mixInfo)||void 0===t?void 0:t.mixId)||(null===(i=n.seriesInfo)||void 0===i?void 0:i.seriesId)};return(0,f.useEffect)(()=>{uE.sendLog("compilationNextVideoShow",r)},[]),(0,v.jsxs)("div",{className:uS.tagWithNextContainer,children:[o,(0,v.jsxs)("div",{className:p()(l.itemClassName,uS.tag,uS.nextTag),onMouseEnter:()=>{uE.sendLog("compilationNextVideoHover",r)},onClick:()=>{},children:[(0,v.jsx)("span",{className:p()(uS.tagBg)}),(0,v.jsx)("span",{className:p()(uS.tagText,l.textClassName),children:"下一集"}),(0,v.jsx)(la.Z,{className:p()(uS.nextMixIcon),src:ub.Z,width:12,height:12,viewBox:"0 0 12 12"})]})]})},uF=e=>{var t;let{tag:i,awemeInfo:l,feedbarCount:o,isActive:n,player:r,reportExtraParams:a,userInfo:d,abTestData:u,onMouseLeave:s}=e,c=null==d?void 0:null===(t=d.info)||void 0===t?void 0:t.secUid,{unshiftWord:m}=(0,d3.u)(c),{searchWord:_,index:g,itemClassName:h,textClassName:y,hintText:w,word:x,wordsNum:C}=i,{word:I,wordId:b}=_||{},S=function(e){var t;let i=null==e?void 0:null===(t=e.searchWord)||void 0===t?void 0:t.info;try{let e=JSON.parse(i);return(null==e?void 0:e.query_type)==="ai"}catch(e){return!1}}(i)||!!localStorage.getItem("isAiSearchForceTrue"),{awemeId:T,groupId:k}=l||{},L=(0,f.useMemo)(()=>(0,dK.U)(l).impr_id,[l]);(0,f.useEffect)(()=>{(void 0===n||n)&&(S?uE.sendLog("aiChatButtonShow",{enter_from:"homepage_hot",group_id:b,ai_chat_button_position:"bottom_bar"}):uE.sendLog("trendingWordsShow",(0,E._)({words_source:"related_search_anchor_v2",enter_from:(0,ie.yW)(),words_content:I,enter_group_id:T,words_position:g,entrance_cnt:o,words_num:C,group_id:b,impr_id:L},a||{},(null==a?void 0:a.search_params)||{})))},[I,T,g,n,b]);let A=(0,f.useMemo)(()=>({source:"related_search_anchor_v2",enter_from:(0,eI.vM)(),aweme_id:T,gid:k}),[T,k,eI.vM]);return(0,v.jsxs)(ud,{className:p()(h,uS.searchRelatedTag,uS.tag),query:I,params:A,onClick:()=>{var e;if(S){uE.sendLog("aiChatButtonClick",{enter_from:"homepage_hot",group_id:b,ai_chat_button_position:"bottom_bar"}),eb.emit(eb.EVENT.openAiCard,{from:"button",word:I,awemeId:T,tab:uN.X.Search});return}uE.sendLog("trendingWordsClick",(0,E._)({words_source:"related_search_anchor_v2",enter_from:(0,ie.yW)(),words_content:I,enter_group_id:T,words_position:g,entrance_cnt:o,words_num:C,group_id:b,impr_id:L},a||{},(null==a?void 0:a.search_params)||{}));let t=null==u?void 0:u.searchOpenCurrentTab;((null==t?void 0:t.save_status)!==1||(0,U.DT)()||(null===(e=window)||void 0===e?void 0:e.location.pathname)==="/")&&eb.emit(eb.EVENT.videoPause),null==r||r.emit(ev.Events.USER_ACTION,{action:"click_related_search"})},onMouseEnter:()=>{eb.emit(eb.EVENT.renderAiCard,{awemeId:T})},onMouseLeave:s,isAiSearch:S,children:[(0,v.jsx)("span",{className:p()(uS.tagBg)}),S?(0,v.jsx)(uR,{className:p()(uS.searchIcon,uS.aiSearchIcon)}):(0,v.jsx)(la.Z,{className:uS.searchIcon,src:uA,width:14,height:14,viewBox:"0 0 14 14"}),(0,v.jsx)("div",{className:p()(uS.text,y),children:w?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("span",{className:uS.hintText,children:[S?"AI 抖音":w,"："]}),(0,v.jsx)("span",{className:p()(uS.titleWord,uS.rsBarOpt),children:x})]}):(0,v.jsx)("span",{className:p()(uS.titleWord,uS.rsBarOpt),children:I})}),S?null:(0,v.jsx)(la.Z,{className:p()(uS.enterIcon),src:ub.Z,width:12,height:12,viewBox:"0 0 12 12"})]})},uV=e=>{let{tagList:t,awemeInfo:i,reportExtraParams:l,isShowUpdateText:o,isActive:n,player:r,userInfo:a,abTestData:d}=e,u=(0,f.useCallback)(e=>{let t=uP[e];if(!!t)uE.sendLog("hover_bottom_bar",{enter_from:(0,eI.mo)(),bar_type:t,player_display_mode:(0,eI.Ok)()})},[]);return(0,v.jsx)("div",{className:p()("feedbar-new-style","feedbar-new-style-adapter",uS.root,{feedbarHeight36:!0}),children:t.map(e=>e.type===em.WZ.RelatedSearch?(0,v.jsx)(uF,{isActive:n,tag:e,awemeInfo:i,feedbarCount:t.length,player:r,reportExtraParams:l,userInfo:a,abTestData:d,onMouseLeave:()=>u(e.type)},e.type):(0,v.jsx)(uj,{item:e,awemeInfo:i,feedbarCount:t.length,isShowUpdateText:o,player:r,reportExtraParams:l,abTestData:d,onMouseLeave:()=>u(e.type)},e.type))})};var uO="aNySDpVf",uB="pot76TgE";let uU=(0,f.forwardRef)((e,t)=>(0,v.jsxs)("svg",(0,Q._)((0,E._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,v.jsx)("path",{d:"M1.455 0C.65 0 0 .651 0 1.455V8c0 .803.651 1.455 1.455 1.455H8c.803 0 1.455-.652 1.455-1.455V1.455C9.455.65 8.803 0 8 0H1.455z",fill:"#fff"}),(0,v.jsx)("path",{d:"M4 12a1.455 1.455 0 0 1-1.455-1.454h5.819a2.182 2.182 0 0 0 2.181-2.182V2.545C11.35 2.545 12 3.197 12 4v5.09A2.909 2.909 0 0 1 9.09 12H4z",fill:"#fff"})]}))),uH=e=>{let{className:t="",svgClassName:i=""}=e;return(0,v.jsxs)("div",{className:p()(uO,t),children:[(0,v.jsx)(la.Z,{className:p()(uB,i),src:uU,width:12,height:12,viewBox:"0 0 12 12"}),"图文"]})};var uW=i("322372"),uz={container:"QV8BFx6b",avatarList:"CTEemcLr",itemContainer:"tTT3ID_D",vertical:"VKtEW2PW",nickNameContainer:"i1Bxjgff",nickName:"RAyLvIcx",avatarContainer:"RBbNNykr",changeSize:"bj1yPGaL",moreBox:"k_aCehGO",more:"fG0mnJTH"};function uG(e){var t,i,l,o,n,r,a,d,u,s,c,m;let{loginUserInfo:_,loginDispatch:g,fullScreenTarget:h,reportExtraParams:y,authorItem:w,awemeInfo:x,onCooperationAuthorClick:C,showRoleTitle:I,showFollowBtn:b,loginPanelTarget:S,abTestData:T,isDetail:k}=e,{isLogin:L}=_||{};(0,f.useRef)();let A=(0,tr.n)(),[R,N]=(0,f.useState)(!1),P=(0,f.useRef)(!1),M=(0,f.useRef)(null),j=(0,f.useMemo)(()=>{let e=eX()(x);return e.authorInfo=w,e},[x,w]),{follow:D,unFollow:F}=e8({selfUid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,actionUid:null==j?void 0:null===(i=j.authorInfo)||void 0===i?void 0:i.uid,defaultFollowerStatus:null==j?void 0:null===(l=j.authorInfo)||void 0===l?void 0:l.followerStatus,defaultFollowStatus:null==j?void 0:null===(o=j.authorInfo)||void 0===o?void 0:o.followStatus,logExtraParams:(0,Q._)((0,E._)({author_id:null==x?void 0:null===(n=x.authorInfo)||void 0===n?void 0:n.uid,group_id:null==x?void 0:x.awemeId,from_group_id:null==x?void 0:x.awemeId,music_id:null==x?void 0:null===(r=x.music)||void 0===r?void 0:r.mid,compilation_id:null==x?void 0:null===(a=x.mixInfo)||void 0===a?void 0:a.mixId,aweme_type:null==x?void 0:x.awemeType,to_user_id:null==j?void 0:null===(d=j.authorInfo)||void 0===d?void 0:d.uid},y),{is_co_publish:1,item_duration_ms:(null==x?void 0:null===(u=x.video)||void 0===u?void 0:u.duration)||0,co_publish_author_list:null==j?void 0:null===(m=j.cooperationInfo)||void 0===m?void 0:null===(c=m.cooperationCreators)||void 0===c?void 0:null===(s=c.filter(e=>e.roleId!==eG.CooperationRoleId.Author))||void 0===s?void 0:s.map(e=>`${e.uid}_${null==e?void 0:e.roleId}`),enter_method:"co_publish_entrance"}),isLogin:L,accountParentEl:(0,eS.r)()&&h,onLoginSuccess:()=>{null==g||g({type:"updateUserInfo"})}});return(0,v.jsxs)("li",{className:p()(uz.itemContainer,{[uz.vertical]:!I}),ref:M,"data-click-from":"click_icon",children:[(0,v.jsx)(o5,{player:A,loginUserInfo:_,actionFollow:D,actionUnFollow:F,awemeInfo:j,isLogin:L,loginDispatch:g,fullScreenTarget:h,isFollowClickedRef:P,onCooperAitonClick:()=>{null==C||C(j)},reportExtraParams:y,className:uz.avatarContainer,isShowTip:!0,isShowKeyHotTip:!1,followBtnMouseEnter(){},followBtnMouseLeave(){},imBtnMouseEnter(){},imBtnMouseLeave(){},showPendantTip:R,setShowPendantTip:N,showImBtn:!1,showFollowBtn:b,loginPanelTarget:S,abtestData:T}),(0,v.jsx)("div",{className:uz.nickNameContainer,children:(0,v.jsx)("span",{className:p()(uz.nickName,uz.changeSize),onClick:()=>{null==C||C(j)},children:w.nickname})})]})}function uZ(e){let{authorList:t,onClickMore:i}=e,l=(0,tX._)(e,["authorList","onClickMore"]),o=(0,f.useRef)(null),n=(0,f.useMemo)(()=>t.length>5,[t]);return(null==t?void 0:t.length)<=1?null:(0,v.jsxs)("div",{className:p()(uz.container,{videoCooperationHideTitleContainer:!0}),children:[(0,v.jsx)("ul",{className:uz.avatarList,children:t.map((e,t)=>n&&t>=4?null:(0,v.jsx)(uG,(0,Q._)((0,E._)({},l),{authorItem:e,showFollowBtn:!0}),e.uid))}),n&&(0,v.jsx)("div",{className:uz.moreBox,children:(0,v.jsx)("div",{className:uz.more,onClick:i,children:(0,v.jsx)(iG.z,{svg:(0,v.jsx)(uW.Z,{})})})}),(0,v.jsx)("div",{className:"disturb-login-panel disturb-login-panel-related",ref:o})]})}var uq=i("880421"),uK="LlSXsLF7",u$="gWjSPc1d",uY="eDwaP6Nb",uQ="yf1d3629",uX=e=>{let{authorList:t,isTag:i=!1,onClick:l,className:o="",num:n}=e,r=(0,f.useMemo)(()=>n>=1e4?"万":n>=1e3?"千":n>=100?"百":String(n),[n]);return t.length<=1?null:(0,v.jsxs)("div",{className:p()(uK,o,{[u$]:i}),onClick:l,children:[(0,v.jsx)(iG.z,{svg:(0,v.jsx)(uq.Z,{style:{fontSize:"12px"}}),className:uY}),(0,v.jsxs)("span",{className:uQ,children:[r,"人共创",!i&&" : "]})]})},uJ=i("810901"),u0=i("756560"),u1=i("477667"),u2="SiK903Qp",u3="Oe39hOfp",u6="cG_KNUWj",u5="qXqjNgbX",u4="aG7Pqw69",u8="SzTKTh0h",u7="bl3QQcQC",u9=i("63205"),se=i("693249"),st={card:"j13gXkfh",avatarWrap:"XR1TliNx",info:"LJdt3dn2",nameInfo:"kY0g0qMq",nickname:"s2xzTdhp",roleTitle:"Hf1u0P0E",divider:"OlOWK6Zx"},si="o2b8OWKv",sl="mLv3TMBG",so="tKq2Qo8G",sn="FEJP9GIP",sr="VaCWQJrI";function sa(e){var t,i,l,o,n,r,a,d,u;let{loginDispatch:s,userInfo:c,loginUserInfo:m,awemeInfo:_,reportExtraParams:g,isLogin:h,onLoginChange:y}=e,{followStatus:w,followerStatus:x,uid:C}=c||{},I=(0,f.useMemo)(()=>{var e;return(null==c?void 0:c.uid)===(null==m?void 0:null===(e=m.info)||void 0===e?void 0:e.uid)},[c,m]),{followStatus:b,text:S,buttonType:T}=ti({selfUid:null==m?void 0:null===(t=m.info)||void 0===t?void 0:t.uid,actionUid:C,defaultFollowerStatus:x,defaultFollowStatus:w}),{follow:k,unFollow:L}=e8({selfUid:null==m?void 0:null===(i=m.info)||void 0===i?void 0:i.uid,actionUid:C,defaultFollowerStatus:x,defaultFollowStatus:w,isLogin:h,onLoginSuccess:()=>{null==y||y(!0),null==s||s({type:"updateUserInfo"})},logExtraParams:(0,Q._)((0,E._)({to_user_id:C,enter_from:(0,ie.yW)(),is_full_screen:(0,eS.r)()?"1":"0",author_id:null==_?void 0:null===(l=_.authorInfo)||void 0===l?void 0:l.uid,group_id:null==_?void 0:_.awemeId,tab_name:(0,eA.zD)()||(0,j.Rs)("tab_name")||"",from_group_id:null==_?void 0:_.awemeId,music_id:null==_?void 0:null===(o=_.music)||void 0===o?void 0:o.mid,compilation_id:null==_?void 0:null===(n=_.mixInfo)||void 0===n?void 0:n.mixId,aweme_type:null==_?void 0:_.awemeType,item_duration_ms:(null==_?void 0:null===(r=_.video)||void 0===r?void 0:r.duration)||0},g),{is_co_publish:1,co_publish_author_list:null==_?void 0:null===(u=_.cooperationInfo)||void 0===u?void 0:null===(d=u.cooperationCreators)||void 0===d?void 0:null===(a=d.filter(e=>e.roleId!==eG.CooperationRoleId.Author))||void 0===a?void 0:a.map(e=>`${e.uid}_${null==e?void 0:e.roleId}`),enter_method:"co_publish_panel"})});return(0,v.jsx)("div",{className:p()(si,sr,{[sl]:I}),children:(0,v.jsx)(iO.Button,{theme:"solid",className:so,type:T===e7.TT.Active?"primary":"secondary",onClick:()=>{(0,oO.V)(b)?L():k()},size:"small",children:(0,v.jsx)("div",{className:sn,children:S})})})}function sd(e){let{userInfo:t}=e,{avatarUri:i,nickname:l,secUid:o,roleTitle:n}=t;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:st.card,children:[(0,v.jsx)("div",{className:st.avatarWrap,children:(0,v.jsx)(u9.a,{isNeedSeoOpt:!1,href:(0,oD.HC)(o,"enter_method=cooperation_list"),target:"_blank",rel:"noopener noreferrer",onClick:()=>{eb.emit(eb.EVENT.videoPause)},children:(0,v.jsx)(se.q,{src:i,alt:`${l}头像`,type:"extraSmall"})})}),(0,v.jsx)("div",{className:st.info,children:(0,v.jsx)("div",{className:st.nameInfo,children:(0,v.jsxs)("div",{className:st.nickname,children:[(0,v.jsx)(u9.a,{isNeedSeoOpt:!1,href:(0,oD.HC)(o,"enter_method=cooperation_list"),target:"_blank",rel:"noopener noreferrer",onClick:()=>{eb.emit(eb.EVENT.videoPause)},children:(0,v.jsx)(uy,{text:l})}),n&&(0,v.jsx)("div",{className:st.roleTitle,children:n})]})})}),(0,v.jsx)(sa,(0,E._)({},e))]}),(0,v.jsx)(uJ.i,{className:st.divider})]})}let su=e=>{let{showCooperationList:t,loginUserInfo:i,loginDispatch:l,awemeInfo:o,reportExtraParams:n}=e,r=f.useRef(null),[a,d]=(0,f.useState)(i.isLogin);return f.useEffect(()=>{let e="showCooperationList";return(0,u0.o)({pausePlayControlShortcut:!0,pauseCustomShortcut:!0,pauseGlobalShortcut:!0},e),()=>{(0,u0.m)(e)}},[]),f.useEffect(()=>{let e=r.current,t=e=>e.stopPropagation();return null==e||e.addEventListener("wheel",t),()=>{null==e||e.removeEventListener("wheel",t)}},[]),f.useEffect(()=>(ep.logInstance.sendLog("enterCoPublishPanel",{group_id:o.groupId,author_id:o.authorInfo.uid,enter_from_merge:"recommend",enter_from:(0,eI.mo)()}),eb.emit(eb.EVENT.videoStopPlayNext),()=>{eb.emit(eb.EVENT.videoRemoveStopPlayNext)}),[]),(0,v.jsxs)("div",{className:u3,children:[(0,v.jsxs)("div",{className:u6,children:[(0,v.jsx)("div",{className:u5,children:`${null==t?void 0:t.length}人共同创作`}),(0,v.jsx)(la.Z,{className:u4,width:36,height:36,src:u1.Z,color:"#A9AAB7",onClick:()=>{i$.Uq.destroy()}})]}),(0,v.jsx)(uJ.i,{className:u8}),(0,v.jsx)("div",{className:u7,ref:r,children:t.map(e=>(0,v.jsx)(sd,{userInfo:e,loginDispatch:l,loginUserInfo:i,isLogin:a,onLoginChange:e=>{d(e)},awemeInfo:o,reportExtraParams:n},e.secUid))})]})},ss=e=>{i$.Uq.render({children:(0,v.jsx)(su,(0,E._)({},e)),className:u2,onMaskClick:()=>i$.Uq.destroy()})};var sc=i("929582"),sv="aruPMVPh",sf="r4tiCdaJ",sm=i("428647"),sp={adWrapper:"VkYdp6jD",show:"HVoIKXUC",brandImg:"GBHYy_u0",adButton:"K_s9C44I",close:"xL9S818B",tapIcon:"GIPoCSFw",adIcon:"FjiTi0Mb"};let s_=(0,f.forwardRef)((e,t)=>(0,v.jsxs)("svg",(0,Q._)((0,E._)({width:30,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,v.jsx)("rect",{width:30,height:16,rx:2,fill:"#fff",fillOpacity:".08"}),(0,v.jsx)("path",{d:"M9.492 2.004L8.22 2.22c.216.336.408.72.588 1.128h-4.38v3.636c-.024 2.34-.348 4.176-.972 5.496l.96.852c.744-1.596 1.128-3.708 1.164-6.348V4.452h8.796V3.348h-4.308a16.717 16.717 0 0 0-.576-1.344zm15.564 6.672h-8.04v4.548h1.152v-.576h5.736v.576h1.152V8.676zm-6.888 2.904V9.756h5.736v1.824h-5.736zm-.276-6.732h2.688v1.656h-5.04V7.62h10.92V6.504h-4.74V4.848h3.828V3.756H21.72V2.148h-1.14v1.608h-2.016c.204-.408.372-.852.516-1.32l-1.128-.144c-.384 1.248-1.104 2.292-2.16 3.144l.684.9a8.301 8.301 0 0 0 1.416-1.488z",fill:"#fff",fillOpacity:".5"})]})));var sg=i.p+"media/db_tap.b545ba4bedef03d8.png",sh=i("96008"),sy=i.n(sh);let sw=(e,t,i)=>(f.useEffect(()=>i&&e?(null==e||e.on(t,i),()=>{null==e||e.off(t,i)}):sy(),[i,t,e]),null),sx=e=>{var t,i,l,o,n,r,a,d,u,s;let{awemeInfo:c,isActive:m,className:_,onBrandComponentShow:g,onBrandComponentClose:y,onImgError:w,brandAdComponentFloatTip:x,onBrandComponentHide:C}=e||{},[I,b]=(0,f.useState)(!1),[E,S]=(0,f.useState)(!1),T=(0,f.useRef)(!1),k=(0,f.useRef)(!1);!function(e){let{timerCb:t,isActive:i,awemeInfo:l,needInit:o=!0,stopBySeeking:n=!0}=e,r=(0,tr.n)(),a=(0,f.useRef)(!0),d=(0,f.useRef)(!1),u=(0,eJ.Z)(e=>{let{currentTime:i}=e||{};t({currentTime:i,isSeeking:!1})}),s=(0,eJ.Z)(e=>{let{currentTime:i}=e;if(0!==i){n&&(v(),a.current=!1),t({currentTime:i,isSeeking:!0});let e=(0,h.Rx)(l);(null==e?void 0:e.creative_id)&&(0,ia.E)("drag_bar",{tag:(0,iu.f)(),value:null==e?void 0:e.creative_id,log_extra:null==e?void 0:e.log_extra})}}),c=(0,eJ.Z)(()=>{if(!d.current){var e,t;null==r||null===(e=r.on)||void 0===e||e.call(r,tz.B.TimeUpdate,u),null==r||null===(t=r.on)||void 0===t||t.call(r,ev.Events.SEEKING,s)}d.current=!0}),v=(0,eJ.Z)(()=>{if(d.current){var e,t;null==r||null===(e=r.off)||void 0===e||e.call(r,tz.B.TimeUpdate,u),null==r||null===(t=r.off)||void 0===t||t.call(r,ev.Events.SEEKING,s)}d.current=!1}),m=(0,f.useCallback)(()=>{a.current=!0},[]),p=(0,f.useCallback)(()=>{o&&(m(),c()),t({currentTime:0,isSeeking:!0,isEnd:!0})},[o,m,c,t]);sw(r,tz.B.Ended,p),(0,eu.Z)(()=>{m()},[l]),(0,f.useEffect)(()=>{if(!!i){if(r&&a.current)return c(),()=>{v()}}},[r,l,i,c,v]),(0,f.useEffect)(()=>{(null==r?void 0:r.currentTime)&&u({currentTime:r.currentTime})},[r])}({timerCb:e=>{var t,i;if(T.current)return;let{currentTime:l,isEnd:o}=e,n=null!==(t=x.show_time)&&void 0!==t?t:3,r=null!==(i=x.show_time+.5)&&void 0!==i?i:3.5;l<n&&(b(!1),S(!1),null==C||C()),l>=n&&(!k.current&&(null==g||g(),k.current=!0),b(!0),null==g||g()),l>=r&&S(!0),o&&!T.current&&(!k.current&&(null==g||g(),k.current=!0),b(!0),S(!0),null==C||C())},stopBySeeking:!1,awemeInfo:c,isActive:m,needInit:!0});let L=iQ()(e=>{var t,i;e.stopPropagation(),eb.emit(eb.EVENT.videoPause),ep.logInstance.sendLog("brandAdIconClick",{group_id:null==c?void 0:c.awemeId,brand_ad_type:t9.AD_LOG_MAP[null==c?void 0:null===(i=c.webRawData)||void 0===i?void 0:null===(t=i.brandAd)||void 0===t?void 0:t.brand_type],img_url:null==x?void 0:x.img_url,position:"lower_left",icon_type:"image"})},1e3,{leading:!0,trailing:!1}),A=(0,dZ.x)(()=>{var e,t;ep.logInstance.sendLog("brandAdIconShow",{group_id:null==c?void 0:c.awemeId,brand_ad_type:t9.AD_LOG_MAP[null==c?void 0:null===(t=c.webRawData)||void 0===t?void 0:null===(e=t.brandAd)||void 0===e?void 0:e.brand_type],img_url:null==x?void 0:x.img_url,position:"lower_left",icon_type:"image"})});return(0,v.jsxs)("div",{className:p()(sp.adWrapper,_,{[sp.show]:I}),style:{width:null==x?void 0:null===(t=x.img_size)||void 0===t?void 0:t.width,height:null==x?void 0:null===(i=x.img_size)||void 0===i?void 0:i.height},ref:A,children:[(0,v.jsxs)(oG,{onClick:e=>L(e),className:sp.adButton,style:{width:null==x?void 0:null===(l=x.img_size)||void 0===l?void 0:l.width,height:null==x?void 0:null===(o=x.img_size)||void 0===o?void 0:o.height},target:"_blank",href:null==c?void 0:null===(r=c.webRawData)||void 0===r?void 0:null===(n=r.brandAd)||void 0===n?void 0:n.open_url,children:[(0,v.jsx)("img",{className:sp.brandImg,src:null==x?void 0:x.img_url,style:{width:null==x?void 0:null===(a=x.img_size)||void 0===a?void 0:a.width,height:null==x?void 0:null===(d=x.img_size)||void 0===d?void 0:d.height},onError:()=>{var e,t;null==w||w(),b(!1),T.current=!0,null==y||y(),l3.oe.event.error({name:l3.Mo.BrandComponentError,report:{type:"img"}}),ep.logInstance.sendLog("brandAdIconClose",{group_id:null==c?void 0:c.awemeId,brand_ad_type:t9.AD_LOG_MAP[null==c?void 0:null===(t=c.webRawData)||void 0===t?void 0:null===(e=t.brandAd)||void 0===e?void 0:e.brand_type]})}}),x.has_guide&&E&&(0,v.jsx)("img",{src:sg,className:sp.tapIcon}),(0,v.jsx)(la.Z,{className:sp.adIcon,src:s_,width:30,height:16,viewBox:"0 0 30 16"})]}),x.has_close_btn&&(0,v.jsx)(iG.z,{className:sp.close,svg:(0,v.jsx)(sm.Z,{}),style:{position:"absolute",bottom:`${null==x?void 0:null===(u=x.close_btn_position)||void 0===u?void 0:u.bottom}px`,right:`${null==x?void 0:null===(s=x.close_btn_position)||void 0===s?void 0:s.right}px`},onClick:e=>{var t,i;b(!1),T.current=!0,null==y||y(),ep.logInstance.sendLog("brandAdIconClose",{group_id:null==c?void 0:c.awemeId,brand_ad_type:t9.AD_LOG_MAP[null==c?void 0:null===(i=c.webRawData)||void 0===i?void 0:null===(t=i.brandAd)||void 0===t?void 0:t.brand_type]})}})]})},sC=e=>{var t,i,l,o,n,r,a,d;let{awemeInfo:u,className:s,isActive:c,onBrandComponentClose:m,onBrandComponentShow:_}=e||{},[g,h]=(0,f.useState)(!1),[y,x]=(0,f.useState)(!1),C=null==u?void 0:null===(t=u.webRawData)||void 0===t?void 0:t.brandAd,I=null==C?void 0:null===(o=C.biz_content)||void 0===o?void 0:null===(l=o.brand_ad_component_config)||void 0===l?void 0:null===(i=l.left)||void 0===i?void 0:i[0],b=(0,f.useRef)(!1),E=iQ()(e=>{var t,i;e.stopPropagation(),eb.emit(eb.EVENT.videoPause),ep.logInstance.sendLog("brandAdIconClick",{group_id:null==u?void 0:u.awemeId,brand_ad_type:t9.AD_LOG_MAP[null==u?void 0:null===(i=u.webRawData)||void 0===i?void 0:null===(t=i.brandAd)||void 0===t?void 0:t.brand_type],position:"lower_left",icon_type:"button"})},1e3,{leading:!0,trailing:!1}),S=!g&&(null==I?void 0:I.brand_ad_component_type)===w.Wy.Img&&!y;return((0,f.useEffect)(()=>{if(!S&&!b.current){var e,t;ep.logInstance.sendLog("brandAdIconShow",{group_id:null==u?void 0:u.awemeId,brand_ad_type:t9.AD_LOG_MAP[null==u?void 0:null===(t=u.webRawData)||void 0===t?void 0:null===(e=t.brandAd)||void 0===e?void 0:e.brand_type],position:"lower_left",icon_type:"button"}),b.current=!0}},[S]),S)?(0,v.jsx)(sx,{awemeInfo:u,isActive:c,onBrandComponentClose:()=>{null==m||m(),x(!0)},onBrandComponentHide:()=>{null==m||m()},onBrandComponentShow:_,onImgError:()=>{h(!0)},brandAdComponentFloatTip:null==I?void 0:I.brand_ad_component_float_tip}):(0,v.jsx)("div",{className:p()(sv,s),id:sv,children:(0,v.jsxs)(oG,{onClick:e=>E(e),className:sf,target:"_blank",href:null==u?void 0:null===(r=u.webRawData)||void 0===r?void 0:null===(n=r.brandAd)||void 0===n?void 0:n.open_url,children:[(0,v.jsx)("span",{children:(null==u?void 0:null===(d=u.webRawData)||void 0===d?void 0:null===(a=d.brandAd)||void 0===a?void 0:a.brand_title)||"查看详情"}),(0,v.jsx)(iG.z,{svg:(0,v.jsx)(sc.Z,{}),style:{color:"#ffffff"}})]})})};function sI(e){var t,i,l,o;let{awemeInfo:n}=e||{},r=(0,h.Kf)(n),a=null==n?void 0:null===(t=n.webRawData)||void 0===t?void 0:t.brandAd,d=null==a?void 0:a.open_url;return r&&d&&(null==a?void 0:null===(o=a.biz_content)||void 0===o?void 0:null===(l=o.brand_ad_component_config)||void 0===l?void 0:null===(i=l.left)||void 0===i?void 0:i.length)>0?(0,v.jsx)(sC,(0,E._)({},e)):null}let sb=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"FeedBrandAd",Slardar:t,children:(0,v.jsx)(sI,(0,E._)({},e))})};var sE=i("863499"),sS={bar:"nxKDgG5p",barDetail:"loHp2UKx",hasUrl:"Q6CXZt88",content:"Kp38XwAR",icon:"bwfKOPO0",iconImage:"VVIoPJcU",rightIcon:"rHFcfEAv"},sT=new ez.h({videoRiskRemindBarShow:{eventName:"video_risk_remind_bar_show",params:{enter_from:"",warn_type:"",is_skip:!1,group_id:"",author_id:""}},videoRiskRemindBarClick:{eventName:"video_risk_remind_bar_click",params:{enter_from:"",warn_type:"",is_skip:!1,group_id:"",author_id:""}}});let sk=(e,t)=>!!((null==e?void 0:e.content)&&!(null==e?void 0:e.url));var sL=e=>{let{risk:t,awemeInfo:i,isDetail:l,className:o}=e,{content:n,type:r,icon_url:a,url:d}=t,u=(0,dZ.Y)((()=>{var e;sT.sendLog("videoRiskRemindBarShow",{enter_from:(0,eI.vM)(),warn_type:String(r),is_skip:!!d,group_id:null==i?void 0:i.awemeId,author_id:null==i?void 0:null===(e=i.authorInfo)||void 0===e?void 0:e.uid})}).bind(null));return(0,v.jsx)("div",{ref:u,className:o,children:(0,v.jsxs)(oG,{href:decodeURIComponent(d),target:"_blank",onClick:e=>{if(d){var t;eb.emit(eb.EVENT.videoPause),sT.sendLog("videoRiskRemindBarClick",{enter_from:(0,eI.vM)(),warn_type:String(r),is_skip:!!d,group_id:null==i?void 0:i.awemeId,author_id:null==i?void 0:null===(t=i.authorInfo)||void 0===t?void 0:t.uid})}else null==e||e.preventDefault()},className:p()("safetyBar",sS.bar,{[sS.barDetail]:l,[sS.hasUrl]:!!d}),children:[a?(0,v.jsx)("img",{src:a,className:sS.iconImage}):(0,v.jsx)(iG.z,{svg:(0,v.jsx)(sE.Z,{}),className:sS.icon}),(0,v.jsx)("div",{className:sS.content,children:n}),d&&(0,v.jsx)(iG.z,{svg:(0,v.jsx)(sc.Z,{style:{fontSize:"14px"}}),className:sS.rightIcon})]})})},sA=i("480272");let sR=(0,f.createContext)(null),sN=()=>(0,f.useContext)(sR);var sP={wrapper:"MPakEI7B",hide:"ZO2Y8sZ7",tagPlugin:"AOXucVFR",left:"cS7H_KhS",text:"cW1rB6Gn"};let sM=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{d:"M4 1l5 5-5 5",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),sj=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.67 2.957a.5.5 0 0 1 .396-.12L8 3.496l4.934-.657a.5.5 0 0 1 .566.496v9a.5.5 0 0 1-.434.495l-5 .666a.496.496 0 0 1-.132 0l-5-.666a.5.5 0 0 1-.434-.496v-9a.5.5 0 0 1 .17-.376zM7.5 6v4.667h1V6h-1z",fill:"#000"})}))),sD=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{d:"M6.667 2.167A3.167 3.167 0 0 0 3.5 5.333h6.333a3.167 3.167 0 0 0-3.166-3.166zM2.167 6.167h11.666v.5c0 1.823-.074 3.702-.853 5.121a4.14 4.14 0 0 1-1.813 1.75c-.824.413-1.864.629-3.167.629-1.303 0-2.344-.216-3.167-.63a4.14 4.14 0 0 1-1.813-1.749c-.78-1.419-.853-3.298-.853-5.121v-.5zM12.333 5.333h-1.666c0-.87-.278-1.675-.75-2.331L10 3a2.333 2.333 0 0 1 2.333 2.333z",fill:"#000"})}))),sF=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.038 2.833c1.225 0 2.195 0 2.955.102.781.105 1.414.327 1.913.826.499.499.72 1.131.825 1.913.102.76.102 1.73.102 2.955v.188c0 .978 0 1.77-.088 2.362-.09.606-.291 1.148-.82 1.457-.528.309-1.099.219-1.671 0-.56-.214-1.25-.602-2.102-1.081L8 10.907l-1.152.648c-.852.48-1.542.867-2.102 1.081-.572.219-1.143.309-1.672 0-.528-.309-.73-.85-.82-1.457-.087-.593-.087-1.384-.087-2.362V8.63c0-1.225 0-2.196.102-2.955.105-.782.326-1.414.825-1.913.499-.5 1.132-.72 1.913-.826.76-.102 1.73-.102 2.955-.102h.076zm2.776 4.29a.876.876 0 1 1-1.753 0 .876.876 0 0 1 1.753 0zm-3.961-.83H5.186V7.96h1.667V6.293z",fill:"#000"})}))),sV=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.167a5.167 5.167 0 0 0-5.167 5.166v4.784a1.36 1.36 0 0 0 2.08 1.152l.945-.59.04-.026.009-.005a.167.167 0 0 1 .172.009l.039.026.874.59c.165.112.32.217.46.29.158.083.336.15.548.15.212 0 .39-.067.547-.15.14-.073.296-.178.46-.29l.896-.604.018-.012.009-.006a.167.167 0 0 1 .172.002l.04.025.945.591a1.36 1.36 0 0 0 2.08-1.152V7.333A5.167 5.167 0 0 0 8 2.167zm0 6c-.269 0-.472-.082-.604-.203-.124-.115-.23-.308-.23-.63h-1c0 .56.194 1.034.552 1.365.351.324.815.468 1.282.468.467 0 .93-.144 1.282-.468.358-.33.551-.805.551-1.366h-1c0 .323-.105.516-.23.631-.13.121-.334.203-.603.203z",fill:"#000"})}))),sO=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{d:"M11.26 4.119c-.374.007-.87.085-1.603.202l-2.285.366c-.549.087-.914.147-1.185.226-.258.075-.368.15-.44.235-.073.085-.13.206-.164.472-.035.28-.036.65-.036 1.206v4.841a2.024 2.024 0 1 1-1-1.746V6.795c0-.516 0-.95.044-1.299.046-.37.148-.707.395-.996.246-.29.563-.443.921-.547.338-.099.766-.167 1.276-.249l2.354-.376c.685-.11 1.252-.2 1.705-.209.474-.008.914.07 1.28.383.367.312.514.734.58 1.204.064.448.064 1.022.064 1.717v4.167a2.024 2.024 0 1 1-1-1.746V6.46c0-.741 0-1.244-.053-1.614-.05-.355-.137-.496-.24-.583-.101-.087-.254-.15-.614-.144z",fill:"#000"})}))),sB={300203:sj,300204:sD,300205:sF,300206:sV,300209:sO},sU=()=>{let e=sN();return e.state.ab.hitType1?(0,v.jsx)("div",{className:p()([sP.wrapper,!e.state.show&&sP.hide]),children:(0,v.jsxs)("div",{className:sP.tagPlugin,onClick:e.action.goChannel,children:[(0,v.jsxs)("div",{className:sP.left,children:[sB[e.state.awemeChannelId]&&(0,v.jsx)(la.Z,{className:sP.leftIcon,width:16,height:16,viewBox:"0 0 16 16",src:sB[e.state.awemeChannelId]}),(0,v.jsxs)("p",{className:sP.text,children:["去",e.state.text,"，浏览更多相似内容"]})]}),(0,v.jsx)(la.Z,{className:sP.rightIcon,width:12,height:12,viewBox:"0 0 12 12",src:sM})]})}):null},sH=()=>{let e=(0,o4.N)();return sN()?(0,v.jsx)(tl.k,{componentName:"TagPlugin",Slardar:e,children:(0,v.jsx)(sU,{})}):null},sW=(0,f.forwardRef)((e,t)=>(0,v.jsxs)("svg",(0,Q._)((0,E._)({width:30,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,v.jsx)("rect",{width:30,height:16,rx:2,fill:"#fff",fillOpacity:".08"}),(0,v.jsx)("path",{d:"M9.492 2.004L8.22 2.22c.216.336.408.72.588 1.128h-4.38v3.636c-.024 2.34-.348 4.176-.972 5.496l.96.852c.744-1.596 1.128-3.708 1.164-6.348V4.452h8.796V3.348h-4.308a16.717 16.717 0 0 0-.576-1.344zm15.564 6.672h-8.04v4.548h1.152v-.576h5.736v.576h1.152V8.676zm-6.888 2.904V9.756h5.736v1.824h-5.736zm-.276-6.732h2.688v1.656h-5.04V7.62h10.92V6.504h-4.74V4.848h3.828V3.756H21.72V2.148h-1.14v1.608h-2.016c.204-.408.372-.852.516-1.32l-1.128-.144c-.384 1.248-1.104 2.292-2.16 3.144l.684.9a8.301 8.301 0 0 0 1.416-1.488z",fill:"#fff",fillOpacity:".5"})]})));i("602157");let sz="function"==typeof Symbol&&Symbol.for?Symbol.for("react.memo"):"function"==typeof f.memo&&(0,f.memo)(e=>null).$$typeof;var sG=i("116989"),sZ=i("124919"),sq=i("873034"),sK=i("66863");let s$=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:28,height:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{d:"M19.59 9.59a.833.833 0 1 0-1.18-1.18L14 12.823 9.59 8.41a.833.833 0 1 0-1.18 1.178L12.822 14l-4.41 4.41a.833.833 0 0 0 1.178 1.18L14 15.177l4.41 4.411a.833.833 0 0 0 1.18-1.178L15.177 14l4.411-4.41z"})})));var sY={mask:"cE4n_PgX",container:"tOfxy5ft",header:"olYsHUVE",content:"nM0oM545",close:"ZSOUgBen","significant-authors":"u48Bdf2p","significant-authors__small":"QLxTgTvz","common-authors":"EazDs7zL","loading-container":"AbS4nXSY",refresh:"_fIo56rs"},sQ={container:"oVjRBCH2",avatar:"UGLGL7WI",small:"AJlUGVyx",name:"LU8uQP7G",role:"rReejHM7","role-prename":"KDiwW1IF","role-name":"gXSQN2Nc"};let sX=e=>e.map(e=>({avatarUri:e.avatar_thumb.url_list[0],nickname:e.nickname,uid:e.uid,followStatus:e.follow_status,followerCount:e.follower_count,followerStatus:e.follower_status,roleId:e.role_id,roleTitle:e.role_title,secUid:e.sec_uid})),sJ=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fontSize:14},i=t.fontSize<12?12:t.fontSize,l=t.fontSize<12?t.fontSize/12:1,o=document.createElement("div");o.innerText=e,o.style.fontSize=`${i}px`,o.style.position="fixed",o.style.zIndex="-999",document.body.appendChild(o);let n=o.offsetWidth;return document.body.removeChild(o),n*l};var s0=e=>{let{size:t,prename:i,roleTitle:l,author:o}=e,{secUid:n}=o,[r,a]=(0,f.useState)();return(0,f.useLayoutEffect)(()=>{a(sJ(l,{fontSize:12}))},[l]),(0,v.jsxs)(u9.a,{className:sQ.container,isNeedSeoOpt:!1,href:(0,oD.HC)(n,"enter_method=cooperation_list"),target:"_blank",rel:"noopener noreferrer",onClick:()=>{eb.emit(eb.EVENT.videoPause)},children:[(0,v.jsx)("img",{src:o.avatarUri,alt:"",className:p()(sQ.avatar,"small"===t&&sQ.small)}),(0,v.jsx)("div",{className:sQ.name,children:o.nickname}),(0,v.jsxs)("div",{className:sQ.role,children:[(0,v.jsx)("div",{className:sQ["role-prename"],children:(0,v.jsx)("span",{children:i})}),(0,v.jsx)("div",{className:sQ["role-name"],children:(0,v.jsx)("span",{style:{width:r},children:l})})]})]})},s1="rQYhCxXQ",s2="hKmLIL7M",s3="G5_o3ho3",s6="aYIhHJVh",s5=e=>{let{author:t,roleTitle:i}=e,{secUid:l}=t;return(0,v.jsxs)(u9.a,{className:s1,isNeedSeoOpt:!1,href:(0,oD.HC)(l,"enter_method=cooperation_list"),target:"_blank",rel:"noopener noreferrer",onClick:()=>{eb.emit(eb.EVENT.videoPause)},children:[(0,v.jsx)("img",{src:t.avatarUri,alt:"",className:s2}),(0,v.jsx)("div",{className:s3,children:t.nickname}),(0,v.jsx)("div",{className:s6,children:i})]})};let s4=e=>{let{totalNum:t,cursor:i,authorList:l,extra:o,awemeInfo:n,userInfo:r}=e,{significant_uid_list:a,custom_role_prename_map:d}=o;(0,f.useEffect)(()=>{let e="showCooperationList";return(0,u0.o)({pausePlayControlShortcut:!0,pauseCustomShortcut:!0,pauseGlobalShortcut:!0},e),()=>{(0,u0.m)(e)}},[]);let u=(0,f.useRef)(null);(0,f.useEffect)(()=>{let e=u.current,t=e=>e.stopPropagation();return null==e||e.addEventListener("wheel",t),()=>{null==e||e.removeEventListener("wheel",t)}},[]),(0,f.useEffect)(()=>(ep.logInstance.sendLog("enterCoPublishPanel",{group_id:n.groupId,author_id:n.authorInfo.uid,enter_from_merge:"recommend",enter_from:(0,eI.mo)()}),eb.emit(eb.EVENT.videoStopPlayNext),()=>{eb.emit(eb.EVENT.videoRemoveStopPlayNext)}),[]);let s=(0,f.useRef)((0,f.useMemo)(()=>new Set(l.map(e=>e.uid)),[])),c=(0,f.useMemo)(()=>l.find(e=>e.roleId===eG.CooperationRoleId.Author),[]),m=(0,f.useMemo)(()=>(null==a?void 0:a.length)?a.map(e=>l.find(t=>t.uid===e)):[],[]),_=(0,f.useRef)(!1);(0,f.useEffect)(()=>()=>{_.current=!0},[]);let[g,h]=(0,f.useState)(()=>l.filter(e=>!m.includes(e)).sort((e,t)=>{var i,l;return t.roleId===eG.CooperationRoleId.Author||t.uid===(null===(i=r.info)||void 0===i?void 0:i.uid)?1:e.roleId===eG.CooperationRoleId.Author||e.uid===(null===(l=r.info)||void 0===l?void 0:l.uid)?-1:0})),y=(0,f.useRef)(i),[w,x]=(0,f.useState)(!1),[C,I]=(0,f.useState)(!0),[b,E]=(0,f.useState)(t>l.length),{ref:S,inView:T}=(0,sG.useInView)(),k=(0,sq.d)(T),L=(0,sq.d)(async()=>{if(!b||w||_.current)return;x(!0),I(!1);let e=await (0,sK.U2)("/aweme/v1/co/cocreator/list/",{item_id:n.awemeId,index:y.current+1}).catch(e=>{throw I(!0),x(!1),e});if(_.current)return;let{user_info_list:t,has_more:i,status_code:l}=e;if(l&&l<0){I(!0),x(!1);return}let o=y.current,r=t.filter(e=>{let t=s.current.has(e.uid);return s.current.add(e.uid),o=e.index,!t});h(e=>[...e,...sX(r)]),E(i),x(!1),y.current=o,setTimeout(()=>{k.current&&L.current()},50)});return(0,f.useEffect)(()=>{T&&L.current()},[T]),(0,v.jsxs)("div",{className:sY.container,children:[(0,v.jsxs)("div",{className:sY.header,children:[(0,v.jsxs)("span",{children:[t,"人共同创作"]}),(0,v.jsx)(s$,{className:sY.close,onClick:()=>{i$.Uq.destroy()}})]}),(0,v.jsxs)("div",{className:sY.content,ref:u,children:[m.length>0&&(0,v.jsx)("div",{className:p()(sY["significant-authors"],m.length>2&&sY["significant-authors__small"]),children:m.map(e=>(0,v.jsx)(s0,{author:e,prename:d[e.uid],roleTitle:e.uid===(null==c?void 0:c.uid)&&o.author_role_name?o.author_role_name:e.roleTitle,size:m.length>2?"small":"normal"},e.uid))}),(0,v.jsx)("div",{className:sY["common-authors"],children:g.map(e=>(0,v.jsx)(s5,{author:e,roleTitle:e.uid===(null==c?void 0:c.uid)&&o.author_role_name?o.author_role_name:e.roleTitle},e.uid))}),(0,v.jsx)("div",{ref:S,className:sY["loading-container"],children:b?C?(0,v.jsxs)(v.Fragment,{children:["服务异常，重新",(0,v.jsx)("span",{onClick:L.current,className:sY.refresh,children:"刷新"}),"拉取数据"]}):(0,v.jsx)(sZ.g,{text:"加载中"}):"没有更多数据"})]})]})},s8=e=>{i$.Uq.render({children:(0,v.jsx)(s4,(0,E._)({},e)),className:sY.mask,onMaskClick:()=>i$.Uq.destroy()})},s7=function(e){let t=sz&&e.$$typeof===sz?e:(0,f.memo)(e);return function(e){let{isActive:i=!1,forceDelayUpdate:l=!1}=e,o=(0,f.useDeferredValue)(e),n=!i||l?o:e;return(0,v.jsx)(t,(0,E._)({},n))}}(e=>{var t,i,l,o,n,r,a,d,u,s,c;let{abTestData:m}=e,{awemeInfo:_,scene:y,isTopicLinkSearchResult:w,videoHashtagClassName:x,isTopicLinkDetail:I,videoTags:b=[],isShowCreateTime:S=!1,userInfo:T,onClickUserName:k,className:L,children:A,loginUserInfo:R,loginDispatch:N,fullScreenTarget:P,reportExtraParams:j,onCooperationAuthorClick:D,isShowCooperation:F=!1,showSideBar:V=!1,isActive:O,canMixListen:B,toast:H,showFriendIcon:W,showAccountName:z=!0,showTitle:G=!0,isInnerFeed:Z=!1,showGuideDownloadClient:q=!1,isShowBrandComponent:K=!1,onBrandComponentHide:$,onBrandComponentShow:Y,handleMobileSiteClick:Q,oneLineWarginig:X,hideMixNextBtn:ee=!1,modalEnterFrom:et,openSpecificTab:ei=()=>{},isDetail:el,isMainland:eo}=e,{pathname:en}=(0,ec.a)(),er=(0,tr.n)(),ea=sN(),[ed,eu]=(0,f.useState)(!0),es=(0,f.useRef)(null),ev=null===(t=C.Le.getConfig(C.gI.WallPaperIds))||void 0===t?void 0:t.includes(null==_?void 0:_.awemeId),{cooperationInfo:ef,awemeType:e_,awemeId:eg,authorInfo:ey,logPb:ew,desc:ex,textExtra:eC,mixInfo:eE,webRawData:ek}=_||{},[eA,eR]=(0,f.useState)(`${ex}${(null==ek?void 0:ek.targetTitle)?`\\N${null==ek?void 0:ek.targetTitle}`:""}`);(0,f.useEffect)(()=>{(null==ek?void 0:ek.targetTitle)?eR(`${ex}\\N${null==ek?void 0:ek.targetTitle}`):eR(ex)},[ek,ex]);let{cooperationCreators:eN,acceptedNums:eP=0,cursor:eM}=ef||{},ej=(0,f.useRef)(null);(0,f.useRef)();let eD=(0,f.useMemo)(()=>{if(!(null==eN?void 0:eN.length))return[];let e=[],t=eN.filter(t=>(t.roleId===eG.CooperationRoleId.Author&&e.push(t),t.roleId!==eG.CooperationRoleId.Author));return[...e,...t]},[eN]),eF=(0,f.useMemo)(()=>{if(!!(null==ef?void 0:ef.extra))return JSON.parse(ef.extra)},[null==ef?void 0:ef.extra]),eV=(null==eF?void 0:eF.is_large_co_activity)&&eP>=14,eO=eV?eP+1:eD.length||0;(0,f.useEffect)(()=>{var e;!eo&&!(null===(e=navigator)||void 0===e?void 0:e.language.startsWith("zh"))&&!ek.targetTitle&&(async()=>{let e=await (0,tJ.O9)({sourceText:ex,targetLanguage:"en"});if(0===e.statusCode){var t,i;let l=null===(i=e.translation)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.translation;eR(`${ex}\\N${l}`)}})()},[ek,eo,ex]);let eB=()=>{if("function"==typeof Q){Q();return}if(eV){s8({awemeInfo:_,authorList:eD,totalNum:eO,cursor:eM,extra:eF,userInfo:T});return}ss({logParams:{clickMethod:"more_button"},showCooperationList:eD,loginUserInfo:R,awemeInfo:_,reportExtraParams:j,loginDispatch:N})},{uid:eU,nickname:eH,remarkName:eW}=ey||{},ez=C.Le.getConfig(C.gI.AbtestData),eZ=(0,dZ.Y)(()=>{ep.logInstance.sendLog("postTimeShow",{enter_from:(0,eI.mo)(),group_id:_.awemeId,post_time:(0,it.MH)(1e3*_.createTime)})}),{lineHeight:eq,videoLineCamp:eK,maxLine:e$}=dX(er),{clickAuthorHeadLog:eY,clickTitleHashtagLog:eQ,clickTitleAtLog:eX,clickVideoTitleLog:eJ,titleNamedEntityWordsClickLog:e0,titleNamedEntityWordsShowLog:e1}=function(e){let{awemeInfo:t,videoTags:i,onClickUserName:l,authorId:o,awemeType:n,logPb:r,awemeId:a,player:d}=e;(0,f.useEffect)(()=>{let e=i.filter(e=>e.type===em.WZ.RelatedSearch);e.length&&d$.sendLog("trendingShow",{words_source:"related_search_anchor_v2",enter_from:(0,ie.yW)(),words_num:e.length,enter_group_id:t.awemeId,impr_id:(0,dK.U)(t).impr_id})},[i]);let u=(0,f.useCallback)(()=>{var e;d$.sendLog("clickAuthorHead",(0,E._)({click_from:"title",urlParamList:["previous_page"],author_id:o,group_id:a,log_pb:r,enter_from:(0,ie.yW)(),is_full_screen:(0,eS.r)()?"1":"0",from_follow_list:(null===(e=C.Le.getConfig(C.gI.FromFollowList))||void 0===e?void 0:e.tag)?"1":"0",from_xigua:n===g.e.XgVideo?1:0,aweme_type:n},(0,eT.t)())),eb.emit(eb.EVENT.videoPause),window.open((0,oD.GN)(o),(0,is.f)()?"_self":"_blank")},[o,n,r,a]),s=(0,f.useCallback)(()=>d$.sendLog("xiguaAnchorClick",{author_id:o,group_id:a}),[o,a]),c=(0,f.useCallback)(()=>d$.sendLog("xiguaAnchorShow",{author_id:o,group_id:a}),[o,a]),v=(0,f.useCallback)((e,t,i)=>{d$.sendLog("clickTitleHashtag",{hashtag:t.slice(1),urlParamList:["previous_page"],author_id:o,group_id:a,log_pb:r,enter_from:(0,ie.yW)(),is_full_screen:(0,eS.r)()?"1":"0",tag_id:e,status:"on",player_display_mode:(0,eI.Ok)()})},[o,a,r]),m=(0,f.useCallback)(e=>{d$.sendLog("clickTitleAt",{to_user_id:e,urlParamList:["previous_page"],author_id:o,group_id:a,log_pb:r,enter_from:(0,ie.yW)(),is_full_screen:(0,eS.r)()?"1":"0"})},[a,o,r]),p=(0,f.useCallback)(e=>{d$.sendLog("clickVideoTitle",{action:e?"fold":"expand",urlParamList:["previous_page"],author_id:o,group_id:a,log_pb:r,enter_from:(0,ie.yW)(),is_full_screen:(0,eS.r)()?"1":"0",player_display_mode:(0,eI.Ok)()})},[a,o,r,d]),_=(0,f.useCallback)((e,i,l)=>{d$.sendLog("trendingWordsClick",{enter_group_id:a,enter_group_type:n===g.e.Note?"aweme_image":"aweme_video",group_id:i,search_position:(0,ie.yW)(),words_content:e,words_position:l,impr_id:(0,dK.U)(t).impr_id})},[a,n,t]);return{clickAuthorHeadLog:u,xiguaAnchorClickLog:s,xiguaAnchorShowLog:c,clickTitleHashtagLog:v,clickTitleAtLog:m,clickVideoTitleLog:p,titleNamedEntityWordsClickLog:_,titleNamedEntityWordsShowLog:(0,f.useCallback)((e,i,l)=>{d$.sendLog("trendingWordsShow",{enter_group_id:a,enter_group_type:n===g.e.Note?"aweme_image":"aweme_video",group_id:i,search_position:(0,ie.yW)(),words_content:e,words_position:l,impr_id:(0,dK.U)(t).impr_id})},[a,n,t])}}({awemeInfo:_,videoTags:b,onClickUserName:k,authorId:eU,awemeType:e_,logPb:ew,awemeId:eg,player:er}),e2=(0,f.useCallback)(()=>{if("function"==typeof Q){Q();return}if(null==k||k(),(0,h.Jt)(_)){if(y!==em.lT.Recommend){if((0,h.gc)(_)){H?H("广告视频不支持此功能"):M.F.info("广告视频不支持此功能");return}}else{eb.emit(eb.EVENT.openAdSideCard);let e=(0,h.Rx)(_);(0,ia.E)("realtime_click",{tag:(0,iu.f)(),value:null==e?void 0:e.creative_id,log_extra:null==e?void 0:e.log_extra,refer:"title"});return}}if((0,h.gc)(_)){H?H("广告视频不支持此功能"):M.F.info("广告视频不支持此功能");return}e_===g.e.XgVideo?eY():eb.emit(eb.EVENT.videoTitleClick,{awemeId:eg,playerId:null==er?void 0:er.playerId})},[eU,e_,ew,eg,k,er,eY,Q]),e3=(0,f.useCallback)((e,t,i)=>{var l;let o=null==m?void 0:m.searchOpenCurrentTab;((null==o?void 0:o.save_status)!==1||(0,U.DT)()||(null===(l=window)||void 0===l?void 0:l.location.pathname)!=="/")&&w&&eb.emit(eb.EVENT.videoPause),eQ(e,t,i)},[w,eQ,Q]),e6=(0,f.useCallback)((e,t,i,l)=>{var o;let n=null==m?void 0:m.searchOpenCurrentTab;((null==n?void 0:n.save_status)!==1||(0,U.DT)()||(null===(o=window)||void 0===o?void 0:o.location.pathname)!=="/")&&eb.emit(eb.EVENT.videoPause),null==e0||e0(e,t,i)},[e0]),e5=(0,f.useCallback)(e=>{eb.emit(eb.EVENT.videoPause),eX(e)},[eX,Q]),e4=(0,f.useCallback)(e=>{var t;eb.emit(eb.EVENT.hideFakeScreen,!1),null==er||null===(t=er.emit)||void 0===t||t.call(er,"titleIsFold",e),eJ(e),eu(e)},[er,eJ]);(0,f.useEffect)(()=>{eu(!0)},[eg]);let e8=(0,f.useMemo)(()=>(0,h.Jt)(_),[_]),e7=(0,f.useMemo)(()=>(0,h.Kf)(_),[_]),e9=(0,h.Kf)(_),te=(0,f.useCallback)(e=>{let{isUnfold:t}=e;return(0,v.jsx)(uy,{wrapperClassName:dq.videoTitleWrapper,className:p()(dq.videoTitle,dq.adaptive),userTextClassName:p()(dq.hashTagSpan,dq.userText),hashTagClassName:p()({[dq.linkHashTag]:w},x),getHashTagHref:(e,t)=>w?`https://www.douyin.com/search/${encodeURIComponent(e)}?source=pc_click_hashtag_feed&enter_from=${(0,eI.vM)()}&aweme_id=${_.awemeId}&gid=${_.groupId}`:I?(0,oD.bP)(t):"",text:eA,getSearchTextUrl:(e,t)=>`https://www.douyin.com/search/${encodeURIComponent(e)}?source=title_named_entity&enter_from=${(0,eI.vM)()}&aweme_id=${_.awemeId}&gid=${_.groupId}`,isRemoveRowspan:!t,textExtra:eC,awemeInfo:_,onClickHashtag:Q||e3,onClickUser:Q||e5,onSearchTextClick:Q||e6,onSearchTextMounted:e1,enterMethod:"video_title_at",searchWordsType:uw.L.VideoInfoTitle,abTestData:m,player:er,children:(null==eE?void 0:eE.currentEpisode)&&(0,v.jsxs)("span",{children:["第",null==eE?void 0:eE.currentEpisode,"集："]})})},[_,eA]),tt=(0,f.useCallback)(()=>{ep.logInstance.sendLog("hover_author_head",{enter_from:(0,eI.mo)(),click_from:"title"})},[]),ti=(0,f.useMemo)(()=>b.slice(0,1),[b]);if(!(null==er?void 0:er.video))return null;let tl=b.length>0,to=(null==ea?void 0:ea.state.ab.hitType1)&&(null==ea?void 0:ea.state.show);return(0,v.jsxs)("div",{id:"video-info-wrap",className:p()("xgplayer-video-info-wrap xgplayer-video-info-wrap-new",dq.infoContainer,{fullscreen:!ed&&!!(null==m?void 0:null===(i=m.danmaku)||void 0===i?void 0:i.douyin_danmaku),[dq.hide]:(null==ea?void 0:ea.state.ab.hitType2)&&(null==ea?void 0:ea.state.show)}),"data-state":"normal",children:[A,(0,v.jsxs)("div",{className:p()("video-info-detail",{isFireFox:(0,eL.vU)(),wallpaperTitle:(null===(l=C.Le.getConfig(C.gI.WallPaperIds))||void 0===l?void 0:l.includes(null==_?void 0:_.awemeId))||q,wallpaperClientTile:(null===(o=C.Le.getConfig(C.gI.WallPaperIds))||void 0===o?void 0:o.includes(null==_?void 0:_.awemeId))&&(0,U.DT)()},L),"data-e2e":"video-info","data-e2e-aweme-id":_.awemeId,children:[!K&&z&&(0,v.jsxs)("div",{className:p()("account"),children:[(0,v.jsx)("div",{className:p()("account-name",{userAccountTextHover:1===m.textHoverStatus,userAccountTextHover2:2===m.textHoverStatus}),"data-e2e":"feed-video-nickname",onMouseEnter:tt,ref:ej,"data-click-from":"title",children:(0,v.jsx)("span",{onClick:e2,children:(0,v.jsx)(uy,{className:p()(dq.userText,dq.adaptive),text:`@${eW||eH}`})})}),(0,v.jsx)("div",{className:"video-create-time",children:S&&(0,v.jsx)("span",{ref:eZ,className:"time",children:`\xb7 ${(0,it.MH)(1e3*_.createTime)}`})}),!Z&&(e8&&(0,h.Gu)(_)||e7)&&(0,v.jsx)(la.Z,{src:sW,width:30,height:16,viewBox:"0 0 30 16",style:{marginLeft:4}}),e_===g.e.Note&&!(null==_?void 0:_.isSlides)&&(0,v.jsx)("div",{className:"account-card",children:(0,v.jsx)(uH,{className:dq.pictureStyle})}),!!((null==_?void 0:null===(r=_.authorInfo)||void 0===r?void 0:null===(n=r.relationLabel)||void 0===n?void 0:n.label_info)&&W)&&(0,v.jsx)("div",{className:"account-card",children:(0,v.jsx)("span",{className:dq.friendIcon,children:null==_?void 0:null===(d=_.authorInfo)||void 0===d?void 0:null===(a=d.relationLabel)||void 0===a?void 0:a.label_info})}),(null==eD?void 0:eD.length)>1&&F&&(0,v.jsx)(uX,{authorList:eD,num:eO,isTag:!0,onClick:eB})]}),!K&&(null==eD?void 0:eD.length)>0&&F&&(0,v.jsx)(uZ,{authorList:eD,loginUserInfo:R,loginDispatch:N,fullScreenTarget:P,reportExtraParams:j,awemeInfo:_,onCooperationAuthorClick:D,abTestData:m,showSideBar:V,onClickMore:eB,isDetail:el}),!K&&G&&(0,v.jsx)("div",{className:p()("title",{notBideoTags:(tl||to)&&!ev&&!q&&!K}),"data-e2e":"video-desc",children:(0,v.jsx)(uI,{maxLine:e$,lineClamp:eK,btnClassName:p()(dq.button,dq.expandButton,dq.adaptive),onlyKey:eA,btnOnClick:e4,lineHeight:eq,renderContent:(null==ez?void 0:ez.reduceRender)?te:e=>{let{isUnfold:t}=e;return(0,v.jsx)(uy,{wrapperClassName:dq.videoTitleWrapper,className:p()(dq.videoTitle,dq.adaptive),userTextClassName:p()(dq.hashTagSpan,dq.userText),hashTagClassName:p()({[dq.linkHashTag]:w},x),getHashTagHref:(e,t)=>w?`https://www.douyin.com/search/${encodeURIComponent(e)}?source=pc_click_hashtag_feed&enter_from=${(0,eI.vM)()}&aweme_id=${_.awemeId}&gid=${_.groupId}`:I?(0,oD.bP)(t):"",text:eA,getSearchTextUrl:(e,t)=>`https://www.douyin.com/search/${encodeURIComponent(e)}?source=title_named_entity&enter_from=${(0,eI.vM)()}&aweme_id=${_.awemeId}&gid=${_.groupId}`,isRemoveRowspan:!t,textExtra:eC,awemeInfo:_,onClickHashtag:Q||e3,onClickUser:Q||e5,onSearchTextClick:Q||e6,onSearchTextMounted:e1,enterMethod:"video_title_at",searchWordsType:uw.L.VideoInfoTitle,abTestData:m,player:er,children:(null==eE?void 0:eE.currentEpisode)&&(0,v.jsxs)("span",{children:["第",null==eE?void 0:eE.currentEpisode,"集："]})})},showExpandButton:!e8,player:er,isMobile:!0,isActive:O})}),(0,v.jsx)("div",{className:p()(dq.underTitleTagContainer,dq.rsBarOpt),onClickCapture:e=>null==Q?void 0:Q(e),ref:es,children:eo&&!ev&&!q&&!K&&!e9&&(0,v.jsxs)(v.Fragment,{children:[(null==ea?void 0:ea.state.ab.hitType1)&&(0,v.jsx)(sH,{}),tl&&(0,v.jsx)("div",{className:p()("under-title-tag",dq.videoTagContainer),children:(0,v.jsx)(uV,{tagList:ti,awemeInfo:_,userInfo:T,isActive:O,reportExtraParams:j,isShowUpdateText:!0,player:er,abTestData:m,containerRef:es})})]})}),(0,h.Kf)(_)&&!Z&&(0,v.jsx)(sb,{awemeInfo:_,isActive:O,className:dq.brandAd,onBrandComponentClose:()=>{null==$||$()},onBrandComponentShow:()=>{null==Y||Y()}}),sk(null==_?void 0:_.riskInfos,m)&&(0,v.jsx)(sL,{awemeInfo:_,risk:null==_?void 0:_.riskInfos,className:p()({[dq.marginTop]:tl&&!ev&&!q,[dq.oneLineText]:X})}),y===em.lT.Search&&!!_.videoAbstract&&(null===(u=_.videoAbstract)||void 0===u?void 0:u.displayType)===2&&(0,v.jsx)("div",{id:"video-abstract",style:{marginTop:"12px"},children:(0,v.jsx)(sA.r,{awemeInfo:_,isActive:O,player:er,logParams:j,isInnerFeed:Z,isModal:void 0!==et,openSpecificTab:ei})}),y!==em.lT.Search&&!Z&&(et===eh.a.GeneralSearch||et===eh.a.Search)&&!!_.videoAbstract&&[2,3].includes(null===(s=_.videoAbstract)||void 0===s?void 0:s.displayType)&&(0,v.jsx)("div",{id:"video-abstract",style:{marginTop:"12px"},children:(0,v.jsx)(sA.r,{awemeInfo:_,isActive:O,player:er,logParams:j,isInnerFeed:Z,isModal:void 0!==et,openSpecificTab:ei})})]}),(0,v.jsx)("div",{className:p()("mobile-video-info-mask",{"windows-client-flag":(null===(c=(0,l8.fV)())||void 0===c?void 0:c.os)==="Windows"&&(0,U.DT)(),"splash-brand":(0,J.p)(_)&&!Z})}),(0,v.jsx)("div",{className:"mini-progress-outer",children:(0,v.jsx)("div",{className:"mini-progress-inner"})})]})});var s9=i("730319");let ce=R.CookieKeys.StreamPlayerStatusParams,ct=e=>V.Q.setItem(ce,JSON.stringify(e)),ci=C.gI.PlayerStatus,cl=e=>C.Le.setConfig(ci,e),co=()=>{let e=(0,tr.n)();return(0,f.useEffect)(()=>{if(!e)return()=>{};let t=()=>{let t=function(e){var t,i,l,o,n,r;let a={};return a.is_auto_play=(null===(l=e.plugins)||void 0===l?void 0:null===(i=l.autoplaysettingplugin)||void 0===i?void 0:null===(t=i.config)||void 0===t?void 0:t.nextAutoPlay)||(null==e?void 0:null===(r=e.plugins)||void 0===r?void 0:null===(n=r.searchautoplaysettingplugin)||void 0===n?void 0:null===(o=n.config)||void 0===o?void 0:o.nextAutoPlay)?1:0,a.is_full_screen=(0,eS.r)()?1:0,a.is_full_webscreen=tG.s.getIsPageFullscreen()?1:0,a.is_mute=e.muted?1:0,a.is_speed=e.playbackRate,a.is_visible=(0,s9.d)()?1:0,a}(e);ct(t),cl(t)};t();let i=[tz.B.AutoPlaySwitchChange,ev.Events.FULLSCREEN_CHANGE,ev.Events.VOLUME_CHANGE,ev.Events.RATE_CHANGE],l=["visibilitychange"],o=[eb.EVENT.pageFullScreen];i.forEach(i=>e.on(i,t)),l.forEach(e=>document.addEventListener(e,t));let n=o.map(e=>eb.listen(e,t));return()=>{i.forEach(i=>e.off(i,t)),l.forEach(e=>document.removeEventListener(e,t)),n.forEach(e=>null==e?void 0:e())}},[e]),null},cn=e=>{let t=(0,o4.N)();return(0,v.jsx)(tl.k,{componentName:"RecRawDataCookiePlugin",Slardar:t,children:(0,v.jsx)(co,(0,E._)({},e))})},cr=e=>{let{player:t,awemeId:i,showSideCard:l,curTab:o}=e;(0,f.useEffect)(()=>{if(!t)return()=>{};let e=()=>{un.H.collect("currentTime",t.currentTime)},i=()=>{un.H.collect("isPause",!0)},l=()=>{un.H.collect("isPause",!1)};t.on(ev.Events.TIME_UPDATE,e),t.on(ev.Events.PAUSE,i),t.on(ev.Events.PLAY,l);let o=eb.listen(eb.EVENT.pageFullScreen,e=>{un.H.collect("isPageFullScreen",e.fullScreen)});return()=>{t.off(ev.Events.TIME_UPDATE,e),t.off(ev.Events.PAUSE,i),t.off(ev.Events.PLAY,l),null==o||o()}},[t,i]),(0,f.useEffect)(()=>{un.H.collect("showSideCard",l)},[l]),(0,f.useEffect)(()=>{un.H.collect("curTab",o)},[o])},ca=e=>{let{player:t,awemeId:i,setSideCard:l,setCurTab:o}=e,n=(0,f.useRef)({setSideCard:l,setCurTab:o});n.current.setSideCard=l,n.current.setCurTab=o,(0,f.useEffect)(()=>{let e=un.H.getCache();if(!t||!un.H.needRollback||i!==(null==e?void 0:e.awemeId))return()=>{};un.H.needRollback=!1,e.currentTime&&(t.currentTime=e.currentTime);let l=()=>{e.isPause&&t.pause()};return t.once(ev.Events.PLAY,l),t.once(ev.Events.AUTOPLAY_STARTED,l),e.isPageFullScreen&&eb.emit(eb.EVENT.pageFullScreen,{playerId:t.playerId,fullScreen:!0}),setTimeout(()=>{var t,i;void 0!==e.showSideCard&&(null===(t=n.current)||void 0===t||t.setSideCard(e.showSideCard)),void 0!==e.curTab&&(null===(i=n.current)||void 0===i||i.setCurTab(e.curTab))},1e3),()=>{t.off(ev.Events.PLAY,l),t.off(ev.Events.AUTOPLAY_STARTED,l)}},[t,i])},cd=e=>{let{awemeInfo:t,sideCardContext:i}=e,l=(0,tr.n)();return cr({player:l,awemeId:null==t?void 0:t.awemeId,showSideCard:i.showSideCard,curTab:i.curTab}),ca({player:l,awemeId:null==t?void 0:t.awemeId,setSideCard:i.setSideCard,setCurTab:i.setCurTab}),null},cu=e=>{let t=(0,o4.N)();return(0,f.useEffect)(()=>{(e.needVideo||e.needState)&&(un.H.setCache(),un.H.collect("awemeId",e.awemeInfo.awemeId))},[e.needVideo,e.needState,e.awemeInfo,e.isActive]),(0,v.jsx)(tl.k,{componentName:"RecommendPageStatePlugin",Slardar:t,children:e.needState&&(0,v.jsx)(cd,(0,E._)({},e))})};var cs=i("622109");i("110617"),i("242079");var cc=i("670537"),cv="manifest",cf="network",cm="network_timeout",cp="network_forbidden",c_="network_notfound",cg="network_range_not_satisfiable",ch="demux",cy="remux",cw="media",cx="drm",cC="other",cI="runtime",cb=(c={},(0,cc._x)(c,cv,{HLS:1100,DASH:1200}),(0,cc._x)(c,cf,2100),(0,cc._x)(c,cm,2101),(0,cc._x)(c,cp,2103),(0,cc._x)(c,c_,2104),(0,cc._x)(c,cg,2116),(0,cc._x)(c,ch,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),(0,cc._x)(c,cy,{FMP4:4100,MP4:4200}),(0,cc._x)(c,cw,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,EME_HIJACK:5301}),(0,cc._x)(c,cx,{LICENSE:7100,CUSTOM_LICENSE:7200}),(0,cc._x)(c,cC,8e3),(0,cc._x)(c,cI,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),c),cE={errorCode:cb[cp],errorType:"network",errorMessage:"",httpCode:cb[cp],mediaError:{code:cb[cp],message:""}},cS=function(){try{return parseInt(performance.now().toString(),10)}catch(e){return new Date().getTime()}},cT=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||"String"!==(t=e,Object.prototype.toString.call(t).match(/([^\s.*]+)(?=]$)/g)[0]))return 0;var l=0;try{var o=RegExp("(\\?|&)x-tos-expires=([^&]*)(&|$)"),n=e.match(o);if(null!==n)l=parseInt(n[2],10);else{var r=e.split("/");r.length>5&&8===r[4].length&&(l=parseInt(r[4],16))}if(l>0){var a=parseInt(String(i&&"number"==typeof i?new Date().getTime()/1e3+i:new Date().getTime()/1e3),10);return l<a?1:2}return 0}catch(e){return 0}},ck=function(e){function t(e){var i;return(0,cs.PA)(this,t),(i=(0,cs.$w)(this,t,[e]))._handleExpiryCheck=function(){var e=i.config;if(!(i.player._customExpiryCheck||!e.enableExpiryCheck||cS()-i._lastCheckTime<1e3)){if(e.useCdnExpiryTime){i.handleUrlExpiryCheckByCdnPath(),i._lastCheckTime=cS();return}}},i._lastCheckTime=cS(),i.emitExpireTimestamp=null,i}return(0,cs.XW)(t,e),(0,cs.qH)(t,[{key:"beforePlayerInit",value:function(){var e=this.config,t=this.player;e.enableExpiryCheck&&!t._customExpiryCheck&&(this.on(ev.Events.PLAY,this._handleExpiryCheck),this.on(ev.Events.TIME_UPDATE,this._handleExpiryCheck),this.on(ev.Events.LOAD_START,this._handleExpiryCheck),this.on(ev.Events.LOADED_DATA,this._handleExpiryCheck),this.on(ev.Events.SEEKING,this._handleExpiryCheck),this.on(ev.Events.WAITING,this._handleExpiryCheck))}},{key:"handleUrlExpiryCheckByCdnPath",value:function(){var e,t=this.config,i=this.player;if(!i||!t)return;var l=(null===(e=i.curDefinition)||void 0===e?void 0:e.url)||i.config.url,o=Array.isArray(l)?l[0]:l;if(!o)return;var n="string"==typeof o?o:o.src;if(!!n)1===cT(n,t.expiryOffset)&&this._emitExpireEvent(cE)}},{key:"_emitExpireEvent",value:function(e){var t=this.player,i=new Date().getTime()/1e3;return this.emitExpireTimestamp?!!(i-this.emitExpireTimestamp>300)&&(this.emitExpireTimestamp=i,t.emit("MEDIA_EXPIRED",e),!0):(this.emitExpireTimestamp=i,t.emit("MEDIA_EXPIRED",e),!0)}},{key:"destroy",value:function(){this.config.enableExpiryCheck&&!this.player._customExpiryCheck&&(this.off(ev.Events.PLAY,this._handleExpiryCheck),this.off(ev.Events.TIME_UPDATE,this._handleExpiryCheck),this.off(ev.Events.LOAD_START,this._handleExpiryCheck),this.off(ev.Events.LOADED_DATA,this._handleExpiryCheck),this.off(ev.Events.SEEKING,this._handleExpiryCheck),this.off(ev.Events.WAITING,this._handleExpiryCheck))}}],[{key:"pluginName",get:function(){return"ExpiryCheck"}},{key:"defaultConfig",get:function(){return{enableExpiryCheck:!1,useCdnExpiryTime:!1,expiryOffset:30}}}])}(ev.BasePlugin);let cL=e=>{let{config:t={},abtestData:i={}}=e,l=C.Le.getConfig(C.gI.ServerTimeOffset);i.checkUrlTime&&l<=6e4&&(t.plugins=[...t.plugins||[],ck],t.expirycheck={enableExpiryCheck:!0,useCdnExpiryTime:!0,expiryOffset:35})},cA=e=>{let{ref:t,player:i,awemeInfo:l,abtestData:o,isActive:n}=e;(0,f.useEffect)(()=>{if(i&&n){let e=()=>{var e,i,l;let o=null===(l=t.current)||void 0===l?void 0:null===(i=l.root)||void 0===i?void 0:null===(e=i.getBoundingClientRect)||void 0===e?void 0:e.call(i);o&&o.width&&o.height&&C.Le.setConfig(C.gI.VideoRect,{width:o.width,height:o.height-48})};return i.once(ev.Events.TIME_UPDATE,e),()=>i.off(ev.Events.TIME_UPDATE,e)}},[i,n,o])},cR=e=>{let{isActive:t,timeout:i=2e3,useIdleCallback:l=!1,immediately:o=!1,callback:n}=e,r=(0,f.useRef)();r.current=n,(0,f.useEffect)(()=>{if(o){var e;return null===(e=r.current)||void 0===e?void 0:e.call(r)}},[o]),(0,f.useEffect)(()=>{if(!o&&l&&t){var e,i;let t;let l=0,o=setTimeout(()=>{var e,i,o;t=null===(e=r.current)||void 0===e?void 0:e.call(r),null===(i=(o=window).cancelIdleCallback)||void 0===i||i.call(o,l)},200);return l=null===(e=(i=window).requestIdleCallback)||void 0===e?void 0:e.call(i,()=>{var e;t=null===(e=r.current)||void 0===e?void 0:e.call(r),clearTimeout(o)}),()=>{var e,i;clearTimeout(o),null===(e=(i=window).cancelIdleCallback)||void 0===e||e.call(i,l),null==t||t()}}},[o,l,t]),(0,f.useLayoutEffect)(()=>{let e;if(o||l||!t)return;let n=setTimeout(()=>{var t;null==a||a(),e=null===(t=r.current)||void 0===t?void 0:t.call(r)},i),a=eb.listen(eb.EVENT.firstFrameReady,()=>{var t;e=null===(t=r.current)||void 0===t?void 0:t.call(r),clearTimeout(n)});return()=>{a(),null==e||e(),clearTimeout(n)}},[t,o,i,l])},cN=e=>{let{immediately:t,once:i,delay:l}=e,[o,n]=(0,f.useState)(t);return cR((0,Q._)((0,E._)({},e),{callback:()=>{let e;return!t&&l?e=setTimeout(()=>{n(!0)},l):n(!0),()=>{e&&clearTimeout(e),!t&&!i&&n(!1)}}})),{isShow:o}},cP=e=>{let{isActive:t,player:l,abtestData:o}=e,n=(0,f.useRef)(null);(0,t3.b)(async()=>{if(!n.current)try{let{Pylon:e,EBiz:t}=await i.e("74770").then(i.bind(i,198991));n.current=new e({biz:t.DOUYIN_WEB_RECOMMEND})}catch(e){}},[]),(0,f.useEffect)(()=>{if(t&&n.current&&l)try{let e=null==o?void 0:o.slidePreloadConfig,t=n.current.strategyInference({scene:"feed_slide",abConfig:{slideStrategy:(null==e?void 0:e.slideConfig)||[6,12]}});C.Le.setConfig(C.gI.FastSlowSlide,t);let i=window.playerPreloader;if(!(null==e?void 0:e.open)||!window.playerPreloader)return;0===t?i.updateConfig(e.normal):2===t?i.updateConfig(e.slow):1===t&&i.updateConfig(e.fast)}catch(e){}},[t,l,null==o?void 0:o.slidePreloadConfig]),(0,f.useEffect)(()=>{if(l&&t){let e=iQ()(()=>{let t=null==l?void 0:l.bufferedPoint,i=(null==t?void 0:t.end)-(null==l?void 0:l.currentTime)||0,n=Object.assign({},null==o?void 0:o.loadMore,null==o?void 0:o.loadMoreServer);i>(null==n?void 0:n.bufferEmit)&&(eb.emit(eb.EVENT.bufferedLoadMore),l.off(ev.Events.TIME_UPDATE,e))},2e3);return l.on(ev.Events.TIME_UPDATE,e),()=>{l.off(ev.Events.TIME_UPDATE,e)}}},[t,l,o])},cM=e=>{let{prevAwemeInfo:t,awemeInfo:i,isInnerFeedModel:l}=e,o=(0,f.useRef)(i);(0,f.useEffect)(()=>{o.current=i},[i]),(0,f.useEffect)(()=>{let e=null==eb?void 0:eb.listen(null==eb?void 0:eb.EVENT.quitInnerFeed,e=>{e&&C.Le.setConfig(C.gI.PreAwemeId,"")});return()=>e()},[]),(0,f.useEffect)(()=>{let e=(0,B.$o)(R.LocalStorageKeys.HasUseFlashBack),i=(0,B.$o)(R.LocalStorageKeys.ShowFlashBackTipNum)||0;if(l&&!e&&i<3){var n;let e=C.Le.getConfig(C.gI.PreAwemeId);e&&e===(null===(n=o.current)||void 0===n?void 0:n.awemeId)?eb.emit(eb.EVENT.showFlashbackTip,!0):eb.emit(eb.EVENT.showFlashbackTip,!1),(null==t?void 0:t.awemeId)&&C.Le.setConfig(C.gI.PreAwemeId,null==t?void 0:t.awemeId)}},[t,l])},cj=e=>{let{isActive:t,once:i=!1}=e,[l,o]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{if(t&&!l){var e,n;let t=0,l=setTimeout(()=>{var e,i;o(!0),null===(i=window)||void 0===i||null===(e=i.cancelIdleCallback)||void 0===e||e.call(i,t)},200);return t=null===(n=window)||void 0===n?void 0:null===(e=n.requestIdleCallback)||void 0===e?void 0:e.call(n,()=>{o(!0),clearTimeout(l)}),()=>{var e,n;!i&&o(!1),clearTimeout(l),null===(n=window)||void 0===n||null===(e=n.cancelIdleCallback)||void 0===e||e.call(n,t)}}},[t]),{idlCallBackFlag:l}},cD=e=>{let{isNext:t,positionIndex:i,abtestData:l}=e,[o,n]=(0,f.useState)(!1),r=(0,f.useRef)(!1);return(0,f.useEffect)(()=>eb.listen(eb.EVENT.firstFrameReady,()=>{r.current=!0}),[]),(0,f.useEffect)(()=>{if(t&&1===i&&(null==l?void 0:l.mergeOptimization)){if(!r.current)return eb.listen(eb.EVENT.firstFrameReady,()=>{n(!0)});n(!0)}},[null==l?void 0:l.firstFrameOptV3,null==l?void 0:l.mergeOptimization]),{flag:o}};var cF=i("296884"),cV=i("860524");let cO=!1,cB=()=>{if(cO)return null;cO=!0;let e=C.Le.getConfig(C.gI.PlayerStateBeforeRefeshForNotUse);if(e&&"object"==typeof e)return C.Le.setConfig(C.gI.PlayerStateBeforeRefeshForNotUse,null),e;if((0,j.Rs)(cV.REFRESH_FOR_NOT_USE)){let e=(0,j.Rs)(cV.VID)||(0,j.Rs)(cV.MODAL_ID),t=Number((0,j.Rs)(cV.SEEK_TIME)),i=!!(0,j.Rs)(cV.REFRESH_IMMERSIVE_SWITCH),l=(0,j.Rs)(cV.REFRESH_VIDEO_TAB);return Promise.resolve().then(()=>{let e=(0,cF.q)([cV.REFRESH_FOR_NOT_USE,cV.VID,cV.SEEK_TIME,cV.REFRESH_IMMERSIVE_SWITCH,cV.REFRESH_VIDEO_TAB],location.href);history.replaceState({},"",e)}),{vid:e,seekTime:t,immersiveSwitch:i,videoTab:l}}return null},cU=()=>{let e=C.Le.getConfig(C.gI.PlayerStateFromLynx);(null==e?void 0:e.vid)&&C.Le.setConfig(C.gI.PlayerStateFromLynx,(0,Q._)((0,E._)({},e),{hasSeek:!0}))},cH=e=>{let{config:t,player:i,isActive:l,awemeInfo:o,setIsSideBarShowFunc:n,setSlideVideoTab:r,playerReady:a}=e,d=(0,f.useRef)(l),u=(0,f.useRef)(void 0),s=(0,f.useRef)(null);if((0,f.useEffect)(()=>{s.current&&s.current!==o.awemeId&&dR.sendLog("refreshNoMatchVid",{vid:s.current})},[]),!l)return t.autoplay=l,t.notUseRefreshVid=null,i&&(i.config.notUseRefreshVid=null),t.isOnByOuter=void 0,t;if((0,O.B)()||(0,O.r)())return t.autoplay=!1,t;let c=()=>{cU(),C.Le.setConfig(C.gI.PlayerStateFromLynx,void 0),i.off("seeked",c)},v=C.Le.getConfig(C.gI.PlayerStateFromLynx);if(v){let{vid:e,seekTime:n,paused:r,muted:a,hasSeek:u}=v;return l&&e&&(null==o?void 0:o.awemeId)&&e!==(null==o?void 0:o.awemeId)?(C.Le.setConfig(C.gI.PlayerStateFromLynx,void 0),t):(t.autoplay=!1,d.current=!1,t.notUseRefreshVid=o.awemeId,e===o.awemeId&&(t.autoplay=!r,t.startTime=n,i&&!u&&(i.seek(n,r?"pause":"play"),i.on("seeked",c))),i&&(i.muted=a),eb.emitAfterListen(eb.EVENT.CheckAllowPlay),t)}eb.emitAfterListen(eb.EVENT.CheckAllowPlay);let m=cB();if(m){let{vid:e,seekTime:i,immersiveSwitch:l,videoTab:a}=m;s.current=e,t.autoplay=!1,d.current=!1,t.notUseRefreshVid=o.awemeId,e===o.awemeId&&i&&document.hidden&&(t.startTime=i,l&&(u.current=!0),a&&(null==n||n(!0),null==r||r(a)))}return i&&i.config&&i.config.notUseRefreshVid!==o.awemeId&&(t.notUseRefreshVid=null,i.config.notUseRefreshVid=null,u.current=void 0),t.isOnByOuter=u.current,t.autoplay=d.current,t};i("368529");var cW=i("419631"),cz=i.n(cW);let cG=!1,cZ=e=>{let{awemeInfo:t,isFirst:i,isActive:l,timeout:o=2e3}=e,n=(0,tr.n)();return(0,f.useEffect)(()=>{if(!l)return;let e=cz()(function(){let{isDown:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cG=!0,eb.emit(eb.EVENT.firstFrameReady,{firstFrameReadyPlayer:n,vid:null==t?void 0:t.awemeId,playerId:null==n?void 0:n.playerId,isFirst:i,isDown:!!e,isActive:l})});if((null==t?void 0:t.awemeType)!==g.e.Normal){setTimeout(()=>{e({isDown:!0})},0);return}if((null==t?void 0:t.awemeType)===g.e.Normal&&n){if(!1===i&&!cG||n.isPlaying||n.currentTime>0){setTimeout(()=>{e({isDown:!0})},0);return}n.on(ev.Events.AUTOPLAY_STARTED,e),n.on(ev.Events.AUTOPLAY_PREVENTED,e);let t=setTimeout(()=>{e({isDown:!0})},o);return()=>{n.off(ev.Events.AUTOPLAY_STARTED,e),n.off(ev.Events.AUTOPLAY_PREVENTED,e),clearTimeout(t)}}},[n,t,i,l,o]),null},cq=(0,f.forwardRef)((e,t)=>(0,v.jsx)("svg",(0,Q._)((0,E._)({width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,v.jsx)("path",{d:"M17.448 17.448a1.886 1.886 0 0 1-2.668 0L9 11.668l-5.78 5.78A1.886 1.886 0 1 1 .552 14.78L6.332 9 .552 3.22A1.886 1.886 0 1 1 3.22.552L9 6.332l5.78-5.78a1.886 1.886 0 1 1 2.668 2.668L11.668 9l5.78 5.78a1.886 1.886 0 0 1 0 2.668z",fill:"#fff"})})));var cK={container:"jYJR9Swl",hide:"DlodYVNe",wrapper:"knqn2x7Q",circle:"UNUCYQTv",close:"aIBuwwQ9",back:"QmflNA4Z",clientHomeStyleWrap:"t3tqp27T"};let c$=e=>{let{onClick:t,isClientMiniWin:i,className:l,isBackSvg:o=!1}=e,n=(0,U.DT)()&&(0,iU.y)((0,U.FJ)().awemePcClient,">=","5.4.0");return(0,v.jsx)("div",{className:p()(cK.container,"isDark",l,{[cK.hide]:i},n&&cK.clientHomeStyleWrap),onClick:t,children:(0,v.jsxs)("div",{className:cK.wrapper,children:[(0,v.jsx)("div",{className:cK.circle}),o||n?(0,v.jsx)(iG.z,{className:cK.back,svg:(0,v.jsx)(iW.Z,{style:{fontSize:"24px"}})}):(0,v.jsx)(la.Z,{src:cq,className:cK.close,viewBox:"0 0 18 18"})]})})};var cY=i("4168");let cQ=e=>{let{player:t,awemeInfo:i}=e,l=(0,f.useRef)(0);(0,f.useEffect)(()=>{if(t&&i){let{seriesInfo:o,awemeId:n}=i||{},{seriesId:r,currentEpisode:a}=o||{},d=!1,u=async e=>{let{currentTime:i}=e;if(!d&&r&&n&&l.current<5&&i>=5){d=!0;try{let e=await (0,cY.tJ)({episode:a,seriesId:r,awemeId:n});if((null==e?void 0:e.statusCode)===0){var o;null==t||null===(o=t.off)||void 0===o||o.call(t,ev.Events.TIME_UPDATE,u)}else throw Error(null==e?void 0:e.statusMessage)}catch(e){l.current++}d=!1}};if(r){var e;return null==t||null===(e=t.on)||void 0===e||e.call(t,ev.Events.TIME_UPDATE,u),()=>{var e;null==t||null===(e=t.off)||void 0===e||e.call(t,ev.Events.TIME_UPDATE,u),l.current=0}}}},[t,i])};var cX={weeklyRecommendTagContainer:"Z44GFhiK",weeklyRecommendTag:"Y20_XSRA",icon:"MnXmmOBR",text:"fKWS4FSd",player:"M24TvCg6",videoCard:"gLcRXQOu",titlePrefix:"KWnSKUoX",dark:"D0soucvm",isDark:"Ot5CxT3f"};let cJ=e=>{let{abTestData:t,awemeInfo:i}=e||{},{weeklyRecommend:l}=i||{},{urlList:o,text:n}=l||{};return!!(l&&n&&o&&o.length>0)},c0=e=>{let{awemeInfo:t,scene:i="player",className:l}=e,{weeklyRecommend:o}=t||{},{urlList:n,text:r}=o||{},a=(0,tr.n)(),d=(0,dZ.x)(()=>{ep.logInstance.sendLog("weeklySelectionShow",{enter_from:(0,ie.yW)(),group_id:null==t?void 0:t.awemeId})});return("player"!==i||(null==a?void 0:a.video))&&n&&n.length&&r?(0,v.jsx)("div",{ref:d,className:p()(cX.weeklyRecommendTagContainer,cX[i],l),children:(0,v.jsxs)("div",{className:p()(cX.weeklyRecommendTag),children:[(0,v.jsx)("img",{className:cX.icon,src:n[0],alt:""}),(0,v.jsx)("div",{className:cX.text,children:r})]})}):null},c1=(0,f.memo)((0,f.forwardRef)((e,t)=>{var i,l,o;let{isActive:n,isNext:r,isPrev:a,isFirst:d,isLast:u,index:s,awemeInfo:c,nextAwemeInfo:m,prevAwemeInfo:_,playNextFunc:h,abtestData:y,deleteCurrentSwiper:w,toggleComment:x,onAvatarClick:I,fullScreenTarget:b,logParams:S,videoToast:T,followHandler:k,playPrevFunc:L,userInfo:A,dispatch:N,isAuthorCardShow:P,isShowRelatedCard:M,children:j,videoHashtagClassName:D,videoTags:F,moreBoxShowList:V={notInterestingIcon:!0,unfollow:!0,report:!0},positionBoxClassName:O,actionFollow:B,actionUnFollow:U,isInnerFeed:H,onRelatedClick:W,onCooperationAuthorClick:G,isShowCooperation:Z,sideBarShow:q,slardarInstance:K,avatarTipText:$,LiveSliderCard:Y,onDislike:ee,disableShortCut:et,onReady:ei,sideCardContext:el,isMultiInstanceScene:eo}=e,{isMainland:en}=(0,f.useContext)(z.ko),er=(0,f.useRef)(null),[ea,eu]=(0,f.useState)(!1),{isShow:es}=cN({useIdleCallback:!(0,eL.b_)(),isActive:n,timeout:5e3,delay:(0,eL.b_)()?1e3:0,once:!0,immediately:!(0,eL.b_)()}),{PictureMode:ec}=l6({shouldRender:es,disable:!(0,eL.b_)()});(0,f.useImperativeHandle)(t,()=>{var e;return{getPlayer:()=>er.current.getPlayer(),player:null===(e=er.current)||void 0===e?void 0:e.player}}),cQ({player:null==er?void 0:null===(i=er.current)||void 0===i?void 0:i.player,awemeInfo:c}),(0,f.useEffect)(()=>{n&&!H&&C.Le.setConfig(C.gI.InnerAutoPlay,null)},[n,H,c]);let ev=(0,f.useMemo)(()=>{var e;let t={},i=dV({abtestData:y,awemeInfo:c,isInnerFeed:H});return Object.assign(t,aX({awemeInfo:c,abtestData:y,enableSr:i}),a4({awemeInfo:c,abtestData:y,userselection:null===(e=(0,lJ.G)(R.SessionStorageKeys.manualSwitch))||void 0===e?void 0:e.gearType,enableSr:i})),cL({config:t,abtestData:y}),(0,a_.Zf)({config:t}),(0,rE.LX)({config:t,awemeInfo:c,abtestData:y,isMultiInstanceScene:eo}),t.startTime=or(c.awemeId),t.loop=!0,t.ignores=t.ignores.filter(e=>"mobile"!==e),t.closeDelayBlur=!0,t.mobile=(0,Q._)((0,E._)({},t.mobile),{gestureX:!0}),t},[c,y]);cP({abtestData:y,isActive:n,player:null===(l=er.current)||void 0===l?void 0:l.player}),cM({awemeInfo:c,prevAwemeInfo:_,isInnerFeedModel:H&&n});let{idlCallBackFlag:ef}=cj({isActive:r,once:!0}),{flag:ep}=cD({isNext:r,positionIndex:s,abtestData:y}),e_=(0,f.useRef)(!1),eg=(0,f.useMemo)(()=>{var e;let t=null===(e=tG.s.getAllPlayer())||void 0===e?void 0:e.length;return!!e_.current||1===s&&(!!(t>1)||!!ep)||n||a||r&&ef&&1!==s},[n,a,r,s,ef,ep]);e_.current=eg;let eh=cJ({abTestData:y,awemeInfo:c});(0,f.useEffect)(()=>{2===s&&C.Le.setConfig(C.gI.IsForceInsert,{isForceLive:!1})},[s]);(0,X.C)(ed.w3.components.recommend_video),cA({ref:er}),cH({config:ev,isActive:n,awemeInfo:c,player:null===(o=er.current)||void 0===o?void 0:o.player});let ey=null==y?void 0:y.searchOpenCurrentTab,ew=(0,f.useCallback)(function(){for(var e,t,i,l,o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];let a=null==n?void 0:null===(t=n.slice)||void 0===t?void 0:null===(e=t.call(n,-1))||void 0===e?void 0:e[0];null==a||null===(i=a.preventDefault)||void 0===i||i.call(a),null==a||null===(l=a.stopPropagation)||void 0===l||l.call(a),nl("前往抖音app/电脑端看更多内容")},[]),ex=(0,f.useCallback)(()=>{document.exitFullscreen()},[]);return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(on,{xgplayerConfig:ev,isInitPlayer:eg,style:{height:"100%",width:"100%"},className:p()(l0.container,"mobileRecommendVideo"),ref:er,slardarInstance:K,onReady:e=>{var t,i;null==ei||ei(),null==e||null===(t=e.focus)||void 0===t||t.call(e),(null===(i=(0,ip.bE)("player_ready"))||void 0===i?void 0:i.length)<1&&(0,ip.B1)({tag:"player_ready"})},children:[(0,v.jsx)(cZ,{awemeInfo:c,isActive:n,timeout:(0,eL.b_)()?4e3:2e3,isFirst:d}),(0,v.jsx)("div",{className:l0.splashAdComponent,children:(0,v.jsx)(nv,{isActive:n,controlHeight:em.fp.MidHigh,isClientMiniWin:!1,position:"right",awemeInfo:c,abtestData:y,from:em.lT.Recommend,className:{right:l0.rightPositionBox},children:(0,v.jsx)(nn,{actionFollow:B,actionUnFollow:U,awemeInfo:c,toggleComment:x,loginUserInfo:A,loginDispatch:N,deleteCurrentSwiper:w,fullScreenTarget:b,onAvatarClick:I,abtestData:y,videoToast:T,isActive:n,followHandler:k,reportExtraParams:S,recordPreferVideoSwitch:!0,canShowAvatarFollowBtn:!0,canShowAvatarAdBtn:!1,canShowAvatarTip:!1,canShowDislikeTip:!1,moreBoxShowList:(0,E._)({shortcutList:!0},V),className:"immersive-player-switch-on-hide-interaction-area",avatarTipText:$,showMusicDetail:!0,from:em.lT.Recommend,LiveSliderCard:Y,onRelatedClick:W,videoTags:F,onDislike:ee,isInnerFeed:H,isMainland:en})})}),(0,eS.r)()&&(0,v.jsx)(c$,{onClick:ex,className:l0.closeButton}),(0,v.jsx)(np,{isActive:n,fullScreenTarget:b,abtestData:y,isLogin:!!(null==A?void 0:A.isLogin),loginDispatch:N,disableHook:!0}),(0,v.jsx)(ny,{awemeInfo:c,isActive:n,controlHeight:(0,J.p)(c)?em.fp.SplashControls:em.fp.MidHigh,useServerFilterCover:(0,eL.Sb)(),abtestData:y}),(0,v.jsx)(nE,{awemeInfo:c,isActive:n,isUseOneCheck:H,playPrevFunc:L,playNextFunc:h,deleteCurrentSwiper:w}),(0,v.jsx)(nA,{isActive:n,abtestData:y,awemeInfo:c}),(0,v.jsx)(nN,{isActive:n}),!(0,ol.GP)(c)&&(0,v.jsx)(r8,{awemeInfo:c,userInfo:A,isActive:n,isNext:r,isPrev:a,logParams:S,isClientMiniWin:!1}),(0,v.jsx)(a7,{isActive:n,awemeInfo:c,abtestData:y,userInfo:A}),(0,v.jsx)(dP,{isActive:n,awemeInfo:c,abtestData:y,userInfo:A,deleteCurrentSwiper:w,config:ev,scene:em.lT.Recommend,isNext:r,currentIndex:s}),(0,v.jsx)(dU,{isActive:n,abtestData:y}),(null==c?void 0:c.awemeType)===g.e.Note?(0,v.jsx)(ec,{isActive:n,awemeInfo:c,abTestData:y,logParams:S,playNextFunc:h,playPrevFunc:L,isClientMiniWin:!1,ablePlayPrev:!((P||M)&&!_),ablePlayNext:!((P||M)&&!m),disableShortCut:et,isShowSideBar:q}):null,j,(0,v.jsx)(dW,{isActive:n,awemeInfo:c,abTestData:y}),(0,v.jsx)(dG,{isActive:n,controlHeight:em.fp.MidHigh,position:"bottom",awemeInfo:c,children:(0,v.jsxs)("div",{className:l0.splashAdComponent,children:[eh&&(0,v.jsx)(c0,{scene:"player",awemeInfo:c}),(0,v.jsx)(s7,{className:l0.videoInfo,hideMixNextBtn:!0,isActive:n,awemeInfo:c,userInfo:A,isMainland:en,scene:em.lT.Recommend,isTopicLinkSearchResult:!0,videoHashtagClassName:D,videoTags:F||[],abTestData:y,isShowCreateTime:!0,canMixListen:!H,isInnerFeed:H,showGuideDownloadClient:!1,loginUserInfo:A,loginDispatch:N,fullScreenTarget:b,reportExtraParams:S,handleMobileSiteClick:ew,onCooperationAuthorClick:ew,isShowCooperation:Z,showSideBar:q,isShowBrandComponent:ea,onBrandComponentHide:()=>{eu(!1)},onBrandComponentShow:()=>{eu(!0)},oneLineWarginig:!0})]})}),n&&(0,v.jsx)(cn,{}),el&&n&&!(null==y?void 0:y.mergeOptimization)&&(0,v.jsx)(cu,{sideCardContext:el,awemeInfo:c,needVideo:(null==ey?void 0:ey.open_current_tab)===1&&(null==ey?void 0:ey.save_video)===1,needState:(null==ey?void 0:ey.open_current_tab)===1&&(null==ey?void 0:ey.save_video)===1&&(null==ey?void 0:ey.save_status)===1})]})})}));var c2=i("178519"),c3=i("130556"),c6=i("207761"),c5=new ez.h({clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",is_small_window:"0",play_material:"video"}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",is_small_window:"0",play_material:"video"}},feedRequest:{eventName:"feed_request",params:{enter_from:"",is_first:0,is_click:0,is_auto_play:0,unread_feed_nums:0}},feedRequestResponse:{eventName:"feed_request_response",params:{enter_from:"",is_first:0,video_count:0,duration:0,is_success:0,is_click:0,is_auto_play:0,live_position:-1,unread_feed_nums:0}}}),c4={RECOMMEND:"recommend",FOLLOW:"follow",FRIEND:"friend",TOPIC:"topic"};function c8(){let e=(0,B.$o)(R.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY);return Number(null!=e?e:0)}let c7=Object.keys(c4).map(e=>c4[e]),c9=e=>{let{swiper:t,awemeInfoList:i,setAwemeInfoList:l,swiperCallBack:o,fetchSlideList:n,fromTab:r,lastItemCb:a,abTestData:d={},initialRecommendAwemeList:u,initialRecommendAwemeListPromise:s,maxLimit:c}=e,v=(0,f.useRef)(!1);(0,f.useRef)(!1);let m=(0,f.useRef)([]),p=(0,f.useRef)(!1),_=(0,f.useRef)(0),h=(0,f.useCallback)((e,t)=>{let i=[];for(let l=0;l<t.length;l++)!e.find(e=>{var i,o,n,r,a,d;return(null==e?void 0:e.awemeType)!==g.e.LiveCard?(null==e?void 0:e.awemeId)===(null===(i=t[l])||void 0===i?void 0:i.awemeId):(null==e?void 0:null===(n=e.cellRoom)||void 0===n?void 0:null===(o=n.rawdata)||void 0===o?void 0:o.id_str)===(null===(d=t[l])||void 0===d?void 0:null===(a=d.cellRoom)||void 0===a?void 0:null===(r=a.rawdata)||void 0===r?void 0:r.id_str)})&&i.push(t[l]);return i},[]),y=(0,f.useCallback)(async()=>{v.current=!0;let e=0;c7.includes(r)&&(e=new Date().getTime(),c5.sendLog("feedRequest",{enter_from:(0,ie.yW)(),is_first:0,is_click:0,is_auto_play:c8(),unread_feed_nums:(null==i?void 0:i.length)-(null==t?void 0:t.activeIndex)}));let o=await n({mode:"loadmore"});if(c7.includes(r)){var a;c5.sendLog("feedRequestResponse",{enter_from:(0,ie.yW)(),is_first:0,video_count:null===(a=o.data)||void 0===a?void 0:a.length,duration:new Date().getTime()-e,is_success:0===o.statusCode?1:0,is_click:0,is_auto_play:c8(),unread_feed_nums:(null==i?void 0:i.length)-(null==t?void 0:t.activeIndex)})}0===o.statusCode?(_.current=0,l(e=>{let i=h(e,o.data),l=[...e,...i];if(c)for(let e=0;e<l.length;e++)if(e<(null==t?void 0:t.activeIndex)-c)l[e]=!1;else break;return v.current=!1,l})):v.current=!1},[n,h,t,c,l]),w=(0,f.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],l=Object.assign({},null==d?void 0:d.loadMore,null==d?void 0:d.loadMoreServer),o="recommend"===(0,ie.yW)()&&(null==l?void 0:l.defaultCount)||4;if(e||Math.abs((null==t?void 0:t.activeIndex)-i.length)<=o&&!v.current){if(v.current=!0,"recommend"!==(0,ie.yW)())(0,c3.l)(y,{timeout:3e3});else if(null==d?void 0:d.loadIdlecallbackDelay){var n;(0,c3.l)(y,{timeout:null!==(n=null==d?void 0:d.loadIdlecallbackDelay)&&void 0!==n?n:3e3})}else y()}},[t,i,d,y]);(0,f.useEffect)(()=>{let e=Object.assign({},null==d?void 0:d.loadMore,null==d?void 0:d.loadMoreServer),l=null==e?void 0:e.bufferEmitCount;if((null==e?void 0:e.bufferEmit)&&l){let e=eb.listen(eb.EVENT.bufferedLoadMore,()=>{Math.abs((null==t?void 0:t.activeIndex)-i.length)<=l&&!v.current&&y()});return()=>{null==e||e()}}},[t,y,i.length,d]);let x=(0,f.useCallback)(e=>{let i="number"==typeof e?e:t.activeIndex;l(e=>e.slice(0,i).concat(e.slice(i+1))),w()},[t,w]);(0,eg.o)(()=>eb.listen(eb.EVENT.firstLoadMore,w),[w]);let I=(0,f.useCallback)(function(e,t){let{isFirst:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!i)null==o||o("prev"),e&&"click_button"!==e&&eb.emit(eb.EVENT.reportPlayPrev,{clickFrom:e})},[o]),b=(0,f.useCallback)(function(e,t){let{isLast:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(w(),i){null==a||a();return}let l=C.Le.getConfig(C.gI.VideoFeedList),n=(null==l?void 0:l.autoPlayCount)||1;"auto"===e?C.Le.setConfig(C.gI.VideoFeedList,{autoPlayCount:n+1}):null==o||o("next"),e&&"click_button"!==e&&eb.emit(eb.EVENT.reportPlayNext,{clickFrom:e})},[w,a,o]),E=(0,f.useCallback)(e=>{var l,o;if((null==t?void 0:t.destroyed)||!t)return;let{from:n}=e||{};C.Le.setConfig(C.gI.FeedBackInfo,{activeIndex:null!==(o=t.activeIndex+1)&&void 0!==o?o:-1}),b(n,i[t.activeIndex],{isLast:t.activeIndex===i.length-1}),null===(l=t.slideNext)||void 0===l||l.call(t)},[t,i,b]),S=(0,f.useCallback)(e=>{var l,o;if(!t||t.destroyed)return;C.Le.setConfig(C.gI.FeedBackInfo,{activeIndex:(o=t.activeIndex-1,o)});let{from:n}=e||{};I(n,i[t.activeIndex],{isFirst:0===t.activeIndex}),null===(l=t.slidePrev)||void 0===l||l.call(t)},[t,i,I]),T=(0,f.useCallback)(()=>{w(!0)},[w]);(0,f.useEffect)(()=>{(async()=>{var e,t,i;if(null==u?void 0:u.length)return;if(s instanceof Promise){let t=await s;if(null==t?void 0:null===(e=t.recommendAwemeList)||void 0===e?void 0:e.length){l(t.recommendAwemeList);return}}let o=(0,c6.getCookiesItem)(R.CookieKeys.DebugVids);if(o)try{let e=JSON.parse(o||"[]");if(!(null==e?void 0:e.length))return;let t=await (0,rJ.c7)({itemIds:e,originType:de.F.MobileSlideList,from:"useBasicSlideFunc.tsx"});l((null==t?void 0:t.detail)||[]);return}catch(e){}let a=0;c7.includes(r)&&(a=new Date().getTime(),c5.sendLog("feedRequest",{enter_from:(0,ie.yW)(),is_first:1,is_click:0,is_auto_play:c8()})),v.current=!0;let d=await n({mode:"refresh"});v.current=!1,c7.includes(r)&&c5.sendLog("feedRequestResponse",{enter_from:(0,ie.yW)(),is_first:1,video_count:null===(t=d.data)||void 0===t?void 0:t.length,duration:new Date().getTime()-a,is_success:0===d.statusCode?1:0,is_click:0,is_auto_play:c8(),live_position:null==d?void 0:null===(i=d.data)||void 0===i?void 0:i.findIndex(e=>(null==e?void 0:e.awemeType)===101)}),0===d.statusCode&&d.data&&l(e=>[...e||[],...h(e,d.data)||[]])})()},[u,s]),(0,eg.o)(()=>{let e=eb.listen(eb.EVENT.wallPaperInsert,e=>{let t=(0,B.$o)(R.LocalStorageKeys.WallPaper);if((null==t?!void 0:!t.disappear)&&((null==t?!void 0:!t.timetamp)||new Date(Date.now()).toDateString()!==new Date(null==t?void 0:t.timetamp).toDateString()))l(t=>{var i;let l=t.findIndex(t=>t.awemeId===e);return l>-1&&(null===(i=m.current)||void 0===i?void 0:i.length)&&!p.current?(p.current=!0,(0,B.qQ)(R.LocalStorageKeys.WallPaper,{timetamp:Date.now()}),t.slice(0,l+1).concat(m.current,t.slice(l+1))):t})});return()=>{null==e||e()}},[]),(0,f.useEffect)(()=>{var e;let t=null!==(e=C.Le.getConfig(C.gI.CheckAwemeList))&&void 0!==e?e:[],l=i.filter(e=>e.awemeType!==g.e.LiveCard);if(l.length>0){if(0===t.length){let e=l.map(e=>({vid:e.awemeId,time:Date.now(),dy_q:Number(e.dyQ),tag:e.isAds?2:0}));C.Le.setConfig(C.gI.CheckAwemeList,e)}if(t.length>0){let e=t[t.length-1],i=l.findIndex(t=>t.awemeId===e.vid),o=l.slice(i+1).map(e=>({vid:e.awemeId,time:Date.now(),dy_q:Number(e.dyQ),tag:e.isAds?2:0}));C.Le.setConfig(C.gI.CheckAwemeList,t.concat(o))}}},[i]),(0,f.useEffect)(()=>{if(t){let e=-1,l=()=>{-1!==e&&(t.activeIndex>e?b:I)("drag",i[t.activeIndex])},o=()=>{e=t.activeIndex,t.once("slideChange",l)},n=()=>{setTimeout(()=>e=-1),(0,C.Vv)(eG.PagingType.drag)},r=()=>{t.once("touchMove",o)};try{t.on("touchStart",r),t.on("touchEnd",n)}catch(e){}return()=>{try{t.off("touchMove",o),t.off("touchEnd",n),t.off("touchStart",r)}catch(e){}}}},[t,i]);let k=(0,f.useMemo)(()=>{let e={};return((null==d?void 0:d.preloadCountApplySideServer)==="both"||(0,U.DT)()&&(null==d?void 0:d.preloadCountApplySideServer)==="client"||!(0,U.DT)()&&(null==d?void 0:d.preloadCountApplySideServer)==="web")&&(e=null==d?void 0:d.preloadCountServer),Object.assign({},null==d?void 0:d.preloadCount,e)},[d]);return(0,f.useEffect)(()=>{if(t){if(0===t.activeIndex){let e=i.slice(1,2).filter(e=>!(0,ol.Ni)(e));C.Le.setConfig(C.gI.PreloadList,e)}let e=()=>{if(null==k?void 0:k.open){let e=t.activeIndex+2,l=(null==k?void 0:k.count)||1,o=i.slice(e).filter(e=>(null==e?void 0:e.awemeType)===g.e.Normal&&!(0,ol.Ni)(e)).slice(0,l);C.Le.setConfig(C.gI.PreloadList,o)}else{let e=i.slice(t.activeIndex+1,t.activeIndex+3).filter(e=>!(0,ol.Ni)(e));C.Le.setConfig(C.gI.PreloadList,e)}};try{t.on("slideChange",e)}catch(e){}return()=>{try{t.off("slideChange",e)}catch(e){}}}},[t,i,k]),(0,f.useEffect)(()=>{if(t&&(null==i?void 0:i.length)===0)try{t.slideTo(0,0)}catch(e){}},[t,i]),{deleteCurrentSwiper:x,nextPageFunc:E,lastPageFunc:S,retryFunc:T}},ve=e=>{let{awemeInfoList:t,setAwemeInfoList:i}=e;(0,f.useEffect)(()=>{let e=eb.listen(eb.EVENT.checkSafeAwemeList,e=>{i(t.filter(t=>!e.includes(t.awemeId)))});return()=>e()},[t])};var vt=i("3534");let vi=e=>{let{containerEl:t,nextSwiperHeaderHeight:i,cardBetween:l,upperSpace:o}=e,n=(0,it.U)(i)?0:100*i,r=(0,it.U)(i)?i:0,a=t?(0,it.U)(l)?0:100*l:0,d=(0,it.U)(l)?l:t?0:24,u=(0,it.U)(o)?0:100*o,s=(0,it.U)(o)?o:0,c=`calc(${100-n-a-u}% - ${s+d+r}px)`,v=`calc(${u}% + ${s}px)`;return{swiperHeight:c,calcUpperSpace:v,calSpaceBetween:d||a/100*(null==t?void 0:t.offsetHeight),spacePixelSum:s+d+r}};var vl="TijS9Ibm",vo="WAI0zQfW",vn="gc5fdOlN",vr="JgPPgpo3",va="Rp1Ayupm",vd=new ez.h({feedRequest:{eventName:"feed_request",params:{enter_from:"",is_first:0,is_click:0,is_auto_play:0,unread_feed_nums:0}},feedRequestResponse:{eventName:"feed_request_response",params:{enter_from:"",is_first:0,video_count:0,duration:0,is_success:0,is_click:0,is_auto_play:0,unread_feed_nums:0}},cssDroped:{eventName:"css_droped",params:{enter_from:""}},protobufParse:{eventName:"protobuf_parse",params:{path:"",duration:0,is_success:0}},protobufPackParse:{eventName:"protobuf_pack_parse",params:{duration:0}},protobufFeedRequest:{eventName:"protobu_feed_request",params:{duration:0,path:"",is_pb:!1}}}),vu=i("837562"),vs=function(e){var t,i;let{className:l,swiperClassName:o,abTestData:n={},cardBetween:r=lK,upperSpace:a=l$,nextSwiperHeaderHeight:d=lq,children:u,onSwiper:s,style:c={},swiperStyle:m={},isDefaultShowSideBar:_,customTop:g,data:h,scene:y,defaultCssFullScreen:x,initIndex:I,useWheelListener:b=!0,splashAdStatus:S,collectionFolderInfo:T,isVideoSupportMP4:k,pagingSpeed:L}=e,A=(0,f.useRef)(null),R=(0,f.useRef)(!1),[N,P]=(0,f.useState)(null),[j,D]=(0,f.useState)(null),[F,V]=(0,f.useState)(),[O,B]=(0,f.useState)(),[U,H]=(0,f.useState)(!1),[W,z]=(0,f.useState)(_),[G,Z]=(0,f.useState)(),[q,K]=(0,f.useState)((0,eS.r)()),[$,Y]=(0,f.useState)(x),[X,J]=(0,f.useState)(!1),[et,ei]=(0,f.useState)(!1),[el,eo]=(0,f.useState)(q),[en,er]=(0,f.useState)(e_.L.Author),ea=(0,f.useRef)(""),ed=(0,f.useRef)();A.current=j;let eu=()=>{var e;null===(e=A.current)||void 0===e||e.update()},{awemeFeed:es}=tk();(0,f.useEffect)(()=>{z(_)},[_]);let ec=(0,f.useRef)(null),ev=(0,f.useRef)(null),ef=(0,f.useCallback)(e=>{M.F.info({text:e},ec.current)},[]);(0,f.useEffect)(()=>{let e=()=>{(0,eS.r)()?(eo(!0),(0,f.startTransition)(()=>{K(!0)})):(eo(!1),K(!1))};return document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("msfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("msfullscreenchange",e),C.Le.setConfig(C.gI.SlideStartTime,{slideStartTime:0})}},[]),(0,eg.o)(()=>{let e=eb.listen(eb.EVENT.changeMinWindows,e=>{let{isMiniWin:t}=e;if(!(tG.s.getPlayersByScene(em.lT.Modal).length>0)||y===lG.Modal)t&&(ea.current=document.body.style.minWidth),document.body.style.minWidth=t?"auto":ea.current,document.body.style.overflow=t?"hidden":"",R.current=!0,J(t)});return()=>e()},[]);let[ep,eh]=(0,f.useState)($);(0,f.useEffect)(()=>{let e=eb.listen(eb.EVENT.pageFullScreen,e=>{let{fullScreen:t,fromAuthorCard:i}=e;0===tG.s.getPlayersByScene(em.lT.Modal).length&&(Y(e=>null!=t?t:!e),eh(e=>!e&&t&&i?e:null!=t?t:!e))});return()=>{null==e||e()}},[]),(0,f.useEffect)(()=>{let e=setTimeout(()=>{try{let e=(0,iP.t)();e instanceof Element&&"flex"!==getComputedStyle(e).display&&(l3.oe.event.error({name:l3.Mo.CssDroped}),vd.sendLog("cssDroped",{enter_from:(0,ie.yW)()}))}catch(e){}},5e3);return()=>{clearTimeout(e)}},[]);let ey=(0,f.useRef)(0);(0,f.useEffect)(()=>{if(j){let e=()=>{eb.emit(eb.EVENT.tabContainerScroll,{tab:"recommend",scrollType:j.activeIndex>ey.current?"down":"up"}),ey.current=j.activeIndex};return j.on("slideChange",e),()=>{j.off("slideChange",e)}}},[j]),(0,f.useEffect)(()=>{if(N){let e=nr.Z.bind(N,eu);return()=>{e&&(null==e||e())}}},[N]),(0,f.useEffect)(()=>{if(j){let e=C.Le.getConfig(C.gI.GlobalSwiper);return C.Le.setConfig(C.gI.GlobalSwiper,j),()=>{C.Le.setConfig(C.gI.GlobalSwiper,e)}}},[j]);let ew=X||q||el||ep,ex=(0,f.useMemo)(()=>{let e=d;return et&&(e-=30),{nextSwiperHeaderHeightIn:e>=0?e:0,cardBetweenIn:r,upperSpaceIn:a}},[et,d,r,a]),eC=(0,f.useMemo)(()=>{let{nextSwiperHeaderHeightIn:e,cardBetweenIn:t,upperSpaceIn:i}=ex,{calcUpperSpace:l,calSpaceBetween:o,swiperHeight:n}=vi({containerEl:N,nextSwiperHeaderHeight:e,cardBetween:t,upperSpace:i});return setTimeout(()=>null==j?void 0:j.update()),{upperSpace:ew?0:l,swiperHeight:ew||S===w.QB.Fullscreen?"100%":n,spaceBetween:ew?0:o}},[ex,N,ew,S]),eI=(0,f.useRef)(new Set),eE=(0,f.useMemo)(()=>({globalIsCommentShow:F,setIsCommentShowFunc:V,globalIsCommentTrayPushGuideShow:O,setIsCommentTrayPushGuideShowFunc:B,globalCommentTrayPushGuideType:U,setCommentTrayPushGuideTypeFunc:H,globalIsRelatedShow:G,setIsRelatedShowFunc:Z,globalIsSideBarShow:W,setIsSideBarShowFunc:z,setTargetVideoRef:e=>{ev.current=e.current},swiper:j,isFullScreen:q,isCssFullScreen:$,isClientMiniWin:X,fullScreenTarget:N,videoToast:ef,slideVideoTab:en,setSlideVideoTab:er,dislikeIdList:eI.current,collectionFolderInfo:T}),[F,G,W,j,q,$,X,N,ef,en,O,U,T]),eT=(0,nS.U)(),ek=(0,f.useMemo)(()=>({position:"absolute",left:0,top:g||eC.upperSpace}),[g,eC]),eL=ew?0:null!==(t=null==m?void 0:m.paddingLeft)&&void 0!==t?t:30,eA=ew?0:null!==(i=null==m?void 0:m.paddingRight)&&void 0!==i?i:60,eR=S===w.QB.Fullscreen?`calc(100% + ${eA}px)`:"100%",eN=(0,f.useCallback)(()=>{if(window.nextPlayer){var e;let t=null===(e=window)||void 0===e?void 0:e.nextPlayer,i=null==t?void 0:t.buffered;(null==i?void 0:i.length)>0?t.bufferedBeforeActive=1e3*i.end(0):t.bufferedBeforeActive=0,t.loadstartBeforeActive=(null==t?void 0:t.loadstart)?1:0,t.loadeddataBeforeActive=(null==t?void 0:t.loadeddata)?1:0}},[]),eP=(0,f.useMemo)(()=>X?"unset":y===lG.Recommend?`${455}px`:"400px",[X,y]);return f.Children.toArray(u).some(e=>{var t;return(null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot)===lZ.OCCUPATION})?(0,v.jsx)(v.Fragment,{children:f.Children.toArray(u).map(e=>{var t;if((null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot)===lZ.OCCUPATION)return e})}):(0,v.jsxs)(ee.C.Provider,{value:eE,children:[f.Children.toArray(u).map(e=>{var t;if((null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot)===lZ.OUTOFCONTAINER)return e}),(0,v.jsxs)("div",{id:"slidelist","data-active":eT,className:p()(vl,"slidelist",l,"fullscreen_capture_feedback",{[p()(vn,"isCssFullScreen")]:ew,isMiniWindow:X}),ref:P,style:c,children:[f.Children.toArray(u).map(e=>{var t;if((null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot)===lZ.OUTSIDE)return e}),(0,v.jsx)(vu.t,{isDisabled:()=>!!es.getValue("modalAwemeInfo"),onActiveIndexChange:e=>{C.Le.setConfig(C.gI.SlideStartTime,{slideStartTime:Date.now()}),vt.w.createFpsTask(e),vt.w.calculateFpsBasedOnDuration(e),eN()},direction:1,className:p()(vo,"fullscreen_capture_feedback",o,{[va]:y===lG.Follow||S===w.QB.Fullscreen}),isVideoSupportMP4:k,style:(0,Q._)((0,E._)((0,Q._)((0,E._)({},ek),{width:eR,height:eC.swiperHeight,overflow:"visible"}),m),{paddingLeft:eL,paddingRight:eA,minHeight:eP}),data:h,spaceBetween:eC.spaceBetween,speed:null!=L?L:250,touchRatio:2,resistanceRatio:ew?0:.7,ref:ed,onSwiper:e=>{D(e),null==s||s(e)},slideKey:e=>{var t,i;return(null==e?void 0:e.awemeId)||(null==e?void 0:null===(i=e.cellRoom)||void 0===i?void 0:null===(t=i.rawdata)||void 0===t?void 0:t.id_str)},"data-e2e":"slideList","data-active":eT,initIndex:I,children:f.Children.toArray(u).map(e=>{var t;if([lZ.INSIDE,lZ.CONTAINERSTART,lZ.CONTAINEREND,lZ.WRAPPERSTART,lZ.WRAPPEREND,lZ.WRAPPERRIGHT].includes(null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.slot))return e})}),(0,v.jsx)("div",{style:{marginLeft:eL,marginRight:eA},className:p()(vr,"fullscreen_capture"),ref:ec}),(0,v.jsx)("div",{id:"fullscreen_capture_feedback",children:(0,v.jsx)("div",{id:"fullscreen_capture"})}),b&&(0,v.jsx)(i0,{EventListener:j,refContainerStatus:N,isCssFullScreen:$,isClientMiniWin:X})]})]})};let vc=e=>e.filter(e=>e.awemeType!==g.e.LiveCard).filter(e=>!e.libfinsertTaskId).filter(e=>!(0,h.Kf)(e)).filter(e=>!e.isAds);var vv=function(e){let{recommendAwemeList:t=[]}=e,i=(0,f.useMemo)(()=>vc(t),[t]),[l,o]=(0,f.useState)(i||[]),[n,r]=(0,f.useState)(null),a=(0,f.useRef)(()=>{}),d=(0,f.useRef)(null),u=(0,f.useRef)(()=>{}),s=(0,f.useContext)(I.C)||{},{modalVideoDetail:c,changeSplashAdStatus:m,splashAdStatus:h,isSplashTransitionEnd:T}=(0,f.useContext)(b.r),L=(0,f.useRef)({});lQ();let{isFirstScreenFrame:$}=lH({awemeInfoList:l,abTestData:s}),Q=(0,f.useCallback)(()=>{C.Le.setConfig(C.gI.VideoFeedList,{autoPlayCount:1})},[]),X=(0,f.useCallback)(e=>{Array.isArray(e)?o(vc(e)):o(t=>vc(e(t)))},[]),{fetchSlideList:J,statusCode:ee,refRefreshIndex:et,isListError:ei,setIsListError:eo}=function(e){let{abTestData:t,isLogin:i,refCancelTabFeedFunc:l,retryFuncRef:o,ffDanmakuStatus:n,danmakuSwitchStatus:r,initialRecommendAwemeList:a,initialRecommendAwemeListPromise:d}=e,[u,s]=(0,f.useState)(0),[c,v]=(0,f.useState)(!1),m=(0,f.useRef)((null==a?void 0:a.length)?2:1),p=(0,f.useRef)([]),_=(0,f.useRef)(""),{isMainland:h}=(0,f.useContext)(z.ko),y=(0,f.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;m.current=e},[]);return{fetchSlideList:(0,f.useCallback)(async e=>{var n,a,d,c,f,y,w,I,b,T,L,z;let $={},{mode:Q,pull_type:X,refresh_type:J}=e,ee=S.parse((0,j.ht)()),et=(null===(n=C.Le.getConfig(C.gI.FreeAdStatus))||void 0===n?void 0:n.status)||0,ei=C.Le.getConfig(C.gI.RecommendReqCount)||0,el=(0,U.DT)(),eo=8===X,en={refreshIndex:eo?1:D.B.prefetchFromClientUsed?++m.current:m.current++,count:eo?1:10,tagId:"",cancelCb:l,awemePcRecRawData:{},globalwid:null===(a=(0,F.Es)())||void 0===a?void 0:a.globalwid,pullType:X||("loadmore"===Q?2:0),refresh_type:J,minWindow:C.Le.getConfig(C.gI.IsMiniWin)||!1,plugBlock:(null===(d=C.Le.getConfig(C.gI.AdBlock))||void 0===d?void 0:d.needFilterAd)||!1,launchLiveFilters:null==p?void 0:p.current,freeRight:Number(1===et||2===et),useProtobuf:!1,usePassThrough:!1,viewCount:ei},er=C.Le.getConfig(C.gI.AwemePcRecRawData)||{},ea={};ea=K(),er.newVideoPrefer=ea;let ed=Y();er.is_client=(0,U.DT)(),er.ff_danmaku_status=1,er.danmaku_switch_status=r,er.is_dash_user=V.Q.getItem({sKey:R.CookieKeys.isDashUser})||0,er=(0,E._)({},er,ed),en.awemePcRecRawData=er,en.awemePcRecRawData.related_recommend=1,V.Q.getItem({sKey:R.CookieKeys.RechargeFlag})&&i?en.awemePcRecRawData.top_up_user=1:en.awemePcRecRawData.top_up_user=void 0,el&&(en.awemePcRecRawData.min_window=en.minWindow?1:0),!h&&!(null===(c=navigator)||void 0===c?void 0:c.language.startsWith("zh"))&&(en.needTranslation=1),$=await (0,G.NN)(en),C.Le.setConfig(C.gI.AwemePcRecRawData,{videoPrefer:{fsn:[],like:[],halfMin:[],min:[]},seo_info:document.referrer,ug_info:(0,j.Rs)("ug_source")});let{statusCode:eu,hasMore:es,awemeList:ec=[],logPb:ev}=$;if(0===ec.length?(q.sendLog("feedServerError",{status_code:u,log_id:ev,refresh_index:m.current}),eu!==x.ERROR_CODE.ERROR_CANCEL&&v(!0)):(!eo&&C.Le.setConfig(C.gI.RecommendReqCount,ei+ec.length),v(!1)),eu===x.ERROR_CODE.ERROR_CANCEL)return{cancel:!0};s(eu);let ef=(0,W._)(ec,i);if("refresh"===Q&&ee.vid&&ee.vid!==(null===(f=ec[0])||void 0===f?void 0:f.awemeId)&&(M.F.info("视频无法查看，请浏览其他精彩内容"),(0,j.U$)(["vid","previous_page"])),_.current=ev,(null==ef?void 0:ef.length)<3&&"refresh"===Q&&!(0,O.B)()&&(null===(w=o.current)||void 0===w||w.call(o)),1===en.refreshIndex&&ee.live_insert_type){let e=[];null==ef||ef.forEach(t=>{var i,l,o,n;(null==t?void 0:t.awemeType)===g.e.LiveCard&&(null==t?void 0:null===(l=t.cellRoom)||void 0===l?void 0:null===(i=l.rawdata)||void 0===i?void 0:i.id_str)&&e.push(null==t?void 0:null===(n=t.cellRoom)||void 0===n?void 0:null===(o=n.rawdata)||void 0===o?void 0:o.id_str)});let t=(0,B.$o)(R.LocalStorageKeys.LiveLandingIds),i=k()().format("YYYYMMDD");(null==t?void 0:t.date)===i?(0,B.qQ)(R.LocalStorageKeys.LiveLandingIds,{date:null==t?void 0:t.date,ids:(I=[...null===(b=t.ids)||void 0===b?void 0:b.split(","),...e],I.join(","))}):(0,B.qQ)(R.LocalStorageKeys.LiveLandingIds,{date:i,ids:null==e?void 0:e.join(",")}),(0,j.U$)(["live_insert_type"])}if((null==t?void 0:null===(y=t.previewEnterRoom)||void 0===y?void 0:y.value)!==1&&1!==m.current)for(let e=0;e<ef.length;e++){let i=ef[e];if(i.awemeType===g.e.LiveCard&&(null==i?void 0:null===(T=i.cellRoom)||void 0===T?void 0:T.rawdata)){let e,l;let o=null==i?void 0:null===(L=i.cellRoom)||void 0===L?void 0:L.rawdata,n=(0,N.O)({room:o,abtestData:t,isFeedH265:(0,N.W)({tab:"recommend"})}),r=null==o?void 0:o.stream_url;try{let{options:i,stream_data:o}=(null==r?void 0:null===(z=r.live_core_sdk_data)||void 0===z?void 0:z.pull_data)||{},n=A()(i,"default_quality",{}),a=JSON.parse(o),d=null==a?void 0:a.data,u=Z({abtestData:t,streamUrl:r,streamData:d,defaultStream:null==n?void 0:n.sdk_key});e=(0,P.f)(d[u].main.flv),l=(0,P.f)(d[u].main.hls)}catch(e){}let a=(0,U.tq)()?l:e,d=(null==n?void 0:n.url)||a,u=await (0,H.J)(d);(null==u?void 0:u.code)===0&&(null==u?void 0:u.url)&&(null==u?void 0:u.url)!==d&&(i.cellRoom.rawdata.redirectUrl=u.url)}}return{statusCode:eu,hasMore:es,data:ef,logPb:ev}},[t,i]),statusCode:u,refRefreshIndex:m,isListError:c,setIsListError:v,setRefreshIndex:y}}({abTestData:s,isLogin:!1,refCancelTabFeedFunc:a,retryFuncRef:u,ffDanmakuStatus:0,danmakuSwitchStatus:0,initialRecommendAwemeList:i}),{nextPageFunc:en,lastPageFunc:er,retryFunc:ea}=c9({swiper:n,awemeInfoList:l,setAwemeInfoList:X,fetchSlideList:J,swiperCallBack:Q,fromTab:c4.RECOMMEND,abTestData:s,initialRecommendAwemeList:i}),ed=(0,f.useRef)(en);ed.current=en;let eu=(0,f.useRef)(0);(0,f.useEffect)(()=>{l.length<=3&&eu.current<10&&(ed.current(),eu.current+=1)},[l]),ve({awemeInfoList:l,setAwemeInfoList:X});let es=(0,f.useCallback)(()=>null,[]),ec=(0,f.useMemo)(()=>({paddingLeft:0,paddingRight:0}),[!1]),ev=(0,f.useMemo)(()=>({cardBetween:0,upperSpace:0,nextSwiperHeaderHeight:0}),[!1]),{isFullscreen:ef}=(0,y.O)();return(0,v.jsxs)(vs,{onSwiper:r,abTestData:s,isDefaultShowSideBar:!1,swiperStyle:ec,cardBetween:ev.cardBetween,upperSpace:ev.upperSpace,nextSwiperHeaderHeight:ev.nextSwiperHeaderHeight,data:l,scene:lG.Recommend,splashAdStatus:h,useWheelListener:h===w.QB.Normal,className:p()(lY.mobileSlideList,{[lY.border]:!1,mobileBorder:!1}),children:[(0,v.jsx)(c2.o,{"data-e2e":"feed-item",className:p()(lY.swiperItem,"page-recommend-container",{[lY.noSelect]:!!(null==s?void 0:s.shitCardCss),[lY.xgControlsNew]:(null==s?void 0:s.newControl)===1,[lY.xgControlsNewV2]:(null==s?void 0:s.newControl)===2}),slot:lZ.INSIDE,children:e=>{let{slideData:t,activeIndex:i,currentIndex:o}=e;if(!(t&&1>=Math.abs(i-o)))return null;{let e=i===o,r=null==t?void 0:t.awemeId;return e&&!L.current[r]&&(L.current[r]=!0,C.Le.setConfig(C.gI.FeedLatestViewedAweme,{awemeId:r})),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(_.NoSSR,{children:(0,v.jsx)(lU,{InnerPlayer:c1,videoRef:d,className:p()(lY.content),isFullScreen:ef,item:t,deleteCurrentSwiper:es,playNextFunc:en,playPrevFunc:er,isActive:e,isFirst:0===o,isNext:i+1===o,isPrev:i-1===o,isLast:o===l.length-1,index:o,from:el.recommend,tab:el.recommend,swiper:n,isClientMiniWin:!1,splashAdStatus:h,changeSplashAdStatus:m,hideSidebarSwitch:!0})})})}}}),0===l.length&&ee!==x.ERROR_CODE.ERROR_NO_NETWORK&&(0,v.jsx)(tn,{className:lY.loading,text:"加载中",slot:lZ.INSIDE}),$&&(0,v.jsx)(lX,{slot:lZ.INSIDE})]})}},767445:function(e,t,i){"use strict";i.r(t);var l=i(520739),o=i(563097);i(88648);var n=i(605078),r=i(409349),a=i(243434),d=i(535782);t.default=function(e){let{landingPage:t}=e;return((0,n.useServerProps)(),"discover"===t)?(0,o.jsx)(a.default,(0,l._)({},e)):"follow"===t?(0,o.jsx)(d.default,(0,l._)({},e)):(0,o.jsx)(r.p,(0,l._)({},e))}},879562:function(e,t,i){"use strict";i.r(t);var l=i(520739);i(874386);var o=i(563097),n=i(354159),r=i.n(n),a=i(88648);let d=a.forwardRef((e,t)=>{let{data:i,className:n,loop:d,autoplay:u=!0,onLoopComplete:s,onComplete:c,onInit:v,hidden:f,rendererSettings:m,assetsPath:p}=e,_=a.useRef(),g=a.useRef(),[h,y]=a.useState(!1);return a.useEffect(()=>{if(g.current&&h&&c){let e=g.current;return null==e||e.addEventListener("complete",c),()=>{null==e||e.removeEventListener("complete",c)}}},[h,c]),a.useEffect(()=>{if(g.current&&h&&s){let e=g.current;return e.addEventListener("loopComplete",s),()=>{e.removeEventListener("loopComplete",s)}}},[h,s]),a.useEffect(()=>{if(g.current&&h&&v){let e=g.current;return null==e||e.addEventListener("DOMLoaded",v),()=>{null==e||e.removeEventListener("DOMLoaded",v)}}},[h,v]),a.useLayoutEffect(()=>{if(_.current&&r()&&!g.current){var e;g.current=null===r()||void 0===r()?void 0:null===(e=r().loadAnimation)||void 0===e?void 0:e.call(r(),{container:_.current,renderer:"svg",animationData:i,loop:d,autoplay:u,rendererSettings:(0,l._)({runExpressions:!1},m),assetsPath:p}),y(!0)}},[]),a.useEffect(()=>()=>{var e,t;null===(t=g.current)||void 0===t||null===(e=t.destroy)||void 0===e||e.call(t)},[]),a.useImperativeHandle(t,()=>({getLottieInstance:()=>g.current})),(0,o.jsx)("div",{hidden:f,ref:_,className:n})});t.default=a.memo(d)},647653:function(e,t,i){"use strict";i.d(t,{ZP:function(){return S}}),i(602157),i(874386),i(209955),i(268917),i(675373),i(70372),i(110006),i(826893),i(429532),i(413806),i(882732),i(544943),i(927234),i(954372);var l,o=i(772142),n=i.n(o),r=i(191777),a=i.n(r),d=i(428775),u=i.n(d),s=i(16343),c=i.n(s),v=i(304942),f=i.n(v);i(88648);var m="undefined"!=typeof window&&"undefined"!=typeof navigator&&"undefined"!=typeof document?navigator.userAgent:"",p=c()(m);function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function g(e,t){return e(t={exports:{}},t.exports),t.exports}var h=g(function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});_(h);var y=g(function(e){var t=h.default;function i(){e.exports=i=function(){return o},e.exports.__esModule=!0,e.exports.default=e.exports;var l,o={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},d="function"==typeof Symbol?Symbol:{},u=d.iterator||"@@iterator",s=d.asyncIterator||"@@asyncIterator",c=d.toStringTag||"@@toStringTag";function v(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{v({},"")}catch(e){v=function(e,t,i){return e[t]=i}}function f(e,t,i,o){var n=Object.create((t&&t.prototype instanceof y?t:y).prototype);return a(n,"_invoke",{value:function(e,t,i){var o=p;return function(n,r){if(o===_)throw Error("Generator is already running");if(o===g){if("throw"===n)throw r;return{value:l,done:!0}}for(i.method=n,i.arg=r;;){var a=i.delegate;if(a){var d=function e(t,i){var o=i.method,n=t.iterator[o];if(n===l)return i.delegate=null,"throw"===o&&t.iterator.return&&(i.method="return",i.arg=l,e(t,i),"throw"===i.method)||"return"!==o&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+o+"' method")),h;var r=m(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,h;var a=r.arg;return a?a.done?(i[t.resultName]=a.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=l),i.delegate=null,h):a:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,h)}(a,i);if(d){if(d===h)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===p)throw o=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=_;var u=m(e,t,i);if("normal"===u.type){if(o=i.done?g:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(o=g,i.method="throw",i.arg=u.arg)}}}(e,i,new A(o||[]))}),n}function m(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}o.wrap=f;var p="suspendedStart",_="executing",g="completed",h={};function y(){}function w(){}function x(){}var C={};v(C,u,function(){return this});var I=Object.getPrototypeOf,b=I&&I(I(R([])));b&&b!==n&&r.call(b,u)&&(C=b);var E=x.prototype=y.prototype=Object.create(C);function S(e){["next","throw","return"].forEach(function(t){v(e,t,function(e){return this._invoke(t,e)})})}function T(e,i){var l;a(this,"_invoke",{value:function(o,n){function a(){return new i(function(l,a){!function l(o,n,a,d){var u=m(e[o],e,n);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==t(c)&&r.call(c,"__await")?i.resolve(c.__await).then(function(e){l("next",e,a,d)},function(e){l("throw",e,a,d)}):i.resolve(c).then(function(e){s.value=e,a(s)},function(e){return l("throw",e,a,d)})}d(u.arg)}(o,n,l,a)})}return l=l?l.then(a,a):a()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var i=e[u];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,n=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=l,t.done=!0,t};return n.next=n}}throw TypeError(t(e)+" is not iterable")}return w.prototype=x,a(E,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=v(x,c,"GeneratorFunction"),o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,v(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},o.awrap=function(e){return{__await:e}},S(T.prototype),v(T.prototype,s,function(){return this}),o.AsyncIterator=T,o.async=function(e,t,i,l,n){void 0===n&&(n=Promise);var r=new T(f(e,t,i,l),n);return o.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},S(E),v(E,c,"Generator"),v(E,u,function(){return this}),v(E,"toString",function(){return"[object Generator]"}),o.keys=function(e){var t=Object(e),i=[];for(var l in t)i.push(l);return i.reverse(),function e(){for(;i.length;){var l=i.pop();if(l in t)return e.value=l,e.done=!1,e}return e.done=!0,e}},o.values=R,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,o){return a.type="throw",a.arg=e,t.next=i,o&&(t.method="next",t.arg=l),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],a=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var d=r.call(n,"catchLoc"),u=r.call(n,"finallyLoc");if(d&&u){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(d){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i];if(l.tryLoc<=this.prev&&r.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var o=l;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var n=o?o.completion:{};return n.type=e,n.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),L(i),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var l=i.completion;if("throw"===l.type){var o=l.arg;L(i)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:R(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=l),h}},o}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports});_(y);var w=y();try{regeneratorRuntime=w}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=w:Function("r","regeneratorRuntime = r")(w)}function x(e,t,i,l){return new(i||(i=Promise))(function(o,n){function r(e){try{d(l.next(e))}catch(e){n(e)}}function a(e){try{d(l.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(r,a)}d((l=l.apply(e,t||[])).next())})}var C=function(e){(t=document.createElement("textArea")).value=e,document.body.appendChild(t),navigator.userAgent.match(/ipad|iphone/i)&&((i=document.createRange()).selectNodeContents(t),(l=window.getSelection()).removeAllRanges(),l.addRange(i),t.setSelectionRange(0,999999)),t.select();var t,i,l,o=document.execCommand("copy");return document.body.removeChild(t),o},I=function(e){return new Promise(function(t){setTimeout(function(){null==e||e(),t(void 0)},0)})},b=function(e){return x(void 0,void 0,void 0,w.mark(function t(){var i,l,o,n,r;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.content,l=e.debug,o=e.useSetTimeout,n=!1,r=function(){if(i)try{f()(i,{message:null,debug:l}),n=!0}catch(e){try{n=C(i)}catch(e){n=!1}}},!o){t.next=8;break}return t.next=6,I(r);case 6:t.next=9;break;case 8:r();case 9:return t.abrupt("return",n);case 10:case"end":return t.stop()}},t)}))};var E=Number(p.os.version&&(null===(l=p.os.version)||void 0===l?void 0:l.split(".")[0]));function S(e){var t=e.link,i=e.scheme,l=e.schemeWaitTime,o=void 0===l?3e3:l,r=e.disableLinkLaunch,d=void 0!==r&&r,s=e.disableClipboard,c=void 0!==s&&s,v=e.disableLog,f=void 0!==v&&v,m=e.debug,_=void 0!==m&&m,g=e.zlinkData,h=e.timeout,y=function(e){return _&&void 0};if(!!t&&!!i){var C=0,I=function(e,i){if(!f){var l=new Image,r={sw:screen.width,sh:screen.height,link:t,scheme:e};l.src=n()("https://zlink.toutiao.com/api/click_event",r)}var s={zlink:t,zlink_click_time:Date.now()};g&&(s.zlink_data=g);var v=n()(e,s),m=n()(t,{scheme:v}),I=function(){setTimeout(function(){if(!d&&(p.os.ios&&E>=9||p.browser.weixin))y("iOS 9+, 使用 universal link 调起 :".concat(m)),window.location.href=m;else{y("使用 scheme 调起: ".concat(v)),window.location.href=v;var e=!0,t=function(){document.hidden&&(y("检测到页面隐藏"),e=!1)};document.addEventListener("visibilitychange",t),setTimeout(function(){if(e&&C>=S.length-1&&(y("未检测到页面隐藏，跳到下载: ".concat(m)),location.href=m),document.removeEventListener("visibilitychange",t),!!e)C++,i()},o||3e3)}},200)};u()({method:"POST",url:"https://zlink.toutiao.com/api/cb_e",data:{scheme:v},timeout:h||1e3}).then(function(e){var t;t={content:a()(e,"data.data"),disableClipboard:c,log:y,debug:_},x(void 0,void 0,void 0,w.mark(function e(){var i,l,o,n;return w.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.content,l=t.disableClipboard,o=t.log,n=!1,!(!l&&i&&"string"==typeof i)){e.next=13;break}return null==o||o("复制剪切板，内容:".concat(i)),null==o||o("第一次尝试写剪贴板"),e.next=7,b(t);case 7:if(n=e.sent){e.next=13;break}return null==o||o("第二次尝试写剪贴板，使用setTimeout"),e.next=12,b(Object.assign(Object.assign({},t),{useSetTimeout:!0}));case 12:n=e.sent;case 13:return null==o||o(n?"写入剪切板成功":"写入剪切板失败"),e.abrupt("return",n);case 15:case"end":return e.stop()}},e)})),I()}).catch(function(e){I()})},S=Array.isArray(i)?i:[i];!function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t[i]&&I(t[i],function(){e(t,i+1)})}(S)}}var T=g(function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports});_(T);var k=g(function(e){e.exports=function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var l,o,n,r,a=[],d=!0,u=!1;try{if(n=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(l=n.call(i)).done)&&(a.push(l.value),a.length!==t);d=!0);}catch(e){u=!0,o=e}finally{try{if(!d&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(u)throw o}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports});_(k);var L=g(function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,l=Array(t);i<t;i++)l[i]=e[i];return l},e.exports.__esModule=!0,e.exports.default=e.exports});_(L);var A=g(function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return L(e,t);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?L(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports});_(A);var R=g(function(e){e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports});_(R),_(g(function(e){e.exports=function(e,t){return T(e)||k(e,t)||A(e,t)||R()},e.exports.__esModule=!0,e.exports.default=e.exports}))},605862:function(e,t,i){"use strict";i(429532);var l=i(88648);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e}).apply(this,arguments)}let n=l.forwardRef(function(e,t){return l.createElement("svg",o({viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,ref:t},e),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.2148 9.39175C19.3131 7.82675 21.1165 7 23.1007 7C26.8794 7 30.0223 10.2782 30.0223 14.1753C30.0223 14.1755 30.0223 14.1757 30.0223 14.176C30.0225 14.1756 30.0227 14.1752 30.0229 14.1748C30.0229 14.2859 30.021 14.3701 30.0196 14.4319C30.0177 14.5169 30.0167 14.56 30.0229 14.5734C30.0086 15.3931 29.8671 16.0704 29.6157 16.9652C29.4731 17.1259 29.3406 17.4285 29.2086 17.7624C29.0003 18.0859 28.9215 18.2426 28.8014 18.5597C28.7275 18.6838 28.6508 18.8082 28.5715 18.9329C27.5275 20.5777 26.0694 22.2243 24.6208 23.6695C22.5352 25.7635 20.427 27.5014 19.5032 28.263C19.2448 28.476 19.079 28.6127 19.0323 28.6593C18.7066 28.9851 18.3808 28.9989 18.055 28.9995C18.0406 28.9998 18.026 29 18.0112 29C17.3308 29 16.9906 28.6598 16.6503 28.3196C16.6242 28.2935 16.5575 28.2384 16.4555 28.1568C15.4248 27.3969 13.1099 25.5454 10.9333 23.3118C9.26819 21.6181 7.66254 19.6741 6.78436 17.7732C6.44416 17.0928 6.0197 15.4728 6 14.5739C6.00724 14.5667 6.00612 14.5234 6.00388 14.437C6.00224 14.3737 6 14.2874 6 14.1753C6 10.2764 9.14114 7 12.9217 7C14.9023 7 16.7074 7.82675 18.2148 9.39175Z",fill:"currentColor"}))});n.elementType="Icon",t.Z=n},596714:function(e,t,i){"use strict";var l=i(582586);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(i(544161));function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,n=(0,o.default)(t,i,l),r=n.os,a=n.browser;return(e=(t=t.toLowerCase()).match(/newsarticle\/([\d.]+)/))&&(a.toutiao=!0,a.version=e[1]),{browser:a,os:r}}n.default=n;t.default=n,e.exports=t.default},325489:function(e,t,i){"use strict";var l=i(582586);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(i(111038));function n(e,t){void 0===t&&(t="undefined"!=typeof window?window.location&&window.location.search.substr(1):"");var i={};return t&&t.split("&").forEach(function(e){if(""!==e){var t=e.split("="),l=(0,o.default)(t),n=l[0],r=l.slice(1),a=decodeURIComponent(n),d=decodeURIComponent(r.join("="));if(a.match(/\[\]$/)){var u=a.replace(/\[\]$/,"");i[u]&&i[u]instanceof Array?i[u].push(d):i[u]=[d]}else i[a]=d}}),e?i[e]:i}n.default=n;t.default=n,e.exports=t.default},772142:function(e,t,i){"use strict";var l=i(582586);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(i(487360)),n=l(i(850058)),r=l(i(325489)),a=l(i(764143));function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,l)}return i}function u(e,t,i){if(void 0===t||0===Object.keys(t).length)return e;var l,u,s=!1;"boolean"==typeof i||void 0===i?l=!!i:(l=!!i.encodeList,s=i.stable);var c=e.split("?"),v=(0,n.default)(c,2),f=v[0],m=v[1],p=void 0===m?"":m;if(p){var _=p.split("#"),g=(0,n.default)(_,2);p=g[0];var h=g[1];u=void 0===h?"":h}else{var y=e.split("#"),w=(0,n.default)(y,2);f=w[0];var x=w[1];u=void 0===x?"":x}var C=(0,r.default)(void 0,p);return C=Object.assign(C,t),s&&(C=Object.keys(C).sort(function(e,t){return e>t?1:-1}).reduce(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach(function(t){(0,o.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},e,(0,o.default)({},t,C[t]))},{})),p=(p=(0,a.default)(C,l))&&"?".concat(p),u=u&&"#".concat(u),"".concat(f).concat(p).concat(u)}u.default=u;t.default=u,e.exports=t.default},544161:function(e,t){"use strict";function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0;t=t.toLowerCase();var o={},n={};return(e=t.match(/android;?[\s/]+([\d.]+)?/))?(o.android=!0,e[1]&&(o.version=e[1])):((e=t.match(/ipod(?:.*os\s([\d_]+))?/))?(o.ipod=!0,e[1]&&(o.version=e[1].split("_").join("."))):(e=t.match(/ipad.*os\s([\d_]+)/))?(o.ipad=!0,o.version=e[1].split("_").join(".")):"MacIntel"===i&&l>1&&(e=t.match(/version\/([\d.]+)/))?(o.ipad=!0,o.version=e[1]):(e=t.match(/iphone\sos\s([\d_]+)/))&&(o.iphone=!0,o.version=e[1].split("_").join(".")),o.ios=o.ipad||o.iphone||o.ipod),(e=t.match(/micromessenger[\s/]+([\d.]+)/))?(n.weixin=!0,n.version=e[1]):(e=t.match(/\sqq[\s/]+([\d.]+)/))?(n.qq=!0,n.version=e[1]):(e=t.match(/weibo[\s_]+([\d.]+)/))&&(n.weibo=!0,n.version=e[1]),{browser:n,os:o}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i.default=i;t.default=i,e.exports=t.default},191777:function(e,t,i){"use strict";var l=i(582586);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(i(435911)),n=function(e){var t;return(t=Array.isArray(e[0])?e[0]:e).reduce(function(e,t){return[].concat((0,o.default)(e),(0,o.default)((t+"").replace(/\[['"]/g,"[").replace(/\]|['"](?=\])/g,"").split(/[.[]/)))},[])};function r(e){for(var t=arguments.length,i=Array(t>1?t-1:0),l=1;l<t;l++)i[l-1]=arguments[l];var o=e;return o&&0!==i.length?((i=n(i)).every(function(e){return null!=(o=o[e])}),o):o}r.default=r;t.default=r,e.exports=t.default},764143:function(e,t,i){"use strict";var l=i(582586);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(i(639294));function n(e,t){var i=[];return Object.keys(e).forEach(function(l){var n=e[l];null!=n&&("object"===(0,o.default)(n)?t&&n instanceof Array&&n.every(function(e){return"object"!==(0,o.default)(e)})?n.forEach(function(e){i.push("".concat(encodeURIComponent(l),"[]=").concat(encodeURIComponent(e)))}):i.push("".concat(encodeURIComponent(l),"=").concat(encodeURIComponent(JSON.stringify(n)))):i.push("".concat(encodeURIComponent(l),"=").concat(encodeURIComponent(n))))}),i.join("&")}n.default=n;t.default=n,e.exports=t.default},16343:function(e,t,i){"use strict";var l=i(582586);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(i(596714)),n=l(i(754657)),r=i(612361),a=new n.default;function d(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,u=(0,o.default)(i,l,d),s=u.os,c=u.browser;return i=i.toLowerCase(),l=l.toLowerCase(),!s.ios&&!s.android&&((e=i.match(/windows phone ([\d.]+)/))?(s.wp=!0,s.version=e[1]):(e=i.match(/(?:web|hpw)os[\s/]([\d.]+)/))?(s.webos=!0,s.version=e[1],i.match(/touchpad/)&&(s.touchpad=!0)):(e=i.match(/blackberry.*version\/([\d.]+)/))?(s.blackberry=!0,s.version=e[1]):(e=i.match(/bb10.*version\/([\d.]+)/))?(s.bb10=!0,s.version=e[1]):(e=i.match(/rim\stablet\sos\s([\d.]+)/))?(s.rimtabletos=!0,s.version=e[1]):(e=i.match(/kindle\/([\d.]+)/))?(s.kindle=!0,s.version=e[1]):(e=i.match(/(?:mobile|tablet); rv:([\d.]+).*firefox\/[\d.]+/))&&(s.firefoxos=!0,s.version=e[1])),(e=i.match(/webkit\/?([\d.]+)/))&&(c.webkit=!0,c.version=e[1]),(e=i.match(/(?:chrome|crios)\/([\d.]+)/))?(c.chrome=!0,c.version=e[1]):(e=i.match(/(?:msie\s|trident\/\d(?=[^?]+).*rv:)([\d.]+)/))?(c.ie=!0,c.version=e[1]):(e=i.match(/firefox\/([\d.]+)/))?(c.firefox=!0,c.version=e[1]):i.match(/playbook/)&&(c.playbook=!0),i.match(/ucbrowser/)?c.ucbrowser=!0:i.match(/qqbrowser/)&&(c.qqbrowser=!0),!c.chrome&&i.match(/ip(?:one|od|ad).*applewebkit(?!.*safari)/)&&(c.webview=!0),(e=i.match(/silk\/([\d._]+)/))&&(c.silk=!0,c.version=e[1]),s.android&&i.match(/kindle fire/)&&(c.silk=!0),(c.webview||(e=i.match(/version\/([\d.]+)(?:[^m]*mobile)?[^s]*safari/)))&&(i.match(/macintosh; intel/)||s.ios||/win(?:\d{2}|dows)/.test(l))&&(c.safari=!0,!s.ios&&(c.version=e[1])),!(c.weixin||c.qq||c.weibo)&&((e=i.match(/fbav\/([\d.]+)/))?(c.facebook=!0,c.version=e[1],(e=i.match(/fbsn\/ios;fbsv\/([\d.]+)/))&&(s.ios=!0,s.version=e[1])):Object.keys(t=a.parse(i)).length?r(c,t):n&&(c.robot=RegExp("\\+https:\\/\\/developers.google.com\\/\\+\\/web\\/snippet\\/|ad\\smonitoring|adsbot|baiduspider|bingbot|cloudflare|crawler|curl|embedly|exabot|facebookexternalhit|google|googlebot|gurujibot|heritrix|linkedinbot|msnbot|phantomjs|phantom\\.js|pingdom|python|rtlnieuws|slackbot|slurp|spbot|telegrambot|test\\scertificate|testing|tiabot|tumblr |twitterbot|web\\sscraper|wget|yandexbot|apex|applebot|duckduckbot|facebot|flipboard|gsa-crawler|ia_archiver|pinterest|skypeuripreview|odklbot|archive.org_bot|ltx71|guzzlehttp|vkshare|discordbot|whatsapp").test(i))),c.livestream_all=c.livestream||c.livestream_pro||c.virgo||c.livestream_lite,s.tablet=s.ipad||c.playbook||s.android&&!i.match(/mobile/)||c.firefox&&!!i.match(/tablet/)||c.ie&&!i.match(/phone/)&&!!i.match(/touch/),s.phone=!s.tablet&&!s.ipod&&(s.android||s.iphone||s.webos||s.blackberry||s.bb10||c.chrome&&!!i.match(/android|crios\/[\d.]+/)||c.firefox&&!!i.match(/mobile/)||c.ie&&!!i.match(/touch/)),{browser:c,os:s}}a.add(Object.keys(n.default.strategies)),d.default=d;t.default=d,e.exports=t.default},754657:function(e,t,i){"use strict";var l=i(582586);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(i(905947)),n=l(i(458739)),r=l(i(487360)),a=function(e){if(e.match(/^\d+$/))return 6===e.length?e.match(/\d{2}/g).map(function(e){return+e}).join("."):e.split("").join(".");return e},d=function(){function e(){(0,o.default)(this,e),(0,r.default)(this,"cache",void 0),this.cache=[]}return(0,n.default)(e,[{key:"add",value:function(t){var i=this;t.forEach(function(t){var l;if("string"==typeof t){if(!e.strategies[t])return;l=e.strategies[t]}else l=t;i.cache.push(l)})}},{key:"parse",value:function(e){e=e.toLowerCase();for(var t=0,i=this.cache.length;t<i;++t){var l=this.cache[t](e);if(l)return l}return{}}}]),e}();(0,r.default)(d,"strategies",{livestream:function(e){var t=e.match(/live_stream_([\d.]+)/);if(t)return{livestream:!0,version:a(t[1]||"")}},livestream_pro:function(e){var t=e.match(/live_stream_pro_([\d.]+)/);if(t)return{livestream_pro:!0,version:a(t[1]||"")}},livestream_lite:function(e){var t=e.match(/live_stream_lite_([\d.]+)/);if(t)return{livestream_lite:!0,version:a(t[1]||"")}},virgo:function(e){var t=e.match(/live_i18n_([\d.]+)/);if(t){var i=t[1];return i.match(/^\d+$/)&&(i=i.split("").join(".")),{virgo:!0,version:i}}},aweme:function(e){var t=e.match(/aweme_([\d.]+)/);if(t)return{aweme:!0,version:a(t[1]||"")}},aweme_lite:function(e){var t=e.match(/(?:aweme|douyin)_lite_([\d.]+)/);if(t)return{aweme_lite:!0,version:a(t[1]||"")}},aweme_hotsoon:function(e){var t=e.match(/aweme_hotsoon_([\d.]+)/);if(t)return{aweme_hotsoon:!0,version:a(t[1]||"")}},tiktok:function(e){var t=e.match(/(?:trill|musical_ly)_([\d.]+)/);if(t){var i=t[1];return i.match(/^\d+$/)&&(i=i.split("").join(".")),{tiktok:!0,version:i}}},dcd:function(e){var t=e.match(/automobile.([\d.]+)/);if(t)return{dcd:!0,version:t[1]}},xigua:function(e){var t=e.match(/videoarticle\/([\d.]+)/);if(t)return{xigua:!0,version:t[1]}},manyhouse:function(e){var t=e.match(/manyhouse\/([\d.]+)/);if(t)return{manyhouse:!0,version:t[1]}},dragon:function(e){var t=e.match(/dragon\/([\d.]+)/);if(t)return{dragon:!0,version:t[1]}},toutiao:function(e){var t=e.match(/newsarticle\/([\d.]+)/);if(t){var i={toutiao:!0,version:t[1]};return e.match(/newslite(?:inhouse)?/)&&(i.toutiao_lite=!0),e.match(/mode\/basic/)&&(i.toutiao_basic=!0),i}},lark:function(e){if(e.match(/lark/))return{lark:!0}},topbuzz:function(e){if(e.match(/topbuzz/))return{topbuzz:!0}},ulike:function(e){var t=e.match(/ulike\/([\d.]+)/);if(t)return{ulike:!0,version:t[1]}},faceu:function(e){var t=e.match(/faceu\/([\d.]+)/);if(t)return{faceu:!0,version:t[1]}},maya:function(e){var t=e.match(/maya\/([\d.]+)/);if(t)return{maya:!0,version:t[1]}},flipchat:function(e){var t=e.match(/flipchat\/([\d.]+)/);if(t)return{flipchat:!0,version:t[1]}}}),d.default=d;t.default=d,e.exports=t.default},304942:function(e,t,i){"use strict";var l=i(299541),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var i,n,r,a,d,u,s,c,v=!1;!t&&(t={}),t.debug;try{if(d=l(),u=document.createRange(),s=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",function(i){if(i.stopPropagation(),t.format){if(i.preventDefault(),void 0===i.clipboardData){window.clipboardData.clearData();var l=o[t.format]||o.default;window.clipboardData.setData(l,e)}else i.clipboardData.clearData(),i.clipboardData.setData(t.format,e)}t.onCopy&&(i.preventDefault(),t.onCopy(i.clipboardData))}),document.body.appendChild(c),u.selectNodeContents(c),s.addRange(u),!document.execCommand("copy"))throw Error("copy command was unsuccessful");v=!0}catch(l){try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),v=!0}catch(l){;i="message"in t?t.message:"Copy to clipboard: #{key}, Enter",n=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",a=i.replace(/#{\s*key\s*}/g,n),window.prompt(a,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(u):s.removeAllRanges()),c&&document.body.removeChild(c),d()}return v}},144635:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,l=Array(t);i<t;i++)l[i]=e[i];return l},e.exports.__esModule=!0,e.exports.default=e.exports},326212:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},892061:function(e,t,i){var l=i(144635);e.exports=function(e){if(Array.isArray(e))return l(e)},e.exports.__esModule=!0,e.exports.default=e.exports},905947:function(e){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},458739:function(e,t,i){var l=i(978565);function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}e.exports=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},487360:function(e,t,i){var l=i(978565);e.exports=function(e,t,i){return(t=l(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},561475:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},773871:function(e){e.exports=function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var l,o,n,r,a=[],d=!0,u=!1;try{if(n=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(l=n.call(i)).done)&&(a.push(l.value),a.length!==t);d=!0);}catch(e){u=!0,o=e}finally{try{if(!d&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(u)throw o}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},849368:function(e){e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},673642:function(e){e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},850058:function(e,t,i){var l=i(326212),o=i(773871),n=i(123605),r=i(849368);e.exports=function(e,t){return l(e)||o(e,t)||n(e,t)||r()},e.exports.__esModule=!0,e.exports.default=e.exports},111038:function(e,t,i){var l=i(326212),o=i(561475),n=i(123605),r=i(849368);e.exports=function(e){return l(e)||o(e)||n(e)||r()},e.exports.__esModule=!0,e.exports.default=e.exports},435911:function(e,t,i){var l=i(892061),o=i(561475),n=i(123605),r=i(673642);e.exports=function(e){return l(e)||o(e)||n(e)||r()},e.exports.__esModule=!0,e.exports.default=e.exports},630364:function(e,t,i){var l=i(639294).default;e.exports=function(e,t){if("object"!=l(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=l(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},978565:function(e,t,i){var l=i(639294).default,o=i(630364);e.exports=function(e){var t=o(e,"string");return"symbol"==l(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},123605:function(e,t,i){var l=i(144635);e.exports=function(e,t){if(e){if("string"==typeof e)return l(e,t);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);