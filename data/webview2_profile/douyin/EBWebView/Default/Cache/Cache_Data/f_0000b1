!function(){var e,t,i,r,a,n={393501:function(e,t,i){"use strict";var r,a;i.d(t,{Dt:function(){return d},G6:function(){return s},vU:function(){return o}}),i(954372),i(826893),i(250440),i(70372);let n="undefined"!=typeof window&&navigator.userAgent.toLocaleLowerCase()||"",s=n&&/^((?!chrome|android).)*safari/.test(n),o=n&&n.includes("firefox"),d=n&&n.includes("android");"undefined"!=typeof WorkerGlobalScope||"undefined"!=typeof self&&"undefined"==typeof window||"undefined"!=typeof globalThis&&(null===(a=globalThis)||void 0===a||null===(r=a.constructor)||void 0===r||r.name)},204509:function(e,t,i){"use strict";let r;function a(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if((t=t.filter(Boolean)).length<2)return t[0];let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),a=0;return t.forEach(e=>{r.set(e,a),a+=e.byteLength}),r}i.d(t,{CM:function(){return s},U3:function(){return n},gJ:function(){return a}}),i(134761),i(112587),i(17322),i(560401),i(779566),i(69896),i(416555),i(404948),i(527785),i(268917),i(897860),i(927234);Date.now().toString(36),Math.random().toString(36).substring(2,9);function n(e){r=e}function s(){return r}},936488:function(e,t,i){"use strict";i.d(t,{Xe:function(){return a},ct:function(){return r}});let r={PLAYER_LOG:"playerlog"},a={ADD_INFO_TO_LOG:"addExtInfoToLog",PROGRESS:"progress",SEGMENT_DONE:"webcodec_segment_done"}},577656:function(e,t,i){"use strict";function r(e){let t;let i=[],r=[];return e.sps.forEach(e=>{t=e.byteLength,i.push(t>>>8&255),i.push(255&t),i.push(...e)}),e.pps.forEach(e=>{t=e.byteLength,r.push(t>>>8&255),r.push(255&t),r.push(...e)}),new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(...i).concat([e.pps.length]).concat(...r))}function a(e){let t;let i=e.hvcC;if(!i||!e.vps)return;let{vps:r,sps:a,pps:n}=e,s=i.generalProfileCompatibilityFlags,o=i.generalConstraintIndicatorFlags,d=(r.length&&1)+(a.length&&1)+(n.length&&1);t=[1,i.generalProfileSpace<<6|i.generalTierFlag<<5|i.generalProfileIdc,s>>>24,s>>>16,s>>>8,s,o[0],o[1],o[2],o[3],o[4],o[5],i.generalLevelIdc,240,0,252,252|i.chromaFormatIdc,248|i.bitDepthLumaMinus8,248|i.bitDepthChromaMinus8,0,0,i.numTemporalLayers<<3|i.temporalIdNested<<2|3,d];let u=e=>{t.push(e.length>>8,e.length),t.push(...e)};return r.length&&(t.push(160,0,r.length),r.forEach(u)),a.length&&(t.push(161,0,a.length),a.forEach(u)),n.length&&(t.push(162,0,n.length),n.forEach(u)),new Uint8Array(t)}function n(e){let t=new Uint8Array((e=e.filter(Boolean)).reduce((e,t)=>e+=t.length,0)+4*e.length);return e.reduce((e,i)=>{let r=new DataView(new ArrayBuffer(4));return r.setUint32(0,i.length,!1),t.set(new Uint8Array(r.buffer),e),e+=4,t.set(i,e),e+=i.length},0),t}function s(e,t){let i=e.numberOfChannels,r=e.numberOfFrames,a=new Float32Array(r),n=new Float32Array(r*i);switch(e.format){case"s16":if(1===e.numberOfChannels&&"number"==typeof t&&t!==e.sampleRate)throw Error(`Unsupported audio format ${e.format} with single channel`);e.copyTo(n,{planeIndex:0}),n=function(e,t,i){let r=new Float32Array(t*i);for(let a=0;a<t;a++)for(let n=0;n<i;n++){let s=e.getInt16((i*a+n)*2,!0);r[n*t+a]=s/32768}return r}(new DataView(n.buffer),r,i);break;case"f32":e.copyTo(n,{planeIndex:0}),n=d(new DataView(n.buffer),r,i);break;default:if(/planar/.test(e.format||""))for(let t=0;t<i;t++)e.copyTo(a,{planeIndex:t}),n.set(a,t*r);else throw Error(`Unsupported audio format: ${e.format}`)}let s={duration:e.duration,format:e.format,numberOfChannels:e.numberOfChannels,numberOfFrames:e.numberOfFrames,sampleRate:e.sampleRate,timestamp:e.timestamp,data:n};return e.close(),s}function o(e){let{numberOfChannels:t,numberOfFrames:i,data:r}=e,a=r.slice(),n=0;for(let e=0;e<i;e++)for(let s=0;s<t;s++)a[n]=r[e+i*s],n++;return{duration:e.duration,format:"f32",numberOfChannels:t,numberOfFrames:i,data:a,sampleRate:e.sampleRate,timestamp:e.timestamp}}function d(e,t,i){let r=new Float32Array(t*i);for(let a=0;a<t;a++)for(let n=0;n<i;n++)r[n*t+a]=e.getFloat32((i*a+n)*4,!0);return r}i.d(t,{Af:function(){return a},H$:function(){return o},N2:function(){return d},_7:function(){return s},sk:function(){return r},u8:function(){return u},ub:function(){return n}}),i(268917),i(874386),i(112587),i(17322),i(560401),i(779566),i(69896),i(416555),i(404948),i(527785),i(209955),i(954372),i(826893);function u(e){let t={};return null==e||e.forEach((e,i)=>{t[i]=e}),t}},353077:function(e,t,i){"use strict";i.d(t,{Ll:function(){return n},QL:function(){return s},Zo:function(){return a},_8:function(){return r}});let r=["f-workerinit","f-startload","f-firstbyte","f-loadmeta","f-metaparse","f-addmeta","f-videodecodeinits","f-audiodecodeinits","f-videodecodeinited","f-audiodecodeinited","f-appendvideodata","f-startdecodevideo","f-outputvideo","f-writevideo","f-writeready"];var a={ISREADY:"up_isready",STARTPLAY:"up_startplay",TRANSMIT_LOG:"up_getlog",PROTOCOL_CONFIG:"up_protocolconfig",MEDIACODEC_CONFIG:"up_veconfig",LOAD_STREAM:"up_loadstream",SEAMLESS_LOAD_STREAM:"up_seamlessloadstream",CANCEL_SWITCH:"up_cancelswitch",PLAY:"up_play",PAUSE:"up_pause",MUTED_SET:"up_mutedset",LOOP_CHANGE:"up_loopchange",CURRENT_TIME:"up_currenttime",PLAYBACKRATE:"up_playbackrate",WRITABLE:"up_writable",FREQUENT_STATISTICS:"up_frequentstatistics",ERROR:"up_error",PROCESS_ERROR:"up_process_error",VISIBILITYSTATE:"up_process_visibilityState",RESET:"up_reset",MESSAGE_EVENT_RECEIVESUCCESS:"down_e_receivesuccess",MESSAGE_EVENT_ISREADY:"down_e_ready",MESSAGE_EVENT_LOADEDMETADATA:"down_e_loadedmetadata",MESSAGE_EVENT_DURATIONCHANGE:"down_e_durationchange",MESSAGE_EVENT_WAITING:"down_e_waiting",MESSAGE_EVENT_SEEKING:"down_e_seeking",MESSAGE_EVENT_SEEKED:"down_e_seeked",MESSAGE_EVENT_PROGRESS:"down_e_progress",MESSAGE_EVENT_TIMEUPDATE:"down_e_timeupdate",MESSAGE_EVENT_ENDED:"down_ended",MESSAGE_EVENT_RATECHANGE:"down_e_ratechange",MESSAGE_TRANS_LOG:"down_translog",MESSAGE_INIT_RENDER:"down_initrender",MESSAGE_FIRSTFRAME:"down_firstframe",MESSAGE_STATISTICS:"down_statistics",MESSAGE_EVENT_VEERROR:"down_e_veerror",MESSAGE_EVENT_DROPFRAMES:"down_e_dropframes",MESSAGE_EVENT_CANPLAY:"down_e_canplay",MESSAGE_EVENT_PLAYING:"down_e_playing",MESSAGE_EVENT_SEGMENT_DONE:"down_e_segment_done",URLCHANGE:"urlchange",DESTROY:"destroy",VOLUMEBALANCE_UPDATE:"volumebalance_update",DOWN_WRITABLE:"down_writable",workerinit:"f-workerinit",startload:"f-startload",firstbyte:"f-firstbyte",loadmeta:"f-loadmeta",metaparse:"f-metaparse",addmeta:"f-addmeta",videodecodeinits:"f-videodecodeinits",audiodecodeinits:"f-audiodecodeinits",videodecodeinited:"f-videodecodeinited",audiodecodeinited:"f-audiodecodeinited",appendvideodata:"f-appendvideodata",startdecodevideo:"f-startdecodevideo",outputvideo:"f-outputvideo",writevideo:"f-writevideo",writeready:"f-writeready",AV_UNSYNC:"av-unsync",SDP_LOAD:"sdp-load",SDP_DISCONNECT:"sdp-disconnect",SDP_TRANSFORM:"sdp-transform",AV_CODEC_INFO:"av-codec-info",RTM_STATS:"rtm-stats",RTM_RESPONSE_HEADERS:"rtm-response-headers",RTM_TTFB:"rtm-ttfb",RTM_SAMPLE_RATE_CHANGE:"rtm-sample-rate-change"};let n=1e6;var s={DONE:"done",NOBUFFER:"nobuffer"}},304641:function(e,t,i){"use strict";i.d(t,{wb:function(){return r.wb},WE:function(){return r.WE},Fc:function(){return r.Fc}}),i("134761"),i("268917"),i("675373"),i("874386"),i("826893"),i("819117"),i("724623"),i("931921"),i("542949"),i("791999"),i("650242"),i("309720"),i("767781");var r=i("365020")},570155:function(e,t,i){"use strict";var r=i("134761"),a=i("520739");i("874386");var n=i("301768"),s=i("724623"),o=i("353077"),d=i("291955"),u=i("410653"),l=i("885682"),c=i("175848"),m=i("845438"),p=i("368200");i("675373"),i("268917"),i("250440");var h=i("873356");i("112587"),i("17322"),i("560401"),i("779566"),i("69896"),i("416555"),i("404948"),i("777180"),i("209955"),i("413806"),i("826893"),i("527785"),i("284961"),i("338172"),i("918755");var f="MP4A-LATM",_="OPUS";let g=e=>{if(e.byteLength<8)return;let t=new DataView(e),i=(248&t.getUint8(0))>>3,r=7&t.getUint8(0),a=!!(268435456&t.getUint8(1)),n=!!(16777216&t.getUint8(1)),s=!!(1048576&t.getUint8(1)),o=!!(65536&t.getUint8(1));return t.getUint8(3),{object:i,channel:r,cpresent:a,sbrEnabled:n,psEnabled:s,stereo:o,sampleFragament:t.getInt32(4)}};var v=i("995324"),S=i("679633"),y=i("371764"),T=i("966243");class E{updateCurrentTime(e,t){this._currentAudioTimestamp=e,this._payloadType=t}start(){let e=0,t=0;this._timer=setInterval(()=>{if(this._startTs&&this._startAudioTimestamp){let i=this._currentAudioTimestamp-t,r=Date.now()-e;e=Date.now(),t=this._currentAudioTimestamp,44100===this._currentSampleRate&&(i/r>46?this._exceptionList.push(!0):this._exceptionList.push(!1));let a=(this._currentAudioTimestamp-this._startAudioTimestamp)/(Date.now()-this._startTs);this._exceptionList.filter(e=>e).length>=10&&a>=48&&this._resetToNewSampleRate(48e3),this._exceptionList=this._exceptionList.slice(-12)}else this._startTs=Date.now(),this._startAudioTimestamp=this._currentAudioTimestamp,e=this._startTs,t=this._currentAudioTimestamp},1e3)}stop(){delete this._startTs,delete this._startAudioTimestamp,this._currentAudioTimestamp=0,clearInterval(this._timer),delete this._timer,this._exceptionList=[]}_resetToNewSampleRate(e){this._currentSampleRate=e,this._callback(e,this._payloadType),this.stop()}constructor(e){(0,r._)(this,"_callback",void 0),(0,r._)(this,"_startTs",void 0),(0,r._)(this,"_startAudioTimestamp",void 0),(0,r._)(this,"_currentAudioTimestamp",0),(0,r._)(this,"_payloadType",void 0),(0,r._)(this,"_timer",void 0),(0,r._)(this,"_currentSampleRate",44100),(0,r._)(this,"_exceptionList",[]),this._callback=e}}var A=i("663380");class w extends d.Z{bindListeners(){this._logger.log("init rtm loader worker"),this.on(o.Zo.SDP_TRANSFORM,this.handleSdpTransform),this.on(o.Zo.AV_CODEC_INFO,this.handleAvCodecInfo),this.on(o.Zo.RTM_RESPONSE_HEADERS,this._handleResponseHeaders),this.on(o.Zo.RTM_TTFB,this.handleTTFB),this.on(o.Zo.ERROR,this.handleError),this._transFFEventDown(o.Zo.SDP_LOAD),this._transFFEventDown(o.Zo.SDP_DISCONNECT)}load(e){let{url:t,onVideoChunk:i,onAudioChunk:r}=e;this._onVideoChunk=i,this._onAudioChunk=r,this.emit(o.Zo.SDP_LOAD,{url:t}),this.url=t}cancel(){this._logger.log("cancel"),delete this.url,delete this._onAudioChunk,delete this._onVideoChunk,this._videoPayloadMap={},this._audioPayloadMap={},this._firstTimeStamp=null,this._firstAudioTimestamp=null,this._sampleRateDetector.stop(),this.emit(o.Zo.SDP_DISCONNECT)}destroy(){this._logger.log("destroy"),super.destroy(),this.off(o.Zo.SDP_TRANSFORM,this.handleSdpTransform),this.off(o.Zo.AV_CODEC_INFO,this.handleAvCodecInfo),this.off(o.Zo.RTM_RESPONSE_HEADERS,this._handleResponseHeaders),this.off(o.Zo.RTM_TTFB,this.handleTTFB),this.off(o.Zo.ERROR,this.handleError)}getAudioMeta(e){let t=(null==e?void 0:e.payloadType)&&this._audioPayloadMap[null==e?void 0:e.payloadType];if(!!t&&t.codec!==_){if(t.codec===f){var i;let r=null==e?void 0:null===(i=e.headerExtension)||void 0===i?void 0:i.find(e=>27===e.id);if(!r)return new v.Z({codec:t.mimetype,sampleRate:t.sampleRate,channelCount:2,objectType:t.objectType});let a=g(r.payload);return a?new v.Z({codec:t.mimetype,sampleRate:a.sampleFragament,channelCount:a.channel,objectType:a.object}):new v.Z({codec:t.mimetype,sampleRate:t.sampleRate,channelCount:2,objectType:t.objectType})}}}_getVideoMeta(e){let t=e&&this._videoPayloadMap[e];return t?new S.Z({codec:t.mimetype}):void 0}constructor(e){super("",e),(0,r._)(this,"_onVideoChunk",void 0),(0,r._)(this,"_onAudioChunk",void 0),(0,r._)(this,"_videoPayloadMap",{}),(0,r._)(this,"_audioPayloadMap",{}),(0,r._)(this,"url",void 0),(0,r._)(this,"_firstTimeStamp",null),(0,r._)(this,"_firstAudioTimestamp",null),(0,r._)(this,"_sampleRateDetector",void 0),(0,r._)(this,"_logger",new n.ZP("RtmLoaderWorker")),(0,r._)(this,"handleSdpTransform",e=>{this._logger.log("handleSdpTransform");let{video:t,audio:i}=e;if(this._firstTimeStamp=null,this._firstAudioTimestamp=null,t){let{readable:e,writable:i}=t;e.pipeThrough(new TransformStream({transform:e=>{var t;let i=this._getVideoMeta(e.getMetadata().payloadType);null===this._firstTimeStamp&&(this._firstTimeStamp=e.timestamp/90),null===(t=this._onVideoChunk)||void 0===t||t.call(this,{pts:e.timestamp/90-this._firstTimeStamp,keyframe:"key"===e.type,units:[new Uint8Array(e.data)],meta:i,dts:e.timestamp/90,duration:0})}})).pipeTo(i)}if(i){let{readable:e,writable:t}=i;e.pipeThrough(new TransformStream({transform:e=>{var t;let i=e.getMetadata(),r=this.getAudioMeta(i);if(!r)return;this._sampleRateDetector.updateCurrentTime(e.timestamp,i.payloadType),null===this._firstAudioTimestamp&&(this._firstAudioTimestamp=e.timestamp,44100===r.sampleRate&&(this._sampleRateDetector.start(),this._logger.log("sampleRateDetector","start")));let a=Number(((e.timestamp-this._firstAudioTimestamp)*1e3/r.sampleRate).toFixed(3));null===(t=this._onAudioChunk)||void 0===t||t.call(this,{pts:a,data:new Uint8Array(e.data),dts:a,duration:0,meta:r})}})).pipeTo(t)}}),(0,r._)(this,"handleAvCodecInfo",e=>{let{video:t,audio:i}=e;this._videoPayloadMap=t,this._audioPayloadMap=i}),(0,r._)(this,"_handleResponseHeaders",e=>{let{response:t}=e;this.emit(y.le.RESPONSEHEADERS,t)}),(0,r._)(this,"handleTTFB",e=>{let{elapsed:t}=e;T.Z.addTTFB(),this.emit(y.le.TTFB,{elapsed:t,ok:!0,url:this.url||"",responseUrl:this.url||""})}),(0,r._)(this,"handleError",e=>{let{error:t}=e;this.emit(y.le.ERROR,t)}),(0,r._)(this,"_resetToNewSampleRate",(e,t)=>{this.handleError({error:new A.Z(A.t.RTM_NOT_SUPPORTED,"rtm samplerate not 44100")})}),this.bindListeners(),this._sampleRateDetector=new E(this._resetToNewSampleRate)}}i("981168");var R=i("106879");class b extends R.Z{getDecodeInfo(){var e,t,i,r,a,n,s,o,d,u,l,c,m,p,h,f;return{video_frames:[this._decodeFrames,this._decodeOutputFrames,this.renderFrames],audio_chunks:[this._decodeAudioChunk,this._decodeOutputChunk,this.renderChunk],av_render_queue_size:[null===(e=this._audioFrameQueue)||void 0===e?void 0:e.length,null===(t=this._videoFrameQueue)||void 0===t?void 0:t.length],av_decoder_queue_size:[(null===(i=this._audioDecoder)||void 0===i?void 0:i.decodeQueueSize)||0,(null===(r=this._videoDecoder)||void 0===r?void 0:r.decodeQueueSize)||0],av_decoder_state:[(null===(a=this._audioDecoder)||void 0===a?void 0:a.state)||"",(null===(n=this._videoDecoder)||void 0===n?void 0:n.state)||""],current_time:+(this._currentTime/1e6).toFixed(1),video_timestamp:[((null===(s=this._videoTimeRange)||void 0===s?void 0:s.nextFrameTimestamp)||0)/1e6,((null===(d=this._videoFrameQueue)||void 0===d?void 0:null===(o=d[0])||void 0===o?void 0:o.timestamp)||0)/1e6],audio_timestamp:[((null===(u=this._audioTimeRange)||void 0===u?void 0:u.nextFrameTimestamp)||0)/1e6,((null===(c=this._audioFrameQueue)||void 0===c?void 0:null===(l=c[0])||void 0===l?void 0:l.timestamp)||0)/1e6],av_recv_queue_size:[null===(m=this._audioTimeRange)||void 0===m?void 0:m.length,null===(p=this._videoTimeRange)||void 0===p?void 0:p.length],av_buffered_range:[(((null===(h=this._audioTimeRange)||void 0===h?void 0:h.liveEdge)||0)-this._currentTime)/1e6,(((null===(f=this._videoTimeRange)||void 0===f?void 0:f.liveEdge)||0)-this._currentTime)/1e6]}}destroy(){this._rtmAudioTimestampMap.clear(),this._lastAudioFrameMeta=null,super.destroy()}_decodeAudioHook(e){this._decodeAudioChunk++,this._rtmAudioTimestampMap.set(this._decodeAudioChunk,e.timestamp)}constructor(...e){super(...e),(0,r._)(this,"_rtmAudioTimestampMap",new Map),(0,r._)(this,"_decodeOutputChunk",0),(0,r._)(this,"_decodeAudioChunk",0),(0,r._)(this,"_decodeOutputFrames",0),(0,r._)(this,"isRTM",!0),(0,r._)(this,"_lastAudioFrameMeta",null),(0,r._)(this,"_onVideoDecodeOutput",e=>{this._decodeOutputFrames++,super._handleVideoFrame(e),this._videoFrameQueue=this._videoFrameQueue.sort((e,t)=>e.timestamp-t.timestamp)}),(0,r._)(this,"_onAudioDecodeOutput",e=>{this._decodeOutputChunk++;let t=this._rtmAudioTimestampMap.get(this._decodeOutputChunk);this._rtmAudioTimestampMap.delete(this._decodeOutputChunk),"number"==typeof t&&t!==e.timestamp&&Object.defineProperty(e,"timestamp",{value:t,writable:!1});let i=[],r=Math.ceil(1024e6/e.sampleRate);for(;this._lastAudioFrameMeta&&e.timestamp-this._lastAudioFrameMeta.timestamp>r;){let e=function(e,t){let i=function(e,t,i){let r=e*t;if("f32"===i||"f32-planar"===i){let e=new Float32Array(r);return e.fill(0),e}if("s16"===i||"s16-planar"===i||"s32"===i||"s32-planar"===i){let e=new Int16Array(r);return e.fill(0),e}if("u8"===i||"u8-planar"===i){let e=new Int16Array(r);return e.fill(128),e}throw TypeError(`unexpected audio format: ${i}`)}(e.numberOfChannels,e.numberOfFrames,e.format);return new AudioData({format:e.format,numberOfChannels:e.numberOfChannels,numberOfFrames:e.numberOfFrames,sampleRate:e.sampleRate,timestamp:e.timestamp+t,data:i})}(this._lastAudioFrameMeta,r);this._lastAudioFrameMeta=C(e),i.push(e)}for(let t of(this._lastAudioFrameMeta=C(e),i.push(e),i))super._handleAudioFrame(t)})}}function C(e){return{format:e.format,numberOfChannels:e.numberOfChannels,numberOfFrames:e.numberOfFrames,sampleRate:e.sampleRate,timestamp:e.timestamp}}i("927234"),i("78080");var M=i("393501");class O{static getRateIndexByRate(e){return O.FREQ.indexOf(e)}static parseADTS(e,t){let i,r;let a=e.length,n=0;for(;n+2<a&&(255!==e[n]||(246&e[n+1])!=240);){;n++}if(n>=a)return;let s=n,o=[],d=(60&e[n+2])>>>2,u=O.FREQ[d];if(!u)throw Error(`Invalid sampling index: ${d}`);let l=((192&e[n+2])>>>6)+1,c=(1&e[n+2])<<2|(192&e[n+3])>>>6,{config:m,codec:p}=O._getConfig(d,c,l),h=0,f=O.getFrameDuration(u);for(;n+7<a;){if(255!==e[n]||(246&e[n+1])!=240){n++;continue}if(r=(3&e[n+3])<<11|e[n+4]<<3|(224&e[n+5])>>5,a-n<r)break;i=(1&~e[n+1])*2,o.push({pts:t+h*f,data:e.subarray(n+7+i,n+r)}),h++,n+=r}return{skip:s,remaining:n>=a?void 0:e.subarray(n),frames:o,samplingFrequencyIndex:d,sampleRate:u,objectType:l,channelCount:c,codec:p,config:m,originCodec:`mp4a.40.${l}`}}static parseAudioSpecificConfig(e){if(!e.length)return;let t=e[0]>>>3,i=(7&e[0])<<1|e[1]>>>7,r=(120&e[1])>>>3,a=O.FREQ[i];if(!a)return;let{config:n,codec:s}=O._getConfig(i,r,t);return{samplingFrequencyIndex:i,sampleRate:a,objectType:t,channelCount:r,config:n,codec:s,originCodec:`mp4a.40.${t}`}}static getFrameDuration(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return 1024*t/e}static _getConfig(e,t,i){let r,a;let n=[];return M.vU?e>=6?(r=5,a=e-3):(r=2,a=e):M.Dt?(r=2,a=e):(r=2===i||5===i?i:5,a=e,e>=6?a=e-3:1===t&&(r=2,a=e)),n[0]=r<<3,n[0]|=(14&e)>>1,n[1]=(1&e)<<7,n[1]|=t<<3,5===r&&(n[1]|=(14&a)>>1,n[2]=(1&a)<<7,n[2]|=8,n[3]=0),{config:n,codec:`mp4a.40.${r}`}}static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return new Uint8Array(0)}}(0,r._)(O,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);class k{static parseAnnexB(e){let t=e.length,i=2,r=0;for(;null!==e[i]&&void 0!==e[i]&&1!==e[i];)i++;if((r=++i+2)>=t)return[];let a=[];for(;r<t;)switch(e[r]){case 0:if(0!==e[r-1]){r+=2;break}if(0!==e[r-2]){r++;break}i!==r-2&&a.push(e.subarray(i,r-2));do r++;while(1!==e[r]&&r<t);r=(i=r+1)+2;break;case 1:if(0!==e[r-1]||0!==e[r-2]){r+=3;break}i!==r-2&&a.push(e.subarray(i,r-2)),r=(i=r+1)+2;break;default:r+=3}return i<t&&a.push(e.subarray(i)),a}static parseAvcC(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(e.length<4)return;let r=e.length,a=[],n=0;for(;n+i<r;){if(t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<24>>>0)+(e[t+1]<<16)+(e[t+2]<<8)+(e[t+3]||0)}(e,n),3===i&&(t>>>=8),n+=i,!!t){if(n+t>r)break;a.push(e.subarray(n,n+t)),n+=t}}return a}static parseSEI(e,t){let i=e.length,r=t?2:1,a=0,n=0,s="";for(;255===e[r];)a+=255,r++;for(a+=e[r++];255===e[r];)n+=255,r++;if(n+=e[r++],5===a&&i>r+16)for(let t=0;t<16;t++)s+=e[r].toString(16),r++;return{payload:e.subarray(r,r+n),type:a,size:n,uuid:s}}static removeEPB(e){let t=e.byteLength,i=[],r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(i.push(r+2),r+=2):r++;if(!i.length)return e;let a=t-i.length,n=new Uint8Array(a),s=0;for(r=0;r<a;s++,r++)s===i[0]&&(s++,i.shift()),n[r]=e[s];return n}}var D=i("794219");class I{addSample(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new Uint8Array(e.units[0].buffer);k.parseAnnexB(i).forEach(i=>{let r=t?i[0]>>>1&63:31&i[0];if(6!==r||t){if(t&&(39===r||40===r)){let r=k.parseSEI(k.removeEPB(i),t);this._seiSet.add({code:r.type,content:r.payload,time:e.pts/1e3,uuid:r.uuid,dts:e.pts})}}else{let r=k.parseSEI(k.removeEPB(i),t);this._seiSet.add({code:r.type,content:r.payload,time:e.pts/1e3,uuid:r.uuid,dts:e.pts})}})}throw(e){if(!e||!this._seiSet.size)return;let t=e-.2,i=e+.2,r=[];this._seiSet.forEach(e=>{e.time>=t&&e.time<=i&&r.push(e)}),r.forEach(e=>{this._seiSet.delete(e),this._core.emit(D.o.SEI,e)}),this._seiSet.forEach(t=>{t.time<e-5&&this._seiSet.delete(t)})}reset(){this._seiSet.clear()}constructor(e){(0,r._)(this,"_core",void 0),(0,r._)(this,"_seiSet",new Set),this._core=e}}class F extends h.Z{get mediaInfo(){var e;return null===(e=this._mediaCodec)||void 0===e?void 0:e.getMediaInfo()}getWritable(){return this._mediaCodec?{videoWritable:this._mediaCodec._videoWritable,audioWritable:this._mediaCodec._audioWritable,audioTrack:this._mediaCodec._audioTrack}:this._writeable}_loadData(e){this._cfg.url=e,!this._mediaLoader&&(this._mediaLoader=new w(this.stateManager)),this._mediaLoader.load({url:e,onVideoChunk:this._onVideoChunk,onAudioChunk:this._onAudioChunk}),this._mediaLoader.on(o.Zo.RTM_STATS,this._handleStats)}async _reset(){var e,t;await super._reset(),null===(e=this._seiService)||void 0===e||e.reset(),clearTimeout(this._metaTimer),this._videoMeta=void 0,this._audioMeta=void 0,null===(t=this._mediaCodec)||void 0===t||t.destroy(),this._mediaCodec=null}_genCodecIns(){!this._mediaCodec&&(this._mediaCodec=new b(this._cfg.instanceId,this._cfg.isVod,this.stateManager,this._writeable,this._cfg.muted),this._mediaCodec.on(o.Zo.MESSAGE_EVENT_TIMEUPDATE,this.onTimeupdate),this._mediaCodec.initSR(this._cfg.sr))}getMediaCodec(){return this._mediaCodec}onPlayerDestroy(e){super.onPlayerDestroy(e),clearTimeout(this._metaTimer)}_checkRtmAvDiff(e){if(e<.01){let e=this._receiveVideoTs-this._receiveAudioTs;Math.abs(e)>.1&&(this._rtmVideoTsOffset+=e>0?-50:50,this.logger.log(`rtm recv av diff ${e}, offset ${this._rtmVideoTsOffset}`))}}_checkRtmStats(e){if(this._preRtmStats.push(e),this._preRtmStats.length>=3){let e=this._preRtmStats[0],t=this._preRtmStats[2],i=e.video_frames[0]===t.video_frames[0],r=e.video_frames[2]===t.video_frames[2],a=e.video_frames[3]===t.video_frames[3];(i||r||a)&&this.emit(y.le.FLVERROR,new A.Z(A.t.DECODE_VIDEO_DODECODE_ERROR,"no video frame during 4s"))}this._preRtmStats=this._preRtmStats.slice(-2)}destroy(){var e;null===(e=this._mediaLoader)||void 0===e||e.destroy(),super.destroy()}constructor(e,t){super(e,t),(0,r._)(this,"_mediaCodec",null),(0,r._)(this,"_videoMeta",void 0),(0,r._)(this,"_audioMeta",void 0),(0,r._)(this,"_metaTimer",void 0),(0,r._)(this,"_seiService",void 0),(0,r._)(this,"_mediaLoader",null),(0,r._)(this,"_receivedFrames",0),(0,r._)(this,"_receiveVideoTs",0),(0,r._)(this,"_receivedSamples",0),(0,r._)(this,"_receiveAudioTs",0),(0,r._)(this,"_checkPlaybackrateTime",0),(0,r._)(this,"_onVideoChunk",e=>{var t,i,r,a;let n=e.meta;this._receivedFrames++,e.pts=Math.round(e.pts+this._rtmVideoTsOffset),this._receiveVideoTs=Math.max(e.pts/1e3,this._receiveVideoTs),!this._videoMeta&&n&&(this._genCodecIns(),this._videoMeta=n,this._audioMeta?(clearTimeout(this._metaTimer),null===(a=this._mediaCodec)||void 0===a||a.addMetaData(n,this._audioMeta)):this._metaTimer=setTimeout(()=>{var e;null===(e=this._mediaCodec)||void 0===e||e.addMetaData(n,null)},this._cfg.analyzeDuration),this.emit(y.le.METADATA,{trackType:"video",codec:n.codec})),null===(i=this._seiService)||void 0===i||i.addSample(e,null==n?void 0:null===(t=n.codec)||void 0===t?void 0:t.includes("hev1")),null===(r=this._mediaCodec)||void 0===r||r.appendBuffer([e],[],!0)}),(0,r._)(this,"_onAudioChunk",e=>{var t,i;let r=e.meta;this._receivedSamples++,this._receiveAudioTs=e.pts/1e3,!this._audioMeta&&r&&(this._genCodecIns(),this._audioMeta=r,this._videoMeta?(clearTimeout(this._metaTimer),null===(i=this._mediaCodec)||void 0===i||i.addMetaData(this._videoMeta,r)):this._metaTimer=setTimeout(()=>{var e;null===(e=this._mediaCodec)||void 0===e||e.addMetaData(null,r)},this._cfg.analyzeDuration),this.emit(y.le.METADATA,{trackType:"audio",codec:r.codec,sampleRate:r.sampleRate,channelCount:r.channelCount,objectType:r.objectType})),null===(t=this._mediaCodec)||void 0===t||t.appendBuffer([],[e],!0)}),(0,r._)(this,"onTimeupdate",()=>{var e,t;null===(t=this._seiService)||void 0===t||t.throw(((null===(e=this.mediaInfo)||void 0===e?void 0:e.VideoFrameTime)||0)/o.Ll);let i=Date.now();!(i-this._checkPlaybackrateTime<1e3)&&(this._checkPlaybackrateTime=i,this._checkPlaybackrate(800,1e3))}),(0,r._)(this,"_handleStats",e=>{var t,i,r;let{video:n,audio:s}=(null==e?void 0:e.stats)||{};this.emit(y.le.PROP_SPEED,{totalByteSize:n.bytesReceived+s.bytesReceived,renderFrames:(null===(t=this._mediaCodec)||void 0===t?void 0:t.renderFrames)||0});let o=(null===(i=this._mediaCodec)||void 0===i?void 0:i.getDecodeInfo())||{},{video_frames:d=[],audio_chunks:u=[],video_timestamp:l=[],audio_timestamp:c=[]}=o,m=(0,p._)(o,["video_frames","audio_chunks","video_timestamp","audio_timestamp"]),h=(0,a._)({rtt:n.rtt||s.rtt,video_frames:[this._receivedFrames,...d],audio_chunks:[this._receivedSamples,...u],video_timestamp:[this._receiveVideoTs,...l],audio_timestamp:[this._receiveAudioTs,...c],av_loss_rate:[s.audioLossRate||0,n.videoLossRate||0],av_kbps:[s.receivedKBitrate||0,n.receivedKBitrate||0],nack_count:n.nackCount||0,video_time_offset:this._rtmVideoTsOffset,playback_rate:(null===(r=this._mediaCodec)||void 0===r?void 0:r._playbackRate)||0},m);this.emit(y.le.RTM_NETWORK,h),this._checkRtmAvDiff(s.audioLossRate+n.videoLossRate),this._checkRtmStats(h)}),(0,r._)(this,"_rtmVideoTsOffset",0),(0,r._)(this,"_preRtmStats",[]),this._seiService=new I(this)}}class x extends d.Z{onSeamlessLoad(e){this.onLoad(e)}onWritable(e){if(e.audioWritable&&this.proInstance){var t;this.proInstance.setWritable({audioWritable:e.audioWritable,videoWritable:(null===(t=this.proInstance.getWritable())||void 0===t?void 0:t.videoWritable)||null})}}onLoad(e){this.proInstance?this.onProtocolConfig(e):(super.onLoad(e),this.initProtocol()),this.proInstance.load(e)}initProtocol(){var e;this.logger.log(`init protocol: ${null===(e=this._cfg)||void 0===e?void 0:e.protocol}`),this._cfg.protocol===m.b.RTM?this.proInstance=new F(this._cfg,this.stateManager):this.proInstance=new u.Z(this._cfg,this.stateManager)}onProtocolConfig(e){var t,i,r;let n=this._cfg.protocol;if(e.firstTimeStemp&&!e.seamless&&(null===(t=this.proInstance)||void 0===t||t.resetWorkerInit(e.firstTimeStemp),this.emit(o.Zo.workerinit,{costtime:Date.now()-e.firstTimeStemp,workerReadyTime:this._workerReadyTime})),e.protocol&&n!==e.protocol&&(this._cfg=(0,l.FW)(e)),e.decryption){if(e.decryption.entry!==(null===(i=this._cfg.decryption)||void 0===i?void 0:i.entry)){let t=(0,c.Q)(e.decryption.entry);e.awManager=new t}else e.awManager=this._cfg.awManager,this._cfg.awManager=void 0;e.decryption.keyStr!==(null===(r=this._cfg.decryption)||void 0===r?void 0:r.keyStr)&&e.awManager.descryptKey(e.decryption.keyStr)}else null===e.decryption&&(e.awManager=void 0);let d=this._cfg=(0,s.R)(this._cfg,e);super.onProtocolConfig(d),this._cfg=(0,l.FW)((0,a._)({},this._cfg,d));let u=!0;if(n&&n!==this._cfg.protocol&&this.proInstance){let t=this.proInstance.getWritable();this.proInstance._reset(),this.proInstance.destroy(),super.onProtocolConfig(d),this.initProtocol(),!e.writeable&&(t.audioWritable||t.videoWritable)&&(this.logger.log("writeable reuse"),this.proInstance.setWritable(t)),u=!1}!this.proInstance&&(this.initProtocol(),u=!1),u&&this.proInstance.updateConfig(this._cfg)}onPlayerDestroy(e){super.onPlayerDestroy(e),e.isDestroy&&(this._cfg=(0,l.FW)())}onReady(){this.emit(o.Zo.MESSAGE_EVENT_ISREADY)}onReset(){delete this._cfg.abr}constructor(...e){super(...e),(0,r._)(this,"isPlayerWorker",!0),(0,r._)(this,"logger",new n.ZP("PlayerWorker")),(0,r._)(this,"proInstance",void 0),(0,r._)(this,"_cfg",(0,l.FW)()),(0,r._)(this,"_workerReadyTime",Date.now())}}new x},156628:function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{push:"msid",reg:/^msid:([\w-]+)(?: ([\w-]+))?/,names:["id","appdata"],format:"msid:%s %s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=(null!=e.raddr?" raddr %s rport %d":"%v%v")+(null!=e.tcptype?" tcptype %s":"%v"),null!=e.generation&&(t+=" generation %d"),t+=(null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=(null!=e.id?"id=%s %s":"%v%s")+(null!=e.mediaClockValue?"=%s":"")+(null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach(function(e){t[e].forEach(function(e){!e.reg&&(e.reg=/(.*)/),!e.format&&(e.format="%s")})})},918755:function(e,t,i){var r,a=i(592293),n=i(467145),s=i(156628);a.parse,a.parseParams,a.parseFmtpConfig,a.parsePayloads,a.parseRemoteCandidates,a.parseImageAttributes,a.parseSimulcastStreamList},592293:function(e,t,i){var r=function(e){return String(Number(e))===e?Number(e):e},a=function(e,t,i,a){if(a&&!i)t[a]=r(e[1]);else for(var n=0;n<i.length;n+=1)null!=e[n+1]&&(t[i[n]]=r(e[n+1]))},n=function(e,t,i){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var n=e.push?{}:r?t[e.name]:t;a(i.match(e.reg),n,e.names,e.name),e.push&&t[e.push].push(n)},s=i(156628),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},i=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach(function(e){var t=e[0],a=e.slice(2);"m"===t&&(i.push({rtp:[],fmtp:[]}),r=i[i.length-1]);for(var o=0;o<(s[t]||[]).length;o+=1){var d=s[t][o];if(d.reg.test(a))return n(d,r,a)}}),t.media=i,t};var d=function(e,t){var i=t.split(/=(.+)/,2);return 2===i.length?e[i[0]]=r(i[1]):1===i.length&&t.length>1&&(e[i[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(d,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],i=e.split(" ").map(r),a=0;a<i.length;a+=3)t.push({component:i[a],ip:i[a+1],port:i[a+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(d,{})})},t.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,i=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),i=!0),{scid:t,paused:i}})})}},467145:function(e,t,i){var r=i(156628),a=/%[sdv%]/g,n=function(e){var t=1,i=arguments,r=i.length;return e.replace(a,function(e){if(t>=r)return e;var a=i[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(a);case"%d":return Number(a);case"%v":return""}})},s=function(e,t,i){var r=[e+"="+(t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format)];if(t.names)for(var a=0;a<t.names.length;a+=1){var s=t.names[a];t.name?r.push(i[t.name][s]):r.push(i[t.names[a]])}else r.push(i[t.name]);return n.apply(null,r)},o=["v","o","s","i","u","e","p","c","b","t","r","z","a"],d=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var i=t.outerOrder||o,a=t.innerOrder||d,n=[];return i.forEach(function(t){r[t].forEach(function(i){i.name in e&&null!=e[i.name]?n.push(s(t,i,e)):i.push in e&&null!=e[i.push]&&e[i.push].forEach(function(e){n.push(s(t,i,e))})})}),e.media.forEach(function(e){n.push(s("m",r.m[0],e)),a.forEach(function(t){r[t].forEach(function(i){i.name in e&&null!=e[i.name]?n.push(s(t,i,e)):i.push in e&&null!=e[i.push]&&e[i.push].forEach(function(e){n.push(s(t,i,e))})})})}),n.join("\r\n")+"\r\n"}}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.m=n,o.x=function(){var e=o.O(void 0,["74792","14962"],function(){return o("570155")});return e=o.O(e)},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce(function(t,i){return o.f[i](e,t),t},[]))},o.u=function(e){return"74792"===e?"polyfill.dd795612.js":"async/"+e+".b01aaf8d.js"},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],o.O=function(t,i,r,a){if(i){a=a||0;for(var n=e.length;n>0&&e[n-1][2]>a;n--)e[n]=e[n-1];e[n]=[i,r,a];return}for(var s=1/0,n=0;n<e.length;n++){for(var i=e[n][0],r=e[n][1],a=e[n][2],d=!0,u=0;u<i.length;u++)(!1&a||s>=a)&&Object.keys(o.O).every(function(e){return o.O[e](i[u])})?i.splice(u--,1):(d=!1,a<s&&(s=a));if(d){e.splice(n--,1);var l=r();void 0!==l&&(t=l)}}return t},!function(){o.p="https://lf-douyin-pc-web.douyinstatic.com/obj/douyin-pc-web/ies/douyin_web/";"use strict";var e={max:3,addQuery:!0},t=e.max||3,i={},r=/[?#].*$/;function a(t,i,a,n){var s,o,d;return(i+("/"===i[i.length-1]?"":"/")+n).replace(r,"")+(o=t,d=(s=a.split("?")[1])?"?".concat(s.split("#")[0]):"",!0===e.addQuery?""!==d?"".concat(d,"&retry=").concat(o):"?retry=".concat(o):"function"==typeof e.addQuery?e.addQuery({times:o,originalQuery:d}):"")}function n(e){return i[e]}var s=o.e,d=o.u,u=o.l;function l(e,t,r,a){var n=i[a];return u(n?n.nextRetryUrl:e,t,r,a)}!function(){"undefined"!=typeof window&&!window.__RB_ASYNC_CHUNKS__&&(window.__RB_ASYNC_CHUNKS__={});try{o.e=function r(n){var u=s(n),l=d(n);return"undefined"!=typeof window&&!window.__RB_ASYNC_CHUNKS__[l]&&(window.__RB_ASYNC_CHUNKS__[l]=!0),u.catch(function(s){var u=function(t){var r,n,s,u,l,c,m=i[t];if(m){var p,h,f,_,g,v=m.originalScriptFilename,S=m.originalSrcUrl,y=m.existRetryTimes+1;var T=(p=m.nextDomain,f=null!==(h=e.domain)&&void 0!==h?h:[],_=function(t){for(var i,r=null!==(i=e.domain)&&void 0!==i?i:[],a="",n=0;n<r.length;n++)if(-1!==t.indexOf(r[n])){a=r[n];break}return a||t}(p),g=f.indexOf(_),f[(g+1)%f.length]||p);c={existRetryTimes:y,nextDomain:T,nextRetryUrl:a(y,T,S,v),originalScriptFilename:v,originalSrcUrl:S}}else{;s=d(t),u=o.p+s,c={existRetryTimes:1,nextDomain:l=null!==(r=null===(n=e.domain)||void 0===n?void 0:n[0])&&void 0!==r?r:o.p,nextRetryUrl:a(1,l,u,s),originalScriptFilename:s,originalSrcUrl:u}}return i[t]=c,c}(n),l=u.existRetryTimes,c=u.originalSrcUrl,m=u.nextRetryUrl,p=u.nextDomain,h=function(e){return{times:e,domain:p,url:m,tagName:"script"}},f=h(l-1);if(l>t)throw s.message="Loading chunk ".concat(n," from ").concat(c," failed after ").concat(t,' retries: "').concat(s.message,'"'),"function"==typeof e.onFail&&e.onFail(f),s;var _=e.test;if(_){if("string"==typeof _){var g=new RegExp(_);_=function(e){return g.test(e)}}if("function"!=typeof _||!_(m))throw s}if(e.domain&&e.domain.length>0&&-1===e.domain.indexOf(p))throw s;return"function"==typeof e.onRetry&&e.onRetry(f),r(n).then(function(t){if("function"==typeof e.onSuccess){var r,a=h(l);(null!==(r=i[n])&&void 0!==r?r:{}).existRetryTimes===l&&e.onSuccess(a)}return t})})},o.l=l}catch(e){}}()}(),o.rv=function(){return"1.0.0-canary-8758c59-20240816041638"},t=o.x,o.x=function(){return Promise.all([o.e("74792"),o.e("14962")]).then(t)},o.b=self.location+"/../../",i={90144:1},o.f.i=function(e,t){!i[e]&&importScripts(o.p+o.u(e))},a=(r=self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push.bind(r),r.push=function(e){var t=e[0],r=e[1],n=e[2];for(var s in r)o.o(r,s)&&(o.m[s]=r[s]);for(n&&n(o);t.length;)i[t.pop()]=1;a(e)},o.ruid="bundler=rspack@1.0.0-canary-8758c59-20240816041638",o.x()}();