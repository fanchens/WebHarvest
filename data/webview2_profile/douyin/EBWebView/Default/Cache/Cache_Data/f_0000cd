/*! For license information please see editor-kit~2.f80eb23f.js.LICENSE.txt */
(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["11073"],{431468:function(t,e,n){"use strict";n.d(e,{HY:function(){return s},K6:function(){return i},Z6:function(){return a},c5:function(){return o},fF:function(){return l},iC:function(){return r},mX:function(){return u}});var r="application/x-editor-kit-fragment",i="application/x-editor-kit-business-key",o={underline:"u",bold:"b",blockquote:"blockquote",italic:"i",strikethrough:"s"},a="ignore-collect",s="COPY_WITHOUT_PERMISSION",l="data-multiple-line-wrap",u="data-line"},55582:function(t,e,n){"use strict";n.d(e,{Ed:function(){return m},Ks:function(){return y},MB:function(){return l},P9:function(){return g},PI:function(){return u},Pk:function(){return S},Q0:function(){return E},SX:function(){return k},T6:function(){return a},VD:function(){return i},VI:function(){return o},WV:function(){return C},Wr:function(){return f},Z6:function(){return w},Zd:function(){return M},cH:function(){return h},e0:function(){return p},eu:function(){return v},ip:function(){return x},j4:function(){return _},lE:function(){return s},nV:function(){return c},q7:function(){return d},qT:function(){return A},r0:function(){return L},rG:function(){return T},sq:function(){return b}});var r,i,o="data-zero-space",a="â€‹",s="data-inline-wrapper",l="data-leaf",u="data-node",c="data-string",d="data-enter",f="data-faketext",h="editor-kit",p="data-ssr",v="data-fake-text",g="data-zone-id",y="data-zone-container",m=a,b="data-void",S="data-rect-container",E="data-virtual-list-placeholder";(I=i=i||{})[I.BackSpace=8]="BackSpace",I[I.Tab=9]="Tab",I[I.Clear=12]="Clear",I[I.Enter=13]="Enter",I[I.Shift=16]="Shift",I[I.Ctrl=17]="Ctrl",I[I.Alt=18]="Alt",I[I.CapsLock=20]="CapsLock",I[I.Esc=27]="Esc",I[I.Space=32]="Space",I[I.PageUp=33]="PageUp",I[I.PageDown=34]="PageDown",I[I.End=35]="End",I[I.Home=36]="Home",I[I.Left=37]="Left",I[I.Up=38]="Up",I[I.Right=39]="Right",I[I.Down=40]="Down",I[I.Insert=45]="Insert",I[I.Delete=46]="Delete",I[I.Digit0=48]="Digit0",I[I.Digit9=57]="Digit9",I[I.A=65]="A",I[I.B=66]="B",I[I.C=67]="C",I[I.D=68]="D",I[I.E=69]="E",I[I.F=70]="F",I[I.G=71]="G",I[I.H=72]="H",I[I.I=73]="I",I[I.J=74]="J",I[I.K=75]="K",I[I.L=76]="L",I[I.M=77]="M",I[I.N=78]="N",I[I.O=79]="O",I[I.P=80]="P",I[I.Q=81]="Q",I[I.R=82]="R",I[I.S=83]="S",I[I.T=84]="T",I[I.U=85]="U",I[I.V=86]="V",I[I.W=87]="W",I[I.X=88]="X",I[I.Y=89]="Y",I[I.Z=90]="Z",I[I.Meta=91]="Meta",I[I.RightMeta=92]="RightMeta",I[I.BracketRightKeyDown=93]="BracketRightKeyDown",I[I.Caret=94]="Caret",I[I.Numpad0=96]="Numpad0",I[I.Numpad9=105]="Numpad9",I[I.NumpadDot=110]="NumpadDot",I[I.F11=122]="F11",I[I.Semicolon=186]="Semicolon",I[I.Plus=187]="Plus",I[I.Minus=189]="Minus",I[I.Dot=190]="Dot",I[I.Grave=192]="Grave",I[I.Bracket=219]="Bracket",I[I.Quot=222]="Quot",I[I.Asterisk=106]="Asterisk",I[I.Slash=111]="Slash",I[I["/"]=191]="/",I[I["\\"]=220]="\\",I[I.Ime=229]="Ime";var I,C,L="ace-line",x="dirtyDomWithoutChangeset",w="ignore-collect",T="ignore-dom",_="adit-container",A="editor-kit-container",k="zone-container",M="outer-controlled-zone";(r=C=C||{})[r.FATAL=0]="FATAL",r[r.ERROR=1]="ERROR"},601325:function(){var t=Element.prototype.removeChild,e=Node.prototype.removeChild;Element.prototype.removeChild=function(e){return e.parentNode!==this&&this instanceof HTMLElement&&this.closest(".editor-kit-container")?e:t.call(this,e)},Node.prototype.removeChild=function(t){return t.parentNode!==this&&this instanceof HTMLElement&&this.closest(".editor-kit-container")?t:e.call(this,t)}},150505:function(t,e,n){"use strict";n.d(e,{X:function(){return i},j:function(){return o}});var r=n(76108);function i(t){return(t.length<2?t:(0,r.W)(t)[0]).length}function o(t){return t.length<2?t.length:(t=(0,r.W)(t))[t.length-1].length}},539022:function(t,e,n){"use strict";n.d(e,{Z:function(){return o},t:function(){return i}});var r=n(862928);function i(t,e){var n,i,o;void 0===t&&(t={});try{for(var a=(0,r.c)(Object.keys(t)),s=a.next();!s.done;s=a.next()){var l=s.value,u=null===(o=e.get(l))||void 0===o?void 0:o.displayEnter;if("boolean"==typeof u)return u;if("function"==typeof u)return u(t[l])}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!0}function o(t){return!!Object.entries(t.schemas).find(function(t){var e=(0,r._)(t,2),t=e[0],e=e[1];return"displayEnter"===t&&(!1===e||"function"==typeof e)})}},757974:function(t,e,n){"use strict";n.d(e,{Br:function(){return l},Dg:function(){return d},J$:function(){return a},Le:function(){return o},Ve:function(){return s},ZG:function(){return u},eb:function(){return c}});var r=n(862928),i=n(268102);function o(t){return t.slice(2).toLowerCase()}function a(t){var e=/^\[object (\S+)\]/i,t=t.toString().toLocaleLowerCase();return e.test(t)?e.exec(t)[1]:""}function s(t,e){return t?e.selection._toModelRange({startContainer:t,startOffset:0,endContainer:t,endOffset:t.childNodes.length}):null}function l(t){var e=(0,i.g)(t.nativeEvent),n=e.preventDefault,r=e.stopPropagation;return e.preventDefault=function(){n.call(e),t.preventDefault()},e.stopPropagation=function(){r.call(e),t.stopPropagation()},e.currentTarget=t.currentTarget,e.target=t.target,e}var u=["select","deselect"],c=[].concat((0,r.e)(u,["enterviewport","leaveviewport"])),d=["focusevent","mouseevent","touchevent","pointerevent"]},356205:function(t,e,n){"use strict";function r(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}n.d(e,{z:function(){return r}})},916870:function(t,e,n){"use strict";function r(t,e,n){var r=t.parentElement;if(!e)return r;for(;r&&!(n&&r.matches(n));){;if(r.matches(e))return r;r=r.parentElement}return null}n.d(e,{q:function(){return r}})},577573:function(t,e,n){"use strict";n.d(e,{w:function(){return r}});var r=function(){function t(){this.i=[],this.n=!1}var e=t.prototype;return e.add=function(t){this.n&&this.i.push(t)},e.start=function(){this.reset(),this.n=!0},e.reset=function(){this.n=!1,this.i=[]},e.export=function(){try{return JSON.stringify(this.i)}catch(t){return""}},t}()},442620:function(t,e,n){"use strict";n.d(e,{i:function(){return a}});var r=n(524007),i=n(55582);n(601325);var o=n(916870),a=function(){function t(t){this.e=100,this.s=t}var e=t.prototype;return e.isZoneContainer=function(t){var e=!1;return this.s.getContentState().getContent().forEach(function(n){n._node===t&&(e=!0)}),e},e.getZoneFromNode=function(t){var e=null;return this.s.getContentState().getContent().forEach(function(n){var r;null!==(r=n._node)&&void 0!==r&&r.contains(t)&&(e=n.getZoneId())}),e},e.getLineStateFromNode=function(t){return null!=(t=(0,o.q)(t,".ace-line",".editor-kit-container"))&&t.classList.contains(".ace-line")&&(t=this.s._getViewModel().getModel(t))||null},e.getLineStateInParentZone=function(t){var e=this.getLineStateFromNode(t);return null!==(t=null==e?void 0:e.parent)&&void 0!==t&&t.parent?e.parent.parent:null},e.getLineStateInRootZone=function(t){for(var e=0,n=this.getLineStateInParentZone(t);e<this.e&&n&&n.getZoneId()!==r.S;)e++,n=this.getLineStateInParentZone(t);return n},e.isNodeInEditor=function(t,e){return t===e||(null===(t=null==t?void 0:t.parentElement)||void 0===t?void 0:t.closest("."+i.qT))===e},e.isNodeInOuterControlledZone=function(t){return!(null===(t=null==t?void 0:t.closest("."+i.qT))||void 0===t||!t.classList.contains(""+i.Zd))},e.isNodeInInnerZone=function(t){var e="."+i.SX+":not(."+i.qT+")";return!(null==t||!t.closest(e))},t}()},395804:function(t,e,n){"use strict";n.d(e,{Cn:function(){return a},PF:function(){return o},Rg:function(){return r},U_:function(){return i}});var r=2,i=1,o={click:"_handleClickEvent",keydown:"_handleKeyEvent",keypress:"_handleKeyEvent",keyup:"_handleKeyEvent",input:"_handleInputEvent",beforeinput:"_handleBeforeInput",compositionstart:"_handleCompositionEvent",compositionupdate:"_handleCompositionEvent",compositionend:"_handleCompositionEvent",copy:"_handleCopy",cut:"_handleCut",paste:"_handlePaste",drop:"_handleDrag",dragenter:"_handleDrag",dragover:"_handleDrag",dragleave:"_handleDrag",focus:"_handleFocusEvent",blur:"_handleFocusEvent"},a=["copy","cut","paste","keydown","keypress","keyup","beforeinput","input","drop","dragenter","dragover","dragleave","resize","compositionstart","compositionupdate","compositionend","focus","blur"]},887226:function(t,e,n){"use strict";n.d(e,{AO:function(){return a},Yo:function(){return i},qK:function(){return o}});var r=n(414818);function i(t){if(!(t instanceof Element))return{width:0,height:0,left:0,right:0,top:0,bottom:0};var e=window.getComputedStyle(t),n=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0),r=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0),e=t.getBoundingClientRect();return{width:t.clientWidth-n,height:t.clientHeight-r,left:e.left,right:e.right,top:e.top,bottom:e.bottom}}function o(t,e){var n,r,i=null;return document.caretPositionFromPoint?(i=document.caretPositionFromPoint(t,e))&&(n=i.offsetNode,r=i.offset):document.caretRangeFromPoint&&(i=document.caretRangeFromPoint(t,e))&&(n=i.startContainer,r=i.startOffset),{range:i,textNode:n,offset:r}}function a(){var t="";return!r.Xh.mobile||r.Xh.isIPad&&!r.Xh.isBytedanceApp||(t+=" editor-kit-mobile ",r.Xh.isAndroid?t+=" android ":r.Xh.isIOS&&(t+=" ios ")),r.Xh.isIPad&&(t+=" ipad "),t}},918822:function(t,e,n){"use strict";function r(t,e){if(!t)return function(){};if(window.ResizeObserver){var n=new window.ResizeObserver(e);return n.observe(t),function(){n.disconnect()}}var r=document.createElement("iframe");r.setAttribute("style","\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: -1000%;\n      left: -1000%;\n      user-select: none;\n      visibility: hidden;\n    "),r.addEventListener("resize",e);var i=t.parentElement;return i.appendChild(r),function(){i.removeChild(r),r.removeEventListener("resize",e)}}n.d(e,{W:function(){return r}})},884278:function(t,e,n){"use strict";function r(){return!0}function i(){return!1}function o(t){return"function"==typeof t&&"number"!==t.nodeType}n.d(e,{ar:function(){return i},cI:function(){return r},mf:function(){return o}})},824200:function(t,e,n){"use strict";n.d(e,{r:function(){return a}});var r=n(884278),i=n(472892),o=n(878271),a=function(){function t(t,e){this.nativeEvent=t,this.type="",(0,i.uc)(this,o.TS,t,e),t=null!==t.defaultPrevented&&void 0!==t.defaultPrevented?t.defaultPrevented:!1===t.returnValue,this.isDefaultPrevented=t?r.cI:r.ar,this.isPropagationStopped=r.ar}var e=t.prototype;return e.preventDefault=function(){this.defaultPrevented=!0,this.nativeEvent.preventDefault(),this.isDefaultPrevented=r.cI},e.stopPropagation=function(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=r.cI},t}()},881132:function(t,e,n){"use strict";n.d(e,{$:function(){return o}});var r=n("862928"),i=n("726062"),o=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventTypes=new Map,e.extractEvents=function(t){return"change"===t.type?new i.O(t,t.target):null},e}return(0,r.d)(e,t),e}(function(){}))},185629:function(t,e,n){"use strict";n.d(e,{P:function(){return o}});var r=n(452816),i=n(923387),o=new function(){var t=this;this.eventTypes=new Map,this.extractEvents=function(e){return t.eventTypes.get(e.type)?new r.U(e,e.target):null},[i._B,i.X_].forEach(function(e){return t.eventTypes.set(e,!0)})}},530672:function(t,e,n){"use strict";n.d(e,{M:function(){return S}});var r=n("726062"),i=n("678130"),o=n("96773"),a=n("34296"),s=n("981048"),l=n("899778"),u=n("452816"),c=n("862928"),d=n("472892"),f=n("878271"),h=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.deltaX=0,r.deltaY=0,r.deltaZ=0,r.deltaMode=0,(0,d.uc)(r,f.TT,e,n),r}return(0,c.d)(e,t),e}(u.U),p=function(t){function e(e,n){var r=t.call(this,e,n)||this;return(0,d.uc)(r,f.a6,e,n),r}return(0,c.d)(e,t),e}(r.O),v=n("309939"),g=n("923387"),y=[g.H0,g.Su,g.SI,g.fH,g.rl,g.li,g.Vp,g.j4,g._E,g.mo,g.Dq,g.kA,g.H6,g.fU,g.fk,g.M9,g.OX,g.V9,g.eb,g.B3,g.a5,g.f3,g.$z,g.$h,g.ul,g.yP,g.UL,g.tA,g.lp,g.yU,g.pK,g.l$,g.hC,g.nn,g.dE,g.Ks,g.Ue],m=[g.GP,g.$u,g.rg,g.Xc,g.h1,g.m2,g._B,g.X_,g.Ro,g.PG,g.py,g.At,g.m1,g.$e,g.Pm],b=[g.uv,g.e0,g.UD,g.Mn,g.Bx,g.F6,g.Kz,g.WN,g.Aq,g.g3,g.LU,g.UG,g.sP,g.bx,g.dP,g.G3,g.TW,g.p4,g.MY,g.Jc,g.h5,g.Hg,g.$v,g.gQ,g.ZA],S=new function(){var t=this;this.eventTypes=new Map,this.extractEvents=function(e){var n;if(!t.eventTypes.get(e.type))return null;switch(e.type){case g.OX:case g.M9:case g.V9:n=s.$;break;case g.H0:case g.H6:n=l.Y;break;case g.SI:case g.j4:case g._E:case g.eb:case g.m2:case g.B3:case g._B:case g.X_:case g.rl:n=u.U;break;case g.GP:case g.mo:case g.$u:case g.rg:case g.Xc:case g.h1:case g.Dq:case g.kA:case g.pK:case g.l$:case g.$e:case g.hC:n=r.O;break;case g.e0:case g.UD:case g.Mn:n=p;break;case g.gQ:n=v.J;break;case g.At:n=i.R;break;case g.Pm:n=h;break;case g.li:case g.Vp:case g.a5:n=o.y;break;case g.UG:case g.TW:case g.$h:case g.ul:case g.Ro:case g.PG:case g.py:case g.yP:n=r.O;break;case g.dE:case g.Ue:case g.Ks:n=a.h;break;default:n=r.O}return new n(e,e.target)},y.concat(m).concat(b).forEach(function(e){return t.eventTypes.set(e,!0)})}},34296:function(t,e,n){"use strict";n.d(e,{h:function(){return a}});var r=n(862928),i=n(472892),o=n(878271),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return(0,i.uc)(r,o.g8,e,n),r}return(0,r.d)(e,t),e}(n(726062).O)},899778:function(t,e,n){"use strict";n.d(e,{Y:function(){return a}});var r=n(862928),i=n(472892),o=n(878271),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return(0,i.uc)(r,o.Is,e,n),r}return(0,r.d)(e,t),e}(n(678130).R)},259316:function(t,e,n){"use strict";n.d(e,{n:function(){return a}});var r=n(862928),i=n(472892),o=n(878271),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.inputType="",(0,i.uc)(r,o.cd,e,n),r}return(0,r.d)(e,t),e}(n(43341).D)},981048:function(t,e,n){"use strict";n.d(e,{$:function(){return a}});var r=n(862928),i=n(472892),o=n(878271),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.key="",r.location=0,r.ctrlKey=!1,r.shiftKey=!1,r.altKey=!1,r.metaKey=!1,r.repeat=!1,r.locale="",r.charCode=0,r.keyCode=0,r.which=function(){return 0},(0,i.uc)(r,o.Nf,e,n),r}return(0,r.d)(e,t),e}(n(43341).D)},972941:function(t,e,n){"use strict";var r=n(862928),i=function(){function t(){this.y={},this.A={}}var e=t.prototype;return e.on=function(t,e,n){this.x(t,e,!1,n)},e.once=function(t,e,n){this.x(t,e,!0,n)},e.off=function(t,e){this.Y(t,e)},e.removeEventListener=function(t,e){this.Y(t,e)},e.trigger=function(t,e){this.J(t,e)},e.reset=function(){this.y={},this.A={}},e.removeListener=function(t,e){this.Y(t,e)},e.getListeners=function(t){var e=this.y[t];if(!e)return[];var n=[];return Object.keys(e).sort(function(t,e){return+t-+e}).forEach(function(t){n=n.concat(e[t])}),n},e.x=function(t,e,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=1e3),this.y[t]||(this.y[t]={},this.A[t]=new Set),this.A[t].has(e)||(i={listener:e,isOnce:n,priority:r},(n=this.y[t])[r]?n[r].push(i):n[r]=[i],this.A[t].add(e))},e.Y=function(t,e){var n,i;if(this.y[t])try{for(var o=(0,r.c)(Object.keys(this.y[t])),a=o.next();!a.done;a=o.next()){var s=a.value,l=this.y[t][s],u=l.findIndex(function(t){return t.listener===e});if(-1!==u){l.splice(u,1),l.length||delete this.y[t][s],this.A[t].delete(e);break}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.J=function(t,e){var n=this;void 0===e&&(e=[]),this.getListeners(t).forEach(function(r){var i=r.listener;r.isOnce&&n.Y(t,i),i.apply(i,e)})},t}();e.Z=i},175353:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r=n(862928),i="selectionchange",o=new(function(){function t(){var t=this;this.Q=new Map,this.X=new Map,this.dispatchNativeEvent=function(e){var n=e.type,r=null;if(e.type===i){var o=window.getSelection();if(!o||!o.rangeCount)return;r=(null===(o=o.getRangeAt(0).startContainer.parentElement)||void 0===o?void 0:o.closest("[contenteditable]"))||null}for(var a=t.Z(n,r||e.target),s=0,l=a.length;s<l;s++){var u=a[s],c=u.dom,u=u.handle;t.$(e,c,r)&&u(e)}},this.on=function(e,n,r,i){var o=void 0===i?{}:i,i=o.priority,a=void 0===i?0:i,o=o.customizedDelegateDom;t.tt(e,n,o||null);var s={dom:n,handle:r,priority:a},l=t.Q.get(n);l||t.Q.set(n,l={}),l[e]||(l[e]=[]);for(var u=0;u<l[e].length;u++)if(l[e][u].priority>a)return void l[e].splice(u,0,s);l[e].push(s)},this.off=function(e,n,r){var i=t.Q.get(n);if(i&&i[e]){for(var o=i[e].length-1;0<=o;o--)i[e][o].handle===r&&i[e].splice(o,1);i[e].length||delete i[e],Object.keys(i).length||(t.Q.delete(n),t.et(n)),t.Q.size||t.rt()}}}var e=t.prototype;return e.tt=function(t,e,n){switch(t){case"resize":r=n||window;break;case"focus":case"blur":r=n||e instanceof HTMLElement&&e.closest("[contenteditable]")||document;break;default:r=n||document}var r,i=this.X.get(r);i||(i=new Map,this.X.set(r,i)),i.has(t)||(r.addEventListener(t,this.dispatchNativeEvent),i.set(t,!0))},e.Z=function(t,e){for(var n=[];e;){var i=this.Q.get(e);i&&i[t]&&n.push.apply(n,(0,r.e)(i[t])),e=e.parentNode}return n.sort(function(t,e){return t.priority-e.priority})},e.$=function(t,e,n){if(t.defaultPrevented)return!1;if(t.type===i){if(e instanceof HTMLElement)return e.hasAttribute("contenteditable")?e.contains(n):!(!(n=window.getSelection())||!n.rangeCount)&&e.contains(n.getRangeAt(0).startContainer);if(e instanceof Document)return e===t.target}return!(!t.target||!t.target.contains)&&(e===t.target||e.contains(t.target))},e.rt=function(){var t,e;try{for(var n=(0,r.c)(this.X.keys()),i=n.next();!i.done;i=n.next()){var o=i.value;this.et(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.et=function(t){var e,n,i=this.X.get(t);if(i){this.X.delete(t),i=(0,r.e)(i.keys());try{for(var o=(0,r.c)(i),a=o.next();!a.done;a=o.next()){var s=a.value;t.removeEventListener(s,this.dispatchNativeEvent)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}},t}())},874969:function(t,e,n){"use strict";n.d(e,{h:function(){return L}});var r=n("862928"),i=n("944288"),o=n("524007"),a=n("55582"),s=n("433500");n("601325");var l=n("739375"),u=n("233230"),c=n("752440"),d=n("201264"),f=n("278093"),h=n("484060"),p=n("88648");n("309931");var v=n("526969"),g=n("501491"),y=n("457758"),m=n("290975"),b=n("153938");function S(t){var e=t.editor,n=t.zoneId,i=t.Context,o=t.contextValue,a=t.children,t=(0,r._)((0,p.useState)(o),2),o=t[0],l=t[1];return(0,p.useEffect)(function(){function t(t){t.zoneId===n&&t.Context===i&&l(t.contextValue)}return e.on(s.r.REACT_CONTEXT_UPDATE,t),function(){e.off(s.r.REACT_CONTEXT_UPDATE,t)}},[e,n,i]),p.createElement(i.Provider,{value:o},a)}var E=n("887226"),I=n("183670"),C=function(t){var e,n,E,I,C,L,x,w,T,_,A,k,M=t.zoneId,z=t.editor,R=t.style,D=t.className,N=t.editable,O=t.placeholder,P=void 0===O?"":O,Z=t.root,W=void 0!==Z&&Z,K=t.ignoreContainerEditable,F=void 0!==K&&K,U=t.register,B=t.plugins,V=t.scroller,j=t.scrollerOptions,O=t.contextList,Z=void 0===O?[]:O,K=t.customizedProviderConstructorList,O=void 0===K?[]:K,H=t.children,X=t.onMount,q=t.onDidPaint,K=t.isSSR,Y=(0,r.f)(t,["zoneId","editor","style","className","editable","placeholder","root","ignoreContainerEditable","register","plugins","scroller","scrollerOptions","contextList","customizedProviderConstructorList","children","onMount","onDidPaint","isSSR"]);function Q(){var t,e;if(Y.modules)try{for(var n=(0,r.c)(Object.keys(Y.modules)),i=n.next();!i.done;i=n.next()){var o,a,s,l=i.value,u=Y.modules[l];u&&(a=(o=(0,r._)(u,2))[0],s=o[1],z.modulesContainer.setZoneModule(M,l,a,s))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}Q();var G=(n=(e={editor:z,zoneId:M,contextList:(0,r.e)([{Context:m.rU,contextValue:z}],Z),customizedProviderConstructorList:O}).editor,E=e.zoneId,I=e.contextList,C=e.customizedProviderConstructorList,L=(0,p.useRef)(null),(0,p.useEffect)(function(){var t,e,i,o;if(L.current)try{for(var a=(0,r.c)(I),l=a.next();!l.done;l=a.next()){var u,c=l.value,d=c.Context,f=c.contextValue;L.current.has(d)&&L.current.get(d)!==f&&(u={zoneId:E,Context:d,contextValue:f},n.call(s.r.REACT_CONTEXT_UPDATE,u))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}else{L.current=new WeakMap;try{for(var h=(0,r.c)(I),p=h.next();!p.done;p=h.next()){var v=p.value,d=v.Context,f=v.contextValue;L.current.set(d,f)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(e=h.return)&&e.call(h)}finally{if(t)throw t.error}}}},[n,E,I]),{Provider:function(t){var e;return t=t.children,p.createElement(p.Fragment,null,I.reduce(function(t,e){var r=e.Context,e=e.contextValue;return p.createElement(S,{editor:n,zoneId:E,Context:r,contextValue:e},t)},(e=t,(0,r.e)(C).reduce(function(t,e){return e(t)},e))))}}).Provider,J=(0,p.useRef)(null),tt=(0,p.useRef)(null),te=(0,p.useRef)(null),tn=(0,p.useCallback)(function(t){var e;!(J.current=t)||(e=z.getContentState().getZoneState(M))&&z._getViewModel()._setNode(e,t)},[z,M]);if(!W){if(B&&U&&z.error({message:"Simultaneous usage of both plugins and register is not permissible.",level:i.W.ERROR}),B)z.pluginManager._registerV2(B,M);else if(U){z.pluginManager._resetPluginConstructorToZoneMap(M);try{for(var tr=(0,r.c)(U(z)),ti=tr.next();!ti.done;ti=tr.next()){var to=ti.value;z.pluginManager.register(to,M)}}catch(t){tc={error:t}}finally{try{ti&&!ti.done&&(k=tr.return)&&k.call(tr)}finally{if(tc)throw tc.error}}}}function ta(){var t;J.current&&(W||z.pluginManager.call("zoneDidMount",{zoneId:M},{zoneId:M}),null!=X&&X(J.current),null!==(t=z.getContentState().getZoneState(M))&&void 0!==t&&t.setPlaceholder(P),z._toggleZonePlaceHolder(M))}function ts(t,e){void 0===e&&(e={}),!1!==z.mounted&&(q&&q(t,e),z.call(s.r.PAINT,{data:t,zoneId:M}),z.selection.getSelection().start.zoneId!==M||z.getStatus("isPerforming")||z.getStatus("preventUpdateDomSelection")||z.getStatus("isComposing")||!z.isFocus()||z.selection.updateBrowserSelection(),z.setStatus("contentChanged",!1),z.call(a.ip))}var tl=function(t,e){void 0===e&&(e=!0);var n=z.getContentState().getZoneState(M);if(n)try{z.trace.start(),z.trace.add({extra:{isInitialRender:e}});var r=(0,c.Z)(b.j,{editor:z,zoneId:M,state:n,onMount:ta,onDidPaint:ts},t,{PluginContextProvider:G});return z.trace.reset(),r}catch(r){if(!e||null!==(e=te.current)&&void 0!==e&&e.isEnabled){if(!z.mounted)throw r;return z.error({message:"[render error] "+r.message,level:i.W.FATAL,e:r,extra:z.trace.export()}),null}return M===o.S?void 0:((0,c.a)(n),t.innerHTML="",tl(t,!1))}};(0,p.useLayoutEffect)(function(){function t(t){var e,n=t.changes,r=t.diffResult,a=t.previous,l=t.current,u=t.options;if(M in n&&M in r){z.setStatus("isPainting",!0);var f=a.getContent().get(M);if(f)try{function h(){z.call(s.r.BEFORE_DOM_RENDERER_RECONCILE,{applyType:u.type,zoneId:M})}function p(t){(0,d.r)({diffResult:t,previousState:f,ReactContextProvider:G})}var v=function(){z.call(s.r.AFTER_DOM_RENDERER_RECONCILE,{applyType:u.type,zoneId:M})};null!==(e=te.current)&&void 0!==e&&e.isEnabled?te.current.handleContentChange({changes:n[M],previousZoneState:f,zoneDiff:r[M],applyOptions:u,contentChangeRender:p,beforeRender:h,afterRender:v}):(h(),p(r[M]),v())}catch(t){if(v={message:"[content change reconcile error]: "+(null==t?void 0:t.message),level:i.W.ERROR,e:null!==(v=null==t?void 0:t.originalError)&&void 0!==v?v:t,extra:null!=t&&t.extraInfo?JSON.stringify(t.extraInfo):""},!J.current||M===o.S)return v.level=null!=t&&t.isFatal?i.W.FATAL:i.W.ERROR,void z.error(v);if(z.error(v),(0,c.a)(r[M].state),J.current.innerHTML="",!(v=z.getContentState().getZoneState(M)))return;var g=J.current;null!==(r=te.current)&&void 0!==r&&r.isEnabled?(z._getViewModel()._setNode(v,J.current),te.current.initializeZoneRender(function(){tl(g,!1)})):(tl(g,!1),z._getViewModel()._setNode(v,J.current))}z.getStatus("isPainting")&&z.setStatus("isPainting",!1),(l=l.getContent().get(M))&&(tt.current=l),z._toggleZonePlaceHolder(M)}}return z.on(s.r.CONTENT_CHANGE,t,{zoneId:M,priority:100}),function(){z.off(s.r.CONTENT_CHANGE,t)}},[z,M,G,ta,ts]),(0,p.useLayoutEffect)(function(){var t,e,n,o;return W&&H?ta():J.current&&(t=J.current,(e=z.getContentState().getZoneState(M))?(Q(),(n=z.modulesContainer.getZoneModule(M,l.C.VirtualListModule))&&(n=(o=(0,r._)(n,2))[0],o=o[1],te.current=n.create((0,r.b)((0,r.b)({},o),{editor:z,zoneId:M})),te.current.setRenderInformation({ReactContextProvider:G})),null!==(o=te.current)&&void 0!==o&&o.isEnabled?te.current.initializeZoneRender(function(){tl(t)}):tl(t),tt.current=e):z.error({message:"[render zone content failed]: ZoneState is not exist. zoneId: "+M,level:i.W.ERROR})),function(){(function(){W||z.pluginManager.call("zoneWillUnmount",{zoneId:M},{zoneId:M});var t,e,n=z.getContentState().getZoneState(M);if(null!=n&&n.instance?(0,c.a)(n):tt.current&&(0,c.a)(tt.current),J.current&&z._getViewModel()._deleteNode(J.current),null!==(n=te.current)&&void 0!==n&&n.destroy(),te.current=null,Y.modules)try{for(var i=(0,r.c)(Object.keys(Y.modules)),o=i.next();!o.done;o=i.next()){var a=o.value;z.modulesContainer.unSubscribingZone(M,a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}})()}},[]);var tu=(0,p.useRef)(!!H);(0,p.useLayoutEffect)(function(){var t;W&&H&&!tu.current&&(t=z.getContentState().getZoneState(o.S))&&t.lines.forEach(function(t){var e=t.getNode();(0,c.a)(t),null!=e&&e.remove()}),tu.current=!!H},[W,H,z]);var tc=(0,p.useMemo)(function(){if(!W||!F)return N&&!z.inputModel&&z.error({message:"InputModel is required when editable is set to true",level:i.W.FATAL}),N},[N,W,F]);if((0,p.useLayoutEffect)(function(){var t=W&&F;return t&&z.setContainerContentEditableLock(!0),function(){t&&z.setContainerContentEditableLock(!1)}},[z,W,F]),(0,p.useEffect)(function(){function t(t){var e,n,o=t.zoneId,a=t.lineArr,c=t.from,f=function(t,e,n){var r,e=t.getContentState().getZoneState(e);if(!e)return null;for(var i=e.parent;i;){if(i instanceof u.V&&(null===(r=i.parent)||void 0===r?void 0:r.getZoneId())===n)return i;i=i.parent}return null}(z,M,o);null!==(t=te.current)&&void 0!==t&&t.isEnabled&&f&&null!=a&&a.includes(f.index)?(e=z.modulesContainer.getZoneModule(M,l.C.VirtualListModule))&&(n=(0,r._)(e,2)[1],te.current.handleAncestorForceRefresh((0,r.b)((0,r.b)({},n),{zoneId:M,editor:z}))):M===o&&("input"===c&&z.error({message:"warning: force refresh view by input model",level:i.W.ERROR}),e=z.getContentState().getZoneState(M),n=tt.current,e&&n&&(tn(c=n.getContainer()),null!==(c=te.current)&&void 0!==c&&c.isEnabled&&te.current.handleForceRefresh(n,a),z.setStatus("isPainting",!0),z.call(s.r.BEFORE_DOM_RENDERER_RECONCILE,{applyType:"forceRefresh",zoneId:o}),(0,d.r)({diffResult:{state:e,changes:null},previousState:n,ReactContextProvider:G}),z.call(s.r.AFTER_DOM_RENDERER_RECONCILE,{applyType:"forceRefresh",zoneId:o}),z.getStatus("isPainting")&&z.setStatus("isPainting",!1),tt.current=e))}return z.on("_forceRefresh",t),function(){z.off("_forceRefresh",t)}},[z,M,tn,G]),(0,g.S)(z,M),(0,y.W)(z,null!==(V=null!=V?V:J.current)&&void 0!==V&&V,M,j),!z.isSSR&&!K||W&&H)return p.createElement("div",{key:M,ref:tn,style:R||{outline:"none"},className:a.SX+" "+(D||"zoneId-"+M+" ace-editor"),"data-zone-id":M,"data-zone-container":"*","data-slate-editor":"true",contentEditable:tc,suppressContentEditableWarning:!0},W&&H);if(!(j=z.getContentState().getZoneState(M)))return z.error({message:"[render zone content failed]: ZoneState is not exist. zoneId: "+M,level:i.W.ERROR}),null;return x=b.j,w={state:j,editor:z,zoneId:M,onMount:ta,onDidPaint:ts},(T=({PluginContextProvider:G}).PluginContextProvider)&&(0,h.RM)(T),(0,h.$i)(!0),_=(0,v.az)(x,w),T&&(0,h.RM)(null),(0,h.$i)(!1),A=document.createElement("div"),Array.isArray(_)?A.append.apply(A,(0,f.d)(_)):A.append(_),K=A.innerHTML,(0,c.a)(j),p.createElement("div",{key:M,ref:tn,style:R||{outline:"none"},className:a.SX+" "+(D||"zoneId-"+M+" ace-editor"),"data-zone-id":M,"data-zone-container":"*","data-slate-editor":"true",contentEditable:tc,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:K}})},L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.d)(e,t),e.prototype.render=function(){var t=this.editor,e=this.props,n=e.style,r=e.editable,i=e.ignoreContainerEditable,o=e.className,s=e.scroller,l=e.contextList,u=e.customizedProviderConstructorList,c=e.scrollerOptions,d=e.modules,e=e.plugins;return e&&t.pluginManager._registerV2(e),d&&t._registerModules(d),!r||i||t.inputModel||t.error({message:"InputModel is required when editable is set to true",level:a.WV.FATAL}),p.createElement(m.rU.Provider,{value:t},p.createElement(C,{root:!0,zoneId:"0",editor:t,style:n||{},className:"editor-kit-container "+(0,E.AO)()+" "+(o||""),editable:r,onMount:this.onMount,scroller:s,scrollerOptions:c,contextList:l,customizedProviderConstructorList:u}))},e}(I.F)},70054:function(t,e,n){"use strict";n.d(e,{Z:function(){return D}});var r,i=n("862928"),o=n("11622");n("601325");var a=n("713099"),s=n("944288"),l=n("209239"),u=n("539725"),c=n("471448"),d=n("55582"),f=n("414818"),h=n("433500"),p=n("604006"),v=n("328702"),g=n("299786"),y=n("150505"),m=function(t){var e=t.keyCode,t=t.ctrlKey;return[d.VD.Left,d.VD.Right,d.VD.Up,d.VD.Down].includes(e)||f.Xh.isMac&&t&&e===d.VD.B||f.Xh.isMac&&t&&e===d.VD.F},b=function(t){var e=t.keyCode;return!t.charCode&&[d.VD.Shift,d.VD.Alt,d.VD.Ctrl,d.VD.CapsLock,d.VD.Meta,d.VD.BracketRightKeyDown].includes(e)},S=function(t){for(;t;){var e;if((e=t).getAttribute(d.eu)||e.getAttribute(d.Wr))return!0;if(t.className.includes(d.r0)||t.className.includes("editor-kit-container"))break;t=t.parentElement}return!1},E=function(t){return g.Uk.test(t)},I=function(t){var e=t.offset,t=t.lineText;return(0,y.j)(t.slice(0,e))},C=function(t){var e=t.offset,t=t.lineText;return(0,y.X)(t.slice(e))},L=function(t){var e=t.lineMarker;return t.offset-e},x=function(t){var e=t.offset;return t.lineText.length-1-e},w=function(t){var e=t.lineMarker,n=t.offset,r=t.lineText,t=I(t);if(1<t)return t;for(var i=n-1;e<i&&E(r[i-1]);)i--;return n-i},T=function(t){var e=t.offset,n=t.lineText,t=C(t);if(1<t)return t;for(var r=e+1;r<n.length-1&&E(n[r]);)r++;return r-e};function _(t,e,n){n=JSON.stringify({rangeStartLine:e.start.line,rangeEndLine:e.end.line,isLineStateNull:!n,isViewModelMatchedNull:!t._getViewModel().getView(n),isLineStateNodeNull:!(null!=n&&n.getNode()),zoneStateSize:(null===(n=n.parent)||void 0===n?void 0:n.length())||0}),t.error({level:d.WV.ERROR,message:"line is null while input",extra:n})}var A,k,M=((A={})[d.VD.Enter]="_handleReturnKey",A[d.VD.Delete]="_handleDeleteKey",A[d.VD.BackSpace]="_handleDeleteKey",A);(r=k=k||{}).FlushInput="flushInput",r.Composition="composition",r.DeleteForward="deleteForward",r.DeleteBackward="deleteBackward",r.DeleteToLineStart="deleteToLineStart",r.DeleteToLineEnd="deleteToLineEnd",r.DeleteEntireWordBackward="deleteEntireWordBackward",r.DeleteEntireWordForward="deleteEntireWordForward",r.DeleteRange="deleteRange",r.Return="doReturnKey",r.KeyEvent="handleKeyEvent";var z=[k.FlushInput,k.DeleteForward,k.DeleteBackward,k.Return],R=["formatBold","formatItalic","formatStrikeThrough","formatUnderline"],D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.d)(e,t),e.prototype._handleReturnKey=function(t){this._flushInput();var e=this.editor,n=e.getContentState(),r=n.getActiveZone().getZoneId(),i=e.selection.getSelection(),a=i.start.line,s=i.toPosition(),l=s.start,i=s.len,s=n.getZoneState(r).getLine(a).getLineAttributes().toMap(),n={evt:t,delta:new o.I({zoneId:r}),editor:e};return e.callAll("doReturnKey",{}),e.pluginManager.call("editorWillDoReturnKey",n),r=new o.I({zoneId:r}),n.delta.ops.length?r=r.compose(n.delta):r.retain(l).delete(i).insertEnter().insertLineMarker(s),this._apply(r,{type:k.Return}),e.callAll("editorAfterDoReturnKey",{theLine:a}),t.preventDefault(),this._mergeInputRecord(),null},e}(function(){function t(t,e){var n=this;this._isFirefoxCompositionEnded=!1,this.it=null,this.st=null,this.nt=0,this.ot=[],this.C=0,this.lt=null,this.ut=-1,this.ct=null,this.ht=!1,this._t=!1,this.at=null,this.mt=!1,this._handleKeyDown=this.vt(function(t){var e,r,i,o,a,s,l,u=t.evt.nativeEvent;b(u)||(m(u)&&n._flushInput(),e=u.keyCode,l=u.ctrlKey,s=u.metaKey,a=u.altKey,r=k.KeyEvent,m(u)||n.editor.getStatus("isComposing")||(n._t=!1,i=null,e===d.VD.Enter?(i=n._handleReturnKey(u),n._t=!0):e===d.VD.BackSpace&&(l||s)?(i=n.dt(u,!0,L),r=k.DeleteToLineStart,n._t=!0):e===d.VD.Delete&&(l||s)||l&&e===d.VD.K&&(f.Xh.isMac||f.Xh.isIOS)?(i=n.dt(u,!1,x),r=k.DeleteToLineEnd,n._t=!0):e===d.VD.BackSpace&&a?(i=n.dt(u,!0,w),r=k.DeleteEntireWordBackward,n._t=!0):e===d.VD.Delete&&a?(i=n.dt(u,!1,T),r=k.DeleteEntireWordForward,n._t=!0):e===d.VD.Ime&&f.Xh.isAndroid||e===d.VD.BackSpace&&f.Xh.isIOS?(n.at=u,n.mt=!0,n._t=!1):e===d.VD.BackSpace||l&&e===d.VD.H&&(f.Xh.isMac||f.Xh.isIOS)?(i=n.dt(u,!0,I),r=k.DeleteBackward,n._t=!0):e===d.VD.Delete||l&&e===d.VD.D&&(f.Xh.isMac||f.Xh.isIOS)?(i=n.dt(u,!1,C),r=k.DeleteForward,n._t=!0):e===d.VD.Insert?n._flushInput():(e===d.VD.A||e===d.VD.E)&&l&&f.Xh.isMac&&(n._t=!0,a=(s=(t=(o=n.editor.selection).getSelection()).start).line,l=s.zoneId,s=n.editor.getContentState().getZoneState(l).getLine(a),l={line:a,offset:e===d.VD.A?s.hasLineMarker()?1:0:s.length()-1,zoneId:l},o.setSelection({start:l,end:l,isBackward:t.isBackward},!0)),n._t&&!f.Xh.ios&&(u.preventDefault(),n._t=!1),i&&(n._apply(i,{type:r}),n._mergeInputRecord())))}),this._mergeInputRecord=(0,a.P)(function(){for(var t=n.ot.length-1,e=t-1;0<=e&&0<=t;){var r=n.ot[t],i=n.ot[e];r.type===i.type&&z.includes(r.type)?(n.editor.undoModule.mergeRecords(i,r),e=(t=e)-1):e=(t=e-1)-1}n.ot=[]},1e3,{leading:!1}),this.pt=0,this.editor=t,this.C=null!==(e=e.debounceFlush)&&void 0!==e?e:0,t.on("beforeinput",this._handleBeforeInput,0),t.on("compositionstart",this._handleCompositionEvent,0),t.on("compositionupdate",this._handleCompositionEvent,0),t.on("compositionend",this._handleCompositionEvent,0),t.on("mousedown",this._handleMouseDown,0),t.on("contentchange",this._handleContentChange,0)}var e=t.prototype;return e.vt=function(t){var e=this;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.editor.undoModule.batchedUndo(function(){t.apply(e,n)})}},e._handleKeyPressAndUp=function(t){var e=t.evt;this.mt=!1,this.at=null,b(e.nativeEvent)||(t=M[t=e.keyCode],S(e.target)||this.editor.isFocusOnBlock()||this[t]&&e.preventDefault())},e._handleMouseDown=function(){this._flushInput()},e._handleContentChange=function(){var t=this.editor.getContentState().contentApplyRuntime;this.ot.push(t.currentRuntime)},e._handleBeforeInput=function(t){var e=this.editor;if(!e.getStatus("isComposing")){f.Xh.ios&&this._t&&(this._t=!1,t.preventDefault());var n,r=t.inputType,o=t.data,a=void 0===o?"":o,s=t.dataTransfer,l=void 0===s?null:s,o=(0,i._)(t.nativeEvent.getTargetRanges(),1)[0],s=null!=o?o:null===(u=document.getSelection())||void 0===u?void 0:u.getRangeAt(0),u="deleteContentBackward"===r||"deleteWordBackward"===r||s&&!s.collapsed&&"insertText"===r&&""===a;if(u&&this.mt&&this.at&&(f.Xh.isAndroid||f.Xh.isIOS)||f.Xh.isIOS&&"deleteWordBackward"===r)return e.triggerEditorEvent("deleteWordBackward",t).shouldPrevent||(s=(null==(n=s?e.selection._toModelRange(s):null)?void 0:n.toPosition().len)||I,n=null,(n=this.at?this.dt(this.at,!0,s):this.ft(!0,s))&&(this._apply(n,{type:k.DeleteBackward}),this._mergeInputRecord())),t.preventDefault(),void(this._t=!0);a&&!f.Xh.mobile&&!f.Xh.isIPad&&f.Xh.safari&&/^\d+\.$/.test(a)&&"insertText"===r?t.preventDefault():r.startsWith("delete")||r.startsWith("deleteBy")||(n=getSelection(),o||null!=n&&n.isCollapsed||(o=null==n?void 0:n.getRangeAt(0)),R.includes(r)&&t.preventDefault(),n=o&&!o.collapsed,this.jt(o,n),e.callAll("editorWillHandleBeforeInput",{event:t}),("insertText"===r&&a&&-1<a.indexOf("\n")||"insertReplacementText"===r&&a||"insertReplacementText"===r&&null!=l&&l.getData("text"))&&(r=e.selection.getSelection(),e.getContentState().replaceText(r,a||(null==l?void 0:l.getData("text"))||""),t.preventDefault(),f.Xh.isAndroid&&!t.nativeEvent.cancelable&&(this._t=!0)))}},e._handleInput=function(t){var e,n,r,i=this,a=this.editor;if(this._t&&f.Xh.ios&&a.getStatus("isComposing"))this._t=!1;else if(this._t){this._t=!1;var s=a.selection.getSelection().start;return void a.triggerEditorEvent("_forceRefresh",{zoneId:s.zoneId,from:"input"})}["historyUndo","historyRedo"].includes(t.inputType)||(!f.Xh.isIPad||"deleteCompositionText"!==t.inputType||a.getStatus("isComposing")?f.Xh.android&&a.getStatus("isComposing")&&("deleteContentBackward"===t.inputType||"insertCompositionText"===t.inputType)||("deleteContentBackward"!==t.inputType?f.Xh.isFF&&this._isFirefoxCompositionEnded&&!1===t.nativeEvent.isComposing?this._isFirefoxCompositionEnded=!1:this.editor.getStatus("isComposing")||S(t.target)||a.isFocusOnBlock(t.target)||f.Xh.isIPad&&"deleteContentForward"===t.nativeEvent.inputType||(this.st&&(window.clearTimeout(this.st),this.st=null),this.nt++,n=(e=a.selection.getSelection().toPosition()).len,t=e.start,e=e.zoneId,this.editor.log("[Log]","[Input][_handleInput] selection",JSON.stringify({zoneId:e,start:t,timestamp:Date.now()})),n||!this.C?this.yt(k.FlushInput):(this.editor.setStopUpdateSelection(!0),this.st=window.setTimeout(function(){i._flushInput()},this.C))):(this._flushInput(),(n=a.selection.getSelection()).isCollapsed()?(f.Xh.isIOS||f.Xh.isIPad)&&(r=this.ft(!0,1))&&this._apply(r,{type:k.DeleteBackward}):(s=(a=n.toPosition()).start,n=a.len,a=a.zoneId,r=new o.I({zoneId:a}).retain(s).delete(n),this._apply(r,{type:k.DeleteRange})))):this.ht=!0)},e._flushInput=function(t){this.editor._resetCursorStatus(),!this.editor.getStatus("isComposing")||t?this.st&&(window.clearTimeout(this.st),this.editor.setStopUpdateSelection(!1),this.st=null,this.yt(k.FlushInput)):this.editor.log("[Input][_flushInput] _flushInput return in composition")},e.yt=function(t){var e=this.editor,n=e.selection.getSelection(),r=n.start,i=n.end,o=e._getViewModel(),a=e.getContentState(),s=a.getActiveZone().getZoneId(),l=a.getZoneState(s);if(l){var u=l.getLine(r.line),c=o.getView(u),d=Number(u.hasLineMarker()),a=u.getText(),s=a.slice(0,a.length-1);if(this.editor.getFg("isEditorKitDirtDOMRefreshEnabled")&&!c)return _(this.editor,n,u),void this.editor.getContentState()._forceRefresh(r.zoneId,[(null==u?void 0:u.index)||0],"input");n=(a=(0,p.z8)(c).join("")).replace(/\n/g,""),u=r.offset-d,s=i.offset+n.length-s.length-d,i.line>r.line&&(l=(d=l.getLine(i.line)).getText()||"",h=Number(d.hasLineMarker()),h=l.slice(0,l.length-1).length-(i.offset-h),e.getContainer().contains(c)&&n||(c=o.getView(d),u=0),s=f.Xh.isEdge?n.length:n.length-h);var h=a,a=(0,p.S3)(c).join(""),c=n.slice(u,s).replace(g.DT,""),s=this._getInheritAttributesAndsetStatus();h!==a&&r.line===i.line?(e.setStatus("dangerousInput",!0),this.Et(c,s,{refresh:!0,type:t})):0===c.length&&r.line===i.line&&r.offset===i.offset?(c=n.substr(u,this.nt),this.Et(c,s,{overtype:!0,type:t})):this.Et(c,s,{overtype:!1,type:t}),this.nt=0}},e._getInheritAttributesAndsetStatus=function(){var t=this,e=this.editor.selection.getSelection(),n=e.toPosition().zoneId,n=this.editor.pluginManager.call("editorGetInheritAttributes",{},{cb:function(t,e){return e},zoneId:n}),e=this.getInheritAttributes(e,function(){t.editor.setStatus("dangerousInput",!0)});return Object.assign({},e,n)},e.getInheritAttributes=function(t,e){var n,r,o,a=this.editor,s=a.getContentState(),l=a._getInlineAttributesOfPreviousPosition(!0,t),u=a._getInlineAttributesOfPreviousPosition(!1,t).toMap(),c=(null!=t?t:a.selection.getSelection()).toPosition(),c=s.getInlineStyleOverride(c),d={};try{for(var f=(0,i.c)(l),h=f.next();!h.done;h=f.next()){var p=(0,i._)(h.value,2),v=p[0],g=p[1],y=this.bt();if(null!=y&&y.test(v)&&(!1!==(null==(I=s.schema.get(v))?void 0:I.lineStartInherit)||v in u)){if(I&&!1===I.tailInherit&&a._getInlineAttributesOfNextPosition(t).toMap()[v]!==g){null!=I&&I.refresh&&e&&e();continue}d[v]=g}}}catch(t){m={error:t}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(m)throw m.error}}var m=a._getInlineAttributesOfNextPosition(t),b=this.bt();try{for(var S=(0,i.c)(m),E=S.next();!E.done;E=S.next()){var I,C=(0,i._)(E.value,2),v=C[0],g=C[1];null==b||!b.test(v)||v in d||(I=s.schema.get(v))&&I.headInherit&&(d[v]=g)}}catch(t){r={error:t}}finally{try{E&&!E.done&&(o=S.return)&&o.call(S)}finally{if(r)throw r.error}}return(0,i.b)((0,i.b)({},d),c)},e.bt=function(){if(this.it)return this.it;var t,e,n=this.editor.getContentState().schema,r=[];try{for(var o=(0,i.c)(Object.keys(n.schemas)),a=o.next();!a.done;a=o.next()){var s=a.value;n.schemas[s].mark&&r.push(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r.length?(this.it=new RegExp(r.join("|")),this.it):null},e._handleReturnKey=function(t){return null},e.dt=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=1),this.editor.log("trace","[Editor Event] name: "+t.type+", type: deleteKey");var r=Date.now();r-this.pt<5&&this.editor.error({level:s.W.ERROR,message:"[Editor Error]: delete trigger multiple times in a short period of time."}),this.pt=r,this._flushInput();var i=this.editor;if(i.triggerEditorEvent(h.r.DELETE_KEY,{e:t,isBackward:e}),t.defaultPrevented)return null;var a=i.getContentState(),l=a.getActiveZone().getZoneId(),u=i.selection.getSelection(),d=u.start,f=d.line,p=d.offset,v=u.toPosition(),r=v.start,d=v.len,u={evt:t,deltaSet:(new c.D).compose(new o.I({zoneId:l})),editor:i};if(e&&i.pluginManager.call("editorWillDoDeleteKey",u),i.callAll("aceDoDeleteKey",{editor:i,evt:t,caretLine:i.selection.getSelection().start.line}),v=[],d?(d=new o.I({zoneId:l}).retain(r).delete(d),d=u.deltaSet.compose(d),this._apply(d,{type:k.DeleteRange}),v=[!0]):e&&(p={editor:this.editor,evt:t,lineMarker:null===(a=null===(a=a.getZoneState(l))||void 0===a?void 0:a.getLine(f))||void 0===a?void 0:a.hasLineMarker(),zoneId:l,theLine:f,col:p},v=i.callAll("editorDoDeleteKey",p)),v.includes(!0))return i.callAll("editorAfterDoDeleteKey",{editor:i,theLine:f,evt:t}),null;var g=!1;return(u.deltaSet.forEach(function(t){0<t.ops.length&&(g=!0)}),g)?u.deltaSet:(n=this.ft(e,n))?u.deltaSet.compose(n):null},e.ft=function(t,e){void 0===e&&(e=1);var n=this.editor.selection.getSelection(),r=this.editor.getContentState(),i=n.start,a=i.offset,s=i.zoneId,l=n.toPosition().start,u=new o.I({zoneId:s}),c=n.start.line,d=r.getZoneState(s);if(!d)return null;var f,i=d.getLine(c),r=Number(i.hasLineMarker()),s=n.start.offset===r,d=i.length()-n.start.offset==1,n=i.nextSibling(),i=i.getModelText();return!n&&d&&!t||s&&t&&0===c?null:(t?s?u.retain(l-1-r).delete(r+1):(f="function"==typeof e?e({lineText:i,offset:a,lineMarker:r}):e,u.retain(l-f).delete(f)):d?(n=Number(n.hasLineMarker()),u.retain(l).delete(1+n)):(f="function"==typeof e?e({lineText:i,offset:a,lineMarker:r}):e,u.retain(l).delete(f)),u)},e._handleCompositionEvent=function(t){var e=t.type,n=this.editor;"compositionstart"===e?this._handleCompositionstart(t):"compositionupdate"===e?this.wt():"compositionend"===e&&this.It(t),n.callAll("aceCompositionEvent",{evt:t,editor:n}),t.stopPropagation()},e._handleCompositionstart=function(t){this.editor.setStatus("isComposing",!0);var e,n=null===(e=t.nativeEvent)||void 0===e?void 0:e.data,r=this.editor.selection.getSelection();n&&0<n.length&&r.isCollapsed()?(e=r.start,r=r.end,this.editor.selection.setSelection({start:(0,i.b)((0,i.b)({},e),{offset:e.offset-n.length}),end:r})):(o=(l=(s=(null==(o=window.getSelection())?void 0:o.isCollapsed)&&this.editor.selection.toModelRange(o))&&s.start||{}).zoneId,a=(o=(l=(s=l.line)&&o&&(null===(a=this.editor.getContentState().getZoneState(o))||void 0===a?void 0:a.getLine(s)))&&this.editor._getViewModel().getView(l))&&l&&(0,p.S3)(o).join(""),s=l&&l.getText(),a&&a===s&&this.jt());var o=this.editor;o.callAll("editorWillHandleCompositionStart",{event:t}),o.callAll("aceAfterCompositionStart"),o.setStopUpdateSelection(!0);var a=o.selection.getSelection();if(f.Xh.isAndroid&&a.isCollapsed()){var s=a.start,t=o._getViewModel(),l=o.getContentState().getActiveZone().getLine(s.line);if(this.lt=t.getView(l),this.editor.getFg("isEditorKitDirtDOMRefreshEnabled")&&!this.lt)return _(this.editor,a,l),void this.editor.getContentState()._forceRefresh(s.zoneId,[(null==l?void 0:l.index)||0],"input");this.ut=(0,p.z8)(this.lt).join("").replace(/\n/g,"").length,this.ct=a}},e.qt=function(){var t=this.editor,e=t.selection.getSelection(),n=e.start,r=t._getViewModel(),i=t.getContentState(),a=i.getActiveZone(),s=a.getZoneId(),l=a.getLine(n.line),u=r.getView(l),a=Number(l.hasLineMarker()),r=l.getText(),c=r.slice(0,r.length-1);if(this.editor.getFg("isEditorKitDirtDOMRefreshEnabled")&&!u)return _(this.editor,e,l),void this.editor.getContentState()._forceRefresh(n.zoneId,[(null==l?void 0:l.index)||0],"input");for(var d=(0,p.z8)(u).join("").replace(/\n/g,""),f=n.offset-a,h=f,v=h=-1!==this.ut&&this.ut<c.length?f-(c.length-this.ut):h,g=f-c.length,y=0;y<h;y++)if(c[y]!==d[y]){v=y;break}for(y=0;y<c.length-f;y++)if(c[c.length-y-1]!==d[d.length-y-1]){g=-y;break}t.setStatus("dangerousInput",!0),null!==(i=i.rangePointToOffset({zoneId:s,line:n.line,offset:v+a}))&&(n=c.length+g-v,a=d.slice(v,d.length+g),0!=n||0!==a.length?(a=new o.I({zoneId:s}).retain(i).delete(n).insert(a,this._getInheritAttributesAndsetStatus()),this._apply(a,{type:k.Composition})):t.__handleDOMSelectionChange())},e.wt=function(){var t;f.Xh.isAndroid&&this.lt&&(t=(0,p.z8)(this.lt).join("").replace(/\n/g,"")).length<this.ut&&(this.ut=t.length)},e.It=function(t){var e,n;if(!f.Xh.isAndroid||this.editor.getStatus("isComposing")){if(f.Xh.isIPad&&!this.editor.getStatus("isComposing")&&this.ht)return this.gt(),void(this.ht=!1);if(this.editor.setStatus("isComposing",!1),f.Xh.isFF&&(this._isFirefoxCompositionEnded=!0),this.editor.setStopUpdateSelection(!1),this.lt=null,S(t.target)||this.editor.isFocusOnBlock())return this.ut=-1,void(this.ct=null);this.editor.callAll("aceBeforeCompositionEnd");var r=this.editor.selection.getSelection(),a=null===(c=this.editor.getContentState().getActiveZone())||void 0===c?void 0:c.getLine(r.start.line);if((!t.data.includes("\n")||t.data.startsWith("\n"))&&a&&document.contains(a.getNode()))f.Xh.isAndroid&&r.isCollapsed()?(0,l.X)(r,this.ct)&&this.qt():this.yt(k.Composition);else{var s=t.data.split("\n"),u=r.toPosition(),c=u.zoneId,a=u.start,u=u.len,d=new o.I({zoneId:c}).retain(a).delete(u).insert(s[0],this.getInheritAttributes());try{for(var h=(0,i.c)(s.slice(1)),p=h.next();!p.done;p=h.next())var v=p.value,d=d.insertEnter().insert(v)}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}this._apply(d,{type:k.Composition}),this.gt(),this._mergeInputRecord()}f.Xh.isAndroid&&this.jt(),this.ut=-1,this.ct=null,this.editor.callAll("aceAfterCompositionEnd",{evt:t}),t.preventDefault()}},e.gt=function(){var t=this.editor.selection.getSelection().start,e=t.zoneId,t=t.line;this.editor.getContentState()._forceRefresh(e,[t],"input")},e.Et=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={refresh:!1,overtype:!1,type:k.FlushInput});var r,i,a,s,l,u,c,d=this.editor;!t&&d.selection.getSelection().isCollapsed()||(i=(r=d.getContentState().getActiveZone()).getZoneId(),s=(c=(a=d.selection.getSelection()).toPosition()).start,u=l=c.len,c=a.start.line,(c=r.getLine(c))&&(d.getContentState()._clearInlineStyleOverride(a.toPosition()),(0<l||null!=c&&c.isEmpty())&&d.setStatus("dangerousInput",!0),0===l&&n.overtype&&(u=t.length),e=new o.I({zoneId:i}).retain(s).delete(u).insert(t,e),this._apply(e,{type:n.type}),this._mergeInputRecord()))},e.jt=function(t,e){(t=t||getSelection()||void 0)&&(t=this.editor.selection._toModelRange(t))&&!v.e.isRangeEqual(this.editor.selection.getSelection(),t)&&this.editor.selection.setSelection(t,e)},e._apply=function(t,e){return this.editor.getContentState().apply(t,e)},e.destroy=function(){this._flushInput()},(0,i.a)([u.W],t.prototype,"_handleMouseDown",null),(0,i.a)([u.W],t.prototype,"_handleContentChange",null),(0,i.a)([u.W],t.prototype,"_handleBeforeInput",null),(0,i.a)([u.W],t.prototype,"_handleInput",null),(0,i.a)([u.W],t.prototype,"_handleCompositionEvent",null),(0,i.a)([u.W],t.prototype,"_handleCompositionstart",null),t}())},634029:function(t,e,n){"use strict";var r,i,o,a;n.d(e,{A:function(){return r},U:function(){return i}}),(o=r=r||{})[o.EQUAL=0]="EQUAL",o[o.UNEQUAL=1]="UNEQUAL",o[o.UPDATE=2]="UPDATE",(a=i=i||{})[a.ZONE=0]="ZONE",a[a.LINE_UPDATE=1]="LINE_UPDATE",a[a.LINE_CONSTANT=2]="LINE_CONSTANT",a[a.LINE_INSERT=3]="LINE_INSERT",a[a.LINE_DELETE=4]="LINE_DELETE",a[a.LEAF_UPDATE=5]="LEAF_UPDATE",a[a.LEAF_CONSTANT=6]="LEAF_CONSTANT",a[a.LEAF_INSERT=7]="LEAF_INSERT",a[a.LEAF_DELETE=8]="LEAF_DELETE"},754758:function(t,e,n){"use strict";n.d(e,{M:function(){return b}});var r=n("862928"),i=n("944288"),o=n("11622"),a=n("866152"),s=n("715641"),l=n("739375"),u=n("524007"),c=n("471448"),d=n("55582"),f=n("312438"),h=n("900428"),p=n("910893"),v=n("634029"),g=function(){function t(){this.runtimeStack=[]}var e=t.prototype;return Object.defineProperty(e,"atRuntime",{get:function(){return!!this.runtimeStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e,"atDeepRuntime",{get:function(){return 1<this.runtimeStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(e,"currentRuntime",{get:function(){return this.runtimeStack[this.runtimeStack.length-1]},enumerable:!1,configurable:!0}),e.start=function(t,e){var n=(0,h.zs)(6);this.runtimeStack.push({id:n,type:t,options:e})},e.stop=function(){return this.runtimeStack.pop()},t}(),y=function(){function t(t){var e=this,n=t.deltaSet,r=t.schema,i=t.modulesContainer,o=t.rendererMode,t=t.contentStateFgMap;this.content=new Map,this.zt=function(){},this.Rt=u.S,this.Nt={},this._applyStackLog=[],this.rendererMode="DOM",this._getInternalZoneEntities=function(t,e,n){return[]},this.contentApplyRuntime=new g,this.schema=null!=r?r:new p.V({}),this._attributes=new f.Q,this.modulesContainer=i,this.rendererMode=o||"DOM",this.Xt=t,null!=n&&n.forEach(function(t){var n=e.modulesContainer.get(l.h.ZoneState);e.content.set(t.zoneId,new n(t.zoneId,t,e.schema)),t.forEach(function(t){t.attributes&&e._attributes.setAttributes(t.attributes)})})}var e=t.prototype;return e.create=function(e){return new t(e)},e.getContent=function(){return this.content},e.setActiveZone=function(t){this.getZoneState(t)&&(this.Rt=t)},e.getActiveZone=function(){return this.getZoneState(this.Rt)},e[Symbol.iterator]=function(){return this.content.values()},e.getEntities=function(t,e){var n=[];if(t instanceof Array){var i=this.getZoneState(u.S);n.push.apply(n,(0,r.e)(i.getEntities(t,e,this._getInternalZoneEntities)))}else{t instanceof Function&&(e=t,t={start:{line:0,offset:0,zoneId:"0"},end:{line:o=(i=this.getZoneState(u.S)).length()-1,offset:i.getLine(o).length(),zoneId:"0"}});var o=t.start.zoneId,o=this.getZoneState(o);if(!o)return[];n.push.apply(n,(0,r.e)(o.getEntities(t,e,this._getInternalZoneEntities)))}return n},e.getContentStateFg=function(t){var e;return null!==(t=null===(e=this.Xt)||void 0===e?void 0:e[t])&&void 0!==t&&t},e.Gt=function(t){try{throw Error("invalid delta")}catch(t){}},e.apply=function(t,e){var n;if(void 0===e&&(e={}),!(this._applyStackLog.length<50))throw Error("Maximum call stack size exceeded");this._applyStackLog.push(Error().stack);try{var o=this.applyToContentState(t,e);return this.triggerChangeCbk((0,r.b)((0,r.b)({},o),{options:e}))}catch(t){return null!==(n=this._errorCbk)&&void 0!==n&&n.call(this,{message:"[contentState][apply] call applyToContentState error: "+t.message,level:i.W.ERROR}),this.contentApplyRuntime.stop()}finally{this._applyStackLog.length&&(this._applyStackLog=[])}},e.applyToContentState=function(t,e){var n,r,a=this;void 0===e&&(e={});try{this.Jt&&this.Jt({data:t,options:e})}catch(t){null!==(s=this._errorCbk)&&void 0!==s&&s.call(this,{message:"[contentState][apply] call willApplyCbk error: "+t.message,level:i.W.ERROR})}this.contentApplyRuntime.start(e.type||"editEvent",e);var s=(0,c.n)(t)?t:new c.D(((n={})[t.zoneId]=t,n)),t=this._clone(!1,s);if(s.forEach(function(t){t.forEach(function(t){"string"==typeof t.insert&&t.insert.includes(d.T6)&&a.Gt("invalid delta: insert a zero space")})}),e.isRemote||(s=(0,h.nF)(s)),!e.isRemote&&!1!==e.normalize)try{s=(0,h.qW)(this,this.schema,s)}catch(t){throw null!==(n=this._errorCbk)&&void 0!==n&&n.call(this,{message:"[contentState][apply] call normalizeDeltaSet error: "+t.message,level:i.W.ERROR}),t}if(this.Qt)try{s=this.Qt({current:this,next:this,deltaSet:s,options:e})}catch(t){null!==(r=this._errorCbk)&&void 0!==r&&r.call(this,{message:"[contentState][apply] call _willChangeCbk error: "+t.message,level:i.W.ERROR})}var l={},u={};try{s.forEach(function(t){var e=t.zoneId,n=a.getZoneState(e);if(n){var r=n.apply(t,function(t,n,r){var o={start:t,deletes:n,inserts:r};l[e]?l[e].push(o):l[e]=[o],(0,h.s7)(r)?a.Vt(e,t,n,r):null!==(n=a._errorCbk)&&void 0!==n&&n.call(a,{message:"[contentState][apply] æ•°æ®å¼‚å¸¸: "+r,level:i.W.FATAL})});if(a.content.set(e,r),"DOM"===a.rendererMode&&l[e])try{u[e]=a.Yt(l[e],r,n)}catch(t){u[e]={state:r,changes:null};null!==(r=a._errorCbk)&&void 0!==r&&r.call(a,{message:"[contentState][apply] model diff error "+((null==t?void 0:t.message)||""),level:i.W.ERROR,e:t})}t instanceof o.I&&a.ie(t)}else n=a.addZone(e,t),l[e]=[{start:0,deletes:[],inserts:n.lines}]})}catch(t){null!==(r=this._errorCbk)&&void 0!==r&&r.call(this,{message:"[contentState][apply] error "+((null==t?void 0:t.message)||""),level:i.W.FATAL,e:t})}return{changes:this.re(l),previous:t,deltaSet:s,diffResult:u}},e.triggerChangeCbk=function(t){var e=t.changes,n=t.previous,r=t.deltaSet,o=t.options,t=t.diffResult;try{this.zt&&this.zt({previous:n,current:this,deltaSet:r,changes:e,options:o,diffResult:t})}catch(e){null!==(t=this._errorCbk)&&void 0!==t&&t.call(this,{e:e,message:"[contentState][apply] call _changeCbk error: "+((null==e?void 0:e.message)||""),level:i.W.ERROR})}return this.contentApplyRuntime.stop()},e.Yt=function(t,e,n){var i,o,a=[],s=[],l=0,u=this;try{for(var c=(0,r.c)(t.entries()),d=c.next();!d.done;d=c.next()){var f=(0,r._)(d.value,2);!function(i,o){var c,d,f=o.deletes,h=o.inserts,p=o.start,g=f.reduce(function(t,e,n){return n=p-l+n,t.set(e.getKey(),[n,e]),t},new Map),y=p;try{for(var m=(z=void 0,(0,r.c)(h)),b=m.next();!b.done;b=m.next()){var S=b.value,E=S.getKey(),I=a.length?a[a.length-1]:null;if(g.has(E)){var C=g.get(E);if(!C)throw Error("The prevInsertedLine should not be empty.");var L=(0,r._)(C,2),x=L[0],w=L[1],T=u.se(S,w),y=w.index;if(g.delete(E),(null==I?void 0:I.type)===v.U.LINE_UPDATE){var _=I.retain,A=I.inserts,k=I.deletes;if(y===_+A.length){k.push(w),A.push({state:S,changes:T}),y++;continue}}a.push({originalStart:x,retain:y,deletes:[w],inserts:[{state:S,changes:T}],type:v.U.LINE_UPDATE}),y++}else{if((null==I?void 0:I.type)===v.U.LINE_INSERT&&y===(_=I.retain)+(A=I.inserts).length){A.push({state:S,changes:null}),y++;continue}a.push({retain:y,inserts:[{state:S,changes:null}],type:v.U.LINE_INSERT}),y++}}}catch(t){z={error:t}}finally{try{b&&!b.done&&(M=m.return)&&M.call(m)}finally{if(z)throw z.error}}var o=t[i+1],M=p+f.length-l,z=n.getLine(M),i=e.getLine(p+h.length);if(o){if(1<=o.start-p-f.length){if(!z)throw Error("The oldConstantLine should not be empty.");a.push({originalStart:M,retain:M,deletes:[z],inserts:[{state:i,changes:null}],type:v.U.LINE_CONSTANT})}}else z&&a.push({originalStart:M,retain:M,deletes:[z],inserts:[{state:i,changes:null}],type:v.U.LINE_CONSTANT});try{for(var R=(c=void 0,(0,r.c)(g.entries())),D=R.next();!D.done;D=R.next()){var N=(0,r._)(D.value,2),O=(0,r._)(N[1],2)[1],P=O.index,I=s.length?s[s.length-1]:null;if((null==I?void 0:I.type)===v.U.LINE_DELETE&&P===(_=I.retain)+(k=I.deletes).length){k.push(O);continue}s.push({originalStart:P,retain:P,deletes:[O],type:v.U.LINE_DELETE})}}catch(t){c={error:t}}finally{try{D&&!D.done&&(d=R.return)&&d.call(R)}finally{if(c)throw c.error}}l+=h.length-f.length}(f[0],f[1])}}catch(t){i={error:t}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return{state:e,changes:a=a.concat.apply(a,(0,r.e)(s))}},e.se=function(t,e){var n,i,o,a,t=t.leaves,s=e.leaves.reduce(function(t,e){return t.set(e.getKey(),e),t},new Map),l=0,u=0,c=[];try{for(var d=(0,r.c)(t),f=d.next();!f.done;f=d.next()){var h=f.value,p=h.getKey(),g=c.length?c[c.length-1]:null,y={state:h,changes:null};if(s.has(p)){var m=s.get(p);if(!m)throw Error("The reusedOldLeaf should not be empty.");var b=m.index<l,l=b?l:m.index,u=m.index;if(s.delete(p),m.op.insert!==h.op.insert){if((null==g?void 0:g.type)===v.U.LEAF_UPDATE&&(S=g.retain,E=g.inserts,I=g.deletes,u===S+E.length)){I.push(m),E.push(y),u++;continue}c.push({retain:u,deletes:[m],inserts:[y],type:v.U.LEAF_UPDATE,shouldMove:b}),u++}else{if((null==g?void 0:g.type)===v.U.LEAF_CONSTANT){var S=g.retain,E=g.inserts,I=g.deletes;if(u===S+E.length){I.push(m),E.push(y),u++;continue}}c.push({retain:u,deletes:[m],inserts:[y],type:v.U.LEAF_CONSTANT,shouldMove:b}),u++}}else{var C={state:h,changes:null};(null==g?void 0:g.type)!==v.U.LEAF_INSERT?(c.push({retain:u,inserts:[C],type:v.U.LEAF_INSERT}),u++):g.inserts.push(C)}}}catch(t){n={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}try{for(var L=(0,r.c)(s.entries()),x=L.next();!x.done;x=L.next()){var w=(0,r._)(x.value,2)[1],T=w.index;(null==(g=c.length?c[c.length-1]:null)?void 0:g.type)!==v.U.LEAF_DELETE||T!==g.retain+g.deletes.length?c.push({retain:T,deletes:[w],type:v.U.LEAF_DELETE}):g.deletes.push(w)}}catch(t){o={error:t}}finally{try{x&&!x.done&&(a=L.return)&&a.call(L)}finally{if(o)throw o.error}}return c},e.re=function(t){var e,n,i={};try{for(var o=(0,r.c)(Object.keys(t)),a=o.next();!a.done;a=o.next())!function(e){var n=t[e],r=0;i[e]=n.map(function(t){var e=t.start,n=t.deletes,t=t.inserts,e={start:e+r,deletes:n,inserts:t};return r+=n.length-t.length,e})}(a.value)}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},e.Vt=function(t,e,n,r){this.le&&this.le(t,e,n,r)},e._clone=function(t,e){var n,i,o=this,a=new Map;if(t||!e)try{for(var s=(0,r.c)(this.content),l=s.next();!l.done;l=s.next()){var u=(0,r._)(l.value,2),c=u[0],d=u[1];a.set(c,d.clone())}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}else a=new Map(this.content),e.forEach(function(t,e){var n=o.content.get(e);n&&a.set(e,n.clone())});return t=t?this._attributes.toJsonable():this._attributes,(t=this.create({apool:t,schema:this.schema,modulesContainer:this.modulesContainer})).content=a,t.zt=this.zt,t.Qt=this.Qt,t},e.onChange=function(t){this.zt=t},e.onWillChange=function(t){this.Qt=t},e._onMutate=function(t){this.le=t},e._onRefresh=function(t){this.oe=t},e._onError=function(t){this._errorCbk=t,this._attributes.setOnErrorCb(t)},e._onWillApply=function(t){this.Jt=t},e.getAttributes=function(t,e){var n=t.zoneId,n=this.getZoneState(n);return n?n.getAttributes(t,e):(0,h.vA)()},e.getLineAttributes=function(t,e){return(e=null===(t=this.getZoneState(t))||void 0===t?void 0:t.getLine(e))?e.getLineAttributes():(0,h.vA)()},e.getZoneState=function(t){return this.content.get(t)},e._dangerouslyReplaceAttribute=function(t,e,n,i){var o,a,s,l;try{for(var u=(0,r.c)(this),c=u.next();!c.done;c=u.next()){var d=c.value;try{for(var f=(s=void 0,(0,r.c)(d)),h=f.next();!h.done;h=f.next())h.value._getDelta().forEach(function(r){var o;(null===(o=r.attributes)||void 0===o?void 0:o[t])===e&&(delete r.attributes[t],r.attributes[n]=i)})}catch(t){s={error:t}}finally{try{h&&!h.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}}}catch(t){o={error:t}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}},e.setAttributes=function(t,e,n){void 0===n&&(n={internalZonesIncluded:!0});var a=t.start,s=a.zoneId,l=a.offset,u=a.line,d=t.end,a=d.zoneId,f=d.offset,d=d.line;if(s===a){var h=this.rangeToPosition(t);if(null!==h){if(l!==f||u!==d){if(0!==h.len){var p,v,g,y,m,b,S,E,I,C,L={},t=this.getEntities(t),x=(p=t,v=function(t){return t.start.zoneId},p.reduce(function(t,e){var n=v(e);return!t[n]&&(t[n]=[]),t[n].push(e),t},{}));for(C in x)if((n.internalZonesIncluded||s===C)&&x.hasOwnProperty(C)){var w=new o.I({zoneId:C}),T=x[C];C===s&&w.retain(h.start);try{for(var _=(b=void 0,(0,r.c)(T.entries())),A=_.next();!A.done;A=_.next()){var k,M,z,R=(0,r._)(A.value,2),D=R[0],N=R[1];(null===(I=N.attributes)||void 0===I||!I.lmkr||n.withLineMarker)&&("\n"!==N.text||n.withEnter)?(k=N.text.endsWith("\n")&&!n.withEnter?1:0,M=N.start.offset,z=N.end.offset,C===s&&(0===D&&(M=l),D===T.length-1&&0!==f&&(k=f===N.end.offset?k:0,z=f)),w.retain(z-M-k,e).retain(k)):w.retain(1)}}catch(t){b={error:t}}finally{try{A&&!A.done&&(S=_.return)&&S.call(_)}finally{if(b)throw b.error}}L[C]=w}return t=new c.D(L),this.apply(t,(0,r.b)({type:"setAttributes"},n))}try{for(var O=(0,r.c)(Object.entries(e)),P=O.next();!P.done;P=O.next()){var Z=(0,r._)(P.value,2),W=Z[0],K=Z[1];this._setInlineStyleOverride(h,W,K)}}catch(t){y={error:t}}finally{try{P&&!P.done&&(m=O.return)&&m.call(O)}finally{if(y)throw y.error}}}else try{for(var F=(0,r.c)(Object.keys(e)),U=F.next();!U.done;U=F.next()){var B=U.value;this._setInlineStyleOverride(h,B,e[B])}}catch(t){E={error:t}}finally{try{U&&!U.done&&(g=F.return)&&g.call(F)}finally{if(E)throw E.error}}}}else null!==(E=this._errorCbk)&&void 0!==E&&E.call(this,{message:"[ContentState][setAttributes] start zoneId: "+s+" not equal to end zoneId: "+a,level:i.W.ERROR})},e.setLineAttributes=function(t,e,n,i){void 0===i&&(i={});var a=null===(a=this.content.get(t))||void 0===a?void 0:a.getLine(e);if(a&&null!==(e=this.rangePointToOffset({line:e,offset:0,zoneId:t})))return(t=new o.I({zoneId:t})).retain(e),a.hasLineMarker()?t.retain(1,n):t.insertLineMarker(n),this.apply(t,(0,r.b)({type:"setLineAttributes"},i))},e.hasLineMarker=function(t){var e=t.line,t=t.zoneId;return!(null===(e=null===(t=this.content.get(t))||void 0===t?void 0:t.getLine(e))||void 0===e||!e.hasLineMarker())},e.isLineStart=function(t){return this.hasLineMarker(t)?1===t.offset:0===t.offset},e.deleteText=function(t,e){void 0===e&&(e={});var n=this.rangeToPosition(t);if(null!==n){var i=n.start,a=n.len,s=n.zoneId,t=this.getZoneState(s);if(t)return n=t.getContent().length(),t=a,n-1<=i+a&&(t=n-i-1),t=new o.I({zoneId:s}).retain(i).delete(t),this.apply(t,(0,r.b)({type:"deleteText"},e))}},e.getInsertTextDelta=function(t,e,n,r){return void 0===r&&(r={}),new o.I({zoneId:t.zoneId}).retain(e).insert(n,r)},e.insertText=function(t,e,n,i){void 0===n&&(n={}),void 0===i&&(i={});var o=this.rangePointToOffset(t);if(null!==o)return n=this.getInsertTextDelta(t,o,e,n),this.apply(n,(0,r.b)({type:"insertText"},i))},e.getReplaceTextDelta=function(t){var e=t.pos,n=t.text,r=t.attributes,i=e.start,t=e.len,e=e.zoneId;return new o.I({zoneId:e}).retain(i).delete(t).insert(n,r)},e.replaceText=function(t,e,n,i){void 0===n&&(n={}),void 0===i&&(i={});var o=this.rangeToPosition(t);if(null!==o)return n=this.getReplaceTextDelta({sel:t,pos:o,text:e,attributes:n}),this.apply(n,(0,r.b)({type:"replaceText"},i))},e.rangeToPosition=function(t){var e=t.start,n=t.end,t=this.rangePointToOffset(e),n=this.rangePointToOffset(n);return null===t||null===n?null:{start:t,len:n-t,zoneId:e.zoneId}},e.rangePointToOffset=function(t){var e=t.zoneId,n=t.line,t=t.offset,e=this.getZoneState(e);return e?e.pointToOffset({line:n,offset:t}):null},e.setInlineStyleOverride=function(t,e,n){this._setInlineStyleOverride(t,e,n)},e._setInlineStyleOverride=function(t,e,n){var r=t.zoneId,t=t.start,r=this.Nt[r]=this.Nt[r]||{};r[t]=r[t]||{},r[t][e]=n},e.getInlineStyleOverride=function(t,e){if(t){var n=t.zoneId,r=t.start;return e?null===(t=null===(t=this.Nt[n])||void 0===t?void 0:t[r])||void 0===t?void 0:t[e]:(null===(n=this.Nt[n])||void 0===n?void 0:n[r])||{}}return this.Nt},e.clearInlineStyleOverride=function(t){this._clearInlineStyleOverride(t)},e._clearInlineStyleOverride=function(t){var e;t?(e=t.zoneId,t=t.start,this.Nt[e]&&delete this.Nt[e][t]):this.Nt={}},e.ie=function(t){var e,n,i,o,a,s,l,u,c,d,f=this.getInlineStyleOverride()[t.zoneId];if(f){var h=0;try{for(var p=(0,r.c)(t.ops),v=p.next();!v.done;v=p.next()){var g=v.value;if(h+=null!==(d=null!==(u=null!==(l=g.retain)&&void 0!==l?l:g.delete)&&void 0!==u?u:null===(c=g.insert)||void 0===c?void 0:c.length)&&void 0!==d?d:0,g.delete)try{for(var y=(i=void 0,(0,r.c)(Object.keys(f))),m=y.next();!m.done;m=y.next()){var b=m.value;(C=Number(b))<=h&&h-g.delete<C&&delete f[b]}}catch(t){i={error:t}}finally{try{m&&!m.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}try{for(var S=(0,r.c)(Object.entries(f)),E=S.next();!E.done;E=S.next()){var I=(0,r._)(E.value,2),C=I[0],L=I[1],x=t.transform(Number(C));x!==Number(C)&&(f[x]=L,delete f[C])}}catch(t){a={error:t}}finally{try{E&&!E.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}}},e._forceRefresh=function(t,e,n,r){void 0===r&&(r=!0);var i=this.getZoneState(t);if(i){for(var o=i.clone(),a=0;a<e.length;a++){var s=e[a],l=o.getLine(s),u=l.clone();r&&u._refreshKey(),l._node&&(u._node=l._node.cloneNode(!0)),o._splice(s,1,[u])}this.content.set(t,o),this.oe&&this.oe({zoneId:t,lineArr:e,from:n,prevZoneState:i})}},e.toDeltaSet=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var n,i,o=new c.D;try{for(var a=(0,r.c)(this.content.entries()),s=a.next();!s.done;s=a.next()){var l=(0,r._)(s.value,2),u=l[0],d=l[1];o.add(u,d.getContent(t,e))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o},e.isEmpty=function(){var t=this.getZoneState(u.S);return!t||!(1<t.length())&&t.getLine(0).isEmpty()},e.setContent=function(t,e){void 0===e&&(e={});var n,i=new c.D,o=t instanceof c.D?t:new c.D(((n={})[t.zoneId]=t,n));this.getContent().forEach(function(t,e){var n=t.getType()===a.Ak.Content,s=(0,c.C)({zoneId:e,zoneType:t.getType()});s.delete(t.getModelText().length-(n?1:0));var l,t=s,s=(t=o.get(e)?s.concat(o.get(e)):t).ops.length-1;n&&null!==(l=t.ops[s])&&void 0!==l&&l.insert&&(l=t.ops[s].insert).endsWith("\n")&&(s=t.ops.pop(),(l=l.slice(0,-1))&&t.insert(l,(0,r.b)({},null==s?void 0:s.attributes))),i.add(e,t)}),o.forEach(function(t){i.get(t.zoneId)||i.add(t.zoneId,t)}),this.apply(i,e)},e.clear=function(){this._attributes.clear(),this._clearInlineStyleOverride()},e._clearListener=function(){this.zt=function(){},this._errorCbk=void 0,this.Jt=void 0,this.Qt=void 0,this.oe=void 0,this.le=void 0,this._attributes.resetOnErrorCb()},t}(),m=n("159415"),b=function(t){function e(e){var n=t.call(this,e)||this;return n._getInternalZoneEntities=function(t,e,i){void 0===e&&(e=[]);var o=[];return n._zoneManager.getZoneIdsByAttributes(t).reduce(function(t,o){return t.push.apply(t,(0,r.e)(n._getZoneStateEntities(o,e,i))),t},o),o},n._getZoneStateEntities=function(t,e,i){var a=n.getZoneState(t),s=[];return a||(a=new o.I({zoneId:t}).insertEnter(),a=new(n.modulesContainer.get(l.h.ZoneState))(t,a,n.schema)),s.push.apply(s,(0,r.e)(a.getEntities(e,i))),s},n._zoneManager=new m.Y(n),n}(0,r.d)(e,t);var n=e.prototype;return n.init=function(){this._zoneManager.init()},n.create=function(t){return new e(t)},n.getZoneManager=function(){return this._zoneManager},n._clone=function(e,n){return(n=t.prototype._clone.call(this,e,n))._zoneManager.zoneAttrs=Array.from(this._zoneManager.zoneAttrs),n._zoneManager.zoneRules=new Map(this._zoneManager.zoneRules),n},n.addZone=function(t,e,n){var r;return this.content.get(t)?(null!==(r=this._errorCbk)&&void 0!==r&&r.call(this,{message:"[ContentState][addZone] zoneId:"+t+" existed",level:i.W.ERROR}),null):(e=e||new o.I({zoneId:t}).insertEnter(),e=new(this.modulesContainer.get(l.h.ZoneState))(e.zoneId,e,this.schema),this.content.set(t,e),n&&this._zoneManager.update(t,n),e)},n.removeZone=function(t){this._zoneManager.removeZoneId(t);var e=this.getZoneState(t);e&&(e=new o.I({zoneId:t}).delete(e.totalWidth()-1),this.apply(e),this.content.delete(t))},n.apply=function(t,e){var n=this.applyToContentState(t,e=void 0===e?{}:e),t=!(null===(t=e.extra)||void 0===t||!t.initContent);return this._zoneManager._detectZoneChange(n.changes,t),this.triggerChangeCbk((0,r.b)((0,r.b)({},n),{options:e}))},n.slice=function(t,n){var o,a=this,s=t.zoneId,l=n.zoneId;if(s!==l)return null!==(o=this._errorCbk)&&void 0!==o&&o.call(this,{message:"[contentState][slice] start zoneId: "+s+" not equal to end zoneId: "+l,level:i.W.ERROR}),null;if(!(l=this.content.get(s)))return null;var u=new e({apool:this._attributes.toJsonable(),schema:this.schema,modulesContainer:this.modulesContainer}),n=l.slice(t,n);return u.content.set(s,n),"0"===s&&n.getEntities([["aceTable",void 0]]).forEach(function(t){var e=(0,r._)(t.attributes.aceTable.split(" "),2),t=e[0],e=e[1];u.content.set(t,a.getZoneState(t)),u.content.set(e,a.getZoneState(e));var t=a._getRowColIds(t,e),e=t.rowIds,n=t.colIds;e.forEach(function(t){n.forEach(function(e){e="x"+t+"x"+e,u.content.set(e,a.getZoneState(e))})})}),u._zoneManager.init(),u},n.getReplaceTextDelta=function(t){var e=t.sel,n=t.pos,r=t.text,i=t.attributes,a=n.start,t=n.len,n=n.zoneId,t=new o.I({zoneId:n}).retain(a).delete(t);return this.assertPointAfterLineMarker(e.start),this.addLineMarkerAfterEnter({text:r,attributes:i,delta:t}),t},n.getInsertTextDelta=function(t,e,n,r){return void 0===r&&(r={}),e=new o.I({zoneId:t.zoneId}).retain(e),this.assertPointAfterLineMarker(t),this.addLineMarkerAfterEnter({text:n,attributes:r,delta:e}),e},n.addLineMarkerAfterEnter=function(t){var e=t.text,n=t.attributes,r=t.delta,i=e.split(a.K5);return i.forEach(function(t,e){i[e+1]?r.insert(t,n).insertEnter(n).insertLineMarker(n):r.insert(t,n)}),r},n.assertPointAfterLineMarker=function(t){if(this.hasLineMarker(t)&&0===t.offset)throw Error("Cannot insertText at the offset 0 of line,  because there is a lineMarker")},n._getRowColIds=function(t,e){var n,i,o,a,t=this.getZoneState(t),e=this.getZoneState(e);if(!t||!e)return{rowIds:[],colIds:[]};var t=t.getLine(0),e=e.getLine(0),l=[],u=[];if(!t||!e)return{rowIds:l,colIds:u};try{for(var c=(0,r.c)(t),d=c.next();!d.done;d=c.next()){var f=d.value;(v=(0,s.Jg)(f))&&l.push(v)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}try{for(var h=(0,r.c)(e),p=h.next();!p.done;p=h.next()){var v,f=p.value;(v=(0,s.Jg)(f))&&u.push(v)}}catch(t){o={error:t}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}return{rowIds:l,colIds:u}},e}(y)},900428:function(t,e,n){"use strict";n.d(e,{EG:function(){return E},ky:function(){return S},nF:function(){return _},qF:function(){return L},qW:function(){return w},s7:function(){return T},vA:function(){return p},zs:function(){return v}});var r,i=n(862928),o=n(909040),a=n(715641),s=n(471448),l=n(866152),u=n(11622),c=n(884278),d=n(940493),f,h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function p(){var t=[];return t.toMap=function(){return(0,o.A)(this)},t}function v(t){void 0===t&&(t=20);for(var e="",n=0;n<t;n++){var r=Math.floor(Math.random()*h.length);e+=h[r]}return e}function g(t,e,n){var e=t.offsetToPoint(e),r=e.line,i=e.offset,n=t.offsetToPoint(n),o=n.line,a=n.offset,s="";if(r===o)return t.getLine(r).getModelText().slice(i,a);for(var l=r;l<=o;l++){var u=t.getLine(l).getModelText();s+=l===r?u.slice(i):l===o?u.slice(0,a):u}return s}function y(t,e,n){return e=t.offsetToPoint(e),n=t.offsetToPoint(n),t.getEntities({start:e,end:n})}(r=f=f||{})[r.BLOCK=0]="BLOCK",r[r.LMKR=1]="LMKR",r[r.TEXT=2]="TEXT";var m=function(t,e){return S(t.attributes,e)?f.BLOCK:(0,a.eV)(t)?f.LMKR:f.TEXT},b=[[c.cI,c.cI,function(t,e){return!e.startsWith("\n")}],[c.ar,c.cI,c.ar],[function(t){return!t.endsWith("\n")},function(t){return!t.endsWith("\n")},c.ar]];function S(t,e){return void 0===t&&(t={}),Object.keys(t).some(function(n){var r=null===(r=e.get(n))||void 0===r?void 0:r.display;return"string"==typeof r?r===d.v.block:"function"==typeof r&&r(t[n])===d.v.block})}function E(t,e,n,r){if(r instanceof RegExp){if(t.match(r))return!0}else if(r(t,e,n))return!0;return!1}function I(t,e,n,r){var i=Object.keys(t).reduce(function(i,o){return o===e||E(o,t[o],n,r)?i[o]=t[o]:i[o]="",i},{});return t.lmkr&&(i.lmkr=t.lmkr),i}function C(t,e){var n=(0,i.b)({},t);return Object.keys(t).forEach(function(r){t[r]&&!e[r]&&delete n[r]}),n}function L(t,e){if(e)return Object.keys(e).filter(function(t){return e[t]}).find(function(e){var n;return(null===(n=t.get(e))||void 0===n?void 0:n.attributes)||(null===(e=t.get(e))||void 0===e?void 0:e.lineAttributes)})}function x(t,e,n){if(e>=t.ops.length)throw Error("getOpOffsetInDocumentWithCache index overstep");for(var r=e,i=0;0<=r;){if(n.has(r)){i+=n.get(r);break}var o=t.ops[r];(0,s.f)(o)!==l.HP.INSERT&&(i+=(0,s.a)(o)),r--}return i}function w(t,e,n){var r,o,a,c;return a=t,c=e,(r=t,o=e,n.reduce(function(t,e){if(!(e instanceof u.I))return t.concat(e);var n=r.getZoneState(e.zoneId);if(!n&&e.ops.some(function(t){return!t.insert}))throw Error("attempt to apply new ZoneDelta which is invalid");var a=!1,c=e.reduce(function(t,r,u){var c=(0,s.f)(r);return c===l.HP.DELETE?(t.push(r),t):c===l.HP.RETAIN?(a=!1,function(t,e,n,r,o){var a,u=t.ops[n];if(!u.attributes||!S(u.attributes,o))return!1;if(!(e=(a=e).ops[a.ops.length-1]))return!1;if((0,s.f)(e)===l.HP.INSERT)return!e.insert.endsWith("\n");for(var c=t.ops.slice(0,n).filter(function(t){return(0,s.f)(t)!==l.HP.INSERT});c[c.length-1]&&(0,s.f)(c[c.length-1])===l.HP.DELETE;)c.pop();return 0!==c.length&&"\n"!==g(r,(n=c.reduce(function(t,e){return t+(0,s.a)(e)},0))-1,n)&&!(0,i._)(y(r,n-1,n),1)[0].attributes.lmkr}(e,t,u,n,o)&&t.insertEnter(),t.push(r),function t(e,n,r,o,a){var u=e.ops[n],c=e.ops[r];if(!u.attributes||!S(u.attributes,a))return function(t,e,n,r){for(var o=!1,a=e+1;a<t.ops.length;){var u=(0,s.f)(t.ops[a]);if(u===l.HP.INSERT)return!1;if(u===l.HP.RETAIN)break;u===l.HP.DELETE&&(o=!0),a++}if(!o)return!1;var c=t.ops.slice(0,e+1).filter(function(t){return(0,s.f)(t)!==l.HP.INSERT}).reduce(function(t,e){return(0,s.a)(e)+t},0),d=(0,i._)(y(n,c-1,c),1)[0],f=S(d.attributes,r),h=t.ops.slice(0,a).filter(function(t){return(0,s.f)(t)!==l.HP.INSERT}).reduce(function(t,e){return(0,s.a)(e)+t},0),e=(0,i._)(y(n,h,h+1),1)[0],r=S(e.attributes,r);return f?!g(n,h,h+1).startsWith("\n"):r?!d.attributes.lmkr&&!g(n,c-1,c).endsWith("\n"):!(!d.attributes.lmkr||!e.attributes.lmkr)}(e,n,o,a);if(!c)return"\n"!==g(o,d=e.ops.filter(function(t){return(0,s.f)(t)!==l.HP.INSERT}).reduce(function(t,e){return t+(0,s.a)(e)},0),d+1);if((u=(0,s.f)(c))!==l.HP.INSERT)return u!==l.HP.RETAIN?t(e,n,r+1,o,a):"\n"!==g(o,d=e.ops.slice(0,r).filter(function(t){return(0,s.f)(t)!==l.HP.INSERT}).reduce(function(t,e){return t+(0,s.a)(e)},0),d+1);var d,c=c.insert.startsWith("\n"),n=e.ops.slice(0,n+1).filter(function(t){return(0,s.f)(t)!==l.HP.INSERT}).reduce(function(t,e){return t+(0,s.a)(e)},0),n=g(o,n-1,n).endsWith("\n");return!c&&!n}(e,u,u+1,n,o)&&t.insertEnter(),t):(!a&&function t(e,n,r,o,a){var u=e.ops[r],c=e.ops[n];if(c){var d=(0,s.f)(c);return d===l.HP.INSERT?(0,b[m(c,a)][m(u,a)])(c.insert,u.insert):d!==l.HP.RETAIN?t(e,n-1,r,o,a):(e=e.ops.slice(0,n+1).filter(function(t){return(0,s.f)(t)!==l.HP.INSERT}).reduce(function(t,e){return t+(0,s.a)(e)},0),n=(0,i._)(y(o,e-1,e),1)[0],(0,b[n=m({insert:e=g(o,e-1,e),attributes:n.attributes},a)][m(u,a)])(e,u.insert))}return!1}(e,u-1,u,n,o)&&t.insertEnter(),t.push(r),(u=function t(e,n,r,o,a){var u=e.ops[n],c=e.ops[r];if(!c){if(!o)return!1;var d=e.ops.slice().filter(function(t){return(0,s.f)(t)!==l.HP.INSERT}).reduce(function(t,e){return t+(0,s.a)(e)},0),f=(0,i._)(y(o,d,d+1),1)[0],h=g(o,d,d+1),d=m({insert:h,attributes:f.attributes},a);return(0,b[m(u,a)][d])(u.insert,h)}if((f=(0,s.f)(c))===l.HP.INSERT)return(0,b[m(u,a)][m(c,a)])(u.insert,c.insert);if(f!==l.HP.RETAIN)return f===l.HP.DELETE&&t(e,n,r+1,o,a);var e=e.ops.slice(0,r).filter(function(t){return(0,s.f)(t)!==l.HP.INSERT}).reduce(function(t,e){return t+(0,s.a)(e)},0),r=(0,i._)(y(o,e,e+1),1)[0],h=g(o,e,e+1),d=m({insert:h,attributes:r.attributes},a);return(0,b[m(u,a)][d])(u.insert,h)}(e,u,u+1,n,o))&&t.insertEnter(),a=u,t)},e.create({zoneId:e.zoneId}));return t.concat(c)},new s.D)).reduce(function(t,e){if(!(e instanceof u.I))return t.concat(e);var n=a.getZoneState(e.zoneId);if(!n&&e.ops.some(function(t){return!t.insert}))throw Error("attempt to apply new ZoneDelta which is invalid");var r=new Map,o=e.reduce(function(t,o,a){var u=(0,s.f)(o);if(u===l.HP.DELETE||!o.attributes)return t.push(o);var d,f,h=x(e,a-1,r);if(r.set(a-1,h),u===l.HP.RETAIN&&(d=h+(0,s.a)(o),(f=function(t,e,n){for(var r,o,a=[],l=t.offsetToPoint(e).line,u=t.getLine(l)._offsetStart,c=l;c<t.length();c++){var d=t.getLine(c).getOps();try{for(var f=(r=void 0,(0,i.c)(d)),h=f.next();!h.done;h=f.next()){var p,v,g=h.value,y=(0,s.a)(g),m=u+y;if(n<=u)return a;u<=n&&e<m&&(p=Math.max(e-u,0),v=Math.min(y,n-u),a.push({insert:g.insert.slice(p,v),attributes:g.attributes})),u+=y}}catch(t){r={error:t}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}}return a}(n,h,d)).forEach(function(u,h){var p,v,g=(0,i.b)((0,i.b)({},u.attributes),o.attributes),m=L(c,g);if(m&&u.attributes&&null!==(p=c.get(m))&&void 0!==p&&p.attributes&&(_=c.get(m).attributes,g=I(g,m,u.attributes[m],_)),null!=g&&g.lmkr){var b=void 0;if(h<f.length-1)b=f[h+1].attributes;else{for(var S=!1,E=a+1;E<e.ops.length;){var w=e.ops[E];if((0,s.f)(w)!==l.HP.DELETE){var T,S=!0;b=(0,s.f)(w)===l.HP.INSERT?w.attributes:(T=x(e,a,r),r.set(a,T),T=(0,i._)(y(n,T,T+1),1)[0],(0,i.b)((0,i.b)({},T.attributes),w.attributes));break}E++}S||(b=(0,i._)(y(n,d,d+1),1)[0].attributes)}var _=L(c,b);return _&&(A=c.get(_).lineAttributes)&&(g=I(g,_,b[_],A)),t.retain(u.insert.length,C(o.attributes,g))}if(m){var A=c.get(m).lineAttributes;if(0<=h)return t.retain(u.insert.length,C(o.attributes,g));for(var k=t.ops.length-1,M=void 0;0<=k;){var z=(0,s.f)(t.ops[k]);if(z!==l.HP.DELETE){M=z;break}k++}return k<0?t.retain(u.insert.length,C(o.attributes,g)):(h=t.ops[k],M===l.HP.INSERT&&null!==(v=h.attributes)&&void 0!==v&&v.lmkr?A&&(t.ops[k]={insert:h.insert,attributes:I(h.attributes,m,u.attributes[m],A)}):M===l.HP.RETAIN&&h.attributes,t.retain(u.insert.length,C(o.attributes,g)))}return t.retain(u.insert.length,C(o.attributes,g))})),u!==l.HP.INSERT)return t;var p=o.attributes,v=L(c,p);if(v&&null!==(g=c.get(v))&&void 0!==g&&g.attributes&&(p=I(p,v,p[v],c.get(v).attributes)),o.attributes.lmkr){for(var g,m=void 0,b=!1,S=a+1;S<e.ops.length;){var E=e.ops[S];if((0,s.f)(E)!==l.HP.DELETE){b=!0,m=E.attributes;break}S++}b?(u=e.ops[S],(g=(0,s.f)(u))===l.HP.INSERT&&u.attributes&&(m=u.attributes),g===l.HP.RETAIN&&!u.attributes&&n&&(m=(T=(0,i._)(y(n,h,h+1),1)[0]).attributes)):n&&(m=(T=(0,i._)(y(n,h,h+1),1)[0]).attributes),!m||(w=L(c,m))&&(_=c.get(w).lineAttributes)&&(p=I(p,w,m[w],_))}else if(v){for(var w,T,_=c.get(v).lineAttributes,A=t.ops.slice(),k=A.length-1;0<=k;){var M=A[k],z=(0,s.f)(M);if(z===l.HP.RETAIN)break;if(z===l.HP.INSERT&&M.insert&&M.insert.includes("\n")){k=-1;break}k--}0<=k&&!A[k].attributes&&_&&n&&(M=A[k],w=A.slice(0,k+1).filter(function(t){return(0,s.f)(t)!==l.HP.INSERT}).reduce(function(t,e){return t+(0,s.a)(e)},0),(T=(0,i._)(y(n,w-1,w),1)[0]).attributes.lmkr&&(v=I(T.attributes,v,o.attributes[v],_),_=1<M.retain?[{retain:M.retain-1},{retain:1,attributes:v}]:[{retain:1,attributes:v}],(v=t.ops).splice.apply(v,(0,i.e)([k,1],_))))}return t.insert(o.insert,p)},new u.I({zoneId:e.zoneId}));return t.concat(o)},new s.D)}function T(t){return!t.some(function(t){return t._getOps().map(function(t){return"string"==typeof t.insert?t.insert:" "}).join("")!==t.getModelText()})}function _(t){return t.reduce(function(t,e){return e instanceof u.I?(e=e.reduce(function(t,e){if((0,s.f)(e)!==l.HP.INSERT||!e.insert)return t.push(e);var n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n").replace(/\t/g," ".repeat(8)).replace(/[\x00-\x08\x0b\x0c\x0e-\x1f\x7f]/g,"");return n===e.insert?t.push(e):t.push((0,i.b)((0,i.b)({},e),{insert:n}))},new u.I({zoneId:e.zoneId})),t.concat(e)):t.concat(e)},new s.D)}},69714:function(t,e,n){"use strict";n.d(e,{i:function(){return b}});var r=n("862928");n("601325");var i=n("524007"),o=n("63643"),a=n("471448"),s=n("55582"),l=n("900428"),u=n("910893"),c=n("233230"),d=n("423031"),f=function(){function t(t,e,n){var r=this;this.lines=[],this.parent=null,this._node=null,this.placeholder="",this.ue="",this.ce=[],this.instance=null,this.k=new Map,this.zoneId=t,this.schema=null!=n?n:new u.V({}),this._content=e.create({zoneId:t,ops:e.ops}),this.lines=[],this._content.eachLine(function(e){e=new c.V(e,r),r.lines.push(e),r.ce.push(e.length()),t===i.S&&(r.ue+=e.getModelText())}),this.he(),this.type=e.zoneType}var e=t.prototype;return t.register=function(e,n){t.mutators[e]=n},e.he=function(){var t=this,e=0;this.lines.forEach(function(n,r){var i=e+n.length();n._setOffset(e,i),n._setIndex(r),n.parent=t,e=i})},Object.defineProperty(e,"allText",{get:function(){return this.getModelText()},enumerable:!1,configurable:!0}),e.getStatus=function(t){return!!this.k.get(t)},e.setDangerousInput=function(t){this.k.set("dangerousInput",t)},e.getContainer=function(){return this._node},e.getModelText=function(){return this.lines.reduce(function(t,e){return t+e.getModelText()},"")},e.getNode=function(){return this._node?Array.from(this._node.childNodes).filter(function(t){return!(t instanceof Element&&t.getAttribute(s.Q0))}):null},e.setNode=function(t){this._node=t},e._updateAllText=function(t,e,n){var i=[];n.forEach(function(t){i.push(t.length())}),(o=this.ce).splice.apply(o,(0,r.e)([t,e.length],i));var o=this.ce.slice(0,t).reduce(function(t,e){return t+e},0),t=n.reduce(function(t,e){return t+e.getModelText()},""),n=e.reduce(function(t,e){return t+e.getModelText()},""),e=n.length;n!==t&&(e=this.ue.slice(o+e),this.ue=this.ue.slice(0,o)+t+e)},e.getType=function(){return this.type},e.slice=function(t,e){for(var n=t.line,r=t.offset,o=e.line,a=e.offset,s=this.cloneEmptyState(),l=n;l<=o;l++){var u=this.lines[l],c=n===o?u.slice(r,a):l===n?u.slice(r,u.length()):l===o?u.slice(0,a):u.slice(0,u.length());s._content=s._content.concat(c._getDelta()),s.zoneId===i.S&&(s.ue+=c.getModelText()),s.ce.push(c.length()),s._node=this._node,s.lines.push(c)}return s.he(),s},e._splice=function(t,e,n){var i;(i=this.lines).splice.apply(i,(0,r.e)([t,e],n))},e.clone=function(){var t=this.cloneEmptyState();t.ue=this.ue,t.instance=this.instance,t.parent=this.parent;for(var e=0,n=this.lines.length;e<n;e++)t.lines.push(this.lines[e].clone());return t},e.getLine=function(t){return this.lines[t]||null},e.getLineIndexOfKey=function(t){for(var e=0,n=this.lines.length;e<n;e++)if(t===this.lines[e].getKey())return e;return -1},e.getLineByKey=function(t){var e,n;try{for(var i=(0,r.c)(this.lines),o=i.next();!o.done;o=i.next()){var a=o.value;if(t===a.getKey())return a}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return null},e.getItemByIndex=function(t){return this.lines[t]||null},e.getEntities=function(t,e,n){var i=[];if(t instanceof Array)for(var o=0;o<this.length();o++)(a=this.getLine(o))&&i.push.apply(i,(0,r.e)(a.getEntities(t,e,n)));else{t instanceof Function&&(e=t,t={start:{line:0,offset:0},end:{line:u=this.length()-1,offset:this.getLine(u).length()}});for(var a,s,l,u=t.start,c=u.line,d=u.offset,u=t.end,f=u.line,h=u.offset,o=c;o<=f;o++)(a=this.getLine(o))&&(s=o===c?d:0,l=o===f?h:a.length(),i.push.apply(i,(0,r.e)(a.getEntities({start:s,end:l},e,n))))}return i},e.getAttributes=function(t,e){var n,i,o,a,e=this.getEntities({start:t,end:e},void 0,this._getInternalZoneEntities),s=(0,l.vA)();if(!e||!e.length)return s;try{for(var u=(0,r.c)(e),c=u.next();!c.done;c=u.next()){var d=c.value.attributes;if(d)try{for(var f=(o=void 0,(0,r.c)(Object.entries(d))),h=f.next();!h.done;h=f.next()){var p=(0,r._)(h.value,2),v=p[0],g=p[1];s.push([v,String(g)])}}catch(t){o={error:t}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return s},e.length=function(){return this.lines.length},e.getZoneId=function(){return this._content.zoneId},Object.defineProperty(e,"content",{get:function(){return this.ae()},enumerable:!1,configurable:!0}),e.ae=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=this._content,i=n.zoneId,n=n.zoneType,o=this._content.create({zoneId:i,zoneType:n,ops:[]});return this.lines.forEach(function(n,i){var n=n._getOps(),s=n.length;n.forEach(function(n,l){var u,c;t&&(0,a.d)(n)&&(0===l&&0!==i||l===s-1)?o.insert(n.insert,n.attributes):e?(l=(0,r.b)({},n),(u=n.attributes)&&(c={},Object.keys(u).forEach(function(t){t.startsWith("clientside-")||(c[t]=u[t])}),l.attributes=c),o.ops.push(l)):o.ops.push(n)})}),o},e.getContent=function(t,e){return this.ae(t=void 0!==t&&t,e=void 0!==e&&e)},e.getViewContent=function(){return this.ae()},e.getState=function(){return this.lines},e.isEmpty=function(){var t;return!(1!==this.length()||null===(t=this.getLine(0))||void 0===t||!t.isEmpty())},e.apply=function(e,n){var a=this,s=this.lines.slice(0),l=e.zoneType,u=t.mutators[l];if(!u)throw Error("can not find zoneType of "+l+", you need call ZoneState.register("+l+") before apply");var c=this.cloneEmptyState();c.ue=this.ue,c.ce=(0,r.e)(this.ce);var d=new u({getParent:function(){return a},getZoneId:function(){return a.getZoneId()},getZoneType:function(){return l},splice:function(t,e,o){var a=s.slice(t,t+e);s.splice.apply(s,(0,r.e)([t,e],o)),c.zoneId===i.S&&c._updateAllText(t,a,o),n(t,a,o)},length:function(){return s.length},get:function(t){return s[t]},map:function(t){return s.map(function(e,n,r){return t(e,n,r)})}});return e.forEach(function(t){t.delete?d.delete(t.delete):t.retain?d.retain(t.retain,t.attributes):t.insert&&("string"==typeof t.insert&&(t.insert=(0,o.$)(t.insert)),d.insert(t.insert,t.attributes))}),d.close(),c.lines=s,c._node=this._node,c.instance=this.instance,c.he(),c.parent=this.parent,c.k=new Map(this.k),c},e.cloneEmptyState=function(){var e=this._content.create({zoneType:this.type,zoneId:this.zoneId}),e=new t(this.getZoneId(),e);return e.type=this.type,e.zoneId=this.zoneId,e._node=this._node,e.instance=this.instance,e.placeholder=this.placeholder,e.k=new Map(this.k),e},e[Symbol.iterator]=function(){return this.lines.values()},e.setPlaceholder=function(t){this.placeholder=t},e._setLine=function(t,e){this.lines[t]=e},e._setParent=function(t){this.parent=t},e._getZoneDelta=function(){return this.content},e._indexOf=function(t){return t?t.index:0},e.pointToOffset=function(t){var e=t.line,t=t.offset,e=this.getLine(e);return e?e._offsetStart+t:null},e.offsetToPoint=function(t){var e=function t(e,n,r,i){var o=Math.floor((n+r)/2);return r<n||!i.length||e>i[i.length-1]._offsetEnd||e<0?null:e>=i[o]._offsetStart&&e<=i[o]._offsetEnd?o:e>i[o]._offsetEnd?t(e,o,r,i):e<i[o]._offsetStart?t(e,n,o,i):null}(t,0,this.lines.length,this.lines),n=this.zoneId;if(null===e)return{zoneId:n,line:0,offset:0};var r=this.lines[e];return t===r._offsetEnd&&e!==this.lines.length-1?{zoneId:n,line:e+1,offset:0}:{zoneId:n,line:e,offset:t-r._offsetStart}},e.totalWidth=function(){return this.lines.reduce(function(t,e){return t+e.length()},0)},t.mutators={},t}();f.register("Z",d.$);var h=n("479607"),p=n("866152");n("750343");var v=function(t){function e(e){var n=t.call(this)||this;n.ops=[];var r=e.zoneId,i=e.ops,o=e.zoneType;return n.zoneId=r,n.zoneType=o,i&&i.length>0&&(n.ops=i),n}(0,h.c)(e,t);var n=e.prototype;return n.insert=function(e,n){return e?t.prototype.insert.call(this,{id:e},n,!1):this},n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},e}(a.B),g=function(t){function e(e){return t.call(this,(0,h.a)({zoneType:p.Ak.Row},e))||this}return(0,h.c)(e,t),e}(v),y=function(t){function e(e){return t.call(this,(0,h.a)({zoneType:p.Ak.Column},e))||this}return(0,h.c)(e,t),e}(v);a.B.registerCreator(p.Ak.Row,g),a.B.registerCreator(p.Ak.Column,y);var m=function(){function t(t){this.ee=0,this.te=t}var e=t.prototype;return e.insert=function(t,e){var n=t,t=(t=this.te.get(0))||new c.V(this.ne(),this.te.getParent()),e=this.ne().retain(this.ee).insert(n.id,e),e=t.compose(e);this.te.splice(0,1,[e]),this.ee+=(0,a.a)({insert:n})},e.retain=function(t,e){e&&(e=this.ne().retain(this.ee).retain(t,e),e=this.te.get(0).compose(e),this.te.splice(0,1,[e])),this.ee+=t},e.delete=function(t){var e=this.ne(),t=this.te.get(0).compose(e.retain(this.ee).delete(t));this.te.splice(0,1,[t])},e.ne=function(){return new("R"===this.te.getZoneType()?g:y)({zoneId:this.te.getZoneId()})},e.close=function(){},t}(),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.d)(e,t),e.prototype.cloneEmptyState=function(){var t=this._content.create({zoneType:this.type,zoneId:this.zoneId}),t=new e(this.getZoneId(),t,this.schema);return t.type=this.type,t.zoneId=this.zoneId,t._node=this._node,t.placeholder=this.placeholder,t},e}(f);b.register("R",m),b.register("C",m)},422849:function(t,e,n){"use strict";n.d(e,{Dd:function(){return o},GL:function(){return l},Xm:function(){return s},zQ:function(){return a}});var r=n(433500),i,o=0,a=1,s={left:void 0,top:void 0},l=((i={})[r.r.SELECTION_CHANGE]={onlyScrollWhenCollapsed:!0},i)},762152:function(t,e,n){"use strict";function r(t){if(t instanceof Window)return{top:0,left:0,clientWidth:window.innerWidth,clientHeight:window.innerHeight,scrollTop:t.scrollY,scrollLeft:t.scrollX};if(t instanceof Element){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}}return{top:0,left:0,clientHeight:0,clientWidth:0,scrollLeft:0,scrollTop:0}}function i(t){return"number"==typeof t?{paddingBottom:t,paddingLeft:t,paddingRight:t,paddingTop:t}:{paddingBottom:t.bottom||0,paddingTop:t.top||0,paddingLeft:t.left||0,paddingRight:t.right||0}}function o(t){return 0!==t.height||0!==t.top||0!==t.left||0!==t.right||0!==t.left}function a(t){return t.left||t.top}n.d(e,{AS:function(){return i},Fl:function(){return o},Yz:function(){return a},re:function(){return r}})},692859:function(t,e,n){"use strict";n.d(e,{$l:function(){return s},j0:function(){return d},zq:function(){return l}});var r=n(862928),i=n(564981),o=n(539725),a=n(433500),s="undo",l="redo",u=function(t){var e=t.id,n=t.type,r=t.deltaSet,t=t.selection;this.id=e,this.type=n,this.deltaSet=r,this.selection=t};function c(){}c.prototype=Object.create(Array.prototype,{clear:{value:function(){this.splice(0,this.length)}},getNthFromTop:{value:function(t){return null!==(t=this[this.length-1-(t=void 0===t?0:t)])&&void 0!==t?t:null}},getNthFromBottom:{value:function(t){return null!==(t=this[t=void 0===t?0:t])&&void 0!==t?t:null}}}),c.prototype.constructor=c;var d=function(){function t(t){this.name="undoModule",this.Oe=(0,i.D)(6),this.De=null,this.Ce=new c,this.Ne=new c,this.ke=[],this.Re=!1,this.Ae=null,this.s=t,this.Ue(),this.xe()}var e=t.prototype;return e.xe=function(){var t=this,e=this.s;e.registerCommand(s,function(){t.undo()}),e.registerCommand(l,function(){t.redo()})},e.Ue=function(){this.s.on(a.r.CONTENT_WILL_CHANGE,this.handleContentWillChange),this.s.on(a.r.CONTENT_CHANGE,this.handleContentChange),this.s.on(a.r.INPUT,this.handleInputEvent,100)},e.He=function(){this.s.off(a.r.CONTENT_WILL_CHANGE,this.handleContentWillChange),this.s.off(a.r.CONTENT_CHANGE,this.handleContentChange),this.s.off(a.r.INPUT,this.handleInputEvent)},e.handleInputEvent=function(t){var e=!1;"historyUndo"===t.nativeEvent.inputType?(this.undo(),e=!0):"historyRedo"===t.nativeEvent.inputType&&(this.redo(),e=!0),e&&(t.preventDefault(),t.stopEvent())},e.Be=function(){var t=this.s.getContentState().contentApplyRuntime;return!!t.atRuntime&&[s,l].includes(t=t.runtimeStack[0].type)},Object.defineProperty(e,"inBatching",{get:function(){return 0<this.ke.length},enumerable:!1,configurable:!0}),e.handleContentWillChange=function(){this.Ae=this.s.selection.getSelection()},e.handleContentChange=function(t){var e=t.previous,n=t.deltaSet,i=t.options,t=i.nonundoable,i=i.type;if(this.Be())return(i=(i===s?this.Ne:this.Ce).getNthFromTop(0))?void(i.selection=this.Ae):void 0;t?this.Te(n):(t=this.s.getContentState().contentApplyRuntime,this.Fe(n,e.toDeltaSet(),(0,r.b)((0,r.b)({},t.currentRuntime),{selection:this.Ae})))},e.Le=function(){this.inBatching&&this.We(this.ke[this.ke.length-1]);var t=this.Ce.getNthFromTop(0);this.ke.push((null==t?void 0:t.id)||null)},e.Ke=function(){var t;this.inBatching&&(t=this.ke.pop(),this.We(t),this.inBatching&&(this.ke.pop(),this.Le()))},e.We=function(t){var e=(0,r._)(t?this.ze(t):[-1],1)[0];void 0!==e&&((t=this.Ce.slice(e+1)).length&&this.Re&&(this.Re=!1,null!==(e=this.De)&&void 0!==e&&e.do(this.Oe)),1<t.length&&this.mergeRecords.apply(this,(0,r.e)(t)))},e.Fe=function(t,e,n){var r=n.id,i=n.type,n=n.selection,e=t.invert(e);this.Ce.push(new u({id:r,type:i,deltaSet:e,selection:n})),this.Ne.clear(),this.inBatching?this.Re=!0:null!==(n=this.De)&&void 0!==n&&n.do(this.Oe)},e.Te=function(t){this.Ge(this.Ce,t),this.Ge(this.Ne,t)},e.Ge=function(t,e){for(var n=t.length-1;0<=n;n--){var r=t[n].deltaSet;t[n].deltaSet=e.transform(r),e=r.transform(e)}},e.Je=function(t,e,n){var i;t.length&&(i=t.pop(),t=this.s.getContentState().toDeltaSet(),t=i.deltaSet.invert(t),e.push(new u((0,r.b)((0,r.b)({},i),{deltaSet:t}))),this.s.getContentState().apply(i.deltaSet,n),this.s.selection.setSelection(i.selection))},e.performUndo=function(){this.Je(this.Ce,this.Ne,{type:"undo"})},e.performRedo=function(){this.Je(this.Ne,this.Ce,{type:"redo"})},e.ze=function(t){var e,n;try{for(var i=(0,r.c)(this.Ce.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r._)(o.value,2),s=a[0],l=a[1];if(l.id===t)return[s,l]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return[]},e.Qe=function(t,e){var n=t.id,i=t.type,o=e.id,t=(0,r._)(this.ze(n),2),a=t[0],e=t[1],t=(0,r._)(this.ze(o),2),o=t[0],t=t[1];if(e&&t&&void 0!==a&&void 0!==o){var s=t.deltaSet,t=e.deltaSet;if(a<o)for(var l=o-1;a<l;l--)s=this.Ce.getNthFromBottom(l).deltaSet.transform(s);else for(l=o+1;l<a;l++)s=this.Ce.getNthFromBottom(l).deltaSet.transform(s);t=s.compose(t),this.Ce.splice(a,1,new u({id:n,type:i,deltaSet:t,selection:e.selection})),this.Ce.splice(o,1)}},e.batchedUndo=function(t){this.Le(),t(),this.Ke()},e.setUndoDispatcher=function(t,e){this.De=t,null!=e&&e.id&&(this.Oe=null==e?void 0:e.id),this.De.register((0,r.b)({id:this.Oe,undo:this.performUndo,redo:this.performRedo},e))},e.undo=function(){this.De?this.De.undo():this.performUndo()},e.redo=function(){this.De?this.De.redo():this.performRedo()},e.mergeRecords=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{for(var n=t.length-1;0<n;n--)this.Qe(t[n-1],t[n])}catch(t){this.s.log("mergeRecords failed",t.stack)}},Object.defineProperty(e,"undoable",{get:function(){return 0<this.Ce.length},enumerable:!1,configurable:!0}),Object.defineProperty(e,"redoable",{get:function(){return 0<this.Ne.length},enumerable:!1,configurable:!0}),e.markNonundoable=function(t){var e=(0,r._)(this.ze(t.id),1)[0];void 0!==e&&(t=(0,r._)(this.Ce.splice(e,1),1)[0].deltaSet.invert(this.s.getContentState().toDeltaSet()),this.Ge(this.Ce.slice(0,e),t))},e.getNthUndoRecordFromTop=function(t){return this.Ce.getNthFromTop(t=void 0===t?0:t)},e.getNthUndoRecordFromBottom=function(t){return this.Ce.getNthFromBottom(t=void 0===t?0:t)},e.getNthRedoRecordFromTop=function(t){return this.Ne.getNthFromTop(t=void 0===t?0:t)},e.getNthredoRecordFromBottom=function(t){return this.Ne.getNthFromBottom(t=void 0===t?0:t)},e.clearUndoStack=function(){this.Ce.clear()},e.clearRedoStack=function(){this.Ne.clear()},e.clear=function(){this.clearRedoStack(),this.clearUndoStack()},e.destroy=function(){var t;this.He(),null!==(t=this.De)&&void 0!==t&&t.unregister(this.Oe)},(0,r.a)([o.W],t.prototype,"handleInputEvent",null),(0,r.a)([o.W],t.prototype,"handleContentWillChange",null),(0,r.a)([o.W],t.prototype,"handleContentChange",null),(0,r.a)([o.W],t.prototype,"performUndo",null),(0,r.a)([o.W],t.prototype,"performRedo",null),(0,r.a)([o.W],t.prototype,"batchedUndo",null),t}()},967358:function(t,e,n){"use strict";n.d(e,{X:function(){return r}});var r=function(){function t(){this.undoable=!1,this.redoable=!1}var e=t.prototype;return e.setUndoDispatcher=function(t,e){},e.getNthUndoRecordFromTop=function(t){return null},e.batchedUndo=function(t){t()},e.undo=function(){},e.redo=function(){},e.mergeRecords=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},e.clear=function(){},e.destroy=function(){},t}()},830025:function(t,e,n){"use strict";n.d(e,{Q$:function(){return d},gv:function(){return l},iI:function(){return u}});var r=n("862928"),i=n("866152"),o=n("55582"),a=["render","renderLine","renderWrapper","renderInlineWrapper"],s="priority";function l(t){return function(e,n,r){return e[n+"_"+s]=t,r}}function u(t,e){return(0,r.e)(t).sort(function(t,n){return c(t,e)-c(n,e)})}function c(t,e){return"number"==typeof t[e+"_"+s]?t[e+"_"+s]:1e3}var d=function(){function t(t,e){var n=this;void 0===e&&(e={}),this.s=t,this.Or=[],this.Ir=new Map,this.Ar=new Map,this.Yr=new Map,this.Nr=new Map,this.Tr=new Map;var r=e.registerPlugin,e=e.plugins;r?r(t).forEach(function(t){return n.register(t)}):this._registerV2(e||[])}var e=t.prototype;return e.Zr=function(t,e){var n=null!==(n=this.Yr.get(e=void 0===e?"all":e))&&void 0!==n?n:new Set;n.add(t),this.Yr.set(e,n)},e.Kr=function(t,e){var n=this.Yr.get(e=void 0===e?"all":e);n&&(n.delete(t),this.Yr.set(e,n))},e._resetPluginConstructorToZoneMap=function(t){this.Yr.delete(t=void 0===t?"all":t)},e.isPluginInZone=function(t,e){return(null===(e=this.Yr.get(e))||void 0===e?void 0:e.has(t.constructor))||(null===(e=this.Yr.get("all"))||void 0===e?void 0:e.has(t.constructor))},e.register=function(t,e){if(Array.isArray(t)){var n=(0,r._)(t,2),i=n[0],n=n[1];if(this.Zr(i,e),this.Tr.has(i))return;t=new i(n)}else if(i=t.constructor,this.Zr(i,e),this.Tr.has(i))return;this.Br(t)},e._registerV2=function(t,e){var n,s,l,u,c=this,d=this.Nr.get(e=void 0===e?"all":e)||[];if(d!==t){this.Nr.set(e,t);var f,h,p=(f=d,{added:(h=t).filter(function(t){var e=(0,r._)(t,1)[0];return!f.some(function(t){return e===(t=(0,r._)(t,1)[0])})}),removed:f.filter(function(t){var e=(0,r._)(t,1)[0];return!h.some(function(t){return e===(t=(0,r._)(t,1)[0])})})}),d=p.added,t=p.removed;if(0!==d.length||0!==t.length){p=this.Wr(d,e),d=this.zr(t,e),this.Fr(d,e),this.Ar.clear();var v=new Set;if("all"===e)v=new Set(t=(0,r.e)(this.s.getContentState().getContent().values()).filter(function(t){return t.getType()===i.Ak.Content}).filter(function(t){return t.instance}));else{if(!(S=this.s.getContentState().getZoneState(e)))return void this.s.error({message:"cannot find zoneState with zoneId: "+e,level:o.WV.ERROR});S.instance&&v.add(S)}if(0!==v.size){var g=function(t,e){var n,i,o,s,l=t.filter(function(t){return a.some(function(e){return t[e]})}),u=e.filter(function(t){return a.some(function(e){return t[e]})}),c=[];try{for(var d=(0,r.c)(l),f=d.next();!f.done&&"break"!==function(t){var e,n;if(!t.match)return"break";try{for(var i=(e=void 0,(0,r.c)(a)),o=i.next();!o.done&&"break"!==function(e){if(t[e]&&!u.some(function(n){return n[e]===t[e]}))return c.push(t),"break"}(o.value);o=i.next());}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}(f.value);f=d.next());}catch(t){n={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}try{for(var h=(0,r.c)(u),p=h.next();!p.done&&"break"!==function(t){var e,n;if(!t.match)return"break";try{for(var i=(e=void 0,(0,r.c)(a)),o=i.next();!o.done&&"break"!==function(e){if(t[e]&&!l.some(function(n){return n[e]===t[e]}))return c.push(t),"break"}(o.value);o=i.next());}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}(p.value);p=h.next());}catch(t){o={error:t}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}return c}(p,d);if(0!==g.length){this.Ir.clear();var y=new Map;try{for(var m=(0,r.c)(v),b=m.next();!b.done;b=m.next()){var S=b.value;this.Ur(S,v,g,y)}}catch(t){n={error:t}}finally{try{b&&!b.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}var E=[];try{for(var I=(0,r.c)(y),C=I.next();!C.done;C=I.next()){var L=(0,r._)(C.value,2),S=L[0],x=L[1];"all"!==x&&0!==x.length&&E.push({zoneId:S.getZoneId(),lineArr:x})}}catch(t){l={error:t}}finally{try{C&&!C.done&&(u=I.return)&&u.call(I)}finally{if(l)throw l.error}}Promise.resolve().then(function(){var t=c.s.getContentState();E.forEach(function(e){var n=e.zoneId,e=e.lineArr;t._forceRefresh(n,e)})})}}}}},e.Fr=function(t,e){"all"===e&&(t=u(t,"destroy"),this.call("destroy",{},{plugins:t}))},e.Ur=function(t,e,n,r,i){if(void 0===i&&(i=0),!(r.has(t)||100<i)){var o=t.parent,a=null==o?void 0:o.parent;if(a&&e.has(a)&&(this.Ur(t,e,n,r,i+1),"all"===(a=r.get(a))||null!=a&&a.includes(o.index)))return void r.set(t,"all");n=this.Hr(t,n),r.set(t,n)}},e.Wr=function(t,e){var n,i,o=[];try{for(var a=(0,r.c)(t),s=a.next();!s.done;s=a.next()){var l,u=(0,r._)(s.value,2),c=u[0],d=u[1];this.Zr(c,e),this.Tr.has(c)?o.push(this.Tr.get(c)):(l=new c((0,r.b)((0,r.b)({},d||{}),{editor:this.s})),o.push(l),this.Br(l))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o},e.zr=function(t,e){var n,i,a=[];try{for(var s=(0,r.c)(t),l=s.next();!l.done;l=s.next()){var u=(0,r._)(l.value,1)[0];this.Kr(u,e);var c=this.Tr.get(u);c?a.push(c):this.s.error({message:"cannot find plugin instance corresponding to the constructor",level:o.WV.ERROR})}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},e.Gr=function(t){return t={lineState:t,index:t.index},this.s.callAll("_editorLineStateWillRender",t),t.lineState},e.Hr=function(t,e){var n,i,o,a,s=this,t=t.lines.map(function(t){return s.Gr(t)}),l=[];try{for(var u=(0,r.c)(t),c=u.next();!c.done;c=u.next()){var d=c.value;try{for(var f=(o=void 0,(0,r.c)(e)),h=f.next();!h.done;h=f.next()){var p=h.value;if(function(t,e){var n,i,o,a;try{for(var s=(0,r.c)(e),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.insert&&"object"!=typeof u.insert){var c=u.attributes||{};try{for(var d=(o=void 0,(0,r.c)(Object.entries(c))),f=d.next();!f.done;f=d.next()){var h=(0,r._)(f.value,2),p=h[0],v=h[1];if(t.match(p,v,c))return!0}}catch(t){o={error:t}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return!1}(p,d)){l.push(d.index);break}}}catch(t){o={error:t}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return l},e.Br=function(t){this.Ar.clear(),this.Or.push(t),this.Tr.set(t.constructor,t)},e.call=function(t,e,n){var r=this,i=(n=void 0===n?{}:n).cb,a=void 0===i?function(t,e){return t}:i,i=n.zoneId;return(null!==(n=n.plugins)&&void 0!==n?n:this.Jr(t,i)).reduce(function(e,n){var i,s,l,u=n[t];if(u&&"function"==typeof u)try{var c=(null!==(i=e.lineState)&&void 0!==i?i:{}).leaves,d=a(e,u.call(n,e)),f=(null!==(s=d.lineState)&&void 0!==s?s:{}).leaves;return c&&(c!==f||c.length!==f.length)&&r.s.trace.add({extra:{pluginHookName:t,pluginNam:null!==(l=n.name)&&void 0!==l?l:null,leavesMatch:!1}}),d}catch(e){n="Warning: call hook failed. hook: "+t+". plugin: "+n.name,r.s.error({e:e,level:o.WV.ERROR,message:n})}return e},e)},e.Jr=function(t,e){var n=this,r=[];return this.Ar.has(t)?r=this.Ar.get(t):(r=u(this.Or,t),this.Ar.set(t,r)),e?r.filter(function(t){return n.isPluginInZone(t,e)}):r},e.getPlugins=function(t){var e=this;return void 0===t&&(t="all"),this.Or.filter(function(n){return e.isPluginInZone(n,t)})},e._matchPlugin=function(t){var e,n,i,a,s,l=t.attributeKey,u=t.value,c=t.zoneId,d=void 0===c?"all":c,f=t.attributes,c=l+u,t=this.Ir.get(c);if(!t){var h=[];try{for(var p=(0,r.c)(this.Or),v=p.next();!v.done;v=p.next()){var g=v.value;try{null!==(s=g.match)&&void 0!==s&&s.call(g,l,u,f)&&h.push(g)}catch(t){var y="Warning: call hook failed. hook: match. plugin: "+g.name;this.s.error({e:t,level:o.WV.ERROR,message:y})}}}catch(t){e={error:t}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}0<h.length&&(this.Ir.set(c,h),t=h)}if(!t)return null;try{for(var m=(0,r.c)(t),b=m.next();!b.done;b=m.next())if(g=b.value,this.isPluginInZone(g,d))return g}catch(t){i={error:t}}finally{try{b&&!b.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}return null},e.getPlugin=function(t,e){var n,i;try{for(var o=(0,r.c)(this.Or),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.name===t)return!e||this.isPluginInZone(s,e)?s:null}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return null},e.getLineWrapperInfo=function(t){var e,n,i=t.getLineAttributes(),o=[],a=[];try{for(var s=(0,r.c)(i),l=s.next();!l.done;l=s.next()){var u=(0,r._)(l.value,2),c=u[0],d=u[1],f=this._matchPlugin({attributeKey:c,value:d,attributes:i.toMap()});null!=f&&f.renderWrapper&&(o.push(c),a.push(f.renderWrapper({lineState:t})))}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return{hasWrapper:!!o.length,key:o.join("-"),elements:a}},e.destroy=function(){this.call("destroy",{}),this.Or=[],this.Ir.clear(),this.Ar.clear(),this.Yr.clear(),this.Nr.clear(),this.Tr.clear()},t}()},613161:function(t,e,n){"use strict";function r(t,e){return{left:t.left-e.left,right:t.right-e.left,top:t.top-e.top,bottom:t.bottom-e.top}}function i(t,e){var n;void 0!==e.line&&(n=t.length()-1,e.line=Math.max(Math.min(n,e.line),0),void 0!==e.offset&&(t=t.getLine(e.line).getModelText().length-1,e.offset=Math.max(Math.min(t,e.offset),0)))}function o(){return{left:0,right:0,top:0,bottom:0,width:0,height:0}}function a(t){return{left:t.left,top:t.top,bottom:t.bottom,right:t.right,width:t.width,height:t.height}}function s(t,e){return[t.zoneId,t.line,t.offset,e].filter(function(t){return void 0!==t}).join("-")}n.d(e,{BZ:function(){return o},ah:function(){return s},r3:function(){return a},s8:function(){return r},xR:function(){return i}})},910893:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});var r=n(862928),i=function(){function t(t){this.schemas=t}return t.prototype.get=function(t){var e,n;if(this.schemas[t])return this.schemas[t];try{for(var i=(0,r.c)(Object.keys(this.schemas)),o=i.next();!o.done;o=i.next()){var a=o.value;if(new RegExp(a).test(t))return this.schemas[a]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t}()},108728:function(t,e,n){"use strict";n.d(e,{W:function(){return u}});var r=n("862928"),i=n("55582");n("601325");var o=n("739375"),a=n("383496"),s=n("524007"),l=function(){function t(t){var e=t.line,n=t.offset,r=t.position,t=t.zoneId,t=void 0===t?s.S:t;this._position=0,this.line=e,this.offset=n,this.zoneId=t,Object.defineProperty(this,"_position",{enumerable:!1,value:r})}return t.prototype[Symbol.toPrimitive]=function(t){return"number"===t?this._position:JSON.stringify({line:this.line,offset:this.offset,zoneId:this.zoneId})},t}(),u=function(){function t(t){var e=t.editor,n=t.start,r=t.end,i=t.isBackward,i=void 0!==i&&i,t=t.state;this.editor=e,n=this.createRangePoint(n,!1,t),t=(r=this.createRangePoint(r,!1,t))<n,this.start=t?r:n,this.end=t?n:r,this.isBackward=t||i,Object.defineProperties(this,{editor:{enumerable:!1},_start:{enumerable:!1},_end:{enumerable:!1},start:{enumerable:!0,get:function(){return this._start},set:function(t){this._start=t}},end:{enumerable:!0,get:function(){return this._end},set:function(t){this._end=t}}})}var e=t.prototype;return t.isRange=function(e){return e instanceof t},t.isPointEqual=function(t,e){var n=t.line,r=t.offset,i=t.zoneId,o=e.line,t=e.offset,e=e.zoneId;return n===o&&r===t&&i===e},t.isRangeEqual=function(e,n){var r=e.start,i=e.end,e=n.start,n=n.end;return t.isPointEqual(r,e)&&t.isPointEqual(i,n)},t.isRangesEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++){var i=t[n],o=e[n];if(!o||!this.isRangeEqual(i,o))return!1}return!0},t.isPointLargerThan=function(t,e){var n=t.line,r=t.offset,i=t.zoneId,o=e.line,t=e.offset;return i===e.zoneId&&(o<n||n===o&&t<r)},Object.defineProperty(e,"start",{get:function(){return this._start},set:function(t){this._start=this.createRangePoint(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"end",{get:function(){return this._end},set:function(t){this._end=this.createRangePoint(t)},enumerable:!1,configurable:!0}),e.create=function(e){return new t(e)},e.createRangePoint=function(t,e,n){return!(e=void 0!==e&&e)&&t instanceof l?t:(e=n||this.editor.getContentState(),n=null,"rangePointToOffset"in e?n=e.rangePointToOffset(t):"pointToOffset"in e&&(n=e.pointToOffset(t)),null===n?(this.editor.error({message:"point: "+t+" can't parse to position",level:i.WV.ERROR}),new l((0,r.b)((0,r.b)({},t),{position:-1}))):new l((0,r.b)((0,r.b)({},t),{position:n})))},e.toPosition=function(t){var e=t||this.editor.getContentState(),n=null,t=null;return"rangePointToOffset"in e?(n=e.rangePointToOffset(this.start),t=e.rangePointToOffset(this.end)):"pointToOffset"in e&&(n=e.pointToOffset(this.start),t=e.pointToOffset(this.end)),null===n||null===t?(this.editor.error({message:"startOffset: "+n+", endOffset: "+t,level:i.WV.ERROR}),new a.L({editor:this.editor,start:-1,len:0,zoneId:this.start.zoneId,isBackward:this.isBackward})):new a.L({editor:this.editor,start:n,len:t-n,zoneId:this.start.zoneId,isBackward:this.isBackward})},e.isCollapsed=function(){return t.isPointEqual(this.start,this.end)},e.clone=function(t){return new(this.editor.modulesContainer.get(o.h.Range))({editor:this.editor,start:this.createRangePoint(this.start,!0,t),end:this.createRangePoint(this.end,!0,t),isBackward:this.isBackward})},e.toString=function(){return JSON.stringify(this)},t}()},383496:function(t,e,n){"use strict";n.d(e,{L:function(){return a}});var r=n(862928),i=n(524007),o=n(739375),a=function(){function t(t){var e=t.start,n=t.len,r=t.zoneId,o=void 0===r?i.S:r,r=t.isBackward,r=void 0!==r&&r,t=t.editor;this.start=e,this.len=n,this.zoneId=o,this.isBackward=r,this.editor=t,Object.defineProperty(this,"editor",{enumerable:!1})}var e=t.prototype;return t.isPosition=function(e){return e instanceof t},e.toRange=function(t){var e=this,n=e.editor,i=e.start,a=e.len,s=e.zoneId,e=(t||n.getContentState()).getZoneState(s),t=e.offsetToPoint(i),a=e.offsetToPoint(i+a);return new(this.editor.modulesContainer.get(o.h.Range))({editor:n,start:(0,r.b)((0,r.b)({},t),{zoneId:s}),end:(0,r.b)((0,r.b)({},a),{zoneId:s})})},e.isCollapsed=function(){return 0===this.len},t}()},523911:function(t,e,n){"use strict";n.d(e,{Y:function(){return y}});var r=n("862928"),i=n("944288"),o=n("524007"),a=n("353340"),s=n("539725"),l=n("55582"),u=n("414818"),c=n("433500");n("601325");function d(t,e){e=function(t,e){void 0===e&&(e=!1);var t=t.parentElement,n=[],r=document.scrollingElement||document.documentElement;!e&&t&&(r=t);for(var i=t;i&&i!==r;)(i.offsetHeight<i.scrollHeight||i.offsetWidth<i.scrollWidth)&&n.push([i,i.scrollTop,i.scrollLeft]),i=i.parentElement;return n.push([r,r.scrollTop,r.scrollLeft]),n}(t,e=void 0!==e&&e),t.focus({preventScroll:!0}),function(t){for(var e=0;e<t.length;e++)t[e][0].scrollTop=t[e][1],t[e][0].scrollLeft=t[e][2];t=[]}(e)}var f=n("150505"),h=n("739375"),p=n("604006"),v=n("383496"),g=n("108728"),y=function(){function t(t){var e=t.editor,t=t.range;this.fn=[],this.Sn=[],this.En=0,this.bn=null,this.s=e,t&&(this.fn.push(t),this.Sn.push(t))}var e=t.prototype;return Object.defineProperty(e,"range",{get:function(){return this.fn[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"prevRange",{get:function(){return this.Sn[0]},enumerable:!1,configurable:!0}),e.yn=function(t,e){this.En=t,this.bn=e},e.gn=function(){this.yn(0,null)},e.qn=function(t){return t&&(null===(t=this.s.getContentState().getZoneState(t))||void 0===t?void 0:t.getContainer())||null},e.focus=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=null===(i=this.range)||void 0===i?void 0:i.start.zoneId,i=!1;"boolean"==typeof(t=void 0!==t&&t)?(i=t,n=e):(r=t,i=e),!r||!n&&this.hasFocus(r)||(r=this.qn(r))&&(d(r,i),this.setSelection(this.fn,!0))},e.hasFocus=function(t){var e=null!=t?t:null===(e=this.range)||void 0===e?void 0:e.start.zoneId;return!!e&&this.s.isFocus(e)},e.getSelection=function(t,e){var n=this.range;return"string"==typeof t?n=this.fn.find(function(e){return e.start.zoneId===t})||null:e=t,e=e||this.s.getContentState(),n&&e.getZoneState(n.start.zoneId)?n.clone(e):n},e.getMultipleSelection=function(){var t=this;return this.fn.map(function(e){return t.s.getContentState().getZoneState(e.start.zoneId)?e.clone():e})},e.isZoneInSelection=function(t){for(var e=!1,n=0,r=this.fn.length;n<r;++n)if(this.fn[n].start.zoneId===t){e=!0;break}return e},e.Mn=function(t){var e=this.s,n=this.s.modulesContainer.get(h.h.Range),i=null;switch(typeof t.start){case"number":i=new v.L((0,r.b)((0,r.b)({},t),{editor:e})).toRange();break;case"object":i=new n((0,r.b)((0,r.b)({},t),{editor:e}))}return i},e.wn=function(t){return new(this.s.modulesContainer.get(h.h.Range))({editor:this.s,start:this.pn(t.start),end:this.pn(t.end),isBackward:t.isBackward})},e._replaceSingleRangeModel=function(t,e){void 0===e&&(e=!1);var n,r=this.Mn(t);!r||(t=-1===(n=this.fn.findIndex(function(t){return t.start.zoneId===(null==r?void 0:r.start.zoneId)}))?null:this.fn[n])&&(this.Sn=this.fn,!e&&g.W.isRangeEqual(t,r)||(r=this.wn(r),(t=this.fn.slice(0))[n]=r,this.fn=t))},e._setSelectionModel=function(t,e){var n,i,o=this;void 0===e&&(e=!1);var t=Array.isArray(t)?t:[t],a=[];try{for(var s=(0,r.c)(t),l=s.next();!l.done;l=s.next()){var u=l.value,c=this.Mn(u);c&&a.push(c)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.Sn=this.fn,!e&&g.W.isRangesEqual(this.fn,a)||(a=a.map(function(t){return o.wn(t)}),this.fn=a)},e.setSelection=function(t,e){this.s.log({scope:"[Selection][setSelection]",level:"info",shouldLogToMobile:!1,force:e=void 0!==e&&e,sel:t,range:this.fn,stack:Error().stack}),this._setSelectionModel(t),this._dispatchEvent(e),e&&this.updateBrowserSelection()},e._dispatchEvent=function(t){var e=this.fn,n=this.Sn;!t&&g.W.isRangesEqual(n,e)||this.range&&this.s.call(c.r.SELECTION_CHANGE,{previousRanges:n,currentRanges:e,previous:this.prevRange,current:this.range,attributes:this.s.getContentState().getAttributes(this.range.start,this.range.end)})},e.updateBrowserSelection=function(t){if(this.s.log({scope:"[Selection][updateBrowserSelection]",level:"info",shouldLogToMobile:!1,updateDomSelectionTimes:this.En,force:t,ranges:this.fn}),this.range&&!(1<this.fn.length)){var e=this.range.toPosition(),n=this.s.getContentState().getZoneState(e.zoneId),r=u.Xh.safari&&n&&e.len===n.totalWidth()-1-(null!==(r=n.getLine(0))&&void 0!==r&&r.hasLineMarker()?1:0);if(t||!this.s.getStatus("isMouseDown")||r){if(r=this._toDOMRange(this.range)){try{this._updateDOMSelection(r)}catch(t){this.s.error({message:"[Selection][updateBrowserSelection] range:"+this.range+" _updateDOMSelection occur error",level:i.W.ERROR})}this.s.call(c.r.SELECTION_CHANGE_AND_DOM_UPDATE,{selection:this.range})}else this.s.error({message:"[Selection][updateBrowserSelection] range:"+this.range+" _toDOMRange faild",level:i.W.ERROR})}}},e.selectAll=function(t){void 0===t&&(t=o.S);var e,n,r=this.s.getContentState().getZoneState(t);r&&(e=r.getLine(0),(n=r.getLine(r.length()-1))&&e&&(t=new(this.s.modulesContainer.get(h.h.Range))({editor:this.s,start:{line:0,offset:e.hasLineMarker()?1:0,zoneId:t},end:{line:r.length()-1,offset:n.length()-1,zoneId:t}}),this.s.log({scope:"[Selection][selectAll]",level:"info",shouldLogToMobile:!1,range:t,stack:Error().stack}),this.setSelection(t),this.updateBrowserSelection()))},e.isSelectingAll=function(t){void 0===t&&(t=o.S);var e=this.getSelection(t);if(!e)return!1;var n=e.start,r=e.end,i=this.s.getContentState().getZoneState(t);return!!i&&(e=i.length()-1,t=i.getLine(0),!(!(i=i.getLine(e))||!t)&&0===n.line&&n.offset===(t.hasLineMarker()?1:0)&&r.line===e&&r.offset===i.length()-1)},e.pn=function(t){var e=this.s,n=t.zoneId,e=e.getContentState().getZoneState(n);return e?(n=e.length()-1,t.line=Math.max(0,t.line),t.line>n&&(t.line=n,t.offset=e.getLine(n).getModelText().length-1),e=e.getLine(t.line),t.offset=Math.min(e.getModelText().length-1,t.offset),t.offset<=0&&(t.offset=e.hasLineMarker()?1:0),t):t},e._handleDOMSelectionChange=function(){var t,e,n,r,i=window.getSelection();null!==i&&(this.s.log({scope:"[Selection][_handleDOMSelectionChange]",level:"info",shouldLogToMobile:!1,sel:i}),u.Xh.ios&&null===i.focusNode&&this.s.isFocus()&&(this.s.setStopUpdateSelection(!1),this.setSelection(this.getSelection(),!0)),this.s.getStatus("stopUpdateSelection")||(e=(0,p.Zj)(i,0))&&(n=e.startContainer,r=e.endContainer,t=e.collapsed,!(e=this.s.getContainer()).contains(n)||!t&&!e.contains(r)||(0,p.E_)(n)&&(0,p.E_)(r)||(n=this._toModelRange(i))&&(r=!(u.Xh.isAndroid&&!n.isCollapsed()),this.s.getStatus("isMouseDown")||(i=n.toPosition(),this.s.log("[Log]","[Selection][_handleDOMSelectionChange] selection",JSON.stringify({zoneId:i.zoneId,start:i.start,timestamp:Date.now()}))),this.setSelection(n,r))))},e.toDOMRange=function(t,e){return this._toDOMRange(t,e=void 0===e?{ignoreNormalize:!1}:e)},e._toDOMRange=function(t,e){void 0===e&&(e={ignoreNormalize:!1});var n=t.start,r=t.end,n=this.In(n),r=this.In(r);return n.node&&r.node?e.ignoreNormalize?(0,p.XM)(n,r):(t=(r=this.Tn(n,r,t)).start,r=r.end,(0,p.XM)(t,r)):null},e.Tn=function(t,e,n){var i=t.node,o=t.offset,a=e.node,s=e.offset,u=n.start,c=n.end,d=(0,p.E_)(i),f=(0,p.E_)(a),h=(null===(v=(0,p.Ju)(i))||void 0===v?void 0:v.length)||0,v=(null===(g=(0,p.Ju)(a))||void 0===g?void 0:g.length)||0,g=(0,p.x1)(i);if(!d&&!f&&i&&i===a&&t.offset===e.offset&&(b=i instanceof Element?i:i.parentElement)&&b.closest("["+l.q7+"]")){var y={node:b,offset:(null===(y=null==b?void 0:b.textContent)||void 0===y?void 0:y.length)||0};return{start:y,end:y}}if(d&&(0,p.hl)(i)&&i===a&&u<c||d&&0===o&&(0,p.hl)(i)&&f&&s===v&&(0,p.hl)(a))return{start:t,end:e};if(d&&f&&i!==a&&!(0,p.hl)(i)&&!(0,p.hl)(a)){var y=this.Cn(u.zoneId,u.line),m=this.Cn(c.zoneId,c.line);return{start:this.Dn(t,y,1),end:this.Dn(e,m,1)}}if(n.isCollapsed()&&d&&o===h){var b,S=this.Cn(u.zoneId,u.line);return(b=(E=this.Dn(t,S,1)).node instanceof Element?E.node:null===(m=E.node)||void 0===m?void 0:m.parentElement)&&b.closest("["+l.q7+"]")&&(E.offset=1),{start:E,end:E}}if(n.isCollapsed()&&d&&0===o)return S=this.Cn(u.zoneId,u.line),{start:E=this.Dn(t,S,-1),end:E};if(d&&f&&i!==a&&n.isBackward){var E,S=this.Cn(c.zoneId,c.line);return{start:t,end:E=this.Dn(e,S,1)}}return g&&f&&(null==i?void 0:i.nextSibling)===a&&(0,p.iB)(a)&&!this.s.getStatus("isMouseDown")?{start:(0,r.b)((0,r.b)({},e),{offset:0}),end:e}:d&&0===o?(S=this.Cn(u.zoneId,u.line),{start:this.Dn(t,S,-1),end:e}):f&&0===s?(S=this.Cn(c.zoneId,c.line),{start:t,end:this.Dn(e,S,-1)}):d&&o===h&&f&&n.toPosition().len<=((null===(a=(0,p.Ju)(a))||void 0===a?void 0:a.length)||0)?{start:(0,r.b)((0,r.b)({},e),{offset:0}),end:e}:d&&o===h?(S=this.Cn(u.zoneId,u.line),{start:this.Dn(t,S,1),end:e}):f&&s===v?(S=this.Cn(c.zoneId,c.line),{start:t,end:this.Dn(e,S,1)}):{start:t,end:e}},e.Dn=function(t,e,n){var i,o,a=t.node;if(!(e&&a instanceof Element))return t;var s=(0,p.U_)(e),c=s.indexOf(a),c=s[c+n]||a;if(c.hasAttribute(l.eu)){var a=(0,p.iB)(c);return a?{node:a,offset:!(0<n)&&(null===(a=a.textContent)||void 0===a?void 0:a.length)||0}:this.Dn((0,r.b)((0,r.b)({},t),{node:c}),e,1)}return u.Xh.safari&&c.hasAttribute(l.VI)&&null!==(i=c.nextElementSibling)&&void 0!==i&&i.hasAttribute(l.eu)?{node:c,offset:(null===(o=c.textContent)||void 0===o?void 0:o.length)||0}:c.closest("["+l.q7+"]")?u.Xh.safari?{node:c,offset:0}:{node:c,offset:(null===(o=c.textContent)||void 0===o?void 0:o.length)||0}:{node:c,offset:!(0<n)&&(null===(c=c.textContent)||void 0===c?void 0:c.length)||0}},e.In=function(t){var e=t.zoneId,n=t.line,r=t.offset,t=this.Cn(e,n);return t?(n=null===(e=this.s.getContentState().getZoneState(e))||void 0===e?void 0:e.getLine(n))?this.Ln(t,Math.max(r-(null!=n&&n.hasLineMarker()?1:0),0)):{node:null,offset:0}:{node:null,offset:0}},e.Ln=function(t,e){if((0,p.y1)(t))return{node:t,offset:e};if(!t||!t.querySelectorAll)return{node:t,offset:0};var n=(0,p.U_)(t),i=0;try{for(var o=(0,r.c)(n),a=o.next();!a.done;a=o.next()){var s,c,d,f,h,v,g=a.value,y=(null===(d=g.textContent)||void 0===d?void 0:d.length)||0;if(g.hasAttribute(l.eu)&&(y=(v=g.getAttribute(l.eu))?Math.min(v.length,e-i):0),!((i+=y=g.hasAttribute(l.VI)?0:y)<e))return u.Xh.safari&&g.hasAttribute(l.VI)&&null!==(f=g.nextElementSibling)&&void 0!==f&&f.hasAttribute(l.eu)?{node:g,offset:(null===(h=g.textContent)||void 0===h?void 0:h.length)||0}:{node:g,offset:Math.max(y+e-i,0)}}}catch(t){s={error:t}}finally{try{a&&!a.done&&(c=o.return)&&c.call(o)}finally{if(s)throw s.error}}return{node:t,offset:0}},e.Cn=function(t,e){var n,i,a,s,u=this.s._getViewModel(),c=null===(a=this.s.getContentState().getZoneState(t))||void 0===a?void 0:a.getLine(e);if(!c)return null;if(u=u.getView(c))return u;var d=t===o.S?this.s.getContainer():document.querySelector('[data-zone-id="'+t+'"]'),t=Array.from((null==d?void 0:d.querySelectorAll(".ace-line,["+l.Q0+"]"))||[]).filter(function(t){return t.closest("["+l.Ks+"]")===d}),f=0;try{for(var h=(0,r.c)(t),p=h.next();!p.done;p=h.next()){var v=p.value;if(f>c.index)return null;if(f===c.index)return v.hasAttribute(l.Q0)?null:v;var g=(null===(s=v.getAttribute(l.Q0))||void 0===s?void 0:s.split("-").map(function(t){return+t}))||[];g.length?f+=g[1]-g[0]+1:f++}}catch(t){n={error:t}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return null},e.On=function(t){var e=t.start,n=t.end,r=t.isBackward,o=t.zoneId,a=this._toModelRangePoint(e,!1,o),t=this._toModelRangePoint(n,!0,o);if(!a||!t)return this.s.error({message:"[Selection][_calcModelRangeFromDom] startPoint: "+a+", endPoint: "+t,level:i.W.ERROR}),null;if(!o&&a.zoneId!==t.zoneId&&!this.s._isFixToCommonZone)return null;if(o&&a.zoneId!==t.zoneId){if(!(e=this.s.getContentState().getZoneState(o)))return null;if(n=e.length()-1,!(e=e.getLine(n)))return null;o===a.zoneId?t={line:n,offset:e.length()-1,zoneId:o}:o===t.zoneId?a={line:0,offset:0,zoneId:o}:(a={line:0,offset:0,zoneId:o},t={line:n,offset:e.length()-1,zoneId:o})}return new(this.s.modulesContainer.get(h.h.Range))({start:a,end:t,isBackward:r,editor:this.s})},e.toModelRange=function(t,e){return this._toModelRange(t,e)},e._toModelRange=function(t,e){var n=!1;if("selection"===function(t){var e=Object.prototype.toString.call(t);if(e){var n=e.split(" ")[1];if(n)return n.slice(0,-1).toLowerCase()}return""}(t)){var r=t.anchorNode,i=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=(0,p.Zj)(t,0);if(!s)return null;var l=(t=s).startContainer,u=t.startOffset,c=t.endContainer,s=t.endOffset,n=r!==l||o!==c||i!==u||a!==s}return c=t.startContainer,i=t.startOffset,u=t.endContainer,a=t.endOffset,null!=(s=this.On({start:{node:c,offset:i},end:{node:u,offset:a},isBackward:n,zoneId:e}))&&s.isCollapsed()&&!t.collapsed&&(a=(u=this.Tn({node:c,offset:i},{node:u,offset:a},s)).start,u=u.end,s=this.On({start:a,end:u,isBackward:n,zoneId:e})),s},e._toModelRangePoint=function(t,e,n){void 0===e&&(e=!1);var i,o,s,u=(0,p.KK)(t),c=u.node,d=u.offset,u=(0,p.mO)(c);if(!c||!u||!(0,p.Tl)(this.s,u,e)){if(!n)return null;var f=this.s.getContentState().getZoneState(n);if(!f)return null;var h=f.length()-1,v=f.getLine(h);return v?e?{line:h,offset:v.length()-1,zoneId:n}:{line:0,offset:0,zoneId:n}:null}h=(f=(0,p.Tl)(this.s,u,e)).getZoneId(),v=f.index,n=0,(u=c instanceof HTMLElement?(0,p.Ny)(c):(0,p.Ny)(c.parentElement))&&(d=0),u&&e&&(n=(null===(g=u.getAttribute(l.eu))||void 0===g?void 0:g.length)||0);var g=(0,p.qI)(c);if(g&&(n=d=0,u=g),!(u=u||(c instanceof HTMLElement?c.closest("["+l.nV+"]"):null===(y=c.parentElement)||void 0===y?void 0:y.closest("["+l.nV+"]")))){var y=(0,p.fr)(t),t=y?(0,p.MK)(y):0;if(y&&t){var m=Array.from(y.querySelectorAll("["+l.VI+"]"));if(m.length)try{for(var b=(0,r.c)(m),S=b.next();!S.done;S=b.next()){var E=S.value;null!==(s=E.textContent)&&void 0!==s&&s.length&&this.s.log("trace",{zerospacesLength:m.length,domInfo:(0,a.F)(E)})}}catch(t){i={error:t}}finally{try{S&&!S.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}}return{line:v,offset:Math.max(t=t+(f.hasLineMarker()?1:0)+n,0),zoneId:h}}return u.hasAttribute(l.q7)&&(d=0),{line:v,offset:Math.max(f=(u&&(null===(u=this.s._getViewModel().getLeafModel(u))||void 0===u?void 0:u.start)||0)+d+n+(f.hasLineMarker()?1:0),0),zoneId:h}},e._updateDOMSelection=function(t){var e=this,n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,a=document.getSelection();if(this.s.log({scope:"[Selection][_updateDOMSelection]",level:"info",shouldLogToMobile:!1,selection:a,preDomSelection:this.bn,updateDomSelectionTimes:this.En}),this.En>=100&&null!==this.bn&&this.bn===a)return this.En,this.range,100===this.En&&setTimeout(function(){e.gn()},200),void this.En++;if(null!==a){if(null===n||null===i)return a.removeAllRanges(),this.s.getContainer().blur(),void this.gn();this.hasFocus()||(u=this.qn(null===(l=this.range)||void 0===l?void 0:l.start.zoneId))&&d(u);var s,l=(0,p.Zj)(a,0);if(l&&this.Pn(t,l))this.gn();else{if(a.anchorNode!==a.baseNode||a.focusNode!==a.extentNode){var u=(0,p.Yr)(a,l)?{startContainer:a.extentNode,startOffset:a.extentOffset,endContainer:a.baseNode,endOffset:a.baseOffset}:{startContainer:a.baseNode,startOffset:a.baseOffset,endContainer:a.extentNode,endOffset:a.extentOffset};if(this.Pn(t,u))return void this.gn()}this.yn(this.En+1,a),a.collapse&&a.extend?n===i&&r===o?a.collapse(n,r):null!==(s=this.range)&&void 0!==s&&s.isBackward?(a.collapse(i,o),a.extend(n,r)):(a.collapse(n,r),a.extend(i,o)):((s=document.createRange()).setStart(n,r),s.setEnd(i,o),a.removeAllRanges(),a.addRange(s))}}else this.gn()},e.Pn=function(t,e){return t.startContainer===e.startContainer&&t.endContainer===e.endContainer&&t.startOffset===e.startOffset&&t.endOffset===e.endOffset},e.An=function(t,e,n,r){var i=this.Cn(t.zoneId,t.line);if(!i)return 0;var t=e.hasAttribute(l.VI)||e.hasAttribute(l.q7),o=r?null===(o=e.textContent)||void 0===o?void 0:o.slice(n):null===(a=e.textContent)||void 0===a?void 0:a.slice(0,n),a=r?1:-1,n=0;if(o&&o.length&&!t)n=(r?f.X:f.j)(o);else{i=(0,p.U_)(i),e=(0,p.Ny)(e)||e;var e=i.indexOf(e),i=r?i.slice(e+1).find(function(t){return!(0,p.x1)(t)}):i.slice(0,e).reverse().find(function(t){return!(0,p.x1)(t)});if(!i)return a;n=(0,p.Ny)(i)?(null===(e=(0,p.Ju)(i))||void 0===e?void 0:e.length)||1:(i=i.textContent||"",(r?f.X:f.j)(i))}return a*Math.max(n,1)},e.kn=function(t){var e=(0,r.b)({},t),n=t.zoneId,i=t.line,o=t.offset,a=this.s.getContentState().getZoneState(n);if(!a)return t;var s=a.getLine(i);if(!s)return t;var l=s.hasLineMarker()?1:0,u=s.length()-1,n=null===(s=this.s.virtualListManager)||void 0===s?void 0:s.getVirtualListModuleOfZone(n),c=null==n?void 0:n.getInvisibleLinesModule();if(o<l){if(0<i){for(;e.line--,null!=c&&c.isInvisible(e.line););if(!(n=a.getLine(e.line)))return t;e.offset=n.length()-1}else e.offset=l}if(u<o){if(i<a.length()-1){for(;e.line++,null!=c&&c.isInvisible(e.line););e.offset=null!==(a=a.getLine(e.line))&&void 0!==a&&a.hasLineMarker()?1:0}else e.offset=u}return e},e.handleArrowKey=function(t){var e,n,i,o,a,s,c,d,f,v,y,m,b,S,E,I,C,L,x=t.evt,w=x.keyCode,T=x.shiftKey,_=x.metaKey,A=x.altKey,k=x.ctrlKey;"keydown"===x.type&&(e=w===l.VD.Right||u.Xh.isMac&&k&&w===l.VD.F,!(E=w===l.VD.Left||u.Xh.isMac&&k&&w===l.VD.B)&&!e||_||this.s.getStatus("stopUpdateSelection")||1<this.fn.length||null===(b=window.getSelection())||(v=(0,p.Zj)(b,0))&&(y=v.startContainer,n=v.startOffset,m=v.endContainer,i=v.endOffset,o=v.collapsed,s=null==(a=y instanceof Element?y:y.parentElement)?void 0:a.hasAttribute(l.VI),I=(0,p.Eb)(a,n),d=null==(c=m instanceof Element?m:m.parentElement)?void 0:c.hasAttribute(l.VI),f=(0,p.Eb)(m,i),C=(S=this.getSelection()).start,t=S.end,_=S.isBackward,y=null===(v=(b=this.s.getContentState()).getZoneState(C.zoneId))||void 0===v?void 0:v.getLine(C.line),S=null===(m=b.getZoneState(t.zoneId))||void 0===m?void 0:m.getLine(t.line),v=C.offset===((null==y?void 0:y.length())||0)-1,m=C.offset===Number(null==y?void 0:y.hasLineMarker()),y=t.offset===((null==S?void 0:S.length())||0)-1,this.s.log({scope:"[Selection][handleArrowKey]",level:"info",shouldLogToMobile:!1,keyCode:w,selection:this.getSelection(),isStartInZeroSpace:s,isStartInFakeText:I,isEndInZeroSpace:d,isEndInFakeText:f,isStartPointInLineEnd:v,isStartPointInLineStart:m,isEndPointInLineEnd:y}),(d||y||s||v||m||I||f)&&(T&&!k&&_&&(s||v||I)&&a&&(C=this.kn((0,r.b)((0,r.b)({},C),{offset:C.offset+=this.An(C,a,n,e)}))),a&&c&&(T?(w=0===C.offset,m=0===C.line,I=t.offset===((null==S?void 0:S.length())||0)-1,b=t.line===((null===(S=b.getZoneState(t.zoneId))||void 0===S?void 0:S.length())||0)-1,S=!0,!m&&w&&E&&(o||_)?(L=this.An(C,a,n,e),1<Math.abs((E=this.kn((0,r.b)((0,r.b)({},C),{offset:C.offset+L}))).line-C.line)&&(C=E,o&&(_=!0),S=!1)):b||!I||!e||!o&&_||(L=this.An(t,c,i,e),1<Math.abs((I=this.kn((0,r.b)((0,r.b)({},t),{offset:t.offset+L}))).line-t.line)&&(t=I,o&&(_=!1),S=!1)),!k&&!_&&(d||y||f)&&S&&(t=this.kn((0,r.b)((0,r.b)({},t),{offset:t.offset+=this.An(t,c,i,e)})))):o&&(!(k&&u.Xh.windows||A&&u.Xh.isMac)||v&&e)&&(L=this.An(C,a,n,e),t=C=this.kn((0,r.b)((0,r.b)({},C),{offset:C.offset+=L}))),!T&&!o&&s&&d&&(L=this.An(C,a,n,e),t=C=this.kn((0,r.b)((0,r.b)({},C),{offset:C.offset+=L}))),_=new(this.s.modulesContainer.get(h.h.Range))({editor:this.s,start:C,end:t,isBackward:_}),this.range&&!g.W.isRangeEqual(_,this.range)&&(this.setSelection(_,!0),x.preventDefault())))))},(0,r.a)([s.W],t.prototype,"updateBrowserSelection",null),(0,r.a)([s.W],t.prototype,"_handleDOMSelectionChange",null),(0,r.a)([s.W],t.prototype,"handleArrowKey",null),t}()},604006:function(t,e,n){"use strict";n.d(e,{E_:function(){return g},Eb:function(){return A},Ju:function(){return T},KK:function(){return c},MK:function(){return S},Ny:function(){return y},S3:function(){return function t(e,n){void 0===n&&(n=[]);for(var r=0,o=e.childNodes.length;r<o;r++){var a,s=e.childNodes[r];s.hasAttribute&&s.hasAttribute(i.nV)&&!s.hasAttribute(i.q7)?n.push(s.textContent):void 0!==(a=f(s))?n.push(a):s.childNodes&&t(s,n)}return n}},Tl:function(){return _},U_:function(){return p},XM:function(){return I},Yr:function(){return k},Zj:function(){return E},fr:function(){return h},hl:function(){return x},iB:function(){return w},mO:function(){return d},qI:function(){return m},x1:function(){return L},y1:function(){return s},z8:function(){return function t(e,n){void 0===n&&(n=[]);for(var r=0,i=e.childNodes.length;r<i;r++){var o,a=e.childNodes[r];a.nodeType===Node.TEXT_NODE?n.push(a.textContent):void 0!==(o=f(a))?n.push(o):a.childNodes&&t(a,n)}return n}}});var r=n(862928),i=n(55582),o=n(414818),a=function(t){return t instanceof Node},s=function(t){return a(t)&&t.nodeType===Node.TEXT_NODE},l=function(t){return a(t)&&t.nodeType===Node.ELEMENT_NODE},u=function(t,e,n){if(!(t instanceof HTMLElement)||"br"===t.tagName.toLowerCase()||!t.childNodes[e]||t.classList.contains(i.qT))return null;for(var r,o=t.childNodes,s=o[e],u=e,c=!1,d=!1;(a(r=s)&&r.nodeType===Node.COMMENT_NODE||l(s)&&0===s.childNodes.length||l(s)&&"false"===s.getAttribute("contenteditable")&&!s.getAttribute(i.eu))&&(!c||!d);)u>=o.length?(c=!0,u=e-1,n="backward"):u<0?(d=!0,u=e+1,n="forward"):(s=o[u],u+="forward"===n?1:-1);return s},c=function(t){var e=t.node,n=t.offset;if(l(e)&&e.hasChildNodes()){var r=(n=Math.min(n,e.childNodes.length))===e.childNodes.length,i=r?"backward":"forward";for(e=e.childNodes[r?n-1:n];e instanceof HTMLElement&&e.childNodes.length;)var o=r?e.childNodes.length-1:0,e=u(e,o,i);if(!e)return t;n=r&&null!=e.textContent?e.textContent.length:0}return{node:e,offset:n}};function d(t){if(!t)return null;var e=t;return(e=t.nodeType===window.Node.TEXT_NODE?t.parentNode:e)&&e.closest?e.closest("["+i.PI+"]"):null}function f(t){if(!(t instanceof HTMLElement))return"";var e=t.hasAttribute(i.eu),n=t.hasAttribute(i.VI),r=t.hasAttribute(i.Ks),o=t.hasAttribute(i.sq),a=t.hasAttribute(i.q7);return e?t.getAttribute(i.eu):n?(null===(n=t.textContent)||void 0===n?void 0:n.replace(RegExp(""+i.T6,"g"),""))||"":r?t.querySelectorAll("["+i.P9+"]").length?" ":"":a?((null===(t=t.textContent)||void 0===t?void 0:t.replace(RegExp(""+i.T6,"g"),""))||"")+"\n":o?"":void 0}function h(t){var e,n,o,a=c(t),s=a.node,l=a.offset,t=d(s);if(!s||!t)return null;(a=document.createRange()).setStart(t,0),a.setEnd(s,l),a=Array.from((l=a.cloneContents()).querySelectorAll("["+i.eu+"],["+i.VI+"],["+i.Ks+"],["+i.sq+"]"));try{for(var u=(0,r.c)(a),f=u.next();!f.done;f=u.next()){var h,p,v,g,y,m,b=f.value,S=b.parentNode;S&&(h=b.hasAttribute(i.eu),p=b.hasAttribute(i.VI),v=b.hasAttribute(i.Ks),h?(g=b.getAttribute(i.eu),(y=document.createElement("span")).setAttribute(i.eu,g),y.textContent=g,S.insertBefore(y,b),S.removeChild(b)):p?b.textContent=(null===(o=b.textContent)||void 0===o?void 0:o.replace(RegExp(""+i.T6,"g"),""))||null:v?(m=b.querySelectorAll("["+i.P9+"]"),b.textContent=m.length?" ":""):S.removeChild(b))}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return l}function p(t){return Array.from(t.querySelectorAll("["+i.nV+"], ["+i.eu+"], ["+i.VI+"]")).filter(function(t){var e;return!(t instanceof HTMLElement&&"string"==typeof(null===(e=t.dataset)||void 0===e?void 0:e.fakeText))||(null===(t=null===(t=t.dataset)||void 0===t?void 0:t.fakeText)||void 0===t?void 0:t.length)}).filter(function(e){return e=e.parentElement&&e.parentElement.closest("["+i.eu+"]"),!t.contains(e)}).filter(function(e){return e=e.parentElement&&e.parentElement.closest("["+i.Ks+"]"),!t.contains(e)})}function v(t){if(s(t)||!t.hasChildNodes())return[t];if(g(t)){var e=w(t);if(e&&e.firstChild)return[e.firstChild]}return Array.from(t.childNodes).reduce(function(t,e){return t.push.apply(t,(0,r.e)(v(e))),t},[])}function g(t){return!!y(t)}function y(t){return b(t,"["+i.eu+"]")}function m(t){return b(t,"["+i.sq+"]")}function b(t,e){return t&&(t=t instanceof HTMLElement?t:t.parentElement)?(e=t.closest(e),t=d(t),e&&t&&t.contains(e)?e:null):null}function S(t){return t&&(t instanceof Element||t instanceof DocumentFragment)&&(function(t){t.querySelectorAll("["+i.q7+"]").forEach(function(t){t.textContent&&(t.textContent=function(t){return t.replace(RegExp(i.T6+"|\\n","g"),"")}(t.textContent))})}(t),function(t){t.querySelectorAll("."+i.Z6).forEach(function(t){t.parentElement.removeChild(t)})}(t)),(t=t.textContent)?t.length:0}function E(t,e){var n=t.anchorNode,r=t.focusNode;if(!n||!r||t.rangeCount<=e)return null;if(r=null,o.Xh.safari)try{r=t.getRangeAt(e)}catch(t){r=null}else t.getRangeAt&&(r=t.getRangeAt(e));return r||((r=document.createRange()).setStart(t.anchorNode,t.anchorOffset),r.setEnd(t.focusNode,t.focusOffset)),r}function I(t,e){var n,r,i,o=document.createRange(),a=t.node,s=t.offset,t=e.node,e=e.offset;return a&&(i=Math.min(s,(null===(n=(r=C(v(a)[0])).textContent)||void 0===n?void 0:n.length)||0),o.setStart(r,i)),t&&(s=C(v(t)[0]),r=(n=g(t))&&w(t),t=(null===(t=s.textContent)||void 0===t?void 0:t.length)||0,i=!n||r?Math.min(e,t):t,o.setEnd(s,i)),o}function C(t){return o.Xh.safari&&t instanceof HTMLElement&&"BR"===t.tagName?t.closest("span[data-leaf]"):t}function L(t){return t&&(t instanceof HTMLElement?t.hasAttribute(i.VI):null===(t=t.parentElement)||void 0===t?void 0:t.hasAttribute(i.VI))}function x(t){return!!w(t)}function w(t){return t&&t instanceof Element?t.hasAttribute(i.VI)?t:t.querySelector("["+i.VI+"]"):null}function T(t){return t&&t instanceof Element&&t.hasAttribute(""+i.eu)?t.getAttribute(""+i.eu):null}function _(t,e,n){void 0===n&&(n=!1);var o,a,s,l=t._getViewModel(),u=l.getModel(e);if(!u){var c=e.closest("["+i.Ks+"]");if(!c)return null;var d=c.querySelectorAll("["+i.PI+"],["+i.Q0+"]");if(!d.length||!(c=(null==(f=l.getModel(c))?void 0:f.getZoneId())||c.getAttribute("["+i.P9+"]")))return null;var f=f||t.getContentState().getZoneState(c),c=null===(t=t.virtualListManager)||void 0===t?void 0:t.getVirtualListModuleOfZone(c);if(null!=c&&c.isEnabled&&(c=e.getAttribute(i.Q0))){var h=c.split("-"),p=null!==(v=null==f?void 0:f.getLine(+h[0]))&&void 0!==v?v:null,v=null!==(v=null==f?void 0:f.getLine(+h[1]))&&void 0!==v?v:null;return n?v:p}var g=-1;try{for(var y=(0,r.c)(Array.from(d)),m=y.next();!m.done;m=y.next()){var b=m.value;if(b.getAttribute(i.PI)?g++:(h=null===(s=b.getAttribute(i.Q0))||void 0===s?void 0:s.split("-"))&&(g+=+h[1]-+h[0]+1),b===e){var S=null==f?void 0:f.getLine(g);if(!S)return null;u=S;break}}}catch(t){o={error:t}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}}return Array.isArray(u)&&(p=u[0],v=u[u.length-1],u=n?v:p),u}function A(t,e){var n;if(!t||!(t=t instanceof HTMLElement?t:t.parentElement)||!t.textContent||e!==t.textContent.length)return!1;for(var r=t.closest("["+i.MB+"]");(null==r||!r.nextElementSibling)&&null!==(n=null==r?void 0:r.parentElement)&&void 0!==n&&n.hasAttribute(i.lE);)r=r.parentElement;return null===(t=null==r?void 0:r.nextElementSibling)||void 0===t?void 0:t.querySelector("["+i.eu+"]")}function k(t,e){return!!e&&t.focusNode===e.startContainer&&t.focusOffset===e.startOffset&&t.anchorNode===e.endContainer&&t.anchorOffset===e.endOffset}},862928:function(t,e,n){"use strict";n.d(e,{_:function(){return d},a:function(){return s},b:function(){return o},c:function(){return c},d:function(){return i},e:function(){return f},f:function(){return a},g:function(){return l},h:function(){return u}});var r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}function l(t,e,n,r){return new(n=n||Promise)(function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})}function u(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function f(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}},311762:function(t,e,n){"use strict";n.d(e,{f:function(){return w},g:function(){return T},i:function(){return M},r:function(){return _},a:function(){return C},d:function(){return L},e:function(){return x},w:function(){return A}});var r=n("862928"),i=n("944288"),o=n("524007"),a=n("539725"),s=n("471448"),l=n("11622"),u=n("715641"),c=n("975917"),d=n("431468"),f=n("414818"),h=function(){function t(){}var e=t.prototype;return e.getData=function(t,e){return t.getData(e)},e.setData=function(t,e,n){return t.setData(e,n)},e.getTypes=function(t){return t.types},t}(),p=function(){function t(t){void 0===t&&(t=new h),this.proxyClipboard=t}var e=t.prototype;return e.getTypes=function(t){return this.proxyClipboard.getTypes(t)},e.getData=function(t,e){return void 0===e&&(e="text/html"),f.Xh.modernIE?this.proxyClipboard.getData(t,"text"):this.proxyClipboard.getData(t,e)},e.setData=function(t,e){var n,r,i=e.text,o=e.html;(i||o)&&(e=null===(e=null===(e=null===(e=window.lark)||void 0===e?void 0:e.biz)||void 0===e?void 0:e.clipboard)||void 0===e?void 0:e.setContent,f.Xh.modernIE?this.proxyClipboard.setData(t,"text",o):this.proxyClipboard instanceof h&&e&&((0,f.WZ)()||f.Xh.isBytedanceApp&&f.Xh.isIPad||f.Xh.isAndroid&&o.length&&!i.length)?(n=i,r=o,window.lark.biz.clipboard.setContent({text:n,html:r})):(this.proxyClipboard.setData(t,"text/html",o),this.proxyClipboard.setData(t,"text/plain",i)))},e.setDataWithoutEvent=function(t){var e=this,n=function(r){r.preventDefault(),r.stopImmediatePropagation&&r.stopImmediatePropagation();var i=t.html,o=t.text;document.createElement("div").innerHTML=i,r=r.clipboardData||window.clipboardData,f.Xh.modernIE?e.proxyClipboard.setData(r,"text",i):(e.proxyClipboard.setData(r,"text/html",i),e.proxyClipboard.setData(r,"text/plain",o)),t.customCopyDatas&&e.setCustomData(r,t.customCopyDatas),document.removeEventListener("copy",n)},r=document.createElement("textarea");document.body.appendChild(r),document.addEventListener("copy",n),r.style.opacity="0",r.value=" ",f.Xh.mobile&&(r.readOnly=!0);var i=window.scrollX,o=window.scrollY;r.focus({preventScroll:!0}),r.select(),f.Xh.isAndroid&&window.scrollTo(i,o),f.Xh.lark&&f.Xh.isIOS?window.lark.biz.navigation.handleCopyMenuClick():document.execCommand("copy"),document.body.removeChild(r)},e.setCustomData=function(t,e){var n,r,i=this;t&&t.setData&&(f.Xh.isAndroid?(n=this.proxyClipboard.getData(t,"text/html"),r="",e.forEach(function(t){var e=t.key,t=t.data;r+='<span id="custom-clipboard-data-'+e+'" data-custom-clipboard="'+encodeURIComponent(t)+'"></span>'}),this.proxyClipboard.setData(t,"text/html",n+r)):e.forEach(function(e){i.proxyClipboard.setData(t,e.key,e.data)}))},e.getCustomData=function(t,e){if(!t||!t.setData)return"";if(f.Xh.isAndroid){var n=this.proxyClipboard.getData(t,"text/html"),n=(new DOMParser).parseFromString(n,"text/html").getElementById("custom-clipboard-data-"+e);return decodeURIComponent((null==n?void 0:n.getAttribute("data-custom-clipboard"))||"")}return this.proxyClipboard.getData(t,e)},t}(),v=n("433500"),g=n("96773");n("601325");var y=n("703623"),m=n("739375"),b=n("233230"),S=function(){function t(t){this.pasteTimes=0,this.Rn="",this.s=t}var e=t.prototype;return t.isBlob=function(t){var e=t.types,n=t.files,r=1===e.length&&n&&n.length,t=2===e.length&&e.includes("text/plain")&&e.includes("Files"),n=2===e.length&&e.includes("text/html")&&e.includes("Files"),e=f.Xh.safari&&e.includes("Files")&&e.includes("text/uri-list");return r||t||n||e},e.Nn=function(t,e,n){var i=!1;(n=void 0===n?{}:n).canPrevent&&(e.preventDefault=function(){i=!0}),n.pickKey&&(o=function(t,e){return e&&(t[n.pickKey]=e),t});var o=this.s.pluginManager.call(t,e,{cb:o});return(0,r.b)((0,r.b)({},o),{defaultPrevented:i})},e.onPaste=function(e){var n=e.clipboardData;if(n){var o=this.s,a=new g.y(e,e.target),l=null,u=this.s.clipboard.dataHelper,c=u.getCustomData(n,d.iC);this.Rn=u.getCustomData(n,d.K6);var f,h=/data-editor-unique-id="([0-9a-zA-Z]+)"/;c?(l=(0,y.CX)(c))&&(f=l.editorUniqueId):u.getTypes(n).includes("text/html")&&h.test(u.getData(n,"text/html"))&&(f=h.exec(u.getData(n,"text/html"))[1]),(h=this.Rn&&this.Rn===o.businessKey)||o.log('[Paste][onPaste] Copy from different business "'+this.Rn+'"'),(h=h||o.clipboard.canInternalPasteWhitelist.includes(this.Rn))||this.Rn,this.xn(f);try{this.s.triggerEditorEvent(v.r.PASTE,a)}catch(t){o.error({e:t,message:"[Paste][onPaste][Warning] call paste event failed.",level:i.W.ERROR})}if(!a.isDefaultPrevented()){if(n={text:u.getData(n,"text/plain"),types:u.getTypes(n),files:t.isBlob(n)?n.files:void 0,fromBusinessKey:this.Rn},l&&h){var p=l.deltas;return this.zn(e,new s.D(p),(0,r.b)((0,r.b)({},n),{isInternalPaste:!0}))}l=(h=this.Un(e)).node,p=h.defaultPrevented,h=h.clipboardHasElement,p||(h=this.deserialize((0,r.b)({node:l},n),h),o.log("[Paste][onPaste] paste node is:",l),this.zn(e,h,(0,r.b)((0,r.b)({},n),{isInternalPaste:!1})))}}},e.xn=function(t){t===this.s.editorUniqueId?this.pasteTimes++:(this.s.clipboard.from=null,this.pasteTimes=0)},e.getPasteInfo=function(){return{pasteFrom:this.s.clipboard.from,pasteTimes:this.pasteTimes}},e.Un=function(t){var e=t.clipboardData,n=e.types,r=e.files,i=this.s.clipboard.dataHelper,o=i.getData(t.clipboardData,"text/html"),a=i.getData(t.clipboardData,"text/plain"),e=R(o),i=(new DOMParser).parseFromString(e,"text/html").body,o=!!i.firstElementChild;return z(i),r={UNSAFE_HTML:e,node:i,text:a,files:r},t=this.Nn("UNSAFE_editorNormalizePasteNode",{types:n,data:r,event:t},{canPrevent:!0}),{node:r.node,defaultPrevented:t.defaultPrevented,clipboardHasElement:o}},e.zn=function(t,e,n){t.stopImmediatePropagation(),t.preventDefault();var a=this.s,u=a.selection.getSelection(),c=u.start,d=c.zoneId,f=c.line,c=null===(p=a.getContentState().getZoneState(d))||void 0===p?void 0:p.getLine(f);if(c){var h,p=Object.keys(e.deltas);p[0]!==o.S&&1===p.length&&(h=e.get(p[0]),e=e.replace(p[0],h.create((0,r.b)((0,r.b)({},h),{zoneId:o.S})))),e.get(o.S)||(h=function(t){var e=null;return Object.keys(t.deltas).forEach(function(n){var r,n=t.get(n);n instanceof l.I&&!e&&(r=!1,n.forEach(function(t){(null===(t=t.attributes)||void 0===t?void 0:t.zoneId)&&!e&&(r=!0)}),r&&(e=n.zoneId))}),e}(e))&&(g=e.get(h),e=e.replace(h,g.create((0,r.b)((0,r.b)({},g),{zoneId:o.S}))));var g=e.get(o.S);d!==o.S&&g&&e.replace(o.S,new l.I({zoneId:d,ops:g.ops}));var y=e.get(d);if(w(y,"\n")&&(g=y.reduce(function(t,e,n){return n===y.ops.length-1&&e.insert?t.insert(e.insert.slice(0,-1),e.attributes):t.push(e)},new l.I({zoneId:d})),e.replace(d,g)),t={deltaSet:e,zoneId:d,lineState:c,event:t,isInternalPaste:n.isInternalPaste},!this.Nn("editorWillPaste",t,{canPrevent:!0,pickKey:"deltaSet"}).defaultPrevented){t=function(t,e,n){var i=t.toPosition(),o=i.start,a=i.len,u=i.zoneId;if(!e.hasLineMarker())return(new s.D).concat(new l.I({zoneId:u}).retain(o).delete(a)).concat(n);var i=!(null===(c=null===(i=null===(c=n.get(u))||void 0===c?void 0:c.ops[0])||void 0===i?void 0:i.attributes)||void 0===c||!c.lmkr),c=e.hasLineMarker()&&1===t.start.offset;if(i&&c){var d=new l.I({zoneId:u}),c=e.slice(0,t.start.offset),f=c._getOps().slice(1),t=n.reduce(function(t,n){if(n.zoneId!==u||!(n instanceof l.I))return t.concat(n);var i=e._getOps()[0].attributes;return d.insertLineMarker((0,r.b)((0,r.b)({},i),n.ops[0].attributes)),f.forEach(function(t){return d.push(t)}),n.ops.slice(1).forEach(function(t){return d.push(t)}),t.concat(d)},new s.D),c=new l.I({zoneId:u}).retain(o-c.length()).delete(a+c.length());return(new s.D).concat(c).concat(t)}return(new s.D).concat(new l.I({zoneId:u}).retain(o).delete(a)).concat(n)}(u,c,t.deltaSet),a.log("[Paste][applyPaste] paste apply delta:",t),a.getContentState().apply(t,{type:"applyPaste"});try{a.call(v.r.DID_PASTE,{deltaSet:t,UNSAFE_text:n.text,isInternalPaste:n.isInternalPaste})}catch(t){a.error({e:t,level:i.W.ERROR,message:"[Paste][applyPaste] "+t.message})}}}else a.error({message:"[Paste][applyPaste][Warning] can't get lineState! zone: "+d+" line: "+f,level:i.W.ERROR})},e.deserialize=function(t,e){var n=t.node,r=t.html,i=t.text;return"files"in t&&t.files?this.Bn(t.files,t.types):n&&(n.hasChildNodes()||e)?this.Hn(n):null!=(r=(r=r&&R(r))?(new DOMParser).parseFromString(r,"text/html"):null)&&r.body&&r.body.hasChildNodes()?(z(r.body),this.Hn(r.body)):i?this.Zn(i):(new s.D).concat(new l.I)},e.Hn=function(t){var e,n=this,r=t.childNodes;return 0===r.length?e=(new s.D).concat(new l.I):1===r.length?e=this.Hn(t.childNodes[0]):1<r.length&&(e=Array.from(t.childNodes).reduce(function(t,e){var r=n.Hn(e);return r.forEach(function(e){try{var o=e.zoneId,a=t.get(o);a?0<e.ops.length&&e.ops.forEach(function(t){(0,s.i)(t)||(0,s.b)(t)||a.ops.push(t)}):t.add(e.create(e))}catch(e){n.s.error({err:e,message:"[Paste][traverse][Warning] deserialize traverse failed.",level:i.W.ERROR}),r.compose(t,!0,!1)}}),t},new s.D)),this.Nn("deserialize",{node:t,zoneId:o.S,deltaSet:e,types:["text/html"],fromBusinessKey:this.Rn},{pickKey:"deltaSet"}).deltaSet},e.Zn=function(t){var e=(new s.D).compose(new l.I);return this.Nn("deserialize",{text:t,zoneId:o.S,deltaSet:e,types:["text/plain"],fromBusinessKey:this.Rn},{pickKey:"deltaSet"}).deltaSet},e.Bn=function(t,e){var n=(new s.D).compose(new l.I);return this.Nn("deserialize",{files:t,zoneId:o.S,deltaSet:n,types:e,fromBusinessKey:this.Rn},{pickKey:"deltaSet"}).deltaSet},t}(),E=function(){function t(t){this.s=t}var e=t.prototype;return e.onCopy=function(t,e){var n=this.s;return n.copyable?this.Fn(t,e):(n.call(d.HY),t.preventDefault(),void t.stopImmediatePropagation())},e.onCut=function(t,e){var n=this.s;return n.copyable?n.isEditable()?this.Fn(t,e,!0):void 0:(n.call(d.HY),t.preventDefault(),void t.stopImmediatePropagation())},e.slice=function(t){var e=this.s,n=t.start,r=t.end,t=e.getContentState().getZoneState(n.zoneId),e=new s.D;return t&&t&&n.zoneId===r.zoneId?(r=new l.I({zoneId:n.zoneId,ops:N(t,n,r)}),e.add(n.zoneId,r),e):e},e.Wn=function(t){if(t.isCollapsed())return t;var e=t.start,n=e.zoneId,r=e.line,e=e.offset,n=this.s.getContentState().getZoneState(n),r=null===(r=null==n?void 0:n.getLine(r))||void 0===r?void 0:r.getLineMarker();return r&&e===r&&(t.start.offset-=r),t},e.Fn=function(t,e,n){void 0===n&&(n=!1);var i=this.s;e=e||this.Wn(i.selection.getSelection());var o,a,l,u,c,h=[];this.s.pluginManager.call("shouldPreventCopy",{e:t,html:""},{cb:function(t,e){return h.push(e),t}}),h.includes(!0)||(f.Xh.isAndroid&&i.isEditable()&&i.selection.updateBrowserSelection(),c=new g.y(t,t.target),i.triggerEditorEvent(t.type,c),c.isDefaultPrevented()||(t.preventDefault(),t.stopImmediatePropagation(),o={deltaSet:u=this.slice(e),range:e,customCopyDatas:[]},this.Kn(o),a={zoneId:(e=o.range).start.zoneId,deltaSet:u=o.deltaSet,node:null,customCopyDatas:o.customCopyDatas},i.clipboard.from=n?v.r.CUT:v.r.COPY,i.clipboard.resetPasteTimes(),this.serialize(a),l=function(t){return Array.from(t.childNodes).reduce(function(t,e){return t+function t(e){if(e instanceof Text)return e.textContent;if(!(e instanceof Element))return"";var n="";return e.childNodes.forEach(function(e){n+=t(e)}),e.getAttribute(d.mX)&&(n+="\n"),n}(e)},"").slice(0,-1)}(a.node),f.Xh.windows&&(l=l.replace(/\n/g,"\r\n")),c=(0,r.b)((0,r.b)({},a),{text:l}),this.Yn(c),o=c.node,a=c.customCopyDatas,l=c.text,u=c.deltaSet,c=t.clipboardData||window.clipboardData,t=i.clipboard.dataHelper,o&&0<o.childElementCount&&t.setData(c,{text:l,html:function(t){return t.replace(/<(?:img|iframe)[^>]*(data-no-request-)src=[^>]*>/g,function(t,e){return t.replace(e,"")})}(function(t){var e=document.createElement("div");return e.appendChild(t),e.innerHTML}(o))}),0!==a.length&&t.setCustomData(c,a),(0,s.p)(u)||(t.setCustomData(c,[{key:d.iC,data:JSON.stringify({deltas:u.deltas,editorUniqueId:this.s.editorUniqueId})}]),t.setCustomData(c,[{key:d.K6,data:i.businessKey}])),!0===n&&(i.triggerEditorEvent(v.r.WILL_DELETE_FROM_CUT).shouldPrevent||(e=(n=e||i.selection.getSelection()).start,n=n.end,i.getContentState().deleteText({start:e,end:n},{type:"handleCut"})))))},e.serialize=function(t){var e=this,n=t.deltaSet,r=t.zoneId,i=n.get(r);if(!i)return t;var o=document.createDocumentFragment();return i.eachLine(function(n,a,l){var f=document.createDocumentFragment(),h=e.s.modulesContainer.get(m.h.ZoneState),p=e.s.getContentState(),p=p.getZoneState(r)||new h(r,n,p.schema),p={lineState:new b.V(n,p),index:l,callHookFrom:"serialize"};e.s.callAll("_editorLineStateWillRender",p),p.lineState.getOps().forEach(function(r){var i;(0,s.d)(r)&&!(0,u.eV)(r)&&(i=r.insert.replace(/\n/g,"")||"",i=document.createTextNode(i),r=e.$n(Object.assign(t,{type:c.T.LEAF,node:i,op:r,lineDelta:n})),f.appendChild(r.node))}),(p=document.createElement("div")).style.whiteSpace="pre-wrap",a=e.$n(Object.assign(t,{type:c.T.LINE,node:f,lineNode:p,lineAttributes:a,lineDelta:n})),p.appendChild(a.node),p.dataset.zoneId=i.zoneId,p.dataset.lineIndex=String(l),p.setAttribute(d.mX,"true"),o.appendChild(p)}),n=this.$n(M(Object.assign(t,{type:c.T.ROOT,node:o}),{tagAttribute:""})),Object.assign(t,{node:n.node})},e.$n=function(t){return this.s.pluginManager.call("serialize",t,{cb:function(e){return t=e}}),t},e.Kn=function(t){return this.s.pluginManager.call("editorWillCopy",t)},e.Yn=function(t){return this.s.pluginManager.call("editorWillSetClipboard",t)},(0,r.a)([a.W],t.prototype,"onCopy",null),(0,r.a)([a.W],t.prototype,"onCut",null),(0,r.a)([a.W],t.prototype,"slice",null),t}(),I=(0,i.K)(function(t){this.editor.error(t)})(i.W.ERROR),C=function(){function t(t,e){this.from=null,this.canInternalPasteWhitelist=[],this.s=t,this.dataHelper=new p(e),this.Gn=new S(t),this.Vn=new E(t)}var e=t.prototype;return e.deserialize=function(t,e){return this.Gn.deserialize(t,e)},e.serialize=function(t){return this.Vn.serialize(t)},e.onCopy=function(t){return this.Vn.onCopy(t)},e.onPaste=function(t){this.Gn.onPaste(t)},e.slice=function(t){return this.Vn.slice(t)},e.onCut=function(t){return this.Vn.onCut(t)},e.resetPasteTimes=function(){this.Gn.pasteTimes=0},e.getPasteInfo=function(){return this.Gn.getPasteInfo()},e.setCanInternalPasteWhitelist=function(t){this.canInternalPasteWhitelist=t},e.setDataToClipboard=function(t){var e=t.data,n=t.type;e&&e.html&&(t=(0,r.b)((0,r.b)({},e),{type:n}),this.s.callAll("beforeSetDataToClipboard",t),this.from=n,this.resetPasteTimes(),this.dataHelper.setDataWithoutEvent(Object.assign({},e,{html:this.Jn(t.html)})))},e.copyRange=function(t){this.Qn(t,"copy")},e.cutRange=function(t){this.Qn(t,"cut")},e.Qn=function(t,e){function n(n){if(r.s){switch(n.stopPropagation(),n.stopImmediatePropagation(),e){case"copy":r.Vn.onCopy(n,t);break;case"cut":r.Vn.onCut(n,t)}n.preventDefault()}}var r=this,i=this.s,o=document.createElement("textarea"),i=f.Xh.isIPad?i.getOuterContainer():document.body;i.appendChild(o),o.addEventListener(e,n),o.style.position="fixed",o.style.left="-10000000px",o.value=" ",o.focus(),o.select(),document.execCommand(e),o.removeEventListener(e,n),i.removeChild(o)},e.Jn=function(t){return t?((t=$((new DOMParser).parseFromString(t,"text/html").body)).children().first().attr("data-editor-unique-id",this.s.editorUniqueId),t.html()):t},(0,r.a)([I],t.prototype,"deserialize",null),(0,r.a)([I],t.prototype,"serialize",null),(0,r.a)([I],t.prototype,"onCopy",null),(0,r.a)([I],t.prototype,"onPaste",null),(0,r.a)([I],t.prototype,"onCut",null),(0,r.a)([I],t.prototype,"setDataToClipboard",null),(0,r.a)([I],t.prototype,"copyRange",null),(0,r.a)([I],t.prototype,"cutRange",null),t}();function L(t,e,n,i){void 0===i&&(i=!0);var o=new s.D;return t.forEach(function(t,a){o=a===e?(a=t.create({zoneId:a}),a=t.reduce(function(t,e){if(!e.insert||null!==(o=e.attributes)&&void 0!==o&&o.lmkr)return t.push(e);var o,a=i?(0,r.b)((0,r.b)({},e.attributes),n):(0,r.b)((0,r.b)({},n),e.attributes);if("string"!=typeof e.insert)t.insert(e.insert.id,a);else for(var s=e.insert;0<s.length;){var l=s.includes("\n"),u=s.split("\n",1)[0],c=s.substring(u.length+1);t.insert(s=u,a),s=c,l&&t.insertEnter(e.attributes)}return t},a),o.concat(a)):o.concat(t)}),o}function x(t,e,n,i){void 0===i&&(i=!0);var o=new s.D;return t.forEach(function(t,a){var u;o=a===e&&t instanceof l.I?(u=new l.I({zoneId:a}),t.eachLine(function(t){t.ops.forEach(function(t,e){0===e?(e=null!==(e=t.attributes)&&void 0!==e?e:{},(0,s.k)(t)?u.insert("*",i?(0,r.b)((0,r.b)({},e),n):(0,r.b)((0,r.b)({},n),e)):u.insertLineMarker(n).push(t)):u.push(t)})}),o.concat(u)):o.concat(t)}),o}function w(t,e){for(var n="",r=t.ops.length-1;0<=r&&n.length<e.length;--r){var i=t.ops[r];if("string"!=typeof i.insert)break;n=i.insert+n}return n.slice(-1*e.length)===e}function T(t,e){for(var n="",r=0;r<t.ops.length&&n.length<e.length;r++){var i=t.ops[r];if("string"!=typeof i.insert)break;n+=i.insert}return n.slice(0,e.length)===e}function _(t,e,n){return t.reduce(function(t,r){var i=r.attributes;if(!i||!r.insert)return t.push(r);var o=Object.keys(i).reduce(function(t,r){var o,a,s=i[r];return e({key:r,value:s})?(o=(a=n({key:r,value:s})).key,a=a.value,t[o]=a):t[r]=s,t},{});return t.insert(r.insert,o),t},t.create({zoneId:t.zoneId,zoneType:t.zoneType}))}function A(t,e){var n=t.type,r=t.node,i=t.op,o=e.tagAttribute;return n===c.T.LEAF&&i&&i.attributes&&i.attributes[o]?(o=e.wrapTag||d.c5[o],(o=document.createElement(o)).appendChild(r),Object.assign(t,{node:o})):t}function k(t){var e=[];try{e=JSON.parse(t.getAttribute(d.fF)||"[]")}catch(t){e=[]}return e}function M(t,e){var n,i,o=t.type,a=t.node,s=t.lineAttributes,l=e.tagAttribute,u=e.wrapNodesInfo,s=s&&s[l],l=e.wrapTag||d.c5[l]||s;if(o===c.T.LINE&&s&&(a instanceof Element||((s=document.createElement("div")).appendChild(a),a=s),l&&!u&&(u=[{tag:l}]),a.setAttribute(d.fF,JSON.stringify((0,r.e)(u,k(a))))),o===c.T.ROOT){var f=[],o=Array.from(a.querySelectorAll("["+d.mX+"]"));try{for(var h=(0,r.c)(o),p=h.next();!p.done;p=h.next())!function(t){var e=t.querySelectorAll("["+d.fF+"]")[0];if(!e)return f=[];var n=k(e);if(n.length){e.removeAttribute(d.fF);var i=[],o=document.createElement(n[0].tag);n.reduce(function(t,a,s){var l,u,c,d=a.tag,h=a.style,p=a.attributes,a=a.split,v=document.createElement(d);if(h)try{for(var g=(l=void 0,(0,r.c)(Object.entries(h))),y=g.next();!y.done;y=g.next()){var m=(0,r._)(y.value,2),b=m[0],S=m[1];v.style[b]=S}}catch(t){l={error:t}}finally{try{y&&!y.done&&(u=g.return)&&u.call(g)}finally{if(l)throw l.error}}if(p)try{for(var E=(L=void 0,(0,r.c)(Object.entries(p))),I=E.next();!I.done;I=E.next()){var C=(0,r._)(I.value,2),b=C[0],S=C[1];v.setAttribute(b,S)}}catch(t){L={error:t}}finally{try{I&&!I.done&&(c=E.return)&&c.call(E)}finally{if(L)throw L.error}}var L=f[s];return!a&&L&&L.tagName.toLowerCase()===d.toLowerCase()?!(v=L).getAttribute("start")&&null!=p&&p.start&&v.setAttribute("start",p.start):f=[],i.push(v),0===s?o=v:t.appendChild(v),s===n.length-1&&v.appendChild(e),v},o),f=i,t.parentNode.insertBefore(o,t),t.hasChildNodes()||t.parentNode.removeChild(t)}}(p.value)}catch(t){n={error:t}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}return Object.assign(t,{node:a})}function z(t){try{Array.from(t.querySelectorAll("style")).forEach(function(e){var n,r;e.textContent&&/\}?(\S+)\s*{[\s\S]*?white-space\s*:\s*pre[\s\S]*?}/.test(e.textContent)&&(!(n=/\}?(\S+)\s*{[\s\S]*?white-space\s*:\s*pre[\s\S]*?}/.exec(e.textContent.replace(/<!--[\s\S]*?-->/,"")))||(e=/white-space\s*:\s*pre.*?(?=;| |})/.exec(n[0]))&&(r=e[0].split(":")[1],Array.from(t.querySelectorAll(n[1])).forEach(function(t){t instanceof HTMLElement&&(t.style.whiteSpace=r.trim())})))})}catch(t){}var e=["."+d.Z6,".ignore-dom","style","script"];Array.from(t.querySelectorAll(e.join(","))).forEach(function(t){t.innerHTML=""}),Array.from(t.childNodes).forEach(function(t){var e;t.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.ELEMENT_NODE&&null!==(e=t.parentNode)&&void 0!==e&&e.removeChild(t)})}function R(t){var e="<([^\\/][^>]+|[^>\\/]+)>",n="<\\/([^>]+)>",r=RegExp(e+"\\n+\\s*?"+e,"g"),i=RegExp(e+"\\n+\\s*?"+n,"g"),e=RegExp(n+"\\n+\\s*?"+e,"g"),n=RegExp(n+"\\n+\\s*?"+n,"g");return t.replace(/\r\n/g,"\n").replace(/\n+$/g,"").replace(/(\x3C!--[\s\S]*?-->)\n+\s*/g,"$1").replace(i,function(t,e,n){return e.split(" ")[0]!==n.split(" ")[0]?"<"+e+"></"+n+">":t}).replace(e,"</$1><$2>").replace(r,"<$1><$2>").replace(n,"</$1></$2>").replace(r,"<$1><$2>").replace(n,"</$1></$2>")}var D=function(t,e,n){var i=[],o=0;return t.getOps().forEach(function(t){var a,l,u;null!=t&&t.insert&&"string"==typeof t.insert&&(a=(0,s.a)(t),o<=n&&e<=o+a&&(l=Math.max(0,e-o))<(u=Math.min(a,n-o))&&i.push({insert:t.insert.slice(l,u),attributes:(0,r.b)({},t.attributes)}),o+=a)}),i},N=function(t,e,n){for(var i=[],o=Math.max(0,e.line),a=Math.min(n.line,t.length()-1),s=o;s<=a;s++){var l=t.getLine(s);e.line===a?i.push.apply(i,(0,r.e)(D(l,e.offset,n.offset))):s===o?i.push.apply(i,(0,r.e)(D(l,e.offset,l.length()))):s===a?i.push.apply(i,(0,r.e)(D(l,0,n.offset))):i.push.apply(i,(0,r.e)(D(l,0,l.length())))}return i}},592700:function(t,e,n){"use strict";n.d(e,{j:function(){return r}});var r=function(){function t(){this.Xn=new WeakMap,this.th=new WeakMap,this.nh=new WeakMap}var e=t.prototype;return e._setNode=function(t,e){document.contains(e),t._node=e,this._deleteNode(t),this._deleteNode(e),this.Xn.set(t,e),this.th.set(e,t)},e._resetNode=function(t){t._node=null},e._deleteNode=function(t){var e;t instanceof HTMLElement?((e=this.th.get(t))&&this.Xn.delete(e),this.th.delete(t)):((e=this.Xn.get(t))&&this.th.delete(e),this.Xn.delete(t))},e.getModel=function(t){return this.th.get(t)},e.getView=function(t){return this.Xn.get(t)},e._setLeaf=function(t,e){this.nh.set(t,e)},e._deleteLeaf=function(t){this.nh.delete(t)},e.getLeafModel=function(t){return this.nh.get(t)},e.destroy=function(){this.Xn=new WeakMap,this.th=new WeakMap,this.nh=new WeakMap},t}()},691945:function(t,e,n){"use strict";n.d(e,{H:function(){return d}});var r=n("862928"),i=n("55582");n("601325");var o=n("876212"),a=n("201264"),s=n("444324"),l=n("484060"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.d)(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.data,s=e.dataSet,l=void 0===s?{}:s,u=e.className,c=e.style,d=e.editor,s=n.op,e=n.parent;return"string"!=typeof s.insert?o.ZP.createElement(o.ZP.Fragment,null):(u=(0,r.b)((0,r.b)(((n={})[i.nV]=!0,n),l),{className:u,style:c}),null!==(c=s.attributes)&&void 0!==c&&c.enter&&(u[i.q7]=!0,e.isTextEmpty()&&d._isRenderBrInEmptyLine)?o.ZP.createElement(a.q,(0,r.b)({},u,{ref:function(e){var n,r;null!==(r=null===(n=t.props)||void 0===n?void 0:n._ref)&&void 0!==r&&r.call(n,e)}})):o.ZP.createElement(a.T,(0,r.b)({},u,{ref:function(e){var n,r;null!==(r=null===(n=t.props)||void 0===n?void 0:n._ref)&&void 0!==r&&r.call(n,e)}}),s.insert))},e}(o.ZP.Component);n("88648");var c=n("70298"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zs=!1,e.Xr=null,e.Vr=null,e.Qr=null,e.renderContext=null,e.$r=null,e.handleTextViewRef=function(t){t?e.ec(t):e.tc()},e.handleRef=function(t){e.props.editor.trace.add({extra:{refDom:!!t}}),t?e.nc(t):e.ic()},e}(0,r.d)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.sc(),this.rc(),this.zs=!0,this.props.editor.trace.add({type:"Mount"})},n.componentDidUpdate=function(){this.sc(),this.rc(),this.props.editor.trace.add({type:"Update"})},n.componentWillUnmount=function(){this.zs=!1,this.Vr&&this.viewModel._deleteLeaf(this.Vr),this.Xr&&this.viewModel._deleteLeaf(this.Xr);var t=this.Vr||this.Xr;t&&t.firstChild&&t.removeChild(t.firstChild),this.cc()},n.cc=function(){var t,e,n=this.props.state.reactInXInstanceList;try{for(var i=(0,r.c)(n),o=i.next();!o.done;o=i.next())o.value.unmount()}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},n.componentWillReceiveProps=function(t){var e=t.state,t=this.props.state;e.setNode(t.getNode()),e.reactInXInstanceList=t.reactInXInstanceList},n.shouldComponentForceUpdate=function(t){var e=t.state;return this.props.state.offset!==e.offset||(e=this.props.state.getNode(),this.oc(e)!==t.state.op.insert||!(null==e||!e.querySelector(".inline-code")))},n.oc=function(t){if(!t)return"";var e=t.querySelector("["+i.eu+"]");return e?e.getAttribute(i.eu):t.textContent},n.ec=function(t){this.Vr&&this.viewModel._deleteLeaf(this.Vr),this.Vr=t},n.tc=function(){this.Vr&&this.viewModel._deleteLeaf(this.Vr),this.Vr=null},n.nc=function(t){(this.Xr=t).hasAttribute(i.nV)&&t.hasAttribute(i.MB)&&(this.Vr=null)},n.ic=function(){this.Xr=null},n.rc=function(){var t,e,n;this.Xr&&(t=this.Xr,e=(n=this.props).state,n=n.editor,this.zs&&this.uc(t),t.__leafModel=this.leafModel,t.__index=e.index,t.__key=e.getCustomKey()||e.getKey(),n.trace.add({extra:{updateLeafNode:!!t,lineKey:null!==(n=null===(n=e.parent)||void 0===n?void 0:n.getKey())&&void 0!==n?n:null}}),e.setNode(t))},n.sc=function(){var t=this,e=t.Xr,n=t.Vr,t=t.viewModel;e&&t._setLeaf(e,this.leafModel),n&&t._setLeaf(n,this.leafModel)},Object.defineProperty(n,"viewModel",{get:function(){return this.props.editor._getViewModel()},enumerable:!1,configurable:!0}),Object.defineProperty(n,"leafModel",{get:function(){var t=this.props.state,e=t.op,n=t.parent;return{op:e,start:t.offset,lineState:n,index:t.index+(n.hasLineMarker()?1:0)}},enumerable:!1,configurable:!0}),n.lc=function(){var t=this.props,e=t.state,n=t.context,i=t.editor,a=i.trace,s=e.op,l=e.parent,t=o.ZP.createElement(u,{data:e,editor:i,_ref:this.handleTextViewRef});a.add({extra:{renderPluginsTextView:!!t,leavesCount:null!==(e=null==l?void 0:l.leaves.length)&&void 0!==e?e:0}}),i=(n=(0,c.ru)(l,s,t,(0,r.b)((0,r.b)({},n),{editor:i,zoneId:l.getZoneId(),index:l.index}))).view,n=n.renderContext,a.add({extra:{pluginRendererCustomView:!!i,leavesCount:null!==(l=null==l?void 0:l.leaves.length)&&void 0!==l?l:0}}),this.Qr=n,this.$r=i},n.preRender=function(){return this.lc(),{key:this.Qr.key}},n.render=function(){var t,e,n=this.props,s=n.state,l=n.context,c=s.op;this.Qr&&this.$r||this.lc();var d=this.$r,f=this.Qr,h=f.style,n=f.class,p=f.domAttributes,f=f.key;this.renderContext=this.Qr,this.$r=null,this.Qr=null,f&&s.setCustomKey(f),f={className:""},h&&(f.style=h),n&&(f.className=n),null!==(c=c.attributes)&&void 0!==c&&c.displayEnter&&(f.className+=" not-display-enter");var v={},g={},c=Object.keys(p);try{for(var y=(0,r.c)(c),m=y.next();!m.done;m=y.next()){var b=m.value;b.startsWith("data-")?g[b]=p[b]:v[b]=p[b]}}catch(e){t={error:e}}finally{try{m&&!m.done&&(e=y.return)&&e.call(y)}finally{if(t)throw t.error}}return l.class="",(null==d?void 0:d.type)===u?(d.props=(0,r.b)((0,r.b)((0,r.b)((0,r.b)({},d.props),g),v),((l={style:f.style,className:f.className})[i.MB]=!0,l._ref=this.handleRef,l)),d):d instanceof HTMLElement&&d.hasAttribute(i.nV)?this._c(d,(0,r.b)((0,r.b)((0,r.b)((0,r.b)({},d.props),v),{style:f.style,className:f.className}),g)):o.ZP.createElement(a.T,(0,r.b)({},f,v,g,((f={})[i.MB]=!0,f),{ref:this.handleRef}),d)},n._c=function(t,e){return e[i.MB]=!0,(0,s.T)(t,e),(0,l.F)([this.handleRef,t,null]),t},n.uc=function(t){var e=this;t.childNodes.forEach(function(t){var n=t.parentNode;if(n instanceof HTMLElement){if(t instanceof HTMLElement){var r=t.classList;if(t.hasAttribute(i.eu)||null!=r&&r.contains(i.Z6)||null!=r&&r.contains(i.rG))return}else if(t.nodeType===Node.TEXT_NODE&&!n.closest("["+i.nV+"]")&&!n.closest("["+i.VI+"]")&&!n.closest("["+i.sq+"]")&&t.textContent!==i.T6)return void n.removeChild(t);null!==(n=t.childNodes)&&void 0!==n&&n.length&&t instanceof HTMLElement&&e.uc(t)}})},e}(o.ZP.Component)},30706:function(t,e,n){"use strict";n.d(e,{T:function(){return m},Z:function(){return S}});var r,i,o=n("862928"),a=n("539725"),s=n("11622"),l=n("55582"),u=n("414818"),c=n("433500");n("601325");var d=n("757974"),f=n("900428"),h=n("88648"),p=n("290975");(r=i=i||{}).IMG="img",r.TEXT="span",r.VIEW="div";var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editor=e.context,e.option={},e._events={},e._selected=!1,e._ref=h.createRef(),e._prevSel=null,e._handleEditorSelectionChange=function(){var t;if(e.option.selectEventEnabled){var n,r,i,o=null;try{o=(0,d.Ve)(e._ref.current,e.editor)}catch(t){}o&&(n=e.editor.selection.getSelection(o.start.zoneId),r=!e._prevSel&&!n||!e._prevSel&&(null==n?void 0:n.isCollapsed())||(null===(t=e._prevSel)||void 0===t?void 0:t.isCollapsed())&&!n||(null===(r=e._prevSel)||void 0===r?void 0:r.isCollapsed())&&(null==n?void 0:n.isCollapsed()),e._prevSel=n,r||(r=o.start,o=o.end,(o=n&&n.start.zoneId===r.zoneId&&n.start<=r&&n.end>=o)&&!e._selected?(i=e._events.select,e._selected=!0,null!=i&&i.call(i)):!o&&e._selected&&(i=e._events.deselect,e._selected=!1,null!=i&&i.call(i))))}},e}(0,o.d)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.updateEventCb(),this.editor=this.context,this._bindEditorEvents()},n.componentDidUpdate=function(t){this.updateEventCb()},n.componentWillUnmount=function(){this.editor.off(c.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n.updateEventCb=function(){var t=this;this._events=Object.keys(this.props).filter(function(t){return t.startsWith("on")}).reduce(function(e,n){return e[(0,d.Le)(n)]=t.props[n],e},{})},n._bindEditorEvents=function(){var t=this;this.option.selectEventEnabled&&d.ZG.find(function(e){return t._events[e]})&&this.editor.on(c.r.SELECTION_CHANGE_AND_DOM_UPDATE,this._handleEditorSelectionChange)},n._triggerEventCallback=function(t,e){var n=this._events[t.type],r=(0,d.Br)(t);n&&(d.Dg.includes((0,d.J$)(e))&&(t=(0,d.Ve)(t.currentTarget,this.editor),r.evtTargetSelection=t),n.call(n,r))},n._handleSynthesisEvents=function(t){this._triggerEventCallback(t,t.nativeEvent)},n.render=function(){var t=this,e=this.tagName,n=Object.keys(this.props).reduce(function(e,n){return n.startsWith("on")?e[n]=d.eb.includes((0,d.Le)(n))?void 0:t._handleSynthesisEvents:e[n]=t.props[n],e},{});return h.createElement(e,(0,o.b)({ref:this._ref},n),this.props.children)},e.contextType=p.rU,(0,o.a)([a.W],e.prototype,"_bindEditorEvents",null),(0,o.a)([a.W],e.prototype,"_triggerEventCallback",null),(0,o.a)([a.W],e.prototype,"_handleSynthesisEvents",null),e}(h.PureComponent),g=n("459943"),y=["editor","length","disableDefaultSelected","forwardRef","onSelect","onDeselect","onKeyDown","autoSelectOnClick"],m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tagName=i.TEXT,e.option={viewportEventEnabled:!0,selectEventEnabled:!0},e._leftZeroSpaceRef=h.createRef(),e._rightZeroSpaceRef=h.createRef(),e.eo=new WeakMap,e.handleKeyDown=function(t){if(e.props.onKeyDown)return e.props.onKeyDown(t);if(e.to()){var n=t.keyCode,r=!1;switch(!0){case n===l.VD.Enter:r=e.so();break;case[l.VD.Left,l.VD.Right,l.VD.Up,l.VD.Down].includes(n):r=e.io(t)}r&&(t.stopEvent(),t.stopPropagation(),t.preventDefault(),t.preventEvent())}},e.updateLeafModel=function(){var t,n,r,i=e._ref.current;i&&((n=null==(t=null===(r=e._ref.current)||void 0===r?void 0:r.closest("["+l.MB+"]"))?void 0:t.__leafModel)&&(e.props.editor._getViewModel()._setLeaf(i,n),e.eo.set(i,n)),n&&n.lineState&&(r=n.op,i=n.lineState,i=n.index===i.getOps().length-2,null!=r&&r.attributes&&i&&(e.no(e._leftZeroSpaceRef.current),e.no(e._rightZeroSpaceRef.current),e.to()?u.Xh.mobile||requestAnimationFrame(function(){var t;null!==(t=null===(t=e._ref.current)||void 0===t?void 0:t.closest("["+l.PI+"]"))&&void 0!==t&&t.setAttribute("contenteditable","false")}):t.style.margin="0 0.1px")))},e.ro=function(t){},e.oo=function(t){t&&(e.to()?t.style.display="block":t.style.display="auto")},e}(0,o.d)(e,t);var n=e.prototype;return Object.defineProperty(n,"_length",{get:function(){var t=this.props.length;return"number"==typeof t&&isFinite(t)?Math.max(t,1):1},enumerable:!1,configurable:!0}),n.handleDeleteKey=function(t){var e=t.e,n=t.stopEvent,r=t.preventEvent,i=t.isBackward,o=this.props.editor,a=o.selection.getSelection(),l=a.toPosition(),u=l.zoneId,c=l.start;if(a.isCollapsed()&&(this.to()||1!==this._length)){var d=this.getSelectionOfCurrentRef();if(d){var f=o.getContentState(),h=a.start,p=h.line,v=h.offset,t=i?d.end:d.start,l=p+-1*(i?1:-1),h=f.getZoneState(u);if(h){var g,p=h.getLine(p);if(this.to()&&t.line===l&&p&&v===(i?p.getLineMarker():p.length()-1)&&t.zoneId===a.start.zoneId)return n(),r(),e.preventDefault(),e.stopPropagation(),p.isTextEmpty()&&(g=new s.I({zoneId:u}),i?(p=p.getLineMarker()+1,g.retain(c-p).delete(p)):(g.retain(c).delete(1),d.start.line--,d.end.line--),f.apply(g)),void o.selection.setSelection(d,!0);t.line===a.start.line&&t.offset===a.start.offset&&(n(),r(),e.preventDefault(),e.stopPropagation(),(g=new s.I({zoneId:u})).retain(c+(i?-1*this._length:0)).delete(this._length),f.apply(g))}}}},n.so=function(){if(!this.isFocusOnMe())return!1;var t=this.getSelectionOfCurrentRef();if(!t)return!1;var e=this.editor.getContentState(),n=t.start,r=n.zoneId,t=n.line,n=null===(n=e.getZoneState(r))||void 0===n?void 0:n.getLine(t);return!!(n&&(t=e.rangePointToOffset({line:t,zoneId:r,offset:n.length()-1})))&&(n=new s.I({zoneId:r}).retain(t).insertEnterAndLineMarker(),e.apply(n),this.editor.selection.setSelection({start:t+2,len:0,zoneId:r}),!0)},n.io=function(t){var e,n=this.getSelectionOfCurrentRef();if(!n)return!1;var r=n.start,i=r.zoneId,o=r.line,a=this.editor.selection.getSelection(),s=a.start,u=a.end,c=s.line,d=s.offset,f=s.zoneId,r=u.line,a=u.offset;if(i!==f)return!1;var h={start:n.start,end:n.end},p=this.editor.getContentState().getZoneState(f);if(!p)return!1;if(this.isFocusOnMe()){switch(t.keyCode){case l.VD.Left:case l.VD.Up:h.start.line=Math.max(0,o-1),h.start.offset=(null!==(e=null===(e=p.getLine(h.start.line))||void 0===e?void 0:e.length())&&void 0!==e?e:1)-1,h.end=h.start;break;case l.VD.Right:case l.VD.Down:h.start.line=Math.min(p.length()-1,o+1),h.start.offset=null!==(e=null===(e=p.getLine(h.start.line))||void 0===e?void 0:e.getLineMarker())&&void 0!==e?e:0,h.end=h.start;break;default:return!1}return this.editor.selection.setSelection(h,!0),!0}return(c===o+1&&(t.keyCode===l.VD.Up&&this.uo(s)||t.keyCode===l.VD.Left&&d===(null===(c=null==p?void 0:p.getLine(c))||void 0===c?void 0:c.getLineMarker()))||!(r!==o-1||!(t.keyCode===l.VD.Down&&this.lo(u)||t.keyCode===l.VD.Right&&a+1===(null===(r=null==p?void 0:p.getLine(r))||void 0===r?void 0:r.length()))))&&(this.editor.selection.setSelection(h=n,!0),!0)},n.uo=function(t){var e=null===(n=this.editor.getContentState().getZoneState(t.zoneId))||void 0===n?void 0:n.getLine(t.line);if(!e)return!1;var n=e.getLineMarker(),e=this.editor.rectModule.getCaretRect(t,t.zoneId),t=this.editor.rectModule.getCaretRect({line:t.line,offset:n,zoneId:t.zoneId},t.zoneId);return e.top===t.top},n.lo=function(t){var e=null===(n=this.editor.getContentState().getZoneState(t.zoneId))||void 0===n?void 0:n.getLine(t.line);if(!e)return!1;var n=this.editor.rectModule.getCaretRect(t,t.zoneId),t=this.editor.rectModule.getCaretRect({line:t.line,offset:e.length()-1,zoneId:t.zoneId},t.zoneId);return n.bottom===t.bottom},n.isFocusOnMe=function(){var t=null===(e=this.getSelectionOfCurrentRef())||void 0===e?void 0:e.toPosition();if(!t)return!1;var e=this.editor.selection.getSelection().toPosition();return t.start===e.start&&t.len===e.len&&t.zoneId===e.zoneId},n.shouldComponentUpdate=function(){return!0},n.componentDidUpdate=function(e){t.prototype.componentDidUpdate.call(this,e),this._ref.current&&(this.handleRef(this._ref.current),this.updateLeafModel()),e=this.getZoneIdByCurrentRef(),this.props.editor.once(c.r.PAINT,this.updateLeafModel,{zoneId:e})},n.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.getZoneIdByCurrentRef();this.props.editor.on(c.r.DELETE_KEY,this.handleDeleteKey,{zoneId:e,priority:900}),this.props.editor.on(c.r.KEYDOWN,this.handleKeyDown,{zoneId:e,priority:900}),this.props.editor.once(c.r.PAINT,this.updateLeafModel,{zoneId:e})},n.componentWillUnmount=function(){var e;t.prototype.componentWillUnmount.call(this),this.props.editor.off(c.r.DELETE_KEY,this.handleDeleteKey),this.props.editor.off(c.r.KEYDOWN,this.handleKeyDown),this._ref&&this._ref.current&&this.props.editor._getViewModel()._deleteLeaf(this._ref.current),this.to()&&null!==(e=null===(e=this._ref.current)||void 0===e?void 0:e.closest("["+l.PI+"]"))&&void 0!==e&&e.removeAttribute("contenteditable")},n.to=function(){var t=(this._ref.current&&this.eo.get(this._ref.current)||{}).op,e=null==t?void 0:t.attributes;return!!e&&(t=this.props.editor.getContentState().schema,(0,f.ky)(e,t))},n.getZoneIdByCurrentRef=function(){var t=null!==(t=this._rightZeroSpaceRef.current)&&void 0!==t?t:this._ref.current;return(null===(t=null===(t=null==t?void 0:t.closest("["+l.P9+"]"))||void 0===t?void 0:t.dataset)||void 0===t?void 0:t.zoneId)||""},n.getSelectionOfCurrentRef=function(){if(!this._rightZeroSpaceRef.current&&!this._ref.current)return null;var t=null!==(t=this._rightZeroSpaceRef.current)&&void 0!==t?t:this._ref.current,t=(0,d.Ve)(t,this.props.editor);return t||null},n.handleMouseDown=function(t){var e;!1===this.props.autoSelectOnClick||(e=this.getSelectionOfCurrentRef())&&(u.Xh.isAndroid&&this.props.editor.getStatus("isComposing")&&this.editor._correctCompositionIfNecessary(t),this.props.editor.selection.setSelection(e),this.props.editor.selection.updateBrowserSelection(!0))},n._handleMouseDown=function(t){this.handleMouseDown(t)},n.handleRef=function(t){t&&(this._ref.current=t)},n.handleRightZeroSpaceRef=function(t){t&&(this.props.forwardRef&&(this.props.forwardRef.current=t),this._rightZeroSpaceRef.current=t,this.ro(t))},n.handleLeftZeroSpaceRef=function(t){t&&(this._leftZeroSpaceRef.current=t)},n.no=function(t){t&&(this.to()?(t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.style.display="inline-block"):(t.style.position="",t.style.width="auto",t.style.height="auto",t.style.display="auto"))},n.render=function(){var t,e=this,n=Object.keys(this.props).reduce(function(t,n){return y.includes(n)||(n.startsWith("on")?t[n]=d.eb.includes((0,d.Le)(n))?void 0:e._handleSynthesisEvents:t[n]=e.props[n]),t},{});return u.Xh.ios&&(n.style=Object.assign({WebkitUserSelect:"none"},n.style)),h.createElement("span",(0,o.b)({},((t={})[l.Pk]=!0,t),{ref:this.oo}),h.createElement(g.B,{key:""+Math.random(),ref:this.handleLeftZeroSpaceRef}),h.createElement("span",(0,o.b)({},((t={})[l.eu]=" ".repeat(this._length),t),{contentEditable:!1,ref:this.handleRef,onMouseDown:this._handleMouseDown},n),this.props.children,this.props.disableDefaultSelected&&h.createElement(g.B,{ref:this.handleRightZeroSpaceRef})))},(0,o.a)([a.W],e.prototype,"handleDeleteKey",null),(0,o.a)([a.W],e.prototype,"_handleMouseDown",null),(0,o.a)([a.W],e.prototype,"handleRef",null),(0,o.a)([a.W],e.prototype,"handleRightZeroSpaceRef",null),(0,o.a)([a.W],e.prototype,"handleLeftZeroSpaceRef",null),e}(v),b=h.forwardRef(function(t,e){return h.createElement(m,(0,o.b)({},t,{forwardRef:e}))}),S=(0,p.eT)(b)},70298:function(t,e,n){"use strict";n.d(e,{CL:function(){return f},ru:function(){return d},wo:function(){return h}});var r=n(862928),i=n(944288),o=n(55582);n(601325);var a=n(356205),s=n(526969),l=n(50034),u=n(88648),c=n(830025);function d(t,e,n,a){var l=this,c=(0,r.b)({},e.attributes||{}),d={op:e,lineState:t,attributes:c,insert:e.insert,domAttributes:{},children:n,class:a.class||"",lineClass:a.lineClass||"",style:a.style||{},key:"",index:a.index,zoneId:a.zoneId};return f({attributes:c,zoneId:a.zoneId,editor:a.editor}).forEach(function(t){var c,f,h,p;try{e.insert===o.Ed&&(null===(c=e.attributes)||void 0===c?void 0:c.enter)?t.renderLinefeed&&(p=t.renderLinefeed(d),d=(0,r.b)((0,r.b)({},d),{children:null!=p?p:n})):t.render&&(p=t.render(d),(0,u.isValidElement)(p)&&(0,s.l$)(n)&&null!==(h=null===(f=p.props)||void 0===f?void 0:f.className)&&void 0!==h&&h.includes(o.SX)&&l.props.editor.error({message:"plugin render failed! Objects are not valid as a React child: object info "+JSON.stringify({type:"symbol"==typeof n.type?Symbol.keyFor(n.type):n.type,ref:n.ref,className:n.props.className}),level:i.W.ERROR}),d=(0,r.b)((0,r.b)({},d),{children:null!=p?p:n}))}catch(e){a.editor.error({message:t.name+" plugin render failed! Index: "+a.index,level:i.W.ERROR})}}),{view:d.children,renderContext:d}}function f(t){var e=t.attributes,n=t.editor,r=t.zoneId,i=new Set;return Object.keys(e).forEach(function(t){""===e[t]||(t=n.pluginManager._matchPlugin({attributeKey:t,value:e[t],zoneId:r,attributes:e}))&&i.add(t)}),(0,c.iI)(Array.from(i),"render")}function h(t,e,n){for(var i,o=[],u=0,c=0;c<t.length;c++){var d,f=t[c];(p=n(f)).hasWrapper&&((d=o.length?o[o.length-1]:null)&&(0,a.z)(d.wrappers,p.elements)&&u+1===f.index?(u=f.index,d.wrapperKey+=""+l.rC+f.key,d.wrappedChildren.push(e[c])):(d={wrappedChildren:[e[c]],wrappers:p.elements,wrapperKey:""+l.Gm+f.key,startIndexInLines:c},u=f.index,o.push(d)))}if(o.length)for(var h=o.length;0<=--h;){var p,v=(p=o[h]).wrapperKey,g=p.startIndexInLines,y=p.wrappedChildren,m=function(t,e){var n=t.wrappers,i=t.wrapperKey;return n.reduce(function(t,e){return t=Array.isArray(t)?t:[t],s.Tm.apply(void 0,(0,r.e)([e,{ref:function(t){t&&(t.__key=i)}}],t))},e)}(p,y);m instanceof HTMLElement?m.__key=v:null!==(i=null==m?void 0:m.props)&&void 0!==i&&i.key&&(m.props.key=v),e.splice(g,y.length,m)}}},471448:function(t,e,n){"use strict";n.d(e,{p:function(){return E},a:function(){return u},b:function(){return d},d:function(){return h},f:function(){return v},B:function(){return I},C:function(){return C},D:function(){return g},i:function(){return c},k:function(){return y},n:function(){return b},o:function(){return S}});var r=n("479607"),i=n("866152"),o=n("209239");n("750343");function a(t,e){return void 0===e&&(e=!0),Object.keys(t).reduce(function(n,r){return!1!==e||t[r]?(n[r]="string"==typeof t[r]?t[r]:String(t[r]),n):n},{})}var s=function(){function t(t){this.ops=t,this.index=0,this.offset=0}var e=t.prototype;return e.hasNext=function(){return this.peekLength()<1/0},e.next=function(t){!t&&(t=1/0);var e=this.ops[this.index];if(!e)return{retain:1/0};var n=this.offset,r=u(e);if(t>=r-n?(t=r-n,this.index+=1,this.offset=0):this.offset+=t,c(e))return{delete:t};var i={};return e.attributes&&(i.attributes=e.attributes),d(e)?i.retain=t:h(e)?i.insert=e.insert.substr(n,t):i.insert=e.insert,i},e.peek=function(){return this.ops[this.index]},e.peekLength=function(){return this.ops[this.index]?u(this.ops[this.index])-this.offset:1/0},e.peekType=function(){return this.ops[this.index]?v(this.ops[this.index]):i.HP.RETAIN},e.rest=function(){if(!this.hasNext())return[];if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(r)},t}();function l(t){return new s(t)}function u(t){if(c(t))return t.delete;if(d(t))return t.retain;if(h(t))return t.insert.length;if(p(t))return 1;throw Error("op is unknown")}function c(t){return"number"==typeof(null==t?void 0:t.delete)}function d(t){return"number"==typeof(null==t?void 0:t.retain)}function f(t){return h(t)||p(t)}function h(t){return"string"==typeof(null==t?void 0:t.insert)}function p(t){return"object"==typeof(null==t?void 0:t.insert)}function v(t){var e;if(c(t))return i.HP.DELETE;if(d(t))return i.HP.RETAIN;if(h(e=t)||p(e))return i.HP.INSERT;throw Error("op is unknown")}var g=function(){function t(t,e){void 0===t&&(t={}),(e=null!=e?e:Object.keys(t).some(function(e){return t[e]instanceof I||!1}))?this._deltas=t:this._deltas=Object.keys(t).reduce(function(e,n){return e[n]=C(t[n]),e},{})}var e=t.prototype;return Object.defineProperty(e,"deltas",{get:function(){return this._deltas},enumerable:!1,configurable:!0}),e.get=function(t){return this._deltas[t]},e.compose=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this._call("compose",t,{keepEmptyAttributes:e,immutable:n})},e.concat=function(t){return this._call("concat",t)},e.invert=function(e){var n=new t;if(m(e))n=new t().add(e.zoneId,e);else if(b(e))n=e;else throw Error("DeltaSet invert data is wrong");return this.reduce(function(t,e){var r=n.get(e.zoneId)||e.create({zoneId:e.zoneId}),i=e.invert(r);return t.compose(i)},new t)},e.transform=function(e,n){var r=this;if(void 0===n&&(n=!1),m(e))return e.zoneId in this.deltas?this.deltas[e.zoneId].transform(e,n):e;if(b(e))return new t(e.reduce(function(t,e){return t[e.zoneId]=r.transform(e,n),t},{}));throw Error("DeltaSet call data is wrong")},e.delete=function(t){return delete this._deltas[t],this},e.add=function(t,e){if(m(t)){var n=t.zoneId;this._deltas[n]=t}else{if(!e)return this;var n=t;if(e.zoneId!==n)return this;this._deltas[n]=e}return this},e.replace=function(t,e){return this.delete(t).add(e.zoneId,e),this},e._call=function(e,n,r){if(m(n))return this._callDeltaFunc(e,n,r);if(b(n)){var i=new t(this.deltas);return n.forEach(function(t){i=i._callDeltaFunc(e,t,r)}),i}throw Error("DeltaSet call: data: "+n+" is not Delta or DeltaSet")},e._callDeltaFunc=function(e,n,i){var o=Object.assign({keepEmptyAttributes:!0,immutable:!0},i),a=n.zoneId,s=o.immutable?(0,r.a)({},this.deltas):this.deltas;if(this.deltas[a])s[a]=this.deltas[a][e](n,o.keepEmptyAttributes);else{var l=n.zoneType;s[a]=n.create({zoneId:a,zoneType:l})[e](n,o.keepEmptyAttributes)}return new t(s,!0)},e.reduce=function(t,e){var n=this;return Object.keys(this._deltas).map(function(t){return n._deltas[t]}).reduce(t,e)},e.forEach=function(t){var e,n;try{for(var i=(0,r.b)(Object.entries(this._deltas)),o=i.next();!o.done;o=i.next()){var a=(0,r._)(o.value,2),s=a[0],l=a[1];t(l,s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t}();function y(t){return t.insert===i.F5&&t.attributes&&t.attributes.lmkr}function m(t){return Object.values(i.Ak).includes(t.zoneType)}function b(t){return void 0!==t.deltas}function S(t){var e;return!t||(null===(e=null==t?void 0:t.ops)||void 0===e?void 0:e.length)===0}function E(t){if(!t)return!0;var e=t.deltas,n=Object.keys(e);return 0===n.length||!n.some(function(t){return!S(e[t])})}var I=function(){function t(){this.ops=[]}var e=t.prototype;return t.registerCreator=function(e,n){t.creators.set(e,n)},t.getCreator=function(e){return t.creators.get(e)},e.insert=function(t,e,n){if(void 0===n&&(n=!0),"string"==typeof t&&0===t.length)return this;var r={insert:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(r.attributes=a(e,n)),this.push(r)},e.delete=function(t){return t<=0?this:this.push({delete:t})},e.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=a(e)),this.push(n)},e.forEach=function(t){this.ops.forEach(t)},e.eachLine=function(t,e){void 0===e&&(e=i.K5);for(var n=l(this.ops),r=0,o={},a=[];n.hasNext();){if(n.peekType()!==i.HP.INSERT)return;var s=n.peek();y(s)&&(o=s.attributes||{});var c=u(s)-n.peekLength(),d="string"==typeof s.insert?s.insert.indexOf(e,c)-c:-1;if(d<0)a.push(n.next());else{if(a.push(n.next(d+1)),!1===t(this.create({zoneId:this.zoneId,ops:a}),o,r))return;a=[],o={},r+=1}}var f=this.create({zoneId:this.zoneId,ops:a});f.length()>0&&t(f,o,r)},e.push=function(t){if(c(t)&&t.delete<=0||d(t)&&t.retain<=0||h(t)&&0===t.insert.length)return this;var e,n,i=this.ops.length,a=this.ops[i-1];if(e=t,n=(0,r.a)({},e),e.attributes&&(n.attributes=(0,r.a)({},e.attributes)),t=n,"object"==typeof a){if(c(t)&&c(a))return this.ops[i-1]={delete:a.delete+t.delete},this;if((0,o.X)(t.attributes,a.attributes)){if(h(t)&&h(a))return this.ops[i-1]={insert:a.insert+t.insert},"object"==typeof t.attributes&&(this.ops[i-1].attributes=t.attributes),this;if(d(t)&&d(a))return this.ops[i-1]={retain:a.retain+t.retain},"object"==typeof t.attributes&&(this.ops[i-1].attributes=t.attributes),this}}return i===this.ops.length?this.ops.push(t):this.ops.splice(i,0,t),this},e.compose=function(t,e){if(void 0===e&&(e=!0),!1===e){var n=t.zoneId,s=t.zoneType;t=t.reduce(function(t,n){return n.insert&&n.attributes&&(n.attributes=a(n.attributes,e)),t.push(n),t},this.create({zoneId:n,zoneType:s}))}var u=l(this.ops),f=l(t.ops),p=[],v=f.peek();if(null!=v&&d(v)&&null==v.attributes){for(var g=v.retain;u.peekType()===i.HP.INSERT&&u.peekLength()<=g;)g-=u.peekLength(),p.push(u.next());v.retain-g>0&&f.next(v.retain-g)}for(var y=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:p});u.hasNext()||f.hasNext();)if(f.peekType()===i.HP.INSERT)y.push(f.next());else if(u.peekType()===i.HP.DELETE)y.push(u.next());else{var m=Math.min(u.peekLength(),f.peekLength()),b=u.next(m),S=f.next(m);if(c(S)&&h(b));else if(c(S)&&d(b))y.push(S);else if(d(S)){var E={};d(b)?E.retain=m:E.insert=b.insert;var I=function(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i=(0,r.a)({},e);for(var o in!n&&(i=Object.keys(i).reduce(function(t,e){return null!==i[e]&&""!==i[e]&&(t[e]=i[e]),t},{})),t)void 0!==t[o]&&void 0===e[o]&&(i[o]=t[o]);return Object.keys(i).length>0?i:void 0}(b.attributes,S.attributes,e);if(I&&(E.attributes=I),y.push(E),!f.hasNext()&&(0,o.X)(y.ops[y.ops.length-1],E)){var C=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:u.rest()});return y.concat(C).chop()}}}return y.chop()},e.concat=function(t){var e=this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:this.ops.slice()});return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},e.length=function(){return this.reduce(function(t,e){return t+u(e)},0)},e.reduce=function(t,e){return this.ops.reduce(t,e)},e.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},e.transform=function(t,e){if(void 0===e&&(e=!1),e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=l(this.ops),r=l(t.ops),o=this.create({zoneId:this.zoneId,zoneType:this.zoneType});n.hasNext()||r.hasNext();)if(n.peekType()===i.HP.INSERT&&(e||r.peekType()!==i.HP.INSERT))o.retain(u(n.next()));else if(r.peekType()===i.HP.INSERT)o.push(r.next());else{var a=Math.min(n.peekLength(),r.peekLength()),s=n.next(a),d=r.next(a);if(c(s))continue;c(d)?o.push(d):o.retain(a,function(t,e,n){if(void 0===t&&(t={}),void 0===e&&(e={}),void 0===n&&(n=!1),"object"!=typeof t)return e;if("object"==typeof e){if(!n)return e;var r=Object.keys(e).reduce(function(n,r){return void 0===t[r]&&(n[r]=e[r]),n},{});return Object.keys(r).length>0?r:void 0}}(s.attributes,d.attributes,e))}return o.chop()},e.transformPosition=function(t,e){void 0===e&&(e=!1),e=!!e;for(var n=l(this.ops),r=0;n.hasNext()&&r<=t;){var i=n.peekLength(),o=n.peekType();if(n.next(),"delete"===o){t-=Math.min(i,t-r);continue}"insert"===o&&(r<t||!e)&&(t+=i);r+=i}return t},e.slice=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1/0);for(var n=[],r=l(this.ops),i=0;i<e&&r.hasNext();){var o=void 0;i<t?o=r.next(t-i):(o=r.next(e-i),n.push(o)),i+=u(o)}return this.create({zoneId:this.zoneId,zoneType:this.zoneType,ops:n})},e.invert=function(t){var e=this.create({zoneId:this.zoneId,zoneType:this.zoneType});return this.reduce(function(n,r){var i;if(h(i=r)||p(i))e.delete(u(r));else if(d(r)&&!r.attributes)return e.retain(r.retain),n+r.retain;else if(c(r)||d(r)&&r.attributes){var o=r.delete||r.retain;return t.slice(n,n+o).forEach(function(t){if(c(r))e.push(t);else if(d(r)&&r.attributes){var n,i,o;e.retain(u(t),(n=r.attributes,i=t.attributes,void 0===n&&(n={}),void 0===i&&(i={}),n=n||{},o=Object.keys(i).reduce(function(t,e){return i[e]!==n[e]&&void 0!==n[e]&&(t[e]=i[e]),t},{}),Object.keys(n).reduce(function(t,e){return n[e]!==i[e]&&void 0===i[e]&&(t[e]=""),t},o)))}}),n+o}return n},0),e.chop()},t.creators=new Map,t}();function C(t){var e=I.getCreator(t.zoneType);return new e(t)}},866152:function(t,e,n){"use strict";n.d(e,{Ak:function(){return a},F5:function(){return l},HP:function(){return o},K5:function(){return s}}),(r=o||(o={})).DELETE="delete",r.RETAIN="retain",r.INSERT="insert",(i=a||(a={})).Content="Z",i.Row="R",i.Column="C";var r,i,o,a,s="\n",l="*";a.Content,a.Row,a.Column},479607:function(t,e,n){"use strict";n.d(e,{_:function(){return s},a:function(){return o},b:function(){return a},c:function(){return i}});var r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}},11622:function(t,e,n){"use strict";n.d(e,{I:function(){return a}});var r=n("479607"),i=n("866152");n("750343");var o=n("471448"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,r.c)(e,t);var n=e.prototype;return n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},n.insert=function(e,n){return t.prototype.insert.call(this,e,n,!1)},n.insertLineMarker=function(t){void 0===t&&(t={});var e=Object.assign({lmkr:1},t);return this.insert(i.F5,e),this},n.insertEnterAndLineMarker=function(t){this.insert(i.K5,t&&t.enterAttributes?t.enterAttributes:{});var e=Object.assign({lmkr:1},t&&t.lineAttributes?t.lineAttributes:{});return this.insert(i.F5,e),this},e}(function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.ops=[];var r=e.zoneId,o=e.ops;return n.zoneId=r||"0",n.zoneType=i.Ak.Content,o&&o.length>0&&(n.ops=o),n}(0,r.c)(e,t);var n=e.prototype;return n.create=function(t){return t.zoneType=t.zoneType||this.zoneType,new e(t)},n.insertEnter=function(t){return void 0===t&&(t={}),this.insert(i.K5,t),this},n.insertEnterAndLineMarker=function(t){return this},n.insertLineMarker=function(t){return this},e}(o.B));o.B.registerCreator(i.Ak.Content,a)},752440:function(t,e,n){"use strict";n.d(e,{Z:function(){return s},a:function(){return l}});var r=n(278093),i=n(484060);n(88648),n(309931);var o=n(354930),a=n(526969);function s(t,e,n,s){if(!n)return;var l,u,c,d,f,h=(s||{}).PluginContextProvider;h&&(0,i.RM)(h),(0,i.aZ)("DOM"),i.L3.length=0;var p=(0,a.az)(t,e);if(h&&(0,i.RM)(null),!!p){Array.isArray(p)?n.append.apply(n,(0,r.d)(p)):n.append(p);for(var v=[];i.L3.length;){var g=(0,r.b)(null!==(l=i.L3.shift())&&void 0!==l?l:[],3),y=g[0],m=g[1],b=g[2];if(!(!b&&Array.isArray(m))){if((0,o.AL)(b))for(var S=0;S<i.L3.length;++S){var E=(0,r.b)(i.L3[S],3)[2];if((null===(c=null===(u=null==E?void 0:E.props)||void 0===u?void 0:u.state)||void 0===c?void 0:c.reactInXInstanceList)&&Array.isArray(E.props.state.reactInXInstanceList)&&E.renderContext){b.props.pluginRenderContext=E.renderContext;break}}if(null==y||y(b||m||null),null==b||b.componentDidMount(),(null===(f=null===(d=null==b?void 0:b.props)||void 0===d?void 0:d.state)||void 0===f?void 0:f.reactInXInstanceList)&&Array.isArray(b.props.state.reactInXInstanceList)){var I=b.props.state.reactInXInstanceList;I.splice.apply(I,(0,r.d)([0,I.length],v)),v.length=0}(0,o.AL)(b)&&v.push(b)}}return p}}function l(t){(function t(e){try{for(var n,i,o,a,s,l,u=(0,r.a)(e),c=u.next();!c.done;c=u.next()){var d=c.value;if(!!(null==d?void 0:d.instance)){d.instance.componentWillUnmount();var f=null===(s=d.instance.props.editor)||void 0===s?void 0:s.getFg("enableVirtualMemoryOptimize"),h=null===(l=d.instance)||void 0===l?void 0:l.state;d.instance=null,f&&d.setNode(null);var p=h||d,v=null==p?void 0:p.reactInXInstanceList;if(Array.isArray(v)){try{for(var g=(o=void 0,(0,r.a)(v)),y=g.next();!y.done;y=g.next())y.value.unmount()}catch(t){o={error:t}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}f&&(p.reactInXInstanceList=[])}var m=p.getState();t(Array.isArray(m)?m:[m])}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}})([t])}},592580:function(t,e,n){"use strict";n.d(e,{y:function(){return i}});var r=n(278093),i=function(t){function e(e){var n=t.call(this)||this;return n.props=e,n}return(0,r.c)(e,t),e.prototype.render=function(){return null},e}(function(){function t(){}var e=t.prototype;return e.componentDidMount=function(){},e.componentDidUpdate=function(t){},e.componentWillUnmount=function(){},e.shouldComponentForceUpdate=function(t,e){return!1},e.componentWillReceiveProps=function(t){},t}());i.prototype.isXComponent=!0},368694:function(t,e,n){"use strict";n.d(e,{A:function(){return d},BG:function(){return s},Br:function(){return f},D_:function(){return p},HY:function(){return i},Li:function(){return c},Nh:function(){return h},Ol:function(){return u},Ul:function(){return l},ZC:function(){return o},xv:function(){return a}});var r,i=Symbol.for("x.fragment"),o=Symbol.for("x.div"),a=Symbol.for("x.text"),s=Symbol.for("x.zero_space"),l=Symbol.for("x.ul"),u=Symbol.for("x.ol"),c=Symbol.for("x.li"),d=Symbol.for("x.a"),f=Symbol.for("x.br"),h=Symbol.for("x_element_type"),p=((r={})[o]="div",r[a]="span",r[s]="span",r[l]="ul",r[u]="ol",r[c]="li",r[d]="a",r[f]="br",r)},50034:function(t,e,n){"use strict";n.d(e,{A5:function(){return a},Gm:function(){return c},T6:function(){return u},Uu:function(){return l},rC:function(){return d}});var r,i,o,a,s,l,u="â€‹";(r=a||(a={})).ATTACH_REF="ATTACH_REF",r.DETACH_REF="DETACH_REF",r.DID_MOUNT="DID_MOUNT",r.DID_UPDATE="DID_UPDATE",r.WILL_UNMOUNT="WILL_UNMOUNT",r.REACT_IN_X_FORCE_UPDATE="REACT_IN_X_FORCE_UPDATE";var c="M-",d="-";(i=s||(s={}))[i.EQUAL=0]="EQUAL",i[i.UNEQUAL=1]="UNEQUAL",i[i.UPDATE=2]="UPDATE",(o=l||(l={}))[o.ZONE=0]="ZONE",o[o.LINE_UPDATE=1]="LINE_UPDATE",o[o.LINE_CONSTANT=2]="LINE_CONSTANT",o[o.LINE_INSERT=3]="LINE_INSERT",o[o.LINE_DELETE=4]="LINE_DELETE",o[o.LEAF_UPDATE=5]="LEAF_UPDATE",o[o.LEAF_CONSTANT=6]="LEAF_CONSTANT",o[o.LEAF_INSERT=7]="LEAF_INSERT",o[o.LEAF_DELETE=8]="LEAF_DELETE"},607996:function(t,e,n){"use strict";n.d(e,{C:function(){return o},b:function(){return i}});var r=n(368694);function i(t){return t===r.ZC||t===r.xv||t===r.BG||t===r.Ul||t===r.Ol||t===r.Li||t===r.A||t===r.Br}function o(t){return t===r.HY}},604630:function(t,e,n){"use strict";var r=n(720595);e.Z=function(t){return("symbol"==typeof t||"function"==typeof t)&&("symbol"!=typeof t||!!r.w[t])&&("function"!=typeof t||!t.prototype||!!t.prototype.isXComponent)||!1}},354930:function(t,e,n){"use strict";n.d(e,{AL:function(){return d},CR:function(){return c},I2:function(){return u}});var r=n(278093),i=n(484060),o=n(88648),a=n(953445),s=n(309931),l=n(592580),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(0,r.c)(e,t);var n=e.prototype;return n.getComponent=function(){var t,e,n,i=this.props,s=i.reactElement,l=i.ReactContextProvider,u=i.pluginRenderContext;return t=s,e=l,n=u,function(i){function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.state={renderContext:n},t}return(0,r.c)(s,i),s.prototype.render=function(){var n=Array.isArray(t)?t:[t];return o.createElement(a.x.Provider,{value:{renderContext:this.state.renderContext}},e?o.createElement.apply(o,(0,r.d)([e,null],n)):n)},s}(o.Component)},n.componentDidMount=function(){var t=this,e=this.props.container;if(!!e){var n=this.getComponent();s.render(o.createElement(n,{ref:function(e){t.reactComponentRef=e}}),e)}},n.componentWillUnmount=function(){var t=this.props.container;t&&s.unmountComponentAtNode(t)},n.unmount=function(){var t=this.props.container;t&&s.unmountComponentAtNode(t)},n.forceUpdate=function(t){var e;null===(e=this.reactComponentRef)||void 0===e||e.setState({renderContext:t})},n.render=function(){if((0,i.hb)()){var t=this.getComponent(),e=i.Yn.renderToStaticMarkup(o.createElement(t,null)),n=document.createElement("div");return n.innerHTML=e,n.firstChild}return null},e.type="ReactInX",e}(l.y);function c(t){return(null==t?void 0:t.type)===u.type}function d(t){return t&&t instanceof u}},953445:function(t,e,n){"use strict";n.d(e,{v:function(){return o},x:function(){return i}});var r=n(88648),i=r.createContext({renderContext:null}),o=function(t){return r.createElement(i.Consumer,null,function(e){return t(e.renderContext)})}},296186:function(t,e,n){"use strict";n.d(e,{x:function(){return o}});var r=n(484060);n(88648);var i=n(953445);function o(){return function(t,e,n){var o=n.value;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this,a=o.apply(n,t);return(0,i.v)(function(t){return(0,r.hb)()?a:t?o.apply(n,[t]):null})}}}},159589:function(t,e,n){"use strict";n.d(e,{l:function(){return i}});var r=n(88648),i=function(t){return r.isValidElement(t)}},720595:function(t,e,n){"use strict";n.d(e,{w:function(){return l}});var r,i=n("368694"),o=n("444324"),a=n("278093"),s=n("50034"),l=((r={})[i.HY]=function(){},r[i.ZC]=function(t){var e=document.createElement("div");return(0,o.T)(e,t),e},r[i.xv]=function(t){var e=t.content,n=(0,a._)(t,["content"]),r=document.createElement("span");return(0,o.T)(r,n),"string"==typeof e&&(r.textContent=e),r},r[i.BG]=function(t){var e=document.createElement("span");return(0,o.T)(e,t),e.setAttribute("data-zero-space","true"),e.textContent=s.T6,e},r[i.Ul]=function(t){var e=document.createElement("ul");return(0,o.T)(e,t),e},r[i.Ol]=function(t){var e=document.createElement("ol");return(0,o.T)(e,t),e},r[i.Li]=function(t){var e=document.createElement("li");return(0,o.T)(e,t),e},r[i.A]=function(t){var e=document.createElement("a");return(0,o.T)(e,t),e},r[i.Br]=function(t){var e=document.createElement("br");return(0,o.T)(e,t),e},r)},278093:function(t,e,n){"use strict";n.d(e,{_:function(){return a},a:function(){return s},b:function(){return l},c:function(){return i},d:function(){return u},e:function(){return o}});var r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)0>e.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}},444324:function(t,e,n){"use strict";n.d(e,{T:function(){return i}});var r=n(278093);function i(t,e){var n,i,o,a,s,l,u,c,d,f,h=e.on,p=void 0===h?{}:h,v=e.dataset,g=e.style,y=e.className,m=(0,r._)(e,["on","dataset","style","className"]);try{for(var b=(0,r.a)(Object.entries(m)),S=b.next();!S.done;S=b.next()){var E=(0,r.b)(S.value,2),I=E[0],C=E[1];if(I.startsWith("on")){var L=I.substring(2).toLowerCase();p[L]=C,delete m[I]}}}catch(t){n={error:t}}finally{try{S&&!S.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}if(Object.keys(p).length>0)try{for(var x=(0,r.a)(Object.keys(p)),w=x.next();!w.done;w=x.next()){var L=w.value,T=p[L];try{t.addEventListener(L,T)}catch(t){throw Error("[DOM-renderer]: addEventListener failed, eventName: "+L+", handler: "+T+", msg: "+t.message)}}}catch(t){o={error:t}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}if(v)try{for(var _=(0,r.a)(Object.entries(v)),A=_.next();!A.done;A=_.next()){var k=(0,r.b)(A.value,2),M=k[0],z=k[1];t.dataset[M]=""+z}}catch(t){s={error:t}}finally{try{A&&!A.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}if(g){var R="";try{for(var D=(0,r.a)(Object.entries(g)),N=D.next();!N.done;N=D.next()){var O=(0,r.b)(N.value,2),M=O[0],z=O[1],P=M.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}),Z="number"==typeof z?z+"px":z;R+=P+":"+Z+";"}}catch(t){u={error:t}}finally{try{N&&!N.done&&(c=D.return)&&c.call(D)}finally{if(u)throw u.error}}R&&t.setAttribute("style",R)}y&&t.setAttribute("class",y);try{for(var W=(0,r.a)(Object.keys(m)),K=W.next();!K.done;K=W.next()){var F=K.value;t.setAttribute(F,e[F])}}catch(t){d={error:t}}finally{try{K&&!K.done&&(f=W.return)&&f.call(W)}finally{if(d)throw d.error}}return t}},160812:function(t,e,n){"use strict";n.d(e,{p:function(){return p}});var r=n(293096),i=n(311762),o=n(830025),a=n(432349),s=n(876212),l=n(201264),u=n(11622),c=n(564655),d=n(406251);function f(){return{paddingLeft:"12px",color:"var(--text-caption, "+d.mg+")",borderLeft:"2px solid var(--udtoken-quote-bar-bg, "+d.xS+")"}}var h=s.ZP.createElement(l.D,{style:f(),className:"blockquote"}),p=function(t){function e(n){var r=n.editor,i=t.call(this)||this;return i.name="Blockquote",r.registerCommand(e.KEY,function(t){var n=t.value;(0,c.B)(r,e.KEY,n,!0)}),i}(0,r.d)(e,t);var n=e.prototype;return n.renderWrapper=function(){return h},n.match=function(t){return t===e.KEY},n.editorWillDoReturnKey=function(t){var n=t.delta,r=t.editor,i=r.getContentState().getActiveZone(),o=i.getZoneId(),a=r.selection.getSelection(),s=a.toPosition(),l=s.start,c=s.len,d=i.getLine(a.start.line);if(!!d){var f=d.getLineAttributes().toMap(),h=d.isTextEmpty();if(!n.ops.length&&f[e.KEY]&&!c){var p=new u.I({zoneId:o});h?(f.blockquote="",p.retain(l-1).retain(1,f)):p.retain(l).insertEnter().insertLineMarker(f),t.delta=n.compose(p)}}},n.editorWillDoDeleteKey=function(t){var n=t.deltaSet,r=t.editor,i=r.getContentState().getActiveZone(),o=i.getZoneId(),a=r.selection.getSelection(),s=i.getLine(a.start.line);if(!!s){var l=s.getLineAttributes().toMap(),c=a.toPosition(),d=c.start,f=c.len,h=1===a.start.offset;if(!n.get(o).ops.length&&l[e.KEY]&&h&&!f){l[e.KEY]="";var p=new u.I({zoneId:o}).retain(d-1).retain(1,l);t.deltaSet=n.compose(p)}}},n.serialize=function(t){return(0,i.i)(t,{tagAttribute:e.KEY,wrapNodesInfo:[{tag:e.KEY,style:(0,r.g)((0,r.g)({},f()),{margin:"0px",paddingLeft:"0px",color:d.mg,borderLeft:"2px solid "+d.xS})}]})},n.deserialize=function(t){var n=t.node,r=t.deltaSet,o=t.zoneId;if(n instanceof HTMLElement){var a=n.className,s=n.tagName;if(a.indexOf(e.KEY)>-1||"BLOCKQUOTE"===s)return(0,i.e)(r,o,{blockquote:"true"})}return r},e.KEY="blockquote",e.isFormatter=!0,e.isLineAttribute=!0,(0,r.e)([(0,o.gv)(1003)],e.prototype,"serialize",null),e}(a.S)},475028:function(t,e,n){"use strict";n.d(e,{V:function(){return a}});var r=n(293096),i=n(432349),o=n(525445);n(904035),n(928450);var a=function(t){function e(e){var n=e.editor,r=t.call(this)||this;return r.name="Bold",r.editor=n,r}(0,r.d)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY},n.render=function(t){var e=t.children;return t.style.fontWeight="bold",e},e.KEY="bold",(0,r.e)([o.P],e.prototype,"render",null),e}(i.S)},588009:function(t,e,n){"use strict";n.d(e,{b:function(){return s}});var r,i=n(293096),o=n(940493),a=n(88648),s=a.forwardRef(function(t,e){var n=t.getKatex,s=t.outerClass,l=t.counterIndex,u=t.value,c=t.placeholder,d=t.errorPlaceholder,f=t.viewDisplay,h=void 0===f?o.v.inline:f,p=t.forceDisplayStyle,v=void 0===p||p,g=t.onClick,y=t.onTouchStart,m=t.onTouchEnd,b=t.onTouchMove,S=t.onMouseEnter,E=t.onMouseLeave,I=t.onDidRender,C=t.onMouseDown,L=(0,a.useRef)(null),x=(0,a.useRef)(null),w=(0,i.a)((0,a.useState)({}),2),T=w[0],_=w[1],A=(0,i.a)((0,a.useState)(!1),2),k=A[0],M=A[1],z=(0,i.a)((0,a.useState)(""),2),R=z[0],D=z[1],N=(0,i.a)((0,a.useState)(null),2),O=N[0],P=N[1];(0,a.useEffect)(function(){n&&n().then(function(t){P(t)})},[n]);var Z=(0,a.useCallback)(function(){var t=L.current,e=null==t?void 0:t.querySelector(".editor-kit-equation-view-content"),n=null==t?void 0:t.querySelector(".katex-display .base"),r=null==t?void 0:t.querySelector(".katex-display .tag");if(t&&e){var i=t.closest(".ace-line"),o=(null==i?void 0:i.offsetWidth)||0,a=o-4,s=0,l=!1;n&&r&&(l=a<(s=n.offsetWidth+r.offsetWidth)+r.offsetWidth);var u=Math.max(s,(n||e).offsetWidth||0);if(a>0&&u>=0){var c=Math.min(a/(u+1),1);_({transform:"scale("+c+")"}),M(c<1||l),null==I||I()}}},[I]);(0,a.useImperativeHandle)(e,function(){return{getViewElement:function(){return L.current},resize:function(){Z()}}},[Z]);var W=(0,a.useCallback)(function(){return(0,i._)(void 0,void 0,void 0,function(){return(0,i.b)(this,function(t){return[2,new Promise(function(t){var e=function(e){void 0===e&&(e=1e3),setTimeout(function(){t(!0)},e)};if(document.fonts){var n=new Date().valueOf();document.fonts.ready.then(function(){new Date().valueOf()-n>100?e():t(!0)})}else e()})]})})},[]),K=(0,a.useRef)(null),F=(0,a.useCallback)(function(){if(!!O)K.current&&(clearTimeout(K.current),K.current=null),K.current=setTimeout(function(){return(0,i._)(void 0,void 0,void 0,function(){return(0,i.b)(this,function(t){switch(t.label){case 0:if(t.trys.push([0,3,,4]),!(u&&u.trim()&&x.current))return[3,2];return[4,W()];case 1:t.sent(),O.render(""+(v?String.raw(r||(r=(0,i.i)(["displaystyle "],["\\displaystyle "]))):"")+u.trim(),x.current,{displayMode:"block"===h,leqno:!1,fleqn:!1,throwOnError:!0,strict:"warn",trust:!1,output:"html"}),D(""),t.label=2;case 2:return setTimeout(Z),null==I||I(),[3,4];case 3:return D(t.sent().message),null==I||I(),[3,4];case 4:return[2]}})})},100)},[u,O,h,v,Z,I,W]);(0,a.useEffect)(function(){F()},[F]);var U=(0,a.useMemo)(function(){return!u||!u.trim()},[u]),B=(0,a.useMemo)(function(){return!!R},[R]),V=(0,a.useMemo)(function(){return U||B},[U,B]),j=!U&&B;return a.createElement("div",{ref:L,className:"editor-kit-equation-view "+(void 0===s?"":s)+" "+(V?"placeholder":"")+" "+(k?"overflow-numbering":""),style:(0,i.g)((0,i.g)((0,i.g)({},"block"!==h||k?{}:{width:"100%"}),void 0!==l?{counterReset:"katexEqnNo "+l}:{}),j?{}:T),onClick:g,onMouseDown:C,onTouchStart:y,onTouchEnd:m,onTouchMove:b,onMouseEnter:S,onMouseLeave:E},a.createElement("div",{ref:x,className:"editor-kit-equation-view-content",style:(0,i.g)({},V?{width:0,height:0,display:"none"}:{})}),a.createElement("div",{className:"editor-kit-equation-view-placeholder"},U&&c,j&&d))})},479782:function(t,e,n){"use strict";n.d(e,{C:function(){return d}});var r=n("293096"),i=n("940493"),o=n("432349"),a=n("296186"),s=n("525445");n("904035"),n("928450");var l=n("88648"),u=/\\begin\n*\{(equation|split|align|gather|alignat|CD)\}|\\tag/,c=n("77066"),d=function(t){function e(e){var n=e.editor,i=e.getPopupContainer,o=e.renderEquationContent,a=t.call(this)||this;return a.name="Equation",a._editor=n,a._renderEquationContent=function(t){return o((0,r.g)((0,r.g)({},t),{containerEditor:a._editor}))},a._getPopupContainer=i,a._initPopupWrapperIfNotExist(),a}(0,r.d)(e,t);var n=e.prototype;return n.editorCollectText=function(t){var e=t.attributes.equation;return"string"!=typeof e?"":"$$"+e+"$$"},n.serialize=function(t){return t},n.deserialize=function(t){return t.deltaSet},n.match=function(t){return t===e.KEY},n.render=function(t){var n,r=t.attributes,o=t.children,a=t.index,s=t.lineState,d=t.op,f=r.equation,h=r.objectID;if("string"!=typeof f)return o;if(!t.key){if("string"==typeof h)t.key=h;else{var p=s.getOps().indexOf(d);t.key="equation-line-"+a+"-op-"+p}}var v=(n=f,u.test(n))?i.v.block:i.v.inline;return t.class+=" equation-leaf equation-display-"+v,l.createElement(c.D,{editor:this._editor,length:t.insert.length,objectID:h,zoneId:t.zoneId,lineState:t.lineState,defaultEquation:f,displayMode:v,popoverContainer:e.popupWrapper,renderEquationContent:this._renderEquationContent})},n._initPopupWrapperIfNotExist=function(){var t;(!e.popupWrapper||!document.contains(e.popupWrapper))&&(e.popupWrapper=document.createElement("div"),e.popupWrapper.className="editor-kit-equation-popover-wrapper",((null===(t=this._getPopupContainer)||void 0===t?void 0:t.call(this))||document.body).appendChild(e.popupWrapper))},e.KEY="equation",(0,r.e)([s.P,(0,a.x)()],e.prototype,"render",null),e}(o.S)},21788:function(t,e,n){"use strict";n.d(e,{Ec:function(){return i},Er:function(){return s},Wd:function(){return a},uc:function(){return o}});var r,i,o=4,a=20,s=["tl","tr","br","bl"];(r=i||(i={})).WRAPPER="image-wrapper",r.CONTAINER="image-container"},618849:function(t,e,n){"use strict";n.d(e,{E:function(){return S}});var r=n("293096"),i=n("414818"),o=n("433500"),a=n("975917"),s=n("830025"),l=n("432349"),u=n("296186"),c=n("11622");n("904035"),n("928450");var d=n("651260"),f=n("88648"),h=n("580588"),p=n("757974"),v=n("302450"),g=n("21788"),y=function(){function t(t){var e=this;this.editor=t,this.canDrag=!1,this.pointX=0,this.pointY=0,this.pageX=0,this.pageY=0,this.diffX=0,this.diffY=0,this.body=document.body,this.isMoved=!1,this.oriScrollTop=0,this.events=new Map,this.bind=function(){document.addEventListener("mousemove",e.handleMouseMove),document.addEventListener("mousedown",e.handleMouseDown),document.addEventListener("mouseup",e.handleMouseUp),e.editor.once(o.r.PAINT,e.bindScrollEvent)},this.bindScrollEvent=function(){var t=e.editor.getScrollContainer();if(!!t)t.addEventListener("scroll",e.handleScroll)},this.isSameInstance=function(t){return e.editor.getContainer().contains(t)},this.handleMouseDown=function(t){if(!(t.target instanceof HTMLElement)||!e.editor.isEditable()||!e.isSameInstance(t.target)||!(null===(o=t.target)||void 0===o?void 0:o.classList.contains("point")))return;var n,i,o,a,s,l=e.editor.getScrollContainer(),u=null===(a=t.target.closest(".image-wrapper"))||void 0===a?void 0:a.querySelector("img");if(!u)return;if(e.image=u,!e.image.closest(".unresize")){var c=e.image.closest(".ace-line");e.oriScrollTop=null!==(s=null==l?void 0:l.scrollTop)&&void 0!==s?s:0,e.resizeImageLineKey=null,e.direction=t.target.getAttribute("data-direction"),e.imageWidth=e.image.clientWidth,e.imageHeight=e.image.clientHeight,e.imageMaxWidth=c.clientWidth,e.imageMaxWidth=e.imageMaxWidth&&e.imageMaxWidth-g.uc,e.uuid=e.image.getAttribute("data-uuid"),e.canDrag=!0,e.pointX=t.pageX,e.pointY=t.pageY,e.alignment="left";try{for(var d=(0,r.c)([["align-left","left"],["align-center","center"],["align-right","right"]]),f=d.next();!f.done;f=d.next()){var h=(0,r.a)(f.value,2),p=h[0],v=h[1];c.classList.contains(p)&&(e.alignment=v)}}catch(t){n={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return e.direction&&["tl","br"].includes(e.direction)?e.body.classList.add("keep-nwse-cursor"):e.direction&&["tr","bl"].includes(e.direction)&&e.body.classList.add("keep-nesw-cursor"),t.preventDefault(),!1}},this.applyDynamicResize=function(t){var n=t.pageX,r=t.pageY,i=t.target,o=t.scrollTop;if(!!e.direction&&!!e.imageWidth&&!!e.uuid&&!!e.alignment&&!!e.imageHeight&&!!e.imageMaxWidth){var a=o-e.oriScrollTop;e.diffX=n-e.pointX,e.diffY=r-e.pointY+a,e.isMoved=!0;var s={width:e.imageWidth,height:e.imageHeight},l={x:e.diffX,y:e.diffY};(0,h.jB)({direction:e.direction,alignment:e.alignment,imageSize:s,moveVector:l,imageMaxWidth:e.imageMaxWidth,uuid:e.uuid});var u=i;if(!e.resizeImageLineKey){for(;u&&u!==document.body&&!(u.id&&/magicdomid/.test(u.id));){;u=u.parentElement}e.resizeImageLineKey=i&&i.id}}},this.handleScroll=(0,v.Z)(function(t){var n,r=t.target;if(!!r&&!!e.canDrag&&!!e.pageX&&!!e.pageY&&!!e.isSameInstance(r)){var i=e.editor.getScrollContainer();e.applyDynamicResize({pageX:e.pageX,pageY:e.pageY,target:r,scrollTop:null!==(n=null==i?void 0:i.scrollTop)&&void 0!==n?n:0})}},16),this.handleMouseMove=(0,v.Z)(function(t){var n,r=t.target;if(!!r&&!!e.canDrag&&!!e.isSameInstance(r)){var i=e.editor.getScrollContainer();e.pageX=t.pageX,e.pageY=t.pageY,e.applyDynamicResize({pageX:e.pageX,pageY:e.pageY,target:r,scrollTop:null!==(n=null==i?void 0:i.scrollTop)&&void 0!==n?n:0})}},16),this.handleMouseUp=function(){e.resizeImageLineKey=null,e.canDrag=!1,e.isMoved&&e.uuid&&(e.body.classList.remove("keep-nwse-cursor"),e.body.classList.remove("keep-nesw-cursor"),e.handleResize()),e.isMoved=!1},this.clearTempStyle=function(){if(!!e.uuid){var t,n=document.querySelector("#"+(0,h.tf)(e.uuid));null===(t=null==n?void 0:n.parentNode)||void 0===t||t.removeChild(n)}}}var e=t.prototype;return e.unbind=function(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("mouseup",this.handleMouseUp);var t=this.editor.getScrollContainer();t&&t.removeEventListener("scroll",this.handleScroll),this.events.clear()},e.handleResize=function(){if(!this.uuid)return;var t,e,n=this.editor.getContainer().querySelector((0,h.MO)(this.uuid));if(!n)return;var i=(0,p.Ve)(n,this.editor);if(!i)return;var a=n.clientWidth,s=i.start.zoneId,l=this.editor.getContentState().getZoneState(s);if(!l)return;var u=l.getEntities(i);if(!!u.length){var c=this.events.get("resize");if(null==c?void 0:c.length)try{for(var d=(0,r.c)(c),f=d.next();!f.done;f=d.next())(0,f.value)((0,r.g)((0,r.g)({},u[0]),{attributes:(0,r.g)((0,r.g)({},u[0].attributes),{width:a})}))}catch(e){t={error:e}}finally{try{f&&!f.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}this.editor.once(o.r.PAINT,this.clearTempStyle)}},e.onResize=function(t){var e=this.events.get("resize")||[];e.push(t),this.events.set("resize",e)},t}(),m=n("30706"),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={selected:!1},e.handleSelect=function(){e.setState({selected:!0})},e.handleDeSelect=function(){e.setState({selected:!1})},e}(0,r.d)(e,t);var n=e.prototype;return n.componentDidUpdate=function(){var t,e,n=this.props,r=n.editor,i=n.lineState;if(!r||!i)return;var o=i.getZoneId(),a=null===(t=r.virtualListManager)||void 0===t?void 0:t.getVirtualListModuleOfZone(o);if(!!(null==a?void 0:a.isEnabled)){var s=null===(e=i.getNode())||void 0===e?void 0:e.querySelector("img");s&&!s.complete&&s.addEventListener("load",function(){a.notifyInnerNodeLayoutUpdate(i)},{once:!0})}},n.render=function(){var t=this.props,e=t.uuid,n=t.src,r=t.alt,i=t.width,o=t.height,a=!1===t.resizeable?"unresize":"";return(0,f.createElement)(m.Z,{key:e,onSelect:this.handleSelect,onDeselect:this.handleDeSelect,className:g.Ec.CONTAINER+" "+a,disableDefaultSelected:!0},(0,f.createElement)("span",{className:g.Ec.WRAPPER+" "+(this.state.selected?"selected":"")},g.Er.map(function(t){return(0,f.createElement)("span",{key:t,className:"point "+t+" n-icon-dragable","data-direction":t})}),(0,f.createElement)("img",{style:{width:i?i+"px":"100%",height:o?o+"px":"100%"},src:(n||"").replace(/"/g,"&quot;"),"data-uuid":e,"data-resizeable":a,alt:r})))},e}(f.Component),S=function(t){function e(n){var a=t.call(this)||this;a.name="Image",a.uploadInput=(0,h.pp)(),a.canResetSelection=!0,a.handleUploadImage=function(){a.uploadInput.click()},a.handleInputChange=function(t){if(!t.target)return;var e=t.target,n=e.files;if(!n||!!(0,h.XR)(n)){if(n){var r=a.editor.selection.getSelection().toPosition();a.insertImage(r,n)}e.value=""}},a.handleKeyDown=function(t){if(i.Xh.mobile&&"Backspace"===t.key){var e=a.editor,n=e.selection.getSelection();if(n.isCollapsed()){var r=n.start.line-1,o=a.editor.getContentState().getActiveZone().getLine(r);if(o&&(0,h.VB)(o)&&0===n.start.offset){var s=o.getOffset(),l=s.start,u=s.end,d=new c.I({zoneId:o.getZoneId()}).retain(l).delete(u-l);e.getContentState().apply(d),t.preventDefault(),t.preventEvent(),t.stopEvent()}}}},a.handleSelectionChange=function(t){if(!!a.canResetSelection){var e=t.current,n=e.start,r=e.end;if(n.line!==r.line){var i=(0,h.uf)(e,a.editor),o=i.start,s=i.end;if(!o&&!s)return;a.fixSelectionOnImageLine(i,e,a.editor)}}},a.fixSelectionOnImageLine=function(t,e,n){if(!a.canResetSelection)return;a.canResetSelection=!1;var r=e.start,i=e.end,o=e.isBackward,s=r.zoneId,l=t.start,u=t.end,c=n.getContentState().getZoneState(s),d=c.getLine(r.line),f=c.getLine(i.line),h=r,p=i,v=!1;if(d&&l&&(h={line:r.line,offset:0,zoneId:s},v=!0),f&&u&&(p={line:i.line,offset:f.length()-1,zoneId:s},v=!0),!!v)n.selection.setSelection({start:h,end:p,isBackward:o}),n.selection.updateBrowserSelection(!0),a.canResetSelection=!0},a.updateImageAttributes=function(t){var n,i,o=t.start,s=t.end,l=a.editor.getContentState(),u=l.getZoneState(o.zoneId);if(!u)return;var d=u.pointToOffset(o),f=u.pointToOffset(s);if(null!==d&&null!==f){var h=(0,r.g)((0,r.g)((0,r.g)({},a.oldDataToNewData(t.attributes)),t.attributes),((n={})[e.KEY]="true",n)),p=Object.keys(h).reduce(function(t,e){return t[e]=h[e].toString(),t},{}),v=new c.I({zoneId:o.zoneId}).retain(d).retain(f-d,(0,r.g)(((i={})[e.KEY]="true",i),p));l.apply(v)}},a.deserialize=function(t){var n,r,i=t.node,o=t.deltaSet,a=t.zoneId;return(null===(r=null==i?void 0:i.tagName)||void 0===r?void 0:r.toUpperCase())==="IMG"?o.concat(new c.I({zoneId:a}).insert(" ",((n={alt:i.getAttribute("alt")||""})[e.KEY]="true",n.src=i.getAttribute("src")||"",n.uuid=(0,h.xo)(),n.width=i.getAttribute("width")||"",n))):o},a.options=n;var s=n.editor;return a.editor=s,a.event=new y(a.editor),a.event.bind(),a.uploadInput.addEventListener("change",a.handleInputChange),a.event.onResize(a.updateImageAttributes),s.registerCommand(e.KEY,a.handleUploadImage),s.on(o.r.PASTE,a.handlePaste),s.on(o.r.KEYDOWN,a.handleKeyDown),s.on(o.r.SELECTION_CHANGE,a.handleSelectionChange),a}(0,r.d)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY},n.handlePaste=function(t){if(!(0,h.$p)(t.nativeEvent))return;var e,n=null===(e=t.nativeEvent.clipboardData)||void 0===e?void 0:e.files;if(!!(null==n?void 0:n.length)){var r=this.editor.selection.getSelection().toPosition();this.insertImage(r,n)}},n.insertImage=function(t,n){if(this.options.onInsertImage){this.options.onInsertImage(t,n);return}var i,o,a=this.editor.getContentState(),s=t.zoneId,l=t.len,u=t.start,d=t.toRange().start.line,f=a.getActiveZone().getLine(d);if(!!f){var p=0!==d&&f.isEmpty(),v=new c.I({zoneId:s}).retain(u).delete(l);p||v.insertEnter();try{for(var g=(0,r.c)(Array.from(n)),y=g.next();!y.done;y=g.next()){var m=y.value;!function(t){var n,i={uuid:(0,h.xo)(),src:window.URL.createObjectURL(t)},o=Object.keys(i).reduce(function(t,e){return t[e]=i[e].toString(),t},{});v.insert(" ",(0,r.g)(((n={})[e.KEY]="true",n),o)).insertEnter()}(m)}}catch(t){i={error:t}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}a.apply(v)}},n.editorWillCopy=function(t){(0,h.tZ)(t.deltaSet)},n.editorWillPaste=function(t){var e,n=t.deltaSet,r=t.zoneId;(0,h.tZ)(n);var i=n.deltas,o=i[0].ops[i[0].ops.length-1];if(!!(null===(e=null==o?void 0:o.attributes)||void 0===e?void 0:e.image)){var a=new c.I({zoneId:r}).insertEnter();t.deltaSet=n.concat(a)}},n.serialize=function(t){var n,i,o=t.node,s=t.op,l=t.type;if(!(null==s?void 0:s.attributes))return t;var u=this.oldDataToNewData(s.attributes);if((null==u?void 0:u[e.KEY])&&l===a.T.LEAF){var c=new DOMParser().parseFromString("<img>","text/html").querySelector("img");c.setAttribute("src",u.src);try{for(var d=(0,r.c)(Object.entries(u)),f=d.next();!f.done;f=d.next()){var h=(0,r.a)(f.value,2),p=h[0],v=h[1];c.setAttribute(p,String(v))}}catch(t){n={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return c.appendChild(o),Object.assign(t,{node:c})}return t},n.oldDataToNewData=function(t){var n;if(!t[e.KEY]||"true"===t[e.KEY])return t;try{var i=JSON.parse(t[e.KEY]);t=(0,r.g)((0,r.g)({},i.attributes),((n={})[e.KEY]="true",n.src=i.src,n.uuid=(0,h.xo)(),n))}catch(t){}return t},n.lineDidMount=function(t){var n,r=t.lineState;if(!r.getAttributes().toMap()[e.KEY])return;var i=r.getZoneId(),o=null===(n=this.editor.virtualListManager)||void 0===n?void 0:n.getVirtualListModuleOfZone(i);if(!(null==o?void 0:o.isEnabled))return;var a=r.getNode();if(!!a){var s=a.querySelector("img");s?s.addEventListener("load",function(){o.notifyInnerNodeLayoutUpdate(r)},{once:!0}):setTimeout(function(){var t=a.querySelector("img");null==t||t.addEventListener("load",function(){o.notifyInnerNodeLayoutUpdate(r)},{once:!0})})}},n.render=function(t){var e=this.oldDataToNewData(t.attributes);return t.key=e.uuid,f.createElement(b,(0,r.g)({},e,{resizeable:this.options.resizeable,src:e.src,editor:this.editor,lineState:t.lineState}))},n.destroy=function(){this.event.unbind(),this.uploadInput.removeEventListener("change",this.handleInputChange),this.editor.off(o.r.PASTE,this.handlePaste),this.editor.off(o.r.KEYDOWN,this.handleKeyDown),this.editor.off(o.r.SELECTION_CHANGE,this.handleSelectionChange),(0,h.aj)(this.uploadInput)},e.KEY="image",(0,r.e)([d.MR],e.prototype,"handlePaste",null),(0,r.e)([(0,s.gv)(999)],e.prototype,"serialize",null),(0,r.e)([(0,s.gv)(999),(0,u.x)()],e.prototype,"render",null),e}(l.S)},806467:function(t,e,n){"use strict";n.d(e,{A:function(){return f}});var r=n(293096),i=n(975917),o=n(55582),a=n(830025),s=n(432349),l=n(11622),u=n(353270),c=n(594135);n(904035),n(928450),n(170468);var d=n(394405),f=function(t){function e(e){var n=e.editor,r=t.call(this)||this;return r.name="Indent",r.textIndentClass="text-indent",r.editor=n,n.registerCommand(u.P.INDENT_LEFT,function(){(0,c.u)(n,"indent",!1)}),n.registerCommand(u.P.INDENT_RIGHT,function(){(0,c.u)(n,"indent",!0)}),r}(0,r.d)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY||"list"===t},n.renderLine=function(t){var n=t.lineState,r=t.children;if(n.getLineAttributes().toMap()[e.KEY]){var i=t.lineClass?" ":"";t.lineClass+=""+(i+this.textIndentClass)}return r},n.editorWillDoDeleteKey=function(t){var e=t.deltaSet,n=t.editor,r=n.getContentState().getActiveZone(),i=r.getZoneId(),o=n.selection.getSelection(),a=r.getLine(o.start.line);if(!!a){var s=a.getLineAttributes().toMap(),u=1===o.start.offset,c=o.toPosition(),d=c.start,f=c.len;if(!e.get(i).ops.length&&s["text-indent"]&&u&&!f){s["text-indent"]="";var h=new l.I({zoneId:i}).retain(d-1).retain(1,s);t.deltaSet=e.compose(h)}}},n.serialize=function(t){var n=t.type,r=t.lineAttributes,a=t.node;if(n===i.T.LINE&&r&&r[e.KEY]){if(r.list)a.classList&&a.style?(a.classList.add(this.textIndentClass),a.style["text-indent"]="2em"):this.editor.error({message:"call hook failed: serialize. plugin: Indent",level:o.WV.ERROR});else{var s=document.createElement("div");s.setAttribute("style","text-indent: 2em"),s.appendChild(a),s.classList.add(this.textIndentClass),t.node=s}}return t},n.deserialize=function(t){var e=this,n=t.node,r=t.deltaSet,i=t.zoneId;if(!(n instanceof HTMLElement))return r;var o=Array.from(n.classList),a=o.find(function(t){return t.startsWith("indent")});if(o.find(function(t){return t===e.textIndentClass})&&(0,d.J)(r,i,{"text-indent":"true"}),a){var s=Number(a.split("indent")[1]);Number(s)>=1&&(0,d.J)(r,i,{list:"indent"+s})}return r},e.KEY="text-indent",(0,r.e)([(0,a.gv)(1002)],e.prototype,"serialize",null),(0,r.e)([(0,a.gv)(1001)],e.prototype,"deserialize",null),e}(s.S)},604246:function(t,e,n){"use strict";n.d(e,{C:function(){return i},U:function(){return p}});var r,i,o=n(293096),a=n(328702),s=n(415404);n(904035);var l=n(720103);n(928450),n(170468);var u=n(394405),c=l.Z.isEdge,d=l.Z.isAndroid&&!l.Z.isX5,f=["align","heading","aceTable","list","blockquote","lmkr","origin-start","insertorder","text-indent","start","origin-start","lang"],h="horizontal-line";(r=i||(i={})).heading="heading",r.blockQuote="blockQuote",r.ul="ul",r.ol="ol",r.codeBlock="codeBlock",r.checkbox="checkbox",r.horizontal="horizontal",r.bold="bold",r.inlineCode="inlineCode",r.italic="italic",r.underline="underline",r.strikethrough="strikethrough";var p=function(){function t(t){var e=this;this.options=t,this.name="Markdown",this.isMarkdownMatch=!1,this.markdownMap={heading:{regExp:/^(#{1,3}\s)(\S*|\S+[\s\S]*)$/,match:function(t){var e=this.regExp.exec(t);return e?{key:"heading",value:"h"+(e[1].length-1),type:"line",replaceLen:e[1].length,active:"heading-h"+(e[1].length-1)}:null}},blockQuote:{regExp:/^(>\s)(\S*|\S+[\s\S]*)$/,match:function(t){var e=this.regExp.exec(t);return e?{key:"blockquote",value:"true",type:"line",replaceLen:e[1].length,active:"reference"}:null}},ul:{regExp:/^([*]+\s)(\S*|\S+[\s\S]*)$|^([-]+\s)(\S*|\S+[\s\S]*)$/,match:function(t){var e=this.regExp.exec(t);if(!e)return null;var n=e[1]||e[3];return{key:"list",value:"bullet"+(n.length-1),type:"line",replaceLen:n.length,active:"list-bullet"}}},ol:{regExp:/^([1-9][0-9]*\.\s)(\S*|\S+[\s\S]*)$/,match:function(t){var e=this.regExp.exec(t);return e?{key:"list",value:"number1",type:"line",replaceLen:e[1].length,start:parseInt(e[1],10),active:"list-number"}:null}},checkbox:{regExp:/^((\[\]\s)|(\u3010\u3011\s))(\S*|\S+[\s\S]*)$/,match:function(t){var e=this.regExp.exec(t);return e?{key:"list",value:"check1",type:"line",replaceLen:e[1].length,active:"checkbox"}:null}},horizontal:{regExp:/^---$|^\*\*\*$/,match:function(t){var e=this.regExp.exec(t);return e?{name:h,value:"true",type:"inline",replaceRight:!1,execLen:3,replaceLen:e[0].length,startReplacePos:e.index,endReplacePos:e.index+e[0].length,textLen:0,active:"insertseparator"}:null},doInsert:function(t){t.editor.execCommand(h)}},bold:{regExp:/\*\*(\S|\S.*\S)\*\*\s/,match:function(t){var e=this.regExp.exec(t);if(!e)return null;var n=e[1];return n&&/[^_|^*]/.test(n)?{type:"inline",name:"bold",value:"true",replaceRight:!0,execLen:2,replaceLen:e.index+n.length+5,startReplacePos:e.index,endReplacePos:e.index+n.length,textLen:n.length,active:"bold"}:null}},italic:{regExp:/\*([^*\s]|[^*\s].*[^*\s])\*\s/,match:function(t){var e=this.regExp.exec(t);if(!e)return null;var n=e[1];return n&&/[^_|^*]/.test(n)?{type:"inline",name:"italic",value:"true",replaceRight:!0,execLen:1,replaceLen:e.index+n.length+3,startReplacePos:e.index,endReplacePos:e.index+n.length,textLen:n.length,active:"italic"}:null}},underline:{regExp:/~([^\s~]|[^\s~].*[^\s~])~\s/,match:function(t){var e=this.regExp.exec(t);if(!e)return null;var n=e[1];return(null==n?void 0:n.length)?{type:"inline",name:"underline",value:"true",replaceRight:!0,execLen:1,replaceLen:e.index+n.length+3,startReplacePos:e.index,endReplacePos:e.index+n.length,textLen:n.length,active:"underline"}:null}},strikethrough:{regExp:/~~(\S|\S.*\S)~~\s/,match:function(t){var e=this.regExp.exec(t);if(!e)return null;var n=e[1];return n&&/[^~]/.test(n)?{type:"inline",name:"strikethrough",value:"true",replaceRight:!0,execLen:2,replaceLen:e.index+n.length+5,startReplacePos:e.index,endReplacePos:e.index+n.length,textLen:n.length,active:"strikethrough"}:null}}},this.handleInput=function(t){e.isMarkdownMatch&&" "===t.data&&(t.preventDefault(),t.nativeEvent.stopImmediatePropagation(),e.isMarkdownMatch=!1)},this.handleKeyEventWithBatchUndo=function(t){var n=t.evt;e.editor.undoModule.batchedUndo(function(){return e.handleKeyEvent({evt:n})})},this.handleKeyEvent=function(t){var n,r,i,s,d,f,h,p,v,g,y,m=t.evt,b=e.editor,S=m.keyCode,E=m.key,I=m.type,C=b.getStatus("isComposing");if(!(e.options.markdownOptions.ignoreFirstLine&&e.inTitleLine())&&!!b.selection.getSelection().isCollapsed()){var L=!C&&e.lastInternationalComposition&&l.Z.isSafari;if(" "===E&&(C||L)&&"keydown"===I)return e.shouldContinue=!1,!1;if("keyup"===I&&!e.shouldContinue)return e.shouldContinue=!0,!1;e.lastInternationalComposition=C;var x="";if(e.lastKeydownStatus=e.keydownStatus,e.keydownStatus=e.isInKeydownStatusWithoutKeycode(m),!l.Z.isSafari&&e.keydownStatus||!c&&C||C&&c&&"keyup"!==I||90===S||S>=65&&S<=90||m.nativeEvent.which>=37&&m.nativeEvent.which<=40)return!1;var w=e.isSpecialKey(m),T=32===S||" "===E;if(!w&&!T||8===S)return!1;var _=b.selection.getSelection(),A=_.start,k=_.end,M=A.zoneId,z=k.offset,R="";if((!e.keydownStatus&&e.lastKeydownStatus||l.Z.isX5)&&"keyup"===I){if(null===A)return!1;b.flushInput();var D=b.selection.getSelection().start;if(y=D.line,e.getLineListType(D.zoneId,y).indexOf("code")>-1)return;if((g=null===(i=b.getContentState().getZoneState(D.zoneId))||void 0===i?void 0:i.getLine(y))&&(c&&C||l.Z.isMobile)){var N=g.getText();x=N.slice(0,N.length-1)}}else{var O=b.selection.getSelection().start;if("keydown"!==I||null===O||l.Z.isX5)return!1;b.flushInput();var P=b.selection.getSelection(),D=P.start,Z=P.end;if(!Z)return!1;if(z=Z.offset,y=D.line,e.getLineListType(D.zoneId,y).indexOf("code")>-1||!b.selection.getSelection().isCollapsed())return;var W=Z.offset;x=(g=null===(s=b.getContentState().getZoneState(D.zoneId))||void 0===s?void 0:s.getLine(y))?g.getText().substr(0,W-(g.hasLineMarker()?1:0))+R:"",(!e.isInKeydownStatusWithoutKeycode(m)||!x.endsWith(E))&&(R="spacebar"===E.toLowerCase()?" ":E),x+=R}for(var K in e.markdownMap)if(e.markdownMap.hasOwnProperty(K)){var F=e.markdownMap[K],U=F.match(x);if(U){if(e.isMarkdownMatch=!0,c&&C){b.flushInput();var B=b.selection.getSelection(),V=B.start,j=B.end;g=null===(d=b.getContentState().getZoneState(V.zoneId))||void 0===d?void 0:d.getLine(y),z=j.offset}R&&(m.preventDefault(),e.editor.undoModule.batchedUndo(function(){e.performText(R)}),R="");var H=b.selection.getSelection(),X=H.start,q=H.end,Y=(null==g?void 0:g.hasLineMarker())?1:0,Q=Y+U.replaceLen,G=q.offset>Q&&Q>z;if(Q!==q.offset&&!G)continue;if("line"===U.type){var J=null===(h=null===(f=b.getContentState().getZoneState(X.zoneId))||void 0===f?void 0:f.getLine(y))||void 0===h?void 0:h.getLineAttributes().toMap()[U.key];if(!J||J&&J!==U.value){var tt=b.selection.getSelection().start.zoneId,te=b.pluginManager.getPlugin("List"),tn={start:{line:y,offset:Y,zoneId:tt},end:{line:y,offset:Y+U.replaceLen,zoneId:tt}},tr=b.getContentState(),ti=tr.getEntities(tn).reduce(function(t,e){return t=(0,o.g)((0,o.g)({},t),e.attributes)},{});if(tr.deleteText(tn),tr.setAttributes({start:tn.start,end:tn.start},ti),U.value.indexOf("code")>-1);else if(U.start){var to=e.getTabLevel(U.value,b,y);if(to&&(U.value="number"+to,b.getContentState().setLineAttributes(tt,y,{"text-indent":""})),!te)return;var ta=(0,u.m)(b,b.selection.getSelection(),y);te.bulkInsertOList(tt,[y],((r={})[y]=ta,r),U.start)}else{var to=e.getTabLevel(U.value,b,y);if(to){var ts=to+U.replaceLen-2;U.value="bullet"+ts,b.getContentState().setLineAttributes(tt,y,{"text-indent":""})}b.getContentState().setLineAttributes(tt,y,((n={})[U.key]=U.value,n))}}}else if("inline"===U.type){var tl=(null===(v=null===(p=b.getContentState().getZoneState(M))||void 0===p?void 0:p.getLine(y))||void 0===v?void 0:v.hasLineMarker())?1:0,tu=[y,tl+U.startReplacePos],tc=[y,tl+U.endReplacePos];b.getContentState().deleteText({start:{line:y,offset:tu[1],zoneId:M},end:{line:y,offset:tu[1]+U.execLen,zoneId:M}}),U.replaceRight?(b.getContentState().deleteText({start:{line:y,offset:tc[1],zoneId:M},end:{line:y,offset:tc[1]+U.execLen,zoneId:M}}),b.toggleAttribute(U.name,"true",new a.e({editor:b,start:{line:y,offset:tl+U.startReplacePos,zoneId:M},end:{line:y,offset:tl+U.startReplacePos+U.textLen,zoneId:M}}))):F.doInsert&&F.doInsert({editor:b})}return}}}},this.getLineListType=function(t,n){return e.getLineAttributes(t,n,"list")},this.getLineAttributes=function(t,n,r){var i,o=null===(i=e.editor.getContentState().getZoneState(t))||void 0===i?void 0:i.getLine(n);return o&&o.getLineAttributes().toMap()[r]||""};var n=t.editor,r=t.markdownOptions,i=r.markdownMap;this.shouldContinue=!0,this.lastInternationalComposition=!1,this.lastKeydownStatus=!1,this.keydownStatus=!1,this.markdownMap=(0,s.Z)((0,o.g)((0,o.g)({},this.markdownMap),void 0===i?{}:i),r.types),this.editor=n,this.handleKeyEventWithBatchUndo.plugin=this,this.handleInput.plugin=this,this.editor.on("keydown",this.handleKeyEventWithBatchUndo),this.editor.on("keyup",this.handleKeyEventWithBatchUndo),l.Z.isSafari&&n.on("beforeinput",this.handleInput)}var e=t.prototype;return e.destroy=function(){this.editor.off("keydown",this.handleKeyEventWithBatchUndo),this.editor.off("keyup",this.handleKeyEventWithBatchUndo),l.Z.isSafari&&this.editor.off("beforeinput",this.handleInput)},e.inTitleLine=function(){var t=this.editor.selection.getSelection().start;return 0===t.line&&"0"===t.zoneId||!1},e.isSpecialKey=function(t){var e=t.key,n=t.keyCode;if(!t.nativeEvent)return!1;var r=t.nativeEvent.code,i=this.editor;if(!i)return!1;if((c&&i.getStatus("isComposing")||d)&&229===n)return!0;var o=t.metaKey||t.ctrlKey;return"~"===e||"`"===e||192===n||("*"===e||"8"===e)&&!o||"-"===e||189===n||"Minus"===r},e.isInKeydownStatusWithoutKeycode=function(t){var e="keydown"===t.type,n=229===t.keyCode;return e&&n},e.getTabLevel=function(t,e,n){var r=/bullet[0-9]+/.exec(t),i=e.getContentState().getActiveZone().getZoneId(),o="number1"===t;if(!r&&!o)return!1;var a=this.getLineAttributes(i,n,"text-indent");if(!a)return!1;var s=/([a-z]+)([0-9]+)/.exec(this.getLineListType(i,n)),l=0;return s&&(l=Number(s[2])),a&&(l+=2),l},e.performText=function(t){for(var e=this.editor,n=e.getContentState(),r=e.selection.getSelection(),i=r.start,a=r.end,s=a.offset,l=1===s?[]:n.getAttributes((0,o.g)((0,o.g)({},a),{offset:s-1}),(0,o.g)((0,o.g)({},a),{offset:s-1})),u={},c=0;c<l.length;++c)!f.includes(l[c][0])&&(u[l[c][0]]=l[c][1]);n.replaceText({start:i,end:a},t,u,{type:""})},t}()},76392:function(t,e,n){"use strict";n.d(e,{f:function(){return a}});var r=n("293096"),i=n("432349");n("904035"),n("928450");var o=n("902260"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="PlainTextHandler",e}return(0,r.d)(e,t),e.prototype.editorWillPaste=function(t){var e,n=t.deltaSet,r=t.zoneId,i=n.get(r),a=i.ops[0];if(!(a&&a.attributes&&a.attributes.lmkr))return n;return(void 0===(e=a.attributes)&&(e={}),Object.keys(e).every(function(t){return o.$.includes(t)}))?(i.ops.shift(),n):n},e}(i.S)},112987:function(t,e,n){"use strict";n.d(e,{n:function(){return u}});var r=n("293096"),i=n("433500"),o=n("311762"),a=n("431468");n("904035"),n("928450");var s=n("432349"),l=n("525445"),u=function(t){function e(n){var r=t.call(this,n)||this;r.handleInput=function(t){"formatStrikeThrough"===t.inputType&&(t.preventEvent(),t.preventDefault(),t.stopEvent(),r.editor.toggleAttribute(e.KEY))};var o=r.editor;return o.registerCommand(e.KEY,function(){o.toggleAttribute(e.KEY)}),o.on(i.r.INPUT,r.handleInput),r}(0,r.d)(e,t);var n=e.prototype;return n.deserialize=function(t){var e=t.node,n=t.deltaSet,r=t.zoneId;if(e instanceof HTMLElement){var i=e.tagName,a=e.getAttribute("style")||"";if("S"===i||"STRIKE"===i||/\btext-decoration:([^;]*?\s|\s*)line-through\b/i.test(a))return(0,o.d)(n,r,{strikethrough:"true"},!1)}return n},n.serialize=function(t){return(0,o.w)(t,{tagAttribute:"strikethrough",wrapTag:a.c5.strikethrough})},e}(function(t){function e(e){var n=e.editor,r=t.call(this)||this;return r.name="Strikethrough",r.editor=n,r}(0,r.d)(e,t);var n=e.prototype;return n.match=function(t){return t===e.KEY},n.render=function(t){var e=t.children,n=t.style,r=n.textDecoration||"";return n.textDecoration=r+" line-through",t.class+=" strike-through",e},e.KEY="strikethrough",(0,r.e)([l.P],e.prototype,"render",null),e}(s.S))},395730:function(t,e,n){"use strict";var r=n(293096),i=n(88648),o=n(299635),a=n(943846),s=n(564433),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.d)(e,t),e.prototype.render=function(){var t=this.props,e=t.dropdownProps,n=t.buttonContent,l=t.buttonProps;return i.createElement(o.L,(0,r.g)({},e),i.createElement(a.zx,(0,r.g)({type:"text",endIcon:i.createElement(s.Z,null)},void 0===l?{}:l),n))},e}(i.Component);e.Z=l},641639:function(t,e,n){"use strict";var r,i=n(88648),o=n(406466);function a(){return!r&&((r=document.createElement("div")).setAttribute("id","editor-kit-toolbar-portal"),document.body.appendChild(r)),r}e.Z=function(t){var e=t.children,n=t.text;return(0,i.createElement)(o.u,{getPopupContainer:a,title:n},e)}},354525:function(t,e,n){"use strict";n.d(e,{E:function(){return o},Q:function(){return a}});var r=n(293096),i=function(t){return parseInt(t.repeat(2/t.length),16)},o=function(t,e){if(void 0===e&&(e=1),n=t,!/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(n))throw Error("Invalid HEX: "+t);var n,o,a,s,l,u=Math.floor((t.length-1)/3);var c=(o=t.slice(1),a=u,o.match(RegExp(".{"+a+"}","g"))||[]),d=(0,r.a)(c.map(i),4);return"rgba("+d[0]+", "+d[1]+", "+d[2]+", "+(s=d[3],l=e,void 0!==s?s/255:"number"!=typeof l||l<0||l>1?1:l).toFixed(3)+")"};function a(t){return t.map(function(t){return t.map(function(t){return t?t.startsWith("#")?o(t):t:void 0})})}},839430:function(t,e,n){"use strict";n.d(e,{KL:function(){return H},P6:function(){return U},T$:function(){return q},VV:function(){return X},Xb:function(){return O},cO:function(){return Z},d2:function(){return V},gM:function(){return j},xU:function(){return W},z0:function(){return N}});var r=n(293096);n(904035);var i=n(720103);n(928450);var o=n(927504),a=n(727230),s=n(703928),l=n(765921),u=n(598515),c=n(152229),d=n(186754),f=n(428843),h=n(186086),p=n(88637),v=n(4825),g=n(720137),y=n(637215),m=n(876533),b=n(613455),S=n(275378),E=n(395347),I=n(643283),C=n(575117),L=n(742915),x=n(639226),w=n(906171),T=n(578303),_=n(67657),A=n(237687),k=n(188898),M=n(105228),z=i.Z.isWindows?"Ctrl":"âŒ˜",R=i.Z.isWindows?"Alt":"Option",D=i.Z.isWindows?z+"+Y":z+"+Shift+Z",N=3,O=[o.Z,a.Z,s.Z,l.Z,u.Z,c.Z,d.Z],P=Array.from({length:6}).map(function(t,e){return[O[e+1],"h"+(e+1),z+"+"+R+"+"+(e+1),"#".repeat(e+1)+" Space","heading","h"+(e+1)]}),Z=(0,r.f)([[f.Z,"bold",z+"+B","**Text** Space","bold"],[h.Z,"italic",z+"+I","*Text* Space","italic"],[p.Z,"underline",z+"+U","~Text~ Space","underline"],[v.Z,"undo",z+"+Z",void 0,"undo"],[g.Z,"redo",D,void 0,"redo"],[y.Z,"strikethrough",z+"+Shift+X","~~Text~~ Space","strikethrough"],[m.Z,"blockquote",z+"+Shift+>","> Space","blockquote","true"],[b.Z,"unorderlist",z+"+Shift+8","- Space","list","bullet"],[S.Z,"orderlist",z+"+Shift+7","1. Space","list","number"],[E.Z,"checkbox",z+"+"+R+"+T","[] Space","list","check"],[I.Z,"text-indent",z+"+]",void 0,"indentRight","true"],[C.Z,"align-center",z+"+Shift+E",void 0,"align","center"],[L.Z,"align-left",z+"+Shift+L",void 0,"align","left"],[x.Z,"align-right",z+"+Shift+R",void 0,"align","right"],[w.Z,"horizontal-line",z+"+"+R+"+S",void 0,"horizontal-line"],[T.Z,"image","",void 0,"image"],[_.Z,"hyperlink",z+"+K",void 0,"hyperlink"],[A.Z,"table",z+"+"+R+"+A",void 0,"table"],[k.Z,"codeblock",z+"+"+R+"+C",void 0,"codeblock"],[M.Z,"video","",void 0,"video"]],P),W=[{size:"0.85em",text:"small"},{size:"1em",text:"normal",isDefault:!0},{size:"1.15em",text:"large"},{size:"1.43em",text:"max"}],K=["monospace",'"Aril black", sans-serif','"Arial narrow", sans-serif',"arial, helvetica, sans-serif",'"comic sans ms", sans-serif',"Garamond, serif","Georgia, serif","Tahoma, sans-serif",'"Trebuchet MS", sans-serif',"Verdana, sans-serif",'"Times new Roman", serif'],F=["Fixed width","Wide font","Narrow font","Sans-Serif","comic sans ms","Garamond","Georgia","Tahoma","Trebuchet MS","Verdana","Serif"],U=Array.from({length:K.length}).map(function(t,e){return{font:K[e],text:F[e],style:{fontFamily:K[e]}}});U[3].isDefault=!0;var B=["å›ºå®šå®½åº¦","å®½å­—ä½“","çª„å­—ä½“","Sans-Serif","comic sans ms","Garamond","Georgia","Tahoma","Trebuchet MS","Verdana","Serif"],V=Array.from({length:K.length}).map(function(t,e){return{font:K[e],text:B[e],style:{fontFamily:K[e]}}});V[3].isDefault=!0;var j=[{font:"simsun, STSong, serif",text:"å®‹ä½“",style:{fontFamily:"simsun, STSong, serif"},isDefault:!0},{font:"simhei, STHeiti, sans-serif",text:"é»‘ä½“",style:{fontFamily:"simhei, STHeiti, sans-serif"}},{font:"nsimsun, monospace",text:"æ–°å®‹",style:{fontFamily:"nsimsun, monospace"}}],H=[{font:'"ms pgothic", sans-serif',text:"ï¼°ã‚´ã‚·ãƒƒã‚¯",style:{fontFamily:'"ms pgothic", sans-serif'},isDefault:!0},{font:'"ms pmincho", serif',text:"ï¼°æ˜Žæœ",style:{fontFamily:'"ms pmincho", serif'}},{font:'"ms gothic", monospace',text:"ã‚´ã‚·ãƒƒã‚¯",style:{fontFamily:'"ms gothic", monospace'}}],X=[[void 0,"#dee0e3cc","#fbbfbc","#fed4a4cc","#fff67acc","#b7edb1cc","#bacefdb3","#cdb2fab3"],["#f2f3f5","#bbbfc4","#f76964","#ffa53d","#ffe928","#62d256","#4e83fd8c","#935af68c"]],q=[[void 0,"#646a73","#d83931","#de7802","#dc9b04","#2ea121","#245bdb","#6425d0"]]},283465:function(t,e,n){"use strict";n.d(e,{o:function(){return tl}});var r=n("293096");n("904035"),n("928450");var i=n("539725"),o=n("88648"),a=n("713097"),s=n.n(a),l=n("309931"),u=n("433500"),c=n("108728"),d=n("713099"),f=n("762152"),h=n("839430"),p=n("380844"),v=(0,r.a)(h.cO.map(function(t){var e=(0,r.a)(t,6),n=e[0],i=e[1],a=e[2],s=e[3],l=e[4],u=e[5];return(0,o.memo)(function(t){var e=t.activeAttr,c=t.i18n,d=t.disabledKeys,f=t.extra,h=void 0===f?{}:f,v=h.tooltipOverride,g=(0,r.h)(h,["tooltipOverride"]),y=null!=v?v:(c["toolbar."+i]||i)+(a?" ("+a+")":"")+(s?"\n"+s:"");return o.createElement(p.Z,{highlighted:void 0===u?l in e:e[l]===u,disabled:d.includes(l),tooltipText:y,icon:o.createElement(n,null),pluginKey:l,pluginValue:u,extra:g})},function(t,e){return void 0===u?l in t.activeAttr==l in e.activeAttr&&t.disabledKeys.includes(l)===e.disabledKeys.includes(l):t.activeAttr[l]===u==(e.activeAttr[l]===u)&&t.disabledKeys.includes(l)===e.disabledKeys.includes(l)})}),23),g=v[0],y=v[1],m=v[2],b=v[3],S=v[4],E=v[5],I=v[6],C=v[7],L=v[8],x=v[9],w=v[10],T=v[11],_=v[12],A=v[13],k=v[14],M=v[15],z=v[16],R=v[17],D=v[18],N=v[19],O=v[20],P=v[21],Z=v[22],W=n("405946"),K=n("233055"),F=n("395730"),U="align",B=["left","center","right"],V=(0,o.memo)(function(t){var e=t.activeAttr,n=t.disabledKeys,r=t.i18n,i=n.includes(U),a=(0,o.useMemo)(function(){return o.createElement(K.v,null,B.map(function(t){return o.createElement(K.v.Item,{key:t,"plugin-key":U,"plugin-disabled":null==i?void 0:i.toString(),"plugin-value":t},o.createElement("span",null,r["toolbar.align-"+t]))}))},[r,i]),s=e[U]||B[0];return o.createElement(F.Z,{buttonContent:r["toolbar.align-"+s],dropdownProps:{overlay:a,disabled:i}})},function(t,e){return t.disabledKeys.includes(U)===e.disabledKeys.includes(U)&&t.i18n===e.i18n&&t.activeAttr[U]===e.activeAttr[U]}),j=n("294163"),H=n("209239"),X=n("195607"),q="fontfamily",Y=(0,o.memo)(function(t){var e=t.activeAttr,n=t.disabledKeys,i=t.i18n,a=t.extra,s=void 0===a?{}:a,l=s.language,u=void 0===l?"EN":l,c=s.env,d=void 0===c?"EN":c,f=s.fontFamilies,p=n.includes(q),v=(0,o.useMemo)(function(){if(f)t=f;else switch(u){case"ZH":t=h.gM;break;case"EN":t="CN"===d?h.d2:h.P6;break;case"JP":t=h.KL;break;default:t=h.P6}var t,e=t.find(function(t){return t.isDefault}),n=t.reduce(function(t,e){var n;return(0,r.g)((0,r.g)({},t),((n={})[e.font]=(0,X.Q)(e.text,i),n))},{});return{fontFamilies:t,defaultFont:e,mapFont2Name:n}},[u,d,f,i]),g=v.fontFamilies,y=v.defaultFont,m=v.mapFont2Name,b=e[q]||(null==y?void 0:y.font),S=m[b]||(0,X.Q)(null==y?void 0:y.text,i)||"default",E=o.createElement(K.v,{selectedKeys:[String(b)]},g.map(function(t){var e;return o.createElement(K.v.Item,{key:String(t.font),"plugin-key":q,"plugin-disabled":null==p?void 0:p.toString(),"plugin-value":t.font},o.createElement("span",{style:{fontFamily:(null===(e=t.style)||void 0===e?void 0:e.fontFamily)||t.font}},(0,X.Q)(t.text,i)))}));return o.createElement(F.Z,{buttonContent:o.createElement("span",{style:{fontFamily:S===(0,X.Q)(null==y?void 0:y.text,i)?null==y?void 0:y.font:b}},S),dropdownProps:{overlay:E,disabled:p}})},function(t,e){return t.disabledKeys.includes(q)===e.disabledKeys.includes(q)&&t.i18n===e.i18n&&t.activeAttr[q]===e.activeAttr[q]&&(0,H.X)(t.extra,e.extra)}),Q=n("57406"),G={DIVIDER:function(){return o.createElement("div",{className:"editor-kit-toolbar-v2-divider"})},Bold:g,Italic:y,Underline:m,Undo:b,Redo:S,Strikethrough:E,Blockquote:I,UnorderedList:C,OrderedList:L,Checkbox:x,Indent:w,AlignCenter:T,AlignLeft:_,AlignRight:A,HorizontalLine:k,Image:M,Hyperlink:z,Table:R,CodeBlock:D,Video:N,H1:O,H2:P,H3:Z,FontSizeDropdown:W.Z,AlignDropdown:V,HeadingDropdown:j.Z,FontFamilyDropdown:Y,ColorPicker:Q.Z};function J(t){if("string"==typeof t)return G[t];if(!function(t){var e=t.type;return void 0!==e&&("string"==typeof e||!1)}(t))return t;var e=G[t.type];return function(n){var i;return o.createElement(e,(0,r.g)({},n,{extra:(0,r.g)({tooltipOverride:(null===(i=t.getTooltipFromI18N)||void 0===i?void 0:i.call(t,n.i18n))||t.tooltip},t.extraPropsToBuiltinComp||{})}))}}var tt=function(t){return t!==document.scrollingElement&&t?(0,f.re)(t):{top:0,left:0,clientHeight:0,clientWidth:0,scrollLeft:0,scrollTop:0}},te=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wrapperRef=o.createRef(),e}(0,r.d)(e,t);var n=e.prototype;return n.getWrapperClassName=function(){},n.getWrapperStyle=function(){return{}},n.componentDidMount=function(){this.bindEvent()},n.componentWillUnmount=function(){this.unbindEvent()},n.bindEvent=function(){var t=this.props.editor;t.on(u.r.SELECTION_CHANGE,this.update),t.on(u.r.EXEC_COMMAND,this.update)},n.unbindEvent=function(){var t=this.props.editor;t.off(u.r.SELECTION_CHANGE,this.update),t.off(u.r.EXEC_COMMAND,this.update)},n.update=function(){this.forceUpdate()},n.getRenderInfo=function(){var t,e,n=this.props,i=n.getSelectionInfo,o=n.getI18n,a=i(),s=a.activeAttrMap,l=a.disabledKeys,u=o(),c=Object.keys(s);try{for(var d=(0,r.c)(c),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.startsWith("list-")){var p=s[h];delete s[h];var v=h.substring(5);!s[v]&&(s[v]=p)}}}catch(e){t={error:e}}finally{try{f&&!f.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}return{activeAttr:s,disabledKeys:l,i18n:u}},Object.defineProperty(n,"convertedComponents",{get:function(){return!this._convertedComponents&&(this._convertedComponents=this.props.items.map(J)),this._convertedComponents},enumerable:!1,configurable:!0}),n.render=function(){var t=this.props.handleWrapperClick;return o.createElement("div",{className:s()("editor-kit-toolbar-v2-wrapper",this.getWrapperClassName()),ref:this.wrapperRef,style:this.getWrapperStyle(),onClick:function(e){e.persist(),t(e.target)},onMouseDown:function(t){t.preventDefault()}},this.renderContent())},(0,r.e)([i.W],e.prototype,"update",null),e}(o.PureComponent),tn="floattoolbar",tr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={isVisible:!1,animateDirection:"none",scrollReccord:null,positionLeft:0,positionTop:0,scrollStatus:null},e.floatConfig=(0,r.g)({shouldFollowScroll:!0,shouldFollowSelection:!0},e.props.floatConfig||{}),e.editor=e.props.editor,e.listenToScroll=(0,d.P)(e._listenToScroll,50,{leading:!0,trailing:!0}),e.throttledShowAtCurrentSelection=(0,d.P)(function(){return e.showAtCurrentSelection()},100),e.checkIfNeedToHideToolbar=(0,d.P)(e._checkIfNeedToHideToolbar,100,{leading:!0,trailing:!1}),e.checkIfNeedToShowToolbar=(0,d.P)(e._checkIfNeedToShowToolbar,100,{leading:!0,trailing:!0}),e.setPosition=function(t,n){var i=t.left,o=t.top;return void 0===n&&(n={}),(0,r._)(e,void 0,void 0,function(){var t,e,a,s,l,u,c,d,h,p,v,g,y,m,b,S,E,I,C,L,x=this;return(0,r.b)(this,function(w){var T,_,A,k,M,z,R,D,N,O,P,Z,W,K,F,U,B,V,j,H,X,q,Y,Q,G;if(!(t=this.wrapperRef.current))return[2];return a=(e=(0,r.g)({anchor:"topLeft",offset:{}},n)).anchor,s=e.offset,l=e.ignoreBoundary,c=(u=t.getBoundingClientRect()).height,d=u.width,h=u.left,p=u.top,"center"===a?(v=void 0===o?p:o-c/2,g=void 0===i?h:i-d/2):"topLeft"===a&&(v=null!=o?o:p,g=null!=i?i:h),m=void 0===(y=s.left)?0:y,S=void 0===(b=s.top)?0:b,T={left:g+m,top:v+S},_=t,A=null===(L=this.props.floatConfig)||void 0===L?void 0:L.boundary,k=this.editor.getViewPortPadding,M=l,D=(R=_.getBoundingClientRect()).height,N=R.width,P=(O=(0,f.AS)(null!==(z=null==k?void 0:k())&&void 0!==z?z:0)).paddingBottom,Z=O.paddingLeft,W=O.paddingRight,K=O.paddingTop,U=(F=function(t){var e,n,r,i;return(void 0===t&&(t=!1),"boolean"==typeof t)?{ignoreTop:t,ignoreLeft:t,ignoreRight:t,ignoreBottom:t}:{ignoreTop:null!==(e=t.top)&&void 0!==e&&e,ignoreLeft:null!==(n=t.left)&&void 0!==n&&n,ignoreRight:null!==(r=t.right)&&void 0!==r&&r,ignoreBottom:null!==(i=t.bottom)&&void 0!==i&&i}}(M)).ignoreBottom,B=F.ignoreLeft,V=F.ignoreRight,j=F.ignoreTop,H=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return{top:Math.max.apply(Math,(0,r.f)(t.map(function(t){var e;return null!==(e=t.top)&&void 0!==e?e:-1/0}))),left:Math.max.apply(Math,(0,r.f)(t.map(function(t){var e;return null!==(e=t.left)&&void 0!==e?e:-1/0}))),right:Math.min.apply(Math,(0,r.f)(t.map(function(t){var e;return null!==(e=t.right)&&void 0!==e?e:1/0}))),bottom:Math.min.apply(Math,(0,r.f)(t.map(function(t){var e;return null!==(e=t.bottom)&&void 0!==e?e:1/0})))}}({bottom:U?1/0:window.innerHeight-P,right:V?1/0:window.innerWidth-W,top:j?-1/0:K,left:B?-1/0:Z},function(t){return void 0===t?{bottom:1/0,left:-1/0,right:1/0,top:-1/0}:"function"==typeof t?t().getBoundingClientRect():t.getBoundingClientRect()}(A)),X=(0,r.g)({},T),q=H.top+5-T.top,Y=H.left+5-T.left,Q=T.left+N-H.right+5,(G=T.top+D-H.bottom+5)>0&&(X.top=T.top-G),Q>0&&(X.left=T.left-Q),q>0&&(X.top=T.top+q),Y>0&&(X.left=T.left+Y),I=(E=X).left,C=E.top,[2,new Promise(function(t){x.setState({positionLeft:I,positionTop:C},t)})]})})},e.setVisibility=function(t,n){var r=e.state,i=r.scrollStatus,o=r.scrollReccord;!1===t&&null!==o&&null!==i&&e.setState({scrollReccord:null,scrollStatus:null});var a=(null==n?void 0:n.animateDirection)||"none";return e.state.isVisible===t&&e.state.animateDirection===a?Promise.resolve():new Promise(function(n){e.setState({isVisible:t,animateDirection:a},n)})},e.showAtPosition=function(t,n){return void 0===n&&(n={}),(0,r._)(e,void 0,void 0,function(){return(0,r.b)(this,function(e){switch(e.label){case 0:return[4,this.setPosition(t,n)];case 1:return e.sent(),[4,this.setVisibility(!0,n)];case 2:return e.sent(),this.floatConfig.shouldFollowScroll&&!n._bypassScrollStatusCheck&&this.checkAndSetScrollStatus(),[2]}})})},e.getPosition=function(){var t=e.state,n=t.isVisible,r=t.positionLeft,i=t.positionTop;return n?{left:r,top:i}:null},e.setItems=function(t){e._convertedComponents=t.map(J),e.forceUpdate()},e}(0,r.d)(e,t);var n=e.prototype;return n.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e,n=this.floatConfig,r=n.onMount,i=n.shouldFollowScroll,o=n.shouldFollowSelection;r&&r({getPosition:this.getPosition,setPosition:this.setPosition,setVisibility:this.setVisibility,showAtPosition:this.showAtPosition,setItems:this.setItems}),i&&(null===(e=this.editor.getScrollContainer())||void 0===e||e.addEventListener("scroll",this.listenToScroll),window.addEventListener("scroll",this.listenToScroll)),o&&this.bindSelectionHandlers(),this.bindEditorCalls(),window.addEventListener("resize",this.throttledShowAtCurrentSelection)},n.bindSelectionHandlers=function(){var t=this,e=function(){return t._checkIfNeedToShowToolbar("mouseup")},n=function(){return t.checkIfNeedToShowToolbar("mousemove")};document.addEventListener("mouseup",e),document.addEventListener("touchend",e),document.addEventListener("mousemove",n),this.editor.on(u.r.SELECTION_CHANGE,this.checkIfNeedToHideToolbar),this.unbindSelectionHandlers=function(){document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e),document.removeEventListener("mousemove",n),t.editor.off(u.r.SELECTION_CHANGE,t.checkIfNeedToHideToolbar)}},n.bindEditorCalls=function(){var t=this,e=this.editor,n=["setPosition","setVisibility","showAtPosition","getPosition","setItems"],i=n.map(function(e){return function(n){return t[e].apply(t,(0,r.f)(n))}});n.forEach(function(t,n){e.registerCommand(tn+"-"+t,i[n])}),this.unbindEditorCalls=function(){n.forEach(function(t,n){e.off(tn+"-"+t,i[n])})}},n.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this);var e,n,r,i=this.floatConfig,o=i.shouldFollowScroll,a=i.shouldFollowSelection;o&&(null===(e=this.editor.getScrollContainer())||void 0===e||e.removeEventListener("scroll",this.listenToScroll),window.removeEventListener("scroll",this.listenToScroll)),a&&(null===(n=this.unbindSelectionHandlers)||void 0===n||n.call(this)),null===(r=this.unbindEditorCalls)||void 0===r||r.call(this),window.removeEventListener("resize",this.throttledShowAtCurrentSelection)},n.getWrapperStyle=function(){var t=this.state,e=t.positionLeft;return{top:t.positionTop,left:e}},n.getWrapperClassName=function(){var t=this.state,e=t.isVisible,n=t.animateDirection,r=t.scrollReccord;return s()("editor_toolbar-float","toolbar-animation-"+n,{"editor_toolbar-is_visible":e,"editor_toolbar-transition_top":null!==r})},n._listenToScroll=function(){return(0,r._)(this,void 0,void 0,function(){var t,e,n,i,o,a,s,l;return(0,r.b)(this,function(r){switch(r.label){case 0:if(!this.state.isVisible)return[2];return[4,this.checkAndSetScrollStatus()];case 1:if(r.sent(),e=(t=this.state).scrollStatus,n=t.scrollReccord,"pending"===e||null===e||null===n)return[2];return i=n.positionTopShot,o=n.scrollerScrollTop,a=n.windowScrollTop,s=tt(this.editor.getScrollContainer()||window).scrollTop,l=o+a+i-window.pageYOffset-s,this.setPosition({top:l},{ignoreBoundary:{top:!0,bottom:!0}}),[2]}})})},n.fixToolbar=function(){var t=this;return new Promise(function(e){t.setState({scrollStatus:"fixed",scrollReccord:{positionTopShot:t.state.positionTop,scrollerScrollTop:tt(t.editor.getScrollContainer()).scrollTop,windowScrollTop:window.pageYOffset}},e)})},n.checkAndSetScrollStatus=function(){var t=this;return new Promise(function(e){var n=t.state.scrollStatus,r=t.checkIfToolbarOverlapsWithSelection();if(null===n)return"overlapped"===r?t.setState({scrollStatus:"pending"},e):t.showAtCurrentSelection({_bypassScrollStatusCheck:!0,ignoreBoundary:{top:!0,bottom:!0},animateDirection:"none"},{isBackward:"above-selection"===r}).then(t.fixToolbar).then(e);if("pending"!==n)return e();return"overlapped"===r?e():t.showAtCurrentSelection({_bypassScrollStatusCheck:!0,ignoreBoundary:{top:!0,bottom:!0},animateDirection:"none"},{isBackward:"above-selection"===r}).then(t.fixToolbar).then(e)})},n.checkIfToolbarOverlapsWithSelection=function(){var t=this.wrapperRef.current;if(!t)return"above-selection";var e=this.editor.selection.getSelection(),n=this.editor.rectModule.getRawCaretRect(e.start),r=this.editor.rectModule.getRawCaretRect(e.end),i=Math.min(n.top,r.top)-5,o=Math.max(n.bottom,r.bottom)+5,a=t.getBoundingClientRect(),s=a.bottom,l=a.top;return s<i?"above-selection":l>o?"below-selection":"overlapped"},n._checkIfNeedToShowToolbar=function(t){if(!(this.state.isVisible||"mousemove"===t&&this.editor.getStatus("isMouseDown")))this.showAtCurrentSelection()},n.showAtCurrentSelection=function(t,e){var n,i,o;return void 0===t&&(t={}),void 0===e&&(e={}),(0,r._)(this,void 0,void 0,function(){var a,s,l,u,c,d,f,h,p,v,g,y;return(0,r.b)(this,function(m){return(s=(a=this.editor).selection.getSelection()).isCollapsed()?[2]:(l=null!==(n=e.isBackward)&&void 0!==n?n:s.isBackward,u=s.end,c=s.start,d=l?c:u,h=(f=a.rectModule.getRawCaretRect(d)).left,p=f.top,g={left:h,top:p+(v=f.height)/2},y=v/2+(null!==(o=null===(i=this.wrapperRef.current)||void 0===i?void 0:i.getBoundingClientRect().height)&&void 0!==o?o:0)/2+10,l&&(y*=-1),[2,this.showAtPosition(g,(0,r.g)({anchor:"center",offset:{top:y},animateDirection:l?"bottom-to-top":"top-to-bottom"},t))])})})},n._checkIfNeedToHideToolbar=function(t){var e=t.previous,n=t.current;if(!c.W.isRangeEqual(e,n))this.setVisibility(!1)},n.renderContent=function(){var t=this.getRenderInfo();return o.createElement(o.Fragment,null,this.convertedComponents.map(function(e,n){return o.createElement(e,(0,r.g)({key:n},t))}))},(0,r.e)([i.W],e.prototype,"_listenToScroll",null),(0,r.e)([i.W],e.prototype,"fixToolbar",null),(0,r.e)([i.W],e.prototype,"_checkIfNeedToShowToolbar",null),(0,r.e)([i.W],e.prototype,"showAtCurrentSelection",null),(0,r.e)([i.W],e.prototype,"_checkIfNeedToHideToolbar",null),e}(te),ti=n("900428"),to=n("432349"),ta=n("564981");function ts(t){return(0,r.f)(t).reduce(function(t,e){var n=(0,r.a)(e,2),i=n[0],o=n[1];return t[i]=o,t},{})}var tl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="FloatToolbar",e}return(0,r.d)(e,t),e.prototype.renderReact=function(){l.render(o.createElement(tr,(0,r.g)({key:this.reactKey},this._options,{getSelectionInfo:this.getSelectionInfo,handleWrapperClick:this.handleWrapperClick})),this.mountPoint)},(0,r.e)([i.W],e.prototype,"renderReact",null),e}(function(t){function e(e){var n=t.call(this)||this;return n._options=e,n._mountPoint=null,n.reactKey=(0,ta.D)(),n.editor=e.editor,n}(0,r.d)(e,t);var n=e.prototype;return Object.defineProperty(n,"mountPoint",{get:function(){if(!this._mountPoint){var t=this._options.toolbarId||"editor-toolbar_"+(0,ta.D)(),e=document.getElementById(t);!e&&((e=document.createElement("div")).setAttribute("id",t),document.body.appendChild(e)),this._mountPoint=e}return this._mountPoint},enumerable:!1,configurable:!0}),n.clearMountPoint=function(){if(!!this._mountPoint)this._mountPoint.remove(),this._mountPoint=null},n.handleWrapperClick=function(t){for(var e=this,n=t,r=null,i=null;n&&n!==this.mountPoint;){if(r=null==n?void 0:n.getAttribute("plugin-key")){if((null==n?void 0:n.getAttribute("plugin-disabled"))==="true")return;i=null==n?void 0:n.getAttribute("plugin-value");break}n=n.parentElement}if(!!r){if(/\[.+\]/.test(r))try{for(var o=JSON.parse(r),a=JSON.parse(i||"[]").map(function(t){return null===t?void 0:t}),s=0;s<o.length;s++)this.editor.execCommand(o[s],{value:a[s]})}catch(t){}else this.editor.execCommand(r,null===i?void 0:{value:i});this.editor.once("paint",function(){return e.renderReact(!0)})}},n.editorDidMount=function(){this.renderReact(!0)},n.destroy=function(){this.clearMountPoint()},n.getMultipleLineAttributes=function(t){for(var e=t.start,n=t.end,r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[],a=r;a<=i;a++)o.push(this.editor.getContentState().getLineAttributes(e.zoneId,a));return o},n.getSelectionInfo=function(){var t,e,n,i,o,a,s,l=this.editor,u=new Map,c=new Map,d=l.selection.getSelection(),f=d.start,h=d.end,p=l.getContentState().getEntities({start:f,end:h}),v=l.getContentState().schema;if(p.length){u=new Map(Object.entries(p[0].attributes));try{for(var g=(0,r.c)(p),y=g.next();!y.done;y=g.next()){var m=y.value;if(!m.attributes){u=new Map;break}var b=m.attributes,S=m.text,E=(0,ti.qF)(v,b),I=E?null===(s=v.get(E))||void 0===s?void 0:s.attributes:void 0;try{for(var C=(n=void 0,(0,r.c)(u.entries())),L=C.next();!L.done;L=C.next()){var x=(0,r.a)(L.value,2),w=x[0],T=x[1],_=!0;I&&(_=(0,ti.EG)(w,T,T,I)),_&&T!==b[w]&&!b.lmkr&&"\n"!==S&&u.delete(w)}}catch(t){n={error:t}}finally{try{L&&!L.done&&(i=C.return)&&i.call(C)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{y&&!y.done&&(e=g.return)&&e.call(g)}finally{if(t)throw t.error}}}var A=this.getMultipleLineAttributes({start:f,end:h});A.length&&(c=new Map(Object.entries(A[0].toMap())),A.forEach(function(t){var e,n,i=t.toMap();try{for(var o=(0,r.c)(c.entries()),a=o.next();!a.done;a=o.next()){var s=(0,r.a)(a.value,2),l=s[0],u=s[1];i[l]!==u&&c.delete(l)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}));var k=this.editor.getContentState().getInlineStyleOverride(d.toPosition()),M=Object.assign(ts(u.entries()),ts(c.entries()),k);try{for(var z=(0,r.c)(Object.entries(M)),R=z.next();!R.done;R=z.next()){var D=(0,r.a)(R.value,2),N=D[0],O=D[1];""===O&&delete M[N]}}catch(t){o={error:t}}finally{try{R&&!R.done&&(a=z.return)&&a.call(z)}finally{if(o)throw o.error}}var P=[];return this._options.getDisabledPluginKeys&&(P=this._options.getDisabledPluginKeys({entities:p,selection:d})),{activeAttrMap:M,disabledKeys:P}},(0,r.e)([i.W],e.prototype,"handleWrapperClick",null),(0,r.e)([i.W],e.prototype,"getSelectionInfo",null),e}(to.S))},394405:function(t,e,n){"use strict";n.d(e,{m:function(){return G},J:function(){return tu},b:function(){return H},l:function(){return Q}});var r,i,o,a,s,l=n("293096"),u=n("328702"),c=n("311762"),d=n("900428"),f=n("433500"),h=n("975917"),p=n("431468"),v=n("233230"),g=n("69714"),y=n("830025"),m=n("432349"),b=n("876212"),S=n("201264"),E=n("11622"),I=n("471448"),C=n("209129"),L=n("82447"),x=n("353270"),w=n("819967"),T=n("594135"),_=n("720103"),A=/(?:^| )ol-id([0-9a-zA-Z]+)/,k=/^[0-9a-zA-Z]+$/,M=/(number)([0-9]+)/,z=/([a-z]+)([0-9]+)/;(r=a||(a={}))[r.UP=0]="UP",r[r.DOWN=1]="DOWN";var R=["lang","start","origin-start","ol-id","text-indent"],D=["bold","italic","underline","strikethrough","fontsize","fontcolor","fontfamily","fontweight","backgroundcolor"].map(function(t){return"list-"+t}),N=n("170468"),O=n.n(N),P=n("392614"),Z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},W=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF]/gm;function K(t){return t&&t.replace(W,function(t){return Z[t]||"&#x"+("00"+t.charCodeAt(0).toString(16)).slice(-2)+";"})}var F=n("191324"),U="bullet",B="number";(i=s||(s={}))[i.BULLET=0]="BULLET",i[i.ORDER=1]="ORDER",i[i.INDENT=2]="INDENT";var V="clientside-remove-text-indent",j=function(t){function e(n){var r=t.call(this)||this;return r.name="List",r.pasteLineNum=-1,r.willRenumberArr=[],r.needRenumberList=!1,r.olIdMap={},r.deserializeOlID="",r.serializeOlID="",r.prevListType=-1,r.prefixAttributes=D,r.relativeAttrKeys=R.concat(D),r.zoneShouldRemoveTextIndent=null,r.handleDeleteKey=function(t){var e=t.isBackward,n=r.editor.selection.getSelection(),i=n.start,o=r.editor.getContentState().getActiveZone().getLine(i.line);if(!o)return;var a=o.getLineAttributes().toMap();if(!!(e&&n.isCollapsed()&&a.list&&n.start.offset===o.getLineMarker()))r.handleEditorWillDoDeleteKey(),t.stopEvent(),t.preventEvent(),t.e.preventDefault()},r.handleWillDeleteFromCut=function(t){var e=r.editor,n=e.selection.getSelection(),i=n.start,o=n.end,a=i.zoneId,s="",l="";s=X(e,a,i.line);var u=e.getContentState().getZoneState(a);u&&i.line!==u.length()-1&&(l=X(e,a,o.line+1)),(s||l)&&(r.cutList(),t.preventEvent())},r.cutList=function(){var t=r.editor;t.undoModule.batchedUndo(function(){var e=r.renumberList,n=r.deleteNumberList,i=t.selection.getSelection(),o=i.start,a=i.end,s=o.line,l=t.getContentState(),c=l.hasLineMarker(o)?1:0,d=o;(0,P.Q)(a,l)&&function(t,e){var n=t.zoneId,r=t.line,i=t.offset;if(i>1)return!1;var o=e.getZoneState(n);if(!o)throw Error("isStartOfLine execute error: zoneId "+n+" does not exist.");var a=o.getLine(r);if(!a)throw Error("isStartOfLine execute error: zoneId "+n+" line "+r+" does not exist.");return i===(a.hasLineMarker()?1:0)}(o,l)&&(d={zoneId:o.zoneId,line:s,offset:c});var f=n(new u.e({start:d,end:a,editor:t}));t.getContentState().deleteText({start:d,end:a});var h=t.selection.getSelection().start,p=h.zoneId,v=h.line;-1!==v&&f.forEach(function(t){"number"==typeof t&&null===e(p,v+1)?e(p,v):e(p,v,t,!1)})})},r.caretColumn=function(){return r.editor.selection.getSelection().start.offset},r.deleteNumberList=function(t,e){void 0===e&&(e=[]);var n=r.editor,i=(t=t||n.selection.getSelection()).start,o=t.end,a=i.zoneId,s=i.line,l=o.line,u=n.getContentState().getZoneState(a);if(!u)return e;var c=u.getLine(s);if(t.isCollapsed()&&r.caretColumn()===(c.hasLineMarker()?1:0)){var d=t.start.line>1?X(n,a,t.start.line-1):"",f=t.start.line<u.length()?X(n,a,t.start.line+1):"";if(d.indexOf("code")>-1&&f.indexOf("code")>-1)return e.push(Number(t.start.line)),e}for(var h=s;h<=l;h++){var p=X(n,a,h);if(-1!==p.indexOf("code")){e.push(Number(h));continue}if(-1!==p.indexOf(B)){var v=u.getLine(h).getLineAttributes().toMap()["ol-id"];if(v&&!e.includes(v))e.push(v);else if(!v){var g=(0,F.iq)();r.renumberList(a,h,g,!0),e.push(g)}}}return e},r.handleDidPaste=function(){if(r.zoneShouldRemoveTextIndent){var t,e,n,i,o=r.editor.getContentState(),a=null===(i=o.getZoneState(r.zoneShouldRemoveTextIndent))||void 0===i?void 0:i.getEntities([[V,"true"]]);if(a)try{for(var s=(0,l.c)(a),u=s.next();!u.done;u=s.next()){var c=u.value;o.setLineAttributes(c.start.zoneId,c.start.line,((n={"text-indent":""})[V]="",n))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}r.zoneShouldRemoveTextIndent=null}var d=r.editor.selection.getSelection(),f=d.start,h=d.end;r.doFixNewInsertNodeListError(r.pasteLineNum,Math.max(f.line-r.pasteLineNum,1)),r.mergeListIfNecessary(f.zoneId,f.line,h.line),r.renumberList(f.zoneId,r.pasteLineNum)},r.handleContentChange=function(t){var e=t.changes,n=t.options;if(!n.isRemote&&"setContent"!==n.type&&!!r.needRenumberList)Object.values(e).forEach(function(t){var e=0;t.forEach(function(n){var i=n.start,o=n.inserts,a=n.deletes;(o.length>1||a.length>1||t.length>1)&&r.doFixNewInsertNodeListError(i+e,o.length),a.length&&a.forEach(function(t){var e;(null===(e=t.getLineAttributes().toMap().list)||void 0===e?void 0:e.includes("number"))&&r.handleDeleteListLine(t.index)}),e+=o.length-a.length})})},r.handleCompositionEnd=function(t){var n,i=r.editor.selection.getSelection();if(t.data.length>0||!i.isCollapsed())return;var o=i.start,a=o.zoneId,s=o.line,l=r.editor.getContentState(),u=null===(n=l.getZoneState(a))||void 0===n?void 0:n.getLine(s);if(!(null==u?void 0:u.isTextEmpty()))return;var c=u.getLineAttributes().toMap();if(e.KEY in c)l._forceRefresh(a,[s])},r.doFixNewInsertNodeListError=function(t,e){if(!!r.needRenumberList)for(var n,i,o=r.renumberList,a=r.editor.getContentState().getActiveZone().getZoneId(),s="",l="",u=0;u<e;++u){var c=t+u,d=X(r.editor,a,c),f=X(r.editor,a,c+1),h=d.indexOf(B)>-1,p=d.indexOf("code")>-1,v=f.indexOf("code")>-1,g=h&&(null===(i=null===(n=r.editor.getContentState().getZoneState(a))||void 0===n?void 0:n.getLine(c))||void 0===i?void 0:i.getLineAttributes().toMap()["ol-id"])||"";if(h&&g!==s){var y=""===g?s:"",m=r.needRenumberList;r.needRenumberList=!1,y?o(a,c,y,!0):o(a,c),r.needRenumberList=m}var b=l.indexOf("code")>-1;p&&!b&&o(a,c),!p&&v&&o(a,c+1),l=d,s=g}},r.doInsertOrderedList=function(){r.editor.undoModule.batchedUndo(function(){r.doInsertList({attribKey:"list",attribValue:B})})},r.doInsertUnorderedList=function(){r.editor.undoModule.batchedUndo(function(){r.doInsertList({attribKey:"list",attribValue:U})})},r.doInsertList=function(t){var e=t.attribKey,n=t.attribValue,i=t.range,o=t.isAllHasAttrib,a=t.clickZone,s=r.editor;if(i=i||s.selection.getSelection(),void 0===o){var l=function(t,e,n,r){var i=t.getContentState();return e.every(function(t){for(var e=t.start,o=t.end,a=e.zoneId,s=e.line,l=o.line,u=s;u<=l;u++){var c=i.getLineAttributes(a,u).toMap()[n];if(!c||c.slice(0,r.length)!==r){var d=i.getZoneState(a);if(!d)return!1;for(var f=d.getLine(u).getAttributes(),h=!1,p=0,v=f.length;p<v;++p){var g=f[p][0];if("sheet-id"===g||"horizontal-line"===g||"aceTable"===g){h=!0;break}}if(h)continue;return!1}}return!0})}(s,[i],e,n);return r.doInsertList({attribKey:e,attribValue:n,range:i,isAllHasAttrib:l,clickZone:a})}var u=i.start,c=i.end,d=n.replace(/^([a-z]+)\d*$/g,"$1"),f=u.line,h=c.line,p=u.zoneId,v=[],g=r.getClosetListNumberId(p,d,i)||(0,F.iq)(),y=s.getContentState().getZoneState(p);if(!!y){for(var m=f;m<=h;m++){if("code"===d){v.push([m,o?"":"code1",""]);continue}var b=0,S="",E=y.getLine(m).getLineAttributes().toMap()["text-indent"],I=X(s,p,m),C=Q(I);C&&(S=C[1],b=Number(C[2])),E&&(b+=2),S=I||E,o&&(b-=1),C&&"indent"===C[1]&&!E&&(b+=1);var L=S?d+b:d+"1",x=b>0?"indent"+b:"",w=o&&!a?x:L;v.push([m,w,E,g])}var T=v.filter(function(t){var e,n=t[0],r=null===(e=y.getLine(n))||void 0===e?void 0:e._node;return!r||!(r.className.indexOf("IGNORE_LIST")>-1)}).map(function(t){return t[0]}),_=v.reduce(function(t,e){return t[e[0]]=e[1],t},{}),A=v[0][1];M.exec(A)?r.bulkInsertOList(p,T,_):r.setMultiLinesListType(p,T,_,g);var k=v.filter(function(t){return t[2]}).map(function(t){return t[0]});r.setAttributeOnMultiLines(p,k,{"text-indent":""}),r.renumberList(p,h+1)}},r.registerCommand=function(){var t=r.editor;t.registerCommand(e.KEY,function(t){var e=t.value;e===B?r.doInsertOrderedList():e===U&&r.doInsertUnorderedList()}),t.registerCommand(x.P.INDENT_LEFT,function(){(0,T.u)(t,B,!1),(0,T.u)(t,U,!1);var e=r.indexOfListLineInRange(),n=r.editor.selection.getSelection().start,i=n.zoneId,o=n.line;e>-1?r.renumberList(i,e):r.renumberList(i,o+1)}),t.registerCommand(x.P.INDENT_RIGHT,function(){(0,T.u)(t,B,!0),(0,T.u)(t,U,!0);var e=r.indexOfListLineInRange();if(e>-1){var n=r.editor.selection.getSelection().start;r.renumberList(n.zoneId,e)}})},r.deserialize=function(t){var e,n,i=t.node,o=t.deltaSet,a=t.zoneId,s=o;if(i instanceof HTMLElement){var l=i.tagName,u=i.className,d=A.exec(u);if(d&&(s=(0,c.e)(s,a,{"ol-id":d[1]})),"ol"===l.toLowerCase()&&((null===(e=i.parentElement)||void 0===e?void 0:e.tagName.toLowerCase())==="body"||!(null===(n=i.parentElement)||void 0===n?void 0:n.closest("ol")))&&(r.deserializeOlID=(0,F.iq)()),"li"===l.toLowerCase()){var f=function(t){var e=null,n=t,r=t.dataset.list;if("LI"===t.tagName&&r){if(/bullet/.test(r))return"bullet";if(/number/.test(r))return"number"}for(;n;){if("UL"===n.tagName){e="bullet";break}if("OL"===n.tagName){e="number";break}n=n.parentElement}return e}(i),h=function(t){var e=0,n=t.parentElement;if("LI"===t.tagName&&t.dataset.list&&/number/.test(t.dataset.list)){var r=to(t.dataset.list);if(r)return r}for(;n;)["OL","UL"].includes(n.tagName)&&e++,n=n.parentElement;return e}(i),p=String(function(t){var e=t.parentElement;if(e&&"OL"===e.tagName&&"LI"===t.tagName)return(e.start||1)+Array.from(e.children).filter(function(t){return"LI"===t.tagName}).indexOf(t);for(;e;){if("OL"===e.tagName&&e.start)return e.start;e=e.parentElement}return 1}(i)),v=i.getAttribute("data-ol-id"),g=r.deserializeOlID;v&&(!r.olIdMap[v]&&(r.olIdMap[v]=(0,F.iq)()),g=r.olIdMap[v]);var y=function(t){for(var e=null,n=t;n;){var r=/(?:^| )list-([a-z]+[0-9]+)\b/.exec(n.className);if(r&&r[1]){e=r[1];break}n=n.parentElement}var i="",o="";if(t&&"LI"===t.tagName){var a=t.dataset.list,s=void 0===a?"":a;/bullet/.test(s)?i="bullet":/number/.test(s)&&(i="number");var l=s.match(/\d+/);if(l){if(!i)return null;e=i+(o=l[0])}}if(i&&e&&!o){var l=e.match(/\d+/);l&&(e=i+l[0])}return e}(i);(h>=1&&f||y)&&tu(s,a,{list:y||""+f+h,start:p,"origin-start":p}),"number"===f&&tu(s,a,{"ol-id":g})}}return s},r.UNSAFE_editorNormalizePasteNode=function(t){var e,n,i=t.data.node,o=r.editor,s=o.selection.getSelection().start,l=s.line,u=s.offset,c=O()(i).find(">:not(meta)"),d=1===c.length,f=O()(i).find("ul, ol");if(u>0&&d&&f[0]&&c.hasClass("list-div")){var h=O()("<div/>");h.html(f.html());for(var p=0;p<f[0].attributes.length;p++){var v=f[0].attributes[p];h.attr(v.name,v.value)}h.removeClass("bullet1 number1"),h.html(h.find("li")[0].innerHTML),f.replaceWith(h)}Array.from(i.querySelectorAll("ul,ol")).forEach(function(t){Array.from(t.childNodes).forEach(function(t){t.nodeType===Node.TEXT_NODE&&t.parentNode&&t.parentNode.removeChild(t)})});var g=O()(i).find("ol");if(g.length<=0)return;for(var y=g[0],m=g[0];y.previousSibling&&"meta"!==tc(y.previousSibling);)y=y.previousSibling;for(;m.nextSibling;)m=m.nextSibling;if(!y||!m)return;var b=o.getContentState().getZoneState(s.zoneId);if(!!b){var S=null===(e=b.getLine(l-1))||void 0===e?void 0:e.getLineAttributes().toMap()["ol-id"],E=b.getLine(l).getLineAttributes().toMap()["ol-id"],I=null===(n=b.getLine(l+1))||void 0===n?void 0:n.getLineAttributes().toMap()["ol-id"],C="ol"===tc(y),L="ol"===tc(m);if(!C&&!L){r.assignListId(g,(0,F.iq)());return}if(C&&(S||E))r.assignListId(g,S||E);else if(L&&I)r.assignListId(g,I,!0);else{var x=r.getLevelAndOrderFromOl(y),w=x.level,T=x.order,_=tn(o,l).upwardClosestOListInfo;if(_)r.assignListId(g,_.listId);else{var A=te(o,a.UP,l,w,T);if(A){r.assignListId(g,A.listId);return}r.assignListId(g,(0,F.iq)())}}}},r.editorWillPaste=function(t){var e,n,i,o,s,u,f=t.deltaSet,h=t.zoneId,p=t.isInternalPaste,v=t.lineState,g=r.editor.selection.getSelection().start,y=r.editor.getContentState().getActiveZone(),m=g.line;r.pasteLineNum=m;var b=r.editor.getContentState().schema,S=f.get(h),I=S.ops[0],C=I&&(0,d.ky)(I.attributes,b),L=I&&(I.attributes||{}).lmkr,x=L&&(I.attributes.list||I.attributes.blockquote);if(v&&v.getLineAttributes().toMap()["text-indent"]&&L&&I.attributes.list&&!I.attributes["text-indent"]&&(r.zoneShouldRemoveTextIndent=g.zoneId,I.attributes[V]="true"),v&&r.isListLine(v)&&!(0,c.g)(S,"\n")){if(C||x);else{var w=new E.I({zoneId:h});S.eachLine(function(t,e,n){if(0===n){w=w.concat(t);return}var r=e.lmkr?e:{},i=e.lmkr?t.ops.slice(1):t.ops;w=w.insertLineMarker((0,l.g)((0,l.g)({},r),v.getLineAttributes().toMap())).concat(new E.I({zoneId:h,ops:i}))}),f.replace(h,w)}}if(p){var T=!1,_=null,A=!1,k=null;f.forEach(function(t){if(t.zoneId===h&&t instanceof E.I){var e=0;t.eachLine(function(t,n,r){e=r}),t.eachLine(function(t,n,r){if(!!n["ol-id"])0===r&&(T=!0,_=n),r===e&&(A=!0,k=n)})}});var z=null===(s=y.getLine(m-1))||void 0===s?void 0:s.getLineAttributes().toMap()["ol-id"],R=y.getLine(m).getLineAttributes().toMap()["ol-id"],D=null===(u=y.getLine(m+1))||void 0===u?void 0:u.getLineAttributes().toMap()["ol-id"],N=function(t){var e="string"==typeof t?{}:(0,l.g)({},t);f.forEach(function(n){if(n.zoneId===h&&n instanceof E.I){var r=(0,c.r)(n,function(t){return"ol-id"===t.key},function(n){var r,i=n.key,o=n.value,a="string"==typeof t?t:null!==(r=e[o])&&void 0!==r?r:(0,F.iq)();return!e[o]&&(e[o]=a),{key:i,value:a}});f.replace(h,r)}})};if(T||A){if(T&&(z||R))N(((i={})[_["ol-id"]]=z||R,i));else if(A&&D)N(((o={})[k["ol-id"]]=D,o));else{var O=_||{list:"number1",start:"1"},P=O.list,Z=O.start,W=parseInt(M.exec(void 0===P?"number1":P)[2],10),K=parseInt(void 0===Z?"1":Z,10)||1,U=tn(r.editor,m).upwardClosestOListInfo;if(U)N(U.listId);else{var B=te(r.editor,a.UP,m,W,K);N(B?B.listId:{})}}}else N({})}var j=(e=f.get(h),n={},e.eachLine(function(t,e,r){return 0!==r||(n=e,!1)}),"list"in n),H=f.get(h),X=function(){var t=y.getLine(g.line);if(!t)return;var e=t.getLineAttributes().toMap().list;if(!j||!e)return;var n=[];if(H.eachLine(function(t,e){var r=e.list&&Number(e.list.slice(-1));if(!!r)n.push(r)}),!n.length)return;var r=Number(e.slice(-1))||Math.min.apply(Math,(0,l.f)(n)),i=!e&&1===r,o=e&&r+Math.min.apply(Math,(0,l.f)(n))-n[0]<1;if(!i&&!o)return[r,!!e]}();if(X){var q=0,Y=new E.I({zoneId:h});H.eachLine(function(t,e,n){var r=Q(e.list),i=r&&r[1],o=r&&Number(r[2]),a=(0,l.a)(X,2),s=a[0],u=a[1];if(!i||!o){Y=Y.concat(t);return}var c="";u?(0===n&&(q=s-o),c=0===n?""+i+s:""+i+(o+q)):(o!==s&&(q=o-s),c=o===s?i+"1":""+i+(q+1)),Y=Y.insert("*",(0,l.g)((0,l.g)({},t.ops[0].attributes),{list:c})).concat(new E.I({zoneId:h,ops:t.ops.slice(1)}))}),f.replace(h,Y)}return f},r.addListAttrToDeltaSet=function(t,e){if(!(t&&r.isListLine(t)))return e;var n=new I.D,i=t.getLineAttributes().toMap();return e.forEach(function(e,r){if(r!==t.getZoneId()||!(e instanceof E.I)){n=n.concat(e);return}var o=new E.I({zoneId:r});e.eachLine(function(t){t.ops.forEach(function(t,e){if(0!==e){o.push(t);return}var n=t.attributes||{};if("*"===t.insert&&t.attributes&&t.attributes.lmkr){var r=t.attributes.list;o.insert("*",r?n:(0,l.g)((0,l.g)({},n),i))}else o.insertLineMarker(i).push(t)})}),n=n.concat(o)}),n},r.isListLine=function(t){return t.hasLineMarker()&&t.getLineAttributes().toMap().list},r.addListId=function(t,e){if(!!e)O()(t).removeClass(function(t,e){return(e.match(/ol-id([\w]{8})/g)||[]).join(" ")}),O()(t).addClass("ol-id"+e)},r.renderLine=function(t){var e,n,i=t.children,o=t.lineState,a="",s=o.getLineAttributes().toMap();try{for(var u=(0,l.c)(Object.entries(s)),c=u.next();!c.done;c=u.next()){var d=(0,l.a)(c.value,2),f=d[0],h=d[1];if(["list","start","origin-start"].includes(f)||"ol-id"===f&&k.test(h)){var p=a?" ":"",v=f+":"+h;a+=""+p+v}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}var g=/(?:^| )list:(\S+)/.exec(a),y=/(?:^| )ol-id:(\S+)/.exec(a);if(y){var p=t.lineClass?" ":"";t.lineClass+=p+"ol-id"+y[1]}if(g){var m=g[1];if(m){var E="list-div",I=K(m),C=/(?:^| )start:(\S+)/.exec(a)||["start:1","1"],L=parseInt(C[1],10),x=r.getLiStyleFromLineState(o),w=void 0!==x.fontSize?"font-size-"+String(x.fontSize).replace(/\s/g,""):void 0;if(I.indexOf("code")>-1)return E+=" list-code",1===L&&(E+=" list-code-start"),t.lineClass+=" "+E,b.ZP.createElement("code",{start:""+L,className:"list-"+I,spellcheck:"false"},t.children);if(0>I.indexOf(B)){if(I.indexOf("check")>-1||I.indexOf("done")>-1)return i;t.lineClass+=" "+E;var T=I.indexOf("indent")>-1?"indent":"bullet";return b.ZP.createElement(S.B,{className:"list-"+I+" r-list r-list-"+T},b.ZP.createElement(S.n,{style:x,className:w},t.children))}else{if(!C)return t.lineClass+=" "+E,b.ZP.createElement(S.O,{className:"list-"+I+" r-list r-list-number"},b.ZP.createElement(S.o,{style:x,className:w},t.children));1===L&&(E+=" list-start-"+I);var _=/(?:^| )origin-start:(\S+)/.exec(a),A=td(L,Number(Q(I)[2]));if(!_)return t.lineClass+=" "+E,b.ZP.createElement(S.O,{start:""+L,"data-start":""+L,className:"list-"+I+" r-list r-list-number"},b.ZP.createElement(S.o,{start:""+A,"data-start":""+A,style:x,className:w},t.children));var M=K(_[1]);return t.lineClass+=" "+E,b.ZP.createElement(S.O,{"data-origin-start":""+M,start:""+M,"data-start":""+M,className:"list-"+I+" r-list r-list-number"},b.ZP.createElement(S.o,{start:""+A,"data-start":""+A,style:x,className:w},t.children))}}}return i},r.handleKeydown=function(t){var e=t.evt;if(!r.editor)return;var n=r.editor.selection.getSelection(),i=n.start,o=n.end,a=r.editor.getContentState(),s=a.getActiveZone(),l=s.getZoneId();if(!i||!o)return;var u=o.line,c=o.offset,d=s.getLine(u);e.keyCode===w.VD.Delete&&"Delete"===e.key&&n.isCollapsed()&&d&&c===d.getModelText().length&&r.mergeList(l,u+2,u);var f=e.type,h=e.keyCode,p=e.shiftKey,v=e.ctrlKey,g=e.metaKey;if(!_.Z.isSafari||"keydown"!==f)return;if((h===w.VD.Up||h===w.VD.Down)&&!(v||g)){var y=h===w.VD.Up,m=n.isBackward,b=y?Math.max((p,i.line-1),0):Math.min((p&&m?i.line:o.line)+1,s.length()-1);if(!s.getLine(b).getLineAttributes().toMap().list)return;var S=s.getLine(b),E=S.hasLineMarker()?1:0,I=S.length()-1,C=p&&!m?i:{zoneId:l,line:b,offset:E},L=p&&m?o:{zoneId:l,line:b,offset:E};I===E&&(r.editor.selection.setSelection({start:C,end:L}),e.preventDefault())}if(!!a.getLineAttributes(l,i.line).toMap().list&&!!n.isCollapsed()){if(h===w.VD.Left&&(0,w.qT)(e.nativeEvent)){var x=s.getLine(i.line).hasLineMarker()?1:0,b=i.line,T={zoneId:l,line:b,offset:x};e.shiftKey?r.editor.selection.setSelection({end:o,start:T}):r.editor.selection.setSelection({end:T,start:T}),e.preventDefault()}}},r.setListAttributeOnMultiLines=function(t,e,n,i){void 0===i&&(i={type:"setLineAttributes"});var o=r.editor.getContentState();e.forEach(function(e){o.setLineAttributes(t,e,{list:n[e]},i)})},r.setLineListType=function(t,e,n,i){var o,a,s,l,u={},c=r.editor,d=r.renumberList,f=c.getContentState(),h=c.selection.getSelection();""===n?(l=!1,s=null===(a=null===(o=f.getZoneState(t))||void 0===o?void 0:o.getLine(e))||void 0===a?void 0:a.getLineAttributes().toMap()["ol-id"],r.relativeAttrKeys.concat("list").forEach(function(n){var r;f.setLineAttributes(t,e,((r={})[n]="",r))})):(u.list=n,n.indexOf(B)>-1&&(s=i||r.getClosetListNumberId(t,n,h)||(0,F.iq)())&&(u["ol-id"]=s),f.setLineAttributes(t,e,u)),d(t,e,s,l)},r.setLineListTypeWithStart=function(t,e,n,i,o,a){var s,l=r.editor,u=l.getContentState(),c=u.getZoneState(t);if(!!c){var d=l.selection.getSelection(),f=a||r.getClosetListNumberId(t,n,d)||(0,F.iq)();if(!i){r.setLineListType(t,e,n,f);return}i=String(i),n?o?u.setLineAttributes(t,e,{list:n,start:i,"origin-start":i,"ol-id":f}):u.setLineAttributes(t,e,{list:n,start:i,"ol-id":f}):(f=c.getLine(e).getLineAttributes().toMap()["ol-id"],s=!1,r.setLineListType(t,e,"")),r.renumberList(t,e,f,s)}},r.unNumberType=function(t){return"indent"===t||t===U||"check"===t||"done"===t},r.findClosetList=function(t,e,n){var i=e,o="up",a=r.editor.getContentState(),s=[],l=a.getZoneState(t);if(!l)return s;for(var u=l.length(),c=X(r.editor,t,e);i-1>=0&&r.compatibleList(t,i-1,n,o,s);){;i--}for(i=e,c&&n&&s.push(i),o="down";i+1<=u&&r.compatibleList(t,i+1,n,o,s);){;i++}return s},r.compatibleList=function(t,e,n,i,o){var a,s=r.unNumberType,l=X(r.editor,t,e),u=!1;if(!l)return null;var c=Q(l);if("code"===n)return s(c[1])||n!==c[1]?null:("up"===i?o.unshift(e):"down"===i&&o.push(e),!0);if("oldNumber"===n&&c[1]===B){var d=null===(a=r.editor.getContentState().getZoneState(t))||void 0===a?void 0:a.getLine(e);return!d||(u=d.getLineAttributes().toMap()["ol-id"])?null:("up"===i?o.unshift(e):"down"===i&&o.push(e),!0)}return null},r.renumberList=function(t,e,n,i){var o,a=r.editor,s=r.unNumberType,u=[],c=!1===i,d="",f=X(a,t,e),h=!!n;if(!f&&!h)return null;var p=Q(f);if(h&&(p=Q("number1")),s(p[1])&&!c)return null;var v=null===(o=r.editor.getContentState().getZoneState(t))||void 0===o?void 0:o.getLine(e).getLineAttributes().toMap()["ol-id"],g=n||v,y=[];if("code"===p[1]?d="code":p[1]===B&&!c&&(d="oldNumber"),""!==d&&(y=r.findClosetList(t,e,d)),0!==y.length&&"oldNumber"===d&&(y=y.map(function(n){if(n===e)return v===g?null:n;var r=J(a,t,n);return r&&r.listId===g?null:n}).filter(function(t){return null!==t}).sort(function(t,e){return t-e}),r.setAttributeOnMultiLines(t,y,{"ol-id":g})),i&&a.getContentState().setLineAttributes(t,e,{"ol-id":g}),g){var m=r.editor.getContentState().getZoneState(t);(m?(0,l.f)(Array(m.length())).map(function(e,n){return J(a,t,n)}):[]).forEach(function(t,e){t&&t.listType.indexOf(B)>-1&&t.listId===g&&u.push(e)})}var b=[];return 0!==u.length?b=u:0!==y.length&&(b=y),b.length&&r.performRenumberList(t,b,p,false),null},r.performRenumberList=function(t,e,n,i){var o=r.editor,a=new E.I({zoneId:t}),s=0,l=function(e,i,u){for(var c,d,f=e[s],h=-1,p=X(o,t,f);p;){d=Number((p=Q(p))[2]);var v=r.editor.getContentState().getZoneState(t),g=v.getLine(f).getLineAttributes().toMap(),y=g["text-indent"],m=g.start;if(isNaN(d)||r.unNumberType(p[1])){if("code"===n[1]||d<i)return f;s++}else if(d===i){if(-1===h){c=Number(g["origin-start"]);h=Number(u?m:c||1)}var b={start:String(h)};if(h!==c&&c&&(b["origin-start"]=""),Number(h)!==Number(m)){y&&(b["text-indent"]="");var S=v.pointToOffset({line:f,offset:0});null!==S&&(a=a.compose(new E.I({zoneId:t}).retain(S).retain(1,b)))}if(h=+h+1,f=e[++s],s===e.length)return e[s]}else if(d<i)break;else f=l(e,i+1,u);p=s<e.length?X(o,t,e[s]):""}return f};l(e,1,i),r.editor.getContentState().apply(a)},r.getOlIdForNewList=function(t){var e=r.editor,n=(t||e.selection.getSelection()).end,i=n.line+1,o=e.getContentState().getZoneState(n.zoneId);if(!!o){var a=o.getLine(i).getLineAttributes().toMap().start;return"1"===a?a["ol-id"]:void 0}},r.getClosetListNumberId=function(t,e,n,i,o){if(-1!==e.indexOf(B)){var a,s,l,u=r.editor,c=n||u.selection.getSelection(),d=c.start,f=c.end,h=d.line,p=f.line,v=u.getContentState().getZoneState(d.zoneId);return v?h<1&&h===p&&0===t?"":i?l=v.getLine(h).getLineAttributes().toMap()["ol-id"]:l=o&&o.editOneAfterOlList?r.getOlIdForNewList(n):(l=h>1?null===(a=v.getLine(h-1))||void 0===a?void 0:a.getLineAttributes().toMap()["ol-id"]:"")||(null===(s=v.getLine(h+1))||void 0===s?void 0:s.getLineAttributes().toMap()["ol-id"])||"":void 0}},r.editor=n.editor,r.registerCommand(),r.editor.on(f.r.DID_PASTE,r.handleDidPaste),r.editor.on(f.r.WILL_DELETE_FROM_CUT,r.handleWillDeleteFromCut),r.editor.on(f.r.CONTENT_CHANGE,r.handleContentChange),r.editor.on(f.r.COMPOSITION_END,r.handleCompositionEnd),r.editor.on("keydown",r.handleKeydown),r.editor.on(f.r.DELETE_KEY,r.handleDeleteKey,890),r.needRenumberList=n.needRenumberList||!0,r}(0,l.d)(e,t);var n=e.prototype;return n.destroy=function(){this.editor.off(f.r.DID_PASTE,this.handleDidPaste),this.editor.off(f.r.WILL_DELETE_FROM_CUT,this.handleWillDeleteFromCut),this.editor.off(f.r.CONTENT_CHANGE,this.handleContentChange),this.editor.off(f.r.COMPOSITION_END,this.handleCompositionEnd),this.editor.off("keydown",this.handleKeydown),this.editor.off(f.r.DELETE_KEY,this.handleDeleteKey),this.editor=null},n.indexOfListLineInRange=function(){for(var t,e,n=this.editor,r=n.selection.getSelection(),i=r.start,o=r.end,a=i.line;a<=o.line;a++){var s=n.getContentState().getLineAttributes(i.zoneId,a).toMap();if((null===(t=s.list)||void 0===t?void 0:t.indexOf(B))>-1||(null===(e=s.list)||void 0===e?void 0:e.indexOf(U))>-1)return a}return -1},n.getListWrapInfo=function(t,e){var n=e.level,r=e.style,i=e.start,o=Array.from({length:n},function(){var e={tag:t,attributes:{}};return r&&(e.style=(0,l.g)({},r)),e});return i&&o[n-1]&&(o[n-1].attributes.start=String(i)),o},n.serialize=function(t){var n,r,i=t.zoneId,o=t.type,a=t.node,u=t.lineAttributes,d=t.lineDelta,f=u&&u.list||"",y=to(f),m=function(t){return t.split("bullet")[1]}(f),b=function(t){return t.split("indent")[1]}(f),S=-1;if(o===h.T.LINE&&f&&(y||m||/check|done/.test(f)||b)){var E=!1,I=document.createElement(b?"div":"li");I.classList.add("temp-li"),I.setAttribute(p.mX,"true"),I.style.lineHeight="1.6",I.style.marginTop="0px",I.style.marginBottom="0px",I.style.paddingLeft="0px",!b&&(I.style.display="list-item"),y?(I.style.listStyleType=ta[(+y-1)%ta.length],S=s.ORDER):m?(I.style.listStyleType=ts[(+m-1)%ts.length],S=s.BULLET):b&&(S=s.INDENT),u&&(u.list&&(I.dataset.list=u.list,I.classList.add(u.list)),u["ol-id"]&&(I.dataset.olId=u["ol-id"],E=(0,l.a)(function(t){return t.split(":")}(this.serializeOlID),1)[0]!==u["ol-id"],this.serializeOlID=function(t,e){return t+":"+e}(u["ol-id"],y)),u.start&&y&&!b&&(I.dataset.start=td(Number(u.start),Number(y))),this.prevListType!==S&&(E=!0),this.prevListType=S);var C={};if(d){var L=new v.V(d,new g.i(i,d,this.editor.getContentState().schema));C=this.getLiStyleFromLineState(L)}try{for(var x=(0,l.c)(Object.entries(C)),w=x.next();!w.done;w=x.next()){var T=(0,l.a)(w.value,2),_=T[0],A=T[1];if(I.style[_]=A,"fontSize"===_){var k=String(A).replace(/\s/g,"");I.classList.add("font-size-"+k)}}}catch(t){n={error:t}}finally{try{w&&!w.done&&(r=x.return)&&r.call(x)}finally{if(n)throw n.error}}I.appendChild(a);var M=function(t){if(t instanceof HTMLElement){var e=t.dataset.list||"",n=/(number|bullet|check|done|indent)(\d+)/;if(n.test(e)){var r=n.exec(e),i=r[1],o=Number(r[2]);return"number"===i?{type:"ol",level:o}:"indent"===i?{type:"div",level:o}:{type:"ul",level:o}}}throw Error("unkonw list node")}(I),z=M.type,R=M.level,D={margin:"0px 0px 0px 24px",paddingLeft:"0px"};b&&(D.marginLeft="24px"),!b&&(D.listStylePosition="inside");var N=this.getListWrapInfo(z,{level:R,start:Number(null==u?void 0:u.start)||1,style:D});return N.length>0&&(!b&&Object.assign(N[0].style,{margin:"0px"}),Object.assign(N[N.length-1],{split:E})),(0,c.i)(Object.assign(t,{node:I}),{wrapNodesInfo:N,tagAttribute:e.KEY})}return t},n.assignListId=function(t,e,n){var r=this;void 0===n&&(n=!1),(n?O()(t.get().reverse()):t).each(function(t,n){return r.addListId(n,0===t?e:(0,F.iq)())})},n.getLevelAndOrderFromOl=function(t){var e=/list-number([0-9]+)/.exec(t.className),n=O()(t).attr("start");return{level:e?parseInt(e[1],10):1,order:n?parseInt(n,10):1}},n.getLiStyleFromLineState=function(t){var n,r,i,o,a,s,u={};if(t.isTextEmpty()){var c=t.getZoneId(),d=t.getOffset().start+t.getLineMarker(),f=this.editor.getContentState().getInlineStyleOverride({zoneId:c,start:d});if(f)try{for(var h=(0,l.c)(Object.entries(f)),p=h.next();!p.done;p=h.next()){var v=(0,l.a)(p.value,2),g=v[0],y=v[1];if(g in e.PREFIX_STYLE_INHERIT){var m=(0,l.a)(e.PREFIX_STYLE_INHERIT[g],2),b=m[0],S=m[1];u[b]=S||y}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}return u}try{for(var E=(0,l.c)(Object.entries(e.PREFIX_STYLE_INHERIT)),I=E.next();!I.done;I=E.next()){var C=(0,l.a)(I.value,2),L=C[0],x=C[1],w=t.getEntities([[L,void 0]]);if(!!w.length){var T=!0,_=void 0,A=t.length()-(t.getModelText().endsWith("\n")?1:0);try{for(var k=(a=void 0,(0,l.c)(w.entries())),M=k.next();!M.done;M=k.next()){var z=(0,l.a)(M.value,2),R=z[0],D=z[1],N="lmkr"in D.attributes?0:t.getLineMarker(),O=D.end.offset-(D.text.endsWith("\n")?1:0);if(0===R&&D.start.offset!==N||R===w.length-1&&O!==A||_&&_.end.offset!==D.start.offset){T=!1;break}_=D}}catch(t){a={error:t}}finally{try{M&&!M.done&&(s=k.return)&&s.call(k)}finally{if(a)throw a.error}}T&&(u[x[0]]=x[1]||w[0].attributes[L])}}}catch(t){i={error:t}}finally{try{I&&!I.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}return u},n.shouldForceRenderLine=function(t){var e=t.lineState.getLineAttributes().toMap();if(!e.list)return!1;var n=Q(e.list);return!![B,U,"check","done","indent"].includes((null==n?void 0:n[1])||"")||!1},n.editorAfterDoDeleteKey=function(t){var e=this.editor.getContentState().getActiveZone().getZoneId();this.mergeListIfNecessary(e,t.theLine),this.handleDeleteListLine(t.theLine)},n.editorAfterDoReturnKey=function(t){this.handleDeleteListLine(t.theLine)},n.handleDeleteListLine=function(t){var e=this.editor;if(!!e){var n=this.renumberList,r=e.selection.getSelection().start;this.willRenumberArr.forEach(function(e){"number"==typeof e&&null===n(r.zoneId,t+1)?n(r.zoneId,t):n(r.zoneId,t,e,!1)}),this.willRenumberArr=[]}},n.editorKeyDown=function(t){var e=t.evt,n=e.keyCode,r=this.editor.selection.getSelection(),i=r.start,o=i.line,a=i.zoneId;!e.shiftKey&&n===w.VD.Tab&&!("0"===a&&0===o)&&this.mergeToParentListIfNecessary(r)},n.bulkInsertOList=function(t,e,n,r){var i,o,s=this.editor;if(!!s&&0!==e.length){var l=this.editor.getContentState();e.sort(function(t,e){return t-e});var u=e[0],c=e[e.length-1],d=(0,F.iq)();if(l.setLineAttributes(t,u,{"origin-start":""+(r||1)}),this.setMultiLinesListType(t,e,n,d),1===r){var f=te(s,a.UP,u);if(f)this.mergeList(t,f.lineNum,u);else{var h=tn(s,u,c),p=h.upwardClosestOListInfo,v=h.downwardClosestOListInfo;p&&v&&this.mergeList(t,u,v.lineNum)}(null===(o=null===(i=l.getZoneState(t))||void 0===i?void 0:i.getLine(c+1))||void 0===o?void 0:o.getLineAttributes().toMap()["ol-id"])&&this.mergeList(t,c+1,c)}else this.mergeListIfNecessary(t,u,c)}},n.mergeList=function(t,e,n){var r=this,i=this.editor;if(!i)return Promise.resolve(null);var o=i.selection.getSelection(),s=i.getContentState();if(!q(i,o,e)||!q(i,o,n))return Promise.resolve(null);var u=J(i,t,e),c=J(i,t,n);if(u&&c&&u.listId!==c.listId){var d=u.listId,f=(0,l.f)([n],ti(i,o,n,c.listId,a.UP),ti(i,o,n,c.listId,a.DOWN)).sort(function(t,e){return t-e});return new Promise(function(i){if(!r.editor)return i(null);var l={type:"mergeList"};r.setAttributeOnMultiLines(t,f,{"ol-id":d},l),f[0]>e?s.setLineAttributes(t,f[0],{"origin-start":""},l):(s.setLineAttributes(t,e,{"origin-start":""},l),!function(t,e,n){return!!q(t,e,n)&&0===ti(t,e,n,J(t,e.start.zoneId,n).listId,a.UP).length}(r.editor,o,f[0])&&s.setLineAttributes(t,f[0],{"origin-start":""},l)),r.renumberList(t,n),i(d)})}return Promise.resolve(null)},n.mergeListIfNecessary=function(t,e,n){return(0,l._)(this,void 0,void 0,function(){var r,i,o,s,u,c,d,f,h,p,v,g,y,m;return(0,l.b)(this,function(l){switch(l.label){case 0:if(!(r=this.editor))return[2];if(i=r.selection.getSelection(),o=n||e,!q(r,i,e)||!q(r,i,o))return[2];if(s=tr(r,e).listId,u=tr(r,e-1),c=tr(r,o+1),d=te(r,a.UP,e),f=te(r,a.DOWN,o),h=u||d,p=c||f,v=!1,!(h&&h.listId!==s))return[3,2];return[4,this.mergeList(t,h.lineNum,e)];case 1:s=l.sent()||s,v=!0,l.label=2;case 2:if(!(p&&p.listId!==s))return[3,4];return[4,this.mergeList(t,p.lineNum,o)];case 3:s=l.sent()||s,v=!0,l.label=4;case 4:if(v)return[2,Promise.resolve()];if(y=(g=tn(r,e,o)).upwardClosestOListInfo,m=g.downwardClosestOListInfo,!(y&&m))return[3,7];return[4,this.mergeList(t,y.lineNum,e)];case 5:return l.sent(),[4,this.mergeList(t,m.lineNum,o)];case 6:l.sent(),l.label=7;case 7:return[2]}})})},n.mergeToParentListIfNecessary=function(t){for(var e=this,n=t.start,r=t.end,i=n.zoneId,o={},s=n.line;s<=r.line;s++){var u=J(this.editor,i,s);if(!(!u||void 0===u.listId||o[u.listId]||1>=Y(u.listType)))o[u.listId]=s}Object.entries(o).forEach(function(t){var n=(0,l.a)(t,2),r=(n[0],n[1]),o=X(e.editor,i,r),s=tt(e.editor,r,a.UP,Y(o),!0,!0);s&&e.mergeList(i,s.lineNum,r)})},n.handleEditorWillDoDeleteKey=function(){var t=this.editor,e=t.getContentState(),n=e.getActiveZone(),r=n.getZoneId(),i=t.selection.getSelection(),o=i.start,a=n.getLine(o.line),s=a.getLineAttributes().toMap(),l=s["ol-id"];if(!s.list)return;var u=i.toPosition(),c=u.start,d=u.len,f=Number(a.hasLineMarker()),h=Q(s.list);if(!d&&o.offset-f==0&&!!h){var p=new E.I({zoneId:r}),v=h[1],g=Number(h[2]);v===B?(s["origin-start"]="",s.start="",s["ol-id"]="",s.list="indent"+g,p.retain(c-1).retain(1,s)):"code"===v?p.retain(c-2).delete(2):(s.list="",p.retain(c-1).retain(1,s)),e.apply(p),this.willRenumberArr=[l]}},n.editorWillDoReturnKey=function(t){var e=t.evt,n=t.delta,r=t.editor,i=r.getContentState(),o=i.getActiveZone(),a=o.getZoneId(),s=r.selection.getSelection(),u=s.start.line,c=o.getLine(u),d=c.getLineAttributes().toMap(),f=s.toPosition(),h=f.start,p=f.len;if(!d.list||p)return;var v=Q(d.list);if(!!v){var g=v[1],y=Number(v[2]),m=c.isTextEmpty(),b=1===s.start.offset,S=e.shiftKey,I=new E.I({zoneId:a});if([B,U,"check","done","indent"].includes(g)){if(m)1===y?["list","start","origin-start","ol-id"].forEach(function(t){d[t]=""}):d.list=g+(y-1),I.retain(h-1).retain(1,d);else{S&&(d.list="indent"+y,["start","origin-start","ol-id"].forEach(function(t){d[t]=""}));var C=this.findLastListLine(o,u);if("indent"===g&&!S&&C){var L=C.type,x=C.start,w=C.olId;L[1]===B&&(d.list=L[0],d.start=String(x+1),d["ol-id"]=w),d.list=L[1]+L[2]}I.retain(h).insertEnter().insertLineMarker(d),"done"===g&&(I=b?I.compose(new E.I({zoneId:a}).retain(Math.max(h-1,0)).retain(1,(0,l.g)((0,l.g)({},d),{list:"check"+y}))):I.compose(new E.I({zoneId:a}).retain(h+1).retain(1,(0,l.g)((0,l.g)({},d),{list:"check"+y}))))}}var T=c.previousSibling();if("code"===g&&T){if(0===u)I.retain(h).insertEnter().insertLineMarker(d);else{var _=o.getLineIndexOfKey(T.getKey()),A=T.isEmpty(),k=i.rangeToPosition({start:{line:_,offset:0,zoneId:a},end:{line:_,offset:0,zoneId:a}});if(null===k)return;var M=k.start,z=T.getLineAttributes().toMap(),R="code1"===z.list;if(m&&A&&R){["list","start","insertorder","lang"].forEach(function(t){z[t]="",d[t]=""});var D=new E.I({zoneId:a}).retain(M).retain(1,z);I=I.retain(h-1).retain(1,d).compose(D)}else I.retain(h).insertEnter().insertLineMarker(d)}}t.delta=n.compose(I),this.willRenumberArr=this.deleteNumberList(s)}},n.findLastListLine=function(t,e){for(var n=e,r="";n-1>=0;){var i=t.getLine(n-1).getLineAttributes().toMap();if(!(r=i.list))break;if((r=Q(r))[1]===U||r[1]===B||"check"===r[1]||"done"===r[1])return{line:--n,type:"done"===r[1]?{0:"check"+r[2],1:"check",2:r[2]}:r,start:r[1]===B?parseInt(i.start,10)||1:null,olId:i["ol-id"]};n--}return null},n.setMultiLinesListType=function(t,e,n,r){var i,o=this,a=n[e[0]];if(!e.length||!this.editor)return;var s=this.editor.getContentState().getZoneState(t);if(!!s){var l=this.editor.selection.getSelection(),u=new Map;e.forEach(function(t){var e=s.getLine(t).getLineAttributes().toMap()["ol-id"];!u.has(e)&&e&&u.set(e,!0)}),""===a||/indent/.test(a)?(this.setListAttributeOnMultiLines(t,e,n),this.setAttributeOnMultiLines(t,e,{start:"","origin-start":"",lang:"","ol-id":""})):(e=e.filter(function(e){return tl(o.editor,t,e,[["horizontal-line","true"],["sheet-id",""],["aceTable",""]])}),a.indexOf(B)>-1?(i=r||this.getClosetListNumberId(t,a,l)||(0,F.iq)(),this.setAttributeOnMultiLines(t,e,{"ol-id":i})):this.setAttributeOnMultiLines(t,e,{"ol-id":""}),this.setListAttributeOnMultiLines(t,e,n)),u.forEach(function(n,r){o.renumberList(t,e[0],r)}),this.renumberList(t,e[0],i)}},n.setAttributeOnMultiLines=function(t,e,n,r){if(void 0===n&&(n={}),void 0===r&&(r={type:"setLineAttributes"}),!!Array.isArray(e)&&!!e.length){var i=this.editor.getContentState();e.forEach(function(e){i.setLineAttributes(t,e,n,r)})}},e.KEY="list",e.PREFIX_STYLE_INHERIT={bold:["fontWeight","bold"],italic:["fontStyle","italic"],fontsize:["fontSize"],fontcolor:["fontColor"],fontfamily:["fontFamily"]},(0,l.e)([(0,y.gv)(1001)],e.prototype,"serialize",null),e}(m.S),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,l.d)(e,t),e}(j);function X(t,e,n){return function(t,e,n,r){var i,o=null===(i=t.getContentState().getZoneState(e))||void 0===i?void 0:i.getLine(n);return o&&o.getLineAttributes().toMap()[r]||""}(t,e,n,"list")}o=j,(0,l.d)(function(){return null!==o&&o.apply(this,arguments)||this},o);function q(t,e,n){var r=J(t,e.start.zoneId,n);return!!(r&&M.exec(r.listType))}function Y(t){var e=M.exec(t);return e?parseInt(e[2],10):null}function Q(t){var e=z.exec(t);return e?e:t.startsWith("number")?z.exec("number1"):t.startsWith("bullet")?z.exec("bullet1"):e}function G(t,e,n,r){void 0===r&&(r="number1");var i=function(t,e,n){var r,i,o=e.start.zoneId,a=null===(i=null===(r=t.getContentState().getZoneState(o))||void 0===r?void 0:r.getLine(n))||void 0===i?void 0:i.getLineAttributes().toMap()["text-indent"];if(!a)return!1;var s=z.exec(X(t,o,n)),l=0;return s&&(l=Number(s[2])),a&&(l+=2),l}(t,e,n);return i?"number"+i:r}function J(t,e,n){var r,i=null===(r=t.getContentState().getZoneState(e))||void 0===r?void 0:r.getLine(n);if(!i)return null;var o=i.getLineAttributes(),a=o.reduce(function(t,e){var n=(0,l.a)(e,2),r=n[0],i=n[1];return r===H.KEY?t.listType=i:"ol-id"===r&&(t.listId=i),t},{});return a.listType?a:null}function tt(t,e,n,r,i,o){void 0===o&&(o=!1);var s,l,u=t.getContentState().getActiveZone(),c=u.getZoneId(),d=u.length(),f=((s={})[a.UP]=-1,s[a.DOWN]=1,s);for(e+=f[n];e>=0&&e<d;e+=f[n]){var h=J(t,c,e);if(o&&!h)break;var p=h||{},v=p.listId,g=void 0===v?"":v,y=p.listType,m=Y(void 0===y?"":y);if(!!m){if((l=l||g)&&g!==l||r&&!i&&m<r)break;if(void 0===r||i&&m<r||!i&&m===r)return{zoneId:c,listId:g,lineNum:e,order:parseInt(u.getLine(e).getLineAttributes().toMap().start,10),level:m}}}return null}function te(t,e,n,r,i){var o,s=r&&i?{level:r,order:i}:tr(t,n);if(!s)return null;var l=s.level,u=s.order;if(l>1&&e===a.UP){var c=tt(t,n,e,l,!0);if(c||1===u)return c}var d=tt(t,n,e,l);if(!d)return null;var f=((o={})[a.UP]=-1,o[a.DOWN]=1,o);return d.order===u+f[e]?d:null}function tn(t,e,n){var r=n||e,i=tt(t,e,a.UP),o=tt(t,r,a.DOWN);return i&&o&&i.listId===o.listId?{upwardClosestOListInfo:i,downwardClosestOListInfo:o}:{}}function tr(t,e,n){var r=t.getContentState(),i=null!=n?n:r.getActiveZone().getZoneId(),o=r.getZoneState(i);if(!o)return null;var a=J(t,i,e)||{},s=a.listId,l=a.listType,u=M.exec(void 0===l?"":l);return u?{zoneId:i,listId:void 0===s?"":s,lineNum:e,order:parseInt(o.getLine(e).getLineAttributes().toMap().start,10),level:parseInt(u[2],10)}:null}function ti(t,e,n,r,i){var o,s=e.start,l=t.getContentState().getZoneState(s.zoneId),u=[];if(!l)return u;var c=/(number)([0-9]+)/,d=l.length(),f=((o={})[a.UP]=-1,o[a.DOWN]=1,o);for(n+=f[i];n>=0&&n<=d;n+=f[i]){var h=J(t,s.zoneId,n)||{},p=h.listType,v=void 0===p?"":p,g=h.listId,y=void 0===g?"":g;if(c.exec(v)){if(y!==r)break;u.push(n)}}return u}function to(t){return t.split("number")[1]}var ta=["decimal","lower-alpha","lower-roman"],ts=["disc","circle","square"],tl=function(t,e,n,r,i){void 0===r&&(r=[]),void 0===i&&(i=!1);var o=t.getContentState().getZoneState(e).getLine(n).getAttributes(),a=i?C.Z:function(t,e){return t[0]===e[0]};return(0,L.Z)(r,o,a).length<=0};function tu(t,e,n){var r=t.get(e);if(r instanceof E.I){var i=r.ops[0],o=new E.I({zoneId:e});"*"===i.insert&&i.attributes&&i.attributes.lmkr?o.retain(1,(0,l.g)((0,l.g)({},i.attributes),n)):o.insertLineMarker(n),t.replace(e,r.compose(o))}}function tc(t){return t&&(t.tagName||"").toLowerCase()}function td(t,e){var n=""+t;switch(e%3){case 0:n=(0,F.Jy)(t);break;case 2:n=(0,F.rm)(t)}return n}},720103:function(t,e,n){"use strict";var r=n(904035),i=n.n(r),o=window.sessionStorage.getItem("__ENTER_FROM__"),a=window.User&&window.User.userAgent||navigator.userAgent||"",s=i().getParser(a),l={isFeishu:!1,isLark:!1,isLarkPcTab:!1,isLarkWindow:!1,isDocs:!1,isDocsSDK:!1,isAndroidSDK:!1,isIOSSDK:!1,isMobileSDK:!1,isFeed:!1,isIphoneX:!1,isIPad:!1,isMobile:!1,isMac:!1,isWindows:!1,isLinux:!1,isSafari:!1,isIE:!1,isSougou:!1,isIOS:!1,isAndroid:!1,isQQ:!1,isX5:!1,is360:!1,is360Fast:!1,isUc:!1,isBaiDu:!1,isLB:!1,oldIE:!1,modernIE:!1,kernel:"",isLarkTab:!1,isOldLarkTab:!1,isEdge:!1,isFF:!1,isChrome:!1,isWebKit:!1,isBytedanceApp:!1,isOpendoc:!1,isIPhoneSeries:function(){return!1},isIOSBelow12:function(){return!1},getChromeVersion:function(){return null},isPrimaryChrome:!1,isOpera:!1,is2345:!1,isMaxthon:!1,isTheWorld:!1,isH5:!1};l.isFeishu=/feishu/i.test(a),l.isLark=l.isFeishu||/lark/i.test(a),l.isLarkPcTab=l.isLark&&/TYPE\/PC_TAB/i.test(a),l.isLarkWindow=l.isLark&&"lark.window"===o,l.isDocs=/Docs/i.test(a),l.isDocsSDK=l.isLark&&l.isDocs,l.isAndroidSDK=/DocEditorSDk/i.test(a),l.isIOSSDK=/DocsSDK/i.test(a),l.isMobileSDK=l.isAndroidSDK||l.isIOSSDK,l.isFeed=/Feed/i.test(a)||/lark=1/.test(location.search)||/sourceType=feed/.test(location.search),l.isIphoneX=function(){return d("X")}()||!1,l.isIPad=/iPad/i.test(a),l.isMobile=s.getPlatformType(!0).includes("mobile"),l.isMac=s.getOSName(!0).includes("macos"),l.isWindows=s.getOSName(!0).includes("windows"),l.isLinux=s.getOSName(!0).includes("linux"),l.isSafari=s.getBrowserName(!0).includes("safari"),l.isIE=s.getBrowserName(!0).includes("internet explorer"),l.isIOS=!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),l.isAndroid=a.indexOf("Android")>-1||a.indexOf("Adr")>-1||/OpenHarmony/.test(a),l.isQQ=/QQBrowser/i.test(a),l.isX5=/MQQBrowser/i.test(a),l.is360=/360SE/i.test(a),l.is360Fast=/360EE/i.test(a),l.isUc=/UBrowser/i.test(a),l.isBaiDu=/BIDUBrowser/i.test(a),l.is2345=/2345Explorer/i.test(a),l.isMaxthon=/Maxthon/i.test(a),l.isTheWorld=/TheWorld/i.test(a),l.isLB=/LBBROWSER/i.test(a),l.isEdge=/Edge/i.test(a),l.isFF=/Firefox/i.test(a),l.isOpera=/OPR/i.test(a),l.isWebKit=/AppleWebKit/i.test(a),l.isChrome=s.getBrowserName(!0).includes("chrome"),l.isPrimaryChrome=l.isChrome&&!l.isOpera&&!l.isLB&&!l.isUc&&!l.isBaiDu&&!l.is360&&!l.is360Fast&&!l.isQQ&&!l.isSougou&&!l.isEdge&&!l.is2345&&!l.isTheWorld&&!l.isMaxthon,l.isOpendoc=/opendoc=(true|1)/.test((location.search||"").toLowerCase())||/^\/component\//.test(location.pathname||"");if(l.isIE){var u=parseInt(String(s.getBrowserVersion()),10);l.oldIE=u<11,l.modernIE=u>=11}l.kernel=["msie","webkit","blink","gecko","msedge","tablet","mobile"].find(function(t){return s.getEngineName().toLowerCase().includes(t)}),l.isLarkTab=/from\/(old_)?lark_tab/i.test(a),l.isOldLarkTab=/from\/old_lark_tab/i.test(a);var c=l.isLark||l.isDocs;l.isBytedanceApp=c,l.isIPhoneSeries=d,l.isIOSBelow12=function(){var t=function(){if(!((t=navigator.userAgent).indexOf("iPhone")>0||t.indexOf("iPad")>0||t.indexOf("iPhone")>0))return null;var t,e=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return e?{major:+e[1],minor:+e[2]}:null}();return!!t&&t.major<12},l.getChromeVersion=function(){var t=navigator.userAgent.match(/Chrome\/([\d.]+)/i);return t&&t[1]?t[1]:null},l.isH5=l.isMobile&&!l.isBytedanceApp||l.isOpendoc&&l.isMobile;function d(t){var e=RegExp("(iPhone\\s"+t+")");return!!navigator.userAgent.match(e)}e.Z=l},45917:function(t,e,n){"use strict";n.d(e,{W:function(){return i}});var r=n(293096),i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){var n,i;if("string"==typeof e)t+=" "+e;else try{for(var o=(0,r.c)(Object.entries(e)),a=o.next();!a.done;a=o.next()){var s=(0,r.a)(a.value,2),l=s[0],u=s[1];!0===u&&(t+=" "+l)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return t},"")}},353270:function(t,e,n){"use strict";var r,i;n.d(e,{P:function(){return r}}),(i=r||(r={})).INDENT_LEFT="indentLeft",i.INDENT_RIGHT="indentRight"},525445:function(t,e,n){"use strict";function r(t,e,n){var r=n.value;n.value=function(t){var e=t.children;return t.attributes.lmkr?e:r.apply(this,[t])}}n.d(e,{P:function(){return r}})},594135:function(t,e,n){"use strict";n.d(e,{u:function(){return i}});var r="list",i=function(t,e,n){for(var i,o,a,s=t.selection.getSelection(),l=s.start,u=s.end,c=Math.min(l.line,u.line),d=Math.max(l.line,u.line),f=c;f<=d;f++){var h=t.getContentState().getLineAttributes(l.zoneId,f).toMap();if(h[r]){if(h[r].includes(e)){var p=parseInt(h[r].split(e)[1]);n?p<15&&t.getContentState().setLineAttributes(l.zoneId,f,((i={})[r]=""+e+ ++p,i)):1===p?t.getContentState().setLineAttributes(l.zoneId,f,((o={})[r]="",o)):t.getContentState().setLineAttributes(l.zoneId,f,((a={})[r]=""+e+--p,a))}}else h["text-indent"]&&"indent"===e?n?t.getContentState().setLineAttributes(l.zoneId,f,{list:"indent1"}):t.getContentState().setLineAttributes(l.zoneId,f,{"text-indent":""}):"indent"===e&&n&&t.getContentState().setLineAttributes(l.zoneId,f,{"text-indent":"true"})}}},564655:function(t,e,n){"use strict";n.d(e,{B:function(){return i}});var r=n(293096),i=function(t,e,n,i){void 0===n&&(n=""),void 0===i&&(i=!1);var o,a,s,l,u=t.selection.getSelection(),c=u.start,d=u.end,f=Math.min(c.line,d.line),h=Math.max(c.line,d.line);if(i){for(var p="",v=f;v<=h;v++)t.getContentState().getLineAttributes(c.zoneId,v).toMap()[e]!==n&&(p=n);for(var v=f;v<=h;v++)t.getContentState().setLineAttributes(c.zoneId,v,((o={})[e]=p,o))}else{var p="",g=t.getContentState().getEntities({start:c,end:d});try{for(var y=(0,r.c)(g),m=y.next();!m.done;m=y.next())m.value.attributes[e]!==n&&(p=n)}catch(t){a={error:t}}finally{try{m&&!m.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}t.getContentState().setAttributes({start:c,end:d},((l={})[e]=p,l))}}},909040:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var r=n(993168);function i(t){var e,n,i={};try{for(var o=(0,r._)(t),a=o.next();!a.done;a=o.next()){var s=a.value;i[s[0]]=s[1]}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}},539725:function(t,e,n){"use strict";function r(t,e,n){var r=null==n?void 0:n.value;return{configurable:!0,get:function(){if(this===t.prototype||this.hasOwnProperty(e)||"function"!=typeof r)return r;var n=r.bind(this);return Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),n}}}n.d(e,{W:function(){return r}})},659649:function(t,e,n){"use strict";function r(t,e,n){var r,i,o,a,s,l,u=0,c=!1,d=!1,f=!0,h=!e&&0!==e&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof t)throw TypeError("Expected a function");function p(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function v(t,e){return h?(window.cancelAnimationFrame(s),window.requestAnimationFrame(t)):setTimeout(t,e)}e=+e||0,"object"==typeof n&&(c=!!n.leading,o=(d="maxWait"in n)?Math.max(+n.maxWait||0,e):o,f="trailing"in n?!!n.trailing:f);function g(t){var n=t-l,r=t-u;return void 0===l||n>=e||n<0||d&&r>=o}function y(){var t,n,r,i,a=Date.now();if(g(a))return m(a);s=v(y,(n=(t=a)-l,r=t-u,i=e-n,d?Math.min(i,o-r):i))}function m(t){return(s=void 0,f&&r)?p(t):(r=i=void 0,a)}function b(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var f=Date.now(),h=g(f);if(r=n,i=this,l=f,h){if(void 0===s){;return u=t=l,s=v(y,e),c?p(t):a}if(d)return s=v(y,e),p(l)}return void 0===s&&(s=v(y,e)),a}return b.cancel=function(){void 0!==s&&!function(t){if(h)return window.cancelAnimationFrame(t);clearTimeout(t)}(s),u=0,r=l=i=s=void 0},b.flush=function(){return void 0===s?a:m(Date.now())},b.pending=function(){return void 0!==s},b}n.d(e,{D:function(){return r}})},386179:function(t,e,n){"use strict";n.d(e,{Y:function(){return o}});var r=n("993168"),i=n("715986");function o(t,e){return(null==t?0:t.length)?function t(e,n,o,a,s){var l,u;if(void 0===o&&(o=i.v),void 0===a&&(a=!1),void 0===s&&(s=[]),null==e)return s;try{for(var c=(0,r._)(e),d=c.next();!d.done;d=c.next()){var f=d.value;n>0&&o(f)?n>1?t(f,n-1,o,a,s):s.push.apply(s,(0,r.b)(f)):!a&&(s[s.length]=f)}}catch(t){l={error:t}}finally{try{d&&!d.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}return s}(t,e=void 0===e?1:+e):[]}},564981:function(t,e,n){"use strict";n.d(e,{D:function(){return i}});var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function i(t){void 0===t&&(t=20);for(var e="",n=0;n<t;n++){var i=Math.floor(Math.random()*r.length);e+=r[i]}return e}},748027:function(t,e,n){"use strict";function r(t){return t.split("")}n.d(e,{P:function(){return r}})},619396:function(t,e,n){"use strict";n.d(e,{d:function(){return i}});var r=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff\\ufe0e\\ufe0f]");function i(t){return r.test(t)}},828180:function(t,e,n){"use strict";n.d(e,{z:function(){return p}});var r="\ud800-\udfff",i="[\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]",o="\ud83c[\udffb-\udfff]",a="(?:"+i+"|"+o+")",s="[^"+r+"]",l="(?:\ud83c[\udde6-\uddff]){2}",u="[\ud800-\udbff][\udc00-\udfff]",c=a+"?",d="[\\ufe0e\\ufe0f]?",f="(?:\\u200d(?:"+[s,l,u].join("|")+")"+(d+c)+")*",h=RegExp(o+"(?="+o+")|"+("(?:"+[""+s+i+"?",i,l,u,"["+r+"]"].join("|")+")"+(d+c+f)),"g");function p(t){return t.match(h)||[]}},280594:function(t,e,n){"use strict";n.d(e,{O:function(){return o}});var r=n(252054),i=n(363949);function o(t){return(0,i.y)(t)&&"[object Arguments]"===(0,r.h)(t)}},209239:function(t,e,n){"use strict";n.d(e,{X:function(){return l}});var r=n(252054),i=n(363949),o=Symbol.prototype.valueOf;function a(t,e){return t===e||t!=t&&e!=e}function s(t){return null==t}function l(t,e){return function t(e,n,s,l){if(e===n)return!0;if(null==(u=e)||null==(c=n)||!(0,i.y)(e)&&!(0,i.y)(n)&&"function"!=typeof e)return a(e,n);var u,c,d=(0,r.h)(e),f=(0,r.h)(n);if(d!==f)return!1;var h=s.indexOf(e);if(h===l.indexOf(n)&&h>=0)return!0;if(s.push(e),l.push(n),("[object Array]"===d?e.length:Object.keys(e).length)!==("[object Array]"===f?n.length:Object.keys(n).length))return!1;if("[object Array]"===d){for(var p=0;p<e.length;p++)if(!t(e[p],n[p],s.slice(),l.slice()))return!1;return!0}if("[object Object]"===d){for(var v in e)if(e.hasOwnProperty(v)&&!1===t(e[v],n[v],s.slice(),l.slice()))return!1;return!0}if("[object Function]"===d)return e.toString()===n.toString();if(["[object Number]","[object Boolean]","[object Date]"].includes(d))return a(+e,+n);else if("[object String]"===d)return""+e==""+n;else if("[object Symbol]"===d&&o)return o.call(e)===o.call(n);return!1}(t,e,[],[])}},84094:function(t,e,n){"use strict";function r(t){return["span","a","b","u","i","s","strong","button","abbr","audio","cite","code","em","embed","img","input","bdi","bdo","data","del","dfn","ins","kbd","label","map","mark","meter","object","output","picture","progress","q","ruby","samp","select","slot","small","sub","sup","svg","textarea","time","var","wbr"].includes(t.tagName.toLowerCase())}n.d(e,{C:function(){return r}})},55999:function(t,e,n){"use strict";function r(t){if(["div","p","blockquote","li","h1","h2","h3","h4","h5","h6","ol","table","td","th","tr","ul","address","article","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","iframe","main","nav","output","pre","section","video"].includes(t.nodeName.toLowerCase()))return!(t instanceof HTMLElement)||!(t.style.display&&"inline"===t.style.display);return!1}n.d(e,{P:function(){return r}})},363949:function(t,e,n){"use strict";function r(t){return"object"==typeof t&&null!==t}n.d(e,{y:function(){return r}})},63643:function(t,e,n){"use strict";function r(t){return t.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}n.d(e,{$:function(){return r}})},682150:function(t,e,n){"use strict";function r(t){return t?Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{}):null}n.d(e,{y:function(){return r}})},353340:function(t,e,n){"use strict";function r(t){if(t.nodeType!==Node.ELEMENT_NODE||!(t instanceof HTMLElement))return"";try{return JSON.stringify(["className","tagName","dataset"].reduce(function(e,n){return e[n]=t[n],e},{}))}catch(t){return""}}n.d(e,{F:function(){return r}})},713099:function(t,e,n){"use strict";n.d(e,{P:function(){return i}});var r=n(659649);function i(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw TypeError("Expected a function");return"object"==typeof n&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),(0,r.D)(t,e,{leading:i,trailing:o,maxWait:e})}},993168:function(t,e,n){"use strict";function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function o(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}n.d(e,{_:function(){return r},a:function(){return i},b:function(){return o}})}}]);