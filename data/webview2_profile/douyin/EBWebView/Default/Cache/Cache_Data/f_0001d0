"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["84869"],{12912:function(e,t,l){l.r(t),l.d(t,{Helmet:function(){return n}});let n=l(429719).Head},532537:function(e,t,l){l.d(t,{h:function(){return r}}),l(88648);var n=l(66047);let r=()=>(0,n._)()},147328:function(e,t,l){l.d(t,{A:function(){return f}}),l("874386");var n=l("88648"),r=l("520739"),i=l("878389");l("250440"),l("675373");var o=l("576660"),a=l("597087"),s=l("88533");let{COMMON_SEARCH_PARAMS:d,DISABLE_SECRET_VIDEO_PARAMS:u,WHALE_CUT_HEADER:c}=o,{ERROR_CODE:v}=a;async function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{result:l}=await (0,s.g8)("/aweme/v1/web/user/dashboard",(0,i._)((0,r._)({},d,u),{UserId:e}),t,e=>!!(null==e?void 0:e.HaveDashBoard));return l}function f(e,t){let[l,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!e||!t)return;let l=!1;return(async()=>{try{await m(t)&&!l&&r(!0)}catch(e){}})(),()=>{l=!0}},[e,t]),l}},625822:function(e,t,l){l.d(t,{m:function(){return i}}),l(874386);var n=l(88648),r=l(71549);let i=()=>{let[e,t]=(0,n.useState)();return(0,n.useEffect)(()=>{(0,r.s)()&&t((0,r.s)())},[]),e}},71549:function(e,t,l){l.d(t,{V:function(){return r},s:function(){return i}});var n=l(56894);let r=()=>document.querySelector(`.${n.tt}`)||document.documentElement,i=()=>document.querySelector(`.${n.tt}`)||window},749475:function(e,t,l){l.d(t,{J:function(){return r},K:function(){return n}}),l(675373),l(209955);let n=e=>new Promise(t=>setTimeout(t,e));async function r(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500;for(let i=0;i<l;i++)try{let l=await e();if(t(l)){await n(r);continue}return l}catch(e){await n(r);continue}throw Error(`${l} retry times failed`)}},265482:function(e,t,l){var n=l(563097);l(88648);var r=l(901747),i=l(310528);t.Z=e=>{let{children:t,mobileUrl:l,applicableDevice:o}=e,a=(0,r.Yr)();return(0,n.jsx)(i.$,{mobileUrl:l,nonce:a,applicableDevice:o,children:t})}},95349:function(e,t,l){var n=l(563097);l(88648);var r=l(439837),i=l.n(r),o=l(265482);t.Z=e=>{let{videoDetail:t,mobileUrl:l,children:r}=e,{desc:a,authorInfo:s,createTime:d=Date.now()/1e3,video:u,awemeId:c}=t||{},{nickname:v=""}=s||{},{cover:m}=u||{},f=i()(1e3*d).format("YYYYMMDD")||"",h=`${v}在抖音记录美好生活${f}`;return a&&(h=a.slice(0,35)),t?(0,n.jsxs)(o.Z,{mobileUrl:l,children:[r,(0,n.jsx)("meta",{name:"lark:url:enable",content:u?"true":"false"}),(0,n.jsx)("meta",{name:"lark:url:video_icon_url",content:"https://lf1-cdn-tos.bytegoofy.com/goofy/ies/douyin_web/public/favicon.ico"}),(0,n.jsx)("meta",{name:"lark:url:video_title",content:h}),(0,n.jsx)("meta",{name:"lark:url:video_cover_image_url",content:m}),(0,n.jsx)("meta",{name:"lark:url:video_iframe_url",content:`https://www.douyin.com/light/${c}`}),(0,n.jsx)("meta",{name:"lark:url:video_brand_name",content:"抖音"})]}):(0,n.jsx)(o.Z,{mobileUrl:l,children:r})}},827080:function(e,t,l){let n,r,i;l.r(t),l.d(t,{default:function(){return uz}});var o=l("520739");l("882732"),l("544943"),l("874386"),l("927234"),l("179133"),l("826893");var a=l("563097"),s=l("88648"),d=l("567754"),u=l("909543"),c=l("465571"),v=l("553542"),m=l("713097"),f=l.n(m),h=l("713111"),p=l("714102"),g=l("867961"),_=l("888163"),x=l("876877"),w=l("725887"),C=l("973128"),y=l("250103"),I=l("634362"),b=l("147328"),j=l("597087"),k=l("336347"),N={errorModule:"NxQc6gfb"};function S(e){let{status:t,isSpider:l,statusCode:n,isEmptyUser:r,isUserCanceled:i}=e,{ERROR_USER_FORBIDDEN:o,ERROR_USER_NOTFOUND:s,ERROR_INVALID_PARAM:d}=j.ERROR_CODE;return t>400&&l?404===t?(0,a.jsx)(k.dR,{className:N.errorModule}):(0,a.jsx)(k.nl,{className:N.errorModule}):n===o?(0,a.jsx)(k.nl,{className:N.errorModule,title:"账号被封禁",desc:" "}):0!==n&&(n===s||n===d)||i||r?(0,a.jsx)(k.dR,{className:N.errorModule,title:"用户不存在",desc:" "}):n?(0,a.jsx)(k.nl,{className:N.errorModule,desc:"请稍后重试"}):(0,a.jsx)(k.nl,{className:N.errorModule})}var E=l("303566"),L=l("95349"),T=function(e){let{userInfo:t,uid:l}=e,{nickname:n=""}=t||{},{customVerify:r,enterpriseVerifyReason:i}=t||{},{modalVideoDetail:o}=(0,I.K)(e=>{let{modalVideoDetail:t}=e;return{modalVideoDetail:t}}),s=`${n}的抖音 - 抖音`,d=`${n}, ${n}的抖音`,u=i||r?`，${i||r}`:"",c=`${n}${u}。${n}的抖音主页、视频、合集以及作品的粉丝量、点赞量。来抖音，记录美好生活！`;return(0,a.jsxs)(L.Z,{videoDetail:o,mobileUrl:`https://m.douyin.com/share/user/${l}`,children:[(0,a.jsx)("title",{children:s}),(0,a.jsx)("meta",{name:"description",content:c}),(0,a.jsx)("meta",{name:"keywords",content:d}),(0,a.jsx)("script",{type:"application/ld+json",children:`{
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [{
              "@type": "ListItem",
              "position": 1,
              "name": "抖音",
              "item": "https://www.douyin.com"
            },{
              "@type": "ListItem",
              "position": 2,
              "name": "${n}",
              "item": "${(0,E.filterXSS)(`https://www.douyin.com/user/${l}`)}"
            }]
          }`}),(0,a.jsx)("link",{rel:"canonical",href:`https://www.douyin.com/user/${l}`})]})};l("981168");var M=l("878389");l("268917"),l("250440");var R=l("162095"),P=l("901046"),D=l("219175"),A=l("115627"),F=l("188811"),V=l("623582"),B=l("291175"),U=l("224796"),O=l("590704"),H=l("983253"),W=l("441447"),z=l("66047");let Z=(0,s.createContext)({isSelf:!1,isSpider:!1,updateFollowStatus:()=>null,haveDashBoard:!1,currentUserInfoDetail:void 0});l("413806");var $=l("439837"),K=l.n($),G=l("549519"),Y=l("953342"),q=l("961412"),Q=l("582296"),X=l("221773"),J=l("764040"),ee=l("509090"),et=l("549086"),el=l("207247"),en=l("902717"),er=l("916572"),ei=l("802913"),eo=l("756261"),ea=l("859708"),es=l("828782"),ed=l("907170"),eu=l("664959"),ec=l("482195"),ev=l("821553");l("779788");var em=l("720573"),ef=l("146725"),eh=l("934770"),ep=l("979571"),eg=l("589045"),e_=l("894621"),ex=l("138740"),ew={container:"Yj6Dutaf",editor:"t4_Kvt9q",textCount:"tkTNMuft"},eC=e=>{let{userInfo:t,onChangeIntro:l}=e,n=(0,s.useRef)(null),r=(0,s.useRef)(null),[i,d]=(0,s.useState)(t.desc),[u,c]=(0,s.useState)(!1),[v,m]=(0,s.useState)(!1),f=(0,s.useRef)([]),[h,p]=(0,s.useState)({statusCode:0,hasMore:!0,hasFetchData:!1,data:[],preQueryIds:"",searchText:""}),[g,_]=(0,s.useState)({statusCode:0,cursor:0,hasMore:!0,hasFetchData:!1,data:[]}),x=(0,s.useCallback)(async e=>{if(h.hasFetchData)return;let{statusCode:t,userList:l}=await (0,e_.nf)({cursor:20,query:e,penetrateParams:(null==h?void 0:h.searchText)===e?{pre_query_ids:f.current.join()}:null}),n=[];l.forEach(e=>{n.push(e.uid)}),(null==h?void 0:h.searchText)===e?f.current.push(...n):f.current=n,p(n=>({statusCode:t,searchText:e,hasMore:(null==l?void 0:l.length)===20,hasFetchData:!1,data:(null==n?void 0:n.searchText)!==e?l:[].concat(null==n?void 0:n.data,l)}))},[h]),w=(0,s.useCallback)(async()=>{if(g.hasMore){let{statusCode:e,userList:t,cursor:l,hasMore:n}=await (0,e_.Yp)({needPage:!0,cursor:g.cursor,count:20}),r=t.map(e=>(0,M._)((0,o._)({},e),{name:e.nickname}));0===e&&_(e=>e.cursor!==g.cursor?e:{statusCode:0,cursor:l,hasMore:n,hasFetchData:!0,data:[...e.data,...r]})}},[g]);return(0,s.useEffect)(()=>{let{desc:e,descExtra:l=[]}=t,r=[...l];setTimeout(()=>{n.current.setContent(e,r)})},[]),(0,a.jsxs)("div",{className:ew.container,ref:r,onClick:()=>{var e;null===(e=n.current)||void 0===e||e.focus()},children:[(0,a.jsx)(ex.Z,{className:ew.editor,ref:n,refOuterContainer:r,placeholder:"介绍一下你自己",onChange:e=>{var t;let r=null===(t=n.current)||void 0===t?void 0:t.getCommentInfo();d(e),void 0!==e&&void 0!==r&&l(e,r.textExtra.map(e=>({start:e.start,end:e.end,type:e.type,user_id:e.user_id,sec_uid:e.sec_uid})))},atUserSearchData:h,loadSearchAtData:x,atUserDefaultData:g,loadMoreDefaultAtData:w,onEditFocus:()=>{},onEditBlur:()=>{},handlePublishClick:()=>{},isAtIconSelected:u,setIsAtIconSelected:c,isAtIconPoint:v,setIsAtIconPoint:m}),(null==i?void 0:i.length)>0&&242-(null==i?void 0:i.length)<0&&(0,a.jsx)("div",{className:ew.textCount,children:242-(null==i?void 0:i.length)})]})},ey=l("670824"),eI=l.n(ey),eb=l("596161"),ej=l("111037");let ek=(0,s.forwardRef)((e,t)=>(0,a.jsxs)("svg",(0,M._)((0,o._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,a.jsxs)("g",{clipPath:"url(#reduceGlass_svg__clip0_1628_36241)",children:[(0,a.jsx)("circle",{cx:16,cy:16,r:15.5}),(0,a.jsx)("path",{clipRule:"evenodd",d:"M8.667 15a6.333 6.333 0 1 1 11.258 3.982l2.449 2.449a.667.667 0 0 1-.943.943l-2.449-2.449A6.333 6.333 0 0 1 8.666 15zM15 10a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm-2.667 5c0-.368.299-.667.667-.667h4a.667.667 0 0 1 0 1.334h-4a.667.667 0 0 1-.667-.667z"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"reduceGlass_svg__clip0_1628_36241",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h32v32H0z"})})})]}))),eN=(0,s.forwardRef)((e,t)=>(0,a.jsxs)("svg",(0,M._)((0,o._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,a.jsxs)("g",{clipPath:"url(#increaseGlass_svg__clip0_1612_33738)",children:[(0,a.jsx)("circle",{cx:16,cy:16,r:15.5}),(0,a.jsx)("path",{clipRule:"evenodd",d:"M15 8.667a6.333 6.333 0 1 0 3.982 11.258l2.449 2.449a.667.667 0 1 0 .943-.943l-2.449-2.449A6.333 6.333 0 0 0 15 8.666zM10 15a5 5 0 1 1 10 0 5 5 0 0 1-10 0zm5.667-2a.667.667 0 1 0-1.334 0v1.337l-1.329.002a.667.667 0 0 0 .002 1.333l1.327-.002V17a.667.667 0 0 0 1.334 0v-1.332L17 15.667a.667.667 0 0 0-.002-1.334l-1.332.002V13z"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"increaseGlass_svg__clip0_1612_33738",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h32v32H0z"})})})]}))),eS=()=>({touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),pointerEvents:!!window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0}),eE=(()=>{let e=eS(),t=["touchstart","touchmove","touchend","touchcancel"],l=["mousedown","mousemove","mouseup"];return(null==e?void 0:e.pointerEvents)&&(l=["pointerdown","pointermove","pointerup"]),(null==e?void 0:e.touch)?{start:"touchstart",move:"touchmove",end:"touchend",cancle:"touchcancel"}:{start:l[0],move:l[1],end:l[2]}})(),eL=()=>{let[e,t]=(0,s.useState)({x:0,y:0,width:0,height:0}),[l,n]=(0,s.useState)(0),r=(0,s.useRef)(null),i=(0,s.useRef)(null),a=(0,s.useRef)({width:0,height:0}),d=(0,s.useMemo)(()=>{if(i.current){let t=282/e.width,l=282/e.height;return{width:t,height:l,transform:`translate3d(${-(t*e.x)}px, ${-(l*e.y)}px, 0)`}}return{}},[e]);return(0,s.useEffect)(()=>{if(r.current&&i.current){let e=r.current.getContext("2d");r.current.ctx=e,i.current.crossOrigin="Anonymous",i.current.onload=()=>{var e,l,o;URL.revokeObjectURL(null===(e=i.current)||void 0===e?void 0:e.src),i.current.drawable=!0;let s=null===(l=i.current)||void 0===l?void 0:l.naturalWidth,d=null===(o=i.current)||void 0===o?void 0:o.naturalHeight;if(s>d){let e=s/d;t({x:(e-1)/2/e,y:0,width:1/e,height:1}),a.current={width:1/e,height:1}}else{let e=d/s;t({x:0,y:(e-1)/2/e,width:1,height:1/e}),a.current={width:1,height:1/e}}r.current.width=1080,r.current.height=1080,n(0)},i.current.onerror=()=>{var e;URL.revokeObjectURL(null===(e=i.current)||void 0===e?void 0:e.src),i.current.drawable=!1,t({x:0,y:0,width:1,height:1})}}},[]),(0,s.useEffect)(()=>{if(r.current&&i.current){var t,l,n,o,a;if(null===(t=i.current)||void 0===t?void 0:t.drawable){let t=null===(l=i.current)||void 0===l?void 0:l.naturalWidth,s=null===(n=i.current)||void 0===n?void 0:n.naturalHeight;null===(a=r.current)||void 0===a||null===(o=a.ctx)||void 0===o||o.drawImage(i.current,e.x*t,e.y*s,e.width*t,e.height*s,0,0,r.current.width,r.current.height)}}},[e]),(0,s.useEffect)(()=>{if(0===e.width&&0===e.height)return;let n=e.x+e.width/2,r=e.y+e.height/2,i=n-a.current.width/2,o=r-a.current.height/2,s=l/(l+1),d=a.current.width*(1-s),u=a.current.height*(1-s);t({x:Math.min(Math.max(i+(n-i)*s,0),1-d),y:Math.min(Math.max(o+(r-o)*s,0),1-u),width:d,height:u})},[l]),{canvasRef:r,imgRef:i,imgStyle:d,changeScale:e=>{n(Math.max(Math.min(e,9),0))},enlargeScale:l,imgViewBox:e,changeImgViewBox:e=>{t((0,M._)((0,o._)({},e),{x:Math.min(Math.max(e.x,0),1-e.width),y:Math.min(Math.max(e.y,0),1-e.height)}))}}},eT=e=>{let{changeScale:t,enlargeScale:l}=e,n=(0,s.useRef)(null),r=(0,s.useRef)(null),i=(0,s.useRef)(l),o=(0,s.useRef)(l),a=(0,s.useRef)(-1);return o.current=l,(0,s.useEffect)(()=>{let e=n.current,l=e.offsetWidth,s=r.current,d=n=>{if(a.current="touchstart"===n.type?n.targetTouches[0].pageX:n.pageX,l=e.offsetWidth,(null==n?void 0:n.target)!==s){let e=9*(n.offsetX/l);i.current=e,t(e)}else i.current=o.current},u=e=>{if(-1!==a.current){let n=(("touchmove"===e.type?e.targetTouches[0].pageX:e.pageX)-a.current)/l;t(i.current+9*n)}},c=()=>{a.current=-1};return e.addEventListener(eE.start,d),document.addEventListener(eE.move,u),document.addEventListener(eE.end,c),eE.cancle&&document.addEventListener(eE.cancle,c),()=>{e.removeEventListener(eE.start,d),document.removeEventListener(eE.start,u),document.removeEventListener(eE.start,c),eE.cancle&&document.removeEventListener(eE.cancle,c)}},[]),{sliderProgressRef:n,sliderButtonRef:r}},eM=e=>{let{imgRef:t,imgViewBox:l,changeImgViewBox:n,enlargeScale:r,changeScale:i}=e,a=(0,s.useRef)(l),d=(0,s.useRef)(l),u=(0,s.useRef)({x:-1,y:-1}),c=(0,s.useRef)(r);return a.current=l,c.current=r,(0,s.useEffect)(()=>{let e=t.current,l=e=>{u.current={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},d.current=a.current},r=t=>{if(!(-1===u.current.x||-1===u.current.y)){let l=e.offsetWidth,r=e.offsetHeight,i={x:"touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,y:"touchmove"===t.type?t.targetTouches[0].pageY:t.pageY};n((0,M._)((0,o._)({},a.current),{x:d.current.x+-((i.x-u.current.x)/l),y:d.current.y+-((i.y-u.current.y)/r)}))}},i=e=>{u.current.x=-1,u.current.y=-1};return e.addEventListener(eE.start,l),document.addEventListener(eE.move,r),document.addEventListener(eE.end,i),eE.cancle&&document.addEventListener(eE.cancle,i),()=>{e.removeEventListener(eE.start,l),document.removeEventListener(eE.move,r),document.removeEventListener(eE.end,i),eE.cancle&&document.addEventListener(eE.cancle,i)}},[]),(0,s.useEffect)(()=>{let e=t.current,l=e=>{let t=Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY||-e.detail)),l=void 0!==e.wheelDeltaX||void 0!==e.deltaX;(Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!l)&&(t<0?i(c.current-.3):i(c.current+.3))};return e.addEventListener("wheel",l),()=>{e.removeEventListener("wheel",l)}},[]),null};var eR={container:"oQj7cNjV",close:"N87zpwkF",title:"x0IvDZ47",avatarEditorContainer:"iqqwCJoW",leftContainer:"bgzwJbdK",mainEditor:"KLi220H4",loading:"hKdboqEi",img:"xmIZ8xeg",slideContainer:"z09lseSD",pointer:"vKQCJply",disabled:"dP6ysFsR",slider:"eqYv66Le",progressContainer:"QBBGrI5i",progress:"lbneJyli",progressButton:"Zwsb3tXS",rightContainer:"GLMROV5Q",topContainer:"zm5bTFjt",avatarPreview:"Wv4znxyE",avatarPreviewWord:"aATi1GPd",checkWord:"s6Zd7Nxp",bottomContainer:"D5BsLDLn",buttonContainer:"TZoCD8Wv",buttonSave:"Ya7D3N03"},eP=l("872136"),eD=new eP.h({clickEditProfile:{eventName:"click_edit_profile",params:{}},clickSaveProfile:{eventName:"click_save_profile",params:{action:""}}});let eA=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M24.601 24.6a1.362 1.362 0 0 1-1.927 0L18.5 20.427l-4.174 4.175a1.362 1.362 0 0 1-1.927-1.927l4.174-4.174-4.174-4.175a1.362 1.362 0 0 1 1.927-1.926l4.174 4.174 4.174-4.174a1.362 1.362 0 1 1 1.927 1.927L20.427 18.5l4.174 4.174a1.362 1.362 0 0 1 0 1.927z",fill:"#fff",fillOpacity:".8"})})));var eF=l("109539");let eV=e=>{var t;let{avatarUrl:l,onCloseAvatarEditor:n,onSaveAvatar:r,openFileSelector:i,onClose:o}=e,[d,u]=(0,s.useState)(!1),{dispatch:c,userInfo:v}=null!==(t=(0,eF.useUserInfoContext)())&&void 0!==t?t:{},m=(0,s.useRef)(d);m.current=d;let{canvasRef:p,imgRef:g,imgStyle:_,changeScale:x,enlargeScale:w,imgViewBox:C,changeImgViewBox:y}=eL(),{sliderProgressRef:I,sliderButtonRef:b}=eT({changeScale:x,enlargeScale:w});return eM({imgRef:g,imgViewBox:C,changeImgViewBox:y,enlargeScale:w,changeScale:x}),(0,a.jsxs)("div",{className:eR.container,children:[(0,a.jsx)(A.Z,{className:eR.close,width:36,height:36,onClick:()=>{!m.current&&n()},src:eA}),(0,a.jsx)("div",{className:eR.title,children:"修改头像"}),(0,a.jsxs)("div",{className:eR.avatarEditorContainer,children:[(0,a.jsxs)("div",{className:eR.leftContainer,children:[(0,a.jsxs)("div",{className:eR.mainEditor,children:[(0,a.jsx)("img",{className:eR.img,style:_,src:l,ref:g,draggable:!1}),d&&(0,a.jsx)(h.gb,{className:eR.loading})]}),(0,a.jsxs)("div",{className:eR.slideContainer,children:[(0,a.jsx)(A.Z,{width:32,height:32,viewBox:"0 0 32 32",src:ek,className:f()(eR.pointer,{[eR.disabled]:0===w}),onClick:()=>x(w-1)}),(0,a.jsx)("div",{className:eR.slider,children:(0,a.jsx)("div",{className:eR.progressContainer,ref:I,children:(0,a.jsx)("div",{className:eR.progress,style:{width:`${w/9*100}%`},children:(0,a.jsx)("div",{className:eR.progressButton,ref:b})})})}),(0,a.jsx)(A.Z,{width:32,height:32,viewBox:"0 0 32 32",src:eN,className:f()(eR.pointer,{[eR.disabled]:9===w}),onClick:()=>x(w+1)})]})]}),(0,a.jsxs)("div",{className:eR.rightContainer,children:[(0,a.jsxs)("div",{className:eR.topContainer,children:[(0,a.jsx)("canvas",{className:eR.avatarPreview,ref:p}),(0,a.jsx)("div",{className:eR.avatarPreviewWord,children:"头像预览"}),(0,a.jsx)("div",{className:eR.checkWord,children:"审核通过后展示"})]}),(0,a.jsx)("div",{className:eR.bottomContainer,onClick:()=>{i()},children:"重新上传"})]})]}),(0,a.jsxs)("div",{className:eR.buttonContainer,children:[(0,a.jsx)(R.Button,{className:eR.buttonSave,theme:"solid",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.toBlob(async e=>{if(null!==e&&!m.current){u(!0),m.current=!0;let l=new(eI())({userId:v.info.uid,appId:eb.APP_ID,imageConfig:{serviceId:eb.IMAGEX_AVATAR_SERVER_ID}}),{stsToken:n,statusCode:i}=await (0,ej.$y)()||{};if(0===i){var t;let i=null==l?void 0:null===(t=l.addFile)||void 0===t?void 0:t.call(l,{file:e,stsToken:n,type:"image"});l.on("complete",async t=>{var l;let n=await (0,eh.T)({avatar_uri:t.uploadResult.Uri});[0,1].includes(null==n?void 0:null===(l=n.toastBackInfo)||void 0===l?void 0:l.commit_status)?(r(window.URL.createObjectURL(e)),setTimeout(()=>{null==c||c({type:"updateUserInfo"})},2e3),eD.sendLog("clickSaveProfile",{action:"photo"})):(ee.F.info(n.toastBackInfo.toast_msg||n.statusMsg),u(!1))}),l.on("error",e=>{u(!1),ee.F.info("保存失败")}),l.on("progress",e=>{}),l.start(i)}else u(!1),ee.F.info("保存失败")}})},children:"保存"}),(0,a.jsx)(R.Button,{theme:"solid",onClick:()=>{!m.current&&n()},type:"secondary",children:"取消"})]})]})};var eB={edit:"abNCCj58",container:"HnwDHspA",box:"bUdwOFhX",header:"HnXAB3YV",title:"TljYjZGO",close:"_UeHg2ME",avatar:"imBl2tHZ",images:"VXg2DsA6",iconPhoto:"Y51j2gUV",avatarText:"J5qgm99k",name:"FzdmD5L2",nameTitle:"SOhxWS7Y",nameInput:"wTEHkE3s",nameCount:"I3ftN1ZP",intro:"lKaZH_Nb",introTitle:"rvsoxDrn",introInput:"b2KrpMlo",buttons:"Zkp90ZJW",save:"sqyYvDcC",cancel:"KpSE1cwz",hide:"aazJaqHk",icMySetSvg:"g5oCS5tp"};l("338172");let eU=e=>{let{changeImgUrl:t,avatarSrcChange:l}=e,[n,r]=(0,s.useState)(!1),i=(0,s.useRef)(),o=(0,s.useRef)();return(0,s.useEffect)(()=>{if(o.current){let e=o.current,t=()=>{window.URL.revokeObjectURL(e.src)};return e.addEventListener("load",t),()=>{e.removeEventListener("load",t)}}},[]),(0,s.useEffect)(()=>{let e=i.current;if(e){let l="",n=()=>{if(null==e?void 0:e.files[0]){var n;window.URL.revokeObjectURL(l),(null==e?void 0:null===(n=e.files[0].type)||void 0===n?void 0:n.startsWith("image"))?(t(l=window.URL.createObjectURL(null==e?void 0:e.files[0])),r(!0),e.value=""):ee.F.info("格式错误")}};return null==e||e.addEventListener("change",n),()=>{null==e||e.removeEventListener("change",n),window.URL.revokeObjectURL(l)}}},[]),{inputRef:i,imgRef:o,showAvatarEditor:n,onCloseAvatarEditor:()=>{r(!1),t("")},onSaveAvatar:e=>{l(),r(!1),t(e)},openFileSelector:()=>{var e,t;null===(t=i.current)||void 0===t||null===(e=t.click)||void 0===e||e.call(t)}}},eO=e=>{var t;let{userInfo:l,onClose:n}=e,{avatarUrl:r,nickname:i,desc:d}=null!=l?l:{},{dispatch:u}=null!==(t=(0,eF.useUserInfoContext)())&&void 0!==t?t:{},[c,v]=(0,s.useState)(r),[m,h]=(0,s.useState)(i),[p,g]=(0,s.useState)(d),_=(0,s.useRef)(d),x=(0,s.useRef)(),w=(0,s.useRef)(!1),C=(0,s.useRef)(!1),y=(0,s.useMemo)(()=>{let e=0===m.trim().length,t=m===i,l=p===d;return(e||t&&l)&&!w.current},[i,p,m,d,w.current]),I=async()=>{if(C.current)return;let e={},t=!1;if(m!==i&&(e.nickname=m,t=!0),_.current!==d){if(t=!0,""===_.current)e.signature="",e.signature_extra=void 0;else{if(_.current.length>242){ee.F.info("字数已超出最大限制");return}if(_.current.split("\n").length>11){ee.F.info("已超出最大行数");return}let t=_.current.trim();if(e.signature=t,x.current){e.signature_extra=JSON.stringify(x.current),0===x.current.length&&(e.signature_extra=void 0);let t=/^\s+/.exec(_.current);if(t){let l=t[0].length,n=x.current.map(e=>(0,M._)((0,o._)({},e),{start:e.start-l,end:e.end-l}));e.signature_extra=JSON.stringify(n)}}}}if(t){var l,r,a;n();let t=[];void 0!==e.nickname&&t.push("name"),void 0!==e.signature&&t.push("signature"),eD.sendLog("clickSaveProfile",{action:t.join(",")}),C.current=!0;let i=await (0,eh.T)(e);if(C.current=!1,(null==i?void 0:null===(l=i.toastBackInfo)||void 0===l?void 0:l.back)&&setTimeout(()=>{null==u||u({type:"updateUserInfo"})},2e3),null==i?void 0:null===(r=i.toastBackInfo)||void 0===r?void 0:r.toast_msg){ee.F.info(null==i?void 0:null===(a=i.toastBackInfo)||void 0===a?void 0:a.toast_msg);return}if(null==i?void 0:i.statusMsg){ee.F.info(null==i?void 0:i.statusMsg);return}}else{n();return}},b=()=>{n()},{inputRef:j,imgRef:k,showAvatarEditor:N,onCloseAvatarEditor:S,onSaveAvatar:E,openFileSelector:L}=eU({changeImgUrl:e=>{v(e)},avatarSrcChange:()=>w.current=!0});return(0,a.jsxs)(ef.T6,{className:eB.container,children:[(0,a.jsx)("input",{type:"file",accept:".png,.webp,.jpeg,.pjpeg,.bmp,.jpg",style:{display:"none"},ref:j}),(0,a.jsxs)("div",{"data-bytereplay-mask":"strict",className:f()(eB.box,{[eB.hide]:N}),children:[(0,a.jsxs)("div",{className:eB.header,children:[(0,a.jsx)("span",{className:eB.title,children:"编辑资料"}),(0,a.jsx)("div",{className:eB.close,onClick:b,children:(0,a.jsx)(A.Z,{width:36,height:36,src:eA})})]}),(0,a.jsxs)("div",{className:eB.avatar,children:[(0,a.jsxs)("div",{className:eB.images,onClick:()=>{var e;null===(e=j.current)||void 0===e||e.click()},children:[(0,a.jsx)("img",{src:c||r,alt:"avatar",ref:k}),(0,a.jsx)("span",{className:eB.iconPhoto})]}),(0,a.jsx)("div",{className:eB.avatarText,children:"点击修改头像"})]}),(0,a.jsxs)("div",{className:eB.name,children:[(0,a.jsx)("div",{className:eB.nameTitle,children:"名字"}),(0,a.jsxs)("div",{className:eB.nameInput,children:[(0,a.jsx)("input",{type:"text",placeholder:"记得填写昵称",maxLength:20,onChange:e=>{h(e.target.value)},value:m}),(0,a.jsxs)("span",{className:eB.nameCount,children:[m.length,"/20"]})]})]}),(0,a.jsxs)("div",{className:eB.intro,children:[(0,a.jsx)("div",{className:eB.introTitle,children:"简介"}),(0,a.jsx)("div",{className:eB.introInput,children:(0,a.jsx)(eC,{userInfo:l,onChangeIntro:(e,t)=>{_.current=e,x.current=t,g(e)}})})]}),(0,a.jsxs)("div",{className:eB.buttons,children:[(0,a.jsx)(R.Button,{className:eB.cancel,onClick:b,type:"secondary",theme:"solid",children:"取消"}),(0,a.jsx)(R.Button,{className:eB.save,disabled:y,onClick:I,theme:"solid",children:"保存"})]})]}),N&&(0,a.jsx)(eV,{avatarUrl:c,onCloseAvatarEditor:S,onSaveAvatar:E,openFileSelector:L,onClose:n})]})};var eH=e=>{let{userInfo:t,className:l,showIconStyle:n=!1}=e,[r,i]=(0,s.useState)(!1),o=()=>{eD.sendLog("clickEditProfile"),i(!0)},d=(0,s.useCallback)(()=>{i(!1)},[]);return(0,a.jsxs)(a.Fragment,{children:[n?(0,a.jsx)(ep.z,{svg:(0,a.jsx)(eg.Z,{}),className:eB.icMySetSvg,onClick:o}):(0,a.jsx)(R.Button,{className:f()(eB.edit,l),onClick:o,theme:"solid",children:"编辑资料"}),r&&(0,a.jsx)(em.h,{children:(0,a.jsx)(eO,{userInfo:t,onClose:d})})]})},eW=l("769508"),ez=l("271994"),eZ=l("768492"),e$=l("188379"),eK={avatarWrap:"yzJGz3HB",avatar:"ANyOPAak",pointer:"LFNAt8bB",avatarDefault:"d_ib9bL0",auditing:"NvNAq77_",screenMask:"gWxSDLY6"};let eG=new ef._z,eY=e=>{let{src:t}=e;eG.render({children:(0,a.jsx)("img",{src:t,style:{width:280,height:280}}),className:eK.screenMask,onMaskClick:()=>eG.destroy()})};var eq=e=>{var t,l,n,r,i,d,u,c;let{userInfo:v,logId:m}=e,{uid:h,nickname:p,avatarUrl:g,avatar300Url:_,followStatus:x,roomId:w,secret:C,roomData:y,roomIdStr:I}=null!=v?v:{},b=null!==(d=(0,z._)())&&void 0!==d?d:{},{isSelf:j}=null!==(u=(0,s.useContext)(Z))&&void 0!==u?u:{},{userInfo:{isLogin:k,info:N,isSpider:S}}=null!==(c=(0,eF.useUserInfoContext)())&&void 0!==c?c:{},E=(0,s.useMemo)(()=>{var e;return(j||!C||C&&k&&!j&&[1,2].includes(x))&&!!w&&(null==y?void 0:null===(e=y.owner)||void 0===e?void 0:e.web_rid)},[y,C,k,j,x,w]),L=(0,s.useMemo)(()=>{var e;return{web_rid:null==y?void 0:null===(e=y.owner)||void 0===e?void 0:e.web_rid,enter_from_merge:j?"personal_homepage":"web_others_homepage",enter_method:j?"web_video_head":"web_homepage_head",enter_method_temai:"web_video_head",action_type:"click",room_id:I}},[null==y?void 0:null===(t=y.owner)||void 0===t?void 0:t.web_rid,I,j]);(0,s.useMemo)(()=>{var e;return null==y?void 0:null===(e=y.paid_live_data)||void 0===e?void 0:e.paid_type},[y]);let{seasonIds:T}=(0,e$.b)();(0,s.useMemo)(()=>{var e,t;return null==T?void 0:null===(t=T.includes)||void 0===t?void 0:t.call(T,(null==y?void 0:null===(e=y.episode_extra)||void 0===e?void 0:e.season_id_str)||"")},[y,T]);let M=(0,s.useMemo)(()=>v?{authorInfo:{roomData:(0,o._)({},(null==v?void 0:v.roomData)||{}),roomId:null==v?void 0:v.roomIdStr,nickname:null==v?void 0:v.nickname,title:null==v?void 0:v.nickname,secUid:null==v?void 0:v.secUid,desc:null==v?void 0:v.desc,uid:null==v?void 0:v.uid},desc:null==v?void 0:v.desc}:{},[v]);return(0,a.jsx)("div",{className:eK.avatarWrap,children:E?(0,a.jsx)(eW.nh,{openMultiTaskWindowInWindow:(0,es.DT)(),type:"extra-large",src:S?_:g,alt:`${p}头像`,uid:h,liveRoomUrl:(0,eZ.cc)(L),logParams:{enter_from_merge:j?"personal_homepage":"web_others_homepage",small_window_enter_method:j?"personal_homepage_fast_live_hover":"web_homepage_head_hover"},liveRoomParam:{logId:m},isNeedSendLog:!0,isFirstLive:(null==y?void 0:null===(n=y.episode_extra)||void 0===n?void 0:null===(l=n.mod)||void 0===l?void 0:l.episode_stage)===2,isEcomLive:(null==y?void 0:null===(i=y.ecom_data)||void 0===i?void 0:null===(r=i.room_cart_v2)||void 0===r?void 0:r.show_cart)===1,awemeInfo:M,position:"right",fixTop:10,from:"follow",scene:"pc_profile_struct",abtestData:b}):(0,a.jsx)(ez.q,{className:f()(eK.avatar,{[eK.pointer]:null==b?void 0:b.hasUserEdit}),defaultClassName:eK.avatarDefault,src:_,alt:`${p}头像`,isSpider:S,isSelf:j,onClick:()=>{eY({src:_})},children:(null==v?void 0:v.avatarAuditing)&&(null==b?void 0:b.hasUserEdit)?(0,a.jsx)("div",{className:eK.auditing,children:"审核中"}):null})})},eQ=l("369881"),eX=l("522828"),eJ=l("560296"),e0=l("795012"),e1=l("742740"),e2=l("737271"),e3=l("774575"),e5="tIwhKJF7",e6="UM6jbE7c",e7=e=>{var t;let{userInfo:l,type:n,className:r}=e,{uid:i,followStatus:o,followerStatus:s}=l,{userInfo:{isLogin:d,info:u},dispatch:c}=null!==(t=(0,eF.useUserInfoContext)())&&void 0!==t?t:{},{follow:v,unFollow:m}=(0,eX.OM)({selfUid:null==u?void 0:u.uid,actionUid:i,defaultFollowerStatus:s,defaultFollowStatus:o,isLogin:!!d,onLoginSuccess:()=>null==c?void 0:c({type:"updateUserInfo"}),logExtraParams:{to_user_id:i,enter_from:(0,e1.yW)(),is_full_screen:(0,e2.r)()?"1":"0",tab_name:(0,e0.zD)()||(0,H.Rs)("tab_name")||""},fail:eX.GH}),{text:h,buttonType:p,followStatus:g}=(0,eJ.r)({selfUid:null==u?void 0:u.uid,actionUid:i,defaultFollowerStatus:s,defaultFollowStatus:o});return(0,a.jsx)(R.Button,{"data-e2e":"user-info-follow-btn",className:f()(e5,r,{[e6]:p!==eQ.TT.Active&&"user"===n}),onClick:()=>{(0,e3.V)(g)?m():v()},type:p!==eQ.TT.Active?"secondary":"primary",theme:"solid",children:h})},e4=l("16565"),e8={im:"IoBgzsYj",chat:"K8kpIsJm"},e9=e=>{var t,l;let{userInfo:n,className:r}=e,{userInfo:{isLogin:i},dispatch:o}=null!==(l=(0,eF.useUserInfoContext)())&&void 0!==l?l:{};return!(null==n?void 0:null===(t=n.im_role_ids)||void 0===t?void 0:t.includes(e4.L.AiChatBotRole))&&(0,a.jsx)(R.Button,{theme:"solid",type:"secondary",className:f()(e8.chat,e8.im,r),onClick:()=>{if(!i){(0,Q.default)({headerText:"登录后即可私信对方",enterMethod:"im_private",success:()=>{o({type:"updateUserInfo"})}});return}W.emit(W.EVENT.sendImUserMsg,{uid:n.uid,enterMethod:"im_private"})},children:"私信"})},te=l("459307"),tt=l("311180"),tl=l("146584"),tn=l("465769");let tr=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:12,height:4,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M2.667 2.187a1.333 1.333 0 1 1-2.667 0 1.333 1.333 0 0 1 2.667 0zM7.333 2.187a1.333 1.333 0 1 1-2.666 0 1.333 1.333 0 0 1 2.666 0zM10.667 3.52a1.333 1.333 0 1 0 0-2.667 1.333 1.333 0 0 0 0 2.667z",fill:"currentColor"})})));var ti=new eP.h({blockUser:{eventName:"block_user",params:{action:"",enter_from:"",to_user_id:""}}}),to={container:"DWwvwQNz",more:"VAwtLD29",box:"k7dZx7B1",report:"Fsh2pQX9",modalBackground:"LfnFbEyu",modal:"OXgKdd9n",dropdown:"rbeoFeJw",content:"qmWpwpIk",header:"uUQOnNhQ",footer:"gzJNlQTp",cancelBtn:"jFVH_Lff",confirmBtn:"Ae_jP72O"},ta=e=>{let{userInfo:t,dispatch:l,currentUserInfo:n,isLogin:r,className:i}=e,[o,d]=(0,s.useState)(!1),u=(0,z._)(),{isBlock:c}=t,v=(0,s.useRef)(t);v.current=t;let m=async()=>{ti.sendLog("blockUser",{action:"confirm",enter_from:(0,tn.vM)(),to_user_id:null==t?void 0:t.uid});let{status_code:e,block_status:l}=await (0,tl.Ox)(null==t?void 0:t.uid,null==t?void 0:t.secUid,c?tl.bF.unblock:tl.bF.block,tl.NE.block);0===e&&(l===tl.bF.unblock||l===tl.bF.block)?(W.emit(W.EVENT.userBlockEvent,{uid:null==t?void 0:t.uid,isBlock:l===tl.bF.block,action:"block"}),ee.F.info(l===tl.bF.unblock?"已解除拉黑":"已拉黑"),d(!1)):ee.F.info("操作失败，稍后重试")};(0,s.useEffect)(()=>{let e=W.listen(W.EVENT.userBlockEvent,e=>{var t;let{uid:l,isBlock:n,action:r}=e;l===(null===(t=v.current)||void 0===t?void 0:t.uid)&&("block"===r||v.current.isBlock&&"follow"===r)&&location.reload()});return()=>{e()}},[]);let h=(0,a.jsxs)(R.Dropdown.Menu,{className:to.box,children:[(0,a.jsx)(R.Dropdown.Item,{className:to.report,onClick:()=>{(0,te.m)({title:"举报账号",type:"user",object_id:t.uid,owner_id:null==t?void 0:t.uid,owner_sec_id:null==t?void 0:t.secUid,userInfo:n,loginDispatch:l,enter_from:(0,e1.yW)(),pipeline_id:"156",abtestData:u})},children:"举报账号"}),(0,a.jsx)(R.Dropdown.Item,{className:to.report,onClick:()=>{if(ti.sendLog("blockUser",{action:"click",enter_from:(0,tn.vM)(),to_user_id:null==t?void 0:t.uid}),r)d(!0);else{var e,n;(0,Q.default)({headerText:"登录后可以拉黑",enterMethod:"",next:`https://${null===(n=window)||void 0===n?void 0:null===(e=n.location)||void 0===e?void 0:e.host}`,success:async()=>{l({type:"updateUserInfo"})}})}},children:t.isBlock?"解除拉黑":"拉黑"})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.Dropdown,{className:to.dropdown,render:h,position:"bottom",children:(0,a.jsx)("div",{id:"tooltip",className:to.container,children:(0,a.jsx)(R.Button,{className:f()(to.more,i),theme:"solid",children:(0,a.jsx)(A.Z,{src:tr,width:12,height:4,viewBox:"0, 0, 12, 4"})})})}),o&&(0,a.jsx)(tt.u,{className:to.modal,modalClassName:to.modalBackground,type:"custom",onCancel:()=>d(!1),isHide:!o,children:(0,a.jsxs)("div",{className:f()(to.content),children:[(0,a.jsx)("div",{className:to.header,children:c?"解除拉黑后，对方可以搜索到你，可以给你发私信":"拉黑后，对方将无法搜索到你，也不能给你发私信"}),(0,a.jsxs)("div",{className:to.footer,children:[(0,a.jsx)(R.Button,{theme:"solid",type:"secondary",className:to.cancelBtn,onClick:()=>{d(!1),ti.sendLog("blockUser",{action:"cancel",enter_from:(0,tn.vM)(),to_user_id:null==t?void 0:t.uid})},children:"取消"}),(0,a.jsx)(R.Button,{className:to.confirmBtn,onClick:m,theme:"solid",children:c?"解除拉黑":"确认拉黑"})]})]})})]})},ts=l("310314"),td=l("166646"),tu=l("394016"),tc=l("653785"),tv={share:"hTBT0du_",btn:"PQRW52Ib",text:"Y17_NDTf",box:"Y8UbURTH",code:"mR6QlXJq"},tm=e=>{var t,l;let{userInfo:n,isTextType:r,className:i}=e,{uid:o,secret:d}=n,u=null!==(t=(0,z._)())&&void 0!==t?t:{},{userInfo:c,dispatch:v}=null!==(l=(0,eF.useUserInfoContext)())&&void 0!==l?l:{},{type:m,changeType:h}=(0,ts.P)({delayDisappear:50,delayShow:50}),p=(0,s.useRef)(!1);return 0===d?(0,a.jsxs)(R.Button,{theme:"borderless",type:"secondary",className:f()(tv.share,tv.btn,i),onMouseEnter:()=>h("share_btn"),onMouseLeave:()=>!p.current&&h(""),id:"frame-user-info-share-button",children:[r?(0,a.jsx)("span",{className:tv.text,children:"分享主页"}):(0,a.jsx)(tu.Z,{type:"fit",ableMiniType:!0,scene:"user"}),(0,a.jsx)(td.Z,{className:f()(tv.box,tv.code),toast:e=>ee.F.info(e),shareShowMethod:"icon",uid:o,userInfo:n,shareType:tc.y.User,inanyPage:td.v.UserPage,loginUserInfo:c,hidden:"share_btn"!==m,abtestData:u,handleClose:()=>h(""),loginDispatch:v,onMouseEnter:()=>{},onMouseLeave:()=>{},onFriendSearching:e=>{p.current=e}})]}):null},tf={infoContainer:"a3i9GVfe",videoPerf:"y5Tqsaqg",newUi:"_6lTeZcQP",marginTop:"nrPzwwXG",trustLoginSwitch:"zmtaZy5D",btns:"XNhqx3NY",moreShare:"oGrwiFn6",shareClass:"xsKLdle9",moreStyle:"YQr4RY2i",moreGab:"MmN005h9",otherShowDownload:"NdIb5SFW",btnContainer:"fwi7VMnj",follwImEdit:"FEvqkPxo",midBtnContainer:"XB2sFwjg",editorClass:"zHAeQxw3",btnBgColor:"dGq2GnTL",moreGap:"Bv97Uzzv",downloadBarText:"d7tzLBj1",downloadBar:"VBhNH6VP",baseInfoContainer:"IGPVd8vQ",nameInfo:"HjcJQS1Z",nickname:"GMEdHsXq",otherInfo:"eTvkFY8I",uniqueId:"OcCvtZ2a",location:"DtUnx4ER",tag:"YcpSmZeQ",lastdate:"Xcrb5LoG",descInfo:"lFECd241",more:"Y1D9s6I6",login:"rxodNequ",moreDesc:"rOmiw4gg",liveReplayEntry:"q5f5KYX2",countInfo:"cuA7Ana_",item:"Q1A_pjwq",title:"uvGnYXqn",count:"C1cxu0Vq",clickable:"ELUP9h2u",descContainer:"JMYmWBA1",moreContainer:"DW9FqY4N",icMySetSvg:"iFoFhT83",hasNav:"nZryJ1oM",frameContainer:"T6lUvwbN",topBackground:"u24GjBen",monthlyRecommendUserTag:"QjnY8Uvh"},th=l("260087"),tp=l("645003"),tg=l("802156"),t_=JSON.parse('{"v":"5.9.0","fr":30,"ip":0,"op":28,"w":16,"h":16,"nm":"合成 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"形状图层 6","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[4.969,10.188,0],"ix":2,"l":2},"a":{"a":0,"k":[-5.312,2.625,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-5.312,-3.75],[-5.312,2.594]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[91]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":12,"s":[0]},{"t":28,"s":[91]}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"形状图层 5","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,10.188,0],"ix":2,"l":2},"a":{"a":0,"k":[-5.312,2.625,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-5.312,-3.438],[-5.312,2.594]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[60]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":15,"s":[0]},{"t":28,"s":[60]}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"形状图层 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[8,10.188,0],"ix":2,"l":2},"a":{"a":0,"k":[-5.312,2.625,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-5.312,-3.625],[-5.312,2.594]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[28]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":12,"s":[74]},{"t":28,"s":[28]}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"形状图层 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[8,8,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.996078431373,0.172549019608,0.333333333333,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0}],"markers":[]}'),tx=l("47047"),tw={live:"O7SIg9wH",ohosLive:"LrQ5AjhD",icon:"Qstga4V8",text:"xEgtpIax",liveWindow:"qy8ZJoLN"};let tC=l("269137").s;var ty=new eP.h(tC),tI=e=>{let{liveList:t,onHover:l,loading:n,abTestData:r,requestId:i}=e,{type:o,changeType:s}=(0,ts.P)({delayDisappear:100}),d=(0,tx.O)(),u=(0,tp.x)(()=>{let e=null==t?void 0:t[0];ty.sendLog("fastLiveHeadShow",{entrance_type:"personal_homepage",anchor_id:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId,show_type:"default"})});return(0,a.jsxs)("div",{className:f()(tw.live,{[tw.ohosLive]:d}),onClick:e=>{null==e||e.stopPropagation()},onMouseEnter:()=>{s(!0),o||null==l||l(),ty.sendLog("fastLiveHeadHover",{entrance_type:"personal_homepage",hover_show_cnt:t.length})},onMouseLeave:()=>{s(!1)},ref:u,children:[(0,a.jsx)(tg.default,{autoplay:!0,loop:!0,data:t_,className:tw.icon}),(0,a.jsxs)("div",{className:tw.text,children:[t.length,"人正在直播"]}),o&&(0,a.jsx)("div",{className:tw.liveWindow,children:(0,a.jsx)(th.Z,{abTestData:r,liveList:t,loading:n,hasLimit:!1,logParams:{enter_method:"personal_homepage_fast_live_head",enter_from_merge:(0,e1.yW)(),entrance_type:"personal_homepage",small_window_enter_method:"personal_homepage_fast_live_hover",request_id:i},onItemClick:()=>{s(!1)}})})]})};let tb=e=>!e.hideLocation&&!e.isNotShowBaseTag&&!e.isGovMediaVip&&!e.enterpriseVerifyReason&&!e.isStar&&!0,tj=e=>{let{country:t,province:l,city:n,district:r}=e;if(!tb(e))return"";if(!t)return n;if("中国"!==t)return t;if("台湾"===l)return l;if(!l&&("香港"===n||"澳门"===n))return n;let i=[];return l&&i.push(l),n&&n!==l&&i.push(n),r&&i.push(r),i.slice(0,2).join("\xb7")},tk=(e,t)=>e.map(e=>{var l,n,r;let i=null==e?void 0:null===(l=e.tag)||void 0===l?void 0:l.hotList,o=!(t.length<3)||(null==e?void 0:null===(n=e.tag)||void 0===n?void 0:n.isTop)?void 0:null==i?void 0:i.rank;return o&&!t.includes(null==e?void 0:e.awemeId)&&(null===(r=JSON.parse((null==i?void 0:i.extra)||"{}"))||void 0===r?void 0:r.entrance_relativity)==="100"&&t.push(null==e?void 0:e.awemeId),(null==i?void 0:i.rank)&&(i.rank=o),e}),tN=(e,t)=>{if(!e)return{padding:"0"};let{left:l}=t,n=document.body.clientWidth-t.left-t.width;return{padding:`0 ${n}px 0 ${l}px`}},{CREATOR_DOMAIN:tS,HOME_DOMAIN:tE}=l("945388"),tL={NO:0,REQUEST:4},tT={VIDEO:"video",VS:"vs",USER:"user",Live:"live"},tM={FAVORITE_FOLDER:"favorite_folder",VIDEO:"video",MUSIC:"music",COMPILATION:"compilation",SERIES:"playlet"},tR=[{tab:tM.FAVORITE_FOLDER,title:"收藏夹"},{tab:tM.VIDEO,title:"视频"},{tab:tM.MUSIC,title:"音乐"},{tab:tM.COMPILATION,title:"合集"},{tab:tM.SERIES,title:"短剧"}],tP=`//${tE}/rule/policy?activeId=self_decipline&enter_from=pc_douyin_user_service_agreement`,tD={COMPILATION:"compilation",SERIES:"playlet",VIDEO:"video",SECRET_VIDEO:"private_post"};tM.COMPILATION,tM.SERIES;let tA=[{tab:tD.VIDEO,title:"作品"},{tab:tD.SECRET_VIDEO,title:"私密作品",lock:!0},{tab:tD.COMPILATION,title:"合集"},{tab:tD.SERIES,title:"短剧"}],tF=[{tab:tD.VIDEO,title:"作品"},{tab:tD.COMPILATION,title:"合集"},{tab:tD.SERIES,title:"短剧"}],tV=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 1.25a.75.75 0 0 0 0 1.5h1.09L7.54 4.298a.757.757 0 0 0-.058.066 4 4 0 1 0 .968 1.112.752.752 0 0 0 .15-.117L10.25 3.71V5a.75.75 0 0 0 1.5 0V2a.75.75 0 0 0-.75-.75H8zM5 10a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z",fill:"#168EF9"})}))),tB=(0,s.forwardRef)((e,t)=>(0,a.jsxs)("svg",(0,M._)((0,o._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,a.jsx)("mask",{id:"woman_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-2,y:-2,width:16,height:16,children:(0,a.jsx)("path",{fill:"#C4C4C4",d:"M-2-2h16v16H-2z"})}),(0,a.jsxs)("g",{mask:"url(#woman_svg__a)",stroke:"#F5588E",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:7.2,cy:4.896,r:3.25}),(0,a.jsx)("path",{d:"M1.617 10.511l3.115-3.115M1.904 7.396l2.828 2.829"})]})]})));var tU=l("97319");let tO=(0,M._)((0,o._)({changeProfileTab:{eventName:"change_profile_tab",params:{enter_from:"",to_user_id:"",tab_name:""}},livesdkLiveShow:{eventName:"livesdk_live_show",params:{enter_from_merge:"web_others_homepage",enter_method:"web_live_btn",anchor_id:"",room_id:"",user_id:"",request_id:""}},livesdkRecLivePlay:{eventName:"livesdk_rec_live_play",params:{anchor_id:"",room_id:"",enter_from_merge:"web_others_homepage",enter_method:"web_live_btn",game_name:"",live_type:"",is_aweme_tied:0,game_live_source:"",url:"",url_path:"",request_id:""}},clickFollowCnt:{eventName:"click_follow_cnt",params:{enter_from:""}},clickFansCnt:{eventName:"click_fans_cnt",params:{enter_from:""}},topknotSettingShow:{eventName:"topknot_setting_show",params:{}},clickTopknotSetting:{eventName:"click_topknot_setting",params:{}},creatorManageEntranceShow:{eventName:"creator_manage_entrance_show",params:{type:"compilation"}},creatorManageEntranceClick:{eventName:"creator_manage_entrance_click",params:{type:"compilation"}},collectionCoverShow:{eventName:"video_cover_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:0,tab_name:"",enter_method:"click_tab",is_co_publish:0,co_publish_author_list:void 0}},collectionCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:0}},postVideoCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:0,tab_name:"",enter_method:"click_tab",is_co_publish:0,co_publish_author_list:void 0}},videoCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:0,tab_name:"",enter_method:"click_tab",is_co_publish:0,co_publish_author_list:void 0}},clickFavoriteCollection:{eventName:"click_favorite_collection",params:{author_id:"",group_id:"",content:"video"}}},tU.q),{openRecordShow:{eventName:"open_record_show",params:{}},openRecordClick:{eventName:"open_record_click",params:{}},clickMoreRecord:{eventName:"click_more_record",params:{}},search:{eventName:"search",params:{impr_id:"",enter_from:"",search_type:"general",enter_method:"normal_search",search_keyword:"",duration:0,is_success:0,anti_id:"",tab_name:""}},enterSearch:{eventName:"enter_search",params:{enter_from:"",tab_name:""}},clickLikeTab:{eventName:"click_like_tab",params:{enter_method:""}},noLikeToast:{eventName:"no_like_toast",params:{enter_method:""}},manageEntranceClick:{eventName:"manage_entrance_click",params:{tab_name:"",sub_tab_name:""}},manageExitClick:{eventName:"manage_exit_click",params:{tab_name:"",sub_tab_name:""}},userPageDataFetched:{eventName:"user_page_data_fetched",params:{cost:0,from_cache:0}},manageDeleteClick:{eventName:"manage_delete_click",params:{tab_name:"",sub_tab_name:"",item_cnt:0,icon_name:""}},recordTabClick:{eventName:"record_tab_click",params:{tab_name:""}},recordFilterTabClick:{eventName:"record_filter_tab_click",params:{sub_tab_name:""}},recordFilterConfirm:{eventName:"record_filter_confirm",params:{sub_tab_name:"",click_type:"",click_sub_type:""}},reserveLiveCardShow:{eventName:"reserve_live_card_show",params:{enter_from:"personal_homepage",anchor_id:"",room_id:""}},reserveLiveCardClick:{eventName:"reserve_live_card_click",params:{enter_from:"personal_homepage",anchor_id:"",room_id:""}},reserveLiveCardCancel:{eventName:"reserve_live_card_cancel",params:{enter_from:"personal_homepage",anchor_id:"",room_id:""}},personalShieldAlbumShow:{eventName:"personal_shield_album_show",params:{enter_from:"",tab_name:"",to_user_id:""}}});var tH=new eP.h(tO);let tW=e=>{var t,l;return[1,18,19].includes(null!==(l=null==e?void 0:null===(t=e.punishRemindInfo)||void 0===t?void 0:t.ban_type)&&void 0!==l?l:0)},tz=e=>{let{ban_type:t,prompt_bar:l,punish_content:n}=(null==e?void 0:e.punishRemindInfo)||{},{link_length:r}=l||{},{link_length:i,link_url:o}=n||{};return 2===t&&!!l&&!!n&&(!(r>0)||!(i>0)||!!decodeURIComponent(o).includes("aweme.snssdk.com/magic/eco/runtime/release/6086d26dbe98180570886317"))&&!0};var tZ={notice:"S2ptUoM6",noticeText:"iCX2rTxK",detailButton:"qH0TCkQO",content:"bHNM3rh5",yellow:"AVpi0xdQ"},t$=l("275130");let tK=e=>{let{isSelf:t}=e;return(0,a.jsxs)("p",{className:tZ.content,children:["由于违反",(0,a.jsx)("a",{className:tZ.yellow,href:`${tP}`,target:"_blank",rel:"noopener noreferrer",children:"《抖音社区自律公约》"}),"的相关规定，该账号已被封禁"]})},tG=e=>{let{isSelf:t}=e;return(0,a.jsxs)("p",{className:tZ.content,children:[t?"您":"该用户","违反",(0,a.jsx)("a",{className:tZ.yellow,href:`${tP}`,target:"_blank",rel:"noopener noreferrer",children:"《抖音社区自律公约》"}),"的相关规定被禁止发布作品"]})},tY=e=>{let{content:t,link_index:l,link_length:n}=e.content||{},r=t.slice(0,l),i=t.slice(l,l+n),o=t.slice(l+n);return(0,a.jsxs)("p",{className:tZ.content,children:[(0,a.jsx)("span",{children:r}),(0,a.jsx)("a",{className:tZ.yellow,href:`${tP}`,target:"_blank",rel:"noopener noreferrer",children:i}),(0,a.jsx)("span",{children:o})]})},tq=e=>{let{isAccountBan:t=!1,isSelf:l=!1}=e;(0,t$.Z)({title:t?"账号已被封禁":"违规处罚说明",confirmBtnText:"知道了",otherProps:{onlyConfirmButton:!0,renderContent:()=>t?(0,a.jsx)(tK,{isSelf:l}):(0,a.jsx)(tG,{isSelf:l})}})},tQ=e=>{let{title:t,content:l}=e;(0,t$.Z)({title:t,confirmBtnText:"知道了",otherProps:{onlyConfirmButton:!0,renderContent:()=>(0,a.jsx)(tY,{content:l})}})};var tX=new eP.h({personalRiskRemindBarShow:{eventName:"personal_risk_remind_bar_show",params:{enter_from:"",remind_type:"",is_skip:!1,warning_text:"",author_id:""}},personalRiskRemindBarClick:{eventName:"personal_risk_remind_bar_click",params:{enter_from:"",remind_type:"",warning_text:"",author_id:""}}});let tJ=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M14.667 8A6.667 6.667 0 1 1 1.334 8a6.667 6.667 0 0 1 13.333 0zM8 4.667c-.366 0-.662.3-.657.666l.05 3.401a.608.608 0 0 0 1.215 0l.05-3.4A.657.657 0 0 0 8 4.666zm.734 6.066a.733.733 0 1 0-1.467 0 .733.733 0 0 0 1.467 0z",fill:"#FE2C55"})}))),t0=e=>{let{punishRemindInfo:t,uid:l}=e,{prompt_bar:n,punish_content:r,punish_title:i,ban_type:o}=t,{content:s,link_index:d,link_length:u}=n||{},c=d>0?s.slice(0,d):s,v=d>0?s.slice(d,d+u):"",m=(0,tp.x)((()=>{tX.sendLog("personalRiskRemindBarShow",{enter_from:(0,tn.vM)(),remind_type:String(o),warning_text:null==n?void 0:n.content,is_skip:!!(d>0&&v),author_id:l})}).bind(null));return(0,a.jsxs)("div",{className:tZ.notice,ref:m,children:[(0,a.jsx)(tJ,{}),(0,a.jsx)("span",{className:tZ.noticeText,children:c}),!!(d>0&&v)&&(0,a.jsx)("span",{className:tZ.detailButton,onClick:()=>{tX.sendLog("personalRiskRemindBarClick",{enter_from:(0,tn.vM)(),remind_type:String(o),warning_text:null==n?void 0:n.content,author_id:l}),tQ({title:i,content:r})},children:v})]})},t1=e=>{let{desc:t,isFuzzyAuthor:l=!1,descExtra:n}=e,[r,i]=(0,s.useState)(!1),d=null==t?void 0:t.split("\n");if(1===d.length&&d[0].length<=30)return(0,a.jsx)(q.Z,{text:t,textExtra:n,enterMethod:"signature"});let u=(0,ea.i)(d.join(" "),30);return u.length<=30?(0,a.jsx)(q.Z,{text:u,textExtra:n,enterMethod:"signature"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:tf.descContainer,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[(0,a.jsx)(q.Z,{text:u,textExtra:null==n?void 0:n.filter(e=>e.start<=40).map(e=>(0,M._)((0,o._)({},e),{end:31<=(null==e?void 0:e.end)&&(null==e?void 0:e.end)<=33?33:null==e?void 0:e.end})),enterMethod:"signature"}),(0,a.jsx)("div",{className:tf.moreContainer,children:l?(0,a.jsx)("span",{onClick:e=>{var t,l,n;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,Q.default)({success:async()=>{window.location.reload()},enterMethod:"",headerText:"登录后查看全部简介",next:`https://${null===(n=window)||void 0===n?void 0:null===(l=n.location)||void 0===l?void 0:l.host}`})},className:tf.login,children:"登录后查看更多"}):(0,a.jsx)("span",{className:tf.more,children:"更多"})}),!l&&r&&(0,a.jsx)("p",{className:tf.moreDesc,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:(0,a.jsx)(q.Z,{text:t,textExtra:n})})]})})},t2=e=>{var t,l,n,r;let{lastdate:i,isHideImpInfo:o}=e,{nickname:d,desc:u,descExtra:c,followingCount:v,mplatformFollowersCount:m,mplatformFollowersCountStr:h,totalFavorited:p,totalFavoritedStr:g,hideTotalFavorited:_,followStatus:x,customVerify:w,enterpriseVerifyReason:C,uniqueId:y,secret:I,isBlock:b,isBlocked:j,isBan:k,ipLocation:N,generalPermission:S,punishRemindInfo:E,gender:L,age:T,school:M,schoolVisible:R,uid:P,isOverFollower:D,accountCertInfo:F,profileRankLabel:V,cardEntries:B}=null!==(l=e.userInfo)&&void 0!==l?l:{},U=tz(e.userInfo),O=null!==(n=(0,z._)())&&void 0!==n?n:{},{isSelf:H,updateFollowStatus:$}=(0,s.useContext)(Z),{userInfo:G,dispatch:en}=null!==(r=(0,eF.useUserInfoContext)())&&void 0!==r?r:{},er=(0,es._Q)(),{isLogin:ei,info:ea}=null!=G?G:{},[eu,em]=(0,s.useState)(m),[ef,eh]=(0,s.useState)(v),[ep,eg]=(0,s.useState)(!!(((null==O?void 0:null===(t=O.fuzzyAuthor)||void 0===t?void 0:t.whale_cut_fuzzy_author)||er)&&!ei)),[e_,ex]=(0,s.useState)(o),{liveList:ew,updateData:eC,loading:ey,requestId:eI}=(0,X.Z)(),eb=(0,J.B)(B||[])&&(null==O?void 0:O.liveReplayEntry);(0,s.useEffect)(()=>{ei&&H&&eC()},[ei,H,O]),(0,s.useEffect)(()=>{var e;eg(!!(((null==O?void 0:null===(e=O.fuzzyAuthor)||void 0===e?void 0:e.whale_cut_fuzzy_author)||er)&&!ei)),ex(!1)},[O,ei]);let ej=t=>{let l=t===ev.OK.follower,n=l?"粉丝":"关注";if(!ei){(0,Q.default)({headerText:`登录后查看${n}列表`,enterMethod:l?"fans_list":"follow_list",success:()=>{en({type:"updateUserInfo"})}});return}if(tH.sendLog(l?"clickFansCnt":"clickFollowCnt",{enter_from:H?"personal_homepage":"others_homepage"}),j||!H&&(null==S?void 0:S.following_follower_list_toast)===1||!H&&1===I&&[tL.NO,tL.REQUEST].includes(x)){ee.F.info(`由于该用户隐私设置，${n}列表不可见`);return}if(b){ee.F.info(`由于你已经拉黑对方，${n}列表不可见`);return}if(!H&&tW(e.userInfo)){ee.F.info(`账号违反社区规定，${n}列表不可见`);return}(0,ec.h)({title:t,followerCount:eu,followersCountStr:h,setFollowerCount:em,followingCount:ef,setFollowingCount:eh,dispatch:en,isSelf:H,isLogin:ei,currentUserUid:null==ea?void 0:ea.uid,currentUserInfo:e.userInfo,abtestData:O,selfInfo:G,enterPosition:ev.Hs.HomePage,logParams:{enter_from_merge:"personal_homepage",small_window_enter_method:"web_video_head_hover"}})};(0,s.useEffect)(()=>{let e=et.a.addCb(e=>{if(H)return;let{action:t}=e;"follow"===t&&(1!==I&&em(e=>e+1),null==$||$()),"unFollow"===t&&(4!==x&&em(e=>Math.max(0,e-1)),null==$||$())});return()=>{e()}},[I,$,x,H]);let ek=tj(e.userInfo),eN=M&&R!==Y.SchoolVisible.Self;return(0,s.useEffect)(()=>W.listen(W.EVENT.UpdateSelfPageFollowCount,e=>{let{action:t}=e;"unFollow"===t?eh(e=>e>0?e-1:e):(t="follow",eh(e=>e+1))}),[]),(0,a.jsxs)("div",{className:tf.baseInfoContainer,"data-e2e":"user-info",children:[(0,a.jsxs)("div",{className:tf.nameInfo,children:[(0,a.jsx)("h1",{className:tf.nickname,children:(0,a.jsx)(q.Z,{text:d})}),(0,a.jsx)(el.C,{className:tf.badge,accountCertInfo:F}),!!V&&(0,a.jsx)(eo.R,{uid:P,className:tf.monthlyRecommendUserTag,profileRankLabel:V}),H&&(null==O?void 0:O.hasUserEdit)?(0,a.jsx)(eH,{showIconStyle:!0,userInfo:e.userInfo,className:tf.editorClass}):null]}),(0,a.jsxs)("div",{className:tf.countInfo,children:[(0,a.jsxs)("div",{className:f()(tf.item,tf.clickable),"data-e2e":"user-info-follow",onClick:()=>ej(ev.OK.following),children:[(0,a.jsx)("div",{className:tf.title,children:"关注"}),(0,a.jsx)("div",{className:tf.count,children:e_?"":(0,ed.qe)(ef,ep)}),H&&(null==ew?void 0:ew.length)>0&&(0,a.jsx)(tI,{liveList:ew,loading:ey,onHover:eC,abTestData:O,requestId:eI})]}),(0,a.jsxs)("div",{className:f()(tf.item,tf.clickable),"data-e2e":"user-info-fans",onClick:()=>ej(ev.OK.follower),children:[(0,a.jsx)("div",{className:tf.title,children:"粉丝"}),(0,a.jsx)("div",{className:tf.count,children:e_?"":!H&&h?h:(0,ed.lN)({number:eu,isOver:D,uid:P,isSlice:ep})})]}),(H||1!==_)&&(0,a.jsxs)("div",{className:f()(tf.item),"data-e2e":"user-info-like",children:[(0,a.jsx)("div",{className:tf.title,children:"获赞"}),(0,a.jsx)("div",{className:tf.count,children:e_?"":!H&&g?g:(0,ed.qe)(p,ep)})]})]}),(0,a.jsxs)("p",{className:tf.otherInfo,children:[(0,a.jsxs)("span",{className:tf.uniqueId,children:["抖音号：",y]}),N&&(0,a.jsx)("span",{className:tf.location,children:N}),("number"==typeof L&&0!==L||"number"==typeof T&&-1!==T)&&(0,a.jsxs)("span",{className:tf.tag,children:[0!==L&&(0,a.jsx)(A.Z,{src:1===L?tV:tB,width:12,height:12,viewBox:"0 0 12 12",style:{marginRight:"4px"}}),-1!==T?(0,a.jsxs)("span",{children:[T,"岁"]}):(0,a.jsx)("span",{children:1===L?"男":"女"})]}),ek&&(0,a.jsx)("span",{className:tf.tag,children:ek}),eN&&(0,a.jsx)("span",{className:tf.tag,children:M})]}),i&&(0,a.jsxs)("p",{className:tf.lastdate,children:["最新作品发布时间：",K()(1e3*i).format("YYYY-MM-DD HH:mm")]}),u&&(0,a.jsx)("div",{className:tf.descInfo,children:(0,a.jsx)(t1,{desc:u,isFuzzyAuthor:ep,descExtra:(null==O?void 0:O.hasUserEdit)?c:void 0})}),eb?(0,a.jsx)(J.x,{className:tf.liveReplayEntry,authorId:P}):null,U&&(0,a.jsx)(t0,{punishRemindInfo:e.userInfo.punishRemindInfo,uid:P})]})};var t3=e=>{var t,l,n;let{userInfo:r,logId:i,lastdate:o,isHideImpInfo:d,hideMarginTop:u}=e,{isSelf:c}=null!==(t=(0,s.useContext)(Z))&&void 0!==t?t:{},{dispatch:v,userInfo:m}=null!==(l=(0,eF.useUserInfoContext)())&&void 0!==l?l:{},h=null!==(n=(0,z._)())&&void 0!==n?n:{},[p,g]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{g((0,eu.Jo)()||(0,eu.G1)())},[]),(0,a.jsxs)("div",{className:f()(tf.infoContainer,tf.hasNav,tf.newUi,tf.videoPerf,{[tf.marginTop]:u}),children:[(0,a.jsx)(eq,{userInfo:r,logId:i}),(0,a.jsx)(t2,{userInfo:r,lastdate:o,isHideImpInfo:d,abtestData:h}),(0,a.jsx)("div",{className:f()(tf.btns,{[tf.otherShowDownload]:p&&!c}),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:tf.moreShare,children:[!c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ta,{userInfo:r,dispatch:v,currentUserInfo:null==m?void 0:m.info,isLogin:null==m?void 0:m.isLogin,className:f()(tf.moreStyle,{[tf.moreGap]:0===r.secret})}),(0,a.jsx)(G.NoSSR,{children:(0,a.jsx)(tm,{userInfo:r,isTextType:!0,className:tf.shareClass})})]}),c?(0,a.jsx)(G.NoSSR,{children:(0,a.jsx)(en.Z,{pageIndex:"personal_homepage",classname:tf.trustLoginSwitch,iconPosition:"left",showHoverInfo:!0})}):null]}),(0,a.jsx)("div",{className:tf.midBtnContainer,children:!c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e9,{userInfo:r,className:tf.btnBgColor}),(0,a.jsx)(e7,{userInfo:r,className:tf.btnBgColor,type:"user"})]})}),(0,a.jsxs)("div",{className:tf.btnContainer,children:[(0,a.jsx)("div",{className:tf.follwImEdit,children:!c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e7,{userInfo:r,className:tf.btnBgColor,type:"user"}),(0,a.jsx)(e9,{userInfo:r,className:tf.btnBgColor})]})}),m.isLogin&&p&&(0,a.jsx)(er.eD,{hintText:"下载电脑客户端，桌面快捷访问",log:{enterFrom:"personal_homepage",type:"personal_homepage_button",channelId:ei.g.PersonalHomepage},isLogin:!0,className:tf.downloadBar,textContainerClassName:tf.downloadBarText,downloadHintClassName:tf.downloadHintClassName,downloadButtonClassNmae:tf.downloadButtonClassNmae,defaultShow:!1})]})]})})]})},t5=l("226834"),t6=l("223355"),t7=l("634740"),t4=l("372316");let t8=(0,s.createContext)({});var t9=l("71549"),le={tabBarContainer:"dI2pNNo6",sticky:"B8h_pGNH",inner:"DI9oJT5g",tipContainer:"CPrYemoO",tipText:"Qklav0OE",tabListContainer:"AyBrPWVq",tab:"v8QV_vp3",title:"InzHcQtz",count:"MNSB3oPV",icon:"oK5ZCaFJ",active:"ubdfnTQW",postContainer:"b43ohyJx"},lt=l("532537");let ll=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.714 16.714a1.286 1.286 0 0 0 2.572 0v-3.428h3.428a1.286 1.286 0 1 0 0-2.572h-3.428V7.286a1.286 1.286 0 0 0-2.572 0v3.428H7.286a1.286 1.286 0 1 0 0 2.572h3.428v3.428z",fill:"#FE2C55"})})));var ln={midInfoContainer:"Q0X46L79",unfollow:"RwcyFZgf",avatar:"yIyOGiT7",follow:"YdBrg9fs",chat:"nIJd0VPM"},lr=e=>{var t,l,n;let{userInfo:r}=e,{uid:i,followStatus:o,followerStatus:d}=r;(0,lt.h)();let{isSelf:u}=(0,s.useContext)(Z),{userInfo:c,dispatch:v}=null!==(n=(0,eF.useUserInfoContext)())&&void 0!==n?n:{},{isLogin:m}=null!=c?c:{},{follow:h,unFollow:p}=(0,eX.OM)({selfUid:null==c?void 0:null===(t=c.info)||void 0===t?void 0:t.uid,actionUid:i,defaultFollowerStatus:d,defaultFollowStatus:o,isLogin:!!m,onLoginSuccess:()=>null==v?void 0:v({type:"updateUserInfo"}),logExtraParams:{to_user_id:i,enter_from:(0,tn.mo)(),is_full_screen:(0,e2.r)()?"1":"0"}}),{followStatus:g,buttonType:_}=(0,eJ.r)({selfUid:null==c?void 0:null===(l=c.info)||void 0===l?void 0:l.uid,actionUid:i,defaultFollowerStatus:d,defaultFollowStatus:o}),x=_===eQ.TT.Active;return u?null:(0,a.jsxs)("div",{className:f()(ln.midInfoContainer,{[ln.unfollow]:x}),onClick:x?()=>{(0,e3.V)(g)?p():h()}:()=>{W.emit(W.EVENT.sendImUserMsg,{uid:r.uid,enterMethod:"im_private"})},children:[(0,a.jsx)("img",{className:ln.avatar,src:r.avatarUrl,alt:r.nickname}),x?(0,a.jsxs)("div",{className:ln.follow,children:[(0,a.jsx)(ll,{}),(0,a.jsx)("span",{children:"关注"})]}):(0,a.jsx)("span",{className:ln.chat,children:"私信"})]})},li=l("852664");let lo=e=>{let{abTestData:t}=e;return!(0,li.km)(78)},la=e=>{let{text:t=""}=e;return(0,a.jsx)(R.Tooltip,{className:le.tipContainer,position:"bottom",content:(0,a.jsx)("span",{className:le.tipText,children:t}),children:(0,a.jsx)(t4.Z,{})})},ls=e=>{var t,l;let n=null!==(l=(0,z._)())&&void 0!==l?l:{},{userInfo:{isLogin:r=!1}={}}=(0,eF.useUserInfoContext)()||{},{userAwemeCount:i=-1,userFavoriteCount:o=-1}=(0,s.useContext)(t8),d=!!(((null==n?void 0:null===(t=n.fuzzyAuthor)||void 0===t?void 0:t.whale_cut_fuzzy_author)||(0,es._Q)())&&!r),{userInfo:u,currentTab:c,setCurrentTab:v}=e,{showFavoriteList:m,favoritePermission:h}=u,{isSelf:p}=(0,s.useContext)(Z),g=!p&&!m||p&&1===h,_=new Map([["post","user-work-tab"],["like","user-like-tab"],["favorite_collection","user-favorite-tab"],["user-history-tab","user-history-tab"],["watch_later","user-watchlater-tab"]]),x=[{title:"作品",key:"post",modeFrom:"userPost",count:i},{title:"推荐",key:"recommend",modeFrom:"userRecommend",count:-1},{title:"喜欢",key:"like",modeFrom:"userLike",count:o,lock:g},{title:"收藏",key:"favorite_collection",modeFrom:"userCollection",count:-1,lock:!0,lockText:"只能看到自己收藏的列表",hidden:!p},{title:"观看历史",key:"record",modeFrom:"userRecord",lock:!0,count:-1,hidden:!p},{title:"稍后再看",key:"watch_later",modeFrom:"watch_later",lock:!0,count:-1,hidden:!p},{title:"我的预约",key:"my_appointment",modeFrom:"my_appointment",lock:!0,count:-1,hidden:!p},{title:"AI 笔记",key:"ai_note",modeFrom:"ai_note",lock:!0,count:-1,hidden:!p||!lo({abTestData:n})}];(0,s.useEffect)(()=>{if(!!p)W.emit(W.EVENT.selfPageCountUpdate,{post:i,like:o})},[i,o,p]);let w=e=>{v(e),(0,t6.d)((0,t9.V)(),0,500),tH.sendLog("changeProfileTab",{enter_from:(0,e1.yW)(),tab_name:e,to_user_id:null==u?void 0:u.uid})};return(0,a.jsx)(R.Tabs,{className:le.tabListContainer,activeKey:c,onChange:e=>w(e),children:x.filter(e=>!e.hidden).map(e=>{let t=(0,ed.qe)(Number(e.count));return(0,a.jsx)(R.TabPane,{itemKey:e.key,"data-e2e":_.get(e.key)||"",tab:(0,a.jsxs)("div",{className:f()(le.tab,{[le.active]:c===e.key}),children:["post"===e.key?(0,a.jsxs)("h2",{className:le.postContainer,children:[(0,a.jsx)("span",{className:le.title,children:e.title}),-1!==e.count&&(0,a.jsx)("span",{className:le.count,"data-e2e":"user-tab-count",children:d&&e.count>=100?`${t}+`:t})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:le.title,children:e.title}),-1!==e.count&&(0,a.jsx)("span",{className:le.count,"data-e2e":"user-tab-count",children:d&&e.count>=100?`${t}+`:t})]}),e.lock&&(0,a.jsx)("div",{className:le.icon,"data-e2e":"user-tab-icon",children:e.lockText?(0,a.jsx)(la,{text:e.lockText}):(0,a.jsx)(t4.Z,{})})]})},e.key)})})};var ld=e=>{var t;let{userInfo:l,currentTab:n,setCurrentTab:r,children:i,topNavHeight:o=(0,t7.C)()}=e;return t=(0,z._)(),(0,a.jsx)(t5.Z,{topOffset:-o,children:e=>{let{style:t,isSticky:o}=e;return(0,a.jsx)("div",{className:f()(le.tabBarContainer,{[le.sticky]:o}),style:tN(o,t),id:"user-tabbar",children:(0,a.jsxs)("div",{className:le.inner,children:[(0,a.jsx)(ls,{userInfo:l,currentTab:n,setCurrentTab:r}),o&&(0,a.jsx)(lr,{userInfo:l}),i]})})}})},lu=l("589808"),lc=l("656126"),lv=l("309931"),lm=l("490759");let lf=e=>(0,a.jsx)(lm.ConfirmModal,(0,o._)({},e));var lh=lm.ConfirmModal;let lp=new eP.h({pageView:{eventName:"page_view",params:{url:"",url_path:"",enter_from:"",link_from:"",theme:"light",is_topknot:0,from_push:0,seo_vids:"",physical_screen_num:0,physical_screen_info:"",open_from_page:"",multi_window_order:"",multi_window_open_from:"",sidebar_status:"open"}},pageViewV2:{eventName:"page_view_v2",params:{url:"",url_path:"",enter_from:"",link_from:"",theme:"light",is_topknot:0,from_push:0,seo_vids:"",physical_screen_num:0,physical_screen_info:"",open_from_page:"",multi_window_order:"",multi_window_open_from:""}},pageStayTime:{eventName:"page_stay_time",params:{url:"",url_path:"",enter_from:"",duration:0,is_visible:1,sidebar_status:"open",link_from:"",is_small_window:"0"}},aiSearchEntranceShow:{eventName:"ai_search_entrance_show",params:{enter_from:"",enter_from_merge:""}},aiChatButtonShow:{eventName:"ai_chat_button_show",params:{enter_from:"",ai_chat_button_position:""}},enterPersonalHomepage:{eventName:"enter_personal_homepage",params:{enter_method:"",enter_from:"",from_gid:"",tab_name:"",is_personal_panel_video:0}},enterPersonalDetail:{eventName:"enter_personal_detail",params:{to_user_id:"",is_private:0,enter_method:"",enter_from:"",from_gid:"",is_full_screen:"0",tab_name:"",event_page:"",enter_from_merge:"",relation:void 0}},changeProfileTab:{eventName:"change_profile_tab",params:{enter_from:"",to_user_id:"",tab_name:""}},follow:{eventName:"follow",params:{enter_from:"",to_user_id:"",item_duration_ms:0}},unfollow:{eventName:"unfollow",params:{enter_from:"",to_user_id:""}},collectionCoverShow:{eventName:"video_cover_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:""}},collectionCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:""}},clickFavoriteCollection:{eventName:"click_favorite_collection",params:{author_id:"",group_id:"",content:"video"}},openRecordShow:{eventName:"open_record_show",params:{}},openRecordClick:{eventName:"open_record_click",params:{}},clickMoreRecord:{eventName:"click_more_record",params:{}},recordCardShow:{eventName:"record_card_show",params:{}},closeRecordShow:{eventName:"close_record_show",params:{}},closeRecordClick:{eventName:"close_record_click",params:{}},clearAllRecord:{eventName:"clear_all_record",params:{}},clearAllRecordShow:{eventName:"clear_all_record_show",params:{}},creatorManageEntranceShow:{eventName:"creator_manage_entrance_show",params:{type:"compilation"}},creatorManageEntranceClick:{eventName:"creator_manage_entrance_click",params:{type:"compilation"}},managePopupShow:{eventName:"manage_popup_show",params:{tab_name:"",sub_tab_name:"",item_cnt:0}},managePopupConfirm:{eventName:"manage_popup_confirm",params:{tab_name:"",sub_tab_name:"",item_cnt:0,icon_name:""}},managePopupCancel:{eventName:"manage_popup_cancel",params:{tab_name:"",sub_tab_name:"",item_cnt:0}},userCacheInvalid:{eventName:"user_cache_invalid",params:{message:""}}}),lg=e=>{let{isRetry:t=!1,needRetryCount:l=0,itemName:n="选项",operation:r="操作",count:i=0,addedDesc:o=""}=e;return t&&l?{title:`有 ${l} 个${n}未成功${r}`,cancelBtnText:`暂不${r}`,confirmBtnText:`继续${r}`}:{title:`确认${r} ${i} 个${n}, ${r}后不可恢复${o}`,cancelBtnText:`暂不${r}`,confirmBtnText:`确认${r}`}};function l_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{maxSelectedCount:t=100,operate:l,operateDesc:n={operation:"操作",itemName:"选项"},customModalDesc:r,addDescription:i,onManageEndCallback:a,tabName:d="post",subTabName:u="video",iconName:c="",isListSelectable:v,setIsListSelectable:m,onSessionMultiEnd:f}=e,[h,p]=(0,s.useState)(!1),[g,_]=(0,s.useState)(0),[x,w]=(0,s.useState)([]),C=(0,s.useRef)(!1),[y,I]=(0,s.useState)(!1),[b,j]=(0,s.useState)("initial"),[k,N]=(0,s.useState)([]),[S,E]=(0,s.useState)(!1),[L,T]=(0,s.useState)(!1),R=(0,s.useRef)(()=>{}),P=(0,s.useCallback)(e=>p(e),[]);(0,s.useEffect)(()=>{p(y||!v)},[y,v]);let D=(0,s.useCallback)(e=>{m(e),!e&&(_(0),w([]),N([]),j("initial"),p(!1),I(!1),C.current=!1)},[m]);(0,s.useEffect)(()=>{!v&&D(!1)},[v]);let A=(0,s.useCallback)(e=>{var t;w(e),_(null!==(t=e.length)&&void 0!==t?t:0)},[]),F=(0,s.useCallback)(e=>{I(e),e&&lp.sendLog("managePopupShow",{item_cnt:g,tab_name:d,sub_tab_name:u})},[I,g,d,u]),V=(0,s.useCallback)(e=>{R.current=e},[]);(0,s.useEffect)(()=>{!y&&(j("initial"),C.current=!1)},[y]),(0,s.useEffect)(()=>{let e=()=>{D(!1)},t=W.listen(W.EVENT.openImAwemeModal,e),l=W.listen(W.EVENT.openNoticeAwemeModal,e);return()=>{null==t||t(),null==l||l()}},[D]),(0,s.useEffect)(()=>{let e=W.listen(W.EVENT.feedbackVisibleChange,e=>{p(null!=e&&e)});return()=>{e()}},[]);let B=(0,s.useCallback)(()=>{var e;null==R||null===(e=R.current)||void 0===e||e.call(R),D(!1),null==a||a({manageCount:g-k.length})},[a,D,g,null==k?void 0:k.length]),U=(0,s.useCallback)(async()=>{var e;let{isSuccess:t=!1,fatalIds:r=[],isFailForRisk:i=!1,statusCode:o=-1,statusMsg:a="操作失败, 请稍后重试"}=null!==(e=await (null==l?void 0:l(x)))&&void 0!==e?e:{},{operation:s="取消",itemName:d="视频"}=null!=n?n:{};if(t){ee.F.info(`${s}成功`),D(!1),B();return}if(0!==o){ee.F.info(a),j("initial"),D(!1),B();return}C.current||i?(r.length>0&&ee.F.info(`有${r.length}个${d}因风险因素未能成功${s}`),D(!1),B()):(j("retry"),N(r))},[l,D,B,n,x]),O=(0,s.useCallback)(()=>{var e;if(!y)return null;let t=null!=r?r:lg;return lf((0,M._)((0,o._)({},t((0,M._)((0,o._)({count:g,needRetryCount:k.length,isRetry:"retry"===b||C.current},n),{addedDesc:null!==(e=null==i?void 0:i(x))&&void 0!==e?e:"",items:x}))),{onCancel:()=>{if("loading"!==b)"retry"===b&&B(),"initial"===b&&lp.sendLog("managePopupCancel",{item_cnt:g,tab_name:d,sub_tab_name:u}),I(!1)},onConfirm:async()=>{if("loading"!==b)"retry"===b&&(C.current=!0),"initial"===b&&lp.sendLog("managePopupConfirm",{item_cnt:g,tab_name:d,sub_tab_name:u,icon_name:c}),j("loading"),await U()}}))},[y,g,I,U,b,B,k,x,r,i,n,d,u,c]);return{isListSelectable:v,changeListSelectable:D,selectedCount:g,maxSelectedCount:t,selectItems:x,setSelectItems:w,changeSelectedItems:A,onSessionMultiEnd:f,showConfirm:y,isSelectDisabled:h,renderConfirmModal:O,changeShowConfirm:F,setResetScrollList:V,resetScrollList:R.current,updateIsSelectDisabled:P,indeterminate:S,setIndeterminate:E,checkAll:L,setCheckAll:T,retryItemIds:k}}let lx=()=>(0,s.createContext)({}),lw=lx(),lC=()=>(0,s.useContext)(lw);var ly={post:"N8dcwU0m",timeLineButtonAugment:"ytXYs7OS",header:"IJIRypOo",noMarginBottom:"WTZ6367L",headerBg:"IhNBb4kh",tabs:"hALBLvLw",tabItem:"KTylVXFk",iconWrapper:"q_sjHWO0",iconLock:"y9gEH1Bd",iconActive:"teXolfMq",tool:"G9BsWPAe",list:"pCVdP6Bb",default:"T9ZSs8iN",divider:"gZHMlG7M",createMix:"Co6FPke4",createMixIc:"s0f7CRBM"},lI=l("27091"),lb=l("905003"),lj=l("53659"),lk=l("565822"),lN=l("497362"),lS=l("51996"),lE=l("940039"),lL=l("269048"),lT=l("433294"),lM=l("657055");l("527785");var lR=(e,t)=>e.reduce((e,l)=>(e.set(t(l),l),e),new Map),lP=e=>{let{dataList:t,setScrollData:l,onSort:n,getSortId:r}=e,[i,o]=(0,s.useState)(lR(t,r)),[a,d]=(0,s.useState)(t.map(e=>r(e))),[u,c]=(0,s.useState)(!1),v=(0,s.useRef)(!1),m=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(o(lR(t,r)),v.current){m.current=!0;return}d(t.map(e=>r(e)))},[t]);let f=async e=>{var t,i;let{active:o,over:s}=e;if(!(null==o?void 0:o.id)||!(null==s?void 0:s.id)||o.id===s.id)return;let u=a.indexOf(o.id),f=a.indexOf(s.id),h=(0,lN.Rp)(a,u,f),p=0,g=null;l(e=>{var t,l,n;p=null===(l=e.dataList)||void 0===l?void 0:null===(t=l.findIndex)||void 0===t?void 0:t.call(l,e=>r(e)===o.id),g=null===(n=e.dataList)||void 0===n?void 0:n[p];let i=(0,lN.Rp)(e.dataList,u,f);if(m.current){m.current=!1;let t=new Set(h);e.dataList.map(e=>r(e)).filter(e=>!t.has(e)).map(e=>h.push(e))}return{statusCode:e.statusCode,dataList:i}}),d(h),v.current=!1,c(!0),null==n||null===(i=n(o.id,h,p,g))||void 0===i||null===(t=i.then)||void 0===t||t.call(i,e=>{if(c(!1),e)return;let t=[];l(e=>{let l=(0,lN.Rp)(e.dataList,f,u);return t=l.map(e=>r(e)),{statusCode:e.statusCode,dataList:l}}),d(t)})};return{dataMap:i,items:a,dragEndEvent:f,onSortStart:()=>{v.current=!0},isSortingRef:v,isSortFetching:u}},lD=e=>{let{onSort:t,getSortId:l,customDataListCtx:n}=e,{sortDataList:r,setSortDataList:i}=(0,s.useContext)(n),[o,a]=(0,s.useState)(lR(r,l)),[d,u]=(0,s.useState)(r.map(e=>l(e))),[c,v]=(0,s.useState)(!1),m=(0,s.useRef)(!1),f=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(a(lR(r,l)),m.current){f.current=!0;return}u(r.map(e=>l(e)))},[r]);let h=async e=>{var n,r;let{active:o,over:a}=e;if(!(null==o?void 0:o.id)||!(null==a?void 0:a.id)||o.id===a.id)return;let s=d.indexOf(o.id),c=d.indexOf(a.id),h=(0,lN.Rp)(d,s,c),p=0,g=null;i(e=>{var t;p=null==e?void 0:null===(t=e.findIndex)||void 0===t?void 0:t.call(e,e=>l(e)===o.id),g=null==e?void 0:e[p];let n=(0,lN.Rp)(e,s,c);if(f.current){f.current=!1;let t=new Set(h);e.map(e=>l(e)).filter(e=>!t.has(e)).map(e=>h.push(e))}return n}),u(h),m.current=!1,v(!0),null==t||null===(r=t(o.id,h,p,g))||void 0===r||null===(n=r.then)||void 0===n||n.call(r,e=>{if(v(!1),e)return;let t=[];i(e=>{let n=(0,lN.Rp)(e,c,s);return t=n.map(e=>l(e)),n}),u(t)})};return{dataMap:o,items:d,dragEndEvent:h,onSortStart:()=>{m.current=!0},isSortingRef:m,isSortFetching:c}};let lA=(0,s.createContext)(!1),lF=e=>{let{disabled:t,children:l}=e;return(0,a.jsx)(lA.Provider,{value:t,children:l})},lV=()=>(0,s.useContext)(lA),lB=s.memo(function(e){let{sortId:t,itemClassName:l,index:n,ItemCompnent:r,renderItem:i,itemInfo:d,directRenderItem:u,withMask:c,isHighLight:v,getMaskIndex:m,isSortFetching:h,getItemDragDisabled:p}=e,[g,_]=(0,s.useState)(v),x=lV(),{setNodeRef:w,attributes:C,listeners:y,transform:I}=(0,lN.nB)({id:t,disabled:x||h||(null==p?void 0:p(d))}),b={transform:lE.ux.Transform.toString(I)},[j,k]=(0,s.useState)(null);return((0,s.useEffect)(()=>{if(!j)return;let e=e=>e.stopPropagation();return null==j||j.addEventListener("mousedown",e),null==j||j.addEventListener("mouseup",e),null==j||j.addEventListener("mousemove",e),null==j||j.addEventListener("mouseover",e),()=>{null==j||j.removeEventListener("mousedown",e),null==j||j.removeEventListener("mouseup",e),null==j||j.removeEventListener("mousemove",e),null==j||j.removeEventListener("mouseover",e)}},[j]),u)?i(d,n,d.scrollLogPb):((0,s.useEffect)(()=>{if(_(v),v){let e=setTimeout(()=>{_(!1)},3e3);return()=>{clearTimeout(e)}}},[v]),(0,a.jsx)("li",{className:f()(l,lT.default.item,lT.default.sortItem,{[lT.default.coveredMask]:c,[lT.default.highLight]:g&&v}),children:(0,a.jsxs)("div",(0,M._)((0,o._)({ref:w},C),{style:b,children:[r?(0,a.jsx)(r,{itemInfo:d,index:n,logPb:d.scrollLogPb}):i(d,n,d.scrollLogPb),null==c?void 0:c(d,null==m?void 0:m(d,n)),!x&&(0,a.jsx)("div",{ref:k,children:(0,a.jsx)(ep.z,(0,o._)({svg:(0,a.jsx)(lL.Z,{}),className:lT.default.dragBtn},y))})]}))}))}),lU=e=>{var t;return null!==(t=null==e?void 0:e.awemeId)&&void 0!==t?t:null==e?void 0:e.mixId},lO=e=>{let{dataList:t,setScrollData:l,itemClassName:n,ItemCompnent:r,renderItem:i,withMask:o,directRenderItem:d,highLightAwemeId:u,getMaskIndex:c,customDataListCtx:v,useSortListHook:m,onSort:f,getSortId:h=lU,getItemDragDisabled:p}=e,{dataMap:g,items:_,dragEndEvent:x,onSortStart:w,isSortFetching:C}=m({dataList:t,setScrollData:l,onSort:f,getSortId:h,customDataListCtx:v}),y=lV();return(0,a.jsx)(lk.LB,{onDragStart:w,onDragEnd:x,modifiers:[lS.lv],children:(0,a.jsx)(lN.Fo,{items:_,disabled:y,children:_.filter(e=>g.get(e)).map((e,t)=>{let l=g.get(e);return(0,s.createElement)(lB,{itemClassName:n,index:t,ItemCompnent:r,renderItem:i,withMask:o,getMaskIndex:c,itemInfo:l,key:e,directRenderItem:d,isHighLight:u&&u===(null==l?void 0:l.awemeId),sortId:e,isSortFetching:C,getItemDragDisabled:p})})})})},lH=e=>{let{customDataListCtx:t}=e;return t?(0,a.jsx)(lO,(0,M._)((0,o._)({},e),{customDataListCtx:t,useSortListHook:lD})):(0,a.jsx)(lO,(0,M._)((0,o._)({},e),{useSortListHook:lP}))};var lW=s.forwardRef(function(e,t){return(0,a.jsx)(lM.Z,(0,M._)((0,o._)({},e),{ref:t,SortComponent:lH}))}),lz=l("4168"),lZ=l("217110"),l$=l("674363");l("675373");var lK=l("576660"),lG=l("842602"),lY=l("66863");let{COMMON_SEARCH_PARAMS:lq}=lK||{};function lQ(e){let{status_msg:t="",status_code:l=-1,fatal_ids:n=[],unprocessed_ids:r=[]}=e;return{fatalIds:n,statusMsg:t,statusCode:l,unprocessedIds:r}}async function lX(e){let{mixIds:t}=e,l=await (0,lY.v_)("/web/api/mix/destroy/multi",(0,o._)({},lq),{mix_ids:t},{});return(0,lG.RL)(l,lQ)}async function lJ(e){let{mixIds:t}=e,l=t.split(","),n=[];for(let e=0;e<l.length;e+=50){let t=await lX({mixIds:l.slice(e,e+50).join(",")});n.push(t)}let r={fatalIds:[],statusCode:-1,statusMsg:"服务异常，请稍后再试"};return n.some(e=>0===e.statusCode)?(r.statusCode=0,r.statusMsg="",n.forEach(e=>{var t;(null===(t=e.fatalIds)||void 0===t?void 0:t.length)&&(r.fatalIds=r.fatalIds.concat(e.fatalIds))})):(r.statusCode=n[0].statusCode,r.statusMsg=n[0].statusMsg),r}async function l0(e){let{mixIds:t,setStatus:l}=e,n=await (0,lY.v_)("/web/api/mix/update/status/multi",(0,o._)({},lq),{mix_ids:t,set_status:l},{});return(0,lG.RL)(n,lQ)}async function l1(e){let{mixIds:t,setStatus:l}=e,n=t.split(","),r=[];for(let e=0;e<n.length;e+=50){let t=await l0({mixIds:n.slice(e,e+50).join(","),setStatus:l});r.push(t)}let i={unprocessedIds:[],fatalIds:[],statusCode:-1,statusMsg:"服务异常，请稍后再试"};return r.some(e=>0===e.statusCode)?(i.statusCode=0,i.statusMsg="",r.forEach(e=>{var t,l;(null===(t=e.fatalIds)||void 0===t?void 0:t.length)&&(i.fatalIds=i.fatalIds.concat(e.fatalIds)),(null===(l=e.unprocessedIds)||void 0===l?void 0:l.length)&&(i.unprocessedIds=i.unprocessedIds.concat(e.unprocessedIds))})):(i.statusCode=r[0].statusCode,i.statusMsg=r[0].statusMsg),i}function l2(e){var t;let{status_code:l=-1,extra:n,status_msg:r=""}=e;return{statusCode:l,statusMsg:r,logId:null!==(t=null==n?void 0:n.logid)&&void 0!==t?t:""}}async function l3(e){let{currentMixId:t,mixIdAfterCurrent:l}=e,n=await (0,lY.v_)("/web/api/mix/order/update",(0,o._)({},lq),{mix_id_a:t,mix_id_b:l},{});return(0,lG.RL)(n,l2)}async function l5(e){let{mixId:t,mixName:l,mixDesc:n,mixCover:r}=e,i=await (0,lY.v_)("/web/api/mix/update",(0,o._)({},lq),{mix_id:t,mix_name:l,mix_desc:n,mix_cover:r},{});return(0,lG.RL)(i,l2)}function l6(e){var t;let{status_code:l=-1,status_msg:n="",mix_id:r="",extra:i}=e;return{statusCode:0===l&&r?0:l||4,statusMsg:n,mixId:r,logId:null!==(t=null==i?void 0:i.logid)&&void 0!==t?t:""}}async function l7(e){let{mixName:t,mixDesc:l,mixCover:n}=e,r=await (0,lY.v_)("/web/api/mix/create",(0,o._)({},lq),{mix_name:t,mix_desc:l,mix_cover:n},{});return(0,lG.RL)(r,l6)}async function l4(e){let{mixId:t,addItemIds:l,itemIds:n,delItemIds:r}=e,i=await (0,lY.v_)("/web/api/mix/item/editlist",(0,o._)({},lq),{mix_id:t,add_item_ids:l,item_ids:n,del_item_ids:r},{});return(0,lG.RL)(i,l2)}var l8=l("312369"),l9=l("625822"),ne=l("389350"),nt=l.n(ne),nl=l("175018"),nn=l("877639"),nr=l.n(nn),ni=l("302461");let no=(e,t,l)=>{let{scrollTop:n,scrollLeft:r,clientWidth:i,clientHeight:o}=l;return"down"===e?{x:t.x+t.width,y:o+n}:"up"===e?{x:t.x+t.width,y:n}:"left"===e?{x:r,y:t.y+t.height}:"right"===e?{x:i+r,y:t.y+t.height}:{x:t.x,y:t.y}},na=(e,t)=>Math.abs(e.x-t.x)<=(e.width+t.width)/2&&Math.abs(e.y-t.y)<=(e.height+t.height)/2,ns=(e,t)=>{var l;let{top:n,left:r}=null===(l=t.getBoundingClientRect)||void 0===l?void 0:l.call(t);return{x:e.clientX-r,y:e.clientY-n}},nd=(e,t)=>({x:(t.x+e.x)/2,y:(t.y+e.y)/2,width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}),nu=(e,t,l,n)=>e.map(e=>{let{clientHeight:r,clientWidth:i}=t,{scrollTop:o,scrollLeft:a}=l,s=e.y+e.height>o+n.top,d=Math.max(0,o+n.top-e.y),u=e.y<o+r-n.bottom,c=Math.max(0,e.y+e.height-o-r),v=e.x+e.width>a+n.left,m=Math.max(0,a+n.left-e.x),f=e.x<a+i-n.right,h=Math.max(0,e.x+e.width-a-i);return{item:e.item,desc:e.item.desc,isShow:s&&u&&v&&f,rect:{x:e.x+e.width/2+m/2-h/2,y:e.y+e.height/2+d/2-c/2,height:e.height-d-c,width:e.width-m-h}}});var nc=l("948375"),nv={container:"tDhX1mxI",mask:"T9Ou0Dw6",checkBox:"jUpngcEO",disableIcon:"qew8kP8R",descIcon:"MTb1bvso",maskDisabled:"QsVKqT5l",fullMask:"BYDc0v52",count:"i3W5Xxib",disabledDescription:"OKreIcnS",tip:"SNU0zi85",tipText:"MYjZAzM9",coverShadowLayer:"iZX3iFDw"};let nm=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:15,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.501 1.75a6.25 6.25 0 1 0 0 12.5 6.25 6.25 0 0 0 0-12.5zm-.954 4.103c-.191.201-.296.48-.296.772a.625.625 0 0 1-1.25 0c0-.583.208-1.18.641-1.634.441-.463 1.079-.741 1.859-.741s1.418.278 1.859.74c.433.456.641 1.052.641 1.635 0 .995-.642 1.587-1.077 1.988l-.06.056c-.482.447-.738.726-.738 1.206h-1.25c0-1.067.663-1.682 1.119-2.105l.018-.017c.504-.468.738-.712.738-1.128 0-.292-.105-.57-.296-.772C8.27 5.66 7.97 5.5 7.5 5.5s-.77.16-.954.353zm1.735 5.428a.781.781 0 1 1-1.562 0 .781.781 0 0 1 1.562 0z",fill:"#fff",fillOpacity:".34"})}))),nf=e=>{let{maskShadowStyle:t={},maskClassName:l="",isSelected:n=!1,onClickCard:r,info:i,disabled:o=!1,disabledDesc:d="",disabledTipType:u="icon",disabledToastInfo:c="",index:v}=e,m=(0,s.useRef)(null),h="number"==typeof v,p=o&&!n,g=p&&c,_=p&&d&&!h;return(0,a.jsx)("div",{className:nv.container,children:(0,a.jsx)("div",{className:f()(nv.mask,{[nv.maskDisabled]:o&&!n}),onClick:e=>{g&&ee.F.info(c),i&&(null==r||r(e,i))},children:(0,a.jsxs)("div",{className:f()(nv.coverShadowLayer,l),style:t,children:[h&&(0,a.jsx)("div",{className:f()(nv.fullMask,nv.count),children:v}),_?"icon"===u?(0,a.jsx)("div",{className:nv.disableIcon,children:(0,a.jsx)(R.Tooltip,{position:"bottomRight",content:(0,a.jsx)("span",{className:nv.tipText,children:d}),getPopupContainer:()=>m.current||document.body,children:(0,a.jsx)("div",{className:nv.tip,ref:m,children:(0,a.jsx)(A.Z,{src:nm,className:nv.descIcon,viewBox:"0 0 16 16",height:16,width:16})})})}):"toast"===u?(0,a.jsx)("div",{className:f()(nv.fullMask,nv.disabledDescription),children:d}):null:null,(0,a.jsx)(R.Checkbox,{disabled:o&&!n,checked:n,className:nv.checkBox})]})})})},nh=e=>(0,a.jsx)(nf,(0,o._)({},e)),np=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{containerEl:t,scrollEl:l}=e,n=(0,s.useRef)(t),r=(0,s.useRef)(l);return(0,s.useEffect)(()=>{n.current=null!=t?t:document.querySelector("#user_detail_element"),r.current=null!=l?l:(0,t9.V)()},[t,l]),{containerEleRef:n,scrollEleRef:r}};function ng(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lw,{getItemId:l,dataList:n=[],containerEleRef:r,scrollEleRef:i,stickyArea:o,getColumnCount:a,firstItem:d,itemMargin:u,isSupportMulti:c=!0,getItemSelectedDisabled:v,maskShadowStyle:m,getAllItems:f}=e,{isListSelectable:h,maxSelectedCount:p=0,selectedCount:g=0,changeSelectedItems:_,onSessionMultiEnd:x,selectItems:w=[],setIndeterminate:C,setCheckAll:y}=(0,s.useContext)(t),I=(0,s.useRef)({}),[b,j]=(0,s.useState)(""),k=(0,s.useRef)(!1),N=(0,s.useRef)(!1);(0,s.useEffect)(()=>{!h&&(k.current=!1,N.current=!1,j(""))},[h]),(0,s.useEffect)(()=>{if(!k.current&&l){let e={};null==w||w.forEach(t=>e[l(t)]=!0),I.current=e}},[w,l]);let S=(0,s.useCallback)(function(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l?null!==(t=null==n?void 0:null===(e=n.filter)||void 0===e?void 0:e.call(n,e=>{var t;return null==r?void 0:null===(t=r.includes)||void 0===t?void 0:t.call(r,null==l?void 0:l(e))}))&&void 0!==t?t:[]:[]},[n,l]),E=(0,s.useCallback)(e=>{let{itemsKeyInSelectedArea:t,isNotInMulti:l=!1,allSelect:n=!1,allDel:r=!1}=e;k.current=!l;let i=nt()(I.current),o=[];!1===n&&!1===r?t.forEach(e=>{i[e]?delete i[e]:o.push(e)}):!0===n?t.forEach(e=>{!i[e]&&o.push(e)}):!0===r&&t.forEach(e=>{delete i[e]});let a=Object.keys(i);(null==a?void 0:a.length)+(null==o?void 0:o.length)>p&&!N.current&&(nl.F.info(`单次批量操作已达${p}个上限哦～`),N.current=!0,setTimeout(()=>{N.current=!1},3e3));let s=S([...a,...o.slice(0,p-a.length)]);s=s.filter(e=>{var t;return!(null==v?void 0:null===(t=v(e))||void 0===t?void 0:t.disabled)}),null==_||_(s)},[_,p,S,v]),L=(0,s.useCallback)(e=>{var t,n;return(null===(n=w.filter)||void 0===n?void 0:null===(t=n.call(w,t=>(null==l?void 0:l(t))===e))||void 0===t?void 0:t.length)>0},[w,l]),T=(0,s.useCallback)((e,t)=>{var n,r;let i=null==l?void 0:l(e);if(!h||!nh||!i)return null;let{disabled:o=!1,disabledDesc:a="",type:s="icon",disabledToastInfo:d}=null!==(n=null==v?void 0:v(e))&&void 0!==n?n:{};return nh({info:e,isSelected:null!==(r=null==L?void 0:L(i))&&void 0!==r&&r,onClickCard:(e,t)=>{c?j(i):null==E||E({itemsKeyInSelectedArea:[i],isNotInMulti:!0})},disabled:o||g>=p,disabledDesc:a,disabledTipType:s,disabledToastInfo:d,maskShadowStyle:m,index:t})},[h,L,g,p,l,v,m,c,E]),{getItemPosList:M}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{dataList:t=[],firstItem:l,getColumnCount:n,itemMargin:r={top:0,bottom:0,left:0,right:0},containerEleRef:i,getAllItems:o}=e;return{getItemPosList:(0,nc.Z)(()=>{var e,a,s,d,u,c,v;if(!(null==i?void 0:null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect)||!l&&!o)return[];let{top:m,left:f}=null==i?void 0:null===(a=i.current)||void 0===a?void 0:a.getBoundingClientRect();if(l){let e=null!==(d=null==n?void 0:n())&&void 0!==d?d:0;if(0===e)return[];let{height:i=0,width:o=0,top:a,left:v}=null!==(u=null==l?void 0:null===(s=l.getBoundingClientRect)||void 0===s?void 0:s.call(l))&&void 0!==u?u:{},h=v-f,p=a-m;return null!==(c=null==t?void 0:t.map((t,l)=>{let n=Math.floor(l/e),a=Math.floor(l%e);return{item:t,x:h+(e+1)*r.left+a*(o+r.left+r.right),y:p+(n+1)*r.top+n*(i+r.top+r.bottom),height:i,width:o}}))&&void 0!==c?c:[]}if(o){let e=o();return null!==(v=null==t?void 0:t.map((t,l)=>{var n,r,i;let{height:o=0,width:a=0,top:s,left:d}=null!==(i=null==e?void 0:null===(r=e[l])||void 0===r?void 0:null===(n=r.getBoundingClientRect)||void 0===n?void 0:n.call(r))&&void 0!==i?i:{};return{item:t,x:d-f,y:s-m,height:o,width:a}}))&&void 0!==v?v:[]}return[]})}}({getColumnCount:a,dataList:n,firstItem:d,containerEleRef:r,itemMargin:u,getAllItems:f});return!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lw,{containerEleRef:l,scrollEleRef:n,getItemPosList:r,stickyArea:i={top:0,bottom:0,left:0,right:0},updateSelectedList:o,latestClickedCardId:a,getItemId:d,isDisabledMultiSelected:u=!1}=e,[c,v]=(0,s.useState)(!1),m=(0,s.useRef)(!1),f=(0,s.useRef)(!1),h=(0,s.useRef)({x:-1,y:-1}),p=(0,s.useRef)({x:-1,y:-1}),g=(0,s.useRef)({x:-1,y:-1}),_=(0,s.useRef)(null),{isListSelectable:x,isSelectDisabled:w,setSelectItems:C,onSessionMultiEnd:y}=(0,s.useContext)(t),I=(0,s.useRef)([]),[b,j]=(0,s.useState)([]),k=(0,s.useRef)([]),N=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!r)return;let t=nu(r(),null==l?void 0:l.current,null==n?void 0:n.current,S.current.stickyArea),i=nd(h.current,p.current),o=null==t?void 0:t.filter(e=>e.isShow);return null==o||o.forEach(t=>{var l,n,r,o,a,s;let d=t.item,u=null===(l=(n=S.current).getItemId)||void 0===l?void 0:l.call(n,d);if(!u||e.includes(u))return;let c=na(i,t.rect),v=null!==(o=null===(r=k.current)||void 0===r?void 0:r.indexOf(u))&&void 0!==o?o:-1,m=-1!==v;c&&!m&&(null===(a=k.current)||void 0===a||a.push(u)),!c&&m&&(null===(s=k.current)||void 0===s||s.splice(v,1))}),j(k.current),k.current},[l]),S=(0,s.useRef)({stickyArea:i,updateSelectedList:o,getItemId:d,updateRectCrossSelected:N});S.current={stickyArea:i,updateSelectedList:o,getItemId:d,updateRectCrossSelected:N},(0,ni.o)(()=>{let e=()=>{if(_.current){let e=_.current.getContext("2d");e&&e.clearRect(0,0,_.current.width,_.current.height),document.body.removeChild(_.current),_.current=null}},t=t=>{if(w||!(null==l?void 0:l.current))return;v(!0),null==C||C(e=>(I.current=e,e)),m.current=!0,f.current=!0,h.current=ns(t,l.current),g.current={x:t.clientX,y:t.clientY},e();let n=document.createElement("canvas");n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.pointerEvents="none",n.style.zIndex="9999",n.width=window.innerWidth,n.height=window.innerHeight,document.body.appendChild(n),_.current=n},n=t=>{var n,r;if(!!f.current&&!!(null==l?void 0:l.current))p.current=ns(t,l.current),N(),null===(n=(r=S.current).updateSelectedList)||void 0===n||n.call(r,{itemsKeyInSelectedArea:k.current,isNotInMulti:!0}),v(!1),null==C||C(e=>(null==y||y(I.current,e),I.current=e,e)),m.current=!1,f.current=!1,k.current=[],j([]),e(),g.current={x:-1,y:-1}},r=e=>{var t,n;if(!(2>Math.abs(e.clientX-g.current.x)&&2>Math.abs(e.clientY-g.current.y))&&!!f.current&&!!(null==l?void 0:l.current)){if(p.current=ns(e,l.current),N(),null===(t=(n=S.current).updateSelectedList)||void 0===t||t.call(n,{itemsKeyInSelectedArea:k.current}),_.current&&-1!==g.current.x){let t=_.current.getContext("2d");if(t){let l=g.current.x,n=g.current.y,r=e.clientX,i=e.clientY;t.clearRect(0,0,_.current.width,_.current.height),t.fillStyle="rgba(254, 44, 85, 0.2)",t.fillRect(Math.min(l,r),Math.min(n,i),Math.abs(r-l),Math.abs(i-n)),t.strokeStyle="rgba(254, 44, 85, 1)",t.lineWidth=2,t.strokeRect(Math.min(l,r),Math.min(n,i),Math.abs(r-l),Math.abs(i-n))}}}};if(u||!(null==l?void 0:l.current)||!x)return;let i=l.current;return null==i||i.addEventListener("mousedown",t),null==i||i.addEventListener("mouseup",n),null==i||i.addEventListener("mousemove",r),null==i||i.addEventListener("mouseover",r),()=>{null==i||i.removeEventListener("mousedown",t),null==i||i.removeEventListener("mouseup",n),null==i||i.removeEventListener("mousemove",r),null==i||i.removeEventListener("mouseover",r)}},[null==l?void 0:l.current,x,w,u,N]);let E=(0,s.useRef)(!1);(0,s.useEffect)(()=>{let e=e=>{var t,l,n;return null===(n=r())||void 0===n?void 0:null===(l=n.filter)||void 0===l?void 0:null===(t=l.call(n,t=>{var l,n;return(null===(l=(n=S.current).getItemId)||void 0===l?void 0:l.call(n,null==t?void 0:t.item))===e}))||void 0===t?void 0:t[0]},t=t=>{var l,i;if(!(null==n?void 0:n.current)||!a||!r)return;let o=e(a);h.current={x:o.x,y:o.y},k.current=[],p.current=no(t,o,n.current),N([a]),null===(l=(i=S.current).updateSelectedList)||void 0===l||l.call(i,{itemsKeyInSelectedArea:k.current})},i=e=>{if(f.current)return;if("ShiftLeft"===e.code||"ShiftRight"===e.code){v(!0),null==C||C(e=>(I.current=e,e)),m.current=!0,E.current=!0,document.body.style.overflow="hidden";return}if(!e.shiftKey)return;if(e.stopPropagation(),e.preventDefault(),!!["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(e.code))"ArrowDown"===e.code?t("down"):"ArrowUp"===e.code?t("up"):"ArrowLeft"===e.code?t("left"):"ArrowRight"===e.code&&t("right")},o=e=>{if(!e.shiftKey&&E.current){var t,l;null===(t=(l=S.current).updateSelectedList)||void 0===t||t.call(l,{itemsKeyInSelectedArea:k.current,isNotInMulti:!0}),v(!1),null==C||C(e=>(null==y||y(I.current,e),I.current=e,e)),m.current=!1,E.current=!1,document.body.style.overflow="",k.current=[],j([])}},s=nr()(e=>{E.current&&(e.preventDefault(),e.deltaY<0?t("down"):e.deltaY>0?t("up"):e.deltaX<0?t("left"):e.deltaX>0&&t("right"))},500,{leading:!0});if(!u&&!!(null==l?void 0:l.current)&&!f.current&&!!a&&!w)return document.addEventListener("keydown",i,!0),document.addEventListener("keyup",o,!0),document.addEventListener("wheel",s),()=>{document.removeEventListener("keydown",i,!0),document.removeEventListener("keyup",o,!0),document.removeEventListener("wheel",s)}},[l,N,w,u,a])}({containerEleRef:r,scrollEleRef:i,getItemPosList:M,stickyArea:o,updateSelectedList:E,latestClickedCardId:b,getItemId:l,isDisabledMultiSelected:!c},t),(0,s.useEffect)(()=>{var e,t;let r=null==n?void 0:null===(e=n.filter(e=>{var t;return!(null==v?void 0:null===(t=v(e))||void 0===t?void 0:t.disabled)}))||void 0===e?void 0:e.length,i=null==w?void 0:null===(t=w.filter(e=>null==n?void 0:n.find(t=>(null==l?void 0:l(t))===(null==l?void 0:l(e)))))||void 0===t?void 0:t.length;if(0===i)null==C||C(!1),null==y||y(!1);else{null==C||C(!0);let e=i>=p||i===r;null==y||y(e)}},[w,n,C,y,v,p]),(0,s.useEffect)(()=>{let e=W.listen(W.EVENT.batchToolBarCheckAllChanged,e=>{var t;let{checked:r}=e;E({itemsKeyInSelectedArea:null==n?void 0:null===(t=n.filter(e=>{var t;return!(null==v?void 0:null===(t=v(e))||void 0===t?void 0:t.disabled)}))||void 0===t?void 0:t.map(e=>(null==l?void 0:l(e))||""),isNotInMulti:!0,allSelect:r,allDel:!r})});return()=>{e()}},[n,v]),{updateSelectedList:E,withMask:T,latestClickedCardId:b}}var n_={Pending:0,0:"Pending",Reviewing:1,1:"Reviewing",Public:2,2:"Public",SelfSee:3,3:"SelfSee"},nx=l("88961"),nw=l("801636"),nC=l("778768"),ny={item:"wm_3RYbf",cover:"ze2lnJyz",payTag:"W0dcpJ2w",image:"eDUGXCr5",content:"XjTeAr5Q",title:"aLzBh1mi",name:"yZVH3Zrn",singleLine:"VFptrk9V",updatedTag:"d8dkQvPI",statusTag:"GZDSNytb",count:"k687njj4",episode:"jeGiNRLk",unreadMixCount:"ohXga7Js",iconSvg:"gLb7LAUl",tag:"n6u5or7f",more:"iyOZnGHA",moreIcon:"MhDtFEPv",active:"HAYzgqco",morePanel:"wvd5VHm_",visible:"x4quGBn1",btn:"cxL2aVGO",pointer:"Wjv5FRe8",mixCard:"AbhXTUur"},nI=l("940538"),nb=l("512311"),nj=l("711693"),nk="gFTcsBdo",nN="Lk2QMJOP",nS="njJ7ZGdg",nE="RfW57F_s";let nL=()=>{};var nT=e=>{var t;let{userInfo:l,mixInfo:n,onChangeIntro:r,textMaxLength:i}=e,o=(0,s.useRef)(null),d=(0,s.useRef)(null),[u,c]=(0,s.useState)(null!==(t=null==n?void 0:n.desc)&&void 0!==t?t:""),[v,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1);(0,s.useRef)([]);let[g,_]=(0,s.useState)({statusCode:0,hasMore:!0,hasFetchData:!1,data:[],preQueryIds:"",searchText:""}),[x,w]=(0,s.useState)({statusCode:0,cursor:0,hasMore:!0,hasFetchData:!1,data:[]});return(0,s.useEffect)(()=>{setTimeout(()=>{o.current.setContent(null==n?void 0:n.desc)})},[]),(0,a.jsxs)("div",{className:nk,ref:d,onClick:()=>{var e;null===(e=o.current)||void 0===e||e.focus()},children:[(0,a.jsx)(ex.Z,{className:nN,ref:o,refOuterContainer:d,placeholder:"请输入合集的简介",onChange:e=>{var t;let l=null===(t=o.current)||void 0===t?void 0:t.getCommentInfo();c(e),void 0!==e&&void 0!==l&&r(e,l.textExtra.map(e=>({start:e.start,end:e.end,type:e.type,user_id:e.user_id,sec_uid:e.sec_uid})))},atUserSearchData:g,loadSearchAtData:nL,atUserDefaultData:x,loadMoreDefaultAtData:nL,onEditFocus:nL,onEditBlur:nL,handlePublishClick:nL,isAtIconSelected:!1,setIsAtIconSelected:nL,isAtIconPoint:!1,setIsAtIconPoint:nL}),(0,a.jsxs)("div",{className:f()(nS,{[nE]:i<(null==u?void 0:u.length)}),children:[null==u?void 0:u.length,"/",i]})]})},nM={container:"yvgLttLG",close:"DCffd2cj",title:"gvFP8puM",avatarEditorContainer:"h_kn9jag",leftContainer:"yEFGS8ox",mainEditor:"daz7pdGp",loading:"jBg2FAOs",img:"pCBxseNE",slideContainer:"KtmpOxIG",pointer:"YYjI0mEl",disabled:"vkN7umyu",slider:"QtCb33au",progressContainer:"mCKztuk8",progress:"GoIso7tT",progressButton:"QtOSFoLq",rightContainer:"r_3Z4dKq",topContainer:"CbiOSpof",avatarPreview:"VnSBN4Dl",avatarPreviewWord:"UxuAUY_Y",reUpload:"QtmF_lHy",buttonContainer:"jdDH9EQi",button:"LukACgBG"};let nR=(0,s.forwardRef)((e,t)=>(0,a.jsxs)("svg",(0,M._)((0,o._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,a.jsxs)("g",{clipPath:"url(#increaseGlass_svg__clip0_1612_33738)",children:[(0,a.jsx)("circle",{cx:16,cy:16,r:15.5}),(0,a.jsx)("path",{clipRule:"evenodd",d:"M15 8.667a6.333 6.333 0 1 0 3.982 11.258l2.449 2.449a.667.667 0 1 0 .943-.943l-2.449-2.449A6.333 6.333 0 0 0 15 8.666zM10 15a5 5 0 1 1 10 0 5 5 0 0 1-10 0zm5.667-2a.667.667 0 1 0-1.334 0v1.337l-1.329.002a.667.667 0 0 0 .002 1.333l1.327-.002V17a.667.667 0 0 0 1.334 0v-1.332L17 15.667a.667.667 0 0 0-.002-1.334l-1.332.002V13z"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"increaseGlass_svg__clip0_1612_33738",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h32v32H0z"})})})]}))),nP=(0,s.forwardRef)((e,t)=>(0,a.jsxs)("svg",(0,M._)((0,o._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,a.jsxs)("g",{clipPath:"url(#reduceGlass_svg__clip0_1628_36241)",children:[(0,a.jsx)("circle",{cx:16,cy:16,r:15.5}),(0,a.jsx)("path",{clipRule:"evenodd",d:"M8.667 15a6.333 6.333 0 1 1 11.258 3.982l2.449 2.449a.667.667 0 0 1-.943.943l-2.449-2.449A6.333 6.333 0 0 1 8.666 15zM15 10a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm-2.667 5c0-.368.299-.667.667-.667h4a.667.667 0 0 1 0 1.334h-4a.667.667 0 0 1-.667-.667z"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"reduceGlass_svg__clip0_1628_36241",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h32v32H0z"})})})]}))),nD=e=>{var t;let{avatarUrl:l,onCloseAvatarEditor:n,onSaveAvatar:r,openFileSelector:i,setUploadUri:o}=e,[d,u]=(0,s.useState)(!1),{dispatch:c,userInfo:v}=null!==(t=(0,eF.useUserInfoContext)())&&void 0!==t?t:{},m=(0,s.useRef)(d);m.current=d;let{canvasRef:p,imgRef:g,imgStyle:_,changeScale:x,enlargeScale:w,imgViewBox:C,changeImgViewBox:y}=eL(),{sliderProgressRef:I,sliderButtonRef:b}=eT({changeScale:x,enlargeScale:w});return eM({imgRef:g,imgViewBox:C,changeImgViewBox:y,enlargeScale:w,changeScale:x}),(0,a.jsxs)("div",{className:nM.container,children:[(0,a.jsx)(ep.z,{svg:(0,a.jsx)(nb.Z,{}),className:f()(nM.close),onClick:()=>{!m.current&&n()}}),(0,a.jsx)("div",{className:nM.title,children:"修改合集封面"}),(0,a.jsxs)("div",{className:nM.avatarEditorContainer,children:[(0,a.jsxs)("div",{className:nM.leftContainer,children:[(0,a.jsxs)("div",{className:nM.mainEditor,children:[(0,a.jsx)("img",{className:nM.img,style:_,src:l,ref:g,draggable:!1}),d&&(0,a.jsx)(h.gb,{className:nM.loading})]}),(0,a.jsxs)("div",{className:nM.slideContainer,children:[(0,a.jsx)(A.Z,{width:32,height:32,viewBox:"0 0 32 32",src:nP,className:f()(nM.pointer,{[nM.disabled]:0===w}),onClick:()=>x(w-1)}),(0,a.jsx)("div",{className:nM.slider,children:(0,a.jsx)("div",{className:nM.progressContainer,ref:I,children:(0,a.jsx)("div",{className:nM.progress,style:{width:`${w/9*100}%`},children:(0,a.jsx)("div",{className:nM.progressButton,ref:b})})})}),(0,a.jsx)(A.Z,{width:32,height:32,viewBox:"0 0 32 32",src:nR,className:f()(nM.pointer,{[nM.disabled]:9===w}),onClick:()=>x(w+1)})]})]}),(0,a.jsx)("div",{className:nM.rightContainer,children:(0,a.jsxs)("div",{className:nM.topContainer,children:[(0,a.jsx)("canvas",{className:nM.avatarPreview,ref:p}),(0,a.jsx)("div",{className:nM.avatarPreviewWord,children:"封面预览"}),(0,a.jsx)("div",{className:nM.reUpload,onClick:i,children:"重新上传封面"})]})})]}),(0,a.jsxs)("div",{className:nM.buttonContainer,children:[(0,a.jsx)(R.Button,{theme:"solid",className:nM.button,onClick:()=>{!m.current&&n()},type:"secondary",children:"取消"}),(0,a.jsx)(R.Button,{theme:"solid",className:nM.button,onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.toBlob(async e=>{if(null!==e&&!m.current){u(!0),m.current=!0;let l=new(eI())({userId:v.info.uid,appId:eb.APP_ID,imageConfig:{serviceId:eb.IMAGEX_AVATAR_SERVER_ID}}),{stsToken:n,statusCode:i}=await (0,ej.$y)()||{};if(0===i){var t;let i=null==l?void 0:null===(t=l.addFile)||void 0===t?void 0:t.call(l,{file:e,stsToken:n,type:"image"});l.on("complete",async t=>{var l,n;let i=(null==t?void 0:null===(l=t.uploadResult)||void 0===l?void 0:l.ImageUri)||(null==t?void 0:null===(n=t.uploadResult)||void 0===n?void 0:n.Uri);i?(o(i),r(window.URL.createObjectURL(e))):ee.F.info("保存失败"),u(!1)}),l.on("error",e=>{u(!1),ee.F.info("保存失败")}),l.on("progress",e=>{}),l.start(i)}else u(!1),ee.F.info("保存失败")}})},children:"保存"})]})]})};var nA={container:"SSpIxoqV",box:"jmGTEP91",close:"gHuPBa6A",header:"Nto_vuDt",title:"jd5t_GZr",avatar:"DE1phevR",images:"_fXOtpk6",avatarBtn:"zRUMh0E0",upload:"O0FDPrI_",uploadIcon:"NRBNYDDK",uploadDesc:"Oly4uhln",avatarText:"l9x_7jso",name:"NfQE1Fao",nameTitle:"G_aFFb0j",nameInput:"blxIHXSx",nameCount:"_HxPNl1T",intro:"ahTgdds5",introTitle:"rVFsFPgB",introInput:"YK3iPiId",buttons:"QwaNp9MW",save:"wuzAw3Ub",cancel:"fDBPjcPS",hide:"r7mz7niA",necessaryText:"UYyJuOKU"};let nF=e=>{let{changeImgUrl:t,avatarSrcChange:l,originUrl:n}=e,[r,i]=(0,s.useState)(!1),o=(0,s.useRef)(),a=(0,s.useRef)();return(0,s.useEffect)(()=>{let e=o.current,l=null;if(e){let n="",r=()=>{var r;let o=null==e?void 0:e.files[0];if(!o)return;if(!["image/jpeg","image/png"].includes(o.type)){ee.F.info("文件格式错误");return}if(o.size>5242880){ee.F.info("文件超过5MB，请重新选择");return}n=window.URL.createObjectURL(o);let a=null!==(r=w.Le.getConfig(w.gI.MixEditorUrlList))&&void 0!==r?r:[];a.push(n),w.Le.setConfig(w.gI.MixEditorUrlList,a),(l=new Image).onload=()=>{if(!l)return;let{width:r,height:o}=l;r<100||o<100?ee.F.info("图片分辨率需大于100\xd7100，请重新选择"):(t(n),i(!0)),l=null,e.value=""},l.onerror=()=>{ee.F.info("图片读取失败，请重新选择"),l=null,e.value=""},l.src=n};return null==e||e.addEventListener("change",r),()=>{null==e||e.removeEventListener("change",r),l=null}}},[]),{inputRef:o,imgRef:a,showAvatarEditor:r,onCloseAvatarEditor:()=>{i(!1),t(n)},onSaveAvatar:e=>{l(),i(!1),t(e)},openFileSelector:()=>{var e,t;null===(t=o.current)||void 0===t||null===(e=t.click)||void 0===e||e.call(t)}}};var nV=new eP.h({compilationCreateClick:{eventName:"compilation_create_click",params:{}},createCompilationComfirm:{eventName:"create_compilation_comfirm",params:{compilation_id:"",compilation_name:"",status:"",function_name:""}},dragDropCompilation:{eventName:"drag_drop_compilation",params:{compilation_id:"",compilation_name:"",author_id:"",status:"",before_rank_order:0,after_rank_order:0}},modifyCompilationClick:{eventName:"modify_compilation_click",params:{compilation_id:"",compilation_name:"",status:""}},postManageClick:{eventName:"post_manage_click",params:{compilation_id:"",compilation_name:"",status:""}},addPostClick:{eventName:"add_post_click",params:{compilation_id:"",compilation_name:"",status:""}},modifyCompilationComfirm:{eventName:"modify_compilation_comfirm",params:{compilation_id:"",compilation_name:"",status:"",function_name:""}},compilationPostConfirm:{eventName:"compilation_post_confirm",params:{tab_name:"",compilation_id:"",compilation_name:"",status:"",is_effective_operation:0,function_name:""}},dragDropCompilationPost:{eventName:"drag_drop_compilation_post",params:{compilation_id:"",compilation_name:"",status:"",author_id:"",group_id:"",before_rank_order:0,after_rank_order:0}}});let nB=e=>{var t,l,n,r;let{userInfo:i,mixInfo:o,onClose:d,edit:u,title:c,type:v}=e,m=null!==(t=null==o?void 0:o.mixName)&&void 0!==t?t:"",h=null!==(l=null==o?void 0:o.desc)&&void 0!==l?l:"",p=null!==(n=null==o?void 0:o.cover)&&void 0!==n?n:"",g=null!==(r=null==o?void 0:o.coverUri)&&void 0!==r?r:"",[_,x]=(0,s.useState)(p),[w,C]=(0,s.useState)(g),[y,I]=(0,s.useState)(m),[b,j]=(0,s.useState)(h),k=(0,s.useRef)(h),N=(0,s.useRef)(),S=(0,s.useRef)(!1),E=(0,s.useRef)(!1),L=(0,s.useMemo)(()=>{let e=0===y.trim().length,t=0===_.length,l=y===m,n=b===h,r=_===p,i=(null==b?void 0:b.length)>200;return e||t||l&&n&&r||i},[_,b,y,m,h,p]),T=async()=>{if(E.current)return;if((null==b?void 0:b.length)>200){ee.F.info("简介超过最大限制");return}let e=await u({mixId:null==o?void 0:o.mixId,name:y,desc:b,avatar:_,avatarUri:w});e?ee.F.info(e):(ee.F.info("操作成功"),d())},M=e=>{"create"===v?nV.sendLog("createCompilationComfirm",{compilation_id:"",compilation_name:"",status:"private",function_name:"button"===e?"cancel_icon":"cancel_x"}):"edit"===v&&nV.sendLog("modifyCompilationComfirm",{compilation_id:null==o?void 0:o.mixId,compilation_name:m,status:(null==o?void 0:o.status)===n_.Public?"public":"private",function_name:"button"===e?"cancel_icon":"cancel_x"}),d()},{inputRef:P,imgRef:D,showAvatarEditor:A,onCloseAvatarEditor:F,onSaveAvatar:V,openFileSelector:B}=nF({changeImgUrl:e=>{x(e)},avatarSrcChange:()=>S.current=!0,originUrl:p});return(0,a.jsxs)(ef.T6,{className:nA.container,children:[(0,a.jsx)("input",{type:"file",accept:".png,.jpeg,.jpg",style:{display:"none"},ref:P}),(0,a.jsxs)("div",{"data-bytereplay-mask":"strict",className:f()(nA.box,{[nA.hide]:A}),children:[(0,a.jsx)(ep.z,{initialMounted:!0,svg:(0,a.jsx)(nb.Z,{}),className:f()(nA.close),onClick:()=>M("icon")}),(0,a.jsx)("div",{className:nA.header,children:(0,a.jsx)("span",{className:nA.title,children:c})}),(0,a.jsxs)("div",{className:nA.avatar,children:[_?(0,a.jsxs)("div",{className:nA.images,onClick:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("img",{src:_,alt:"avatar",ref:D}),(0,a.jsx)("div",{className:nA.avatarBtn,children:"修改合集封面"})]}):(0,a.jsxs)("div",{className:f()(nA.images,nA.upload),onClick:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)(ep.z,{initialMounted:!0,svg:(0,a.jsx)(nj.Z,{}),className:f()(nA.uploadIcon)}),(0,a.jsx)("p",{className:f()(nA.uploadDesc,nA.necessaryText),children:"上传合集封面"})]}),(0,a.jsx)("p",{className:nA.avatarText,children:"文件大小不超过5M，分辨率至少为100*100，1080*1080最佳"})]}),(0,a.jsxs)("div",{className:nA.name,children:[(0,a.jsx)("div",{className:f()(nA.nameTitle,nA.necessaryText),children:"合集标题"}),(0,a.jsxs)("div",{className:nA.nameInput,children:[(0,a.jsx)("input",{type:"text",placeholder:"请输入合集标题",maxLength:20,onChange:e=>{I(e.target.value)},value:y}),(0,a.jsxs)("span",{className:nA.nameCount,children:[y.length,"/20"]})]})]}),(0,a.jsxs)("div",{className:nA.intro,children:[(0,a.jsx)("div",{className:nA.introTitle,children:"合集简介"}),(0,a.jsx)("div",{className:nA.introInput,children:(0,a.jsx)(nT,{textMaxLength:200,mixInfo:o,userInfo:i,onChangeIntro:(e,t)=>{k.current=e,N.current=t,j(e)}})})]}),(0,a.jsxs)("div",{className:nA.buttons,children:[(0,a.jsx)(R.Button,{className:nA.cancel,onClick:()=>M("button"),type:"secondary",theme:"solid",children:"取消"}),(0,a.jsx)(R.Button,{className:nA.save,disabled:L,onClick:T,theme:"solid",children:"保存"})]})]}),A&&(0,a.jsx)(nD,{avatarUrl:_,onCloseAvatarEditor:F,onSaveAvatar:V,openFileSelector:B,onClose:d,setUploadUri:C})]})};var nU=l("503890"),nO=l.n(nU),nH=l("784492"),nW=l("921359"),nz={container:"tIo202lh",panel:"JAWGZvrk",keepAlive:"o6vtQQoK",header:"MTmWrOh9",title:"KKCW74Ep",mixName:"M3nOg6Fv",buttons:"UCrM_PI4",save:"LvJxsTwA",cancel:"TzlqQ23z",tabPanel:"Coqhu2uS"},nZ=l("302653"),n$=l.n(nZ),nK=l("832052"),nG=l("404171"),nY=l("926764"),nq=l("953208"),nQ=l("954270"),nX={item:"qR6hzaNH",container:"pxj249Aa"},nJ=l("269896"),n0=l("607412"),n1={container:"q438d7I8",item:"wqW3g_Kl",hasLookPos:"aWtPFSDl",overflowXHidden:"tFWUEcHm"};let n2=!1,n3=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];n2=e},n5=()=>n2,n6={post:"userPost",like:"userLike",favorite_collection:"userCollection",record:"userRecord",watch_later:"userWatchLater"},n7={top:0,bottom:24,left:0,right:16},n4=e=>{var t,l,n;let{info:r,isSelf:i,tab:o,uid:u,rank:c,keyword:v,onClick:m,isInSearch:f,isSpider:h,className:p,id:g,children:_,logParams:x,onNicknameClick:w,showPermissionIcon:C}=e,[y,I]=(0,nx.Z)();(0,s.useRef)(!1);let b={};i&&"post"===o?b.playCount=null==r?void 0:null===(l=r.stats)||void 0===l?void 0:l.playCount:b.likeCount=null==r?void 0:null===(n=r.stats)||void 0===n?void 0:n.diggCount;let j=(0,eZ.Wg)(r,d.stringify({previous_page:i?"personal_homepage":"others_homepage",modeFrom:n6[o],cursor:null==r?void 0:r.cursor,count:10,secUid:u,enter_method:o}));return(0,a.jsxs)("div",{className:p,id:g,children:[(0,a.jsx)(nJ.J,{awemeInfo:r,isSpider:h||(0,es._Q)(),src:null==r?void 0:null===(t=r.video)||void 0===t?void 0:t.cover,playCount:b.playCount,likeCount:b.likeCount,isSelf:i,videoHref:j,onClick:e=>{null==m||m(e)},onNicknameClick:()=>{!j.startsWith("/lvdetail/")&&(null==w||w())},uid:u,onShow:()=>{},showTitle:!0,showHasLook:!1,scene:o,from:"user",logParams:x,userTabKey:o,showPermissionIcon:C}),(0,a.jsx)("div",{className:n1.hasLookPos,ref:y}),_]})},n8=e=>null==e?void 0:e.awemeId,n9=function(){let{panelNoData:e,handleLoadEnd:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return((0,s.useEffect)(()=>{null==t||t(),n3()},[]),e)?(0,a.jsx)(a.Fragment,{children:e}):(0,a.jsx)(B.H,{title:"暂无内容",icon:(0,a.jsx)(l$.Z,{})})};var re=s.memo(s.forwardRef((e,t)=>{var l,n,r,i,d;let{modalInnerFeedCard:u="",defaultRes:c,currentTab:v,tab:m,uid:f,itemClassName:h,fetchMoreData:p,panelNoMoreData:g,panelNoData:_,pause:C,isInSearch:y,retryTimes:I,setUserPostList:b,updateAwemeList:j,getItemSelectedDisabled:k,topNavHeight:N=60,topOffset:S=0,handleLoadEnd:E,columnCount:L,scrollRef:T,keyword:R,logParams:P,collectionFolderInfo:D,modalEnterFrom:A,scrollContainerEl:F,onClose:V,highLightAwemeId:B,showPermissionIcon:U,defaultFetchAllData:O,getMaskIndex:H,dataListWrapper:W,sortDataList:z,customDataListCtx:$,getSortId:K,onSort:G}=e,Y=(0,s.useRef)(null),{isSelf:q,currentUserInfoDetail:Q,isSpider:X}=(0,s.useContext)(Z)||{},[J,ee]=(0,s.useState)([]),et=(0,s.useRef)(),el=(0,s.useRef)(),en=(0,s.useRef)();en.current=P;let er=(0,s.useRef)(u);y&&w.Le.setConfig(w.gI.HasInUserSearch,{isUsed:y});let ei=(0,s.useCallback)(e=>{ee(e),null==b||b(e),null==j||j(e)},[b,j]),eo=(0,s.useCallback)((e,t)=>(0,a.jsx)(n4,{info:e,isSelf:q,logParams:en.current,tab:m,uid:f,keyword:R,isSpider:X,rank:t,onClick:t=>{null==t||t.preventDefault(),er.current=u,el.current=e},isInSearch:y,onNicknameClick:()=>{er.current="author_card",el.current=e},showPermissionIcon:U}),[]),ea=null===(n=et.current)||void 0===n?void 0:null===(l=n.getDataList)||void 0===l?void 0:l.call(n),es=(0,s.useMemo)(()=>{var e;return null!==(e=null==W?void 0:W(null!=ea?ea:[]))&&void 0!==e?e:ea},[ea,W]),ed=np({scrollEl:null==T?void 0:T.current,containerEl:null!==(d=null==Y?void 0:Y.current)&&void 0!==d?d:void 0}),eu=(0,s.useRef)({height:"auto",paddingBottom:"133%",borderRadius:"12px"}),{withMask:ec,updateSelectedList:ev}=ng((0,M._)((0,o._)({maskShadowStyle:eu.current,getItemId:n8,dataList:null!=z?z:es,isSupportMulti:!0},ed),{firstItem:null===(i=et.current)||void 0===i?void 0:null===(r=i.getTargetNode)||void 0===r?void 0:r.call(i,0),getColumnCount:()=>L,itemMargin:n7,getItemSelectedDisabled:k}));(0,s.useImperativeHandle)(t,()=>{var e,t,l,n,r,i,o,a;return{loadMoreData:null===(e=et.current)||void 0===e?void 0:e.loadMoreData,locateSelectVideo:null===(t=et.current)||void 0===t?void 0:t.locateSelectVideo,reset:null===(l=et.current)||void 0===l?void 0:l.reset,reload:null===(n=et.current)||void 0===n?void 0:n.reload,getTotal:null===(r=et.current)||void 0===r?void 0:r.getTotal,resetRes:null===(i=et.current)||void 0===i?void 0:i.resetRes,setScrollData:null===(o=et.current)||void 0===o?void 0:o.setScrollData,getDataList:null===(a=et.current)||void 0===a?void 0:a.getDataList,updateSelectedList:ev}});let em=(0,s.useMemo)(()=>K?lW:lM.Z,[]);return(0,a.jsx)(lF,{disabled:!1,children:(0,a.jsx)("div",{ref:Y,className:n1.overflowXHidden,children:(0,a.jsx)(em,{ref:et,highLightAwemeId:B,handleLoadEnd:E,defaultDataList:(null==c?void 0:c.data)||[],defaultHasMoreFlag:(null==c?void 0:c.hasMore)||1,defaultStatusCode:(null==c?void 0:c.statusCode)||0,defaultWhaleDecisionCustom:null==c?void 0:c.whaleDecisionCustom,containerClassName:n1.container,itemClassName:null!=h?h:n1.item,panelNoData:(0,a.jsx)(n9,{panelNoData:_,handleLoadEnd:E}),panelNoMoreData:g,scrollContainerEl:F,skeletonNum:0,renderItem:eo,withMask:ec,fetchMoreData:async()=>{(0,n0.B1)({tag:x.w3.fetchers.fetcher_user_start,once:!0});let e=await p();return(0,n0.B1)({tag:x.w3.fetchers.fetcher_user_end,once:!0}),e},setDataList:ei,pause:null!=C?C:v!==m,retryTimes:I,blockType:"post"===m||"like"===m,listFilterFn:(e,t)=>{let l=e.map(e=>null==e?void 0:e.awemeId),n=(t||[]).filter(e=>!l.includes(null==e?void 0:e.awemeId));return e.concat(n||[])},defaultFetchAllData:O,getMaskIndex:H,customDataListCtx:$,getSortId:K,onSort:G})})})}));let rt=(0,s.createContext)(null),rl=(0,s.createContext)(null),rn=e=>{var t;let{mixInfo:l,children:n}=e,r=null!==(t=null==l?void 0:l.totalEpisode)&&void 0!==t?t:0,[i,o]=(0,s.useState)(r),d=(0,s.useRef)(r),u=(0,s.useRef)(Array(r+1).fill(1).map((e,t)=>({val:t,id:""}))),c=(0,s.useRef)(new Map),v=(0,s.useRef)(new Map),[m,f]=(0,s.useState)([]),h=(0,s.useRef)(0===i),p=(0,s.useRef)(!1),g={getCurrentAwemeIDList:()=>Array.from(c.current.keys()),mapIndexArray:e=>{var t,l;return null!==(l=null===(t=u.current[e])||void 0===t?void 0:t.val)&&void 0!==l?l:-1},getIndexArrayAwemeId:e=>{var t,l;return null!==(l=null===(t=u.current[e])||void 0===t?void 0:t.id)&&void 0!==l?l:""},isInCurrentList:e=>c.current.has(e),getCurrentNumber:e=>c.current.get(e),getAwemeInfo:e=>{var t;return null===(t=v.current)||void 0===t?void 0:t.get(e)},isInOriginalList:e=>{var t;return(null===(t=e.mixInfo)||void 0===t?void 0:t.mixId)===l.mixId},getOriginNumber:e=>{var t,l;return null!==(l=null===(t=e.mixInfo)||void 0===t?void 0:t.currentEpisode)&&void 0!==l?l:-1},getIndexRecord:()=>{let e={};return g.getCurrentAwemeIDList().forEach(t=>{e[c.current.get(t).toString()]=t}),e}},_={pureUpdate:(e,t)=>{c.current.set(e,t)},remove:e=>{let t=c.current.get(e);if(!!t)c.current.delete(e),g.getCurrentAwemeIDList().forEach(e=>{let l=c.current.get(e);l>t&&_.pureUpdate(e,l-1)})},updateIndexArray:(e,t,l)=>{u.current[e]={val:t,id:l}},syncMixAwemeList:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=g.getIndexRecord(),n=[],r=Object.keys(l).length;for(let e=1;e<=r;e++){let t=l[`${e}`];if(!t)break;n.push(g.getAwemeInfo(t))}f(l=>e?n:(l.forEach((e,l)=>{!g.isInCurrentList(null==e?void 0:e.awemeId)&&(n="add"===t?[...n,e]:[...n.slice(0,l),e,...n.slice(l)])}),n))},updateMixCount:e=>{d.current=e,o(e)}},x=(0,s.useCallback)(e=>{let t=[];return e.forEach(e=>{let{awemeId:l}=e;if(!v.current.has(l)&&v.current.set(l,e),!g.isInOriginalList(e))return;let n=g.getOriginNumber(e),r=g.mapIndexArray(n);!g.getIndexArrayAwemeId(n)&&_.updateIndexArray(n,r,l),r>0&&!g.isInCurrentList(l)&&(_.pureUpdate(l,r),_.syncMixAwemeList(),t.push(e))}),!h.current&&c.current.size===d.current&&(h.current=!0),t},[]),w=(0,s.useCallback)(e=>{let t=d.current;e.forEach(e=>{if(!g.isInCurrentList(e.awemeId))t++,_.pureUpdate(e.awemeId,t),_.syncMixAwemeList(!1,"add"),g.isInOriginalList(e)&&_.updateIndexArray(g.getOriginNumber(e),t,e.awemeId)}),_.updateMixCount(t)},[]),C=(0,s.useCallback)(e=>{let t=d.current;e.forEach(e=>{if(!!g.isInCurrentList(e.awemeId)){if(t--,_.remove(e.awemeId),g.isInOriginalList(e)){let t=g.getOriginNumber(e),l=g.mapIndexArray(t);_.updateIndexArray(t,-1,e.awemeId),u.current=u.current.map(e=>{let{val:t,id:n}=e;return{val:t>l?t-1:t,id:n}})}}}),_.updateMixCount(t)},[]),y=(0,s.useCallback)((e,t)=>{let l=g.getCurrentNumber(e);if(!l||l===t)return;!p.current&&(p.current=!0),g.getCurrentAwemeIDList().forEach(e=>{let n=g.getCurrentNumber(e);if(n===l){_.pureUpdate(e,t);return}if(l<t){if(n<l||n>t)return;_.pureUpdate(e,n-1);return}if(!(n<t)&&!(n>l))_.pureUpdate(e,n+1)});let n=g.getAwemeInfo(e);g.getOriginNumber(n)>0&&(_.updateIndexArray(g.getOriginNumber(n),t,e),l>t?u.current=u.current.map(e=>{let{val:n,id:r}=e;return{val:n>0&&n<=t&&n>l?n+1:n,id:r}}):l<t&&(u.current=u.current.map(e=>{let{val:n,id:r}=e;return{val:n>0&&n>l&&n<=t?n-1:n,id:r}})))},[]),I=(0,s.useCallback)(e=>g.getCurrentNumber(e),[]),b=(0,s.useCallback)(()=>{var e,t,n;let r={mixId:l.mixId,itemIds:"",delItemIds:"",addItemIds:""},i=[],o=u.current.filter(e=>-1===e.val).map(e=>e.id),a=Array(d.current+1);g.getCurrentAwemeIDList().forEach(e=>{let t=g.getAwemeInfo(e);a[g.getCurrentNumber(e)]=t}),a.forEach(e=>{-1===g.getOriginNumber(e)&&i.push(e.awemeId)}),r.itemIds=a.filter(e=>e.awemeId).map(e=>e.awemeId).join(","),o.length&&(r.delItemIds=o.join(",")),i.length&&(r.addItemIds=i.join(","));let s=(null==r?void 0:null===(e=r.delItemIds)||void 0===e?void 0:e.length)>0||(null==r?void 0:null===(t=r.addItemIds)||void 0===t?void 0:t.length)>0||(null==u?void 0:null===(n=u.current)||void 0===n?void 0:n.some((e,t)=>{let{val:l}=e;return l!==t}));return{result:r,currentAwemeList:a,hasOperate:s}},[]),j=(0,s.useCallback)(e=>!!g.isInCurrentList(e.awemeId)||!!(c.current.size<100)||!(g.getCurrentAwemeIDList().filter(e=>!g.isInOriginalList(g.getAwemeInfo(e))).length>=100)&&!0,[]),k=(0,s.useCallback)(()=>{_.syncMixAwemeList(!0)},[]);return(0,a.jsx)(rl.Provider,{value:{loadVideos:x,addVideos:w,removeVideos:C,moveVideo:y,getManageResult:b,getCurrentNumber:I,checkCanAddToMix:j,syncMixAwemeListOnTabChange:k,mixCount:i,isOldMixAwemeListLoadedRef:h},children:(0,a.jsx)(rt.Provider,{value:{sortDataList:m,setSortDataList:f},children:n})})},rr=(0,s.createContext)(null),ri=e=>{let{value:t,children:l}=e;return(0,a.jsx)(rr.Provider,{value:t,children:l})},ro=()=>(0,s.useContext)(rr),ra=(0,s.createContext)(()=>{});l("209955");var rs=l("746951"),rd={listContainer:"nkryypVo",container:"tOauqcPv",content:"fPCshocO",loading:"vpzTvhlX"};let ru=e=>{let{permissionValue:t="public",changePermissionValue:l}=e;return(0,a.jsx)("div",{className:rd.listContainer,children:(0,a.jsxs)(R.RadioGroup,{className:"test",value:t,onChange:e=>{var t;l(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)},direction:"horizontal",children:[(0,a.jsx)(R.Radio,{value:"public",children:(0,a.jsx)("span",{children:"公开\xb7所有人可见"})}),(0,a.jsx)(R.Radio,{value:"friend",children:(0,a.jsx)("span",{children:"互相关注的人可见"})}),(0,a.jsx)(R.Radio,{value:"secret",children:(0,a.jsx)("span",{children:"私密\xb7仅自己可见"})})]})})},rc=e=>{let{selectItems:t=[],onCancel:l,currentSubTab:n,currentTab:r,onConfirm:i,resetScrollList:o}=e,[d,u]=(0,s.useState)(!1),[c,v]=(0,s.useState)(!1),[m,f]=(0,s.useState)("public"),p={public:"public",friend:"mutual_followers",secret:"private"},{mixItems:g,seriesItems:_,payItems:x}=(0,s.useMemo)(()=>{let e=t.filter(e=>{var t,l;return!!(null===(t=e.mixInfo)||void 0===t?void 0:t.mixId)&&!(null===(l=e.seriesInfo)||void 0===l?void 0:l.seriesId)}),l=new Set;e.forEach(e=>{var t;let n=null===(t=e.mixInfo)||void 0===t?void 0:t.mixId;!l.has(n)&&l.add(n)});let n=t.filter(e=>{var t;return!!(null===(t=e.seriesInfo)||void 0===t?void 0:t.seriesId)}),r=new Set;return n.forEach(e=>{var t;let l=null===(t=e.seriesInfo)||void 0===t?void 0:t.seriesId;!r.has(l)&&r.add(l)}),{mixItems:e,seriesItems:n,payItems:t.filter(e=>{var t;return!!(null==e?void 0:null===(t=e.chargeInfo)||void 0===t?void 0:t.is_charge_content)}),mixSet:l,seriesSet:r}},[t]),{onlyHasMix:w,isAllCanNotOprate:C,hasCanNotOprateItem:y}=(0,s.useMemo)(()=>{let e=[...new Set([...x.map(e=>e.awemeId),..._.map(e=>e.awemeId)])];return{onlyHasMix:g.length>0&&0===_.length&&0===x.length,hasCanNotOprateItem:x.length>0||_.length>0,isAllCanNotOprate:e.length===t.length}},[g,_,x,t]),I=(0,s.useCallback)(async()=>{var e;if(C){if("public"===m){ee.F.info("已经设为所有人可见");return}ee.F.info("付费作品/短剧需公开可见，不支持修改权限");return}v(!0);let l=new Date().getTime(),i=t.filter(e=>{var t,l;return!(null===(t=e.seriesInfo)||void 0===t?void 0:t.seriesId)&&!(null===(l=e.chargeInfo)||void 0===l?void 0:l.is_charge_content)}).map(e=>e.awemeId),{isSuccess:a=!1,fatalIds:s=[],statusCode:d=-1,statusMsg:u="操作失败, 请稍后重试"}=null!==(e=await (0,rs.TY)({awemeIds:i.join(","),actionType:m}))&&void 0!==e?e:{};if(V.logInstance.sendLog("functionDeleteStatus",{tab_name:r,sub_tab_name:n,function_name:"permission_setting",status:0===d?1:0,item_cnt:i.length}),V.logInstance.sendLog("multiDeletePerformance",{status_code:d,type:m,fail_cnt:s.length,cost:new Date().getTime()-l,item_cnt:i.length}),v(!1),0!==d){ee.F.info(u),null==o||o({method:"permission",fatalIdsCount:0,permissionValue:m,modifyItemIds:[]});return}if(a){y?"public"===m?ee.F.info("已经设为所有人可见"):ee.F.info("已完成批量操作"):"public"===m?ee.F.info("已经设为所有人可见"):"friend"===m?ee.F.info("已经设为互相关注的人可见"):"secret"===m&&ee.F.info("已经设为仅自己可见"),null==o||o({method:"permission",fatalIdsCount:0,permissionValue:m,modifyItemIds:i});return}if(s.length>0){ee.F.info(`已完成批量操作。${s.length}个作品操作失败，请稍后再试`),null==o||o({method:"permission",fatalIdsCount:s.length,permissionValue:m,modifyItemIds:i.filter(e=>!s.includes(e))});return}},[t,o,m,C,y,n,r]),b=(0,s.useMemo)(()=>w?{content:"你选中了公开可见的合集作品，更改权限作品将自动移出合集",title:"选中的合集作品将从合集中移除"}:{title:"仅对普通作品生效",content:"设为非公开作品后，合集作品将自动移出合集，付费作品和短剧作品仍公开可见"},[w]);return d?(0,a.jsx)(lh,{className:rd.container,onCancel:async()=>{null==l||l(),V.logInstance.sendLog("removeConfirmClick",{tab_name:r,sub_tab_name:n,item_cnt:t.length,function_name:"cancel",last_function:"setting"})},onConfirm:async()=>{if(!c)V.logInstance.sendLog("removeConfirmClick",{tab_name:r,sub_tab_name:n,item_cnt:t.length,function_name:"confirm",last_function:"setting"}),await I(),null==i||i()},title:b.title,renderContent:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:rd.content,children:b.content}),c&&(0,a.jsx)(h.gb,{className:rd.loading})]}),closeBtn:!1,maskClosable:!1,cancelBtnText:"取消",confirmBtnText:"确认"}):(0,a.jsx)(lh,{className:rd.container,onCancel:()=>{null==l||l(),V.logInstance.sendLog("functionConfirmClick",{tab_name:r,sub_tab_name:n,item_cnt:t.length,status:p[m],function_name:"cancel"})},onConfirm:async()=>{if(!c){if(V.logInstance.sendLog("functionConfirmClick",{tab_name:r,sub_tab_name:n,item_cnt:t.length,status:p[m],function_name:"confirm"}),(y||w)&&"public"!==m&&!C){u(!0);return}await I(),null==i||i()}},title:"修改作品权限",closeBtn:!1,renderContent:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ru,{permissionValue:m,changePermissionValue:f}),c&&(0,a.jsx)(h.gb,{className:rd.loading})]}),cancelBtnText:"取消",confirmBtnText:"确认",maskClosable:!1})};var rv={container:"PxskyM8v",content:"qww0qGdr",loading:"Z6fMCiQJ"},rm=e=>{let{selectItems:t=[],onCancel:l,currentTab:n,currentSubTab:r,onConfirm:i,resetScrollList:o}=e||{},[d,u]=(0,s.useState)(!1),[c,v]=(0,s.useState)(!1),{mixItems:m,seriesItems:f,payItems:p,seriesSet:g,mixSet:_}=(0,s.useMemo)(()=>{let e=t.filter(e=>{var t,l;return!!(null===(t=e.mixInfo)||void 0===t?void 0:t.mixId)&&!(null===(l=e.seriesInfo)||void 0===l?void 0:l.seriesId)}),l=new Set;e.forEach(e=>{var t;let n=null===(t=e.mixInfo)||void 0===t?void 0:t.mixId;!l.has(n)&&l.add(n)});let n=t.filter(e=>{var t;return!!(null===(t=e.seriesInfo)||void 0===t?void 0:t.seriesId)}),r=new Set;return n.forEach(e=>{var t;let l=null===(t=e.seriesInfo)||void 0===t?void 0:t.seriesId;!r.has(l)&&r.add(l)}),{mixItems:e,seriesItems:n,payItems:t.filter(e=>{var t;return!!(null==e?void 0:null===(t=e.chargeInfo)||void 0===t?void 0:t.is_charge_content)}),mixSet:l,seriesSet:r}},[t]),{onlyHasMix:x,isAllCanNotOprate:w,hasCanNotOprateItem:C}=(0,s.useMemo)(()=>{let e=[...new Set([...p.map(e=>e.awemeId),...f.map(e=>e.awemeId)])];return{onlyHasMix:m.length>0&&0===f.length&&0===p.length,hasCanNotOprateItem:p.length>0||f.length>0,isAllCanNotOprate:e.length===t.length}},[m,f,p,t]),y=0===m.length?`删除后作品将无法找回${"private_post"===r?"":"，建议设为私密作品"}`:`删除后作品将无法找回${"private_post"===r?"":"，建议设为私密作品"}（其中${m.length}个作品在${_.size}个合集中，删除或设为私密后作品将自动移出合集）`,I=(0,s.useCallback)(async()=>{var e;v(!0);let l=new Date().getTime(),{isSuccess:i=!1,fatalIds:a=[],isFailForRisk:s=!1,statusCode:d=-1,statusMsg:u="操作失败, 请稍后重试"}=null!==(e=await (0,rs.TY)({awemeIds:t.map(e=>e.awemeId).join(",")}))&&void 0!==e?e:{};v(!1),V.logInstance.sendLog("functionDeleteStatus",{tab_name:n,sub_tab_name:r,function_name:"delete",status:0===d?1:0,item_cnt:t.length}),V.logInstance.sendLog("multiDeletePerformance",{status_code:d,type:"delete",fail_cnt:s?a.length:0,cost:new Date().getTime()-l,item_cnt:t.length});let c="删除";if(i){ee.F.info(`${c}成功`),null==o||o({method:"delete",fatalIdsCount:0});return}if(0!==d){ee.F.info(u),null==o||o({method:"delete",fatalIdsCount:0});return}s&&a.length>0&&(ee.F.info(`有${a.length}个作品因风险因素未能成功${c}`),null==o||o({method:"delete",fatalIdsCount:a.length}))},[t,o,n,r]),b=(0,s.useCallback)(async()=>{var e;if(w){ee.F.info("付费作品/短剧需公开可见，不支持修改权限");return}let l=new Date().getTime();v(!0);let i=t.filter(e=>{var t,l;return!(null===(t=e.seriesInfo)||void 0===t?void 0:t.seriesId)&&!(null===(l=e.chargeInfo)||void 0===l?void 0:l.is_charge_content)}).map(e=>e.awemeId),{isSuccess:a=!1,fatalIds:s=[],statusCode:d=-1,statusMsg:u="操作失败, 请稍后重试"}=null!==(e=await (0,rs.TY)({awemeIds:i.join(","),actionType:"secret"}))&&void 0!==e?e:{};if(V.logInstance.sendLog("functionDeleteStatus",{tab_name:n,sub_tab_name:r,function_name:"permission_setting",status:0===d?1:0,item_cnt:i.length}),V.logInstance.sendLog("multiDeletePerformance",{status_code:d,type:"secret",fail_cnt:s.length,cost:new Date().getTime()-l,item_cnt:i.length}),v(!1),0!==d){ee.F.info(u),null==o||o({method:"permission",fatalIdsCount:0,permissionValue:"secret"});return}if(a){C?ee.F.info("已完成批量操作"):ee.F.info("已经设为仅自己可见"),null==o||o({method:"permission",fatalIdsCount:0,permissionValue:"secret"});return}if(s.length>0){ee.F.info(`已完成批量操作。${s.length}个作品操作失败，请稍后再试`),null==o||o({method:"permission",fatalIdsCount:s.length,permissionValue:"secret"});return}},[t,o,w,C,n,r]),j=(0,s.useMemo)(()=>x?{title:"选中的合集作品将从合集中移除",content:"你选中了公开可见的合集作品，更改权限作品将自动移出合集"}:{title:"仅对普通作品生效",content:"设为非公开作品后，合集作品将自动移出合集，付费作品和短剧作品仍公开可见"},[x]);return d?(0,a.jsx)(lh,{className:rv.container,onCancel:async e=>{if(!c)null==l||l(),V.logInstance.sendLog("removeConfirmClick",{tab_name:n,sub_tab_name:r,item_cnt:t.length,function_name:"cancel",last_function:"delete"})},onConfirm:async()=>{if(!c)V.logInstance.sendLog("removeConfirmClick",{tab_name:n,sub_tab_name:r,item_cnt:t.length,function_name:"confirm",last_function:"delete"}),await b(),null==i||i()},title:j.title,renderContent:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:rv.content,children:j.content}),c&&(0,a.jsx)(h.gb,{className:rv.loading})]}),closeBtn:!1,maskClosable:!1,cancelBtnText:"取消",confirmBtnText:"确认"}):(0,a.jsx)(lh,{className:rv.container,onCancel:async e=>{if(!c){if(V.logInstance.sendLog("deleteConfirmClick",{tab_name:n,sub_tab_name:r,item_cnt:t.length,function_name:e&&"private_post"!==r?"private":"cancel"}),!e||"private_post"===r){null==l||l();return}if(C&&!w){u(!0);return}e&&await b(),null==l||l()}},onConfirm:async()=>{if(!c)V.logInstance.sendLog("deleteConfirmClick",{tab_name:n,sub_tab_name:r,item_cnt:t.length,function_name:"delete"}),await I(),null==i||i()},title:`确认删除${t.length}个作品？`,closeBtn:!0,maskClosable:!1,renderContent:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:rv.content,children:y}),c&&(0,a.jsx)(h.gb,{className:rv.loading})]}),cancelBtnText:"private_post"===r?"取消":"设为私密",confirmBtnText:"确认删除"})},rf="PMAEcEUR",rh=l("456704"),rp=l("186374"),rg=l("719679");let r_=s.forwardRef(function(){let{awemeInfo:e,collected:t,collectMethod:l,selectType:n,disabledCollectionIds:r,disabledScrollBar:i=!0,awaysReset:o,onMove:d,onClose:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectType:"multi"},c=arguments.length>1?arguments[1]:void 0,[v,m]=(0,s.useState)(!1),f=(0,s.useCallback)(()=>m(!0),[]),h=(0,s.useCallback)(()=>m(!1),[]);return(0,s.useImperativeHandle)(c,()=>({open:f,close:h})),(0,rh.Z)(v,"favorites_modal"),(0,rp.Z)(v,"modal"),(0,s.useEffect)(()=>i?(v?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}):()=>{},[v,i]),(0,a.jsx)(tt.u,{type:"custom",maskClosable:!1,className:rf,isHide:!v,onCancel:()=>m(!1),children:(0,a.jsx)(rg.Z,{show:v,type:"modal",selectType:n,awemeInfo:e,collected:t,collectMethod:l,disabledCollectionIds:r,awaysReset:o,onClose:()=>{m(!1),null==u||u()},onCollectDone:()=>m(!1),onMove:d})})});var rx=l("308936");let rw=e=>{let{onConfirmShow:t,resetScrollList:l,currentSubTab:n,currentTab:r}=e||{},[i,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),c=(0,s.useRef)(null),v=(0,s.useCallback)(e=>{u(e),null==t||t({confirmType:"delete",visible:e})},[u,t]),m=(0,s.useCallback)(e=>{o(e),null==t||t({confirmType:"permission",visible:e})},[o,t]),f=(0,s.useCallback)(e=>{var l,n;e?null===(l=c.current)||void 0===l||l.open():null===(n=c.current)||void 0===n||n.close(),null==t||t({confirmType:"addCollects",visible:e})},[t]),h=(0,s.useCallback)(e=>{if(!d)return;let{selectItems:t=[]}=e||{};return(0,a.jsx)(rm,{currentSubTab:n,currentTab:r,resetScrollList:l,onCancel:()=>{v(!1)},onConfirm:()=>{v(!1)},selectItems:t})},[d,l,v,r,n]),p=(0,s.useCallback)(e=>{if(!i)return;let{selectItems:t=[]}=e||[];return(0,a.jsx)(rc,{currentSubTab:n,currentTab:r,resetScrollList:l,onCancel:()=>{m(!1)},onConfirm:()=>{m(!1)},selectItems:t})},[i,l,m,r,n]),g=(0,s.useCallback)(async(e,t)=>{await Promise.all(e.map(async e=>{let{status_code:l}=await (0,rx.RX)({item_ids:t.map(e=>e.awemeId),item_type:2,to_collects_id:e,update_collects_sort:!0});if(l)throw Error()}))},[]),_=(0,s.useCallback)(async(e,t)=>{if(!!t.length)try{await g(e,t),nl.F.info("添加至收藏夹成功")}catch(e){nl.F.info("添加视频失败")}finally{f(!1)}},[g]);return{renderDeleteConfirmModal:h,renderPermissionConfirmModal:p,renderAddCollectsModal:(0,s.useCallback)(e=>{let{selectItems:t=[]}=e||[];return(0,a.jsx)(r_,{ref:c,selectType:"multi",awaysReset:!0,disabledScrollBar:!0,onMove:e=>_(e,t)})},[]),changeShowDeleteConfirm:v,changeShowPermissionConfirm:m,changeShowAddCollectsConfirm:f}},rC=e=>{let{permissionValue:t="public",changePermissionValue:l}=e;return(0,a.jsx)("div",{className:rd.listContainer,children:(0,a.jsxs)(R.RadioGroup,{className:"test",value:t,onChange:e=>{var t;l(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)},direction:"horizontal",children:[(0,a.jsx)(R.Radio,{value:"public",children:(0,a.jsx)("span",{children:"公开\xb7所有人可见"})}),(0,a.jsx)(R.Radio,{value:"secret",children:(0,a.jsx)("span",{children:"私密\xb7仅自己可见"})})]})})},ry=e=>{let{selectItems:t=[],onCancel:l,currentSubTab:n,currentTab:r,onConfirm:i,resetScrollList:o}=e,[d,u]=(0,s.useState)(!1),[c,v]=(0,s.useState)("public"),m={public:"public",secret:"private"},f=(0,s.useCallback)(async()=>{var e;if(t.every(e=>e.status===n_.Reviewing)){ee.F.info("选中合集审核中，暂不支持设置公开范围");return}if(t.every(e=>e.status===n_.Pending)){ee.F.info("选中合集待发布，暂不支持设置公开范围");return}if(t.every(e=>e.status===n_.Reviewing||e.status===n_.Pending)){ee.F.info("选中合集待发布/审核中，暂不支持设置公开范围");return}u(!0);let l=t.map(e=>e.mixId),{unprocessedIds:i=[],fatalIds:o=[],statusCode:a=-1,statusMsg:s="操作失败, 请稍后重试"}=null!==(e=await l1({mixIds:l.join(","),setStatus:"public"===c?n_.Public:n_.SelfSee}))&&void 0!==e?e:{},d=l.filter(e=>!o.includes(e)&&!i.includes(e));V.logInstance.sendLog("functionDeleteStatus",{tab_name:r,sub_tab_name:n,function_name:"permission_setting",status:0===a?1:0,item_cnt:d.length}),u(!1);let v=0===a&&0===o.length,m=0===a&&o.length>0;return v?(ee.F.info("public"===c?"已经设为所有人可见":"已经设为仅自己可见"),d):m?(ee.F.info(`${o.length}个合集操作失败。仅审核通过的合集支持修改。`),d):(ee.F.info(s),[])},[t,c]);return(0,a.jsx)(lh,{className:rd.container,onCancel:()=>{null==l||l(),V.logInstance.sendLog("functionConfirmClick",{tab_name:r,sub_tab_name:n,item_cnt:t.length,status:m[c],function_name:"cancel"})},onConfirm:async()=>{if(d)return;V.logInstance.sendLog("functionConfirmClick",{tab_name:r,sub_tab_name:n,item_cnt:t.length,status:m[c],function_name:"confirm"});let e=await f();null==i||i(e,"public"===c?n_.Reviewing:n_.SelfSee)},title:"修改合集权限",closeBtn:!1,renderContent:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rC,{permissionValue:c,changePermissionValue:v}),d&&(0,a.jsx)(h.gb,{className:rd.loading})]}),cancelBtnText:"取消",confirmBtnText:"确认",maskClosable:!1})};var rI=e=>{let{selectItems:t=[],onCancel:l,currentTab:n,currentSubTab:r,onConfirm:i}=e||{},[o,d]=(0,s.useState)(!1),u=(0,s.useCallback)(async()=>{var e;d(!0);let l=t.map(e=>e.mixId),{fatalIds:i=[],statusCode:o=-1,statusMsg:a="操作失败, 请稍后重试"}=null!==(e=await lJ({mixIds:l.join(",")}))&&void 0!==e?e:{};d(!1),V.logInstance.sendLog("functionDeleteStatus",{tab_name:n,sub_tab_name:r,function_name:"delete",status:0===o?1:0,item_cnt:t.length});let s=0===o&&0===i.length,u=0===o&&i.length>0;if(s)return ee.F.info("删除成功"),l;if(!u)return ee.F.info(a),[];{ee.F.info(`有${i.length}个合集未能成功删除`);let e=new Set(i);return l.filter(t=>!e.has(t))}},[t]);return(0,a.jsx)(lh,{className:rv.container,onCancel:async e=>{if(!o)V.logInstance.sendLog("deleteConfirmClick",{tab_name:n,sub_tab_name:r,item_cnt:t.length,function_name:"cancel"}),null==l||l()},onConfirm:async()=>{if(o)return;V.logInstance.sendLog("deleteConfirmClick",{tab_name:n,sub_tab_name:r,item_cnt:t.length,function_name:"delete"});let e=await u();null==i||i(e)},title:`确认删除${t.length}个合集？`,closeBtn:!0,maskClosable:!1,renderContent:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:rv.content,children:"合集中的作品仍保留"}),o&&(0,a.jsx)(h.gb,{className:rv.loading})]}),cancelBtnText:"取消",confirmBtnText:"确认删除"})};let rb=e=>{let{onConfirmShow:t,currentSubTab:l,currentTab:n,confirmCallback:r}=e||{},[i,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),c=(0,s.useCallback)(e=>{u(e),null==t||t({confirmType:"delete",visible:e})},[u,t]),v=(0,s.useCallback)(e=>{o(e),null==t||t({confirmType:"permission",visible:e})},[o,t]),m=(0,s.useCallback)(e=>{if(!d)return;let{selectItems:t=[]}=e||{};return(0,a.jsx)(rI,{currentSubTab:l,currentTab:n,onCancel:()=>{c(!1)},onConfirm:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c(!1),null==r||r(e,"delete")},selectItems:t})},[d,c,n,l,r]);return{renderDeleteConfirmModal:m,renderPermissionConfirmModal:(0,s.useCallback)(e=>{if(!i)return;let{selectItems:t=[]}=e||[];return(0,a.jsx)(ry,{currentSubTab:l,currentTab:n,onCancel:()=>{v(!1)},onConfirm:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;v(!1),null==r||r(e,"permission",t)},selectItems:t})},[i,v,n,l,r]),changeShowDeleteConfirm:c,changeShowPermissionConfirm:v}};var rj={PUBLIC:0,0:"PUBLIC",PRIVATE:1,1:"PRIVATE",FRIEND:2,2:"FRIEND"};let rk=s.forwardRef((e,t)=>{let{updateIsSelectDisabled:l,setIsListSelectable:n,selectItems:r,currentTab:i,subTab:o,listRef:d}=e,{renderDeleteConfirmModal:u,renderPermissionConfirmModal:c,changeShowPermissionConfirm:v,changeShowDeleteConfirm:m}=rb({onConfirmShow:e=>{let{visible:t}=e;l(t)},currentSubTab:o,currentTab:i,confirmCallback:(0,s.useCallback)((e,t,l)=>{let r=(null==e?void 0:e.length)>0;if(n(!1),!!r&&!!(null==d?void 0:d.current)){if("delete"===t){setTimeout(()=>{var t;null==d||null===(t=d.current)||void 0===t||t.removeMixes(e)},0);return}if("permission"===t){setTimeout(()=>{var t;null==d||null===(t=d.current)||void 0===t||t.editMixesPermission(e,l)},0);return}}},[])});return(0,s.useImperativeHandle)(t,()=>({changeShowPermissionConfirm:v,changeShowDeleteConfirm:m}),[v,m]),(0,a.jsxs)(a.Fragment,{children:[null==u?void 0:u({selectItems:r}),null==c?void 0:c({selectItems:r})]})}),rN=s.forwardRef((e,t)=>{let{updateIsSelectDisabled:l,setIsListSelectable:n,onManageEndCallback:r,resetScroll:i,selectItems:d,selectedCount:u,listRef:c,currentTab:v,subTab:m,setModifyList:f}=e,{renderDeleteConfirmModal:h,renderPermissionConfirmModal:p,changeShowPermissionConfirm:g,changeShowDeleteConfirm:_}=rw({onConfirmShow:e=>{let{visible:t}=e;l(t)},resetScrollList:e=>{let{fatalIdsCount:t,method:l,permissionValue:a,modifyItemIds:s=[]}=e||{};if(n(!1),"delete"===l)m===tD.VIDEO&&r({manageCount:u-t}),null==i||i();else{if(m===tD.VIDEO){if("permission"===l&&"secret"===a)r({manageCount:u-t}),null==i||i();else if("permission"===l&&["friend","public"].includes(a)){var d,v,h,p;if(0===s.length){null==i||i();return}let e=(null===(v=c.current)||void 0===v?void 0:null===(d=v.getDataList)||void 0===d?void 0:d.call(v))||[];f(s.map(e=>({id:e,permissionValue:a}))),s.forEach(t=>{let l=e.find(e=>e.awemeId===t);l&&("public"===a&&(l.status=(0,M._)((0,o._)({},l.status),{privateStatus:0})),"friend"===a&&(l.status=(0,M._)((0,o._)({},l.status),{privateStatus:2})))}),null===(p=c.current)||void 0===p||null===(h=p.setScrollData)||void 0===h||h.call(p,{dataList:[...e]})}}m===tD.SECRET_VIDEO&&"secret"!==a&&"permission"===l&&(r({manageCount:u-t,isAdd:!0}),null==i||i())}},currentSubTab:m,currentTab:v});return(0,s.useImperativeHandle)(t,()=>({changeShowPermissionConfirm:g,changeShowDeleteConfirm:_}),[g,_]),(0,a.jsxs)(a.Fragment,{children:[null==h?void 0:h({selectItems:d}),null==p?void 0:p({selectItems:d})]})});var rS=s.forwardRef((e,t)=>{let{subTab:l}=e;return l===tD.COMPILATION?(0,a.jsx)(rk,(0,M._)((0,o._)({},e),{ref:t})):(0,a.jsx)(rN,(0,M._)((0,o._)({},e),{ref:t}))});let rE=s.forwardRef((e,t)=>{let{currentMixId:l,currentMixInfo:n,userInfo:r,topOffset:i=0,topNavHeight:o=60,abTestData:d}=e,u=(0,s.useRef)(null),[c,v]=(0,s.useState)(),{setSelectItems:m}=(0,s.useContext)(lw),{getCurrentNumber:f,loadVideos:h}=(0,s.useContext)(rl),p=(0,s.useContext)(ra),{sortDataList:g}=(0,s.useContext)(rt),_=(0,s.useCallback)(e=>n$()([].concat(e).concat(g),e=>"string"==typeof e?e:null==e?void 0:e.awemeId),[g]),x=(0,l8.o)(null==r?void 0:r.secUid),w=(0,s.useRef)(),C=(0,s.useRef)(0),y=(0,s.useRef)({}),I=(0,s.useRef)(1),b=(0,s.useRef)(!0),j=(0,s.useCallback)(async()=>{var e,t;let{data:r=[],maxCursor:i=0,hasMore:o=0,statusCode:a,whaleInfo:s}=await nY.dP.request({cached:!1,consume:!0,params:{userId:x,maxCursor:C.current,count:18,whaleCutToken:null===(e=y.current)||void 0===e?void 0:e.whaleCutToken,needTimeList:!1},fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}}),d=r.filter(e=>{var t,l,n,r,i,o,a;let s=(null!==(o=null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.privateStatus)&&void 0!==o?o:rj.PUBLIC)===rj.PUBLIC&&(null!==(a=null==e?void 0:null===(l=e.status)||void 0===l?void 0:l.partSee)&&void 0!==a?a:nq.mI.All)===nq.mI.All,d=((null==e?void 0:null===(r=e.cooperationInfo)||void 0===r?void 0:null===(n=r.cooperationCreators)||void 0===n?void 0:n.length)||0)>1,u=(0,nQ.$m)(e,!0),c=e.tag.inReviewing||[1,2,4].includes(null==e?void 0:null===(i=e.tag)||void 0===i?void 0:i.reviewStatus),v=null==e?void 0:e.isSlides,m=(null==e?void 0:e.awemeType)===nK.e.Article;return s&&!v&&!c&&!d&&!u&&!m});I.current=o,!a&&(C.current=i),b.current=!1;let u=null===(t=(null!=d?d:[]).find(e=>{var t;return(null===(t=e.mixInfo)||void 0===t?void 0:t.mixId)===l}))||void 0===t?void 0:t.mixInfo;if(u){let e=4===u.status,t=Number(u.updateTime)>Number(n.updateTime);(e||t)&&p(e?null:u,"all")}let c=h(d);return null==m||m(e=>0===c.length?e:[...e,...c]),{data:d,maxCursor:i,hasMore:o,statusCode:a,whaleDecisionCustom:null==s?void 0:s.whaleDecisionCustom,clearBefore:!1}},[x,d]),k=(0,s.useCallback)(e=>{var t;let n=!!(null==e?void 0:null===(t=e.mixInfo)||void 0===t?void 0:t.mixId)&&e.mixInfo.mixId!==l;return n?{disabled:n,disabledDesc:"已在其他合集",disabledToastInfo:"该作品无法加入合集",type:"toast"}:{disabled:!1,disabledDesc:""}},[l]);(0,s.useImperativeHandle)(t,()=>{var e,t,l,n,r,i,o,a,s;return{loadMoreData:null===(e=w.current)||void 0===e?void 0:e.loadMoreData,locateSelectVideo:null===(t=w.current)||void 0===t?void 0:t.locateSelectVideo,reset:null===(l=w.current)||void 0===l?void 0:l.reset,reload:null===(n=w.current)||void 0===n?void 0:n.reload,getTotal:null===(r=w.current)||void 0===r?void 0:r.getTotal,resetRes:null===(i=w.current)||void 0===i?void 0:i.resetRes,setScrollData:null===(o=w.current)||void 0===o?void 0:o.setScrollData,getDataList:null===(a=w.current)||void 0===a?void 0:a.getDataList,scrollCheck:null===(s=w.current)||void 0===s?void 0:s.scrollCheck}});let N=(0,s.useCallback)((e,t)=>{var l;return null!==(l=f(e.awemeId))&&void 0!==l?l:null},[]),S=(0,nG.U)();return(0,ni.o)(()=>{var e,t;null===(t=w.current)||void 0===t||null===(e=t.scrollCheck)||void 0===e||e.call(t)},[]),(0,a.jsx)("div",{className:nX.container,ref:e=>{if(!!e)v(e),u.current=e},children:(0,a.jsx)(re,{pause:!S,ref:w,uid:x,tab:"post",currentTab:"post",fetchMoreData:j,retryTimes:5,getItemSelectedDisabled:k,topNavHeight:o,topOffset:i,itemClassName:nX.item,columnCount:5,panelNoData:(0,a.jsx)(B.H,{className:nX.empty,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"暂无可添加作品～"}),showPermissionIcon:!0,scrollRef:u,getMaskIndex:N,scrollContainerEl:c,dataListWrapper:_})})}),rL=s.forwardRef((e,t)=>{let{currentMixId:l,currentMixInfo:n,userInfo:r,getSortId:i}=e,{moveVideo:o,loadVideos:d,getCurrentNumber:u,isOldMixAwemeListLoadedRef:c}=(0,s.useContext)(rl),{sortDataList:v}=(0,s.useContext)(rt),m=(0,s.useRef)(v),f=(0,s.useRef)(null),[h,p]=(0,s.useState)(),{setSelectItems:g}=(0,s.useContext)(lw),_=(0,s.useContext)(ra),x=(0,l8.o)(null==r?void 0:r.secUid),w=(0,s.useRef)(),C=(0,s.useRef)(0),y=(0,s.useRef)(0),I=(0,s.useRef)(1),b=(0,s.useRef)(!0),j=(0,s.useCallback)(async()=>{let{mixInfo:e,statusCode:t=-1}=await (0,lZ.vf)({mixId:l});if(0===t){let t=4===e.status,l=Number(e.updateTime)>Number(n.updateTime);(t||l)&&_(t?null:e,"selected")}if(c.current)return{data:m.current,maxCursor:0,hasMore:0,statusCode:0};let{logPb:r,statusCode:i,data:o=[],cursor:a,hasMore:s}=await (0,lZ.FF)({mixId:l,cursor:y.current,count:50,mixScene:1});I.current=1===s?1:0,!i&&(C.current=y.current,y.current=a),b.current=!1;let u=d(o);return null==g||g(e=>0===u.length?e:[...e,...u]),{data:o,maxCursor:a,hasMore:s,statusCode:i}},[x]),k=(0,s.useCallback)(e=>({disabled:!1,disabledDesc:""}),[]);(0,s.useImperativeHandle)(t,()=>{var e,t,l,n,r,i,o,a;return{loadMoreData:null===(e=w.current)||void 0===e?void 0:e.loadMoreData,locateSelectVideo:null===(t=w.current)||void 0===t?void 0:t.locateSelectVideo,reset:null===(l=w.current)||void 0===l?void 0:l.reset,reload:null===(n=w.current)||void 0===n?void 0:n.reload,getTotal:null===(r=w.current)||void 0===r?void 0:r.getTotal,resetRes:null===(i=w.current)||void 0===i?void 0:i.resetRes,setScrollData:null===(o=w.current)||void 0===o?void 0:o.setScrollData,getDataList:null===(a=w.current)||void 0===a?void 0:a.getDataList}});let N=(0,s.useCallback)((e,t)=>{var l;return null!==(l=u(e.awemeId))&&void 0!==l?l:null},[]),S=(0,s.useCallback)(async(e,t,l,r)=>{var i,a,s,d;let c=t.findIndex(t=>t===e),v=null!==(a=u(t[c]))&&void 0!==a?a:-1;if(v<=0)return!0;let m=-1,f=-1;for(let e=c+1;e<t.length;e++){let l=null!==(s=u(t[e]))&&void 0!==s?s:-1;if(l>0){m=l;break}}if(1===m)f=1;else if(-1===m)for(let e=c-1;e>=0;e--){let l=null!==(d=u(t[e]))&&void 0!==d?d:-1;if(l>0){f=Math.max(v,l);break}}else f=v>m?m:m-1;return f>=1&&o(e,f),nV.sendLog("dragDropCompilationPost",{compilation_id:null==n?void 0:n.mixId,compilation_name:null==n?void 0:n.mixName,status:(null==n?void 0:n.status)===n_.Public?"public":"private",author_id:null==n?void 0:null===(i=n.author)||void 0===i?void 0:i.uid,group_id:null==r?void 0:r.awemeId,before_rank_order:v-1,after_rank_order:f-1}),!0},[]);return(0,a.jsx)("div",{className:nX.container,ref:e=>{if(!!e)p(e),f.current=e},children:(0,a.jsx)(re,{ref:w,uid:x,tab:"post",currentTab:"post",fetchMoreData:j,retryTimes:5,getItemSelectedDisabled:k,itemClassName:nX.item,columnCount:5,panelNoData:(null==v?void 0:v.length)>0?(0,a.jsx)("div",{}):(0,a.jsx)(B.H,{className:nX.empty,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"暂无已选作品,请去添加"}),showPermissionIcon:!0,scrollContainerEl:h,scrollRef:f,getMaskIndex:N,getSortId:i,onSort:S,sortDataList:v,customDataListCtx:rt,defaultFetchAllData:!0})})}),rT=e=>e.awemeId,rM=[{key:"all",label:"添加作品"},{key:"selected",label:"已选作品"}],rR=e=>{let{userInfo:t,mixInfo:l,onClose:n,currentTab:r,setCurrentTab:i}=e,{mixCount:o,getManageResult:d,syncMixAwemeListOnTabChange:u,isOldMixAwemeListLoadedRef:c}=(0,s.useContext)(rl),{editMixAweme:v}=ro(),m=async()=>{let{result:e,currentAwemeList:t,hasOperate:i}=d();if(!c.current){ee.F.info("当前合集内视频尚未加载完成，请稍后再试");return}if(e.addItemIds.split(",").length>100){ee.F.info("单次最多添加100个视频");return}nV.sendLog("compilationPostConfirm",{tab_name:"all"===r?"add_post":"select_post",compilation_id:null==l?void 0:l.mixId,compilation_name:null==l?void 0:l.mixName,status:(null==l?void 0:l.status)===n_.Public?"public":"private",is_effective_operation:i?1:0,function_name:"save"});let{statusCode:a=4,statusMsg:s="服务异常，请稍后再试"}=await l4(e);if(0===a){ee.F.info("操作成功");let e=t.reduce((e,t)=>{var l,n;return e+(null!==(n=null==t?void 0:null===(l=t.stats)||void 0===l?void 0:l.playCount)&&void 0!==n?n:0)},0);v(l.mixId,o,e)}else ee.F.info(s);n()};return(0,nH.Z)(()=>{"selected"===r&&(null==u||u())},[r]),(0,a.jsxs)("div",{className:nz.panel,children:[(0,a.jsxs)("div",{className:nz.header,children:[(0,a.jsxs)("div",{className:nz.title,children:[(0,a.jsx)("div",{className:nz.mixName,children:l.mixName}),(0,a.jsxs)("div",{children:["共",o,"集"]})]}),(0,a.jsxs)("div",{className:nz.buttons,children:[(0,a.jsx)(R.Button,{className:nz.cancel,onClick:()=>{nV.sendLog("compilationPostConfirm",{tab_name:"all"===r?"add_post":"select_post",compilation_id:null==l?void 0:l.mixId,compilation_name:null==l?void 0:l.mixName,status:(null==l?void 0:l.status)===n_.Public?"public":"private",is_effective_operation:0,function_name:"cancel_icon"}),n()},type:"secondary",theme:"solid",children:"取消"}),(0,a.jsx)(R.Button,{className:nz.save,onClick:m,theme:"solid",children:"保存"})]})]}),(0,a.jsx)(R.Tabs,{keepDOM:!0,type:"line",lazyRender:!1,activeKey:r,onTabClick:(e,t)=>{i(e)},className:f()(nz.tabs,"user-mix-manage-modal"),tabPaneMotion:!1,children:null==rM?void 0:rM.map(e=>(0,a.jsxs)(R.TabPane,{tab:e.label,itemKey:e.key,className:nz.tabPanel,children:["all"===e.key&&(0,a.jsx)(nW.O,{active:"all"===r,className:nz.keepAlive,children:(0,a.jsx)(rE,{userInfo:t,currentMixId:l.mixId,currentMixInfo:l})}),"selected"===e.key&&(0,a.jsx)(nW.O,{active:"selected"===r,className:nz.keepAlive,children:(0,a.jsx)(rL,{userInfo:t,currentMixId:l.mixId,currentMixInfo:l,getSortId:rT})})]},`panelKey_${e.key}`))})]})},rP=e=>{let[t,l]=(0,s.useState)(!0),{addVideos:n,removeVideos:r}=(0,s.useContext)(rl),{initTab:i}=e,[d,u]=(0,s.useState)(i),c=l_({maxSelectedCount:1e5,addDescription:()=>"",onManageEndCallback:()=>{},tabName:"mix",subTabName:"video",isListSelectable:t,setIsListSelectable:l,onSessionMultiEnd:(0,s.useCallback)((e,t)=>{let l=[],i=[];(null==t?void 0:t.length)===0&&(null==e?void 0:e.length)?i=e:(null==e?void 0:e.length)===0&&(null==t?void 0:t.length)?l=t:(l=nO()(t,e,e=>e.awemeId),i=nO()(e,t,e=>e.awemeId)),l.length&&n(l),i.length&&r(i)},[])});return(0,a.jsx)(lw.Provider,{value:(0,o._)({},c),children:(0,a.jsx)(rR,(0,M._)((0,o._)({},e),{currentTab:d,setCurrentTab:u}))})},rD=e=>{let{mixInfo:t,initTab:l,onClose:n}=e,{refreshMixInfo:r,removeMixes:i}=ro(),[d,u]=(0,s.useState)(Date.now().toString()),[c,v]=(0,s.useState)(l),m=(0,s.useCallback)(function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;e?r(e):i([t.mixId]),v(o);let a=null===e;ee.F.info(a?"检测到当前合集已被删除，当前列表将关闭":"检测到合集有变更，当前列表将刷新获取最新数据"),setTimeout(()=>{a?n():u(Date.now().toString())},1e3)},[]);return(0,a.jsx)(ra.Provider,{value:m,children:(0,a.jsx)(ef.T6,{className:nz.container,children:(0,a.jsx)(rn,{mixInfo:t,children:(0,a.jsx)(rP,(0,M._)((0,o._)({},e),{initTab:c}))})},d)})},rA=e=>{let{mixInfo:t,userInfo:l,className:n,onClick:r,type:i,edit:o,children:d,disableDescription:u=""}=e,[c,v]=(0,s.useState)(!1),m=(0,s.useCallback)(()=>{v(!1)},[]),h="create"===i?"创建合集":"修改合集";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{onClick:()=>{u?ee.F.info(u):v(!0),null==r||r()},className:ny.pointer,children:d||(0,a.jsx)(R.Button,{className:f()(ny.btn,n),theme:"solid",children:h})}),c&&(0,a.jsx)(em.h,{children:(0,a.jsx)(nB,{type:i,title:h,userInfo:l,mixInfo:t,onClose:m,edit:o})})]})},rF=s.forwardRef((e,t)=>{let{mixInfo:l,userInfo:n,className:r,onClick:i,type:o,title:d,disableDescription:u}=e,[c,v]=(0,s.useState)(!1),m=(0,s.useCallback)(()=>{u?ee.F.info(u):v(!0),null==i||i()},[u,i]),h=(0,s.useCallback)(()=>{v(!1)},[]);return(0,s.useImperativeHandle)(t,()=>({openModal:m})),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.Button,{className:f()(ny.btn,r),onClick:m,theme:"solid",children:d}),c&&(0,a.jsx)(em.h,{children:(0,a.jsx)(rD,{initTab:o,userInfo:n,mixInfo:l,onClose:h})})]})}),rV=s.forwardRef((e,t)=>{var l;let{className:n="",userInfo:r,mixInfo:i}=e,{type:o,changeType:d}=(0,ts.P)({delayDisappear:100}),[u,c]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!u)return;let e=()=>{d(!0)},t=()=>{d(!1)};return u.addEventListener("mouseenter",e),u.addEventListener("mouseleave",t),()=>{u.removeEventListener("mouseenter",e),u.removeEventListener("mouseleave",t)}},[u,d]);let{editMixInfo:v}=ro(),m=(0,s.useCallback)(async e=>{let{mixId:t,name:l,desc:n,avatar:r,avatarUri:o}=e,{statusCode:a,statusMsg:s}=await l5({mixId:t,mixName:l,mixDesc:n,mixCover:o});return(nV.sendLog("modifyCompilationComfirm",{compilation_id:t,compilation_name:l,status:(null==i?void 0:i.status)===n_.Public?"public":"private",function_name:"save"}),0===a)?(setTimeout(()=>{v({mixId:t,mixName:l,mixDesc:n,mixCover:r,coverUri:o})},0),""):s||"服务异常，请稍后再试"},[]),h=e=>{nV.sendLog(e,{compilation_id:null==i?void 0:i.mixId,compilation_name:null==i?void 0:i.mixName,status:(null==i?void 0:i.status)===n_.Public?"public":"private"}),d(!1)},p=(null==i?void 0:i.status)===n_.Reviewing,g=!!(null==i?void 0:null===(l=i.chargeInfo)||void 0===l?void 0:l.chargeType),_="";return p?_="合集审核中，暂不支持编辑":g&&(_="付费合集不支持编辑"),(0,a.jsxs)("div",{onClick:e=>{e.stopPropagation(),"INPUT"!==e.target.tagName&&e.preventDefault()},ref:c,title:"",className:ny.more,children:[(0,a.jsx)(ep.z,{svg:(0,a.jsx)(nI.Z,{}),className:f()(ny.moreIcon,ny.tabType,n,{[ny.active]:o})}),(0,a.jsxs)("div",{className:f()(ny.morePanel,{[ny.visible]:o}),children:[(0,a.jsx)(rA,{type:"edit",disableDescription:_,userInfo:r,mixInfo:i,edit:m,onClick:()=>h("modifyCompilationClick")}),(0,a.jsx)(rF,{type:"selected",title:"作品管理",disableDescription:_,userInfo:r,mixInfo:i,onClick:()=>h("postManageClick")}),(0,a.jsx)(rF,{ref:t,type:"all",title:"添加作品",disableDescription:_,userInfo:r,mixInfo:i,onClick:()=>h("addPostClick")})]})]})});var rB=e=>{var t,l,n;let{info:r,rank:i,userInfo:o,currentTab:d}=e,{isSeries2Mix:u}=r,{isSelf:c}=(0,s.useContext)(Z)||{},[v,m]=(0,nx.Z)(),[h,p]=(0,s.useState)(!1),g=(null==r?void 0:r.status)===n_.SelfSee,_=(null==r?void 0:r.status)===n_.Pending,x=(null==r?void 0:r.status)===n_.Reviewing,w=lV(),C=c&&w&&!u,[y,I]=(0,s.useState)(!!u||!_&&!x),b=(0,s.useRef)(null),j="favorite_collection"===d&&!!r.hasUpdatedEpisode&&y,k=c?24:0;j&&(k+=((null==b?void 0:null===(n=b.current)||void 0===n?void 0:n.offsetWidth)||42)+4),g?k+=0===k?14:16:(_||x)&&(k+=40);let N=(0,s.useMemo)(()=>u?(0,eZ.$y)(null==r?void 0:r.seriesId,1,`previous_page=${(0,e1.yW)()}`):(0,eZ.$y)(null==r?void 0:r.mixId,1,`previous_page=${(0,e1.yW)()}`),[u,null==r?void 0:r.seriesId,null==r?void 0:r.mixId]),S=(0,s.useRef)(null),{getLatestCreatedMixId:E,clearLatestCreatedMixId:L}=ro();(0,s.useEffect)(()=>{if(E()===r.mixId){var e;L(),null===(e=S.current)||void 0===e||e.openModal()}},[]),(0,s.useEffect)(()=>{if(m&&!h){if(p(!0),"favorite_collection"===d){V.logInstance.sendLog("compilationCoverShow",{enter_from:(0,e1.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:(null==r?void 0:r.isSeries2Mix)?r.seriesId:r.mixId});return}tH.sendLog("collectionCoverShow",{enter_from:(0,e1.yW)(),compilation_id:(null==r?void 0:r.isSeries2Mix)?r.seriesId:r.mixId,compilation_video_cnt:r.totalEpisode,author_id:o.uid,group_id:""})}},[m]);let T=(null==r?void 0:null===(t=r.chargeInfo)||void 0===t?void 0:t.chargeType)===1||(null==r?void 0:null===(l=r.chargeInfo)||void 0===l?void 0:l.chargeType)===3,M=u?r.seriesName:r.mixName;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.a,{className:ny.mixCard,href:N,title:M,target:"_blank",rel:"noopener noreferrer",onClick:e=>{if("favorite_collection"===d){V.logInstance.sendLog("compilationCoverClick",{enter_from:(0,e1.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:(null==r?void 0:r.isSeries2Mix)?r.seriesId:r.mixId}),I(!1);return}tH.sendLog("collectionCoverClick",{enter_from:(0,e1.yW)(),compilation_id:(null==r?void 0:r.isSeries2Mix)?r.seriesId:r.mixId,compilation_video_cnt:r.totalEpisode,author_id:o.uid,rank:i}),!r.totalEpisode&&(ee.F.info("创作者还没有为这个合集添加视频"),e.preventDefault())},children:(0,a.jsxs)("div",{className:ny.item,ref:v,children:[(0,a.jsxs)("div",{className:ny.cover,children:[(0,a.jsx)(nw.Q,{src:r.cover,alt:M,iconWidth:30,iconHeight:88,imgClass:ny.image}),T&&(0,a.jsx)("div",{className:ny.payTag,children:"付费"})]}),(0,a.jsxs)("div",{className:ny.content,children:[(0,a.jsxs)("div",{className:f()(ny.title,ny.singleLine),children:[(0,a.jsx)("div",{className:ny.name,style:{maxWidth:`calc(100% - ${k}px)`},children:M}),(0,a.jsx)(()=>g?(0,a.jsx)(ep.z,{initialMounted:!0,svg:(0,a.jsx)(nC.Z,{}),className:f()(ny.iconSvg,{[ny.tag]:j})}):_||x?(0,a.jsx)("span",{className:ny.statusTag,children:x?"审核中":"待发布"}):null,{}),j&&(0,a.jsxs)("span",{ref:b,className:ny.updatedTag,children:["更新",r.hasUpdatedEpisode,"集"]})]}),(0,a.jsxs)("p",{className:ny.count,children:[(0,ed.qe)(r.playVV)," 播放"]}),(0,a.jsxs)("p",{className:ny.episode,children:[(0,a.jsxs)("span",{children:["更新至 ",r.totalEpisode," 集"]}),!!r.watchedEpisode&&(0,a.jsxs)("span",{children:["（上次看到 ",r.watchedEpisode," 集）"]})]})]})]})}),C&&(0,a.jsx)(rV,{ref:S,userInfo:o,mixInfo:r})]})},rU={collection:"Uesq6GtD",header:"X718qBG3",title:"mstVNN2Z",enter:"ngdxdl_C",expand:"jCHq01pC",down:"U9k0tytg",list:"ek9O6CWD",container:"oY1UWYfy",item:"FJjqvc48",more:"JvCd9N3c",noMore:"jrzu3rWD"},rO=l("907831"),rH=l.n(rO);let rW=e=>{let{scrollListRef:t,userInfo:l}=e,n=(0,s.useRef)(""),r=(0,s.useCallback)(()=>n.current,[]),i=(0,s.useCallback)(()=>{n.current=""},[]),o=(0,s.useCallback)(e=>{var l;if(!(null==t?void 0:t.current))return;let n=t.current.getDataList();null==t||null===(l=t.current)||void 0===l||l.setScrollData({dataList:n.map(t=>{if(t.mixId!==e.mixId)return t;let l=rH()(t);return l.mixName=e.mixName,l.desc=e.desc,l.cover=e.cover,l.status=e.status,l.updateTime=e.updateTime,l.currentEpisode=e.currentEpisode,l.totalEpisode=e.totalEpisode,l.playVV=e.playVV,l})})},[]),a=(0,s.useCallback)(e=>{var r;let{mixId:i,mixName:o,mixDesc:a,mixCover:s,coverUri:d}=e;if(!(null==t?void 0:t.current))return;let u={cover:s,coverUri:d,desc:a,mixId:i,mixName:o,status:0,playVV:0,collectVV:0,currentEpisode:0,totalEpisode:0,hasUpdatedEpisode:0,isCollected:0,author:{uid:null==l?void 0:l.uid,secret:l.secret},mixType:0,updateTime:(Date.now()+6e4).toString().slice(0,-3)},c=t.current.getDataList();n.current=i,null==t||null===(r=t.current)||void 0===r||r.setScrollData({dataList:[u,...c]})},[]),d=(0,s.useCallback)(e=>{var l;if(!(null==t?void 0:t.current))return;let n=t.current.getDataList(),r=new Set(e);null==t||null===(l=t.current)||void 0===l||l.setScrollData({dataList:n.filter(e=>!r.has(e.mixId))})},[]),u=(0,s.useCallback)(e=>{var l;let{mixId:n,mixName:r,mixDesc:i,mixCover:o,coverUri:a}=e;if(!(null==t?void 0:t.current))return;let s=t.current.getDataList();null==t||null===(l=t.current)||void 0===l||l.setScrollData({dataList:s.map(e=>{if(e.mixId!==n)return e;let t=rH()(e);return t.mixName=r,t.desc=i,t.cover=o,t.coverUri=a,t.updateTime=(Date.now()+6e4).toString().slice(0,-3),t.status=t.status===n_.Public?n_.Reviewing:t.status,t})})},[]),c=(0,s.useCallback)((e,l)=>{var n;if(!(null==t?void 0:t.current))return;let r=t.current.getDataList(),i=new Set(e);null==t||null===(n=t.current)||void 0===n||n.setScrollData({dataList:r.map(e=>{if(!i.has(e.mixId))return e;let t=rH()(e);return t.status=l,t.updateTime=(Date.now()+6e4).toString().slice(0,-3),t})})},[]),v=(0,s.useCallback)((e,l,n)=>{var r;if(!(null==t?void 0:t.current))return;let i=t.current.getDataList();null==t||null===(r=t.current)||void 0===r||r.setScrollData({dataList:i.map(t=>{if(t.mixId!==e)return t;let r=rH()(t);return r.totalEpisode=l,r.playVV=n,r.updateTime=(Date.now()+6e4).toString().slice(0,-3),r.status===n_.Pending&&l&&(r.status=n_.Reviewing),r})})},[]);return(0,s.useMemo)(()=>({createMix:a,removeMixes:d,editMixInfo:u,editMixesPermission:c,editMixAweme:v,getLatestCreatedMixId:r,clearLatestCreatedMixId:i,refreshMixInfo:o}),[a,d,u,c,v,r,i,o])};var rz=l("238899"),rZ=l("141480");let r$=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:n,setAwemeInfoList:r,mixInfo:i,close:a}=e,d=(0,s.useRef)({cursor:0,hasMore:1,statusCode:-1,lastMixVideoIndex:-1}),u=(0,s.useRef)(t),c=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let e=!1;return(async()=>{var t,n,s,u,v;c.current=!0;let m=await (0,rz.Lz)({mixId:null==i?void 0:i.mixId,cursor:null===(t=d.current)||void 0===t?void 0:t.cursor,count:20});if(c.current=!1,(null!==(s=null==m?void 0:null===(n=m.data)||void 0===n?void 0:n.length)&&void 0!==s?s:0)!==0){d.current={cursor:null==m?void 0:m.cursor,hasMore:null==m?void 0:m.hasMore,statusCode:null==m?void 0:m.statusCode,lastMixVideoIndex:(null==m?void 0:null===(u=m.data)||void 0===u?void 0:u.length)-1};let t=null==m?void 0:null===(v=m.data)||void 0===v?void 0:v.map(e=>{let{cover:t,status:l,playVV:n}=i||{};return e.mixInfo&&(e.mixInfo.cover=t,e.mixInfo.status=l,e.mixInfo.playVV=n),(0,o._)({},e)});if(e)return;r(t||[]),l(0)}else(null==m?void 0:m.statusCode)===0?ee.F.info("当前作品不可见"):ee.F.info("服务异常，请稍后重试"),a()})(),()=>{e=!0}},[i]),(0,s.useEffect)(()=>{-1!==u.current&&-1!==t&&t>u.current&&t>d.current.lastMixVideoIndex&&u.current===d.current.lastMixVideoIndex&&ee.F.info("暂无更多合集, 已为你播放推荐视频"),u.current=t},[t]),(0,s.useEffect)(()=>{5>Math.abs(Number(null==n?void 0:n.length)-t)&&-1!==t&&!c.current&&(async()=>{var e,l,o,a;if((null===(e=d.current)||void 0===e?void 0:e.hasMore)===1){c.current=!0;let e=await (0,rz.Lz)({mixId:null==i?void 0:i.mixId,cursor:null===(l=d.current)||void 0===l?void 0:l.cursor,count:20});c.current=!1,d.current={cursor:null==e?void 0:e.cursor,hasMore:null==e?void 0:e.hasMore,statusCode:null==e?void 0:e.statusCode,lastMixVideoIndex:(null==n?void 0:n.length)+(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.length)-1},r(t=>[...t,...(null==e?void 0:e.data)||[]])}else{c.current=!0;let e=await (0,rZ.b)({awemeId:null===(a=n[t])||void 0===a?void 0:a.awemeId,count:20,filterGids:n.map(e=>null==e?void 0:e.awemeId).join(",")||""});c.current=!1,r(t=>[...t,...(null==e?void 0:e.awemeList)||[]])}})()},[n,t]),null},rK=e=>{var t;let{currentNumber:l,setCurrentNumber:n,awemeInfoList:r,setAwemeInfoList:i,seriesInfo:a,close:d,refNextVideoCallBack:u}=e,c=(0,s.useRef)({cursor:Math.max(Number(null!==(t=a.watchedEpisode)&&void 0!==t?t:0)-1,0),hasMore:1,statusCode:-1,lastSeriesVideoIndex:-1}),v=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let e=!1;return(async()=>{var t,l,r,s,u;v.current=!0;let m=await (0,lz.Ab)({seriesId:(null==a?void 0:a.mixId)||(null==a?void 0:a.seriesId),cursor:null===(t=c.current)||void 0===t?void 0:t.cursor,count:20});if(v.current=!1,(null!==(r=null==m?void 0:null===(l=m.data)||void 0===l?void 0:l.length)&&void 0!==r?r:0)!==0){c.current={cursor:null==m?void 0:m.cursor,hasMore:null==m?void 0:m.hasMore,statusCode:null==m?void 0:m.statusCode,lastSeriesVideoIndex:(null==m?void 0:null===(s=m.data)||void 0===s?void 0:s.length)-1};let t=null==m?void 0:null===(u=m.data)||void 0===u?void 0:u.map(e=>{let{cover:t,status:l,playVV:n}=a||{};return e.seriesInfo&&(e.seriesInfo.cover=t,e.seriesInfo.status=l,e.seriesInfo.playVV=n),(0,o._)({},e)});if(e)return;i(t||[]),n(0)}else ee.F.info("该合集暂无法查看，请浏览其他内容"),d()})(),u.current=()=>ee.F.infoInModalVideo("暂无更多作品"),()=>{e=!0}},[a]),(0,s.useEffect)(()=>{5>Math.abs(Number(null==r?void 0:r.length)-l)&&-1!==l&&!v.current&&(async()=>{var e,t,l;if((null===(e=c.current)||void 0===e?void 0:e.hasMore)===1){v.current=!0;let e=await (0,lz.Ab)({seriesId:(null==a?void 0:a.mixId)||(null==a?void 0:a.seriesId),cursor:null===(t=c.current)||void 0===t?void 0:t.cursor,count:20});v.current=!1,c.current={cursor:null==e?void 0:e.cursor,hasMore:null==e?void 0:e.hasMore,statusCode:null==e?void 0:e.statusCode,lastSeriesVideoIndex:(null==r?void 0:r.length)+(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.length)-1},i(t=>[...t,...(null==e?void 0:e.data)||[]])}})()},[r,l,a]),null},rG=e=>(null==e?void 0:e.isSeries2Mix)?e.seriesId:e.mixId,rY=e=>e.isSeries2Mix,rq=e=>{var t;return e.isSeries2Mix?{disabled:!0,disabledDesc:"该合集不支持批量管理",disabledToastInfo:"该合集不支持批量管理",type:"toast"}:(null==e?void 0:null===(t=e.chargeInfo)||void 0===t?void 0:t.chargeType)?{disabled:!0,disabledDesc:"付费合集不支持批量管理",disabledToastInfo:"付费合集不支持批量管理",type:"toast"}:{disabled:!1,disabledDesc:""}},rQ={top:0,bottom:16,left:0,right:16};var rX=s.forwardRef((e,t)=>{var l,n,r;let{userInfo:i,currentTab:d,isListSelectable:u,topNavHeight:c=60}=e,v=(0,l8.o)(null==i?void 0:i.secUid),{isSelf:m,updateFollowStatus:h}=(0,s.useContext)(Z)||{},p=(0,eF.useUserInfoContext)()||{},g=(0,z._)()||{},[_,x]=(0,s.useState)(!1),[C,y]=(0,s.useState)(),[I,b]=(0,s.useState)(0),j=(0,s.useRef)(0),k=(0,s.useRef)(!0),N=(0,s.useRef)(0),S=(0,s.useRef)(0),E=(0,s.useRef)(!0),L=(0,s.useMemo)(()=>{let{isBlock:e,isBlocked:t,secret:l,followStatus:n}=i;return!!(e||t||!m&&l&&2!==n)},[m,i]),{reloadForPostDelete:T,isPostDelete:R}=(0,s.useContext)(t8),P=(0,s.useRef)(null),D=(0,s.useCallback)(()=>{var e,t,l,n;E.current=!0,N.current=0,x(!1),null==P||null===(t=P.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),j.current=0,null==P||null===(n=P.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)},[]);(0,s.useEffect)(()=>{R&&D()},[R,D]);let A=(0,s.useCallback)(async()=>{if(E.current){let{data:e,cursor:t,hasMore:l,statusCode:n,total:r}=await (0,lz.Kl)({uid:v,cursor:N.current,count:18,readNewMix:!0});return N.current=t,S.current=r,!l&&(E.current=!1),{data:e,cursor:t,hasMore:!0,statusCode:n}}let{data:e,cursor:t,hasMore:l,statusCode:n,total:r}=await (0,lZ.HN)({uid:v,cursor:j.current,count:18,listScene:3});return j.current=t,k.current=l,0===I&&r&&b(r+S.current),{data:e,cursor:t,hasMore:l,statusCode:n}},[v,I]);(0,s.useEffect)(()=>{m&&I&&tH.sendLog("creatorManageEntranceShow",{type:"compilation"})},[m,I]);let F=(0,s.useCallback)((e,t)=>(0,a.jsx)("div",{onClick:t=>{(null==e?void 0:e.totalEpisode)!==0&&(t.preventDefault(),y(e))},children:(0,a.jsx)(rB,{info:e,rank:t,userInfo:i})}),[i]),V=(0,l9.m)(),{updateIsSelectDisabled:U}=lC(),O=(0,s.useCallback)(async(e,t,l,n)=>{var r,i;let o=t.findIndex(t=>t===e);nV.sendLog("dragDropCompilation",{compilation_id:null==n?void 0:n.mixId,compilation_name:null==n?void 0:n.mixName,author_id:null==n?void 0:null===(r=n.author)||void 0===r?void 0:r.uid,status:(null==n?void 0:n.status)===n_.Public?"public":"private",before_rank_order:l,after_rank_order:o}),null==U||U(!0);let{statusCode:a=-1}=await l3({currentMixId:e,mixIdAfterCurrent:null!==(i=t[o+1])&&void 0!==i?i:0});null==U||U(!1);let s=0===a;return!s&&ee.F.info("移动失败，请稍后再试"),s},[U]),[W,$]=(0,s.useState)([]),K=np(),G=(0,s.useRef)({borderRadius:"12px"}),{withMask:Y}=ng((0,M._)((0,o._)({maskShadowStyle:G.current,getItemId:rG,dataList:W,isSupportMulti:!0},K),{firstItem:null===(n=P.current)||void 0===n?void 0:null===(l=n.getTargetNode)||void 0===l?void 0:l.call(n,0),getColumnCount:()=>3,stickyArea:{top:c+58+72,bottom:0,left:0,right:0},itemMargin:rQ,getItemSelectedDisabled:rq})),q=rW({scrollListRef:P,userInfo:i});(0,s.useImperativeHandle)(t,()=>(0,o._)({reloadMixList:D},q),[D]),(0,s.useEffect)(()=>()=>{var e;(null!==(e=w.Le.getConfig(w.gI.MixEditorUrlList))&&void 0!==e?e:[]).forEach(e=>window.URL.revokeObjectURL(e))},[]);let Q=(0,s.useCallback)((e,t)=>t?e.filter(e=>-1===t.findIndex(t=>(null==t?void 0:t.mixId)?(null==t?void 0:t.mixId)===e.mixId:(null==t?void 0:t.seriesId)===e.seriesId)):e,[]);return L?null:(0,a.jsx)(ri,{value:q,children:(0,a.jsx)(lF,{disabled:!u,children:(0,a.jsxs)("div",{className:rU.collection,children:[(0,a.jsx)("div",{className:f()(rU.list,{[rU.more]:_}),children:(0,a.jsx)(lW,{retryTimes:50,isListSelectable:u,scrollContainerEl:V,ref:P,skeletonNum:0,setDataList:$,dataFilter:Q,defaultHasMoreFlag:k.current,renderItem:F,fetchMoreData:A,containerClassName:rU.container,itemClassName:rU.item,pause:"post"!==d,panelNoMoreData:(0,a.jsx)("div",{className:rU.noMore}),panelNoData:(0,a.jsx)(B.H,{className:rU.empty,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"该账号还未发布过合集哦～"}),containerNoLineHeight:!0,withMask:Y,onSort:O,getSortId:rG,getItemDragDisabled:rY})}),C&&(0,a.jsx)(lI.default,(0,o._)({modalEnterFrom:lb.a.UserPostMix,isActive:!0,isSelf:m,userContext:p,abtestData:g,uid:v,notCanMixListen:!0,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:m},logParams:{enter_from:m?"personal_homepage":"others_homepage",enter_from_merge:m?"personal_homepage":"others_homepage",enter_method:(0,H.Rs)("enter_method"),tab_name:"compilation"},close:()=>{y(void 0),h(),null==T||T()},shortCutFilteredList:[null===(r=lj.getShortcut().dislike)||void 0===r?void 0:r.key]},C.isSeries2Mix?{modalInnerFeedCard:"series",seriesInfo:C,awemeSeriesInfo:C,anyHooks:rK}:{modalInnerFeedCard:"mix",mixInfo:C,awemeMixInfo:C,anyHooks:r$}))]})})})}),rJ={item:"FQaeMf3Q",cover:"Ds0OAACV",payTag:"nN6PP_Ae",image:"LJvoKmzv",content:"PQEYOJ__",name:"iWzVegpH",count:"lKnvXePT",episode:"zk3eeQUt",unreadMixCount:"L8E2_uYh"},r0=e=>{var t,l;let{info:n,rank:r,userInfo:i,currentTab:o}=e,[d,u]=(0,nx.Z)(),[c,v]=(0,s.useState)(!1),[m,f]=(0,s.useState)(!0),h=(0,eZ.$y)(null==n?void 0:n.seriesId,1,`previous_page=${(0,e1.yW)()}`);return(0,s.useEffect)(()=>{if(u&&!c){if(v(!0),"favorite_collection"===o){V.logInstance.sendLog("compilationCoverShow",{enter_from:(0,e1.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:n.seriesId});return}tH.sendLog("collectionCoverShow",{enter_from:(0,e1.yW)(),compilation_id:n.seriesId,compilation_video_cnt:n.totalEpisode,author_id:i.uid,group_id:""})}},[u]),(0,a.jsx)(P.a,{href:h,title:n.seriesName,target:"_blank",rel:"noopener noreferrer",onClick:e=>{if("favorite_collection"===o){V.logInstance.sendLog("compilationCoverClick",{enter_from:(0,e1.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:n.seriesId}),f(!1);return}tH.sendLog("collectionCoverClick",{enter_from:(0,e1.yW)(),compilation_id:n.seriesId,compilation_video_cnt:n.totalEpisode,author_id:i.uid,rank:r}),!n.totalEpisode&&(ee.F.info("创作者还没有为这个短剧添加视频"),e.preventDefault())},children:(0,a.jsxs)("div",{className:rJ.item,ref:d,children:[(0,a.jsxs)("div",{className:rJ.cover,children:[(0,a.jsx)(nw.Q,{src:n.cover,alt:n.seriesName,iconWidth:30,iconHeight:88,imgClass:rJ.image}),((null==n?void 0:null===(t=n.chargeInfo)||void 0===t?void 0:t.chargeType)===1||(null==n?void 0:null===(l=n.chargeInfo)||void 0===l?void 0:l.chargeType)===3)&&(0,a.jsx)("div",{className:rJ.payTag,children:"付费"})]}),(0,a.jsxs)("div",{className:rJ.content,children:[(0,a.jsx)("div",{className:rJ.name,children:n.seriesName}),(0,a.jsxs)("p",{className:rJ.count,children:[(0,ed.qe)(n.playVV)," 播放"]}),(0,a.jsxs)("p",{className:rJ.episode,children:[(0,a.jsxs)("span",{children:["更新至 ",n.totalEpisode," 集"]}),"favorite_collection"===o&&!!n.hasUpdatedEpisode&&m&&(0,a.jsxs)("span",{className:rJ.unreadMixCount,children:["更新",n.hasUpdatedEpisode,"集"]})]})]})]})})},r1={collection:"F16TCfGy",header:"ohcNRgPi",title:"mkIqp9QY",enter:"X7f7dTla",expand:"eLSr_jVm",down:"N7jomZIy",list:"eWzdKr5C",container:"NcTdLR32",item:"WMD6V9MQ",more:"W8Sm4PC1",noMore:"prZmJefq"},r2=s.forwardRef((e,t)=>{var l,n,r;let{userInfo:i,currentTab:o,defaultSeriesRes:d,setIsExpand:u,updateDataList:c}=e,v=(0,l8.o)(null==i?void 0:i.secUid),{isSelf:m,updateFollowStatus:h}=(0,s.useContext)(Z)||{},p=(0,eF.useUserInfoContext)()||{},g=(0,z._)()||{},[_,x]=(0,s.useState)(!1),[w,C]=(0,s.useState)(),[y,I]=(0,s.useState)((null==d?void 0:d.total)||0),b=(0,s.useRef)(null!==(n=null==d?void 0:d.cursor)&&void 0!==n?n:0),j=(0,s.useRef)(null===(r=null==d?void 0:d.hasMore)||void 0===r||r),k=(0,s.useMemo)(()=>(null==d?void 0:d.data)||[],[d]),N=(0,s.useMemo)(()=>{let{isBlock:e,isBlocked:t,secret:l,followStatus:n}=i;return!!(e||t||!m&&l&&2!==n)},[m,i]),{reloadForPostDelete:S,isPostDelete:E}=(0,s.useContext)(t8),L=(0,s.useRef)(null),T=(0,s.useCallback)(()=>{var e,t,l,n;x(!1),null==L||null===(t=L.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),b.current=0,null==L||null===(n=L.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)},[]);(0,s.useEffect)(()=>{E&&T()},[E,T]),(0,s.useImperativeHandle)(t,()=>({reloadSeriesList:T}),[T]);let M=(0,s.useCallback)(async()=>{let{data:e,cursor:t,hasMore:l,statusCode:n,total:r}=await (0,lz.Kl)({uid:v,cursor:b.current,count:18});return b.current=t,j.current=l,0===y&&r&&I(r),{data:e,cursor:t,hasMore:l,statusCode:n}},[v,y]);(0,s.useEffect)(()=>{m&&y&&tH.sendLog("creatorManageEntranceShow",{type:"compilation"})},[m,y]);let R=(0,s.useCallback)((e,t)=>(0,a.jsx)("div",{onClick:t=>{(null==e?void 0:e.totalEpisode)!==0&&(t.preventDefault(),C(e))},children:(0,a.jsx)(r0,{info:e,rank:t,userInfo:i})}),[i]),P=(0,l9.m)();return N?null:(0,a.jsxs)("div",{className:r1.collection,children:[(0,a.jsx)("div",{className:f()(r1.list,{[r1.more]:_}),children:(0,a.jsx)(lM.Z,{scrollContainerEl:P,ref:L,skeletonNum:0,retryTimes:50,defaultDataList:k,defaultHasMoreFlag:j.current,renderItem:R,fetchMoreData:M,containerClassName:r1.container,itemClassName:r1.item,pause:"post"!==o,setDataList:c,containerNoLineHeight:!0,panelNoMoreData:(0,a.jsx)("div",{className:r1.noMore}),panelNoData:(0,a.jsx)(B.H,{className:r1.empty,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"该账号还未发布过短剧哦～"}),buttomClassName:r1.bottom})}),w&&(0,a.jsx)(lI.default,{modalEnterFrom:lb.a.UserPostSeries,modalInnerFeedCard:"series",isSelf:m,seriesInfo:w,userContext:p,abtestData:g,uid:v,awemeSeriesInfo:w,anyHooks:rK,notCanMixListen:!0,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:m},logParams:{enter_from:m?"personal_homepage":"others_homepage",enter_from_merge:m?"personal_homepage":"others_homepage",enter_method:(0,H.Rs)("enter_method"),tab_name:"compilation"},close:()=>{C(void 0),h(),null==S||S()},shortCutFilteredList:[null===(l=lj.getShortcut().dislike)||void 0===l?void 0:l.key]})]})}),r3={},r5=l("896117"),r6=l("205825"),r7=l("535649"),r4=e=>{let{resetStatusFunc:t,scrollListRef:l,scrollElementRef:n,topOffset:r=0}=e,{setResetScrollList:i,isListSelectable:o}=(0,s.useContext)(lw);(0,s.useEffect)(()=>{o&&(null==i||i(()=>{var e,i,o,a,s;null==l||null===(i=l.current)||void 0===i||null===(e=i.reset)||void 0===e||e.call(i),null==t||t(),null===(o=n.current)||void 0===o||o.scrollTo({top:r}),null==l||null===(s=l.current)||void 0===s||null===(a=s.reload)||void 0===a||a.call(s)}))},[o,i,t,n,l,r])},r8=l("756024"),r9=l("388128"),ie=l("684767"),it="DBlIiCwu";let il=e=>{var t,l,n;let{info:r,isSelf:i,tab:o,uid:u,rank:c,keyword:v,onClick:m,isInSearch:f,isSpider:h,className:p,id:g,children:_,logParams:C,onNicknameClick:y,showPermissionIcon:I,reuseConfig:b}=e,[j,k]=(0,nx.Z)(),[N,S]=(0,s.useState)(!1),E=(0,s.useRef)(!1),L={};i&&"post"===o?L.playCount=null==r?void 0:null===(l=r.stats)||void 0===l?void 0:l.playCount:L.likeCount=null==r?void 0:null===(n=r.stats)||void 0===n?void 0:n.diggCount;let T=(0,eZ.Wg)(r,d.stringify({previous_page:i?"personal_homepage":"others_homepage",modeFrom:iv[o],cursor:null==r?void 0:r.cursor,count:10,secUid:u,enter_method:o}));w.Le.setConfig(w.gI.EnterDetailUrl,{[null==r?void 0:r.awemeId]:T});let M=()=>{var e,t,l,n,i,a,s,d,u,m;f?tH.sendLog("search_result_click",{enter_from:(0,e1.yW)(),enter_from_merge:(0,e1.yW)(),author_id:null==r?void 0:null===(e=r.authorInfo)||void 0===e?void 0:e.uid,group_id:null==r?void 0:r.awemeId,search_type:"general",from_xigua:(null==r?void 0:r.awemeType)===nK.e.XgVideo?1:0,aweme_type:null==r?void 0:r.awemeType,tab_name:o,rank:c,search_keyword:v,enter_method:f?"search_post":"click_tab",is_co_publish:Number(null==r?void 0:null===(l=r.cooperationInfo)||void 0===l?void 0:null===(t=l.cooperationCreators)||void 0===t?void 0:t.length)>1?1:0,co_publish_author_list:null===(i=r.cooperationInfo)||void 0===i?void 0:null===(n=i.cooperationCreators)||void 0===n?void 0:n.filter(e=>e.roleId!==Y.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)}):tH.sendLog("videoCoverClick",{enter_from:(0,e1.yW)(),author_id:null==r?void 0:null===(a=r.authorInfo)||void 0===a?void 0:a.uid,group_id:null==r?void 0:r.awemeId,from_xigua:(null==r?void 0:r.awemeType)===nK.e.XgVideo?1:0,aweme_type:null==r?void 0:r.awemeType,tab_name:o,rank:c,enter_method:"click_tab",is_co_publish:Number(null==r?void 0:null===(d=r.cooperationInfo)||void 0===d?void 0:null===(s=d.cooperationCreators)||void 0===s?void 0:s.length)>1?1:0,co_publish_author_list:null===(m=r.cooperationInfo)||void 0===m?void 0:null===(u=m.cooperationCreators)||void 0===u?void 0:u.filter(e=>e.roleId!==Y.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)})};return(0,s.useEffect)(()=>{let e=(0,H.Rs)("vid"),{isUsed:t}=w.Le.getConfig(w.gI.HasInUserSearch)||{};(null==r?void 0:r.awemeId)===e&&"post"===o&&!t&&S(!0)},[]),(0,s.useEffect)(()=>{if(N&&!E.current){var e;W.emit(W.EVENT.userHasLook,{isInView:k,position:null===(e=j.current)||void 0===e?void 0:e.offsetTop,rank:c}),E.current=k}},[N,k,c]),(0,a.jsxs)("div",{className:p,id:g,children:[(0,a.jsx)(nJ.J,{awemeInfo:r,isSpider:h||(0,es._Q)(),src:null==r?void 0:null===(t=r.video)||void 0===t?void 0:t.cover,playCount:L.playCount,likeCount:L.likeCount,isSelf:i,videoHref:T,onClick:e=>{M(),T.startsWith("/lvdetail/")?(e.preventDefault(),window.open(T,(0,ie.f)()?"_self":"_blank","noopener")):null==m||m(e)},onNicknameClick:()=>{!T.startsWith("/lvdetail/")&&(null==y||y())},uid:u,onShow:()=>{var e,t,l,n,i,a,s,d,u,c;f?tH.sendLog("search_result_show",{enter_from:(0,e1.yW)(),enter_from_merge:(0,e1.yW)(),search_type:"general",author_id:null==r?void 0:null===(e=r.authorInfo)||void 0===e?void 0:e.uid,group_id:null==r?void 0:r.awemeId,from_xigua:(null==r?void 0:r.awemeType)===nK.e.XgVideo?1:0,aweme_type:null==r?void 0:r.awemeType,tab_name:o,enter_method:"click_tab",search_keyword:v,is_co_publish:Number(null==r?void 0:null===(l=r.cooperationInfo)||void 0===l?void 0:null===(t=l.cooperationCreators)||void 0===t?void 0:t.length)>1?1:0,co_publish_author_list:null===(i=r.cooperationInfo)||void 0===i?void 0:null===(n=i.cooperationCreators)||void 0===n?void 0:n.filter(e=>e.roleId!==Y.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)}):tH.sendLog("collectionCoverShow",{enter_from:(0,e1.yW)(),author_id:null==r?void 0:null===(a=r.authorInfo)||void 0===a?void 0:a.uid,group_id:null==r?void 0:r.awemeId,from_xigua:(null==r?void 0:r.awemeType)===nK.e.XgVideo?1:0,aweme_type:null==r?void 0:r.awemeType,tab_name:o,enter_method:"click_tab",is_co_publish:Number(null==r?void 0:null===(d=r.cooperationInfo)||void 0===d?void 0:null===(s=d.cooperationCreators)||void 0===s?void 0:s.length)>1?1:0,co_publish_author_list:null===(c=r.cooperationInfo)||void 0===c?void 0:null===(u=c.cooperationCreators)||void 0===u?void 0:u.filter(e=>e.roleId!==Y.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)})},showTitle:!0,showHasLook:!i&&N,scene:o,from:"user",logParams:C,onLoad:()=>{if(!n5()){var e;let t;n3(),(0,n0.B1)({tag:x.w3.moment.first_img_render_time});let l=(t=x.w3.moment.first_img_render_time,(0,r9.I)()?(0,n0.J1)(t)-(0,n0.J1)(x.w3.page.page_init_time):(0,n0.J1)(t)),n=(0,n0.J1)(x.w3.fetchers.fetcher_user_start),r=(0,n0.J1)(x.w3.fetchers.fetcher_user_end);V.logInstance.sendLog("webPerfTiming",{enter_from:(0,e1.yW)(),from:(null===(e=document.getElementById("sw-tag"))||void 0===e?void 0:e.innerHTML)==="1"?"cache":(0,r9.I)()?"route":"url",[x.w3.moment.first_img_render_time]:l,[x.w3.fetchers.fetcher_user_start]:n,[x.w3.fetchers.fetcher_user_end]:r,[x.w3.fetchers.fetcher_user_duration]:r-n})}},userTabKey:o,showPermissionIcon:I,reuseConfig:b}),(0,a.jsx)("div",{className:it,ref:j}),_]})};var ir=l("368200"),ii=l("847191"),io=l("987475"),ia=l("338426");let is=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:n,setAwemeInfoList:r,userAwemeList:i,scrollRef:o,modalVideoIndex:a,additionalDistance:d=-60,notSeenItemList:u=[]}=e,[c,v]=(0,s.useState)(!1),m=(0,s.useRef)(t),f=(0,s.useRef)(-1),h=(0,s.useRef)(!1),p=(0,s.useRef)(a);return(0,s.useEffect)(()=>{p.current=a},[a]),(0,s.useEffect)(()=>()=>{var e;if(p.current===m.current)return;let t=window.innerWidth<=r5.I?3:6,l=e=>Math.floor(e/t);if(l(p.current)!==l(m.current))null===(e=o.current)||void 0===e||e.locateSelectVideo(m.current<=f.current?m.current:f.current,d)},[]),(0,s.useEffect)(()=>{(null==n?void 0:n.length)>a&&-1===t&&l(a||0)},[n]),(0,s.useEffect)(()=>{r(()=>(f.current=(null==i?void 0:i.length)-1,i))},[i]),(0,s.useEffect)(()=>{-1!==m.current&&-1!==t&&t>m.current&&t>f.current&&m.current===f.current&&ee.F.info("暂无更多作品, 已为你播放推荐视频"),m.current<f.current?v(!1):v(!0),m.current=t},[t]),(0,s.useEffect)(()=>{5>Math.abs(Number(null==n?void 0:n.length)-t)&&-1!==t&&!h.current&&(async()=>{var e,l,i,a,s,d;if(null===(l=o.current)||void 0===l?void 0:null===(e=l.getHasMore)||void 0===e?void 0:e.call(l))h.current=!0,await (null===(i=o.current)||void 0===i?void 0:i.loadMoreData()),h.current=!1;else{h.current=!0;let e=await (0,rZ.b)({awemeId:null===(a=n[t])||void 0===a?void 0:a.awemeId,count:20,filterGids:n.map(e=>null==e?void 0:e.awemeId).join(",")||""});h.current=!1;let l=null==e?void 0:null===(s=(d=e.awemeList).map)||void 0===s?void 0:s.call(d,e=>(e.dataType="releated",e));r(e=>[...e,...l||[]])}})()},[t,n]),(0,s.useEffect)(()=>{let e=null==n?void 0:n[t],l=null==u?void 0:u.indexOf(null==e?void 0:e.awemeId);(null==e?void 0:e.awemeId)&&-1!==l&&(0,e_.qA)({item_id_list:null==e?void 0:e.awemeId,type:1})},[n,t]),{isTabFeed:c}},id=(0,ia.ZP)(()=>Promise.all([l.e("66135"),l.e("25244"),l.e("1709"),l.e("46362"),l.e("67239"),l.e("923"),l.e("42562"),l.e("41442"),l.e("58195"),l.e("264"),l.e("31689"),l.e("29977"),l.e("59765"),l.e("27713"),l.e("34456"),l.e("27123"),l.e("12433"),l.e("55661"),l.e("65386"),l.e("47983"),l.e("6593"),l.e("81151"),l.e("50645"),l.e("41125"),l.e("90597")]).then(l.bind(l,27091)),{ssr:!1}),iu=e=>{var t,l,n,r,i,d,u;let{uid:c,tab:v,currentTab:m,awemeInfo:f,userAwemeList:h,scrollRef:p,modalIndex:g=-1,setModalIndex:_,currentUserInfoDetail:x,modeFrom:w,showModal:C=!1,customMadeHook:y,onClose:I,logParams:b,modalInnerFeedCard:j,reuseConfig:k}=e,N=(0,ir._)(e,["uid","tab","currentTab","awemeInfo","userAwemeList","scrollRef","modalIndex","setModalIndex","currentUserInfoDetail","modeFrom","showModal","customMadeHook","onClose","logParams","modalInnerFeedCard","reuseConfig"]),{list:S=[],uid:E}=(0,ii.$o)(io.LocalStorageKeys.NotSeenItemList)||{},L=(null==x?void 0:x.uid)===E?S:[],{isSelf:T,updateFollowStatus:M,haveDashBoard:R}=null!==(i=(0,s.useContext)(Z))&&void 0!==i?i:{},P=null!==(d=(0,z._)())&&void 0!==d?d:{},D=null!==(u=(0,eF.useUserInfoContext)())&&void 0!==u?u:{},A=null==D?void 0:null===(l=D.userInfo)||void 0===l?void 0:null===(t=l.info)||void 0===t?void 0:t.uid,F=(0,s.useMemo)(()=>T&&R&&"post"===m,[R,T,m]),{reloadForPostDelete:V}=(0,s.useContext)(t8);return -1!==g||C?(0,a.jsx)(id,(0,o._)({modalInnerFeedCard:j,modalEnterFrom:w,uid:c,userContext:D,abtestData:P,isSelf:T,anyHooks:null!=y?y:is,originAwemeInfo:f,userAwemeList:h,scrollRef:p,modalVideoIndex:g,additionalDistance:-150,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:(null==f?void 0:null===(n=f.authorInfo)||void 0===n?void 0:n.uid)!==A,dataAnalysis:F,deleteSelfPost:T},logParams:(0,o._)({enter_from:T?"personal_homepage":"others_homepage",enter_from_merge:T?"personal_homepage":"others_homepage",enter_method:(0,H.Rs)("enter_method"),is_personal_panel_video:Number((0,H.Rs)("is_personal_panel_video"))||0,tab_name:v,sub_tab_name:"video"},b),close:()=>{null==I||I(),null==_||_(-1),M(),null==V||V()},shortCutFilteredList:[null===(r=lj.getShortcut().dislike)||void 0===r?void 0:r.key],notSeenItemList:L,scene:v,reuseConfig:k},N)):null},ic=s.memo(lM.Z,(e,t)=>{let l=w.Le.getConfig(w.gI.AbtestData);if(!(null==l?void 0:l.enableZustand))return!1;for(let l in e)if(e[l]!==t[l])return!1;return!0}),iv={post:"userPost",like:"userLike",favorite_collection:"userCollection",record:"userRecord",watch_later:"userWatchLater"},im=e=>null==e?void 0:e.awemeId,ih=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;return{top:e+58+72,bottom:0,left:0,right:0}},ip=function(){let{panelNoData:e,handleLoadEnd:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return((0,s.useEffect)(()=>{null==t||t(),n3()},[]),e)?(0,a.jsx)(a.Fragment,{children:e}):(0,a.jsx)(B.H,{title:"暂无内容",icon:(0,a.jsx)(l$.Z,{})})};var ig=s.memo(s.forwardRef((e,t)=>{var l,n,r,i,d,u;let{modalInnerFeedCard:c="",defaultRes:v,currentTab:m,tab:f,uid:h,itemClassName:p,fetchMoreData:g,panelNoMoreData:_,panelNoData:C,pause:y,isInSearch:I,retryTimes:b,setUserPostList:j,updateAwemeList:k,getItemSelectedDisabled:N,resetStatusFunc:S,topNavHeight:E=60,topOffset:L=0,handleLoadEnd:T,listSelectContext:R,columnCount:P,containerRef:D,scrollRef:A,keyword:F,customStickyArea:V,logParams:B,collectionFolderInfo:U,modalEnterFrom:O,scrollContainerEl:z,onClose:$,highLightAwemeId:K,showPermissionIcon:G}=e,{isSelf:Y,currentUserInfoDetail:q,isSpider:X}=(0,s.useContext)(Z)||{},[J,ee]=(0,s.useState)([]),[et,el]=(0,s.useState)(-1),en=(0,s.useRef)(),er=(0,s.useRef)(),ei=(0,s.useRef)();ei.current=B;let eo=(0,s.useRef)(c);I&&w.Le.setConfig(w.gI.HasInUserSearch,{isUsed:I});let ea=(0,s.useCallback)(e=>{ee(e),null==j||j(e),null==k||k(e)},[j,k]),es=e=>{var t,l,n;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,Q.default)({success:async()=>{window.location.reload()},enterMethod:"nologin_video_guide",headerText:"登录后即可看更多最新作品",next:`https://${null===(n=window)||void 0===n?void 0:null===(l=n.location)||void 0===l?void 0:l.host}`})},ed=e=>{var t;let{itemInfo:l}=e;tH.sendLog("personalShieldAlbumShow",{enter_from:(0,e1.yW)(),to_user_id:null==l?void 0:null===(t=l.authorInfo)||void 0===t?void 0:t.uid,tab_name:f})},eu=(0,s.useCallback)((e,t)=>{if(e.awemeType===nK.e.NoLoginVideoGuide){var l;return(0,a.jsx)(r8.V,{src:null==e?void 0:null===(l=e.video)||void 0===l?void 0:l.cover,desc:null==e?void 0:e.desc,showTitle:!0,name:null==e?void 0:e.name,onClick:es,onShow:()=>ed({itemInfo:e}),iconWidth:50,cardStyle:r8.U.AllVideo})}return(0,a.jsx)(il,{info:e,isSelf:Y,logParams:ei.current,tab:f,uid:h,keyword:F,isSpider:X,rank:t,onClick:l=>{null==l||l.preventDefault();let n=`${x.w3.modal.modal_first_video_play}_start`;if((0,n0.tl)(n),(0,n0.B1)({tag:n}),null==e?void 0:e.awemeId){var r;null===r6.YY||void 0===r6.YY||null===(r=r6.YY.setPlayerReuseAble)||void 0===r||r.call(r6.YY,r7.v.User,e.awemeId)}eo.current=c,el(t),er.current=e},isInSearch:I,onNicknameClick:()=>{eo.current="author_card",el(t),er.current=e},showPermissionIcon:G,reuseConfig:{scene:r7.v.User,reuseId:null==e?void 0:e.awemeId,autoCreate:!0}})},[]),ec=null===(n=en.current)||void 0===n?void 0:null===(l=n.getDataList)||void 0===l?void 0:l.call(n),[ev,em]=(0,s.useState)(null!=V?V:ih(E));(0,s.useEffect)(()=>{em(null!=V?V:ih(E))},[E,V]);let ef=np({scrollEl:null==A?void 0:A.current,containerEl:null==D?void 0:D.current}),eh=(0,s.useRef)({height:"auto",paddingBottom:"133%",borderRadius:"12px"}),{withMask:ep,updateSelectedList:eg}=ng((0,M._)((0,o._)({maskShadowStyle:eh.current,getItemId:im,dataList:ec,isSupportMulti:!0},ef),{firstItem:null===(i=en.current)||void 0===i?void 0:null===(r=i.getTargetNode)||void 0===r?void 0:r.call(i,0),getColumnCount:()=>P||(window.innerWidth>r5.I?6:3),stickyArea:ev,itemMargin:{top:0,bottom:16,left:0,right:16},getItemSelectedDisabled:N}),R);r4({resetStatusFunc:S,scrollListRef:en,scrollElementRef:ef.scrollEleRef}),(0,s.useImperativeHandle)(t,()=>{var e,t,l,n,r,i,o,a;return{loadMoreData:null===(e=en.current)||void 0===e?void 0:e.loadMoreData,locateSelectVideo:null===(t=en.current)||void 0===t?void 0:t.locateSelectVideo,reset:null===(l=en.current)||void 0===l?void 0:l.reset,reload:null===(n=en.current)||void 0===n?void 0:n.reload,getTotal:null===(r=en.current)||void 0===r?void 0:r.getTotal,resetRes:null===(i=en.current)||void 0===i?void 0:i.resetRes,setScrollData:null===(o=en.current)||void 0===o?void 0:o.setScrollData,getDataList:null===(a=en.current)||void 0===a?void 0:a.getDataList,updateSelectedList:eg}});let e_=(0,l9.m)();(0,s.useEffect)(()=>{let e=(0,H.Rs)("aweme_id");if(e&&J&&(null==J?void 0:J.length)>0){var t;let l=null==J?void 0:null===(t=J.findIndex)||void 0===t?void 0:t.call(J,t=>(null==t?void 0:t.awemeId)===e);e&&-1!==l&&el(l),(0,H.U$)("aweme_id")}},[J]),(0,s.useEffect)(()=>W.listen(W.EVENT.openUserModal,e=>{let{awemeId:t}=e,l=(0,H.Rs)("aweme_id");if(l&&t===l&&J&&(null==J?void 0:J.length)>0){var n;let e=null==J?void 0:null===(n=J.findIndex)||void 0===n?void 0:n.call(J,e=>(null==e?void 0:e.awemeId)===l);-1!==e&&el(e),(0,H.U$)("aweme_id")}}),[J]),(0,s.useEffect)(()=>{},[J]);let ex=(0,s.useCallback)(async()=>{(0,n0.B1)({tag:x.w3.fetchers.fetcher_user_start,once:!0});let e=await g();return(0,n0.B1)({tag:x.w3.fetchers.fetcher_user_end,once:!0}),e},[g]),ew=(0,s.useMemo)(()=>(0,a.jsx)(ip,{panelNoData:C,handleLoadEnd:T}),[C,T]),eC=(0,s.useCallback)((e,t)=>{let l=e.map(e=>null==e?void 0:e.awemeId),n=(t||[]).filter(e=>!l.includes(null==e?void 0:e.awemeId));return e.concat(n||[])},[]),ey=(0,s.useRef)([]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ic,{ref:en,highLightAwemeId:K,handleLoadEnd:T,defaultDataList:(null==v?void 0:v.data)||ey.current,defaultHasMoreFlag:(null==v?void 0:v.hasMore)||1,defaultStatusCode:(null==v?void 0:v.statusCode)||0,defaultWhaleDecisionCustom:null==v?void 0:v.whaleDecisionCustom,containerClassName:n1.container,itemClassName:null!=p?p:n1.item,panelNoData:ew,panelNoMoreData:_,scrollContainerEl:e_,skeletonNum:0,renderItem:eu,withMask:ep,fetchMoreData:ex,setDataList:ea,pause:null!=y?y:m!==f,retryTimes:b,blockType:"post"===f||"like"===f,listFilterFn:eC}),(0,a.jsx)(iu,{modalInnerFeedCard:eo.current,uid:h,tab:f,modeFrom:O||iv[f],currentTab:m,awemeInfo:er.current,userAwemeList:J.filter(e=>e.awemeType!==nK.e.NoLoginVideoGuide),scrollRef:en,modalIndex:Math.max(-1,(null==J?void 0:null===(d=J[0])||void 0===d?void 0:d.awemeType)===nK.e.NoLoginVideoGuide?et-1:et),setModalIndex:el,currentUserInfoDetail:q,logParams:B,collectionFolderInfo:U,onClose:()=>{(0,H.U$)("aweme_id"),(0,H.U$)("is_personal_panel_video"),null==$||$(),r6.YY.clearAllReusePlayer()},reuseConfig:{scene:r7.v.User,reuseId:null===(u=er.current)||void 0===u?void 0:u.awemeId,autoCreate:!1}})]})})),i_=l("500899"),ix=e=>{var t,l;let{currentTab:n,topOffset:r=0,topNavHeight:i=60}=e,{userInfo:o}=(0,eF.useUserInfoContext)()||{},d=null!==(l=(0,l8.o)(null==o?void 0:null===(t=o.info)||void 0===t?void 0:t.secUid))&&void 0!==l?l:"",[u,c]=(0,s.useState)([]),[v,m]=(0,s.useState)(),f=(0,s.useRef)(),h=(0,s.useRef)(0),p=(0,s.useCallback)(()=>{h.current=0},[]),g=(0,s.useCallback)(async()=>{try{let t=await (0,i_.fetchUserSecretPost)({count:18,userId:d,maxCursor:h.current});if(0===t.statusCode){var e;return h.current=null!==(e=t.maxCursor)&&void 0!==e?e:0,{data:t.data,maxCursor:t.maxCursor,hasMore:t.hasMore,statusCode:0}}return{data:[],maxCursor:0,hasMore:!1,statusCode:0}}catch(e){return{data:[],maxCursor:0,hasMore:!1,statusCode:0}}},[]);return(0,a.jsx)("div",{className:r3.content,children:(0,a.jsx)(ig,{ref:f,resetStatusFunc:p,uid:d,highLightAwemeId:v,tab:"post",currentTab:n,defaultRes:{statusCode:0,hasMore:0,cursor:0,data:[]},fetchMoreData:g,setUserPostList:c,retryTimes:5,topNavHeight:i,topOffset:r,panelNoData:(0,a.jsx)(B.H,{className:r3.empty,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"该账号还未发布过作品哦～"})})})},iw=l("729532"),iC=l("257858"),iy=l("669206"),iI=l("925153"),ib={hasLook:"b0r7M1QY",btn:"joK2tD6F",text:"HvnSHXU2",empty:"VNq2CGsn"};let ij=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M1.95 6.5L6 10.1l4.05-3.6M1.95 2L6 5.6 10.05 2",stroke:"#2F3035",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),ik=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:n,setAwemeInfoList:r,userAwemeList:i,notSeenItemList:o=[],originAwemeInfo:a,fetchBackWard:d,fetchForward:u,swiper:c,hasMore:v,scrollToTarget:m}=e,[f,h]=(0,s.useState)(!1),p=(0,s.useRef)(t),g=(0,s.useRef)(-1),_=(0,s.useRef)(!1),x=(0,s.useRef)();return x.current=()=>{let e=n[t];m({target:document.getElementById(`videocard-${null==e?void 0:e.awemeId}`),speed:100})},(0,s.useEffect)(()=>()=>{x.current()},[]),(0,s.useEffect)(()=>{let e=null==n?void 0:n.findIndex(e=>(null==e?void 0:e.awemeId)===(null==a?void 0:a.awemeId));-1!==e&&-1===t&&l(e)},[n]),(0,s.useEffect)(()=>{let e=n[t];r(()=>(g.current=(null==i?void 0:i.length)-1,i));let o=null==i?void 0:i.findIndex(t=>(null==t?void 0:t.awemeId)===(null==e?void 0:e.awemeId));if(o!==t&&-1!==t){if(c){var a;null==c||null===(a=c.slideToSync)||void 0===a||a.call(c,o),setTimeout(()=>{l(o)})}else l(o)}},[i]),(0,s.useEffect)(()=>{-1!==p.current&&-1!==t&&t>p.current&&t>g.current&&p.current===g.current&&ee.F.info("暂无更多作品, 已为你播放推荐视频"),p.current<g.current?h(!1):h(!0),p.current=t},[t]),(0,s.useEffect)(()=>{-1!==t&&(5>Math.abs(Number(null==n?void 0:n.length)-t)?v?null==d||d():!_.current&&(async()=>{var e;_.current=!0;let l=await (0,rZ.b)({awemeId:null===(e=n[t])||void 0===e?void 0:e.awemeId,count:20,filterGids:n.map(e=>null==e?void 0:e.awemeId).join(",")||""});_.current=!1,r(e=>[...e,...(null==l?void 0:l.awemeList)||[]])})():t<4&&(null==u||u()))},[t,n]),(0,s.useEffect)(()=>{let e=null==n?void 0:n[t],l=null==o?void 0:o.indexOf(null==e?void 0:e.awemeId);(null==e?void 0:e.awemeId)&&-1!==l&&(0,e_.qA)({item_id_list:null==e?void 0:e.awemeId,type:1})},[n,t]),{isTabFeed:f}};var iN={documentOverFlowAnchorDisable:"MPA2onW9",container:"ynIVbEQp",noMoreText:"fFIW1ft9",opBtn:"Otr4AhYs"};let iS=()=>{var e,t,l;return n=null!=n?n:null===(e=document.getElementById("douyin-header"))||void 0===e?void 0:e.offsetHeight,r=null!=r?r:null===(t=document.getElementById("user-tabbar"))||void 0===t?void 0:t.offsetHeight,i=null!=i?i:null===(l=document.getElementById("user-tabbar-2"))||void 0===l?void 0:l.offsetHeight,n+r+i},iE=e=>{let t=K()(e),l=t.year(),n=t.month()+1;return`${l}-${n}`},iL=e=>{var t;let{container:l,index:n,speed:r=0,target:i}=e,o=null!=i?i:null==l?void 0:null===(t=l.childNodes)||void 0===t?void 0:t[n];if(!o)return;let a=null==o?void 0:o.offsetParent,s=null==o?void 0:o.offsetTop;for(;a!==document.body;)s+=a.offsetTop,a=a.offsetParent;(0,t6.d)((0,t9.V)(),s-(iS()-1),r)};var iT=l("346177"),iM={monthVideoBox:"fzsBkCxt",item:"ElABtKVN",coveredMask:"EZYzv5bn",timeLine:"Kf75l7mh",date:"B8LiXJHL",monthAndYear:"Q_JAlm8q"};let iR=e=>{let{awemeList:t,setCurrentScrollTime:l,onItemClick:n,withMask:r,uid:i,isSelf:o,tab:d}=e,u=(0,s.useRef)(0),c=(0,s.useMemo)(()=>{var e;return(null==t?void 0:null===(e=t[t.length-1])||void 0===e?void 0:e.createTime)*1e3},[t]);(0,s.useEffect)(()=>{let e=()=>{let e=document.getElementById(`${iE(c)}-monthvideobox`);e&&(u.current=null==e?void 0:e.offsetHeight)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[t]);let v=(0,l9.m)(),[m,h]=(0,s.useState)(!1);(0,iT.D)((e,t)=>{h(e>-4&&e<u.current-100)},200,{trailing:!0});let p=e=>{var t,l,n;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,Q.default)({success:async()=>{window.location.reload()},enterMethod:"nologin_video_guide",headerText:"登录后即可看更多最新作品",next:`https://${null===(n=window)||void 0===n?void 0:null===(l=n.location)||void 0===l?void 0:l.host}`})},g=e=>{var t;let{itemInfo:l}=e;tH.sendLog("personalShieldAlbumShow",{enter_from:(0,e1.yW)(),to_user_id:null==l?void 0:null===(t=l.authorInfo)||void 0===t?void 0:t.uid,tab_name:d})};return(0,s.useEffect)(()=>{m&&l(iE(c))},[m]),(0,a.jsxs)("div",{id:`${iE(c)}-monthvideobox`,children:[(0,a.jsx)("div",{className:f()(iM.timeLine),children:(0,a.jsx)("div",{className:f()(iM.date),children:(0,a.jsx)("div",{className:iM.monthAndYear,children:`${iE(c).split("-")[0]}年${iE(c).split("-")[1]}月`})})}),(0,a.jsx)(D.W,{scrollListener:v,className:iM.monthVideoBox,children:t.map((e,t)=>{if(e.awemeType===nK.e.NoLoginVideoGuide){var l;return(0,a.jsx)(r8.V,{className:iM.item,src:null==e?void 0:null===(l=e.video)||void 0===l?void 0:l.cover,desc:null==e?void 0:e.desc,showTitle:!0,onClick:p,onShow:()=>g({itemInfo:e}),name:null==e?void 0:e.name,iconWidth:50,cardStyle:r8.U.MonthVideo})}return(0,a.jsx)(il,{info:e,isSelf:o,tab:"post",uid:i,className:f()(iM.item,"video-card-in-user-timeline-list",{[iM.coveredMask]:r}),rank:t,onClick:t=>{null==t||t.preventDefault(),null==n||n(e)},id:`videocard-${null==e?void 0:e.awemeId}`,showPermissionIcon:!0,children:r(e)},null==e?void 0:e.awemeId)})})]})};var iP=l("632472"),iD={searchList:"m3Lx88qr",header:"ij3sPE8e",headerBg:"OLfMA4LA",searchText:"dVB54NHh",noPaddingMargin:"v16q5GFx",errorPanel:"viDb73A_",btn:"oAcu0USx",timeLineButtonAugment:"BHyenS7k",tool:"WX1w5Zgy",divider:"QKkJJEGb"},iA=l("128231"),iF=l.n(iA),iV=l("762563"),iB=l("221692"),iU=l("504229"),iO={header:"odPcxW3G",sticky:"ZNN6Xi3K",noBgImage:"ltrb7Ya3"},iH=e=>{var t;let{children:l,topOffset:n=0,needSticky:r=!0,headerHeight:i,topNavHeight:d=60,noBgImage:u}=e,{isSelf:c}=null!==(t=(0,s.useContext)(Z))&&void 0!==t?t:{};(0,z._)();let v=null!=i?i:44;(0,s.useEffect)(()=>{let e=iF()(()=>{let e=(0,t9.s)(),{x:t=0,y:l=0}=(0,iV.F)(e)||{};(0,iB.X)({top:l+1,left:t},e),(0,iB.X)({top:l,left:t},e)},100);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let m=(0,iU.sF)();return r?(0,a.jsx)(t5.Z,{topOffset:n-v-4,children:e=>{let{style:t,isSticky:n}=e;return(0,a.jsx)("div",{className:f()(iO.header,{[iO.sticky]:n,subTabSticky:n,[iO.noBgImage]:u}),style:(0,o._)({height:`${v}px`},tN(n,t),n?{top:`${(m?0:d)+58}px`}:{}),children:l})}}):l},iW=l("774765"),iz=l("456138"),iZ=l("69349"),i$=l("300883"),iK={batchToolBar:"VYKrEUQn",selectedDesc:"zvXXsNX1",selectedDescActive:"VASEeztk",dividerItem:"FR3w5mZ4",buttonContainer:"atjPfPfi",desc:"mXQccqGS",svgIcon:"mM9sFxC1",disabled:"Bbb2XOGV",operateButton:"qaZrDoFr"};let iG=e=>{let{icon:t,text:l,textClass:n,onClick:r,disabled:i=!1,className:o,disabledToast:d,onShow:u}=e,{run:c}=(0,iW.Z)(e=>ee.F.info(e),500),v=(0,s.useCallback)(()=>{if(i){d&&c(d);return}null==r||r()},[i,r,d,c]),m=(0,tp.x)(()=>{null==u||u()});return(0,a.jsxs)("div",{ref:m,className:f()(iK.buttonContainer,o,{[iK.disabled]:i}),onClick:v,children:[t,(0,a.jsx)("span",{className:f()(iK.desc,n),children:l})]})},iY=e=>"permission_set"===e?(0,a.jsx)(ep.z,{svg:(0,a.jsx)(iz.Z,{}),className:iK.svgIcon}):"move"===e?(0,a.jsx)(ep.z,{svg:(0,a.jsx)(iZ.Z,{}),className:iK.svgIcon}):"add_favorite"===e?(0,a.jsx)(ep.z,{svg:(0,a.jsx)(lc.Z,{}),className:iK.svgIcon}):["cancel_favorite","remove_videos","remove_collects","cancel_like","watch_later","cancel_post"].includes(e)?(0,a.jsx)(ep.z,{svg:(0,a.jsx)(i$.Z,{}),className:iK.svgIcon}):null,iq=e=>{let{selectedText:t="作品",operateBtns:l=[],currentSubTab:n,currentTab:r}=e,{selectedCount:i=0,setCheckAll:o,setIndeterminate:d,checkAll:u,indeterminate:c}=(0,s.useContext)(lw),v=(0,s.useMemo)(()=>"watch_later"===r||"like"===r?tD.VIDEO:n,[r,n]),m=(0,tp.x)(()=>{V.logInstance.sendLog("selectAllShow",{tab_name:r,sub_tab_name:v})});return(0,a.jsxs)("div",{className:iK.batchToolBar,ref:m,children:[(0,a.jsx)(R.Checkbox,{indeterminate:c,onChange:e=>{null==o||o(e.target.checked),null==d||d(!1),W.emit(W.EVENT.batchToolBarCheckAllChanged,{checked:e.target.checked}),!u&&V.logInstance.sendLog("selectAllClick",{tab_name:r,sub_tab_name:v})},checked:u,children:u?"取消全选":"全选"}),(0,a.jsxs)("span",{className:f()(iK.selectedDesc,{[iK.selectedDescActive]:i>0}),children:["已选 ",i," 个",t]}),l.length>0&&(0,a.jsx)(R.Divider,{layout:"vertical",margin:"16px",className:iK.dividerItem}),l.map((e,t)=>(0,a.jsx)(iG,{icon:iY(e.key),text:e.actionText,onClick:e.onClick,onShow:e.onShow,disabled:0===i,className:iK.operateButton},e.key||`key_${t}`))]})};var iQ=l("314413"),iX={container:"upkWwVvu",selected:"IoN_TOLC",text:"dyXCAmfl",date:"AQVQxWhb",arrow:"ocJOafQp",isListSelectable:"P5_ki0oe",disabled:"f2J050M1",TimeListSelector:"D5Uo7sCV",item:"ktkvKDle",hover:"oPJPyuoY",itemContainer:"DKlgRlmf",vertialLine:"VDpLvAtX",noVisibility:"TKBeGZCO"},iJ=new eP.h({timelinePanelShow:{eventName:"timeline_panel_show",params:{enter_from:"",tab_name:""}},timelinePanelClick:{eventName:"timeline_panel_click",params:{enter_from:"",tab_name:"",year_month:""}}});let i0=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M12 6l-4 4-4-4",stroke:"#2F3035",strokeOpacity:".4",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),i1=e=>{var t,l;let{postTimeList:n,onRef:r,onTimeClick:i,setShowSelector:d,currentScrollTime:u,logParams:c,onMouseEnter:v,onMouseLeave:m,style:h}=e,[p,g]=(0,s.useState)(null==u?void 0:null===(t=u.split("-"))||void 0===t?void 0:t[0]),_=(0,s.useRef)(),x=(0,s.useMemo)(()=>{let e={};for(let t=0;t<n.length;t++){let l=n[t].split("\xb7")[0],r=n[t].split("\xb7")[1];e[l]?e[l].push(r):e[l]=[r]}return e},[n]);return(0,s.useEffect)(()=>{var e,t;null===(t=_.current)||void 0===t||null===(e=t.scroll)||void 0===e||e.call(t,0,0)},[p]),(0,s.useEffect)(()=>{iJ.sendLog("timelinePanelShow",(0,o._)({},c))},[]),(0,a.jsxs)("div",{className:iX.TimeListSelector,ref:e=>null==r?void 0:r(e),onClick:e=>e.nativeEvent.stopImmediatePropagation(),onMouseEnter:v,onMouseLeave:m,style:h,children:[(0,a.jsxs)("div",{className:iX.itemContainer,children:[(0,a.jsx)("div",{onMouseEnter:()=>g("all"),className:f()(iX.item,{[iX.selected]:"all"===u}),onClick:()=>{i("all"),d(!1)},children:"全部"}),Object.keys(x).sort((e,t)=>t-e).map((e,t)=>{var l;return(0,a.jsx)("div",{onMouseEnter:()=>g(e),className:f()(iX.item,{[iX.hover]:p===e,[iX.selected]:Number(null==u?void 0:null===(l=u.split("-"))||void 0===l?void 0:l[0])===Number(e)}),onClick:()=>{i(`${p}-${x[e][0]}`),d(!1),iJ.sendLog("timelinePanelClick",(0,M._)((0,o._)({},c),{year_month:`${p}${String(x[e][0]).padStart(2,"0")}`}))},children:`${e}年`},t)})]}),(0,a.jsx)("div",{className:f()(iX.vertialLine,{[iX.noVisibility]:"all"===p})}),(0,a.jsx)("div",{className:iX.itemContainer,ref:_,children:"all"!==p&&(0,a.jsx)(a.Fragment,{children:null===(l=x[p])||void 0===l?void 0:l.map((e,t)=>{var l,n;return(0,a.jsx)("div",{className:f()(iX.item,{[iX.selected]:Number(null==u?void 0:null===(l=u.split("-"))||void 0===l?void 0:l[1])===Number(e)&&Number(p)===Number(null==u?void 0:null===(n=u.split("-"))||void 0===n?void 0:n[0])}),onClick:()=>{i(`${p}-${e}`),d(!1),iJ.sendLog("timelinePanelClick",(0,M._)((0,o._)({},c),{year_month:`${p}${String(e).padStart(2,"0")}`}))},children:`${e}月`},t)})})})]})},i2=e=>{let{postTimeList:t,onTimeClick:l,currentScrollTime:n,logParams:r,isSelf:i,className:o="",disabled:d=!1,disabledText:u="",isListSelectable:c=!1}=e,[v,m]=(0,s.useState)(!1),h=(0,s.useRef)(),{updateIsSelectDisabled:p}=(0,s.useContext)(lw);return(0,s.useEffect)(()=>{null==p||p(v)},[v,p]),(0,s.useEffect)(()=>{let e=()=>{m(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:f()(iX.container,{[iX.selected]:v},{[iX.disabled]:d},{[iX.isListSelectable]:c},o),onMouseEnter:()=>{if(!d)m(!0),clearTimeout(h.current)},onMouseLeave:()=>{h.current=setTimeout(()=>{m(!1)},500)},onClick:()=>{if(d&&u){ee.F.info(u);return}},children:[(0,a.jsx)(ep.z,{svg:(0,a.jsx)(iQ.Z,{}),className:iX.date}),(0,a.jsx)("div",{className:iX.text,children:"all"===n?"日期筛选":n.split("-").map((e,t)=>`${e}${0===t?"年":"月"}`).join("")}),(0,a.jsx)(A.Z,{src:i0,className:iX.arrow,viewBox:"0 0 16 16",width:16,height:16}),v&&(0,a.jsx)(i1,{postTimeList:t,onTimeClick:l,setShowSelector:m,currentScrollTime:n,logParams:r,onMouseEnter:()=>{m(!0),clearTimeout(h.current)},onMouseLeave:()=>{h.current=setTimeout(()=>{m(!1)},500)},style:{right:i?-9:35}})]})})};var i3={PUBLIC:0,0:"PUBLIC",PRIVATE:1,1:"PRIVATE",FRIEND:2,2:"FRIEND"};let i5=(e,t)=>{if(!e)return"暂未找到该用户的相关视频";if("post"===t)return"暂未找到发布的相关视频";if("favorite_collection"===t)return"暂未找到收藏的相关视频";else if("record"===t)return"暂未找到观看过的相关视频";else return"暂未找到赞过的相关视频"},i6=e=>{let{isSelf:t,tab:l,primaryAction:n,secondaryAction:r}=e;return(0,s.useEffect)(()=>{tH.sendLog("noLikeToast",{enter_method:"post"===l?"search_post":"search_like"})},[l]),(0,a.jsxs)(B.H,{className:iD.errorPanel,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:i5(t,l),children:[(0,a.jsx)(R.Button,{theme:"solid",className:iD.btn,type:"primary",onClick:n,children:"返回全部视频"}),(0,a.jsx)(R.Button,{theme:"solid",className:iD.btn,type:"secondary",onClick:r,children:"搜索更多视频"})]})},i7=e=>{var t;let{uid:l,currentTab:n,getSearchRes:r,homeText:i,keyword:d,abTestData:u,exitSearch:c,topNavHeight:v=60,showSearchBar:m,searchBarSlot:h,isListSelectable:p,setIsListSelectable:g}=e,{isSelf:_}=null!==(t=(0,s.useContext)(Z))&&void 0!==t?t:{},x=(0,s.useRef)(""),w=(0,s.useRef)(null),[C,y]=(0,s.useState)([]);(0,s.useEffect)(()=>{if(d&&d!==x.current){var e,t,l,n;x.current=d,null===(t=w.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),null===(n=w.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)}},[d]);let I=(0,s.useCallback)(()=>{tH.sendLog("clickLikeTab",{enter_method:"post"===n?"search_post":"search_like"}),c()},[n,c]),b=(0,s.useCallback)(()=>{window.open((0,eZ.Sp)(x.current,`tab_name=${"post"===n?"post_result":"like_result"}`),(0,ie.f)()?"_self":"_blank","noopener")},[n]),j=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("post"===n)return(0,rs.FD)({awemeIds:e.map(e=>e.awemeId).join(",")});let t={},l=[];return(e.forEach(e=>{l.push(e.awemeId),t[e.awemeId]=(0,iP.I)(e.awemeType)}),"favorite_collection"===n)?(0,rs.VD)({awemeIds:l.join(","),awemeTypeMap:t}):(0,rs.g)({awemeIds:l.join(","),itemTypeMap:t})},[n]),{updateAwemeCount:k,updateFavoriteCount:N,isPostDelete:S}=(0,s.useContext)(t8),E=(0,s.useCallback)(e=>{let{manageCount:t=0}=e;"post"===n&&(null==k||k(-t,!0)),"like"===n&&(null==N||N(-t,!0))},[n,k,N]),L=l_({maxSelectedCount:100,operate:j,operateDesc:{operation:"post"===n?"删除":"取消",itemName:`${"post"===n?"":"favorite_collection"===n?"收藏的":"喜欢的"}作品`},onManageEndCallback:E,tabName:n,subTabName:"video",isListSelectable:p,setIsListSelectable:g}),T=(0,s.useCallback)(()=>{null==c||c()},[c]),{changeShowConfirm:P,renderConfirmModal:D,changeListSelectable:A,selectedCount:F,selectItems:B=[],updateIsSelectDisabled:U,resetScrollList:O}=L;(0,s.useEffect)(()=>{A(!1)},[d,A]),(0,s.useEffect)(()=>{if(S){var e,t;null===(t=w.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),T()}},[S,T]);let{renderDeleteConfirmModal:H,renderPermissionConfirmModal:W,renderAddCollectsModal:z,changeShowPermissionConfirm:$,changeShowDeleteConfirm:K,changeShowAddCollectsConfirm:G}=rw({onConfirmShow:e=>{let{visible:t}=e;U(t),A(t)},resetScrollList:e=>{let{fatalIdsCount:t,method:l,permissionValue:n,modifyItemIds:r=[]}=e||{};if(g(!1),"delete"===l)E({manageCount:F-t}),null==O||O();else if("permission"===l&&"secret"===n)E({manageCount:F-t}),null==O||O();else if("permission"===l&&["friend","public"].includes(n)){var i,a,s,d;if(0===r.length){null==O||O();return}let e=(null===(a=w.current)||void 0===a?void 0:null===(i=a.getDataList)||void 0===i?void 0:i.call(a))||[];r.forEach(t=>{let l=e.find(e=>e.awemeId===t);l&&("public"===n&&(l.status=(0,M._)((0,o._)({},l.status),{privateStatus:0})),"friend"===n&&(l.status=(0,M._)((0,o._)({},l.status),{privateStatus:2})))}),null===(d=w.current)||void 0===d||null===(s=d.setScrollData)||void 0===s||s.call(d,{dataList:[...e]})}},currentTab:n,currentSubTab:"video"}),Y=(0,s.useMemo)(()=>{let e={key:"cancel_like",actionText:"post"===n?"删除作品":"favorite_collection"===n?"取消收藏":"取消喜欢",onClick:()=>{"post"===n?K(!0):P(!0),V.logInstance.sendLog("functionIconClick",{tab_name:n,sub_tab_name:"video",item_cnt:F,function_name:"delete"})}};if("post"===n)return[e,{key:"permission_set",actionText:"权限设置",onClick:()=>{if((null==B?void 0:B.length)!==0)V.logInstance.sendLog("functionIconClick",{tab_name:n,sub_tab_name:"video",item_cnt:F,function_name:"permission_setting"}),$(!0)}}];let t=[e];return"favorite_collection"===n&&(null==u?void 0:u.favoriteBatchAdd)&&t.push({key:"add_favorite",actionText:"加入收藏夹",onClick:()=>{if((null==B?void 0:B.length)!==0)G(!0),V.logInstance.sendLog("pc_favourite_batch_manage_click",{tab_name:"favorite_collection"})},onShow:()=>{V.logInstance.sendLog("pc_favourite_batch_manage_show",{tab_name:"favorite_collection"})}}),t},[n,F,B,$,K,P]);return(0,a.jsxs)(lw.Provider,{value:(0,o._)({},L),children:[(0,a.jsxs)("div",{className:f()(iD.searchList,{[iD.noPaddingMargin]:_}),children:[(0,a.jsx)(iH,{topNavHeight:v,headerHeight:p?72:44,children:(0,a.jsxs)("div",{className:f()(iD.header,{[iD.headerBg]:p}),children:[p?(0,a.jsx)(iq,{selectedText:"post"===n?"删除作品":"favorite_collection"===n?"收藏的视频":"取消喜欢",operateBtns:Y,currentSubTab:"video",currentTab:n}):(0,a.jsx)("div",{className:f()(iD.searchText,{[iD.noPaddingMargin]:_}),children:i}),(0,a.jsxs)("div",{className:iD.tool,children:[m&&h,"post"===n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.Divider,{className:iD.divider,layout:"vertical",margin:"12px"}),(0,a.jsx)(i2,{currentScrollTime:"all",disabled:!0,className:iD.timeLineButtonAugment,disabledText:"搜索后，暂不支持日期筛选",isListSelectable:p})]})]})]})}),(0,a.jsx)(ig,{ref:w,keyword:d,resetStatusFunc:T,updateAwemeList:y,uid:l,tab:n,pause:!1,currentTab:n,defaultRes:{statusCode:0,data:[],hasMore:1,cursor:0,maxCursor:10},fetchMoreData:r,panelNoMoreData:(0,a.jsx)(a.Fragment,{}),panelNoData:(0,a.jsx)(i6,{isSelf:_,tab:n,primaryAction:I,secondaryAction:b}),isInSearch:!0,showPermissionIcon:"post"===n})]}),null==D?void 0:D(),null==H?void 0:H({selectItems:B}),null==W?void 0:W({selectItems:B}),null==z?void 0:z({selectItems:B})]})},i4=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;return{top:e+58+72,bottom:0,left:0,right:0}};function i8(e){let{reload:t}=e;return(0,a.jsxs)("div",{className:iN.noMoreText,children:["服务异常，重新",(0,a.jsx)("span",{onClick:t,className:iN.opBtn,children:"刷新"}),"拉取数据"]})}let i9=e=>{var t;let{modifyList:l=[],selectPartilarTime:n,scrollEl:r,setCurrentScrollTime:i,defaultUserPostList:d,defaultHasMore:u,setUserPostList:c,uid:v,tab:m,isSelf:f,currentTab:p,setSelectPartilarTime:g,setHideUserInfo:_,resetStatusFunc:x,getItemSelectedDisabled:w,onBan:C,rebackParamRef:y,topNavHeight:I}=e,[b,j]=(0,s.useState)([]),[k,N]=(0,s.useState)(),[S,E]=(0,s.useState)([0,0,0]);(0,nH.Z)(()=>{j(e=>(l.forEach(t=>{let{id:l,permissionValue:n}=t,r=e.find(e=>e.awemeId===l);r&&("public"===n&&(r.status=(0,M._)((0,o._)({},r.status),{privateStatus:i3.PUBLIC})),"friend"===n&&(r.status=(0,M._)((0,o._)({},r.status),{privateStatus:i3.FRIEND})))}),[...e]))},[l]);let{setResetScrollList:L}=(0,s.useContext)(lw);null==L||L(()=>{g("all"),i("all"),_(!1),(0,t9.V)().scrollTo(0,0),c([]),null==x||x()});let T=(0,s.useRef)(!0),R=(0,s.useRef)(u?0:1e3*d[d.length-1].createTime),P=(0,s.useRef)(!1),D=(0,s.useRef)(!1),A=(0,s.useRef)(),F=(0,s.useRef)(0),V=(0,s.useRef)([d]),B=(0,s.useRef)(0),U=(0,s.useRef)(!1),O=(0,nc.Z)(async()=>{var e,t,l,r;let[i,o]=n.split("-");i=Number(i),i+=Math.floor(((o=Number(o))+1)/12),o=(o+1)%12;let a=1e3*K()(`${i}-${String(o).padStart(2,"0")}-01`).unix(),s=V.current[Math.max(B.current-1,0)],d=1e3*s[s.length-1].createTime,u=await (0,i_.fetchUserPost)({userId:v,maxCursor:a,timeListQuery:!0,forwardEndCursor:d,whaleCutToken:null===(e=y.current)||void 0===e?void 0:e.whaleCutToken});(null===(t=u.whaleInfo)||void 0===t?void 0:t.whaleBlockTimeSelect)==="1"&&C(),y.current={whaleCutToken:null===(l=u.whaleInfo)||void 0===l?void 0:l.whaleCutToken},0===u.statusCode&&u.data?(V.current[B.current]=u.data,0===u.forwardHasMore&&B.current>0&&(V.current[B.current-1]=[...V.current[B.current-1],...V.current[B.current]],V.current.splice(B.current,1),B.current-=1),j(V.current[B.current])):E(e=>[e[0],u.statusCode,e[2]]),T.current=null!==(r=T.current)&&void 0!==r?r:1===u.hasMore,0===u.hasMore&&u.data&&(R.current=1e3*u.data[u.data.length-1].createTime)}),H=(0,nc.Z)(async e=>{var t,l,n,r,i,o,a;let{from:s}=e,d=V.current[B.current];if(D.current||(null===(t=d[d.length-1])||void 0===t?void 0:t.createTime)*1e3===R.current||0!==S[2]&&"reload"!==s)return;D.current=!0;let u=1e3*d[d.length-1].createTime,c=await (0,i_.fetchUserPost)({userId:v,maxCursor:u,count:30,whaleCutToken:null===(l=y.current)||void 0===l?void 0:l.whaleCutToken});if((null===(n=c.whaleInfo)||void 0===n?void 0:n.whaleBlockTimeSelect)==="1"&&C(),y.current={whaleCutToken:null===(r=c.whaleInfo)||void 0===r?void 0:r.whaleCutToken},T.current=null!==(i=T.current)&&void 0!==i?i:1===c.hasMore,0===c.statusCode&&c.data){let e=[...V.current[B.current],...c.data||[]],t=V.current[B.current+1];if(t){let l=-1;for(let n=0;n<e.length;n++)if((null==t?void 0:null===(o=t[0])||void 0===o?void 0:o.awemeId)===(null==e?void 0:null===(a=e[n])||void 0===a?void 0:a.awemeId)){l=n;break}-1!==l?(V.current[B.current]=[...e.slice(0,l),...t],V.current.splice(B.current+1,1)):V.current[B.current]=e,j(V.current[B.current])}else V.current[B.current]=e,j(V.current[B.current])}else E(e=>[e[0],e[1],c.statusCode]);0===c.hasMore&&c.data&&(R.current=1e3*c.data[c.data.length-1].createTime),D.current=!1}),z=(0,nc.Z)(async e=>{var t,l,n,r,i;let{from:o}=e;if(P.current||0===B.current||0!==S[0]&&"reload"!==o)return;P.current=!0,F.current=(0,t9.V)().scrollHeight;let a=V.current[B.current-1],s=V.current[B.current],d=await (0,i_.fetchUserPost)({userId:v,forwardEndCursor:(null==a?void 0:null===(t=a[(null==a?void 0:a.length)-1])||void 0===t?void 0:t.createTime)*1e3,forwardAnchorCursor:(null==s?void 0:null===(l=s[0])||void 0===l?void 0:l.createTime)*1e3,count:30,whaleCutToken:null===(n=y.current)||void 0===n?void 0:n.whaleCutToken});(null===(r=d.whaleInfo)||void 0===r?void 0:r.whaleBlockTimeSelect)==="1"&&C(),y.current={whaleCutToken:null===(i=d.whaleInfo)||void 0===i?void 0:i.whaleCutToken},0===d.statusCode&&d.data?(V.current[B.current]=[...d.data||[],...V.current[B.current]],0===d.forwardHasMore&&(V.current[B.current-1]=[...V.current[B.current-1],...V.current[B.current]],V.current.splice(B.current,1),B.current-=1),j(V.current[B.current])):E(e=>[d.statusCode,e[1],e[2]]),P.current=!1}),Z=(0,s.useMemo)(()=>{let e=[];for(let a=0;a<(null==b?void 0:b.length);a++){var t,l,n,r,i,o;let s=e[e.length-1],d=K()((null==s?void 0:null===(t=s[s.length-1])||void 0===t?void 0:t.createTime)*1e3),u=d.year(),c=d.month()+1,v=K()((null===(l=b[a])||void 0===l?void 0:l.createTime)*1e3),m=v.year(),f=v.month()+1;(m===u&&f===c||(null===(r=b[a])||void 0===r?void 0:null===(n=r.tag)||void 0===n?void 0:n.isTop)||(null==s?void 0:null===(o=s[(null==s?void 0:s.length)-1])||void 0===o?void 0:null===(i=o.tag)||void 0===i?void 0:i.isTop))&&e[e.length-1]?e[e.length-1].push(b[a]):e.push([b[a]])}return e},[b]),[$,G]=(0,s.useState)(i4(I));(0,s.useEffect)(()=>{G(i4(I))},[I]);let Y=np(),q=(0,s.useRef)({height:"auto",paddingBottom:"133%",borderRadius:"4px"}),{withMask:Q}=ng((0,M._)((0,o._)({getItemId:e=>null==e?void 0:e.awemeId,dataList:b,isSupportMulti:!0},Y),{maskShadowStyle:q.current,stickyArea:$,getItemSelectedDisabled:w,getAllItems:()=>document.querySelectorAll(".video-card-in-user-timeline-list")})),X=e=>{let{direction:t}=e;return"forward"===t&&0!==S[0]||"backward"===t&&0!==S[2]?(0,a.jsx)(i8,{reload:()=>{E(e=>[0,0,0]),"forward"===t?z({from:"reload"}):H({from:"reload"})}}):(0,a.jsx)(h.gb,{})};(0,s.useEffect)(()=>{let e=(0,t9.s)(),t=r||e,l=e=>{var t;if(0===V.current[B.current].length)return;let l=0,n=null===(t=A.current)||void 0===t?void 0:t.getBoundingClientRect();if(r){let e=r.getBoundingClientRect();l=n.bottom-e.bottom}else l=n.bottom-window.innerHeight;l<48&&T.current&&H({from:"normal"}),n.top>120&&0!==B.current&&z({from:"normal"})};return t.addEventListener("scroll",l),()=>{t.removeEventListener("scroll",l)}},[]),(0,s.useEffect)(()=>{if(0!==b.length&&0!==F.current){let e=(0,t9.V)();e.scrollTo(0,e.scrollHeight-F.current+e.scrollTop),F.current=0}else if(U.current&&0!==b.length){U.current=!1;let e=Z.findIndex(e=>{var t;let l=K()((null===(t=e[e.length-1])||void 0===t?void 0:t.createTime)*1e3),r=String(l.year()),i=String(l.month()+1).padStart(2,"0");return n.split("-").every((e,t)=>0===t?e===r:e===i)});-1!==e&&iL({container:A.current,index:e+(b.length&&0!==B.current?1:0),speed:0})}else 0===b.length&&(0,t9.V)().scrollTo(0,0);0===B.current&&0!==b.length&&(null==c||c(b))},[b]),(0,s.useEffect)(()=>{let[e,t]=n.split("-"),l=K()(`${e}-${t}-01`),r=l.add(1,"month"),i=1e3*l.unix(),o=1e3*r.unix(),a=-1,s=!1;for(let e=0;e<V.current.length;e++){for(let t=0;t<V.current[e].length;t++){var d,u;let l=1e3*V.current[e][t].createTime;if(null===(u=V.current[e][t])||void 0===u?!void 0:null===(d=u.tag)||void 0===d?!void 0:!d.isTop){if(l<=o&&l>=i){a=e,s=!0;break}if(l<i){B.current=e,V.current.splice(B.current,-1,[]),s=!0;break}else e===V.current.length-1&&t===V.current[e].length-1&&(B.current=V.current.length,V.current.splice(B.current,-1,[]),s=!0)}}if(s)break}if(-1!==a){let e=Z.findIndex(e=>{var t;let l=K()((null===(t=e[e.length-1])||void 0===t?void 0:t.createTime)*1e3),r=String(l.year()),i=String(l.month()+1).padStart(2,"0");return n.split("-").every((e,t)=>0===t?e===r:e===i)});if(-1!==e)iL({container:A.current,index:e+(b.length&&0!==B.current?1:0),speed:100});else{let e=V.current[a];B.current=a,j(e),U.current=!0}}else j([]),O(),U.current=!0},[n]),(0,s.useEffect)(()=>{if(0!==B.current)return _(!0),document.body.classList.add(iN.documentOverFlowAnchorDisable),W.emit(W.EVENT.headerAbleTransparent,!1),()=>{_(!1),document.body.classList.remove(iN.documentOverFlowAnchorDisable),W.emit(W.EVENT.headerAbleTransparent,!0)}},[B.current]);let J=(null===(t=b[b.length-1])||void 0===t?void 0:t.createTime)*1e3!==R.current;return 0!==S[1]?(0,a.jsx)(i8,{reload:()=>{E(e=>[0,0,0]),O()}}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:iN.container,ref:A,children:[!!b.length&&0!==B.current&&X({direction:"forward"}),Z.map((e,t)=>{var l;return e.length>0&&(0,a.jsx)(iR,{index:t,awemeList:e,setCurrentScrollTime:i,onItemClick:e=>N(e),withMask:Q,uid:v,isSelf:f,tab:m},iE((null===(l=e[e.length-1])||void 0===l?void 0:l.createTime)*1e3))}),J&&X({direction:"backward"})]}),(0,a.jsx)(iu,{uid:v,tab:m,modeFrom:iv[m],currentTab:p,awemeInfo:k,userAwemeList:b.filter(e=>e.awemeType!==nK.e.NoLoginVideoGuide),showModal:!!k,onClose:()=>N(void 0),customMadeHook:ik,fetchBackWard:H,fetchForward:z,hasMore:J,scrollToTarget:iL})]})},oe=s.forwardRef((e,t)=>{var l,n,r,i;let{userInfo:d,currentTab:u,defaultPostRes:c,topOffset:v=0,topNavHeight:m=60,setHideUserInfo:f,abTestData:h,setPostTimeList:p,selectPartilarTime:g,setSelectPartilarTime:_,currentScrollTime:x,setCurrentScrollTime:w,modifyList:C}=e,[y,I]=(0,s.useState)([]),[b,j]=(0,s.useState)(),[k,N]=(0,s.useState)(!1),[S,E]=(0,s.useState)(),{userInfo:L}=null!==(r=(0,eF.useUserInfoContext)())&&void 0!==r?r:{},T=(0,l8.o)(null==d?void 0:d.secUid),{isSelf:R}=null!==(i=(0,s.useContext)(Z))&&void 0!==i?i:{},[P,D]=(0,s.useState)(!1),A=(0,s.useRef)(),F=(0,s.useRef)(0),V=(0,s.useRef)((null==c?void 0:c.cursor)||0),U=(0,s.useRef)(null!=c&&null!==(l=c.data)&&void 0!==l&&!!l[0]&&(0,iy.P$)(null==c?void 0:null===(n=c.data)||void 0===n?void 0:n[0])),O=(0,s.useRef)(!0),z=(0,s.useRef)({}),$=(0,s.useRef)(1),K=(0,s.useRef)(-1),G=(0,s.useRef)(!0);(0,s.useEffect)(()=>{R&&d.awemeCount&&tH.sendLog("creatorManageEntranceShow",{type:"post"})},[R,d.awemeCount]);let Y=(0,s.useRef)(null==c?void 0:c.hasLocateItem),q=(0,s.useRef)([]),Q=(0,s.useRef)([]),X=(0,s.useCallback)(async()=>{var e,t,l,n;let r=(0,H.Rs)("vid"),i=!(null==c?void 0:null===(e=c.data)||void 0===e?void 0:e.find(e=>e.awemeId===r))&&Y.current;Y.current=!1;let o=R&&(null==G?void 0:G.current)&&0===V.current&&nY.dP.hasCache;iw.z.markStart("user_post_fetch_data",{once:!0});let{data:a=[],maxCursor:s=0,hasMore:u,statusCode:v,whaleInfo:m,timeList:f,notLoginModule:h}=await nY.dP.request({cached:o,consume:!0,params:{userId:T,maxCursor:V.current,count:i?120:18,locateItemId:r,locateQuery:i,needTimeList:0===V.current,whaleCutToken:null===(t=z.current)||void 0===t?void 0:t.whaleCutToken},fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}});if(iw.z.markEnd("user_post_fetch_data",{once:!0}),(null==m?void 0:m.whaleBlockTimeSelect)==="1"&&N(!0),performance.getEntriesByName("user_page_init").length>0){performance.mark("user_post_fetched"),performance.measure("userMountedToFetched","user_page_init","user_post_fetched");let e=null===(l=performance.getEntriesByName("userMountedToFetched")[0])||void 0===l?void 0:l.duration,t=(null===(n=document.getElementById("sw-tag"))||void 0===n?void 0:n.innerHTML)==="1";!isNaN(e)&&tH.sendLog("userPageDataFetched",{cost:Math.floor(e),from_cache:t?0:1}),performance.clearMarks("user_page_init"),performance.clearMarks("user_post_fetched"),performance.clearMeasures("userMountedToFetched"),t&&0===V.current&&0===v&&a.length>0&&a.map(e=>({item_id:e.awemeId,dy_q:e.dyQ,tag:e.isAds?2:0,potential_risk_level:0,authentication_token:""}))}let g=a;g=await (0,iI.x)(g),f&&p(f);let _=g.length<6?F.current:V.current;g.map(e=>(e.cursor=_,e)),$.current=o?1:u,!v&&(o?setTimeout(()=>{var e,t;null===(t=A.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(F.current=V.current,V.current=s),z.current={whaleCutToken:null==m?void 0:m.whaleCutToken});let x=tk(g,q.current).filter(e=>!Q.current.includes(e.awemeId));return h&&h.guideLoginTipExist&&(x=[{awemeId:iC.P.NoLoginVideoGuide,awemeType:nK.e.NoLoginVideoGuide,name:h.guideLoginTipText,desc:h.guideLoginTipDesc,video:{cover:h.guideLoginTipCover},authorInfo:{uid:d.uid},createTime:h.guideLoginTipCreateTime},...a],U.current=!0),G.current=!1,{data:x,maxCursor:o?0:s,hasMore:o?1:u,statusCode:o?0:v,whaleDecisionCustom:null==m?void 0:m.whaleDecisionCustom,clearBefore:!o&&0===F.current}},[T,h,R]);(0,s.useEffect)(()=>{var e,t;let l=(0,H.Rs)("vid");!(null==c?void 0:null===(e=c.data)||void 0===e?void 0:e.find(e=>e.awemeId===l))&&Y.current&&(null===(t=A.current)||void 0===t||t.loadMoreData());let n=W.listen(W.EVENT.userHasLook,e=>{var t;D(!e.isInView),K.current=null!==(t=e.rank)&&void 0!==t?t:-1});return()=>{n()}},[]),(0,s.useEffect)(()=>{var e;(null==h?void 0:null===(e=h.AuthorBlock)||void 0===e?void 0:e.type)?N(!0):N(!1)},[h]);let J=(0,s.useMemo)(()=>{var e;let t=tk(null!==(e=null==c?void 0:c.data)&&void 0!==e?e:[],q.current);return(0,M._)((0,o._)({},c),{data:t})},[c]),ee=(0,s.useMemo)(()=>{var e;return{statusCode:0,data:y,maxCursor:(null===(e=y[y.length-1])||void 0===e?void 0:e.createTime)*1e3,hasMore:1,cursor:0}},[y]),et=(0,s.useCallback)(()=>{V.current=0,z.current={}},[]),{updateAwemeCount:el,isPostDelete:en}=(0,s.useContext)(t8);(0,s.useEffect)(()=>{var e,t,l,n,r;(en||(null==L?void 0:L.isLogin)&&!O.current&&U.current)&&(null==A||null===(t=A.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),et(),null==A||null===(n=A.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n),_("all"),w("all"),f(!1),I([])),O.current=null!==(r=null==L?void 0:L.isLogin)&&void 0!==r&&r},[en,et,f,null==L?void 0:L.isLogin]);let er=(0,s.useCallback)(e=>{var t,l,n,r;let i=((null==e?void 0:null===(l=e.cooperationInfo)||void 0===l?void 0:null===(t=l.cooperationCreators)||void 0===t?void 0:t.length)||0)>1,o=!1;i&&(null==e||null===(r=e.cooperationInfo)||void 0===r||null===(n=r.cooperationCreators)||void 0===n||n.forEach(e=>{"作者"===e.roleTitle&&e.secUid===T&&(o=!0)}));let a=i&&!o;return{disabled:a,disabledDesc:a?"共创视频无删除权限":""}},[T]),ei=(0,s.useCallback)(()=>{y.length<100&&(null==el||el(y.length,!1))},[el,y.length]);return(0,s.useEffect)(()=>{let e=(0,H.Rs)("high_light_aweme_id");e&&(E(e),(0,H.U$)(["high_light_aweme_id"]))},[]),(0,s.useImperativeHandle)(t,()=>{var e,t,l,n,r,i,o,a;return{loadMoreData:null===(e=A.current)||void 0===e?void 0:e.loadMoreData,locateSelectVideo:null===(t=A.current)||void 0===t?void 0:t.locateSelectVideo,reset:null===(l=A.current)||void 0===l?void 0:l.reset,reload:null===(n=A.current)||void 0===n?void 0:n.reload,getTotal:null===(r=A.current)||void 0===r?void 0:r.getTotal,resetRes:null===(i=A.current)||void 0===i?void 0:i.resetRes,setScrollData:null===(o=A.current)||void 0===o?void 0:o.setScrollData,getDataList:null===(a=A.current)||void 0===a?void 0:a.getDataList}}),(0,a.jsxs)(a.Fragment,{children:["all"===g||k?(0,a.jsx)(ig,{ref:A,resetStatusFunc:et,handleLoadEnd:ei,uid:T,highLightAwemeId:S,tab:"post",currentTab:u,defaultRes:y.length>0?ee:J,fetchMoreData:X,setUserPostList:I,retryTimes:5,getItemSelectedDisabled:er,topNavHeight:m,topOffset:v,panelNoData:(0,a.jsx)(B.H,{className:ib.empty,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"该账号还未发布过作品哦～"}),showPermissionIcon:!0}):(0,a.jsx)(i9,{modifyList:C,userInfo:d,selectPartilarTime:g,setCurrentScrollTime:w,defaultUserPostList:y,defaultHasMore:$.current,setUserPostList:I,uid:T,isSelf:R,tab:"post",currentTab:u,setSelectPartilarTime:_,setHideUserInfo:f,resetStatusFunc:et,getItemSelectedDisabled:er,onBan:()=>N(!0),rebackParamRef:z,topNavHeight:m}),!R&&P&&"all"===g&&(0,a.jsx)("div",{className:ib.hasLook,onClick:()=>{var e;null===(e=A.current)||void 0===e||e.locateSelectVideo(K.current,-150)},children:(0,a.jsxs)("div",{className:ib.btn,children:[(0,a.jsx)("span",{className:ib.text,children:"刚刚看过"}),(0,a.jsx)(ij,{})]})})]})}),ot=()=>{let e=(0,s.useRef)(),t=(0,s.useCallback)(async t=>{let{name:l,desc:n,avatar:r,avatarUri:i}=t,{statusCode:o,statusMsg:a="",mixId:s}=await l7({mixName:l,mixDesc:n,mixCover:i});return(nV.sendLog("createCompilationComfirm",{compilation_id:s,compilation_name:l,status:"private",function_name:"save"}),0===o)?(setTimeout(()=>{var t;null===(t=e.current)||void 0===t||t.createMix({mixId:s,mixName:l,mixDesc:n,mixCover:r,coverUri:i})},0),""):a||"服务异常，请稍后再试"},[]);return{mixRef:e,onMixCreated:t}};var ol=e=>{var t,l,n;let{userInfo:r,currentTab:i,defaultPostRes:d,topOffset:u=0,topNavHeight:v=60,setHideUserInfo:m,hideUserInfo:h,abTestData:p,currentSubTab:g=tD.VIDEO,onSubTabChange:_,defaultMixRes:C,defaultSeriesRes:y,showSearchBar:I,searchBarSlot:b,isListSelectable:j,setIsListSelectable:k}=e,N=(0,s.useRef)(null),[S,E]=(0,s.useState)([]),[L,T]=(0,s.useState)([]),[M,P]=(0,s.useState)("all"),[D,A]=(0,s.useState)("all"),[F,B]=(0,s.useState)(),[U,O]=(0,s.useState)(!1),[W,z]=(0,s.useState)(),[$,K]=(0,s.useState)([]),{isSelf:G}=null!==(n=(0,s.useContext)(Z))&&void 0!==n?n:{},[Y,q]=(0,s.useState)(!1),Q=(0,s.useRef)(),X=(0,s.useRef)((null==d?void 0:d.cursor)||0),J=(0,s.useRef)({});(0,c.C)(x.w3.components.user_post);let{mixRef:ee,onMixCreated:et}=ot();(0,s.useEffect)(()=>{G&&r.awemeCount&&tH.sendLog("creatorManageEntranceShow",{type:"post"})},[G,r.awemeCount]),(0,s.useEffect)(()=>{var e;(null==p?void 0:null===(e=p.AuthorBlock)||void 0===e?void 0:e.type)?O(!0):O(!1)},[p]);let el=(0,s.useCallback)(()=>{X.current=0,J.current={}},[]),{isPostDelete:en,reloadForPostDelete:er,reloadForPostAdd:ei}=(0,s.useContext)(t8);(0,s.useEffect)(()=>{!Object.values(tD).includes(g)&&(null==_||_(tD.VIDEO)),P("all"),A("all")},[g,_]),(0,s.useEffect)(()=>{if(en){var e,t,l,n;null==Q||null===(t=Q.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),el(),null==Q||null===(n=Q.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n),P("all"),A("all"),m(!1),E([])}},[en,el,m]);let eo=(0,s.useCallback)(e=>{let{manageCount:t=0,isAdd:l=!1}=e;l?(w.Le.setConfig(w.gI.AddPostList,Array(t).fill("")),null==ei||ei()):(w.Le.setConfig(w.gI.DeletePostList,Array(t).fill("")),null==er||er())},[er,ei]),ea=G&&g===tD.COMPILATION,es=l_({maxSelectedCount:100,onManageEndCallback:eo,tabName:"post",subTabName:ea?"mix":"video",isListSelectable:j,setIsListSelectable:k}),{updateIsSelectDisabled:ed,selectedCount:eu,selectItems:ec,resetScrollList:ev}=es,em=e=>{if(!!e)null==_||_(e),e!==g&&(0,t9.V)().scrollTo(0,0)};(0,s.useEffect)(()=>{let e=(0,H.Rs)("high_light_aweme_id");e&&(z(e),(0,H.U$)(["high_light_aweme_id"]))},[]);let ef=(0,s.useRef)(null);return(0,a.jsxs)(lw.Provider,{value:(0,o._)({},es),children:[(0,a.jsxs)("div",{className:ly.post,children:[(0,a.jsx)(iH,{headerHeight:j?72:44,topNavHeight:v,topOffset:h?-200:u,children:(0,a.jsxs)("div",{className:f()(ly.header,{[ly.noMarginBottom]:G},{[ly.headerBg]:j}),id:"user-tabbar-2",children:[j?(0,a.jsx)(iq,{currentSubTab:g,currentTab:i,selectedText:ea?"合集":"作品",operateBtns:[{key:"cancel_post",actionText:"删除",onClick:()=>{var e,t;if((null==ec?void 0:ec.length)!==0)V.logInstance.sendLog("functionIconClick",{tab_name:i,sub_tab_name:g,item_cnt:eu,function_name:"delete"}),null===(t=ef.current)||void 0===t||null===(e=t.changeShowDeleteConfirm)||void 0===e||e.call(t,!0)}},{key:"permission_set",actionText:"权限设置",onClick:()=>{var e,t;if((null==ec?void 0:ec.length)!==0)V.logInstance.sendLog("functionIconClick",{tab_name:i,sub_tab_name:g,item_cnt:eu,function_name:"permission_setting"}),null===(t=ef.current)||void 0===t||null===(e=t.changeShowPermissionConfirm)||void 0===e||e.call(t,!0)}}]}):(0,a.jsx)(R.Tabs,{type:"button",className:ly.tabs,activeKey:g,onChange:e=>em(e),children:(G?tA:tF).map(e=>(0,a.jsx)(R.TabPane,{itemKey:e.tab,tab:(0,a.jsxs)("div",{className:ly.tabItem,children:[(0,a.jsx)("span",{children:e.title}),e.lock&&(0,a.jsx)("div",{className:ly.iconWrapper,children:(0,a.jsx)(ep.z,{className:f()(ly.iconLock,{[ly.iconActive]:e.tab===g}),svg:(0,a.jsx)(lu.Z,{})})})]})},e.tab))}),(0,a.jsxs)("div",{className:ly.tool,ref:B,children:[g===tD.VIDEO&&(0,a.jsxs)(a.Fragment,{children:[I&&b,!U&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.Divider,{className:ly.divider,layout:"vertical",margin:"12px"}),(0,a.jsx)(i2,{postTimeList:L,onTimeClick:e=>{P(e),A(e),"all"===e&&(0,t9.V)().scrollTo(0,0)},isSelf:G,currentScrollTime:D,logParams:{enter_from:G?"personal_homepage":"others_homepage",tab_name:"post"},className:ly.timeLineButtonAugment,isListSelectable:j})]})]}),G&&g===tD.COMPILATION&&!j&&(0,a.jsx)(rA,{type:"create",userInfo:r,edit:et,children:(0,a.jsxs)("div",{className:ly.createMix,onClick:()=>nV.sendLog("compilationCreateClick"),children:[(0,a.jsx)(ep.z,{svg:(0,a.jsx)(lc.Z,{}),className:ly.createMixIc}),"创建合集"]})})]})]})}),(0,a.jsxs)("div",{className:f()(ly.list,{[ly.default]:!j}),"data-e2e":"user-post-list",children:[g===tD.VIDEO&&(0,a.jsx)(oe,{ref:N,userInfo:r,currentTab:i,defaultPostRes:d,topOffset:0,topNavHeight:60,setHideUserInfo:m,hideUserInfo:h,abTestData:p,postTimeList:L,setPostTimeList:T,selectPartilarTime:M,setSelectPartilarTime:P,currentScrollTime:D,setCurrentScrollTime:A,modifyList:$}),g===tD.SECRET_VIDEO&&(0,a.jsx)(ix,{currentTab:i}),g===tD.COMPILATION&&(0,a.jsx)(rX,{ref:ee,topNavHeight:60,isListSelectable:j,currentTab:i,userInfo:r,defaultMixRes:(null==C?void 0:null===(t=C.data)||void 0===t?void 0:t.length)>0?C:void 0}),g===tD.SERIES&&(0,a.jsx)(r2,{currentTab:i,userInfo:r,defaultSeriesRes:(null==y?void 0:null===(l=y.data)||void 0===l?void 0:l.length)>0?y:void 0})]})]}),(0,a.jsx)(rS,{ref:ef,updateIsSelectDisabled:ed,setIsListSelectable:k,onManageEndCallback:eo,resetScroll:ev,selectItems:ec,selectedCount:eu,listRef:ea?ee:N,currentTab:i,subTab:g,setModifyList:K})]})},on=l("332482"),or=l("63205");let oi=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:16.5,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M7.158 11.693c-.41.41-1.073.41-1.482 0l-4.81-4.81a1.248 1.248 0 0 1 0-1.765L5.676.307a1.048 1.048 0 1 1 1.482 1.482L3.995 4.953h11.982a1.048 1.048 0 0 1 0 2.095H3.996l3.162 3.163c.41.41.41 1.073 0 1.482z",fill:"#000"})})));var oo=l("243863");let oa=e=>{let{width:t=16.5,height:l=12,className:n}=e;return(0,a.jsx)(oo.A,(0,M._)((0,o._)({},e),{width:t,height:l,src:oi,id:"svg_arrow_right",viewBox:"0 0 16.5 12",defaultWidth:16.5,defaultHeight:12,className:n}))};var os=l("180962"),od=l("219529"),ou="IuGTQLmM",oc="Fdci9qW8",ov="w8T5jPyy",om=e=>{let{title:t="暂无喜欢的视频",desc:l="快到首页寻找更多视频吧",className:n,type:r="like"}=e,i=(0,s.useCallback)(()=>{V.logInstance.sendLog("clickBackRecommend",{enter_from:(0,tn.vM)()})},[]),o=new Map([["like",(0,a.jsx)(os.Z,{},"like")],["collect",(0,a.jsx)(od.Z,{},"collect")]]).get(r||"like");return(0,a.jsx)(B.H,{className:f()(ou,n),icon:o,title:t,desc:l,children:(0,a.jsxs)(or.a,{href:"/?enter=guide",className:oc,target:"_self",onClick:i,children:[(0,a.jsx)(oa,{}),(0,a.jsx)("p",{className:ov,children:"去首页"})]})})},of={header:"jCWyqsxT",headerBg:"gpnvCoDz",like:"jd8mk227",likeNoMarginTop:"sgvAnidE",errorContent:"PDWY3lOT",fuFang:"ON31A8KN",empty:"AQBFnR1a",descText:"KzW7UQqj"};async function oh(e,t){let l,n=t;for(let t=0;t<10;t++){var r;if(n=(l=await e(n)).cursor,!l.hasMore||!!(null===(r=l.data)||void 0===r?void 0:r.length))break}return l}var op=e=>{var t,l;let{userInfo:n,currentTab:r,topNavHeight:i=60,abTestData:d,showSearchBar:u,searchBarSlot:v,isListSelectable:m,setIsListSelectable:h}=e,p={statusCode:0,data:[],hasMore:1,cursor:0,maxCursor:0},g=(0,l8.o)(null==n?void 0:n.secUid),{isSelf:_}=null!==(l=(0,s.useContext)(Z))&&void 0!==l?l:{},w=(0,s.useRef)(0),C=(0,s.useRef)(0),y=(0,s.useRef)({}),I=(0,s.useRef)([]),[b,j]=(0,s.useState)([]),[k,N]=(0,s.useState)(),S=(0,s.useRef)(!0);(0,c.C)(x.w3.components.user_like);let E=(0,s.useCallback)(async()=>{let e=_&&(null==S?void 0:S.current)&&nY.$w.hasCache;iw.z.markStart("user_like_fetch_data",{once:!0});let{data:t=[],maxCursor:l=0,hasMore:n,statusCode:r,logPb:i,whaleInfo:o}=await oh(t=>{var l;return nY.$w.request({cached:e,consume:!0,params:{userId:g,maxCursor:t,count:18,whaleCutToken:null===(l=y.current)||void 0===l?void 0:l.whaleCutToken},fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}})},C.current);iw.z.markEnd("user_like_fetch_data",{once:!0});let a=t.length<6?w.current:C.current;return t.map(e=>(e.cursor=a,e)),!r&&(e?setTimeout(()=>{var e,t;null===(t=P.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(w.current=C.current,C.current=l),y.current={whaleCutToken:null==o?void 0:o.whaleCutToken}),S.current=!1,{data:tk(t,I.current),maxCursor:e?0:l,hasMore:e?1:n,statusCode:e?0:r,whaleDecisionCustom:null==o?void 0:o.whaleDecisionCustom,logPb:i,clearBefore:!e&&0===w.current}},[g,d,_]),L=(0,s.useCallback)(()=>{C.current=0,y.current={}},[]),T=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},l=[];return e.forEach(e=>{l.push(e.awemeId),t[e.awemeId]=(0,iP.I)(e.awemeType)}),(0,rs.g)({awemeIds:l.join(","),itemTypeMap:t})},[]),{updateFavoriteCount:M,isPostDelete:R}=(0,s.useContext)(t8),P=(0,s.useRef)();(0,s.useEffect)(()=>{if(R){var e,t,l,n;null==P||null===(t=P.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),L(),null==P||null===(n=P.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)}},[R,L]);let D=(0,s.useCallback)(e=>{let{manageCount:t=0}=e;null==M||M(-t,!0)},[M]),A=(0,s.useCallback)(()=>{b.length<100&&(null==M||M(b.length,!1))},[M,b.length]),F=l_({maxSelectedCount:100,operate:T,operateDesc:{operation:"取消",itemName:"喜欢的作品"},onManageEndCallback:D,tabName:"like",subTabName:"video",isListSelectable:m,setIsListSelectable:h}),{changeShowConfirm:U,renderConfirmModal:O,selectedCount:H,selectItems:W=[]}=F,[z,$]=(0,s.useState)((null==b?void 0:b.length)>0||(null==p?void 0:null===(t=p.data)||void 0===t?void 0:t.length)>0);return((0,s.useMemo)(()=>(0,a.jsxs)("div",{className:f()(of.descText,of.fuFang),children:[(0,a.jsx)("p",{children:"找不到内容？"}),(0,a.jsx)("p",{children:"1.某些内容格式电脑端暂不支持查看，请在 APP 查看"}),(0,a.jsx)("p",{children:"2.某些内容因作者删除或设置私密，暂时无法查看"})]}),[]),(0,s.useEffect)(()=>{var e;$((null==b?void 0:b.length)>0||(null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.length)>0)},[b,null==p?void 0:p.data]),_||n.showFavoriteList)?(0,a.jsxs)(lw.Provider,{value:(0,o._)({},F),children:[(0,a.jsxs)("div",{className:f()(of.like,{[of.likeNoMarginTop]:_}),"data-e2e":"user-like-list",children:[_&&(0,a.jsx)(iH,{headerHeight:m?72:44,topNavHeight:i,children:(0,a.jsxs)("div",{className:f()(of.header,{[of.headerBg]:m}),children:[m?(0,a.jsx)(iq,{currentSubTab:"",currentTab:r,selectedText:"喜欢的作品",operateBtns:[{key:"cancel_like",actionText:"取消喜欢",onClick:()=>{if((null==W?void 0:W.length)!==0)U(!0),V.logInstance.sendLog("functionIconClick",{tab_name:"like",sub_tab_name:"video",item_cnt:H,function_name:"like_cancel"})}}]}):(0,a.jsx)("div",{}),u&&v]})}),(0,a.jsx)(ig,{ref:P,handleLoadEnd:A,resetStatusFunc:L,uid:g,tab:"like",currentTab:r,defaultRes:p,fetchMoreData:E,retryTimes:5,panelNoData:_?(0,a.jsx)(om,{className:of.empty}):void 0,updateAwemeList:j,topNavHeight:i})]}),null==O?void 0:O()]}):(0,a.jsx)(B.H,{icon:(0,a.jsx)(on.Z,{}),title:"喜欢内容不可见",desc:"该用户已将喜欢设为私密",className:of.errorContent})},og=l("851190"),o_=l("911304"),ox=l("660391"),ow=l("63405"),oC=l("986694"),oy=l("666592"),oI={header:"fqOdOXA9",container:"TK6g6zOZ",item:"sc6tKxF5",empty:"CSn254dS"};function ob(e){let t=K()(e);if(!t.isValid())return"";let l=w.Le.getConfig(w.gI.ServerTime),n=l?K()(l):K()(),r=t.isSame(n,"day"),i=t.isSame(n.subtract(1,"day"),"day");return r?"今天":i?"昨天":n.format("YYYY")===t.format("YYYY")?t.format("MM月DD日"):t.format("YY年MM月DD日")}let oj=(0,ia.ZP)(()=>Promise.all([l.e("66135"),l.e("25244"),l.e("1709"),l.e("46362"),l.e("67239"),l.e("923"),l.e("42562"),l.e("41442"),l.e("58195"),l.e("264"),l.e("31689"),l.e("29977"),l.e("59765"),l.e("27713"),l.e("34456"),l.e("27123"),l.e("12433"),l.e("55661"),l.e("65386"),l.e("47983"),l.e("6593"),l.e("81151"),l.e("50645"),l.e("41125"),l.e("90597")]).then(l.bind(l,27091)),{ssr:!1});var ok=s.forwardRef(function(e,t){var l,n,r,i;let{currentTab:d,tab:u,setHasClean:c,userInfo:v,topNavHeight:m=60}=e,h=(0,l8.o)(null==v?void 0:v.secUid),{isSelf:p}=(0,s.useContext)(Z)||{},g=null!==(r=(0,z._)())&&void 0!==r?r:{},_=null!==(i=(0,eF.useUserInfoContext)())&&void 0!==i?i:{},[w,C]=(0,s.useState)([]),[y,I]=(0,s.useState)(-1),[b,j]=(0,s.useState)(""),k=(0,s.useRef)(),N=(0,s.useRef)(),S=(0,s.useRef)(0),E=(0,s.useRef)(),{reloadForPostDelete:L,isPostDelete:T}=(0,s.useContext)(t8),M=(0,s.useRef)({}),R=(0,s.useRef)(!0),P=(0,s.useRef)(0);(0,s.useEffect)(()=>{if(T){var e,t,l,n;null==k||null===(t=k.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),S.current=0,null==k||null===(n=k.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)}},[T]);let D=async()=>{var e;let t=p&&(null==R?void 0:R.current)&&0===S.current&&nY.vF.hasCache;iw.z.markStart("user_record_fetch_data",{once:!0});let{data:l,cursor:n,hasMore:r,statusCode:i}=await nY.vF.request({cached:t,consume:!0,params:(0,o._)({maxCursor:S.current,count:20},null!==(e=null==M?void 0:M.current)&&void 0!==e?e:{}),fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}});return iw.z.markEnd("user_record_fetch_data",{once:!0}),l.length>0&&c(!0),!i&&(t?setTimeout(()=>{var e,t;null===(t=k.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(P.current=S.current,S.current=n)),R.current=!1,{data:l,hasMore:t?1:r,statusCode:t?0:i,clearBefore:!t&&0===P.current}},A=async e=>{var t,l,n,r;S.current=0,M.current=e,null==k||null===(l=k.current)||void 0===l||null===(t=l.resetRes)||void 0===t||t.call(l,{statusCode:0,dataList:[],hasMore:!0});let{statusCode:i,data:o=[],hasMore:a}=await (null==D?void 0:D());null==k||null===(r=k.current)||void 0===r||null===(n=r.resetRes)||void 0===n||n.call(r,{statusCode:i,dataList:o,hasMore:a})},F=(0,s.useCallback)((e,t)=>(0,a.jsx)(il,{rank:t,info:e,isSelf:p,tab:u,uid:h,onClick:l=>{null==l||l.preventDefault();let n=`${x.w3.modal.modal_first_video_play}_start`;if((0,n0.tl)(n),(0,n0.B1)({tag:n}),null==e?void 0:e.awemeId){var r;null===r6.YY||void 0===r6.YY||null===(r=r6.YY.setPlayerReuseAble)||void 0===r||r.call(r6.YY,r7.v.User,e.awemeId)}E.current="",I(t),N.current=e},onNicknameClick:()=>{E.current="author_card",I(t),N.current=e},reuseConfig:{scene:r7.v.User,reuseId:null==e?void 0:e.awemeId,autoCreate:!0}}),[]);(0,s.useEffect)(()=>{w.length&&j(e=>{var t,l;let n=ob(null!==(l=null===(t=w[0])||void 0===t?void 0:t.historyTime)&&void 0!==l?l:0);return""!==e?e:n});let e=(0,t9.s)(),t=()=>{let t=document.querySelector(".record_card");if(t){var l,n,r;let i=(null==t?void 0:t.clientHeight)+24;if((null==t?void 0:t.offsetTop)-220>(0,iV.F)(e).y)j(ob(null!==(n=null===(l=w[0])||void 0===l?void 0:l.historyTime)&&void 0!==n?n:0));else{let t=window.innerWidth>r5.I?6:3,l=Math.floor(((0,iV.F)(e).y-220)/i);if(l>=0){let e=w[l*t];j(ob(null!==(r=null==e?void 0:e.historyTime)&&void 0!==r?r:0))}}}};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[w]);let V=(0,l9.m)();return(0,s.useEffect)(()=>{let e=(0,H.Rs)("aweme_id");if(e&&w&&(null==w?void 0:w.length)>0){var t;let l=null==w?void 0:null===(t=w.findIndex)||void 0===t?void 0:t.call(w,t=>(null==t?void 0:t.awemeId)===e);e&&-1!==l&&I(l),(0,H.U$)("aweme_id")}},[w]),(0,s.useEffect)(()=>W.listen(W.EVENT.openUserModal,e=>{let{awemeId:t}=e,l=(0,H.Rs)("aweme_id");if(l&&t===l&&w&&(null==w?void 0:w.length)>0){var n;let e=null==w?void 0:null===(n=w.findIndex)||void 0===n?void 0:n.call(w,e=>(null==e?void 0:e.awemeId)===l);-1!==e&&I(e),(0,H.U$)("aweme_id")}}),[w]),(0,s.useImperativeHandle)(t,()=>({reloadList:A})),(0,a.jsxs)(a.Fragment,{children:[w.length>0&&(0,a.jsx)(iH,{headerHeight:44,topNavHeight:m+44,noBgImage:!0,children:(0,a.jsx)("div",{className:oI.header,children:b})}),(0,a.jsx)(lM.Z,{scrollContainerEl:V,ref:k,containerClassName:oI.container,itemClassName:f()(oI.item,"record_card"),panelNoData:(0,a.jsx)(B.H,{className:oI.empty,icon:(0,a.jsx)(ox.Z,{}),title:"暂无内容",desc:"暂时还没有观看历史记录哦"}),skeletonNum:0,renderItem:F,fetchMoreData:D,setDataList:C,pause:d!==u,dataFilter:(e,t)=>t?e.filter(e=>-1===t.findIndex(t=>(null==t?void 0:t.awemeId)===e.awemeId)):e}),-1!==y&&(0,a.jsx)(oj,{modalEnterFrom:lb.a.UserRecord,modalInnerFeedCard:E.current,uid:h,userContext:_,abtestData:g,isSelf:p,anyHooks:oy.a,originAwemeInfo:N.current,userAwemeList:w,scrollRef:k,modalVideoIndex:y,additionalDistance:-150,close:()=>{var e;r6.YY.clearAllReusePlayer(),I(-1),null==L||L(),(0,H.U$)("aweme_id"),(0,H.U$)("is_personal_panel_video"),(null==M?void 0:null===(e=M.current)||void 0===e?void 0:e.status)===Y.VideoStatusFilter.Watching&&A(null==M?void 0:M.current)},moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:p},logParams:{enter_from:"personal_homepage",enter_from_merge:"personal_homepage",enter_method:(0,H.Rs)("enter_method"),is_personal_panel_video:Number((0,H.Rs)("is_personal_panel_video"))||0,tab_name:"record_card",sub_tab_name:"video"},shortCutFilteredList:[null===(l=lj.getShortcut().dislike)||void 0===l?void 0:l.key],scene:"record",reuseConfig:{scene:r7.v.User,reuseId:null===(n=N.current)||void 0===n?void 0:n.awemeId,autoCreate:!1}})]})}),oN=l("577603"),oS=l.n(oN),oE=l("195591");let oL=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:20,height:21,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsxs)("g",{opacity:".9",fill:"#AEAFB3",children:[(0,a.jsx)("path",{d:"M14.873 15.507h-.45V14.21a4.28 4.28 0 0 0-2.398-3.846 4.28 4.28 0 0 0 2.398-3.845V5.22h.45c.232 0 .42-.191.42-.428a.424.424 0 0 0-.42-.429H5.42a.424.424 0 0 0-.42.429c0 .237.188.428.42.428h.442V6.52a4.28 4.28 0 0 0 2.398 3.845 4.28 4.28 0 0 0-2.398 3.846v1.297H5.42a.424.424 0 0 0-.42.429c0 .236.188.428.42.428h9.453c.232 0 .42-.192.42-.428a.424.424 0 0 0-.42-.429zM6.719 6.492v-1.27h6.872v1.27a3.436 3.436 0 0 1-6.872 0zm6.872 9.015H6.719v-1.27a3.436 3.436 0 0 1 6.872 0v1.27z"}),(0,a.jsx)("path",{d:"M10.578 8.656a.429.429 0 0 0-.43-.429c-.96 0-1.712-.752-1.712-1.712a.429.429 0 0 0-.858 0c0 1.441 1.13 2.57 2.57 2.57a.429.429 0 0 0 .43-.429z"})]})})));var oT={container:"jA6OE8LO",leftWrap:"Pv6ibyWN",cover:"G_RrIcN5",msec:"T_Np82B_",skeleton:"vZBthp8i",rightWrap:"JdIwrT29",title:"Gjng1AcG",updateWrap:"iaoHeQbB",updateTip:"i4AfsMzx",updateCount:"PSSpW9BY",process:"txSqjt51",processText:"Tk3pi1iv"};K().extend(oS());var oM=e=>{var t;let{info:l,rank:n,query:r}=e,[i,d]=(0,nx.Z)();(0,s.useEffect)(()=>{var e,t,r;tH.sendLog("vsVideoShow",(0,M._)((0,o._)({},l.eventParams),{enter_from_merge:"personal_homepage",enter_method:"history",sub_tab_type:"",recommend_rank_num:n})),tH.sendLog("vsVideoSeasonCoverShowV2",(0,M._)((0,o._)({},l.eventParams),{enter_from_merge:"personal_homepage",enter_method:"history",previous_page:"",previous_page_enter_method:"",previous_page_sub_tab:"",to_vs_episode_id:null===(e=l.eventParams)||void 0===e?void 0:e.vs_episode_id,to_vs_ep_group_id:null===(t=l.eventParams)||void 0===t?void 0:t.vs_eq_group_id,to_room_id:null===(r=l.eventParams)||void 0===r?void 0:r.room_id,recommend_rank_num:n}))},[d,n,l]);let u=(0,oE.iV)(null==l?void 0:l.albumId);return(0,a.jsx)(P.a,{href:`/${u?"vsdetail":"lvdetail"}/${l.episodeId}${r?`?${r}`:""}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{var e,t,r;tH.sendLog("vsVideoSeasonCoverClickV2",(0,M._)((0,o._)({},l.eventParams),{enter_from_merge:"personal_homepage",enter_method:"history",previous_page:"",previous_page_enter_method:"",previous_page_sub_tab:"",to_vs_episode_id:null===(e=l.eventParams)||void 0===e?void 0:e.vs_episode_id,to_vs_ep_group_id:null===(t=l.eventParams)||void 0===t?void 0:t.vs_eq_group_id,to_room_id:null===(r=l.eventParams)||void 0===r?void 0:r.room_id,recommend_rank_num:n}))},children:(0,a.jsxs)("div",{className:oT.container,ref:i,children:[(0,a.jsxs)("div",{className:oT.leftWrap,children:[(0,a.jsx)(nw.Q,{iconWidth:52,iconHeight:60,src:l.coverUrl,alt:l.title,imgClass:oT.cover,skeletonClass:oT.skeleton}),(0,a.jsx)("span",{className:oT.msec,children:(t=l.msec,K().duration(t).format("HH:mm:ss"))}),(0,a.jsx)(nQ.zx,{type:{3:"primary",4:"limited",6:"default"}[l.labelV2]})]}),(0,a.jsxs)("div",{className:oT.rightWrap,children:[(0,a.jsxs)("div",{className:oT.title,children:[l.titleBefore?`${l.titleBefore} | `:"",l.titleAfter]}),(0,a.jsxs)("div",{className:oT.updateWrap,children:[l.hasUpdate&&(0,a.jsx)("span",{className:oT.updateTip,children:"有更新"}),l.hasUpdate&&(0,a.jsx)("span",{className:oT.updateCount,children:l.updatedEpisode})]}),(0,a.jsxs)("div",{className:oT.process,children:[(0,a.jsx)(A.Z,{className:oT.icon,src:oL,width:20,height:20,viewBox:"0 0 20 20"}),(0,a.jsxs)("span",{className:oT.processText,children:["观看到",l.progress,"%"]})]})]})]})})},oR={container:"cU3TDvmX",content:"w2EgZGip",date:"XAO8XHq3",list:"LLJf_Hoz",card:"dUQPr8gR",bottom:"WCWadNc3",noMore:"jKLVF0UF",noMoreText:"ZQZmNOBe",opBtn:"wHZWUGqe",error:"QLXIdv7t"};let oP=(e,t)=>(t.forEach(t=>{let l=ob(1e3*t.playTime);e[l]?e[l].push(t):e[l]=[t]}),(0,o._)({},e)),oD=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:oR.noMoreText,children:t})},oA=e=>{let{onReload:t}=e;return(0,a.jsxs)(oD,{children:["服务异常，重新",(0,a.jsx)("span",{onClick:t,className:oR.opBtn,children:"刷新"}),"拉取数据"]})};var oF=e=>{let{setHasClean:t}=e,[l,n]=(0,s.useState)({}),[r,i]=(0,s.useState)(!1),[o,u]=(0,s.useState)(!1),c=(0,s.useRef)(r);c.current=r;let v=(0,s.useRef)(null),m=(0,s.useRef)(0),f=(0,s.useRef)(!0),p=(0,s.useCallback)(async()=>{i(!0),u(!1);try{let{data:e,cursor:l,hasMore:r,statusCode:o}=await (0,oC.TF)({cursor:m.current,count:20});return e.length>0&&t(!0),o?u(!0):(m.current=l,f.current=r),n(t=>oP(t,e)),i(!1),{list:e,hasMore:r,statusCode:o}}catch(e){u(!0)}},[]),g=(0,s.useCallback)(async()=>{v.current&&f.current&&!c.current&&v.current.getBoundingClientRect().bottom-window.innerHeight<=600&&await p()},[]);return((0,s.useEffect)(()=>{let e=iF()(g,50),t=(0,t9.s)();return t.addEventListener("scroll",e),()=>{t.removeEventListener("scroll",e)}},[]),(0,s.useEffect)(()=>{p()},[]),0!==Object.keys(l).length||f.current)?(0,a.jsxs)("div",{className:oR.container,ref:v,children:[(0,a.jsx)("div",{className:oR.content,children:Object.keys(l).map(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:oR.date,children:e}),(0,a.jsx)("ul",{className:oR.list,children:l[e].map((e,t)=>(0,a.jsx)("li",{className:oR.card,children:(0,a.jsx)(oM,{info:e,rank:t,query:d.stringify({t:Math.floor((null==e?void 0:e.msec)/1e3)})})},t))})]}))}),(0,a.jsxs)("div",{className:oR.bottom,children:[r&&(0,a.jsx)(h.gb,{}),o&&(0,a.jsx)(oA,{onReload:p}),!r&&!f.current&&(0,a.jsx)("div",{className:oR.noMore,children:"暂时没有更多了"})]})]}):(0,a.jsx)("div",{className:oR.error,children:(0,a.jsx)(B.H,{icon:(0,a.jsx)(ox.Z,{}),title:"暂无内容",desc:"暂时还没有观看历史记录哦"})})},oV=l("87908"),oB=l("379788"),oU=l("859990"),oO=l("165354");let oH=e=>{let{notSeenItemList:t=[],originAwemeInfo:l,setAwemeInfoList:n,setCurrentNumber:r,currentAwemeInfo:i}=e,o=(0,s.useRef)({});(0,s.useEffect)(()=>{l&&(n([l]),r(0))},[l]),(0,s.useEffect)(()=>{if((null==t?void 0:t.length)>0){var e;null==t||null===(e=t.forEach)||void 0===e||e.call(t,e=>{(0,oU.b)({awemeId:e,countOnce:1,scene:lb.a.UserCard})})}},[t]),(0,s.useEffect)(()=>{var e;(null==i?void 0:i.awemeId)&&!o.current[null==i?void 0:i.awemeId]&&(null==i?void 0:i.awemeId)&&(null==t?void 0:t.length)>0&&(null==t?void 0:null===(e=t.includes)||void 0===e?void 0:e.call(t,null==i?void 0:i.awemeId))&&(o.current[null==i?void 0:i.awemeId]=!0,(0,e_.qA)({item_id_list:null==i?void 0:i.awemeId,type:1}),(0,oO.O)({awemeInfo:i}))},[i,t])};var oW={user:"D0oqdAK1",container:"mOOo0EEq",listSortByTime:"pNc4csXx",date:"F9Opytxz",hidden:"pLQ08jTl",cardList:"Ej8ng3AU",cardContainer:"GPpwYT29",loading:"YMFtv1gI",empty:"TIfN8uCX"},oz={userVisitedCard:"uJmOL2Mh",avatarWrap:"XRPf5xQI",avatar:"_3dZXoox",info:"lBbkAK7r",desc:"NKkQWcie",nameInfo:"cfL93TQH",nickname:"Bttiv9iq",badge:"CwH_CNqs",badgeIcon:"EB5NDwzc",extraLine:"Qe03yCfa",extra:"WuFU8R_S",liveExtraText:"RuoqzrOT",followButton:"HcxwJ85w",contentBlock:"c6Ty61Qw"};let oZ=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=null==t?void 0:null===(e=t.indexOf)||void 0===e?void 0:e.call(t,"\n");return l>=0?`${t.substring(0,l)}`:t};var o$={User:"user",Live:"live"};function oK(e){var t,l,n,r,i,d;let{scene:u="user",abtestData:c,logId:v="",isSelf:m,logParams:h={},selfUid:p,isLogin:g,dispatch:_,selfSecUid:x,userVisitedInfo:w,className:C,onClick:y}=e,{nickname:I,uid:b,secUid:j,avatarSrc:k,followStatus:N,followerStatus:S,notSeenItemIdList:E,roomData:L,infoStruct:T,accountCertInfo:M,desc:P,roomIdStr:D,scheduledText:A}=w||{},F=!!(null==L?void 0:null===(t=L.owner)||void 0===t?void 0:t.web_rid),V=(0,s.useRef)(v),B=(0,s.useMemo)(()=>(null==T?void 0:T.priority)===Y.VerifyType.HAS_NEW_PUBLISH?(null==T?void 0:T.text)||null:"",[T]),U=(0,s.useMemo)(()=>{var e;return(0,o._)({web_rid:null==L?void 0:null===(e=L.owner)||void 0===e?void 0:e.web_rid,enter_from_merge:"personal_homepage",action_type:"click",room_id:D},h||{})},[D,null==L?void 0:null===(l=L.owner)||void 0===l?void 0:l.web_rid,h]),O=(0,s.useMemo)(()=>L?{authorInfo:{roomData:L,roomId:D,nickname:I,title:I,secUid:j,desc:P,uid:b},desc:P}:{},[L,P,D,I,b,j]),{follow:H,unFollow:z}=(0,eX.OM)({selfUid:p,actionUid:b,defaultFollowerStatus:S,defaultFollowStatus:N,isLogin:g,onLoginSuccess:()=>null==_?void 0:_({type:"updateUserInfo"}),success:e=>{let{action:t}=e;("unFollow"===t||"follow"===t)&&m&&W.emit(W.EVENT.UpdateSelfPageFollowCount,{action:t})},fail:eX.GH}),{followStatus:Z,text:$,buttonType:K}=(0,eJ.r)({selfUid:p,actionUid:b,defaultFollowerStatus:S,defaultFollowStatus:N});return(0,a.jsxs)("div",{className:f()(oz.userVisitedCard,C),onClick:e=>{var t;return null==y?void 0:y(e,{isLiving:F,actionUid:b,webRid:null==L?void 0:null===(t=L.owner)||void 0===t?void 0:t.web_rid,roomId:D,actionSecUid:j,notSeenItemIdList:E})},children:[(0,a.jsx)("div",{className:oz.avatarWrap,children:F?(0,a.jsx)(eW.nh,{openMultiTaskWindowInWindow:(0,es.DT)(),type:"large",src:k,alt:`${I}头像`,uid:b,liveRoomUrl:(0,eZ.cc)(U),isNeedSendLog:!0,liveRoomParam:{logId:V.current,episodeExtra:null==L?void 0:L.episode_extra},isFirstLive:(null==L?void 0:null===(r=L.episode_extra)||void 0===r?void 0:null===(n=r.mod)||void 0===n?void 0:n.episode_stage)===2,isEcomLive:(null==L?void 0:null===(d=L.ecom_data)||void 0===d?void 0:null===(i=d.room_cart_v2)||void 0===i?void 0:i.show_cart)===1,onClick:e=>{e.preventDefault()},abtestData:c,logParams:h,awemeInfo:O,position:"right",from:"follow",scene:"pc_profile_struct",zIndex:1e4}):(0,a.jsx)(ez.q,{className:oz.avatar,src:k,alt:`${I}头像`})}),(0,a.jsxs)("div",{className:oz.info,children:[(0,a.jsxs)("div",{className:oz.nameInfo,children:[(0,a.jsx)("div",{className:oz.nickname,children:(0,a.jsx)(q.Z,{text:I})}),(0,a.jsx)(el.C,{iconClassName:oz.badgeIcon,accountCertInfo:M,className:oz.badge,isRoleNameShow:!1})]}),P&&(null==P?void 0:P.length)>0?(0,a.jsx)("div",{className:oz.desc,children:(0,a.jsx)(q.Z,{text:oZ(P)})}):null,"user"===u&&!!B&&(0,a.jsx)("div",{className:oz.extraLine,children:(0,a.jsx)("span",{className:oz.extra,children:B})}),"live"===u&&(0,a.jsxs)(a.Fragment,{children:[!F&&!!A&&(0,a.jsx)("div",{className:oz.liveExtraText,children:A}),F&&!!(null==L?void 0:L.title)&&(0,a.jsx)("div",{className:oz.liveExtraText,children:null==L?void 0:L.title})]})]}),(0,a.jsx)(R.Button,{className:oz.followButton,type:K===eQ.TT.Active?"primary":"secondary",onClick:e=>{e.stopPropagation(),(0,e3.V)(Z)?z():H()},theme:"solid",children:(0,a.jsx)("div",{className:oz.contentBlock,children:$})})]})}var oG=e=>{var t,l,n,r;let{setHasClean:i,currentTab:o,tab:u,topNavHeight:c=60}=e,v=null!==(l=(0,z._)())&&void 0!==l?l:{},m=null!==(n=(0,eF.useUserInfoContext)())&&void 0!==n?n:{},{isSelf:p}=null!==(r=(0,s.useContext)(Z))&&void 0!==r?r:{},{dispatch:g,userInfo:_}=m,[x,w]=(0,s.useState)(),[C,y]=(0,s.useState)([]),[I,b]=(0,s.useState)(!1),j=(0,s.useRef)(),k=(0,l9.m)(),N=(0,s.useRef)(),S=(0,s.useRef)({}),[E,L]=(0,s.useState)(!1),[T,M]=(0,s.useState)(""),R=async e=>{var t;let{data:l=[],statusCode:n,whaleInfo:r}=await (0,i_.fetchUserPost)({userId:e,count:10,needTimeList:!1,whaleCutToken:null===(t=S.current)||void 0===t?void 0:t.whaleCutToken});return 0===n&&(S.current={whaleCutToken:null==r?void 0:r.whaleCutToken}),{statusCode:n,data:l}},P=async(e,t)=>{var l;null==e||null===(l=e.preventDefault)||void 0===l||l.call(e);let{isLiving:n,actionSecUid:r,webRid:i,roomId:o,notSeenItemIdList:a=[]}=t||{};if(n){let e=(0,eZ.cc)({web_rid:i,enter_from_merge:"personal_homepage",enter_method:"live_user_page_visit",enter_method_temai:"live_user_page_visit",action_type:"click",room_id:o});window.open(e,"_blank","noopener")}else try{if(L(!0),(null==a?void 0:a.length)>0){y(a);let e=await (0,oB.m_)({awemeId:a[0],originType:iC.F.UserRecord});if(L(!1),(null==e?void 0:e.statusCode)===0){let{detail:t}=e||{};w(t),b(!0)}else ee.F.info("服务异常，请重试")}else{if(!r){ee.F.info("服务异常，请重试"),L(!1);return}let{statusCode:e,data:t}=await R(r);if(L(!1),0===e){if(t&&(null==t?void 0:t.length)>0){let e=t.sort((e,t)=>t.createTime-e.createTime)[0];w(e),b(!0)}else{let e=(0,eZ.HC)(r,(0,d.stringify)({enter_from:"personal_homepage",is_search:0}));window.open(e,"_blank","noopener")}}else ee.F.info("服务异常，请重试")}}catch(e){ee.F.info("服务异常，请重试"),L(!1)}},D=async()=>{let{statusCode:e,userVisitedInfos:t,cursor:l,hasMore:n}=await (0,i_.fetchUserVisitedList)({cursor:N.current,count:20});return 0===e&&(N.current=l,(null==t?void 0:t.length)>0&&i(!0)),{statusCode:e,hasMore:n,data:t}},A=()=>{var e,t,l,n;null==j||null===(t=j.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),N.current=void 0,null==j||null===(n=j.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)};return(0,s.useEffect)(()=>{let e=(0,t9.s)(),t=()=>{let t;let l=(0,iV.F)(e).y,n=document.querySelectorAll(".user_record_date");if(l<148)t=n[0];else{var r;let e=[];null==n||null===(r=n.forEach)||void 0===r||r.call(n,t=>{(null==t?void 0:t.offsetTop)<Math.abs(l-148)&&e.push(t)}),(null==e?void 0:e.length)>0&&(t=e[e.length-1])}t&&M(null==t?void 0:t.innerText)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[]),(0,a.jsxs)("div",{className:oW.user,children:[T&&(0,a.jsx)(iH,{headerHeight:44,topNavHeight:c+44,noBgImage:!0,children:(0,a.jsx)("div",{className:oW.date,children:T})}),(0,a.jsx)(lM.Z,{ref:j,scrollContainerEl:k,itemClassName:oW.cardContainer,containerClassName:oW.container,fetchMoreData:D,skeletonNum:0,pause:o!==u,panelNoData:(0,a.jsx)(B.H,{className:oW.empty,icon:(0,a.jsx)(ox.Z,{}),title:"暂无内容",desc:"暂时还没有用户历史记录哦"}),renderList:e=>{var t,l,n;let r=Object.entries(null==e?void 0:null===(t=e.reduce)||void 0===t?void 0:t.call(e,(e,t)=>{let{visitTime:l}=t,n=K().unix(l).format("YYYY-MM-DD"),r=e[n];return e[n]=[...r||[],t],e},{})).sort((e,t)=>e[0]>t[0]?-1:0).map(e=>{let[t,l]=e;return{date:ob(t),list:l}});return!T&&M(null===(n=r[0])||void 0===n?void 0:n.date),(0,a.jsx)(a.Fragment,{children:null==r?void 0:null===(l=r.map)||void 0===l?void 0:l.call(r,(e,t)=>{var l;let{date:n,list:r}=e;return(0,a.jsxs)("div",{className:oW.listSortByTime,children:[(0,a.jsx)("div",{className:f()(oW.date,"user_record_date",{[oW.hidden]:T&&0===t}),children:n}),(0,a.jsx)("div",{className:oW.cardList,children:null==r?void 0:null===(l=r.map)||void 0===l?void 0:l.call(r,e=>{var t,l;return(0,a.jsx)(oK,{scene:o$.User,className:oW.cardContainer,userVisitedInfo:e,selfUid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,selfSecUid:null==_?void 0:null===(l=_.info)||void 0===l?void 0:l.secUid,dispatch:g,abtestData:v,isSelf:p,isLogin:null==_?void 0:_.isLogin,onClick:P,logParams:{enter_method:"live_user_page_visit",enter_method_temai:"live_user_page_visit"}},e.uid)})})]},n)})})}}),I&&(0,a.jsx)(lI.default,{modalInnerFeedCard:"author_card",defaultForceOpenTab:oV.L.Author,isActive:!0,abtestData:v,isSelf:p,uid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,anyHooks:oH,userContext:m,originAwemeInfo:x,notSeenItemList:C,modalEnterFrom:lb.a.UserCard,logParams:{enter_from:"personal_homepage",enter_from_merge:"personal_homepage",enter_method:(0,H.Rs)("enter_method"),tab_name:"record_card",sub_tab_name:"user"},close:()=>{A(),b(!1),w(void 0)}}),E&&(0,a.jsx)(h.gb,{className:oW.loading})]})},oY={live:"JiUC7wbY",container:"jY3zaqnU",listSortByTime:"QJAksNkU",date:"CpXmrcwP",hidden:"YYKXStDL",cardList:"CIjojERN",cardContainer:"mQ6Ravv6",loading:"QqJMyU4i",empty:"X4WayvZu"},oq=e=>{var t,l,n,r;let{setHasClean:i,currentTab:o,tab:u,topNavHeight:c=60}=e,v=null!==(l=(0,z._)())&&void 0!==l?l:{},m=null!==(n=(0,eF.useUserInfoContext)())&&void 0!==n?n:{},{isSelf:p}=null!==(r=(0,s.useContext)(Z))&&void 0!==r?r:{},{dispatch:g,userInfo:_}=m,[x,w]=(0,s.useState)(),[C,y]=(0,s.useState)(!1),I=(0,s.useRef)(),b=(0,l9.m)(),j=(0,s.useRef)("0"),k=(0,s.useRef)({}),[N,S]=(0,s.useState)(!1),[E,L]=(0,s.useState)(),T=async e=>{var t;let{data:l=[],statusCode:n,whaleInfo:r}=await (0,i_.fetchUserPost)({userId:e,count:10,needTimeList:!1,whaleCutToken:null===(t=k.current)||void 0===t?void 0:t.whaleCutToken});return 0===n&&(k.current={whaleCutToken:null==r?void 0:r.whaleCutToken}),{statusCode:n,data:l}},M=async(e,t)=>{var l;null==e||null===(l=e.preventDefault)||void 0===l||l.call(e);let{isLiving:n,actionSecUid:r,webRid:i,roomId:o}=t||{};if(n){let e=(0,eZ.cc)({web_rid:i,enter_from_merge:"personal_homepage",enter_method:"live_history_enter",enter_method_temai:"live_history_enter",action_type:"click",room_id:o});window.open(e,"_blank","noopener")}else try{if(S(!0),!r){ee.F.info("服务异常，请重试"),S(!1);return}let{statusCode:e,data:t}=await T(r);if(S(!1),0===e){if(t&&(null==t?void 0:t.length)>0){let e=t.sort((e,t)=>t.createTime-e.createTime)[0];w(e),y(!0)}else{let e=(0,eZ.HC)(r,(0,d.stringify)({enter_from:"personal_homepage",is_search:0}));window.open(e,"_blank","noopener")}}else ee.F.info("服务异常，请重试")}catch(e){ee.F.info("服务异常，请重试"),S(!1)}},R=async()=>{let{statusCode:e,userVisitedInfos:t,cursor:l,hasMore:n}=await (0,i_.fetchWebcastFeedList)({cursor:j.current});if(0===e){var r;j.current=l,(null==t?void 0:null===(r=t.filter)||void 0===r?void 0:r.call(t,e=>(null==e?void 0:e.type)===12).length)>0&&i(!0)}return{statusCode:e,hasMore:n,data:t}};return(0,s.useEffect)(()=>{let e=(0,t9.s)(),t=()=>{let t;let l=(0,iV.F)(e).y,n=document.querySelectorAll(".user_record_date");if(l<148)t=n[0];else{var r;let e=[];null==n||null===(r=n.forEach)||void 0===r||r.call(n,t=>{(null==t?void 0:t.offsetTop)<Math.abs(l-148)&&e.push(t)}),(null==e?void 0:e.length)>0&&(t=e[e.length-1])}t&&L(null==t?void 0:t.innerText)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[]),(0,a.jsxs)("div",{className:oY.live,children:[E&&(0,a.jsx)(iH,{headerHeight:44,topNavHeight:c+44,noBgImage:!0,children:(0,a.jsx)("div",{className:oY.date,children:E})}),(0,a.jsx)(lM.Z,{ref:I,scrollContainerEl:b,itemClassName:oY.cardContainer,containerClassName:oY.container,fetchMoreData:R,skeletonNum:0,pause:o!==u,panelNoData:(0,a.jsx)(B.H,{className:oY.empty,icon:(0,a.jsx)(ox.Z,{}),title:"暂无内容",desc:"暂时还没有直播观看记录哦"}),renderList:e=>{var t,l,n;let r=null==e?void 0:null===(t=e.reduce)||void 0===t?void 0:t.call(e,(e,t)=>{if((null==t?void 0:t.type)===11){let l={date:null==t?void 0:t.timeTitle,list:[]};null==e||e.push(l)}else if((null==t?void 0:t.type)===12){var l,n;let r=null==e?void 0:e[(null==e?void 0:e.length)-1];null==r||null===(n=r.list)||void 0===n||null===(l=n.push)||void 0===l||l.call(n,t)}return e},[]);return!E&&L(null==r?void 0:null===(n=r[0])||void 0===n?void 0:n.date),(0,a.jsx)(a.Fragment,{children:null==r?void 0:null===(l=r.map)||void 0===l?void 0:l.call(r,(e,t)=>{var l;let{date:n,list:r}=e;return(0,a.jsxs)("div",{className:oY.listSortByTime,children:[(0,a.jsx)("div",{className:f()(oY.date,"user_record_date",{[oY.hidden]:E&&0===t}),children:n}),(0,a.jsx)("div",{className:oY.cardList,children:null==r?void 0:null===(l=r.map)||void 0===l?void 0:l.call(r,e=>{var t,l;return(0,a.jsx)(oK,{scene:o$.Live,className:oY.cardContainer,userVisitedInfo:e,selfUid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,selfSecUid:null==_?void 0:null===(l=_.info)||void 0===l?void 0:l.secUid,dispatch:g,abtestData:v,isSelf:p,isLogin:null==_?void 0:_.isLogin,onClick:M,logParams:{enter_method:"live_history_enter",enter_method_temai:"live_history_enter"}},e.uid)})})]},n)})})}}),C&&(0,a.jsx)(lI.default,{modalInnerFeedCard:"author_card",defaultForceOpenTab:oV.L.Author,isActive:!0,abtestData:v,isSelf:p,uid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,anyHooks:oH,userContext:m,originAwemeInfo:x,modalEnterFrom:lb.a.UserCard,logParams:{enter_from:"personal_homepage",enter_from_merge:"personal_homepage",enter_method:(0,H.Rs)("enter_method"),tab_name:"record_card",sub_tab_name:"live"},close:()=>{y(!1),w(void 0)}}),N&&(0,a.jsx)(h.gb,{className:oY.loading})]})},oQ={record:"kxfuzurm",header:"foE6ClgC",sticky:"SeeN2aWI",tabs:"ROukn57a",title:"I_8I6bfb",vs:"JnM7F3KW",setting:"GDPU2xUy",clean:"T80Z7uvt",cleanText:"X05PS16s",cleanNew:"FnZ0iKDw",cleanPannel:"O74wJcBs",ohosCleanPannel:"Ohejk0tl",button:"ch7Y1Tv5",tipClassName:"Hgr1ibrN",iconClassName:"iB7I6qI4",desc:"FbeeK5Zk",descText:"KTsnKo_N",fuFang:"HKDUS_rf",close:"Ep_cUtDM",list:"IK9UsXhW",error:"rVml1tkb",divider:"Uh_bw0Tx",comfirmText:"YQ8Pr_IH",openButton:"pjhV4M0l",ohosFuFang:"W8F7OBA1",tipSvg:"MORixu_a",tipSvgNew:"tZkgpgG1",empty:"QFl8riEh",iconSvg:"KY9fk9jw"},oX=l("807038");let oJ=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M12 6l-4 4-4-4",stroke:"#fff",strokeOpacity:".5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})));var o0={videoFilterPannel:"NaxFneA8",optionsContainer:"fO_k1Q7Q",title:"OXQF5AOb",options:"I1dN9a22",option:"IRUv03m0",active:"jtR1Widr",disabled:"i75jkXfG",videoFilter:"eOl8JGMm",btn:"J042l5iD",filterIcon:"Db3RLgc1",arrowIcon:"oo6pfgRQ",pannel:"lsnJZ5t2"};let o1=[{label:"不限",value:Y.VideoStatusFilter.NoLimit},{label:"未看完",value:Y.VideoStatusFilter.Watching},{label:"已看完",value:Y.VideoStatusFilter.Watched}],o2=[{label:"不限",value:Y.DirectoryFilter.NoLimit},{label:"小于1分钟",value:Y.DirectoryFilter.LessThenOne},{label:"1-3分钟",value:Y.DirectoryFilter.OneToThree},{label:"3-10分钟",value:Y.DirectoryFilter.ThreeToTen},{label:"10分钟以上",value:Y.DirectoryFilter.MoreThenTen}],o3=[{label:"不限",value:Y.CategoryFilter.NoLimit},{label:"二次元",value:Y.CategoryFilter.SecondDimension},{label:"音乐",value:Y.CategoryFilter.Music},{label:"体育",value:Y.CategoryFilter.Sports},{label:"电影",value:Y.CategoryFilter.Movie},{label:"游戏",value:Y.CategoryFilter.Game}],o5=e=>{let{label:t,value:l,isActive:n,onClick:r,disabled:i}=e;return(0,a.jsx)("div",{className:f()(o0.option,{[o0.active]:n,[o0.disabled]:i}),onClick:e=>!i&&(null==r?void 0:r(e,{label:t,value:l})),children:t})},o6=e=>{let{value:t,onChange:l,className:n,disabled:r}=e,{status:i=Y.VideoStatusFilter.NoLimit,directory:s=Y.DirectoryFilter.NoLimit,category:d=Y.CategoryFilter.NoLimit}=t||{};return(0,a.jsxs)("div",{className:f()(o0.videoFilterPannel,n),children:[(0,a.jsxs)("div",{className:o0.optionsContainer,children:[(0,a.jsx)("div",{className:o0.title,children:"观看进度"}),(0,a.jsx)("div",{className:o0.options,children:o1.map(e=>(0,a.jsx)(o5,{onClick:(e,n)=>(null==t?void 0:t.status)!==(null==n?void 0:n.value)&&(null==l?void 0:l((0,M._)((0,o._)({},t),{status:n.value}),{click_type:"progress",click_sub_type:n.label})),label:e.label,value:e.value,isActive:e.value===i,disabled:r},e.value))})]}),(0,a.jsxs)("div",{className:o0.optionsContainer,children:[(0,a.jsx)("div",{className:o0.title,children:"视频时长"}),(0,a.jsx)("div",{className:o0.options,children:o2.map(e=>(0,a.jsx)(o5,{onClick:(e,n)=>(null==t?void 0:t.directory)!==(null==n?void 0:n.value)&&(null==l?void 0:l((0,M._)((0,o._)({},t),{directory:n.value}),{click_type:"duration",click_sub_type:n.label})),label:e.label,value:e.value,isActive:e.value===s,disabled:r},e.value))})]}),(0,a.jsxs)("div",{className:o0.optionsContainer,children:[(0,a.jsx)("div",{className:o0.title,children:"视频分类"}),(0,a.jsx)("div",{className:o0.options,children:o3.map(e=>(0,a.jsx)(o5,{onClick:(e,n)=>(null==t?void 0:t.category)!==(null==n?void 0:n.value)&&(null==l?void 0:l((0,M._)((0,o._)({},t),{category:n.value}),{click_type:"classification",click_sub_type:n.label})),label:e.label,value:e.value,isActive:e.value===d,disabled:r},e.value))})]})]})};var o7=e=>{let{className:t,value:l,onChange:n,subTab:r,disabled:i,onRef:o}=e,[d,u]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{d&&tH.sendLog("recordFilterTabClick",{sub_tab_name:r})},[d]),(0,a.jsxs)("div",{className:f()(o0.videoFilter,t),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),ref:e=>null==o?void 0:o(e),children:[(0,a.jsxs)("div",{className:o0.btn,children:[(0,a.jsx)(ep.z,{svg:(0,a.jsx)(oX.Z,{}),className:o0.filterIcon}),(0,a.jsx)("span",{children:"筛选"}),(0,a.jsx)(oJ,{className:o0.arrowIcon})]}),d&&(0,a.jsx)(o6,{disabled:i,className:o0.pannel,value:l,onChange:n})]})},o4={container:"SzcIO5of",arrow:"GNUkt5dA"};let o8=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:4,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M0 0a8 8 0 0 0 2.168 5.476l1.174 1.25a2 2 0 0 1 0 2.738l-1.174 1.25A8 8 0 0 0 0 16.19V0z",fill:"#323442"})}))),o9=e=>{let{popcorn:t,text:l,disable:n=!1}=e,[r,i]=(0,s.useState)(!1),o=(0,s.useRef)();return(0,s.useEffect)(()=>{!(0,ii.$o)(io.LocalStorageKeys.SelfUserRecordFilterTip)&&!n&&((0,ii.qQ)(io.LocalStorageKeys.SelfUserRecordFilterTip,1),i(!0),o.current=setTimeout(()=>i(!1),2e4))},[]),r?(0,lv.createPortal)((0,a.jsxs)("div",{className:o4.container,onClick:()=>{clearTimeout(o.current),i(!1)},children:[(0,a.jsx)(A.Z,{src:o8,viewBox:"0 0 4 17",width:4,height:17,className:o4.arrow}),l]}),t):null},ae={[tT.VIDEO]:"清空观看历史",[tT.VS]:"清空观看历史",[tT.USER]:"清空用户历史",[tT.Live]:"清空直播历史"},at={[tT.VIDEO]:"确认要清空观看历史？",[tT.VS]:"确认要清空观看历史？",[tT.USER]:"确认要清空用户历史？",[tT.Live]:"确认要清空直播历史？"},al={[tT.VIDEO]:"是否要关闭观看历史功能？",[tT.VS]:"是否要关闭观看历史功能？",[tT.USER]:"是否要关闭用户历史功能？",[tT.Live]:"是否要关闭直播历史功能？"},an={[tT.VIDEO]:"暂无观看历史记录",[tT.VS]:"暂无观影历史记录",[tT.USER]:"暂无用户历史记录",[tT.Live]:"暂无直播历史记录"};var ar=e=>{var t;let{currentTab:l,osInfo:n,topNavHeight:r=60,userInfo:i,currentSubTab:d=tT.VIDEO,onSubTabChange:u,abTestData:v,userSettings:m={freqVisitPerm:!0,webcastRecords:!0},showSearchBar:h,searchBarSlot:p}=e,[g,_]=(0,s.useState)(!1),[w,C]=(0,s.useState)(),{dispatch:y}=null!==(t=(0,eF.useUserInfoContext)())&&void 0!==t?t:{},[I,b]=(0,s.useState)(!!(null==i?void 0:i.viewHistoryPermission)),[j,k]=(0,s.useState)(null==m?void 0:m.freqVisitPerm),[N,S]=(0,s.useState)(null==m?void 0:m.webcastRecords),[E,L]=(0,s.useState)(!1),[T,M]=(0,s.useState)(!1),[P,D]=(0,s.useState)({status:Y.VideoStatusFilter.NoLimit,directory:Y.DirectoryFilter.NoLimit,category:Y.CategoryFilter.NoLimit}),[A,F]=(0,s.useState)(!1),V=(0,s.useRef)(!1),U=(0,s.useRef)(null),O=(0,tx.O)();(0,c.C)(x.w3.components.user_record);let W=(0,s.useMemo)(()=>{if(d===tT.VS||d===tT.VIDEO)return I;if(d===tT.USER)return j;if(d===tT.Live)return N;return!0},[I,j,N,d]);(0,s.useEffect)(()=>{tH.sendLog(W?"closeRecordShow":"openRecordShow",{})},[v]),(0,s.useEffect)(()=>{tH.sendLog("recordCardShow",{enter_from:"personal_homepage",record_tab:d===tT.VIDEO?"video":"film"})},[d]);let z=async(e,t)=>{var l;if(null==V?!void 0:!V.current)V.current=!0,F(!0),D(e),await (null==U?void 0:null===(l=U.current)||void 0===l?void 0:l.reloadList(e)),F(!1),V.current=!1,tH.sendLog("recordFilterConfirm",(0,o._)({sub_tab_name:d},t))},Z=async()=>{if(L(!0),M(!1),tH.sendLog("clearAllRecord",{}),d===tT.VIDEO)return await (0,oC.N1)({});if(d===tT.VS)return await (0,oC.tp)();if(d===tT.USER)return await (0,oC.fl)();else if(d===tT.Live)return await (0,oC.tI)()},$=()=>{L(!0),d===tT.VIDEO||d===tT.VS?(b(!1),M(!1),tH.sendLog("closeRecordClick",{}),(0,oC.Yi)({on:!1})):d===tT.USER?(k(!1),(0,oC.a3)({on:!1,field:"freq_visit_perm"})):d===tT.Live&&(S(!1),(0,oC.a3)({on:!1,field:"webcast_records"})),setTimeout(()=>y({type:"updateUserInfo"}),1e3)},K=e=>{if(!!e)tH.sendLog("recordTabClick",{tab_name:e}),null==u||u(e),M(!1),L(!1),D({}),n3()};return(0,s.useMemo)(()=>(0,a.jsxs)("div",{className:f()(oQ.descText,oQ.fuFang,{[oQ.ohosFuFang]:O}),children:[(0,a.jsx)("p",{children:"找不到内容？"}),(0,a.jsx)("p",{children:"1.某些内容格式电脑端暂不支持查看，请在 APP 查看"}),(0,a.jsx)("p",{children:"2.某些内容因作者删除或设置私密，暂时无法查看"})]}),[]),(0,s.useEffect)(()=>{!Object.values(tT).includes(d)&&(null==u||u(tT.VIDEO))},[d]),(0,s.useEffect)(()=>{k(null==m?void 0:m.freqVisitPerm),S(null==m?void 0:m.webcastRecords)},[m]),(0,s.useEffect)(()=>{let e=(0,t9.V)();e&&(0,iB.X)({top:0},e)},[d]),(0,s.useEffect)(()=>{(async()=>{if((0,es.DT)()&&window.TTE_ENV){let e=await ow.invoke("GET_CHANNEL_ID");(null==e?void 0:e.data)==="30033"&&_(!0)}else(0,H.CY)("xigua_webid")&&_(!0)})()},[]),(0,a.jsxs)("div",{className:oQ.record,children:[(0,a.jsx)(iH,{headerHeight:44,topNavHeight:r,children:(0,a.jsxs)("div",{className:oQ.header,children:[(0,a.jsxs)(R.Tabs,{type:"button",className:oQ.tabs,activeKey:d,onChange:e=>K(e),children:[(0,a.jsx)(R.TabPane,{tab:(0,a.jsx)("span",{className:oQ.title,children:"用户"}),itemKey:tT.USER}),(0,a.jsx)(R.TabPane,{tab:(0,a.jsx)("span",{className:oQ.title,children:"视频"}),itemKey:tT.VIDEO}),!((null==n?void 0:n.isMas)||(0,es.xo)())&&(0,a.jsx)(R.TabPane,{itemKey:tT.VS,tab:(0,a.jsx)("span",{className:oQ.title,children:"影视综"})}),(0,a.jsx)(R.TabPane,{tab:(0,a.jsx)("span",{className:oQ.title,children:"直播"}),itemKey:tT.Live})]}),(0,a.jsxs)("div",{className:oQ.setting,children:[d===tT.VIDEO&&h&&(0,a.jsxs)(a.Fragment,{children:[p,(0,a.jsx)(R.Divider,{layout:"vertical",margin:"12px",className:oQ.divider})]}),W&&T&&d===tT.VIDEO&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o9,{popcorn:w,text:"观看历史支持筛选啦"}),(0,a.jsx)(o7,{className:oQ.videoFilterBtn,value:P,onChange:z,subTab:d,onRef:C,disabled:A}),(0,a.jsx)(R.Divider,{layout:"vertical",margin:"12px",className:oQ.divider})]}),(T||W)&&(0,a.jsxs)("div",{className:oQ.cleanNew,children:[(0,a.jsx)(ep.z,{svg:(0,a.jsx)(o_.Z,{}),className:oQ.iconSvg}),(0,a.jsxs)("div",{className:f()(oQ.cleanPannel,{[oQ.ohosCleanPannel]:O}),children:[T&&(0,a.jsx)("div",{className:oQ.button,onClick:()=>{(0,t$.Z)({title:at[d]||"确认要清空观看历史？",cancelBtnText:"取消",confirmBtnText:"清空",onConfirm:async()=>{Z()},otherProps:{renderContent:()=>(0,a.jsx)("div",{className:oQ.comfirmText,children:"清空后不可恢复"})}})},children:ae[d]||"清空观看历史"}),W&&(0,a.jsx)("div",{className:oQ.button,onClick:()=>{(0,t$.Z)({title:al[d]||"是否要关闭观看历史功能？",cancelBtnText:"取消",confirmBtnText:"关闭",onConfirm:async()=>{$()},otherProps:{renderContent:()=>(0,a.jsx)("div",{className:oQ.comfirmText,children:"关闭后将同时清空所有观看历史"})}})},children:"清空并关闭功能"})]})]})]})]})}),(0,a.jsxs)("div",{className:oQ.list,children:[!W&&(0,a.jsxs)("div",{className:oQ.error,children:[(0,a.jsx)(B.H,{className:oQ.empty,icon:(0,a.jsx)(ox.Z,{}),title:"历史记录已关闭",needRenderIconInSSR:!0,desc:"开启后可以查看在电脑端和手机端浏览过的内容"}),(0,a.jsx)(og.zx,{onClick:()=>{d===tT.VIDEO||d===tT.VS?(b(!0),tH.sendLog("openRecordClick",{}),(0,oC.Yi)({on:!0})):d===tT.USER?(k(!0),(0,oC.a3)({on:!0,field:"freq_visit_perm"})):d===tT.Live&&(S(!0),(0,oC.a3)({on:!0,field:"webcast_records"})),setTimeout(()=>y({type:"updateUserInfo"}),1e3)},className:oQ.openButton,children:"开启功能"})]}),W&&E&&(0,a.jsx)("div",{className:oQ.error,children:(0,a.jsx)(B.H,{className:oQ.empty,needRenderIconInSSR:!0,icon:(0,a.jsx)(ox.Z,{}),title:an[d]||"暂无历史记录"})}),W&&!E&&d===tT.USER&&(0,a.jsx)(oG,{setHasClean:M,tab:"record",currentTab:l,topNavHeight:r}),W&&!E&&d===tT.VIDEO&&(0,a.jsx)(ok,{ref:U,tab:"record",currentTab:l,setHasClean:M,userInfo:i,topNavHeight:r}),W&&!E&&d===tT.VS&&(0,a.jsx)(oF,{tab:"record",currentTab:l,setHasClean:M}),W&&!E&&d===tT.Live&&(0,a.jsx)(oq,{tab:"record",currentTab:l,setHasClean:M,topNavHeight:r})]})]})},ai=l("195516"),ao=l("365102");let aa=()=>{var e;return null!==(e=(0,s.useContext)(Z))&&void 0!==e?e:{}};var as={header:"TV0XTM_2",headerRight:"BoNu_AUa",headerBg:"I59bHc1l",container:"m0Gcg68O",errorContent:"ugOEHKEf",removeButton:"cCKUPtbj",empty:"J_STl52M",icon:"T0dcSR_n",iconSvg:"eUdCFAEO"},ad=l("914617"),au=()=>(0,a.jsx)(B.H,{className:as.empty,icon:(0,a.jsx)(l$.Z,{}),title:"暂未添加稍后再看视频",desc:(0,a.jsxs)(a.Fragment,{children:["可在视频底部或预览时点击【",(0,a.jsx)(ad.Z,{className:as.icon}),"】添加"]})}),ac=e=>{let{userInfo:t,currentTab:l,topNavHeight:n=60,abTestData:r,isListSelectable:i,setIsListSelectable:d}=e,u=(0,l8.o)(null==t?void 0:t.secUid),{isSelf:v}=aa(),m=(0,s.useRef)(0),[h,p]=(0,s.useState)([]),g=(0,s.useRef)(!0),_=(0,s.useRef)(0);(0,c.C)(x.w3.components.watch_later);let C=(0,s.useCallback)(async()=>{let e=v&&(null==g?void 0:g.current)&&nY.be.hasCache;iw.z.markStart("watch_later_fetch_data",{once:!0});let{data:t=[],cursor:l=0,hasMore:n,statusCode:r,logPb:i}=await nY.be.request({cached:e,consume:!0,params:{cursor:m.current},fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}});return iw.z.markEnd("watch_later_fetch_data",{once:!0}),!r&&(e?setTimeout(()=>{var e,t;null===(t=j.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(_.current=m.current,m.current=l)),g.current=!1,{data:t,maxCursor:e?0:l,hasMore:e?1:n,statusCode:e?0:r,logPb:i,clearBefore:!e&&0===_.current}},[u,r,v]),y=(0,s.useMemo)(()=>v?(0,a.jsx)(au,{}):void 0,[v]),[I,b]=(0,s.useState)((null==h?void 0:h.length)>0);(0,s.useEffect)(()=>{var e;b((null==h?void 0:h.length)>0);let{store:t={}}=w.Le.getConfig(w.gI.WatchLater)||{},l=(null==h?void 0:null===(e=h.map)||void 0===e?void 0:e.call(h,e=>e.awemeId))||[],n=null==l?void 0:l.join(",");w.Le.setConfig(w.gI.WatchLater,{store:t,list:n})},[h]);let j=(0,s.useRef)(),k=(0,s.useCallback)(()=>{m.current=0},[]),N=(0,s.useCallback)(()=>{var e,t,l,n;null==j||null===(t=j.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),k(),null==j||null===(n=j.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)},[k]),{isPostDelete:S}=(0,s.useContext)(t8);(0,s.useEffect)(()=>{S&&N()},[S,N]);let E=l_({maxSelectedCount:50,operate:(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},l=[];return e.forEach(e=>{l.push(e.awemeId),t[e.awemeId]=(0,iP.I)(e.awemeType)}),(0,ao.iH)({awemeIds:l,remove_type:ao.L7.selectItems})},[]),operateDesc:{operation:"取消",itemName:"稍后再看的作品"},tabName:"watch_later",subTabName:"video",iconName:"取消稍后再看",isListSelectable:i,setIsListSelectable:d}),{changeShowConfirm:L,renderConfirmModal:T,selectedCount:M}=E,R=()=>{tH.sendLog("manageDeleteClick",{tab_name:"watch_later",sub_tab_name:"video",icon_name:"移除已看完视频"}),(0,t$.Z)({title:"是否确认取消已看完的作品，取消后不可恢复",cancelBtnText:"暂不取消",confirmBtnText:"确认取消",onConfirm:async()=>{lp.sendLog("managePopupConfirm",{tab_name:"watch_later",sub_tab_name:"video",icon_name:"移除已看完视频"});let{isSuccess:e,removedNum:t}=await (0,ao.iH)({awemeIds:[],remove_type:ao.L7.viewedItems});if(!e){ee.F.info("服务异常，请稍后再试");return}if(0===t){ee.F.info("无已看完作品");return}ee.F.info("取消成功"),N()}})};return((0,s.useEffect)(()=>{var e;let t=(null===(e=w.Le.getConfig(w.gI.WatchLater))||void 0===e?void 0:e.list)||"";return w.Le.setConfig(w.gI.WatchLater,{store:{},list:t}),()=>{var e;let t=(null===(e=w.Le.getConfig(w.gI.WatchLater))||void 0===e?void 0:e.list)||"";w.Le.setConfig(w.gI.WatchLater,{store:null,list:t})}},[]),v)?(0,a.jsxs)(lw.Provider,{value:(0,o._)({},E),children:[(0,a.jsxs)("div",{className:as.container,"data-e2e":"user-watchlater-tab",children:[v&&(0,a.jsx)(iH,{headerHeight:i?72:44,topNavHeight:n,children:(0,a.jsxs)("div",{className:f()(as.header,{[as.headerBg]:i}),children:[i?(0,a.jsx)(iq,{currentSubTab:"video",currentTab:l,selectedText:"稍后再看的作品",operateBtns:[{key:"watch_later",actionText:"取消稍后再看",onClick:()=>{L(!0),V.logInstance.sendLog("functionIconClick",{tab_name:"watch_later",sub_tab_name:"video",item_cnt:M,function_name:"watch_later_cancel"})}}]}):(0,a.jsx)("div",{}),(0,a.jsx)("div",{className:as.headerRight,children:!i&&I&&(0,a.jsxs)("div",{className:as.removeButton,onClick:e=>{R()},children:[(0,a.jsx)(ep.z,{svg:(0,a.jsx)(ai.Z,{}),className:as.iconSvg}),"移除已看完的视频"]})})]})}),(0,a.jsx)(ig,{ref:j,resetStatusFunc:k,uid:u,tab:"watch_later",currentTab:l,fetchMoreData:C,retryTimes:5,panelNoData:y,updateAwemeList:p,topNavHeight:n})]}),null==T?void 0:T()]}):(0,a.jsx)(B.H,{icon:(0,a.jsx)(U.Z,{}),title:"内容不可见",desc:"内容不可见",className:as.errorContent})};l("110006");var av=l("623527"),am=l("88533");let{COMMON_SEARCH_PARAMS:af}=lK,ah={search_channel:"aweme_video_web",search_source:"normal_search",search_scene:"douyin_search",sort_type:0,publish_time:0,is_filter_search:0,query_correct_type:1};var ap={Home:"aweme_personal_home_video",Favorite:"aweme_favorite_video",Collect:"aweme_collect_video",Viewed:"aweme_viewed_video"};let ag=e=>{let{aweme_list:t,global_doodle_config:l,cursor:n,has_more:r,status_code:i,log_pb:o}=e;return{data:(0,lG.TN)({awemeList:t.map(e=>e.item)||[]}),globalDoodleConfig:{homeText:null==l?void 0:l.home_text,jumpGeneral:null==l?void 0:l.jump_general,keyword:null==l?void 0:l.keyword},cursor:n,hasMore:r,statusCode:i,logId:null==o?void 0:o.impr_id}};async function a_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{keyword:l="",search_id:n="",offset:r=0,count:i=10,enable_history:a,search_channel:s=ah.search_channel,from_user:d}=e,{result:u}=await (0,am.g8)("/aweme/v1/web/home/search/item/",(0,M._)((0,o._)({},af,ah),{keyword:l,enable_history:a,search_id:n,offset:r,count:i,search_channel:s,from_user:d}),t,ag);return u}let ax=e=>{switch(e){case"post":default:return ap.Home;case"like":return ap.Favorite;case"favorite_collection":return ap.Collect;case"record":return ap.Viewed}},aw=e=>{switch(e){case"like":return"like_result";case"post":return"post_result";case"favorite_collection":return"favorite_collection";case"record":return"record_card";default:return"watch_later"}},aC=e=>{let{currentTab:t,uid:l,isSelf:n,showSearchBar:r,abTestData:i,onChangeKeyword:o}=e,a="",{userInfo:{isLogin:d,info:u}}=(0,eF.useUserInfoContext)()||{userInfo:{}},[c,v]=(0,s.useState)(""),[m,f]=(0,s.useState)(""),h=(0,s.useRef)(0),p=(0,s.useRef)(""),g=(0,s.useRef)(10),_=(0,s.useRef)(!1),x=(0,s.useRef)(""),w=(0,s.useRef)(0),C=(0,s.useRef)(0),y=(0,s.useRef)(!1),I=(0,s.useRef)(0),b=(0,s.useRef)(0),j=(0,s.useCallback)(e=>{tH.sendLog("search",{enter_from:(0,e1.yW)(),tab_name:aw(t),search_keyword:p.current,is_success:y.current?1:0,duration:C.current-w.current,impr_id:e})},[t]),k=(0,s.useCallback)(e=>{av.oe.event.error({name:av.Mo.UserSearchReturnCountLess,report:{keyword:p.current,tabName:t,userId:l,logId:e}})},[t,l]),N=(0,s.useCallback)(async()=>{if(!!l&&!_.current){p.current!==x.current&&(x.current=p.current,h.current=0),_.current=!0;try{w.current=performance.now();let e=await a_({search_channel:ax(t),from_user:l,search_id:a,enable_history:Number(null==u?void 0:u.viewHistoryPermission),keyword:p.current,offset:h.current,count:g.current});C.current=performance.now();let{statusCode:n,cursor:r,globalDoodleConfig:i,data:o,hasMore:s,logId:c}=e||{};if(0===n){let e=o.length,t=0===e&&0===s,l=0===h.current;if(a=c,t||(y.current=!0),h.current=r,b.current+=e,v(e=>{if(!l)return e;{let e=(null==i?void 0:i.homeText)||"";return t||(I.current=Number(e.match(/\d+/))),t?"":e}}),!s){let e=b.current===I.current;d&&!e&&k(c)}}return _.current=!1,j(c),e}catch(e){_.current=!1;return}}},[t,l,j,k,d]),S=(0,s.useCallback)(()=>{h.current=0,I.current=0,b.current=0,p.current="",x.current="",f(""),v("")},[]),E=(0,s.useCallback)(e=>{p.current=e,I.current=0,b.current=0,f(e),null==o||o()},[]);return{keyword:m,homeText:c,getSearchRes:N,exitSearch:S,changeKeyword:E,isAllowSearch:(0,s.useMemo)(()=>(n?["like","post","favorite_collection","record"]:["post"]).includes(t)&&r,[n,t,r])}},ay=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm2.776-3.48a.746.746 0 0 0 .527-1.272L9.02 7.965l2.283-2.283a.746.746 0 0 0-1.054-1.054L7.966 6.91 5.682 4.628a.746.746 0 1 0-1.054 1.054l2.283 2.284-2.283 2.283a.747.747 0 0 0 .526 1.278.746.746 0 0 0 .528-.224L7.966 9.02l2.283 2.283c.14.14.33.218.527.218z",fill:"#fff"})}))),aI=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M10.604 11.547a5.333 5.333 0 1 1 .943-.943l2.258 2.258a.667.667 0 1 1-.943.943l-2.258-2.258zm.73-4.214a4 4 0 1 0-8 0 4 4 0 0 0 8 0z",fill:"#fff"})})));var ab={container:"U0DV4Lwl",new:"zqsbV_Ol",blurStyle:"ytwbMTlm",searchIcon:"EG96pDIU",closeIcon:"H36aAsGh",active:"Qf0xcLu1",hasValue:"sI87RVyX",input:"rGGhOoiR",hide:"zo5zFg0W",isListSelectable:"vLHE76bg"};let aj=(e,t)=>{if(!e)return"搜索 Ta 的作品";if("post"===t)return"搜索你发布的作品";if("like"===t)return"搜索你赞过的作品";else if("favorite_collection"===t)return"搜索你收藏的作品";else if("record"===t)return"搜索你观看的作品";else return""},ak=e=>{var t;let{changeKeyword:l,exitSearch:n,keyword:r,currentTab:i,isListSelectable:o=!1}=e,{isSelf:d}=null!==(t=(0,s.useContext)(Z))&&void 0!==t?t:{},[u,c]=(0,s.useState)(!1),[v,m]=(0,s.useState)(r),h=(0,s.useRef)(null),p=(0,s.useCallback)(()=>{let{value:e=""}=h.current||{};e?l(e):n(),(0,iB.X)({top:172,behavior:"smooth"},(0,t9.V)())},[l,n]);(0,s.useEffect)(()=>{let e=h.current,t=t=>{"Enter"===t.key&&(null==e||e.blur(),p())};return null==e||e.addEventListener("keydown",t),()=>{null==e||e.removeEventListener("keydown",t)}},[p]),(0,s.useEffect)(()=>{if(""!==r)return;let e=h.current;e&&(e.value=r,m(r))},[r]);let[g,_]=(0,s.useState)(!1),x=(0,s.useRef)(null),w=e=>{clearTimeout(x.current),x.current=setTimeout(()=>{_(e)},300)},C=u||g;return(0,a.jsx)("div",{className:f()(ab.container,ab.new,{[ab.active]:C,[ab.hasValue]:null==v?void 0:v.length,[ab.isListSelectable]:o}),onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:(0,a.jsxs)(a.Fragment,{children:[!C&&""===v&&(0,a.jsxs)("div",{className:ab.blurStyle,children:[(0,a.jsx)(A.Z,{className:ab.searchIcon,src:aI,viewBox:"0 0 16 16"}),(0,a.jsx)("span",{children:aj(d,i)})]}),(C||""!==v)&&(0,a.jsx)(A.Z,{className:ab.searchIcon,src:aI,viewBox:"0 0 16 16",onClick:p}),(0,a.jsx)(R.Input,{ref:h,value:v,className:f()(ab.input,{[ab.hide]:!C&&""===v}),onFocus:()=>{c(!0),tH.sendLog("enterSearch",{enter_from:(0,e1.yW)(),tab_name:"post"===i?"post_result":"like_result"})},onBlur:()=>c(!1),onChange:e=>m(e),placeholder:aj(d,i)}),""!==v&&(0,a.jsx)(A.Z,{className:ab.closeIcon,src:ay,viewBox:"0 0 16 16",onClick:()=>{l(""),m(""),n();let e=h.current;e&&(e.value=""),null==e||e.focus()}})]})})};var aN=l("565024"),aS="lK47LKct",aE="RuxV3rTb",aL="lkhZnAPr",aT="ev9j6rH_";let aM=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:n,setAwemeInfoList:r,mixInfo:i,close:a,refNextVideoCallBack:d}=e,{watchedEpisode:u,totalEpisode:c}=i||{},v=(0,s.useRef)({cursor:Math.max(Number(u>c?c:null!=u?u:0)-1,0),hasMore:1,statusCode:-1,lastMixVideoIndex:-1}),m=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let e=!1;return(async()=>{var t,n,s,d,u;m.current=!0;let c=await (0,lZ.FF)({mixId:null==i?void 0:i.mixId,cursor:null===(t=v.current)||void 0===t?void 0:t.cursor,count:20});if(m.current=!1,(null!==(s=null==c?void 0:null===(n=c.data)||void 0===n?void 0:n.length)&&void 0!==s?s:0)!==0){v.current={cursor:null==c?void 0:c.cursor,hasMore:null==c?void 0:c.hasMore,statusCode:null==c?void 0:c.statusCode,lastMixVideoIndex:(null==c?void 0:null===(d=c.data)||void 0===d?void 0:d.length)-1};let t=null==c?void 0:null===(u=c.data)||void 0===u?void 0:u.map(e=>{let{cover:t,status:l,playVV:n}=i||{};return e.mixInfo&&(e.mixInfo.cover=t,e.mixInfo.status=l,e.mixInfo.playVV=n),(0,o._)({},e)});if(e)return;r(t||[]),l(0)}else ee.F.info("该合集暂无法查看，请浏览其他内容"),a()})(),d.current=()=>ee.F.infoInModalVideo("暂无更多作品"),()=>{e=!0}},[i]),(0,s.useEffect)(()=>{5>Math.abs(Number(null==n?void 0:n.length)-t)&&-1!==t&&!m.current&&(async()=>{var e,t,l;if((null===(e=v.current)||void 0===e?void 0:e.hasMore)===1){m.current=!0;let e=await (0,lZ.FF)({mixId:null==i?void 0:i.mixId,cursor:null===(t=v.current)||void 0===t?void 0:t.cursor,count:20});m.current=!1,v.current={cursor:null==e?void 0:e.cursor,hasMore:null==e?void 0:e.hasMore,statusCode:null==e?void 0:e.statusCode,lastMixVideoIndex:(null==n?void 0:n.length)+(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.length)-1},r(t=>[...t,...(null==e?void 0:e.data)||[]])}})()},[n,t,i]),null};var aR={item:"pJ9R2EtX",cover:"A7YCpAMW",payTag:"POv73ewj",image:"FxyzuN31",content:"yOvVHVxy",title:"NNCA5wX_",name:"z2cc45P7",singleLine:"iYzh4eLr",updatedTag:"MuhGoZyD",count:"RK1egmCO",episode:"qeefeuND"},aP=e=>{var t,l,n;let{info:r,rank:i,userInfo:o,currentTab:d,abTestData:u}=e,[c,v]=(0,nx.Z)(),[m,h]=(0,s.useState)(!1),[p,g]=(0,s.useState)(!0),_=(0,s.useRef)(null),x="favorite_collection"===d&&!!r.hasUpdatedEpisode&&p,w=x?((null==_?void 0:null===(t=_.current)||void 0===t?void 0:t.offsetWidth)||42)+4:0,C=(0,eZ.$y)(null==r?void 0:r.mixId,1,`previous_page=${(0,e1.yW)()}`);return(0,s.useEffect)(()=>{if(v&&!m){if(h(!0),"favorite_collection"===d){V.logInstance.sendLog("compilationCoverShow",{enter_from:(0,e1.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:r.isSeries2Mix?r.seriesId:r.mixId});return}tH.sendLog("collectionCoverShow",{enter_from:(0,e1.yW)(),compilation_id:r.isSeries2Mix?r.seriesId:r.mixId,compilation_video_cnt:r.totalEpisode,author_id:o.uid,group_id:""})}},[v]),(0,a.jsx)(P.a,{href:C,title:r.mixName,target:"_blank",rel:"noopener noreferrer",onClick:e=>{if("favorite_collection"===d){V.logInstance.sendLog("compilationCoverClick",{enter_from:(0,e1.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:r.isSeries2Mix?r.seriesId:r.mixId}),g(!1);return}tH.sendLog("collectionCoverClick",{enter_from:(0,e1.yW)(),compilation_id:r.isSeries2Mix?r.seriesId:r.mixId,compilation_video_cnt:r.totalEpisode,author_id:o.uid,rank:i}),!r.totalEpisode&&(ee.F.info("创作者还没有为这个合集添加视频"),e.preventDefault())},children:(0,a.jsxs)("div",{className:aR.item,ref:c,children:[(0,a.jsxs)("div",{className:aR.cover,children:[(0,a.jsx)(nw.Q,{src:r.cover,alt:r.mixName,iconWidth:30,iconHeight:88,imgClass:aR.image}),((null==r?void 0:null===(l=r.chargeInfo)||void 0===l?void 0:l.chargeType)===1||(null==r?void 0:null===(n=r.chargeInfo)||void 0===n?void 0:n.chargeType)===3)&&(0,a.jsx)("div",{className:aR.payTag,children:"付费"})]}),(0,a.jsxs)("div",{className:aR.content,children:[(0,a.jsxs)("div",{className:f()(aR.title,aR.singleLine),children:[(0,a.jsx)("div",{className:aR.name,style:{maxWidth:`calc(100% - ${w}px)`},children:r.mixName}),x&&(0,a.jsxs)("span",{ref:_,className:aR.updatedTag,children:["更新",r.hasUpdatedEpisode,"集"]})]}),(0,a.jsxs)("p",{className:aR.count,children:[(0,ed.qe)(r.playVV)," 播放"]}),(0,a.jsxs)("p",{className:aR.episode,children:[(0,a.jsxs)("span",{children:["更新至 ",r.totalEpisode," 集"]}),!!r.watchedEpisode&&(0,a.jsxs)("span",{children:["（上次看到 ",r.watchedEpisode," 集）"]})]})]})]})})};let aD=e=>e.mixId;var aA=e=>{var t,l,n,r;let{userInfo:i,topNavHeight:d=60,setItemCount:u,abTestData:c}=e,v=(0,l8.o)(null==i?void 0:i.secUid),{isSelf:m,updateFollowStatus:f}=(0,s.useContext)(Z)||{},h=(0,eF.useUserInfoContext)()||{},p=(0,z._)()||{},g=(0,s.useRef)(0),_=(0,s.useRef)(1),[x,w]=(0,s.useState)(),[C,y]=(0,s.useState)([]);(0,s.useEffect)(()=>{var e;null==u||u(null!==(e=null==C?void 0:C.length)&&void 0!==e?e:0)},[null==C?void 0:C.length,u]);let I=(0,s.useCallback)(async()=>{let{data:e,cursor:t,hasMore:l,statusCode:n}=await (0,rx.bZ)({cursor:g.current,count:12});return 0===n&&(g.current=t,_.current=l),{data:e,cursor:t,hasMore:l,statusCode:n}},[]),b=(0,s.useCallback)((e,t)=>(0,a.jsx)("div",{onClick:t=>{t.preventDefault();let l=e;(async()=>{var t,n,r,a,s;let d=await ((null==e?void 0:e.isSeries2Mix)?(0,lz.l3)({seriesId:null==e?void 0:e.mixId}):(0,lZ.vf)({mixId:null==e?void 0:e.mixId}));(null==(l=(0,M._)((0,o._)({},((null==e?void 0:e.isSeries2Mix)?null==d?void 0:d.seriesInfo:null==d?void 0:d.mixInfo)||{}),{watchedEpisode:null==l?void 0:l.watchedEpisode,watchedItem:null==l?void 0:l.watchedItem}))?void 0:l.totalEpisode)===0||(null==l?void 0:null===(t=l.author)||void 0===t?void 0:t.isBlockedV2)||(null==l?void 0:null===(n=l.author)||void 0===n?void 0:n.userNotSee)||(null==l?void 0:null===(r=l.author)||void 0===r?void 0:r.secret)&&((null==l?!void 0:null===(a=l.author)||void 0===a?!void 0:!a.secret)||(null==l?void 0:null===(s=l.author)||void 0===s?void 0:s.uid)!==i.uid)?ee.F.info("该合集为空，请浏览其他内容"):w(l)})()},children:(0,a.jsx)(aP,{info:e,rank:t,userInfo:i,currentTab:"favorite_collection",abTestData:c})}),[i]),j=(0,s.useRef)(),k=np(),N=null===(l=j.current)||void 0===l?void 0:null===(t=l.getDataList)||void 0===t?void 0:t.call(l),S=(0,s.useRef)({borderRadius:"6px"}),{withMask:E}=ng((0,M._)((0,o._)({maskShadowStyle:S.current,getItemId:aD,dataList:N,isSupportMulti:!0},k),{firstItem:null===(r=j.current)||void 0===r?void 0:null===(n=r.getTargetNode)||void 0===n?void 0:n.call(r,0),getColumnCount:()=>3,stickyArea:{top:d+58+72,bottom:0,left:0,right:0},itemMargin:{top:0,bottom:16,left:0,right:16}})),L=(0,s.useCallback)(()=>{g.current=0},[]);r4({resetStatusFunc:L,scrollListRef:j,scrollElementRef:k.scrollEleRef});let{reloadForPostDelete:T,isPostDelete:R}=(0,s.useContext)(t8),P=(0,s.useCallback)(()=>{var e,t,l,n,r;null==j||null===(t=j.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),null==L||L(),null===(l=k.scrollEleRef.current)||void 0===l||l.scrollTo({top:0}),null==j||null===(r=j.current)||void 0===r||null===(n=r.reload)||void 0===n||n.call(r)},[L]);(0,s.useEffect)(()=>{R&&(null==P||P())},[R,P]);let D=(0,l9.m)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:aS,children:(0,a.jsx)(lM.Z,{ref:j,scrollContainerEl:D,skeletonNum:0,defaultDataList:[],defaultHasMoreFlag:_.current,renderItem:b,fetchMoreData:I,containerClassName:aE,itemClassName:aL,panelNoData:(0,a.jsx)(B.H,{className:aT,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"暂时还没有收藏过合集内容哦"}),withMask:E,setDataList:y})}),x&&(0,a.jsx)(lI.default,(0,o._)({modalEnterFrom:lb.a.UserCollectionMix,isActive:!0,userContext:h,abtestData:p,close:()=>{w(void 0),f(),null==T||T(),null==P||P()},uid:v,notCanMixListen:!0,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:m},logParams:{enter_from_merge:m?"personal_homepage":"others_homepage",tab_name:"favorite_collection",enter_method:(0,H.Rs)("enter_method"),sub_tab_name:"compilation"},shortCutFilteredList:[],isDefaultShowRelatedCard:!1},x.isSeries2Mix?{modalInnerFeedCard:"series",seriesInfo:x,awemeSeriesInfo:x,anyHooks:rK,defaultForceOpenTab:oV.L.Series}:{modalInnerFeedCard:"mix",mixInfo:x,awemeMixInfo:x,anyHooks:aM,defaultForceOpenTab:oV.L.Mix}))]})},aF="JrXXtMR8",aV="XWn0aRJM",aB="_VTc7qe_",aU="gojzMS9d",aO={item:"oCrk_zjx",cover:"hlKEX58C",payTag:"ZTFyUghK",image:"uWmd7804",content:"iI3rIJmF",name:"bjCOIBj0",count:"_tyCQMDH",episode:"zc5UhWc4",unreadMixCount:"_06a64Hc"},aH=e=>{var t,l;let{info:n,rank:r,userInfo:i,currentTab:o}=e,[d,u]=(0,nx.Z)(),[c,v]=(0,s.useState)(!1),[m,f]=(0,s.useState)(!0),h=(0,eZ.$y)(null==n?void 0:n.seriesId,1,`previous_page=${(0,e1.yW)()}`);return(0,s.useEffect)(()=>{if(u&&!c){if(v(!0),"favorite_collection"===o){V.logInstance.sendLog("compilationCoverShow",{enter_from:(0,e1.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:n.seriesId});return}tH.sendLog("collectionCoverShow",{enter_from:(0,e1.yW)(),compilation_id:n.seriesId,compilation_video_cnt:n.totalEpisode,author_id:i.uid,group_id:""})}},[u]),(0,a.jsx)(P.a,{href:h,title:n.seriesName,target:"_blank",rel:"noopener noreferrer",onClick:e=>{if("favorite_collection"===o){V.logInstance.sendLog("compilationCoverClick",{enter_from:(0,e1.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:n.seriesId}),f(!1);return}tH.sendLog("collectionCoverClick",{enter_from:(0,e1.yW)(),compilation_id:n.seriesId,compilation_video_cnt:n.totalEpisode,author_id:i.uid,rank:r}),!n.totalEpisode&&(ee.F.info("创作者还没有为这个短剧添加视频"),e.preventDefault())},children:(0,a.jsxs)("div",{className:aO.item,ref:d,children:[(0,a.jsxs)("div",{className:aO.cover,children:[(0,a.jsx)(nw.Q,{src:n.cover,alt:n.seriesName,iconWidth:30,iconHeight:88,imgClass:aO.image}),((null==n?void 0:null===(t=n.chargeInfo)||void 0===t?void 0:t.chargeType)===1||(null==n?void 0:null===(l=n.chargeInfo)||void 0===l?void 0:l.chargeType)===3)&&(0,a.jsx)("div",{className:aO.payTag,children:"付费"})]}),(0,a.jsxs)("div",{className:aO.content,children:[(0,a.jsx)("div",{className:aO.name,children:n.seriesName}),(0,a.jsxs)("p",{className:aO.count,children:[(0,ed.qe)(n.playVV)," 播放"]}),(0,a.jsxs)("p",{className:aO.episode,children:[(0,a.jsxs)("span",{children:["更新至 ",n.totalEpisode," 集"]}),"favorite_collection"===o&&!!n.hasUpdatedEpisode&&m&&(0,a.jsxs)("span",{className:aO.unreadMixCount,children:["更新",n.hasUpdatedEpisode,"集"]})]})]})]})})};let aW=e=>e.seriesId;var az=e=>{var t,l,n,r;let{userInfo:i,topNavHeight:d=60,setItemCount:u}=e,c=(0,l8.o)(null==i?void 0:i.secUid),{isSelf:v,updateFollowStatus:m}=(0,s.useContext)(Z)||{},f=(0,eF.useUserInfoContext)()||{},h=(0,z._)()||{},p=(0,s.useRef)(0),g=(0,s.useRef)(1),[_,x]=(0,s.useState)(),[w,C]=(0,s.useState)([]);(0,s.useEffect)(()=>{var e;null==u||u(null!==(e=null==w?void 0:w.length)&&void 0!==e?e:0)},[null==w?void 0:w.length,u]);let y=(0,s.useCallback)(async()=>{let{data:e,cursor:t,hasMore:l,statusCode:n}=await (0,rx.DD)({cursor:p.current,count:12});return 0===n&&(p.current=t,g.current=l),{data:e,cursor:t,hasMore:l,statusCode:n}},[]),I=(0,s.useCallback)((e,t)=>(0,a.jsx)("div",{onClick:t=>{t.preventDefault();let l=e;(async()=>{var t,n,r,a,s;let d=await (0,lz.l3)({seriesId:null==e?void 0:e.seriesId});(null==(l=(0,M._)((0,o._)({},(null==d?void 0:d.seriesInfo)||{}),{watchedEpisode:null==l?void 0:l.watchedEpisode,watchedItem:null==l?void 0:l.watchedItem}))?void 0:l.totalEpisode)===0||(null==l?void 0:null===(t=l.author)||void 0===t?void 0:t.isBlockedV2)||(null==l?void 0:null===(n=l.author)||void 0===n?void 0:n.userNotSee)||(null==l?void 0:null===(r=l.author)||void 0===r?void 0:r.secret)&&((null==l?!void 0:null===(a=l.author)||void 0===a?!void 0:!a.secret)||(null==l?void 0:null===(s=l.author)||void 0===s?void 0:s.uid)!==i.uid)?ee.F.info("该短剧为空，请浏览其他内容"):x(l)})()},children:(0,a.jsx)(aH,{info:e,rank:t,userInfo:i,currentTab:"favorite_collection"})}),[i]),b=(0,s.useRef)(),j=np(),k=null===(l=b.current)||void 0===l?void 0:null===(t=l.getDataList)||void 0===t?void 0:t.call(l),N=(0,s.useCallback)(()=>{p.current=0},[]);r4({resetStatusFunc:N,scrollListRef:b,scrollElementRef:j.scrollEleRef});let{reloadForPostDelete:S,isPostDelete:E}=(0,s.useContext)(t8),L=(0,s.useCallback)(()=>{var e,t,l,n,r;null==b||null===(t=b.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),null==N||N(),null===(l=j.scrollEleRef.current)||void 0===l||l.scrollTo({top:0}),null==b||null===(r=b.current)||void 0===r||null===(n=r.reload)||void 0===n||n.call(r)},[N]);(0,s.useEffect)(()=>{E&&(null==L||L())},[E,L]);let T=(0,s.useRef)({borderRadius:"6px"}),{withMask:R}=ng((0,M._)((0,o._)({maskShadowStyle:T.current,getItemId:aW,dataList:k,isSupportMulti:!0},j),{firstItem:null===(r=b.current)||void 0===r?void 0:null===(n=r.getTargetNode)||void 0===n?void 0:n.call(r,0),getColumnCount:()=>3,stickyArea:{top:d+58+72,bottom:0,left:0,right:0},itemMargin:{top:0,bottom:16,left:0,right:16}})),P=(0,l9.m)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:aF,children:(0,a.jsx)(lM.Z,{scrollContainerEl:P,ref:b,skeletonNum:0,defaultDataList:[],defaultHasMoreFlag:g.current,renderItem:I,fetchMoreData:y,containerClassName:aV,itemClassName:aB,panelNoData:(0,a.jsx)(B.H,{className:aU,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"暂时还没有收藏过短剧内容哦"}),withMask:R,setDataList:C})}),_&&(0,a.jsx)(lI.default,{modalEnterFrom:lb.a.UserCollectionSeries,seriesInfo:_,userContext:f,abtestData:h,close:()=>{x(void 0),m(),null==S||S()},uid:c,awemeSeriesInfo:_,anyHooks:rK,modalInnerFeedCard:"series",notCanMixListen:!0,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:v},logParams:{enter_from_merge:v?"personal_homepage":"others_homepage",enter_method:(0,H.Rs)("enter_method"),tab_name:"favorite_collection",sub_tab_name:"playlet"},shortCutFilteredList:[],isDefaultShowRelatedCard:!1,defaultForceOpenTab:oV.L.Series})]})},aZ=l("823327");let a$=(0,s.createContext)({});var aK={Loop:"loop",Order:"order",Random:"random"},aG="AsRrGviC",aY="yjiILJVQ",aq="bJgnsUt6",aQ="s8FPwj1n",aX=l("243150"),aJ=l("182424");let a0=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 10.282C11 9.574 11.514 9 12.149 9h1.596c.634 0 1.149.574 1.149 1.282v15.436c0 .708-.515 1.282-1.15 1.282H12.15C11.514 27 11 26.426 11 25.718V10.282zm11 0C22 9.574 22.514 9 23.149 9h1.596c.634 0 1.149.574 1.149 1.282v15.436c0 .708-.515 1.282-1.15 1.282H23.15C22.514 27 22 26.426 22 25.718V10.282z",fill:"#0A0C20"})})));var a1=l("540075"),a2=l("303876"),a3="yFQLmx_V",a5="sHCCp7my",a6="_0y01ARd",a7="syFdakw8",a4="QNreBB5u",a8="eARycTWF",a9=new eP.h({musicCoverShow:{eventName:"music_cover_show",params:{music_id:""}},musicCoverClick:{eventName:"music_cover_click",params:{music_id:""}},musicMoreClick:{eventName:"music_more_click",params:{music_id:"",action:"cancel_favorite"}},clickAudioPlayMode:{eventName:"click_audio_play_mode",params:{auto_play_mode:""}},audioPlay:{eventName:"audio_play",params:{enter_from:"personal_homepage",music_id:"",is_visible:0,auto_play_mode:""}},audioOver:{eventName:"audio_over",params:{music_id:"",is_visible:0,duration:0,auto_play_mode:""}},audioError:{eventName:"audio_error",params:{music_id:"",error_msg:"",error_code:0,error_type:"",player_version:""}}});let se=()=>nl.F.info("取消成功"),st=()=>nl.F.info("操作失败，请稍后重试");var sl=e=>{let{musicId:t,removeCurrentMusic:l,pause:n}=e,{type:r,changeType:i}=(0,ts.P)({delayDisappear:100}),o=(0,s.useCallback)(()=>{se(),null==l||l(t)},[l,t]),{unCollect:d}=(0,a2.S)({musicId:t,disableSuccessToast:!0,isLogin:!0,success:o,fail:st,clickMethod:"music_collection"});return(0,a.jsxs)("div",{className:a3,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{onMouseEnter:()=>{i("active")},onMouseLeave:()=>{i()},children:(0,a.jsx)(aX.Z,{height:24,width:24,viewBox:"2 2 32 32",src:a1.Z,className:f()(a5,{[a6]:!!r})})}),(0,a.jsxs)("ul",{className:f()(a7,{[a4]:!!r}),onMouseEnter:e=>{e.stopPropagation(),i("active")},onMouseLeave:e=>{e.stopPropagation(),i()},onClick:e=>i(),children:[(0,a.jsx)("li",{className:a8,onClick:e=>{var l;null==n||n(),a9.sendLog("musicMoreClick",{action:"use",music_id:t}),null===(l=window)||void 0===l||l.open(`https://creator.douyin.com/creator-micro/content/cloud-edit?music_id=${t}`,"_blank")},children:"去使用"}),(0,a.jsx)("li",{className:a8,onClick:()=>{a9.sendLog("musicMoreClick",{action:"cancel_favorite",music_id:t}),(0,t$.Z)({title:"是否取消收藏该音乐？",cancelBtnText:"暂不取消",confirmBtnText:"确认",onConfirm:()=>new Promise(async e=>{null==n||n(),await d(),i(),e()}),onCancel(){i()}})},children:"取消收藏"})]})]})},sn={container:"hcMxOfiS",cover:"HpSbHXVZ",img:"AZccDIK4",defaultCover:"YhxydMxb",playStatusIcon:"yoIqclR8",loading:"iBXzpDzb",detail:"iJrpTMj2",infoContainer:"syOrwyNO",title:"s9rc6gQB",author:"ame5iIzq",player:"Oq2z1sCD",mode:"iJ34WbnF",modeTip:"qO7f3NPH",time:"nESah_Y6",playTime:"wrcOCU4b",playedTime:"bAlEJzjL",more:"Hzh9CSFJ",playing:"huc4FSXb"},sr=l("734123"),si=l("510063"),so=l("452695"),sa=l("134761");l("897860");var ss=l("489478");class sd extends sr.Plugin{static get pluginName(){return"customVolume"}static get defaultConfig(){return{position:ss.POSITIONS.CONTROLS_RIGHT,index:5,className:"xgplayer-row-volume",disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}afterCreate(){if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},this.config.disable)return;let{commonStyle:e,volume:t}=this.playerConfig;(null==e?void 0:e.volumeColor)&&(this.find(".xgplayer-drag").style.backgroundColor=e.volumeColor),this.changeMutedHandler=this.hook("mutedChange",e=>{this.changeMuted(e)},{pre:e=>{e.preventDefault(),e.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==sr.Sniffer.device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["click","touchend"],this.changeMutedHandler),this.on(sr.Events.VOLUME_CHANGE,this.onVolumeChange),this.once(sr.Events.LOADED_DATA,this.onVolumeChange),"Number"!==ss.Util.typeOf(t)&&(this.player.volume=this.config.default),this.onVolumeChange()}updateVolumePos(e,t){let{player:l}=this,n=this.find(".xgplayer-drag"),r=this.find(".xgplayer-bar");if(!r||!n)return;let i=parseInt(e/r.getBoundingClientRect().width*1e3,10);n.style.width=`${e}px`;let o=Math.max(Math.min(i/1e3,1),0),a={volume:{from:l.volume,to:o}};l.muted&&(a.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:l.muted,volume:l.volume,props:a}),l.volume=Math.max(Math.min(i/1e3,1),0),l.muted&&(l.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}updateVolumeValue(){let{volume:e,muted:t}=this.player,l=this.find(".xgplayer-value-label"),n=Math.max(Math.min(e,1),0);l.innerText=t?0:Math.ceil(100*n)}focus(){let{player:e}=this;e.focus({autoHide:!1}),this._timerId&&(ss.Util.clearTimeout(this,this._timerId),this._timerId=null),ss.Util.addClass(this.root,"slide-show")}unFocus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],l=arguments.length>2?arguments[2]:void 0,{_d:n,player:r}=this;if(!n.isActive)this._timerId&&(ss.Util.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=ss.Util.setTimeout(this,()=>{!n.isActive&&(t?r.blur():r.focus(),ss.Util.removeClass(this.root,"slide-show"),n.isStart&&this.onBarMouseUp(l)),this._timerId=null},e)}changeMuted(e){e&&e.stopPropagation();let{player:t,_d:l}=this;l.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}animate(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}destroy(){this._timerId&&(ss.Util.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",["click","touchend"],this.changeMutedHandler)}render(){if(this.config.disable)return;let e=this.config.default||this.player.volume,t=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-row-volume" data-state="normal">
      <div class="xgplayer-icon">
        <svg class="xg-volume" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5.25 10.4002C5.25 9.57173 5.92157 8.90015 6.75 8.90015H7.5L10.7699 6.17527C11.2584 5.76819 12 6.11556 12 6.75143V17.0489C12 17.6847 11.2584 18.0321 10.7699 17.625L7.5 14.9002H6.75C5.92157 14.9002 5.25 14.2286 5.25 13.4002V10.4002Z" fill="white"/>
          <path d="M13.5 14.1502L13.5 9.65015C14.7426 9.65015 15.75 10.6575 15.75 11.9002C15.75 13.1428 14.7426 14.1502 13.5 14.1502Z" fill="white"/>
          <path d="M18.9375 11.9001C18.9375 14.9843 16.5354 17.5074 13.5 17.7007L13.5 15.82C15.4987 15.6312 17.0625 13.9483 17.0625 11.9001C17.0625 9.85198 15.4987 8.16908 13.5 7.98024V6.09952C16.5354 6.2928 18.9375 8.81594 18.9375 11.9001Z" fill="white"/>
        </svg>
        <svg class="xg-volume-small" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.75 9.00001C5.92157 9.00001 5.25 9.67158 5.25 10.5V13.5C5.25 14.3284 5.92157 15 6.75 15H7.5L10.7699 17.7249C11.2584 18.132 12 17.7846 12 17.1487V6.85129C12 6.21541 11.2584 5.86804 10.7699 6.27512L7.5 9.00001H6.75Z" fill="white"/>
          <path d="M13.5 9.75001L13.5 14.25C14.7426 14.25 15.75 13.2426 15.75 12C15.75 10.7574 14.7426 9.75001 13.5 9.75001Z" fill="white"/>
         <path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M13.5 6.19934C16.5355 6.39255 18.9376 8.91572 18.9376 11.9999C18.9376 15.0842 16.5355 17.6073 13.5 17.8006V15.9198C15.4988 15.7311 17.0626 14.0481 17.0626 11.9999C17.0626 9.95176 15.4988 8.26882 13.5 8.08006V6.19934Z" fill="white" fill-opacity="0.9"/>
        </svg>
        <svg class="xg-volume-mute" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
         <path d="M6.75 9.00001C5.92157 9.00001 5.25 9.67158 5.25 10.5V13.5C5.25 14.3284 5.92157 15 6.75 15H7.5L10.7699 17.7249C11.2584 18.132 12 17.7846 12 17.1487V6.85129C12 6.21541 11.2584 5.86804 10.7699 6.27512L7.5 9.00001H6.75Z" fill="white" fill-opacity="0.9"/>
          <path d="M17.6255 15.3778L15.7515 13.1622L13.8775 15.3778L12.7504 14.391L14.7706 12.0024L12.75 9.61332L13.8771 8.62647L15.7515 10.8427L17.6259 8.62647L18.753 9.61332L16.7324 12.0024L18.7526 14.391L17.6255 15.3778Z" fill="white" fill-opacity="0.9"/>
        </svg>
      </div>
      <xg-slider class="xgplayer-slider">
        ${t?`<div class="xgplayer-value-label">${100*e}</div>`:""}
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="width: ${100*e}%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`}constructor(...e){super(...e),(0,sa._)(this,"_timerId",void 0),(0,sa._)(this,"_d",void 0),(0,sa._)(this,"onBarMousedown",e=>{let{player:t}=this,l=this.find(".xgplayer-bar");ss.Util.event(e);let n=l.getBoundingClientRect(),r=ss.Util.getEventPos(e,t.zoom),i=n.right-r.clientX;if(r.w=i,r.barW=n.width,this.pos=r,!(i<-2))return this.updateVolumePos(i,e),document.addEventListener("mouseup",this.onBarMouseUp),this._d.isStart=!0,!1}),(0,sa._)(this,"onBarMouseMove",e=>{let{_d:t}=this;if(!t.isStart)return;let{pos:l,player:n}=this;e.preventDefault(),e.stopPropagation(),ss.Util.event(e);let r=ss.Util.getEventPos(e,n.zoom);t.isMoving=!0;let i=l.clientX-r.clientX+l.w;if(!(i>l.barW))this.updateVolumePos(i,e)}),(0,sa._)(this,"onBarMouseUp",e=>{ss.Util.event(e),document.removeEventListener("mouseup",this.onBarMouseUp);let{_d:t}=this;t.isStart=!1,t.isMoving=!1}),(0,sa._)(this,"onMouseenter",e=>{this._d.isActive=!0,this.focus(),this.emit("icon_mouseenter",{pluginName:this.pluginName})}),(0,sa._)(this,"onMouseleave",e=>{this._d.isActive=!1,this.unFocus(100,!1,e),this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,sa._)(this,"onVolumeChange",e=>{if(!this.player)return;let{muted:t,volume:l}=this.player;!this._d.isMoving&&(this.find(".xgplayer-drag").style.width=t||0===l?"4px":`${100*l}%`,this.config.showValueLabel&&this.updateVolumeValue()),this.animate(t,l)})}}let su=e=>K().duration(e,"seconds").format("mm:ss");var sc=e=>{let{rank:t,musicInfo:l,onClickToPlay:n,onClickToPause:r,abTestData:i}=e,[a,d]=(0,s.useState)(!1),[u,c]=(0,s.useState)(!1),[v,m]=(0,s.useState)(!1),[f,h]=(0,s.useState)("00:00"),p=(0,s.useRef)(),g=(0,s.useRef)(null),_=(0,s.useRef)(!1),x=(0,s.useRef)(0),w=(0,s.useRef)(0),C=(0,s.useMemo)(()=>su(l.duration),[l]),{updateActive:y,resetActive:I,mode:b,cleanHasListen:j}=(0,s.useContext)(a$),k=(0,s.useRef)(b);(0,s.useEffect)(()=>{k.current=b},[b]);let N=(0,s.useCallback)(()=>{a9.sendLog("audioPlay",{enter_from:"personal_homepage",music_id:null==l?void 0:l.mid,is_visible:"visible"===document.visibilityState?1:0,auto_play_mode:k.current})},[null==l?void 0:l.mid]),S=(0,s.useCallback)(()=>{a9.sendLog("audioOver",{music_id:null==l?void 0:l.mid,is_visible:"visible"===document.visibilityState?1:0,duration:Date.now()-w.current,auto_play_mode:k.current}),w.current=Date.now()},[null==l?void 0:l.mid]),E=(0,s.useCallback)(()=>{if(p.current){let{volume:e,autoplayMuted:t}=(0,so.J)(i);p.current.muted=t,p.current.volume=e}},[]),L=(0,s.useCallback)(()=>{w.current=Date.now(),E(),c(!0)},[E]),T=(0,s.useCallback)(()=>{var e,t;c(!1),(null===(e=p.current)||void 0===e?void 0:e.duration)!==(null===(t=p.current)||void 0===t?void 0:t.currentTime)&&S()},[S]),M=(0,s.useCallback)(e=>{let{currentTime:t}=e;h(su(t))},[]),R=(0,s.useCallback)(e=>{if(!!p.current&&(null==e?void 0:e.isInternalOp)!==!0)setTimeout(()=>{if(!!p.current)0===(0,ii.$o)(io.LocalStorageKeys.PLAYER_IS_MUTE)&&p.current.muted&&(0,ii.qQ)(io.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,ii.qQ)(io.LocalStorageKeys.PLAYER_VOLUME,p.current.volume),(0,ii.qQ)(io.LocalStorageKeys.PLAYER_IS_MUTE,p.current.muted?1:0),(0,so.c)({isMute:p.current.muted,volume:p.current.volume})})},[]),P=(0,s.useCallback)(e=>{var t,l,n,r,i;(null===(t=p.current)||void 0===t?void 0:t.isPlaying)&&S(),null===(n=p.current)||void 0===n||null===(l=n.offAll)||void 0===l||l.call(n),null===(i=p.current)||void 0===i||null===(r=i.destroy)||void 0===r||r.call(i),e&&m(!1),e&&d(!1),e&&c(!1)},[S]),D=(0,s.useCallback)(()=>{var e;if(!g.current)return;let{volume:t,autoplayMuted:n}=(0,so.J)(i),r={vtype:"MP3",url:null==l?void 0:null===(e=l.playUrl)||void 0===e?void 0:e.urlList.map(e=>({src:e})),autoplay:!0,loop:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,closePlayVideoFocus:!0,closeVideoPreventDefault:!0,closeVideoStopPropagation:!1,closeVideoDblclick:!0,controls:{mode:"flex",autoHide:!1,initShow:!0},plugins:[si.Z,sd],autoplayMuted:n,volume:t},a=new sr.SimplePlayer((0,o._)({el:g.current,width:"100%",height:"100%"},r));m(!0),null==a||a.once(sr.Events.PLAY,N),a.on(sr.Events.PLAY,L),a.on(sr.Events.PAUSE,T),a.on(sr.Events.TIME_UPDATE,M),a.on(sr.Events.USER_ACTION,R),a.on(sr.Events.LOADED_DATA,()=>{d(!0),m(!1)}),a.on(sr.Events.WAITING,()=>m(!0)),a.on(sr.Events.CANPLAY,e=>{m(!1),_.current&&(_.current=!1,setTimeout(()=>{a.pause()},0))});a.on(sr.Events.ERROR,e=>{var t;if(null===(t=p.current)||void 0===t||t.pause(),a9.sendLog("audioError",{music_id:null==l?void 0:l.mid,error_msg:null==e?void 0:e.message,error_code:null==e?void 0:e.errorCode,error_type:null==e?void 0:e.errorType,player_version:null==e?void 0:e.playerVersion}),!(Date.now()-x.current<3e3))x.current=Date.now(),ee.F.info("歌曲播放失败，请点击重试")}),p.current=a},[l,L,T,M,R,N]);(0,s.useEffect)(()=>{if(p.current){let e=()=>{if(b===aK.Loop){var e;null===(e=p.current)||void 0===e||e.play();return}null==y||y(t,null==l?void 0:l.mid)};return p.current.on(sr.Events.ENDED,e),()=>{var t;return null===(t=p.current)||void 0===t?void 0:t.off(sr.Events.ENDED,e)}}},[b,p.current,i]),(0,s.useEffect)(()=>{let e=!1;return u&&(e=!0,window.addEventListener("beforeunload",S)),()=>{e&&window.removeEventListener("beforeunload",S)}},[u]);let A=(0,s.useCallback)(function(){var e,t,l;let i=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(v){null===(e=p.current)||void 0===e||e.pause(),m(!1),null==r||r(),_.current=!0;return}if(u){null===(t=p.current)||void 0===t||t.pause(),m(!1),null==r||r();return}a?(E(),null===(l=p.current)||void 0===l||l.play()):(D(),!i&&(null==I||I(),null==j||j())),null==n||n()},[a,u,D,E,n,r,v]),F=(0,s.useCallback)(()=>{u&&a&&(null==A||A())},[A,u,a]),V=(0,s.useCallback)(()=>{a&&p.current&&(p.current.currentTime=0,null==F||F())},[F,a]);return(0,s.useEffect)(()=>P,[P]),(0,s.useEffect)(()=>{let e=()=>{F()},t=W.listen(W.EVENT.openImAwemeModal,e),l=W.listen(W.EVENT.openNoticeAwemeModal,e),n=W.listen(W.EVENT.liveModalShow,e),r=W.listen(W.EVENT.videoPause,e);return()=>{null==t||t(),null==l||l(),null==n||n(),null==r||r()}},[F]),{playedTime:f,duration:C,clickMusicCard:A,containerRef:g,isPlaying:u,isActive:a,destroyPlayer:P,pause:F,resetPlayer:V,isBuffering:v}};let sv=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:36,height:42,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{opacity:".3",d:"M30.621 8.779c-2.223-1.433-3.829-3.726-4.33-6.398A9.642 9.642 0 0 1 26.124.6h-7.097l-.012 28.11c-.119 3.147-2.74 5.674-5.954 5.674a5.985 5.985 0 0 1-2.767-.678c-1.898-.988-3.199-2.955-3.199-5.219 0-3.25 2.678-5.896 5.966-5.896.614 0 1.203.1 1.761.273v-7.16a13.286 13.286 0 0 0-1.761-.125C5.86 15.579 0 21.369 0 28.489c0 4.369 2.209 8.234 5.577 10.57a13.092 13.092 0 0 0 7.486 2.341c7.203 0 13.063-5.791 13.063-12.91V14.233A17.01 17.01 0 0 0 36 17.372v-7.015a9.908 9.908 0 0 1-5.379-1.578z",fill:"#fff",fillOpacity:".34"})}))),sm=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.803 5.161a.6.6 0 0 1 .848 0l1.273 1.273a.8.8 0 0 1 0 1.131l-1.272 1.273a.6.6 0 0 1-.85-.849l.237-.236H8.75a3.25 3.25 0 0 0-3.25 3.25v2a3.25 3.25 0 0 0 3.25 3.25h1a.75.75 0 0 1 0 1.5h-1A4.75 4.75 0 0 1 4 13.003v-2a4.75 4.75 0 0 1 4.75-4.75h1.298l-.244-.243a.6.6 0 0 1 0-.849zm4.304 13.678a.6.6 0 0 1-.848 0l-1.273-1.273a.8.8 0 0 1 0-1.131l1.273-1.273a.6.6 0 0 1 .848.848l-.243.243h1.386a3.25 3.25 0 0 0 3.25-3.25v-2a3.25 3.25 0 0 0-3.25-3.25h-1a.75.75 0 0 1 0-1.5h1a4.75 4.75 0 0 1 4.75 4.75v2a4.75 4.75 0 0 1-4.75 4.75h-1.38l.237.237a.6.6 0 0 1 0 .849z",fill:"#fff",fillOpacity:".5"})}))),sf=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.803 5.176a.6.6 0 0 1 .849 0l1.272 1.273a.8.8 0 0 1 0 1.13l-1.272 1.274a.6.6 0 1 1-.849-.849l.236-.236H8.75a3.25 3.25 0 0 0-3.25 3.25v2a3.25 3.25 0 0 0 3.25 3.25h6.5a3.25 3.25 0 0 0 3.25-3.25v-2a3.25 3.25 0 0 0-3.25-3.25h-1a.75.75 0 0 1 0-1.5h1a4.75 4.75 0 0 1 4.75 4.75v2a4.75 4.75 0 0 1-4.75 4.75H8.745A4.75 4.75 0 0 1 4 13.018v-2a4.75 4.75 0 0 1 4.75-4.75h1.297l-.244-.244a.6.6 0 0 1 0-.848zm3.147 4.842h-.958a3.124 3.124 0 0 1-.63.49c-.252.14-.384.205-.608.261l-.004.9a2.367 2.367 0 0 0 1.035-.576l.004 3.473h1.16l.001-4.548z",fill:"#fff",fillOpacity:".5"})}))),sh=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.551 8.573a.5.5 0 0 0 .01-.845l-2.043-1.324a.5.5 0 0 0-.772.42v.522h-.272c-.69 0-1.355.304-1.8.848-.206.251-.379.467-.544.672-.25.312-.483.602-.786.961a.75.75 0 0 0 1.148.966c.31-.367.564-.684.825-1.01.165-.204.332-.412.518-.639a.825.825 0 0 1 .64-.298h.27v.562a.5.5 0 0 0 .763.425l2.043-1.26zM5.18 15.696c0 .414.336.75.75.75H7.484c.791 0 1.48-.402 1.93-.964.211-.263.365-.421.57-.632.136-.14.295-.302.506-.533a.75.75 0 0 0-1.105-1.014c-.144.157-.28.297-.412.434-.247.255-.481.498-.73.807-.21.264-.492.402-.76.402H5.93a.75.75 0 0 0-.75.75zm0-7.258a.75.75 0 0 1 .75-.75h1.656a2.35 2.35 0 0 1 1.797.837l5.441 6.46a.85.85 0 0 0 .65.303h.303v-.696a.5.5 0 0 1 .763-.426l2.043 1.26a.5.5 0 0 1 .009.846l-2.043 1.324a.5.5 0 0 1-.772-.42v-.388h-.303a2.35 2.35 0 0 1-1.797-.836L8.236 9.491a.85.85 0 0 0-.65-.303H5.93a.75.75 0 0 1-.75-.75z",fill:"#fff",fillOpacity:".5"})})));K().extend(oS());let sp=e=>{var t,l,n,r,i,o,a,s;return(null==e?void 0:null===(l=e.avatarThumb)||void 0===l?void 0:null===(t=l.urlList)||void 0===t?void 0:t[0])?null==e?void 0:null===(o=e.avatarThumb)||void 0===o?void 0:null===(i=o.urlList)||void 0===i?void 0:i[0]:"string"==typeof(null==e?void 0:e.avatarThumb)?null==e?void 0:e.avatarThumb:(null==e?void 0:null===(r=e.coverMedium)||void 0===r?void 0:null===(n=r.urlList)||void 0===n?void 0:n[0])?null==e?void 0:null===(s=e.coverMedium)||void 0===s?void 0:null===(a=s.urlList)||void 0===a?void 0:a[0]:"string"==typeof(null==e?void 0:e.coverMedium)?null==e?void 0:e.coverMedium:""};var sg=e=>{let{rank:t,musicInfo:l,currentMusicId:n="",removeCurrentMusic:r,onClickCard:i,abTestData:o}=e,[d,u]=(0,s.useState)(!1),[c,v]=(0,s.useState)(!1),{active:m,mode:p,updateActive:g,updateMode:_,cleanHasListen:x,updatePosition:w}=(0,s.useContext)(a$),[C,y]=(0,nx.Z)(void 0,{threshold:1}),{playedTime:I,containerRef:b,clickMusicCard:j,duration:k,isPlaying:N,isActive:S,destroyPlayer:E,pause:L,isBuffering:T}=sc({musicInfo:l,abTestData:o,rank:t}),M=sp(l),R=n===(null==l?void 0:l.mid);(0,s.useEffect)(()=>{t===m&&(j(),null==i||i(l),!y&&(null==w||w(t)))},[t,m]),(0,s.useEffect)(()=>{!R&&S&&(null==E||E(!0))},[R,S,E]);let P=(0,tp.x)(()=>{a9.sendLog("musicCoverShow",{music_id:null==l?void 0:l.mid})});return(0,a.jsxs)("div",{className:f()({[sn.container]:!0,"use-music-mode":!0,"collect-music-player":!0,[sn.playing]:N,"is-music-focus":R}),ref:P,children:[(0,a.jsxs)("div",{ref:C,className:sn.cover,onClick:e=>{a9.sendLog("musicCoverClick",{music_id:null==l?void 0:l.mid}),j(!1),null==i||i(l)},children:[M&&(0,a.jsx)("img",{className:sn.img,src:M,onLoad:e=>u(!0),onError:e=>u(!1)}),!d&&(0,a.jsx)("div",{className:sn.defaultCover,children:(0,a.jsx)(aX.Z,{height:36,width:42,viewBox:"0 0 36 42",src:sv})}),T&&R?(0,a.jsx)(h.gb,{className:sn.loading}):(0,a.jsx)(aX.Z,{height:32,width:32,viewBox:"2 2 34 34",className:sn.playStatusIcon,src:N?a0:aJ.Z})]}),(0,a.jsxs)("div",{className:sn.detail,children:[(0,a.jsxs)("div",{className:sn.infoContainer,children:[(0,a.jsx)(q.Z,{text:l.title,className:sn.title}),(0,a.jsx)(q.Z,{text:l.author,className:sn.author})]}),(0,a.jsxs)("div",{className:sn.player,children:[(0,a.jsx)("div",{ref:b,onClick:e=>e.stopPropagation()}),R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:sn.playTime,children:[(0,a.jsxs)("span",{className:f()(sn.time,sn.playedTime),children:[I,"\xa0/\xa0"]}),(0,a.jsx)("span",{className:sn.time,children:k})]}),(0,a.jsxs)("div",{className:sn.mode,onClick:()=>{if(p===aK.Order){null==_||_(aK.Loop),a9.sendLog("clickAudioPlayMode",{auto_play_mode:aK.Loop});return}if(p===aK.Loop){null==_||_(aK.Random),a9.sendLog("clickAudioPlayMode",{auto_play_mode:aK.Random});return}if(p===aK.Random){null==_||_(aK.Order),null==x||x(),a9.sendLog("clickAudioPlayMode",{auto_play_mode:aK.Order});return}},onMouseOver:()=>v(!0),onMouseOut:()=>v(!1),children:[c&&(0,a.jsx)("div",{className:sn.modeTip,children:p===aK.Order?"顺序播放":p===aK.Random?"随机播放":"单曲循环"}),p===aK.Order&&(0,a.jsx)(aX.Z,{height:24,width:24,viewBox:"0 0 24 24",src:sm}),p===aK.Random&&(0,a.jsx)(aX.Z,{height:24,width:24,viewBox:"0 0 24 24",src:sh}),p===aK.Loop&&(0,a.jsx)(aX.Z,{height:24,width:24,viewBox:"0 0 24 24",src:sf})]})]}):(0,a.jsx)("span",{className:sn.time,children:k})]})]}),(0,a.jsx)("div",{className:sn.more,children:(0,a.jsx)(sl,{musicId:null==l?void 0:l.mid,pause:L,removeCurrentMusic:r})})]})},s_=e=>{let{userInfo:t,abTestData:l}=e;(0,l8.o)(null==t?void 0:t.secUid);let n=(0,s.useRef)(0),r=(0,s.useRef)(1),[i,o]=(0,s.useState)([]),d=(0,s.useRef)(),u=(0,s.useCallback)(async()=>{let{data:e,cursor:t,hasMore:l,statusCode:i}=await (0,aZ.u)({cursor:n.current,count:20});return 0===i&&(n.current=t,r.current=l),{data:e,cursor:t,hasMore:l,statusCode:i}},[]),[c,v]=(0,s.useState)(-1),[m,f]=(0,s.useState)(aK.Order),[h,p]=(0,s.useState)([]),g=(0,s.useCallback)(e=>{p(t=>t.concat(e))},[]),_=(0,s.useCallback)(()=>{p([])},[]),x=(0,s.useCallback)((e,t)=>{if(m===aK.Order&&v(e===i.length-1?0:e+1),m===aK.Random){var l;let n=Math.floor(Math.random()*i.length);if(h.length===i.length-1){v(n),_();return}for(;n===e||h.includes(null===(l=i[n])||void 0===l?void 0:l.mid);)(n+=1)===i.length&&(n=0);v(n),g(t)}},[i,h,m]),w=(0,s.useCallback)(()=>{v(-1)},[]),C=(0,s.useCallback)(e=>{f(e)},[m]),y=(0,s.useCallback)(e=>{d.current&&d.current.locateSelectVideo(e,-200)},[]),I=(0,s.useCallback)(function(){var e,t,l,n;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!r||!(null==d?void 0:null===(e=d.current)||void 0===e?void 0:e.setScrollData))return;let i=null!==(n=null===(t=(l=d.current).getDataList)||void 0===t?void 0:t.call(l))&&void 0!==n?n:[];d.current.setScrollData({dataList:i.filter(e=>(null==e?void 0:e.mid)!==r)}),p(e=>e.filter(e=>e!==r))},[]),[b,j]=(0,s.useState)(""),k=(0,s.useCallback)((e,n)=>(0,a.jsx)(sg,{musicInfo:e,rank:n,userInfo:t,currentTab:"music",currentMusicId:b,removeCurrentMusic:I,onClickCard:e=>{var t;j(null!==(t=null==e?void 0:e.mid)&&void 0!==t?t:"")},abTestData:l}),[l,t,b]),N=(0,l9.m)();return(0,a.jsx)(a$.Provider,{value:{active:c,updateActive:x,resetActive:w,mode:m,hasListen:h,updateMode:C,updateHasListen:g,cleanHasListen:_,updatePosition:y},children:(0,a.jsx)("div",{className:aG,children:(0,a.jsx)(lM.Z,{scrollContainerEl:N,ref:d,skeletonNum:0,defaultHasMoreFlag:r.current,renderItem:k,fetchMoreData:u,containerClassName:aY,itemClassName:aq,panelNoData:(0,a.jsx)(B.H,{className:aQ,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"暂时还没有收藏过音乐哦"}),setDataList:o})})})},sx={container:"cNEv6qj2",header:"WXVFahjs",headerBg:"kqOzBJYg",tabs:"DwzViuV_",right:"Fed2tqFL",default:"XVZoufXL",fuFang:"X1thkWvw",descText:"kdO12eO5"};l("950331");let sw=new eP.h({pc_favourite_batch_manage_show:{eventName:"pc_favourite_batch_manage_show",params:{tab_name:""}},pc_favourite_batch_manage_click:{eventName:"pc_favourite_batch_manage_click",params:{tab_name:""}},favorite_folder_show:{eventName:"favorite_folder_show",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},favorite_folder_click:{eventName:"favorite_folder_click",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},favorite_folder_more_action_show:{eventName:"favorite_folder_more_action_show",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},edit_favorite_folder_click:{eventName:"edit_favorite_folder_click",params:{folder_name:"",folder_id:"",status:0,enter_from_merge:"",enter_from:""}},edit_favorite_folder_confirm:{eventName:"edit_favorite_folder_confirm",params:{folder_name:"",folder_id:"",status:0,item_cnt:0,enter_from_merge:"",enter_from:""}},delete_favorite_folder_click:{eventName:"delete_favorite_folder_click",params:{folder_name:"",folder_id:"",status:0,item_cnt:0,enter_from_merge:"",enter_from:""}},delete_favorite_folder_confirm:{eventName:"delete_favorite_folder_confirm",params:{folder_name:"",folder_id:"",status:0,item_cnt:0,enter_from_merge:"",enter_from:""}},create_favorite_folder_click:{eventName:"create_favorite_folder_click",params:{click_position:"",enter_from_merge:"",enter_from:""}},create_favorite_folder_confirm:{eventName:"create_favorite_folder_confirm",params:{folder_name:"",folder_id:"",status:0,click_position:"",enter_from_merge:"",enter_from:""}},remove_favorite_video_click:{eventName:"remove_favorite_video_click",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},remove_favorite_video_confrm:{eventName:"remove_favorite_video_confrm",params:{folder_name:"",folder_id:"",item_cnt:0,enter_from_merge:"",enter_from:""}},move_favorite_video_click:{eventName:"move_favorite_video_click",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},move_favorite_video_confirm:{eventName:"move_favorite_video_confirm",params:{folder_name:"",folder_id:"",item_cnt:0,enter_from_merge:"",enter_from:""}},add_favorite_video_click:{eventName:"add_favorite_video_click",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:"",enter_method:""}},add_favorite_video_confirm:{eventName:"add_favorite_video_confirm",params:{folder_name:"",folder_id:"",item_cnt:0,enter_from_merge:"",enter_from:""}}}),sC=(e,t)=>sw.sendLog(e,(0,o._)({enter_from_merge:(0,e1.yW)(),enter_from:(0,tn.vM)()},t));var sy=l("749475");let sI=(e,t)=>{let l=function(e){let{selectItems:t=[],isListSelectable:l=!1,changeListSelectable:n,updateIsSelectDisabled:r}=e;return{state:{selectItems:t,selectable:l},action:{changeListSelectable:n,updateIsSelectDisabled:r}}}(e),[n,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)(),[d,u]=(0,s.useState)(),[c,v]=(0,s.useState)([]),[m,f]=(0,s.useState)({}),h=(0,s.useRef)({});h.current=m;let p=(0,s.useRef)({cursor:0,hasMore:!0,statusCode:0}),g=(0,s.useMemo)(()=>c.reduce((e,t)=>{var l;return e[t.collectionFolderId]={info:t,videoList:(null===(l=m[t.collectionFolderId])||void 0===l?void 0:l.data)||[]},e},{}),[c,m]),_=(0,s.useMemo)(()=>{let e=d||i;return e?g[e]:void 0},[i,d,g]),x=(0,s.useCallback)(e=>{a(e),(0,iB.X)({top:0},(0,t9.V)())},[]),w=(0,s.useCallback)(async e=>{var t;if(!e)return{data:[],cursor:0,hasMore:!1,statusCode:0};let l=h.current[e]||{cursor:0,hasMore:!0,data:[]};if(!l.hasMore)return{data:[],cursor:l.cursor,hasMore:l.hasMore,statusCode:0};let{data:n,cursor:r,hasMore:i,statusCode:a}=await (0,rx.d6)({collectsId:e,cursor:l.cursor,offset:10}),s=!!i;return h.current=(0,M._)((0,o._)({},h.current),{[e]:{cursor:r,hasMore:s,data:[...(null===(t=h.current[e])||void 0===t?void 0:t.data)||[],...n]}}),f(h.current),{data:n,cursor:r,hasMore:s,statusCode:a}},[]),C=(0,s.useCallback)(async()=>{if(!p.current.hasMore&&!p.current.statusCode)return await (0,sy.K)(500),{data:[],cursor:p.current.cursor,hasMore:p.current.hasMore,statusCode:p.current.statusCode};let{data:e,cursor:t,hasMore:l,statusCode:n}=await (0,rx.So)({cursor:p.current.cursor,offset:10});return 0===n&&(p.current.cursor=t,p.current.hasMore=l,p.current.statusCode=n),v(t=>[...t,...e]),Promise.all(e.map(e=>w(e.collectionFolderId))),{data:e,cursor:t,hasMore:l,statusCode:n}},[w]),y=(0,s.useCallback)(e=>{v(t=>{let l=t.map(e=>e.collectionFolderId);return[...e.filter(e=>!l.includes(e.collectionFolderId)),...t]})},[]),I=(0,s.useCallback)(e=>v(t=>{let l=t.findIndex(t=>t.collectionFolderId===e.collectionFolderId);if(-1===l)return t;let n=[...t];return n[l]=e,n}),[]),b=(0,s.useCallback)((e,t)=>{l.action.updateIsSelectDisabled(!0);let n={folder_name:e.map(e=>e.collectionFolderName).join(","),folder_id:e.map(e=>e.collectionFolderId).join(","),folder_cnt:e.length};sC("delete_favorite_folder_click",n),(0,t$.Z)({title:"确认删除该收藏夹吗，删除后视频依旧可在收藏视频中查看～",cancelBtnText:"暂不删除",confirmBtnText:"确认删除",otherProps:{maskClosable:!1},async onConfirm(){null==t||t();try{await Promise.all(e.map(e=>(0,rx.yN)(e.collectionFolderId))),sC("delete_favorite_folder_confirm",n);let t=c.filter(t=>{let l=e.findIndex(e=>e.collectionFolderId===t.collectionFolderId);return -1===l});if(-1!==e.findIndex(e=>e.collectionFolderId===i)){if(t.length){let e=c.findIndex(e=>e.collectionFolderId===i),t=c[e+1],l=t?t.collectionFolderId:c[0].collectionFolderId;x(l)}else x("")}v(t),f(t=>{let l=(0,o._)({},t);for(let t of e)delete l[t.collectionFolderId];return l}),nl.F.info("删除收藏夹成功")}catch(e){nl.F.info("删除收藏夹失败")}finally{l.action.updateIsSelectDisabled(!1),l.action.changeListSelectable(!1)}},onCancel(){l.action.updateIsSelectDisabled(!1)}})},[c,i,l.action.updateIsSelectDisabled,l.action.changeListSelectable,x]),j=(0,s.useCallback)(e=>{var t,n;x(e),null===(t=(n=l.action).changeListSelectable)||void 0===t||t.call(n,!1)},[l.action.changeListSelectable,x]),k=(0,s.useCallback)((e,t,l)=>{let n=h.current[t],r=[...(null==n?void 0:n.data)||[]],i=l.map(e=>e.awemeId),a=[],s=0;if("remove"===e)a=r.filter(e=>!i.includes(e.awemeId)),s=-(r.length-a.length);else if("add"===e){a=r;let e=r.map(e=>e.awemeId);for(let t of l){if(!e.includes(t.awemeId))a.unshift(t),s+=1}}h.current=(0,M._)((0,o._)({},h.current),{[t]:(0,M._)((0,o._)({},n),{data:a})}),f(h.current),v(e=>{var l;let n=e.findIndex(e=>e.collectionFolderId===t);if(-1===n)return e;let r=(0,M._)((0,o._)({},e[n]),{videoTotal:(null===(l=e[n])||void 0===l?void 0:l.videoTotal)+s}),i=[...e];return i.splice(n,1,r),i})},[]),N=(0,s.useCallback)(async(e,t)=>{let l=c.find(t=>t.collectionFolderId===e),{status_code:n}=await (0,rx.RX)({item_ids:t.map(e=>e.awemeId),item_type:2,from_collects_id:e,collects_name:(null==l?void 0:l.collectionFolderName)||""});if(n){nl.F.info("操作失败");return}nl.F.info("操作成功");k("remove",e,t)},[l.action.changeListSelectable,c]),S=(0,s.useCallback)(async(e,t)=>{k("remove",e,t)},[k]),E=(0,s.useCallback)(async function(e,t){let l=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=e.map(e=>{var t,l;return null===(l=g[e])||void 0===l?void 0:null===(t=l.info)||void 0===t?void 0:t.collectionFolderId});if(await Promise.all(e.map(async e=>{var l,r;let{status_code:i}=await (0,rx.RX)({item_ids:t.map(e=>e.awemeId),item_type:2,to_collects_id:e,collects_name:(null===(r=g[e])||void 0===r?void 0:null===(l=r.info)||void 0===l?void 0:l.collectionFolderName)||"",move_collects_list:n,update_collects_sort:!0});if(i)throw Error()})),l)for(let l of e)k("add",l,t)},[g,k]),L=(0,s.useCallback)(()=>{x(""),u(""),v([]),f({}),h.current={},p.current={cursor:0,hasMore:!0}},[x]),T=(0,s.useCallback)(()=>{var e;null==r||r(!0),null===(e=t.changeListSelectable)||void 0===e||e.call(t,!0)},[t.changeListSelectable]),R=(0,s.useCallback)(()=>{var e;null==r||r(!1),null===(e=t.changeListSelectable)||void 0===e||e.call(t,!1)},[t.changeListSelectable]);return{multi:l,addVideo:t,state:{currentCollectsId:i,tempCurrentCollectsId:d,collects:c,collectMap:g,currentCollectsInfo:_,videoResRef:h,collectResRef:p,isAddVideoModalShow:n},action:{setTempCurrentCollectsId:u,getCollects:C,createCollection:y,editCollection:I,removeCollections:b,selectCollection:j,getVideoList:w,reset:L,removeVideosFromCollection:N,moveVideosToCollections:E,removeVideoForDeleted:S,openAddVideoModal:T,cancelAddVideoModal:R}}},sb=(0,s.createContext)(null),sj=()=>(0,s.useContext)(sb);var sk=l("190463"),sN={manage:"UBDOyNnd",myReturn:"Rlssc6Eb",divider:"wDN1CHSl"},sS="aLAvg8f1",sE="dn01tRPY",sL="WIoFoaYy";let sT=e=>{let{icon:t,text:l,textClass:n,onClick:r,disabled:i=!1,className:o,disabledToast:d}=e,{run:u}=(0,iW.Z)(e=>ee.F.info(e),500),c=(0,s.useCallback)(()=>{if(i){d&&u(d);return}null==r||r()},[i,r,d,u]);return(0,a.jsxs)("div",{className:f()(sS,o,{[sL]:i}),onClick:c,children:[t,(0,a.jsx)("span",{className:f()(sE,n),children:l})]})};var sM={btn:"jwWTtk5M",iconAdd:"LIQidIDn",textBtn:"oxejnAfO",myAddSvg:"ah3atkxw",modal:"R9nzpHxS",header:"_5uTWDbEO",title:"ESni4CwE",btnGroup:"IExrcnti",wrapper:"_AyyJd7G",content:"zXZBZWHd",item:"v4xEIR9x"},sR=l("873034"),sP="C2kwYwuw",sD="F1pO32yH";let sA={top:0,bottom:0,left:0,right:0};var sF=e=>{let{currentTab:t,userInfo:l,topNavHeight:n=60,itemClassName:r,listSelectContext:i,columnCount:o,isInModal:d=!1,setItemCount:u,abTestData:c,scrollContainerEl:v}=e,m=sj(),f=(0,l8.o)(null==l?void 0:l.secUid),h=(0,s.useRef)(0),p=(0,s.useRef)(0),g=(0,s.useRef)([]),[_,x]=(0,s.useState)([]),w=(0,s.useRef)(!d);(0,s.useEffect)(()=>{var e;null==u||u(null!==(e=null==_?void 0:_.length)&&void 0!==e?e:0)},[null==_?void 0:_.length,u]);let C=(0,s.useCallback)(()=>{p.current=0},[]),y=async()=>{var e;let t=(null==w?void 0:w.current)&&nY.UG.hasCache;iw.z.markStart("user_collect_fetch_data",{once:!0});let{data:l=[],maxCursor:n=0,hasMore:r,statusCode:i}=await oh(e=>nY.UG.request({cached:t,consume:!0,params:{maxCursor:e},fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}}),p.current);iw.z.markEnd("user_collect_fetch_data",{once:!0});let o=l.length<6?h.current:p.current;l.map(e=>(e.cursor=o,e)),!i&&(t?setTimeout(()=>{var e,t;null===(t=b.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(h.current=p.current,p.current=n)),w.current=!1;let a=tk(l,g.current);return{data:nO()(a,(null===(e=m.state.currentCollectsInfo)||void 0===e?void 0:e.videoList)||[],"awemeId"),maxCursor:t?0:n,hasMore:t?1:r,statusCode:t?0:i,clearBefore:!d&&!t&&0===h.current}},{isPostDelete:I}=(0,s.useContext)(t8),b=(0,s.useRef)();(0,s.useEffect)(()=>{if(I){var e,t,l,n;null==b||null===(t=b.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),C(),null==b||null===(n=b.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)}},[I,C]);let j=(0,s.useRef)(null),k=(0,sR.d)(v);return(0,a.jsx)("div",{className:sP,"data-e2e":"user-favorite-list",ref:j,children:(0,a.jsx)("div",{className:sD,"data-e2e":"user-post-list",children:(0,a.jsx)(ig,{ref:b,resetStatusFunc:C,uid:f,tab:"favorite_collection",currentTab:t,defaultRes:{statusCode:0,data:[],hasMore:1,cursor:0,maxCursor:0},fetchMoreData:y,retryTimes:5,panelNoData:(0,a.jsx)(om,{title:"暂无收藏的视频",type:"collect"}),topNavHeight:n,itemClassName:r,listSelectContext:i,columnCount:o,containerRef:d?j:void 0,scrollRef:d?k:void 0,customStickyArea:d?sA:void 0,updateAwemeList:x})})})};let sV=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({xmlns:"http://www.w3.org/2000/svg",width:17,height:16,fill:"none",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.75 13.333a.75.75 0 0 0 1.5 0V8.75h4.583a.75.75 0 0 0 0-1.5H9.249V2.667a.75.75 0 1 0-1.5 0V7.25H3.166a.75.75 0 1 0 0 1.5h4.583v4.583z",fill:"#fff"})}))),sB=lx();var sU=e=>{var t,l,n,r,i;let{btnType:o="button"}=e,d=sj(),u=d.state.isAddVideoModalShow,{userInfo:c}=(0,eF.useUserInfoContext)()||{},v=(0,s.useRef)(void 0),m=(0,s.useCallback)(async()=>{try{var e,t,l;if(!d.state.currentCollectsId&&!d.state.tempCurrentCollectsId)return;let n=null===(e=d.addVideo)||void 0===e?void 0:e.selectItems;sC("add_favorite_video_confirm",{folder_name:(null===(t=d.state.currentCollectsInfo)||void 0===t?void 0:t.info.collectionFolderName)||"",folder_id:(null===(l=d.state.currentCollectsInfo)||void 0===l?void 0:l.info.collectionFolderId)||"",item_cnt:(null==n?void 0:n.length)||0});let r=d.state.tempCurrentCollectsId||d.state.currentCollectsId;await d.action.moveVideosToCollections([r],n||[]),d.action.cancelAddVideoModal(),d.action.selectCollection(r),d.action.setTempCurrentCollectsId(""),nl.F.info("添加视频成功")}catch(e){d.action.cancelAddVideoModal(),d.action.setTempCurrentCollectsId(""),nl.F.info("添加视频失败",null==v?void 0:v.current)}},[d.action.cancelAddVideoModal,d.action.moveVideosToCollections,d.state.currentCollectsId,null===(t=d.addVideo)||void 0===t?void 0:t.selectItems]),f=(0,s.useCallback)(()=>{var e,t;sC("add_favorite_video_click",{folder_name:(null===(e=d.state.currentCollectsInfo)||void 0===e?void 0:e.info.collectionFolderName)||"",folder_id:(null===(t=d.state.currentCollectsInfo)||void 0===t?void 0:t.info.collectionFolderId)||""}),d.action.openAddVideoModal()},[d.action.openAddVideoModal,d.state.currentCollectsInfo]),h=(0,s.useCallback)(()=>{d.action.setTempCurrentCollectsId(""),d.action.cancelAddVideoModal()},[d.action.cancelAddVideoModal]);return(0,s.useEffect)(()=>(u?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[u]),(0,a.jsxs)(sB.Provider,{value:d.addVideo,children:["button"===o?(0,a.jsxs)(R.Button,{newStyle:!0,className:sM.btn,onClick:f,theme:"solid",children:[(0,a.jsx)(A.Z,{src:sV,className:sM.iconAdd,viewBox:"0 0 17 16"}),"添加视频"]}):(0,a.jsx)(sT,{className:sM.textBtn,icon:(0,a.jsx)(ep.z,{svg:(0,a.jsx)(lc.Z,{}),className:sM.myAddSvg}),text:"添加视频",disabledToast:"需退出「批量管理」才可以添加视频哦～",disabled:d.multi.state.selectable,onClick:f}),(0,a.jsxs)(tt.u,{className:sM.modal,isHide:!u,maskClosable:!1,type:"custom",onCancel:h,children:[(0,a.jsxs)("div",{className:sM.header,children:[(0,a.jsxs)("p",{className:sM.title,children:["添加视频（",(null===(n=d.addVideo)||void 0===n?void 0:null===(l=n.selectItems)||void 0===l?void 0:l.length)||0,"）"]}),(0,a.jsxs)("div",{className:sM.btnGroup,children:[(0,a.jsx)(R.Button,{newStyle:!0,className:sM.btn,size:"small",type:"secondary",onClick:h,theme:"solid",children:"取消"}),(0,a.jsx)(R.Button,{newStyle:!0,disabled:!(null===(i=d.addVideo)||void 0===i?void 0:null===(r=i.selectItems)||void 0===r?void 0:r.length),className:sM.btn,size:"small",onClick:m,theme:"solid",children:"确定"})]})]}),(0,a.jsx)("div",{className:sM.wrapper,children:(0,a.jsx)("div",{ref:v,className:sM.content,children:u&&(0,a.jsx)(sF,{currentTab:"favorite_collection",userInfo:c,itemClassName:sM.item,listSelectContext:sB,columnCount:5,isInModal:!0,scrollContainerEl:v.current})})})]})]})},sO=l("757739"),sH={btn:"GYZMXM69",iconAdd:"FUaDeASQ",textBtn:"Ywzyy_yg",myAddSvg:"mY0Bxzl3"},sW=e=>{let{btnType:t="button"}=e,l=sj(),n=(0,s.useCallback)(e=>{l.action.createCollection([e]),sC("favorite_folder_show",{folder_name:e.collectionFolderName,folder_id:e.collectionFolderId})},[l.action.createCollection]),{open:r,modal:i,show:o}=(0,sO.Z)({toastInGlobal:!0,logParams:{click_position:"favorite_folder_tab"},onDone:n});return(0,s.useEffect)(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[o]),(0,a.jsxs)(a.Fragment,{children:["button"===t?(0,a.jsxs)(R.Button,{newStyle:!0,className:sH.btn,onClick:r,theme:"solid",children:[(0,a.jsx)(A.Z,{src:sV,className:sH.iconAdd,viewBox:"0 0 17 16"}),"新建收藏夹"]}):(0,a.jsx)(sT,{className:sH.textBtn,icon:(0,a.jsx)(ep.z,{svg:(0,a.jsx)(lc.Z,{}),className:sH.myAddSvg}),text:"新建收藏夹",disabledToast:"需退出「批量管理」才可以新建收藏夹哦～",disabled:l.multi.state.selectable,onClick:r}),i]})},sz=()=>{let e=sj(),t=(0,s.useMemo)(()=>e.state.currentCollectsId||!e.state.collects.length?null:(0,a.jsx)(sW,{btnType:"text"}),[e.state.currentCollectsId,e.action.selectCollection,e.state.collects]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:sN.manage,children:[t,(e.state.currentCollectsId||e.state.tempCurrentCollectsId)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sU,{btnType:"text"}),(0,a.jsx)(R.Divider,{layout:"vertical",margin:"12px",className:sN.divider}),(0,a.jsx)(sT,{text:"返回",icon:(0,a.jsx)(ep.z,{svg:(0,a.jsx)(sk.Z,{}),className:sN.myReturn}),onClick:()=>e.action.selectCollection("")})]})]})})},sZ=l("664969"),s$={card:"SUIZUriI",cover:"ZSFAMOIZ",header:"Fh3JhjEN",left:"omOKqZc9",title:"SSLSXRbq",secret:"s0P43e0_",count:"UsNfIcTk",digit:"f1NJZlHL",coverList:"ORStjD0p",tip:"s2fdkdrR"},sK=l("304036"),sG={cover:"GTSbAKwG",wrapper:"cBzps39_",icon:"oanM2wnN",large:"C76AiCbq"},sY=e=>{let{src:t,className:l,alt:n,size:r="default"}=e,[i,o]=(0,s.useState)("");return(0,s.useEffect)(()=>{if(!t)return;let e=new Image;e.onload=()=>{o(t)},e.src=t},[t]),(0,a.jsx)("div",{className:f()([sG.cover,l,"large"===r&&sG.large]),children:(0,a.jsx)("div",{className:sG.wrapper,children:i?(0,a.jsx)("img",{src:i,alt:n}):(0,a.jsx)(A.Z,{src:sK.Z,className:sG.icon,viewBox:"0 0 105 120"})})})},sq=l("902239"),sQ={more:"oMZEM3s5",popover:"vzacxngO",item:"QhV0CVtL"};let sX=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M16.5 12a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zM10.5 12a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zM5 12a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0z",fill:"#fff",fillOpacity:".5"})})));var sJ=e=>{let{className:t,data:l}=e,n=sj(),r=(0,z._)()||{},{open:i,modal:d}=(0,sO.Z)({collectsInfo:l,toastInGlobal:!0,onDone:n.action.editCollection}),[u,c]=(0,s.useState)(),[v,m]=(0,s.useState)(),{styles:h,attributes:p,update:g}=(0,sq.D)(u,v,{placement:"bottom"}),_=(0,s.useRef)(),x=(0,s.useCallback)(e=>{_.current&&clearTimeout(_.current),null==v||v.setAttribute("data-show",""),!e&&sC("favorite_folder_more_action_show",{folder_id:l.collectionFolderId,folder_name:l.collectionFolderName}),null==g||g()},[v,g,l]),w=(0,s.useCallback)(()=>{_.current=setTimeout(()=>{null==v||v.removeAttribute("data-show")},100)},[v,g]),C=(0,s.useCallback)(()=>{w(),n.action.openAddVideoModal(),n.action.setTempCurrentCollectsId(l.collectionFolderId),sC("add_favorite_video_click",{folder_id:l.collectionFolderId,folder_name:l.collectionFolderName,status:l.status,enter_method:n.state.currentCollectsId?"sec_panel_more":"first_panel_more"})},[n.action.openAddVideoModal,w,l]),y=(0,s.useCallback)(()=>{w(),i(),sC("edit_favorite_folder_click",{folder_id:l.collectionFolderId,folder_name:l.collectionFolderName,status:l.status})},[i,w,l]),I=(0,s.useCallback)(async()=>{w();let e={folder_id:l.collectionFolderId,folder_name:l.collectionFolderName,status:l.status,item_cnt:l.videoTotal};sC("delete_favorite_folder_click",e),n.action.removeCollections([l],()=>sC("delete_favorite_folder_confirm",e))},[n.action.removeCollections,l,w]);return(0,s.useEffect)(()=>{let e=nr()(w,50);return document.addEventListener("wheel",e),()=>{document.removeEventListener("wheel",e)}},[w]),(0,s.useEffect)(()=>{null==g||g()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{ref:c,className:f()([sQ.more,t]),onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(A.Z,{src:sX,viewBox:"0 0 24 24",onMouseEnter:()=>x(!1),onMouseLeave:w}),d]}),(0,lv.createPortal)((0,a.jsxs)("ul",(0,M._)((0,o._)({ref:m,className:sQ.popover,style:h.popper,onMouseEnter:()=>x(!0),onMouseLeave:w},p.popper),{onClick:e=>e.stopPropagation(),children:[(null==r?void 0:r.favoriteBatchAdd)?(0,a.jsx)("li",{className:sQ.item,onClick:C,children:"添加视频"}):null,(0,a.jsx)("li",{className:sQ.item,onClick:y,children:"编辑收藏夹"}),(0,a.jsx)("li",{className:sQ.item,onClick:I,children:"删除收藏夹"})]})),document.body)]})},s0=e=>{let{data:t}=e,l=sj(),n=(0,s.useMemo)(()=>{var e;let n=((null===(e=l.state.collectMap[t.collectionFolderId])||void 0===e?void 0:e.videoList)||[]).map(e=>{var t;return null===(t=e.video)||void 0===t?void 0:t.cover});return Array(6).fill(void 0).map((e,t)=>{let l=n[t];return{key:l||t,value:l}})},[t,l.state.collectMap]),r=(0,tp.x)(()=>{sC("favorite_folder_show",{folder_name:t.collectionFolderName,folder_id:t.collectionFolderId})}),i=(0,s.useCallback)(()=>{l.action.selectCollection(t.collectionFolderId),sC("favorite_folder_click",{folder_name:t.collectionFolderName,folder_id:t.collectionFolderId})},[t.collectionFolderId,t.collectionFolderName]);return(0,a.jsxs)("div",{ref:r,className:s$.card,onClick:i,children:[(0,a.jsxs)("div",{className:s$.header,children:[(0,a.jsxs)("div",{className:s$.left,children:[(0,a.jsx)(R.Tooltip,{className:s$.tip,style:24>=(0,sZ.V)(t.collectionFolderName)?{display:"none"}:{},content:t.collectionFolderName,position:"right",children:(0,a.jsx)("p",{className:s$.title,children:t.collectionFolderName})}),0===t.status&&(0,a.jsx)(ep.z,{className:s$.secret,svg:(0,a.jsx)(lu.Z,{})})]}),!l.multi.state.selectable&&(0,a.jsx)(sJ,{data:t})]}),(0,a.jsxs)("p",{className:s$.count,children:["共",(0,a.jsx)("span",{className:s$.digit,children:t.videoTotal}),"作品"]}),(0,a.jsx)("div",{className:s$.coverList,children:n.map(e=>(0,a.jsx)(sY,{className:s$.cover,src:e.value},e.key))})]})},s1="PHTg3CQ_",s2="hfH_OkhC",s3=l("959218"),s5={},s6=e=>{let{isListSelectable:t,setIsListSelectable:l}=e,n=!!sj().state.currentCollectsId;return(0,a.jsx)("div",{className:s5.empty,children:(0,a.jsx)(B.H,{icon:n?(0,a.jsx)(l$.Z,{}):(0,a.jsx)(s3.Z,{}),title:n?"暂无内容":"暂无收藏夹",desc:n?"":"赶快去新建属于自己的收藏夹吧",children:n?(0,a.jsx)(sU,{isListSelectable:t,setIsListSelectable:l}):(0,a.jsx)(sW,{})})})},s7=()=>{var e,t;let l=sj(),n=(0,s.useRef)(),r=(0,s.useCallback)(e=>(0,a.jsx)(s0,{data:e}),[l.state.collects]);(0,s.useEffect)(()=>{var e;null==n||null===(e=n.current)||void 0===e||e.setScrollData({dataList:l.state.collects})},[l.state.collects]);let i=np(),d=(0,s.useRef)({borderRadius:"6px"}),{withMask:u}=ng((0,M._)((0,o._)({maskShadowStyle:d.current,getItemId:e=>e.collectionFolderId,dataList:l.state.collects,isSupportMulti:!0},i),{firstItem:null===(t=n.current)||void 0===t?void 0:null===(e=t.getTargetNode)||void 0===e?void 0:e.call(t,0),getColumnCount:()=>3,stickyArea:{top:190,bottom:0,left:0,right:0},itemMargin:{top:0,bottom:16,left:0,right:16}})),c=(0,l9.m)();return(0,a.jsx)("div",{className:s1,children:(0,a.jsx)(lM.Z,{scrollContainerEl:c,ref:n,skeletonNum:0,defaultDataList:[],defaultHasMoreFlag:1,renderItem:r,fetchMoreData:l.action.getCollects,itemClassName:s2,panelNoData:(0,a.jsx)(s6,{}),withMask:u})})},s4=l("603495"),s8={wrapper:"DAr0VGNa",navigation:"BLItnLax",item:"pVX2gw4l",arrow:"cKzNUtWB",arrowBg:"p_uMX0Fx",arrowOuter:"H0yuh5D9",disabled:"dpwViTVX",active:"IK4gZPZa",more:"oBBFAFma",cover:"bOFtr7sq",icon:"EJmkkRbp",right:"hbbabVT7",top:"_GI2ekT8",name:"_ePjyxGo",secret:"RLVAyYMO",total:"lh9n72Gy",bgWrapper:"i1L1rzsC",bg:"u_WGBrMh",loading:"c97e0DWK",tip:"bsE3goEb"};let s9=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({xmlns:"http://www.w3.org/2000/svg",width:9,height:21,fill:"none",ref:t},e),{children:(0,a.jsx)("path",{d:"M7.991 9.154c1.296.87 1.265 2.874-.027 3.748C5.374 14.655 1.794 17.53 0 21V0c2.156 4.549 4.619 6.89 7.991 9.154z",fill:"#454650"})}))),de=e=>{let t=(0,tp.x)(()=>{if(!!e.id)sC("favorite_folder_show",{folder_id:e.id,folder_name:e.name})}),l=(0,s.useCallback)(()=>{var t;if(!e.isDisabled)e.id&&sC("favorite_folder_click",{folder_id:e.id,folder_name:e.name}),null===(t=e.onClick)||void 0===t||t.call(e)},[e.onClick,e.id,e.name,e.isDisabled]);return(0,a.jsxs)("div",{ref:t,className:f()([s8.item,e.active&&s8.active,e.isDisabled&&s8.disabled]),onClick:l,children:[e.isPlus?(0,a.jsx)(ep.z,{className:s8.icon,svg:(0,a.jsx)(s4.Z,{})}):(0,a.jsx)(sY,{size:"large",className:s8.cover,src:e.src,alt:e.name}),(0,a.jsxs)("div",{className:s8.right,children:[(0,a.jsxs)("div",{className:s8.top,"data-tip":e.name,children:[(0,a.jsx)(R.Tooltip,{position:"right",showArrow:!1,style:14>=(0,sZ.V)(e.name)?{display:"none"}:{},content:(0,a.jsx)("span",{style:{lineHeight:"26px"},children:e.name}),className:s8.tip,children:(0,a.jsx)("p",{className:s8.name,children:e.name})}),e.secret&&(0,a.jsx)(ep.z,{className:s8.secret,svg:(0,a.jsx)(lu.Z,{})})]}),void 0!==e.total&&(0,a.jsx)("span",{className:s8.total,children:e.total})]}),(0,a.jsx)("div",{className:s8.bgWrapper,children:(0,a.jsx)(ep.z,{className:s8.bg,svg:(0,a.jsx)(s3.Z,{})})}),(0,a.jsxs)("div",{className:s8.arrow,children:[(0,a.jsx)(A.Z,{className:s8.arrowBg,src:s9,viewBox:"0 0 9 21"}),(0,a.jsx)(A.Z,{className:s8.arrowOuter,src:s9,viewBox:"0 0 9 21"})]}),!e.isDisabled&&e.children]})};var dt=e=>{let{isListSelectable:t}=e,l=sj(),n=(0,s.useCallback)(e=>{l.action.createCollection([e]),l.action.selectCollection(e.collectionFolderId)},[l.action.createCollection,l.action.selectCollection]),{open:r,modal:i}=(0,sO.Z)({toastInGlobal:!0,onDone:n,logParams:{click_position:"favorite_folder_tab"}}),[d,u]=(0,nx.Z)();return((0,s.useEffect)(()=>{if(!!u)l.action.getCollects()},[u]),(0,s.useEffect)(()=>{let e=document.querySelector(".user-page-footer"),t=document.querySelector("#collection-navigation"),l=nr()(()=>{var l;let n=document.body.clientHeight,r=(null==e?void 0:e.getBoundingClientRect().top)||0,{top:i=0,height:o=0}=null!==(l=null==t?void 0:t.getBoundingClientRect())&&void 0!==l?l:{},a=0;if(!!o)a=r>n?n-i:r-i,(null==t?void 0:t.style)&&a&&(t.style.height=`${a}px`)},10),n=(0,t9.s)();return n.addEventListener("scroll",l),()=>{n.removeEventListener("scroll",l)}},[]),l.state.collects.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:s8.wrapper,children:(0,a.jsx)(t5.Z,{topOffset:-60,children:e=>{let{style:n,isSticky:i}=e;return(0,a.jsxs)("div",{id:"collection-navigation",className:s8.navigation,style:i?(0,M._)((0,o._)({},n),{position:"fixed",top:176}):void 0,children:[(0,a.jsx)(de,{name:"新建收藏夹",isPlus:!0,onClick:r,isDisabled:t}),l.state.collects.map(e=>{var n,r,i,o;return(0,a.jsx)(de,{id:e.collectionFolderId,active:e.collectionFolderId===l.state.currentCollectsId,name:e.collectionFolderName,src:null===(o=l.state.collectMap[e.collectionFolderId])||void 0===o?void 0:null===(i=o.videoList)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:null===(n=r.video)||void 0===n?void 0:n.cover,secret:0===e.status,total:e.videoTotal,onClick:()=>l.action.selectCollection(e.collectionFolderId),isDisabled:e.collectionFolderId!==l.state.currentCollectsId&&t,children:(0,a.jsx)(sJ,{data:e,className:s8.more})},e.collectionFolderId)}),l.state.collectResRef.current.hasMore&&(0,a.jsx)("div",{ref:d,className:s8.loading,children:(0,a.jsx)(h.gb,{})})]})}})}),i]}):null},dl="jRuGzlER",dn="PesPRb6g",dr=e=>{var t,l,n,r,i,o;let{isListSelectable:d,setIsListSelectable:u}=e,c=sj(),{userInfo:v}=(0,eF.useUserInfoContext)()||{},m=null!==(o=(0,l8.o)(null==v?void 0:null===(t=v.info)||void 0===t?void 0:t.secUid))&&void 0!==o?o:"",f=(0,s.useRef)(),h=(0,s.useCallback)(()=>c.action.getVideoList(c.state.currentCollectsId),[c.state.currentCollectsId]),{isPostDelete:p}=(0,s.useContext)(t8);return(0,s.useEffect)(()=>{if(p&&c.state.currentCollectsId){var e;let t=null!==(e=w.Le.getConfig(w.gI.DeletePostList))&&void 0!==e?e:[];c.action.removeVideoForDeleted(c.state.currentCollectsId,t)}},[p,c.action,c.state.currentCollectsId]),(0,s.useEffect)(()=>{var e,t,l;if(!c.state.currentCollectsId){null==f||null===(l=f.current)||void 0===l||l.resetRes({statusCode:0,hasMore:!1,dataList:[]});return}let n=c.state.videoResRef.current[c.state.currentCollectsId]||{cursor:0,hasMore:0};null==f||null===(t=f.current)||void 0===t||t.resetRes({statusCode:0,hasMore:n.hasMore,dataList:(null===(e=c.state.currentCollectsInfo)||void 0===e?void 0:e.videoList)||[]})},[c.state.currentCollectsInfo,c.state.currentCollectsId]),(0,a.jsx)("div",{className:dl,children:(0,a.jsx)(ig,{ref:f,itemClassName:dn,uid:m,tab:"favorite_collection",currentTab:"favorite_collection",modalInnerFeedCard:"collect_folder",defaultRes:{statusCode:0,hasMore:0,cursor:0,data:(null===(l=c.state.currentCollectsInfo)||void 0===l?void 0:l.videoList)||[]},fetchMoreData:h,collectionFolderInfo:null===(n=c.state.currentCollectsInfo)||void 0===n?void 0:n.info,modalEnterFrom:lb.a.CollectionFolder,columnCount:5,panelNoData:(0,a.jsx)(s6,{isListSelectable:d,setIsListSelectable:u}),logParams:{folder_id:(null===(r=c.state.currentCollectsInfo)||void 0===r?void 0:r.info.collectionFolderId)||"",folder_name:(null===(i=c.state.currentCollectsInfo)||void 0===i?void 0:i.info.collectionFolderName)||"",sub_tab_name:"folder"}})})},di="Wg2rNMbd",da=e=>{let{isEntry:t,isListSelectable:l,setIsListSelectable:n}=e,r=sj(),[i,o]=(0,s.useState)(!1),d=(0,s.useCallback)(async()=>{if(!!t)try{o(!0),await r.action.getCollects()}catch(e){}finally{o(!1)}},[t,r.action.getCollects]);return(0,s.useEffect)(()=>{d()},[d]),(0,s.useEffect)(()=>{if(!r.state.currentCollectsId&&!!r.state.collects.length)r.action.selectCollection(r.state.collects[0].collectionFolderId)},[r.state.currentCollectsId,r.state.collects]),(0,a.jsx)("div",{className:di,children:i?(0,a.jsx)(h.gb,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(dt,{isListSelectable:l}),(0,a.jsx)(dr,{isListSelectable:l,setIsListSelectable:n})]})})},ds=e=>{let{isListSelectable:t,setIsListSelectable:l}=e;return sj().state.currentCollectsId?(0,a.jsx)(da,{isListSelectable:t,setIsListSelectable:l}):(0,a.jsx)(s7,{})};let dd=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{d:"M4.436 14.15L2.259 3.003a.75.75 0 0 1 1.095-.802l9.936 5.42a.47.47 0 0 1-.184.88l-4.527.395a.94.94 0 0 0-.754.506l-2.51 4.871a.47.47 0 0 1-.88-.125z",fill:"#fff",fillOpacity:".5"})}))),du=e=>{if(e===tM.COMPILATION)return"收藏合集";if(e===tM.VIDEO);else if(e===tM.SERIES)return"收藏短剧";return"收藏作品"};var dc=e=>{let{userInfo:t,currentTab:l,topNavHeight:n=60,abTestData:r,currentSubTab:i=tM.VIDEO,onSubTabChange:d,showSearchBar:u,searchBarSlot:v,isListSelectable:m,setIsListSelectable:h}=e,[p,g]=(0,s.useState)(!1);(0,c.C)(x.w3.components.user_collection_list);let _=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(i===tM.VIDEO){let t={},l=[];return e.forEach(e=>{l.push(e.awemeId),t[e.awemeId]=(0,iP.I)(e.awemeType)}),(0,rs.VD)({awemeIds:l.join(","),awemeTypeMap:t})}if(i===tM.COMPILATION){let t=e.map(e=>e.mixId).join(",");return(0,rs._A)({mixIds:t})}if(i===tM.SERIES){let t=e.map(e=>e.seriesId).join(",");return(0,rs.eh)({seriesIds:t})}},[i]),w=l_({maxSelectedCount:i===tM.VIDEO?100:50,operate:_,operateDesc:{operation:"取消",itemName:du(i)},tabName:"favorite_collection",subTabName:i,isListSelectable:m,setIsListSelectable:h}),C=sI(w,l_({maxSelectedCount:50,isListSelectable:m,setIsListSelectable:h})),{changeListSelectable:y,changeShowConfirm:I,renderConfirmModal:b,selectedCount:j}=w;(0,s.useMemo)(()=>(0,a.jsxs)("div",{className:f()(sx.descText,sx.fuFang),children:[(0,a.jsx)("p",{children:"找不到内容？"}),(0,a.jsx)("p",{children:"1.某些内容格式电脑端暂不支持查看，请在 APP 查看"}),(0,a.jsx)("p",{children:"2.某些内容因作者删除或设置私密，暂时无法查看"})]}),[]);let k=e=>{if(!!e)null==d||d(e),n3(),e!==i&&(0,t9.V)().scrollTo(0,0),i===tM.FAVORITE_FOLDER&&e!==tM.FAVORITE_FOLDER&&C.action.reset(),V.logInstance.sendLog("favoriteCollectionTabClick",{tab_name:e})};(0,s.useEffect)(()=>{if("favorite_collection"===l&&i===tM.COMPILATION){var e;let t=aN.Q.getItem({sKey:io.CookieKeys.SelfTabRedDotControl})||[],l=null==t?void 0:null===(e=t.map)||void 0===e?void 0:e.call(t,e=>{let{id:t,u:l}=e;return{id:t,u:l,c:l}});aN.Q.setItem(io.CookieKeys.SelfTabRedDotControl,l,31536e3)}},[r,l,i]),(0,s.useEffect)(()=>{null==y||y(!1)},[i,y]),tM.COMPILATION,tM.VIDEO,tM.SERIES;let[N,S]=(0,s.useState)(0);(0,s.useEffect)(()=>{!Object.values(tM).includes(i)&&(null==d||d(tM.VIDEO))},[i]),(0,s.useEffect)(()=>{(async()=>{if((0,es.DT)()&&window.TTE_ENV){let e=await ow.invoke("GET_CHANNEL_ID");(null==e?void 0:e.data)==="30033"&&g(!0)}else(0,H.CY)("xigua_webid")&&g(!0)})()},[]);let{selectItems:E,selectable:L}=C.multi.state,T=(0,s.useRef)(null),M=(0,s.useRef)(null),P=(0,s.useCallback)(async e=>{if(!!E.length&&!!L)try{await C.action.moveVideosToCollections(e,E,!1),nl.F.info("添加至收藏夹成功")}catch(e){nl.F.info("添加视频失败")}finally{var t;C.multi.action.updateIsSelectDisabled(!1),C.multi.action.changeListSelectable(!1),null===(t=M.current)||void 0===t||t.close()}},[C.action.moveVideosToCollections,E,L]),D=(0,s.useCallback)(async(e,t)=>{var l,n,r,i,o;try{let o=C.state.currentCollectsId;if(!E.length||!L||!o)return;let a={folder_id:"",folder_name:"",item_cnt:E.length};if(null==t?void 0:t.length)C.action.createCollection(t),a.folder_id=(null===(l=t[0])||void 0===l?void 0:l.collectionFolderId)||"",a.folder_name=(null===(n=t[0])||void 0===n?void 0:n.collectionFolderName)||"";else{let t=C.state.collectMap[e[0]];a.folder_id=(null==t?void 0:null===(r=t.info)||void 0===r?void 0:r.collectionFolderId)||"",a.folder_name=(null==t?void 0:null===(i=t.info)||void 0===i?void 0:i.collectionFolderName)||""}await C.action.removeVideosFromCollection(o,E),await C.action.moveVideosToCollections(e,E),sC("move_favorite_video_confirm",a),nl.F.info("移动视频成功")}catch(e){nl.F.info("移动视频失败")}finally{C.multi.action.updateIsSelectDisabled(!1),C.multi.action.changeListSelectable(!1),null===(o=T.current)||void 0===o||o.close()}},[E,L,C.state.currentCollectsId,C.state.currentCollectsInfo,C.state.collectMap,C.multi.action.updateIsSelectDisabled,C.multi.action.changeListSelectable]),F=(0,s.useCallback)(()=>{var e,t;let l=C.state.currentCollectsId;if(!!E.length&&!!L&&!!l)sC("remove_favorite_video_click",{folder_id:(null===(e=C.state.currentCollectsInfo)||void 0===e?void 0:e.info.collectionFolderId)||"",folder_name:(null===(t=C.state.currentCollectsInfo)||void 0===t?void 0:t.info.collectionFolderName)||""}),V.logInstance.sendLog("functionIconClick",{tab_name:"favorite_collection",sub_tab_name:"favorite_folder",item_cnt:j,function_name:"remove"}),C.multi.action.updateIsSelectDisabled(!0),(0,t$.Z)({title:"是否确认移出该收藏夹？",cancelBtnText:"暂不移除",confirmBtnText:"确认移除",otherProps:{maskClosable:!1},async onConfirm(){var e,t;sC("remove_favorite_video_confrm",{folder_id:(null===(e=C.state.currentCollectsInfo)||void 0===e?void 0:e.info.collectionFolderId)||"",folder_name:(null===(t=C.state.currentCollectsInfo)||void 0===t?void 0:t.info.collectionFolderName)||"",item_cnt:E.length}),C.multi.action.updateIsSelectDisabled(!1),await C.action.removeVideosFromCollection(l,E),C.multi.action.changeListSelectable(!1)},onCancel(){C.multi.action.updateIsSelectDisabled(!1)}})},[E,L,C.state.currentCollectsId,C.state.currentCollectsInfo,C.action.removeVideosFromCollection,C.multi.action.updateIsSelectDisabled,C.multi.action.changeListSelectable]),B=(0,s.useCallback)(async()=>{let e=C.state.currentCollectsId;if(!!E.length&&!!L&&!e)V.logInstance.sendLog("functionIconClick",{tab_name:"favorite_collection",sub_tab_name:"favorite_folder",item_cnt:j,function_name:"delete_favorites"}),C.action.removeCollections(E)},[E,L,C.state.currentCollectsId,C.action.removeCollections,j]),U=(0,s.useMemo)(()=>{if([tM.VIDEO,tM.COMPILATION,tM.SERIES].includes(i)){let e=[{key:"cancel_favorite",actionText:"取消收藏",onClick:()=>{null==I||I(!0),V.logInstance.sendLog("functionIconClick",{tab_name:"favorite_collection",sub_tab_name:i,item_cnt:j,function_name:"favorite_cancel"})}}];return(null==r?void 0:r.favoriteBatchAdd)&&i===tM.VIDEO&&e.push({key:"add_favorite",actionText:"加入收藏夹",onClick:()=>{var e;null===(e=M.current)||void 0===e||e.open(),sC("pc_favourite_batch_manage_click",{tab_name:"favorite_collection"})},onShow:()=>{sC("pc_favourite_batch_manage_show",{tab_name:"favorite_collection"})}}),e}return C.state.currentCollectsId?[{key:"remove_videos",actionText:"从收藏夹移除",onClick:F},{key:"move",actionText:"移动到",icon:(0,a.jsx)(A.Z,{width:16,height:16,src:dd,viewBox:"0 0 16 17"}),onClick:()=>{var e,t,l;sC("move_favorite_video_click",{folder_id:(null===(e=C.state.currentCollectsInfo)||void 0===e?void 0:e.info.collectionFolderId)||"",folder_name:(null===(t=C.state.currentCollectsInfo)||void 0===t?void 0:t.info.collectionFolderName)||""}),V.logInstance.sendLog("functionIconClick",{tab_name:"favorite_collection",sub_tab_name:"favorite_folder",item_cnt:j,function_name:"move_favorites"}),C.multi.action.updateIsSelectDisabled(!0),null===(l=T.current)||void 0===l||l.open()}}]:[{key:"remove_collects",actionText:"删除收藏夹",onClick:B}]},[j,C.state.currentCollectsId,F,B,C.multi.action.updateIsSelectDisabled,C.state.currentCollectsInfo,i,I]),O=(0,s.useMemo)(()=>{if(i===tM.VIDEO||C.state.currentCollectsId)return"收藏的视频";if(i===tM.COMPILATION)return"收藏的合集";if(i===tM.SERIES)return"收藏的短剧";else return"收藏夹"},[i,C.state.currentCollectsId]);return(0,a.jsx)(lw.Provider,{value:(0,o._)({},w),children:(0,a.jsxs)(sb.Provider,{value:C,children:[(0,a.jsxs)("div",{className:sx.container,children:[(0,a.jsx)(iH,{headerHeight:m?72:44,topNavHeight:n,children:(0,a.jsxs)("div",{className:f()(sx.header,{[sx.headerBg]:m}),children:[m?(0,a.jsx)(iq,{selectedText:O,operateBtns:U,currentSubTab:i,currentTab:l}):(0,a.jsx)(R.Tabs,{type:"button",className:sx.tabs,activeKey:i,onChange:e=>k(e),children:tR.map(e=>(0,a.jsx)(R.TabPane,{itemKey:e.tab,tab:(0,a.jsx)("span",{children:e.title})},e.tab))}),(0,a.jsxs)("div",{className:sx.right,children:[i===tM.VIDEO&&u&&v,(C.state.isAddVideoModalShow||!m)&&i===tM.FAVORITE_FOLDER&&(0,a.jsx)(sz,{})]})]})}),(0,a.jsxs)("div",{className:f()({[sx.default]:!m}),children:[i===tM.FAVORITE_FOLDER&&(0,a.jsx)(ds,{isListSelectable:m,setIsListSelectable:h}),i===tM.VIDEO&&(0,a.jsx)(sF,{currentTab:l,userInfo:t,topNavHeight:n,setItemCount:S,abTestData:r}),i===tM.MUSIC&&(0,a.jsx)(s_,{currentTab:l,userInfo:t,abTestData:r}),i===tM.COMPILATION&&(0,a.jsx)(aA,{userInfo:t,topNavHeight:n,setItemCount:S,abTestData:r}),i===tM.SERIES&&(0,a.jsx)(az,{userInfo:t,topNavHeight:n,setItemCount:S})]})]}),null==b?void 0:b(),(0,a.jsx)(r_,{ref:T,selectType:"single",disabledCollectionIds:C.state.currentCollectsId?[C.state.currentCollectsId]:[],awaysReset:!0,disabledScrollBar:!0,onMove:D,onClose:()=>C.multi.action.updateIsSelectDisabled(!1)}),(0,a.jsx)(r_,{ref:M,selectType:"multi",disabledCollectionIds:C.state.currentCollectsId?[C.state.currentCollectsId]:[],awaysReset:!0,disabledScrollBar:!0,onMove:P,onClose:()=>C.multi.action.updateIsSelectDisabled(!1)})]})})},dv=l("439630"),dm={container:"Uy7p_Gv7",defaultBg:"LWfC2Uzs",backgroundBox:"r9mSUWrV",background:"ad3qDFQ9",gradient:"Iqj97qqT",gradientBottom:"MGCOZwJQ",gradientTop:"MsbT79AV",gradientRight:"z45irkjS"};let df=e=>{var t,l,n,r;let i;let{headImageInfo:o,abTestData:s,isSelf:d}=e||{},{coverUrl:u,darkCoverColor:c}=o||{};u&&c&&(i=(0,dv.p)((0,dv.s)(c),s));let v=1;return((null==s?void 0:null===(t=s.userUiUpdate)||void 0===t?void 0:t.type)===1||!d&&(null==s?void 0:null===(l=s.userUiUpdate)||void 0===l?void 0:l.type)===2)&&(v=null==s?void 0:null===(r=s.userUiUpdate)||void 0===r?void 0:r.opacity),u?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:dm.container,children:[(0,a.jsx)("div",{className:dm.backgroundBox,children:(0,a.jsx)("div",{className:dm.background,style:{backgroundImage:`url(${null==u?void 0:null===(n=u.urlList)||void 0===n?void 0:n[0]})`,opacity:v}})}),(0,a.jsx)("div",{className:dm.gradient,style:{"--bg-color":i}}),(0,a.jsx)("div",{className:dm.gradientBottom}),(0,a.jsx)("div",{className:dm.gradientTop}),(0,a.jsx)("div",{className:dm.gradientRight})]})}):(0,a.jsx)("div",{className:f()(dm.container,dm.defaultBg)})};var dh={frameContainer:"m_Rv8rMP",videoPerf:"Klp5EcJu",notMargin:"ntzeq3YW",batchBtn:"buGg4uBH",tipsIcon:"Sf7kfu18",listBoxContainer:"RfMlryVX",notHeaderPadding:"hXpLR3X9",topBackground:"Gv9gRXMj",listContainer:"z_YvCWYy",errorContent:"dU9_tlDB",banContainer:"kMbQLfuh",desc:"OKsE6YlD",text:"jMHdwoXm",link:"MQJsjQ_V",tabinner:"RdqC52V7",tip:"WketMh7_",tipText:"dh6Er0_z",hasNavTab:"g9Fxl5WT",container:"XA9ZQ2av"};function dp(e){let{userInfo:t,children:l}=null!=e?e:{},{awemeCount:n=-1,favoritingCount:r=-1,showFavoriteList:i=!1,favoritePermission:o=0}=null!=t?t:{},{isSelf:d}=(0,s.useContext)(Z),u=!d&&!i||d&&1===o,[c,v]=(0,s.useState)(n),[m,f]=(0,s.useState)(u?-1:r),[h,p]=(0,s.useState)(!1),g=(0,s.useCallback)((e,t)=>{v(l=>{let n=t?l+e:e;return n<0?0:n})},[]),_=(0,s.useCallback)((e,t)=>{!u&&f(l=>{let n=t?l+e:e;return n<0?0:n})},[u]);(0,s.useEffect)(()=>{h&&(p(!1),w.Le.setConfig(w.gI.DeletePostList,[]))},[h]);let x=(0,s.useCallback)(()=>{var e,t;let l=null!==(t=null===(e=w.Le.getConfig(w.gI.DeletePostList))||void 0===e?void 0:e.length)&&void 0!==t?t:0;l>0&&!h&&(g(-l,!0),p(!0),(0,t6.d)((0,t9.V)(),0,500))},[g,h]),C=(0,s.useCallback)(()=>{var e,t;let l=null!==(t=null===(e=w.Le.getConfig(w.gI.AddPostList))||void 0===e?void 0:e.length)&&void 0!==t?t:0;l>0&&!h&&(g(l,!0),p(!0),(0,t6.d)((0,t9.V)(),0,500))},[g,h]);return(0,a.jsx)(t8.Provider,{value:{userAwemeCount:c,userFavoriteCount:m,updateAwemeCount:g,updateFavoriteCount:_,reloadForPostDelete:x,reloadForPostAdd:C,isPostDelete:h},children:l})}var dg=l("57346"),d_={user:"CdPxvbld",emptyWrapper:"j3g4fYRX",listSortByTime:"ipKJmDRA",date:"fEU1GWCT",cardList:"UYiHK8cp",cardContainer:"_2V3GzHy",loading:"U3w5MkEj",errorWrapper:"VUUGEuYe"},dx={appointmentCard:"ZcupQDsA",avatarWrap:"GrX1qyN2",avatar:"NQcL_z9y",info:"TYGwPl8Z",nameInfo:"RhKNP6x7",nickname:"bHUwey4a",badge:"tWc2DzfT",badgeIcon:"XzQOQewz",liveExtraText:"YsL53I4o",appointmentButton:"HHMU34dR",contentBlock:"Nfff_3c7"};let dw=e=>{let{info:t,className:l,onClick:n,onBtnClick:r}=e,{appointmentId:i,userId:o,userSecUid:d,userAvatar:u,userNickname:c,currentRoomId:v,webRid:m,accountCertInfo:h}=t,p=(0,tp.Y)(()=>{tH.sendLog("reserveLiveCardShow",{anchor_id:o,room_id:v})}),g=!!v,_=(0,s.useMemo)(()=>({web_rid:m,enter_from_merge:"personal_homepage",action_type:"click",enter_method:"web_appointment",room_id:v}),[v]),x=(0,s.useMemo)(()=>({authorInfo:{roomData:{},roomId:v,nickname:c,title:c,secUid:d,uid:o}}),[v,c,c,d,o]);return(0,a.jsxs)("div",{className:f()(dx.appointmentCard,l),ref:p,onClick:()=>{tH.sendLog("reserveLiveCardClick",{anchor_id:o,room_id:v}),null==n||n({webRid:m,currentRoomId:v,userSecUid:d,isLiving:g})},children:[(0,a.jsx)("div",{className:dx.avatarWrap,children:g?(0,a.jsx)(eW.nh,{type:"large",src:u,alt:`${c}头像`,uid:o,liveRoomUrl:(0,eZ.cc)(_),isNeedSendLog:!0,onClick:e=>{e.preventDefault()},awemeInfo:x,position:"right",zIndex:1e4}):(0,a.jsx)(ez.q,{className:dx.avatar,defaultClassName:dx.avatar,src:u,alt:`${c}头像`})}),(0,a.jsxs)("div",{className:dx.info,children:[(0,a.jsxs)("div",{className:dx.nameInfo,children:[(0,a.jsx)("div",{className:dx.nickname,children:(0,a.jsx)(q.Z,{text:c})}),(0,a.jsx)(el.C,{iconClassName:dx.badgeIcon,accountCertInfo:h,className:dx.badge,isRoleNameShow:!1})]}),(0,a.jsx)("div",{className:dx.liveExtraText,children:function(e){let t=null==e?void 0:e.dueStartTime,l=(null==e?void 0:e.cycle)===1,n=null==e?void 0:e.scheduledWeekdays,r=["","一","二","三","四","五","六","日"];try{let e=function(e,t){if(!e)return"";let l=K()(e),n=K()(t),r=l.format("yyyy-MM-dd HH:mm:ss"),i=t>0?n.format("yyyy-MM-dd HH:mm:ss"):"";return i&&"00:00:00"===r.split(" ")[1]&&"23:59:59"===i.split(" ")[1]?l.isSame(n,"day")?l.format("M月D日"):`${l.format("M月D日")} ~ ${n.format("M月D日")}`:i?l.isSame(n,"day")?`${l.format("M月D日 HH:mm")} ~ ${n.format("HH:mm")}`:`${l.format("M月D日 HH:mm")} ~ ${n.format("M月D日 HH:mm")}`:l.format("M月D日 HH:mm")}(1e3*t,0);if(l){let t=null==n?void 0:n.map(e=>0===e?7:e),l=null==t?void 0:t.sort(),i=null==l?void 0:l.length;if(i){let t=l[i-1]-l[0]+1===i;if(t&&7===i)e=`${e}（每天开播）`;else if(t&&i>1)e=`${e}（每周${r[l[0]]}至周${r[l[i-1]]}开播）`;else{let t="";null==l||l.map(e=>{t+=r[e]}),e=`${e}（每周${t}开播）`}}}return e}catch(e){return""}}(t)})]}),(0,a.jsx)(R.Button,{className:dx.appointmentButton,type:"secondary",theme:"solid",onClick:e=>{e.stopPropagation(),null==r||r({appointmentId:i,userId:o,currentRoomId:v})},children:(0,a.jsx)("div",{className:dx.contentBlock,children:"已预约"})})]})};var dC=()=>{var e;let[t,l]=(0,s.useState)({}),[n,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)([]),[u,v]=(0,s.useState)(!0),[m,p]=(0,s.useState)(!1),[g,_]=(0,s.useState)(!1);(0,c.C)(x.w3.components.appointment);let C=(0,s.useCallback)(async()=>{try{p(!1),_(!1),v(!0),iw.z.markStart("user_appointment_fetch_data",{once:!0});let{statusCode:t,list:l}=await (0,i_.fetchAppointmentList)();if(iw.z.markEnd("user_appointment_fetch_data",{once:!0}),0!==t)v(!1),p(!0);else{var e;let t=null==l?void 0:null===(e=l.reduce)||void 0===e?void 0:e.call(l,(e,t)=>{let{dueStartTime:l}=t,n=K().unix(l).format("YYYY-MM-DD"),r=e[n];return e[n]=[...r||[],t],e},{}),n=Object.entries(t).sort((e,t)=>e[0]<t[0]?-1:0).map(e=>{let[t,l]=e;return{date:function(e){let t=K()(e);if(!t.isValid())return"";let l=w.Le.getConfig(w.gI.ServerTime),n=l?K()(l):K()(),r=t.isSame(n,"day"),i=t.isSame(n.subtract(1,"day"),"day"),o=t.isSame(n.add(1,"day"),"day");if(r)return"今天";if(i)return"昨天";if(o)return"明天";return n.format("YYYY")===t.format("YYYY")?t.format("MM月DD日"):t.format("YY年MM月DD日")}(t),list:l}});v(!1),o(n)}}catch(e){v(!1),_(!0)}},[]),y=(0,s.useCallback)(async()=>{try{var e;let{appointmentId:l,userId:n,currentRoomId:i}=t,a=await (0,i_.cancelAppointment)({appointment_id:l});(null==a?void 0:a.statusCode)===0&&(null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.responseStatus)===1?(tH.sendLog("reserveLiveCardCancel",{anchor_id:n,room_id:i}),r(!1),o(e=>(e.forEach((t,n)=>{let{list:r}=t,i=r.findIndex(e=>e.appointmentId===l);i>-1&&(r.splice(i,1),0===r.length&&e.splice(n,1))}),[...e]))):ee.F.info("取消预约失败")}catch(e){ee.F.info("取消预约失败")}},[t]),I=(0,s.useCallback)(e=>{l(e),r(!0)},[]),b=(0,s.useCallback)(e=>{let{webRid:t,currentRoomId:l,userSecUid:n,isLiving:r}=e;if(r){let e=(0,eZ.cc)({web_rid:t,enter_from_merge:"personal_homepage",enter_method:"web_appointment",action_type:"click",room_id:l});window.open(e,"_blank","noopener")}else{let e=(0,eZ.HC)(n,(0,d.stringify)({enter_from:"personal_homepage",enter_method:"web_appointment"}));window.open(e,"_blank","noopener")}},[]);return(0,s.useEffect)(()=>{C()},[]),(0,a.jsxs)("div",{className:d_.user,children:[null==i?void 0:null===(e=i.map)||void 0===e?void 0:e.call(i,e=>{var t;let{date:l,list:n}=e;return(0,a.jsxs)("div",{className:d_.listSortByTime,children:[(0,a.jsx)("div",{className:f()(d_.date,"user_record_date"),children:l}),(0,a.jsx)("div",{className:d_.cardList,children:null==n?void 0:null===(t=n.map)||void 0===t?void 0:t.call(n,e=>(0,a.jsx)(dw,{info:e,className:d_.cardContainer,onClick:b,onBtnClick:I},e.appointmentId))})]},l)}),!u&&!m&&!g&&0===i.length&&(0,a.jsx)(B.H,{className:d_.emptyWrapper,needRenderIconInSSR:!0,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"暂无预约记录"}),u&&(0,a.jsx)(h.gb,{className:d_.loading}),m&&(0,a.jsx)("div",{className:d_.errorWrapper,children:(0,a.jsx)(k.nl,{secondaryButtonTitle:"刷新",secondaryButtonAction:C})}),g&&(0,a.jsx)("div",{className:d_.errorWrapper,children:(0,a.jsx)(k.oO,{secondaryButtonAction:C})}),(0,a.jsx)(dg.Z,{show:n,setShow:r,contentText:"确认取消该直播预约吗？",confirmText:"取消预约",cancelText:"返回",onConfirm:y})]})},dy={header:"xKhAjvyw",headerBg:"UTkE2xZE",like:"leN0hNwG",likeNoMarginTop:"MncQZsCR",errorContent:"QHcqN9CY",empty:"u7B9Luxj",privacySetting:"IWf3VeiI",content:"yHAmwtID",lockIcon:"ClWvqOkS",downIcon:"Pz_dYhti",dropDownPanel:"EwkdWMnV",item:"EhnO4m_3",active:"euRMVJ20"};let dI=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:t},e),{children:(0,a.jsx)("path",{d:"M7.5.938a3.516 3.516 0 0 0-3.516 3.515v1.735A1.72 1.72 0 0 0 2.5 7.89v4.453c0 .949.77 1.719 1.719 1.719h6.562c.95 0 1.719-.77 1.719-1.72V7.892a1.72 1.72 0 0 0-1.484-1.703V4.453A3.516 3.516 0 0 0 7.5.937zm2.11 5.234H5.39V4.453a2.11 2.11 0 0 1 4.22 0v1.719z",fill:"#fff",fillOpacity:".5"})}))),db=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({xmlns:"http://www.w3.org/2000/svg",width:16,height:17,fill:"none",ref:t},e),{children:(0,a.jsx)("path",{d:"M12 6.5l-4 4-4-4",stroke:"#fff",strokeOpacity:".5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),dj={0:"互相关注的人可见",1:"粉丝可见"},dk=[{id:0,label:dj[0]},{id:1,label:dj[1]}],dN=()=>{let[e,t]=(0,s.useState)(0),[l,n]=(0,s.useState)(!1),r=e=>{t(e),(0,oC.a3)({on:!!e,field:"recommend_visibility"})};return(0,s.useEffect)(()=>{(async()=>{let{data:e,statusCode:l}=await (0,oC.s$)();if(0===l){let{recommendVisibility:l}=e;t(l)}})()},[]),(0,a.jsxs)("div",{className:dy.privacySetting,onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)},children:[(0,a.jsxs)("div",{className:dy.content,children:[(0,a.jsx)(aX.Z,{className:dy.lockIcon,src:dI,width:15,height:15,viewBox:"0 0 15 15"}),"仅",dj[e],(0,a.jsx)(aX.Z,{className:dy.downIcon,src:db,width:16,height:17,viewBox:"0 0 16 17"})]}),l&&(0,a.jsx)("div",{className:dy.dropDownPanel,children:dk.map(t=>(0,a.jsx)("div",{className:f()(dy.item,{[dy.active]:t.id===e}),onClick:()=>r(t.id),children:t.label},t.id))})]})};var dS=e=>{var t;let{userInfo:l,currentTab:n,topNavHeight:r=60,abTestData:i,showSearchBar:o,searchBarSlot:d,isListSelectable:u}=e,v=(0,l8.o)(null==l?void 0:l.secUid),{isSelf:m}=null!==(t=(0,s.useContext)(Z))&&void 0!==t?t:{},h=(0,s.useRef)(0),p=(0,s.useRef)(0),g=(0,s.useRef)({}),_=(0,s.useRef)([]);(0,c.C)(x.w3.components.user_like);let w=(0,s.useCallback)(async()=>{iw.z.markStart("user_recommend_fetch_data",{once:!0});let{data:e=[],maxCursor:t=0,hasMore:l,statusCode:n,logPb:r,whaleInfo:i}=await oh(e=>{var t;return nY.qy.request({consume:!0,params:{userId:v,maxCursor:e,count:18,whaleCutToken:null===(t=g.current)||void 0===t?void 0:t.whaleCutToken},fetcherOptions:{resetExpiredCacheBefore:!1,hoverDelay:!1}})},p.current);iw.z.markEnd("user_recommend_fetch_data",{once:!0});let o=e.length<6?h.current:p.current;return e.map(e=>(e.cursor=o,e)),!n&&(h.current=p.current,p.current=t,g.current={whaleCutToken:null==i?void 0:i.whaleCutToken}),{data:tk(e,_.current),maxCursor:t,hasMore:l,statusCode:n,whaleDecisionCustom:null==i?void 0:i.whaleDecisionCustom,logPb:r,clearBefore:0===h.current}},[v,i,m]),C=(0,s.useCallback)(()=>{p.current=0,g.current={}},[]),y=(0,s.useRef)(),{profileTabInfo:I}=l||{},b=(0,s.useMemo)(()=>{var e,t;return null==I?void 0:null===(t=I.profile_tab_list_v2)||void 0===t?void 0:null===(e=t.find)||void 0===e?void 0:e.call(t,e=>(null==e?void 0:e.name_en)==="familiar_recommend_tab")},[I]);return m||b?(0,a.jsxs)("div",{className:f()(dy.like,{[dy.likeNoMarginTop]:m}),"data-e2e":"user-like-list",children:[m&&(0,a.jsx)(iH,{headerHeight:u?72:44,topNavHeight:r,children:(0,a.jsxs)("div",{className:f()(dy.header,{[dy.headerBg]:u}),children:[o&&d,(0,a.jsx)(dN,{})]})}),(0,a.jsx)(ig,{modalEnterFrom:lb.a.UserRecommend,ref:y,resetStatusFunc:C,uid:v,tab:"recommend",currentTab:n,defaultRes:{statusCode:0,data:[],hasMore:1,cursor:0,maxCursor:0},fetchMoreData:w,retryTimes:5,panelNoData:m?(0,a.jsx)(om,{className:dy.empty,title:"暂无推荐的视频"}):void 0,topNavHeight:r})]}):(0,a.jsx)(B.H,{icon:(0,a.jsx)(l$.Z,{}),title:"推荐内容不可见",className:dy.errorContent})},dE=l("732178"),dL="uT_yytgJ",dT="y4KLQbgk",dM="gCJrkIUa";l("602157");var dR=l("476775"),dP=l("362704"),dD=l("196425"),dA={aiNoteCardWrapper:"fLNkY6a_",topContent:"lRkI8Fz8",moreInfo:"DfDdVqQz",moreIconContainer:"_AluYq15",title:"qrL9wbLE",description:"izwR3ukK",date:"myH4fVmL",moreBtn:"mSP617JX",bottomContent:"pPbtXdXH",videoImage:"qN5OFtEE",videoTitle:"A3Ia9PXs",dropdownMenuItem:"C55xba09"};l("284961");let dF=e=>e?e.replace(/#{1,6}\s+/g,"").replace(/(\*\*|__)(.*?)\1/g,"$2").replace(/(\*|_)(.*?)\1/g,"$2").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/!\[([^\]]*)\]\([^)]+\)/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/^[*-+]\s+/gm,"").replace(/^\d+\.\s+/gm,"").replace(/^>\s+/gm,"").replace(/^[-*_]{3,}\s*$/gm,"").replace(/\n{3,}/g,"\n\n").trim():"",dV=e=>{let t=null==e?void 0:e.match(/#([\s\S]*?)(?=\n|$)/);return t?dF(t[1]):""},dB=e=>{if(!e)return"";if(!dV(e))return dF(e);let t=e.split("\n"),l=t.findIndex(e=>""!==e.trim());if(-1===l)return"";let n=t.slice(l+1);return 0===n.length?"":dF(n.join("\n").replace(/<chaptertime\s+data-time=['"]((?:\d{1,2}:)?\d{1,2}:\d{2})['"]\s*\/>/g,(e,t)=>t.startsWith("00:")?t.substring(3):t))},dU="ai_note",dO=e=>{var t;let{aiNote:l,onClick:n,onDeleteSuccess:r,index:i}=e,{title:d,description:u,modifyTime:c,relatedItemInfo:v,draft:m,isRunning:f}=l,h=d||dV(u)||dV(m)||(f?"AI 笔记生成中":"未命名新笔记"),p=dB(u)||dB(m)||(f?"请等待 1-2 分钟":"记录你的想法，一键生成 AI 笔记"),g=(null==v?void 0:v.name)||(null==v?void 0:v.desc)||"",_=null==v?void 0:null===(t=v.video)||void 0===t?void 0:t.cover,[x,w]=(0,s.useState)(!1),C=async e=>{var t,n,i;e.stopPropagation(),w(!1);let a={enter_from:(0,e1.yW)(),enter_method:"personal_homepage",note_id:l.noteId,group_id:null===(t=l.relatedItemInfo)||void 0===t?void 0:t.awemeId,author_id:null===(i=l.relatedItemInfo)||void 0===i?void 0:null===(n=i.authorInfo)||void 0===n?void 0:n.uid};dD.K.sendLog("pcAiNoteDeletePopShow",a),(0,t$.Z)({title:"是否确认删除该 AI 笔记",cancelBtnText:"暂不删除",confirmBtnText:"确认删除",onConfirm:async()=>{if(!!l.noteId)try{let e=await (0,dR.HV)({noteId:l.noteId});if(0===e.statusCode)r(l.noteId),dD.K.sendLog("pcAiNoteDeleteResult",(0,o._)({result_type:"success"},a));else throw Error("删除失败")}catch(e){ee.F.info("删除失败"),dD.K.sendLog("pcAiNoteDeleteResult",(0,o._)({result_type:"fail"},a))}}})},y=(0,tp.x)(()=>{var e,t,n,r,i,o,a,s,d,u,c,v,m,f;dD.K.sendLog("aiNoteButtonShow",{enter_from:(0,e1.yW)(),enter_method:"personal_homepage",note_id:l.noteId,group_id:null===(e=l.relatedItemInfo)||void 0===e?void 0:e.awemeId,author_id:null===(n=l.relatedItemInfo)||void 0===n?void 0:null===(t=n.authorInfo)||void 0===t?void 0:t.uid,player_display_mode:(0,tn.Ok)()}),tH.sendLog("collectionCoverShow",{tab_name:dU,enter_from:(0,e1.yW)(),note_id:l.noteId,author_id:null===(i=l.relatedItemInfo)||void 0===i?void 0:null===(r=i.authorInfo)||void 0===r?void 0:r.uid,group_id:null===(o=l.relatedItemInfo)||void 0===o?void 0:o.awemeId,from_xigua:(null===(a=l.relatedItemInfo)||void 0===a?void 0:a.awemeType)===nK.e.XgVideo?1:0,aweme_type:null===(s=l.relatedItemInfo)||void 0===s?void 0:s.awemeType,enter_method:"click_tab",is_co_publish:Number(null===(c=l.relatedItemInfo)||void 0===c?void 0:null===(u=c.cooperationInfo)||void 0===u?void 0:null===(d=u.cooperationCreators)||void 0===d?void 0:d.length)>1?1:0,co_publish_author_list:null===(f=l.relatedItemInfo)||void 0===f?void 0:null===(m=f.cooperationInfo)||void 0===m?void 0:null===(v=m.cooperationCreators)||void 0===v?void 0:v.filter(e=>e.roleId!==Y.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)})});return(0,a.jsxs)("div",{ref:y,className:dA.aiNoteCardWrapper,onClick:()=>{var e,t,r,o,a,s,d,u;n(),dD.K.sendLog("aiNoteButtonEnter",{enter_from:(0,e1.yW)(),enter_method:"personal_homepage",note_id:l.noteId,group_id:null===(e=l.relatedItemInfo)||void 0===e?void 0:e.awemeId,author_id:null===(r=l.relatedItemInfo)||void 0===r?void 0:null===(t=r.authorInfo)||void 0===t?void 0:t.uid,player_display_mode:(0,tn.Ok)()}),tH.sendLog("collectionCoverClick",{tab_name:dU,note_id:l.noteId,author_id:null===(a=l.relatedItemInfo)||void 0===a?void 0:null===(o=a.authorInfo)||void 0===o?void 0:o.uid,group_id:null===(s=l.relatedItemInfo)||void 0===s?void 0:s.awemeId,enter_from:(0,e1.yW)(),from_xigua:(null===(d=l.relatedItemInfo)||void 0===d?void 0:d.awemeType)===nK.e.XgVideo?1:0,aweme_type:null===(u=l.relatedItemInfo)||void 0===u?void 0:u.awemeType,rank:i})},children:[(0,a.jsxs)("div",{className:dA.topContent,children:[(0,a.jsx)("div",{className:dA.title,children:h}),(0,a.jsx)("div",{className:dA.description,children:p}),(0,a.jsxs)("div",{className:dA.moreInfo,children:[(0,a.jsx)("div",{className:dA.date,children:c?K()(1e3*Number(c)).format("YYYY年MM月DD日 \xb7 HH:mm"):""}),(0,a.jsx)(R.Dropdown,{trigger:"custom",visible:x,onClickOutSide:e=>{e.stopPropagation(),w(!1)},position:"bottomLeft",stopPropagation:!0,render:(0,a.jsx)(R.Dropdown.Menu,{children:(0,a.jsx)(R.Dropdown.Item,{onClick:C,className:dA.dropdownMenuItem,disabled:f,children:"删除"})}),children:(0,a.jsx)("div",{className:dA.moreIconContainer,onClick:e=>{e.stopPropagation(),w(!0)},children:(0,a.jsx)(ep.z,{svg:(0,a.jsx)(dP.Z,{}),className:dA.moreIcon})})})]})]}),(0,a.jsxs)("div",{className:dA.bottomContent,children:[(0,a.jsx)("img",{src:_,className:dA.videoImage}),(0,a.jsx)("div",{className:dA.videoTitle,children:g})]})]})},dH=e=>{let{abTestData:t}=e,[l,n]=(0,s.useState)(1),[r,i]=(0,s.useState)([]),o=(0,s.useMemo)(()=>r.map(e=>e.relatedItemInfo),[r]),a=e=>e.filter(e=>!!e.relatedItemInfo);return{setAiNoteList:i,aiNoteAwemeList:o,fetchMoreData:async()=>{try{var e;let r=await (0,dR.yu)({offset:(10*(l-1)).toString(),count:"10",filter_draft:(null==t?void 0:t.aiNoteV2)===1||(null==t?void 0:t.aiNoteV2)===2});if(!r)return{statusCode:-1,data:[],hasMore:!1};if(0!==r.statusCode)return{statusCode:r.statusCode||-1,data:[],hasMore:!1};return r.hasMore&&n(l+1),{statusCode:0,data:a(r.aiNoteList||[]),hasMore:null!==(e=r.hasMore)&&void 0!==e&&e}}catch(e){return{statusCode:-1,data:[],hasMore:!1}}},dataFilter:a}};var dW="iERlj6yb";let dz=()=>(0,a.jsxs)(R.Skeleton,{className:dW,active:!0,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(R.Skeleton.Title,{}),(0,a.jsx)(R.Skeleton.Paragraph,{rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(R.Skeleton.Image,{}),(0,a.jsx)(R.Skeleton.Title,{})]})]}),dZ=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:n,setAwemeInfoList:r,aiNoteAwemeList:i,scrollRef:o,modalVideoIndex:a,additionalDistance:d=-60}=e,[u,c]=(0,s.useState)(!1),v=(0,s.useRef)(t),m=(0,s.useRef)(-1),f=(0,s.useRef)(a);return(0,s.useEffect)(()=>{f.current=a},[a]),(0,s.useEffect)(()=>()=>{var e;if(f.current===v.current)return;let t=window.innerWidth<=r5.I?3:6,l=e=>Math.floor(e/t);if(l(f.current)!==l(v.current))null===(e=o.current)||void 0===e||e.locateSelectVideo(v.current<=m.current?v.current:m.current,d)},[]),(0,s.useEffect)(()=>{(null==n?void 0:n.length)>a&&-1===t&&l(a||0)},[n]),(0,s.useEffect)(()=>{r(()=>(m.current=(null==i?void 0:i.length)-1,i))},[i]),{isTabFeed:u}},d$=(0,ia.ZP)(()=>Promise.all([l.e("66135"),l.e("25244"),l.e("1709"),l.e("46362"),l.e("67239"),l.e("923"),l.e("42562"),l.e("41442"),l.e("58195"),l.e("264"),l.e("31689"),l.e("29977"),l.e("59765"),l.e("27713"),l.e("34456"),l.e("27123"),l.e("12433"),l.e("55661"),l.e("65386"),l.e("47983"),l.e("6593"),l.e("81151"),l.e("50645"),l.e("41125"),l.e("90597")]).then(l.bind(l,27091)),{ssr:!1}),dK=(0,s.forwardRef)((e,t)=>{var{scrollRef:l}=e,n=(0,ir._)(e,["scrollRef"]);let r=e=>{var t;let n=(null===(t=l.current)||void 0===t?void 0:t.getDataList())||[];return e.map(e=>{if("relatedItemInfo"in e)return e;let t=n.find(t=>{var l;return(null===(l=t.relatedItemInfo)||void 0===l?void 0:l.awemeId)===e.awemeId});return t?(0,M._)((0,o._)({},t),{relatedItemInfo:e}):null}).filter(Boolean)};return(0,s.useImperativeHandle)(t,()=>l.current?(0,M._)((0,o._)({},l.current),{setScrollData:e=>{var t;let n=r(e.dataList);null===(t=l.current)||void 0===t||t.setScrollData((0,M._)((0,o._)({},e),{dataList:n}))}}):{},[l]),(0,a.jsx)(d$,(0,o._)({scrollRef:t},n))}),dG=e=>{var t,l,n,r,i,o,d,u,c;let{userInfo:v}=e,m=null!==(d=(0,z._)())&&void 0!==d?d:{},{setAiNoteList:f,aiNoteAwemeList:h,fetchMoreData:p,dataFilter:g}=dH({abTestData:m}),_=(0,l9.m)(),x=(0,s.useRef)(null),w=(0,l8.o)(null==v?void 0:v.secUid),C=null!==(u=(0,eF.useUserInfoContext)())&&void 0!==u?u:{},{isSelf:y}=null!==(c=(0,s.useContext)(Z))&&void 0!==c?c:{},[I,b]=(0,s.useState)(-1),j=null==C?void 0:null===(l=C.userInfo)||void 0===l?void 0:null===(t=l.info)||void 0===t?void 0:t.uid,k=(0,s.useRef)(null),N=(0,s.useRef)(),[S,E]=(0,s.useState)(!1),L=(e,t)=>{if(!!e)N.current=e,b(t),E(!0)},T=e=>{if(!x.current)return;let t=x.current.getDataList().filter(t=>t.noteId!==e);x.current.setScrollData({dataList:t}),ee.F.info("删除成功")};return(0,a.jsxs)("div",{className:dL,children:[(0,a.jsx)(lM.Z,{ref:x,scrollContainerEl:_,renderItem:(e,t)=>(0,a.jsx)(dO,{aiNote:e,onClick:()=>L(e.relatedItemInfo,t),onDeleteSuccess:T,index:t},e.noteId),itemClassName:dM,dataFilter:g,fetchMoreData:p,panelNoData:(0,a.jsx)(B.H,{className:dT,needRenderIconInSSR:!0,icon:(0,a.jsx)(l$.Z,{}),title:"暂无内容",desc:"暂无 AI 笔记"}),needSkelton:!0,skeletonNum:16,retryTimes:5,SkeletonComponent:dz,setDataList:f}),S&&(0,a.jsx)(dK,{defaultOpenedCardType:"ai",defaultOpenedCardExtraProps:{tab:dE.X.Note,aiNoteEnterMethod:"personal_homepage",awemeId:null===(n=N.current)||void 0===n?void 0:n.awemeId},modalEnterFrom:"aiNote",uid:w,userContext:C,abtestData:m,isSelf:y,anyHooks:dZ,originAwemeInfo:N.current,aiNoteAwemeList:h,scrollRef:x,ref:k,modalVideoIndex:I,additionalDistance:-150,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:(null===(i=N.current)||void 0===i?void 0:null===(r=i.authorInfo)||void 0===r?void 0:r.uid)!==j,dataAnalysis:!1,deleteSelfPost:y},logParams:{tab_name:"ai_note"},close:()=>{b(-1),E(!1)},shortCutFilteredList:[null===(o=lj.getShortcut().dislike)||void 0===o?void 0:o.key],scene:"ai_note"})]})},dY=(0,s.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,M._)((0,o._)({width:15,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 15.473a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15zm.034-12c-.956 0-1.842.367-2.45 1.076-.076.089-.162.22-.243.36-.209.357-.056.805.308.999l.027.014c.396.211.842-.003 1.114-.36.3-.393.715-.588 1.244-.588.787 0 1.338.327 1.338.992 0 .536-.427.94-.91 1.371l-.03.028c-.517.469-1.05.953-1.277 1.857-.01.04-.02.088-.028.14-.077.464.31.86.779.86.423 0 .753-.33.858-.74a.984.984 0 0 1 .027-.092c.185-.512.535-.848.885-1.152.676-.6 1.324-1.227 1.324-2.272 0-1.619-1.366-2.493-2.966-2.493zm-.034 7.5a1.125 1.125 0 1 0 0 2.25 1.125 1.125 0 0 0 0-2.25z",fill:"#2F3035",fillOpacity:".4"})}))),dq={[Y.HeaderType.DEFAULT]:60,[Y.HeaderType.HEADER_VARIANT_66]:66,[Y.HeaderType.HEADER_VARIANT_68]:68,[Y.HeaderType.HEADER_VARIANT_72]:72},dQ=()=>{let e=document.documentElement.getAttribute("header-variant");return e===Y.HeaderType.HEADER_VARIANT_66?66:e===Y.HeaderType.HEADER_VARIANT_72?72:56},dX=()=>{let[e,t]=(0,s.useState)(dQ());return(0,s.useEffect)(()=>{60===e&&t(dq[Y.HeaderType.HEADER_VARIANT_68])},[e]),(0,s.useEffect)(()=>{let e=W.listen(W.EVENT.headerHeightChange,e=>{let{header_type:l}=e;t(dq[l])});return()=>{null==e||e()}},[]),{topNavHeight:e}};var dJ=l("132607"),d0=l("401156"),d1=l("434144"),d2=l("680222"),d3=l("330871"),d5=l("55052"),d6=l("328155"),d7=l("891952");let d4=e=>"record"===e?"record_card":e,d8=(e,t)=>{var l,n,r,i,a,s;let u=null==e?void 0:e.uid;if(!u)return;let c={post:null==e?void 0:e.awemeCount,like:null==e?void 0:e.favoritingCount,favorite_collection:null==e?void 0:null===(r=e.userCollectCount)||void 0===r?void 0:null===(n=r.collectCountList)||void 0===n?void 0:null===(l=n[0])||void 0===l?void 0:l.collectCount,watch_later:null==e?void 0:e.watchLaterCount},{query:v={}}=d.parseUrl(location.href),m=d4(null!==(a=null!==(i=v.showTab)&&void 0!==i?i:(0,H.Rs)("showTab"))&&void 0!==a?a:"post"),f=c[m],h={};["enter_from","enter_method","from_gid","is_full_screen","tab_name","list_name","is_search","nt","event_page","enter_from_merge","fir_previous_page","is_personal_panel_video","from_tab_name"].forEach(e=>{var t;return h[e]=null!==(t=v[e])&&void 0!==t?t:(0,H.Rs)(e)}),lp.sendLog(t?"enterPersonalHomepage":"enterPersonalDetail",(0,M._)((0,o._)({},h),{to_user_id:u,is_private:Number(!t&&(null==e?void 0:e.secret)),tab_name:m,video_num:f,relation:!t&&(null==e?void 0:e.followStatus),is_personal_panel_video:Number((null!==(s=v.is_personal_panel_video)&&void 0!==s?s:(0,H.Rs)("is_personal_panel_video"))||0)}))},d9=e=>{let{isSelf:t,userInfo:l,tab:n}=e,r=(0,s.useRef)(!0);(0,s.useEffect)(()=>{if(!!t){if(r.current){r.current=!1;return}d8(l,t)}},[t,null==l?void 0:l.uid,n])};var ue=l("905158"),ut=l("428647"),ul=new eP.h({personalPageWidgetAddShow:{eventName:"personal_page_widget_add_show",params:{}},personalPageWidgetAddClick:{eventName:"personal_page_widget_add_click",params:{}},personalPageWidgetAddClose:{eventName:"personal_page_widget_add_close",params:{}}}),un="sLcwUsCn",ur="g1QhT34M",ui="onUzzIYV",uo="SX_Ex9WO",ua="QtdZw4bx",us="M2OXwAe9";let ud=e=>{let{showTab:t}=e,[l,n]=(0,s.useState)(!1),r=()=>{n(!0),(0,ii.qQ)(io.LocalStorageKeys.DesktopSelfPageWidgetLastShowTime,Date.now());let e=Number((0,ii.$o)(io.LocalStorageKeys.DesktopSelfPageWidgetShowNum))||0;(0,ii.qQ)(io.LocalStorageKeys.DesktopSelfPageWidgetShowNum,e+1)},i=async()=>{if(l||!t||!["like","favorite_collection","record"].includes(t))return;let e=Number((0,ii.$o)(io.LocalStorageKeys.DesktopSelfPageWidgetLastShowTime))||0;if((Number((0,ii.$o)(io.LocalStorageKeys.DesktopSelfPageWidgetShowNum))||0)>=3||Date.now()-e<6048e5)return;let{data:n}=await ow.invoke("canSetDesktopSelfPageWidget"),{data:i}=await ow.invoke("hasSetDesktopSelfPageWidget");!i&&n&&r()};(0,s.useEffect)(()=>{i()},[t]);let o=(0,s.useCallback)(()=>{n(!1),ul.sendLog("personalPageWidgetAddClose")},[]),d=(0,s.useCallback)(()=>{ul.sendLog("personalPageWidgetAddClick"),ow.invoke("setDesktopSelfPageWidgetState",!0).then(e=>{(null==e?void 0:e.code)===ue.jK.Success?(n(!1),R.Toast.info("添加成功")):R.Toast.info("添加失败")})},[]);return((0,s.useEffect)(()=>{l&&ul.sendLog("personalPageWidgetAddShow")},[l]),l)?(0,a.jsxs)("div",{className:un,children:[(0,a.jsx)("div",{className:ui}),(0,a.jsx)("div",{className:us,onClick:o,children:(0,a.jsx)(ep.z,{svg:(0,a.jsx)(ut.Z,{style:{fontSize:"16px"}})})}),(0,a.jsxs)("div",{className:uo,children:[(0,a.jsx)("h2",{children:"添加「喜欢/收藏/历史」到桌面"}),(0,a.jsx)("p",{className:ua,children:"添加后，可在桌面快速复访内容"}),(0,a.jsx)(R.Button,{type:"primary",theme:"solid",className:ur,onClick:d,children:"立即添加"})]})]}):(0,a.jsx)(a.Fragment,{})},uu=e=>{let{toUid:t,fromUid:l,isSelf:n,isLogin:r,recordParams:i,abTestData:o}=e,a=(0,s.useRef)({}),d=(0,s.useMemo)(()=>`${l}_${t}`,[l,t]),u=async()=>{if(!!i)try{let e=await (0,i_.reportUserVisitedRecord)({recordParams:i});(null==e?void 0:e.statusCode)===0?a.current[d]=!0:a.current[d]=!1}catch(e){a.current[d]=!1}};(0,s.useEffect)(()=>{!a.current[d]&&!n&&r&&(a.current[d]=!0,u())},[n,r,d,i,o])},uc=e=>{let{uid:t,abTestData:l,isSelf:n}=e,r=(0,s.useRef)({}),[i,o]=(0,s.useState)({freqVisitPerm:!0,webcastRecords:!0}),a=async()=>{if(r.current[t])return;let{data:e,statusCode:l}=await (0,oC.s$)();0===l&&(o(e),r.current[t]=!0)};return(0,s.useEffect)(()=>{n&&t&&a()},[n,t]),i},uv=(e,t)=>{let l=["post","like","recommend","favorite_collection","record","watch_later","my_appointment"];return lo({abTestData:t})&&l.push("ai_note"),e?l:["post","like","recommend"]};var um=e=>{var t,l,n,r,i,u,c,v,m,h,p,_,x,w,C,y,I,b,j,k,N,S,E,L,T;let{userInfo:$,showTab:K,showSubTab:G,logId:Y,defaultMixRes:q,defaultSeriesRes:Q,defaultPostRes:X,lastdate:J,isClient:ee,osInfo:et,isHideImpInfo:el}=e,{uid:en,secret:er,followStatus:ei}=$||{},{isSelf:eo=!1}=null!==(h=(0,s.useContext)(Z))&&void 0!==h?h:{},ea=(0,s.useRef)(null),es=null!==(p=(0,z._)())&&void 0!==p?p:{},{isMobile:ed,isiPad:eu}=(0,g.X)(),ec=uc({isSelf:eo,uid:en,abTestData:es}),{userInfo:ev,dispatch:em}=null!==(_=(0,eF.useUserInfoContext)())&&void 0!==_?_:{},ef=uv(eo,es).includes(K)?K:"post",[eh,ep]=(0,s.useState)(ef),[eg,e_]=(0,s.useState)(G||tD.VIDEO),[ex,ew]=(0,s.useState)(!1),[eC,ey]=(0,s.useState)(!1),[eI,eb]=(0,s.useState)(0),ej=(0,s.useRef)(),[ek,eN]=(0,s.useState)(!1);d9({isSelf:eo,userInfo:$,tab:eh}),(0,s.useEffect)(()=>{var e;null===(e=ej.current)||void 0===e||e.notifySubscribers({})},[ex]);let{getSearchRes:eS,exitSearch:eE,changeKeyword:eL,homeText:eT,keyword:eM,isAllowSearch:eR}=aC({uid:en,currentTab:eh,isSelf:eo,showSearchBar:!0,abTestData:es,onChangeKeyword:()=>ew(!1)}),{topNavHeight:eP}=dX();uu({fromUid:null==ev?void 0:null===(t=ev.info)||void 0===t?void 0:t.uid,toUid:en,isSelf:eo,isLogin:null==ev?void 0:ev.isLogin,recordParams:null==$?void 0:$.profileRecordParams,abTestData:es});let eD=(0,s.useCallback)((e,t)=>{var l,n,r,i;let{url:a,query:s}=d.parseUrl(null===(l=location)||void 0===l?void 0:l.href);s.showTab=e,delete s.showSubTab,null===(i=window)||void 0===i||null===(r=i.history)||void 0===r||null===(n=r.replaceState)||void 0===n||n.call(r,null,"",d.stringifyUrl({url:a,query:s})),(0,H.no)((0,M._)((0,o._)({},d.parse((0,H.ht)())||{}),{showTab:e})),ep(e),eE(),ew(!1)},[eE]),eA=(0,s.useCallback)(e=>{var t,l,n,r;let{url:i,query:o}=d.parseUrl(null===(t=location)||void 0===t?void 0:t.href);o.showSubTab=e,null===(r=window)||void 0===r||null===(n=r.history)||void 0===n||null===(l=n.replaceState)||void 0===l||l.call(n,null,"",d.stringifyUrl({url:i,query:o})),e_(e)},[]);(0,s.useEffect)(()=>W.listen(W.EVENT.userChangeTab,e=>{let{tab:t,subTab:l,source:n,awemeId:r,isPersonalPanelVideo:i,enterMethod:a}=e;(0,H.no)((0,o._)({},d.parse((0,H.ht)())||{},r?{aweme_id:r}:{},i?{is_personal_panel_video:i}:{},a?{enter_method:a}:{})),eD(t,n),l&&eA(l),r&&W.emit(W.EVENT.openUserModal,{awemeId:r})}),[eD,es]);let[eV,eB]=(0,s.useState)(ee);(0,s.useEffect)(()=>{var e,t;eB(["MAIN_WINDOW","MULTI_WINDOW"].includes(null===(t=window)||void 0===t?void 0:null===(e=t.TTE_ENV)||void 0===e?void 0:e.windowName))},[ee]);let eU=null!==(x=(0,l8.o)(null==$?void 0:$.secUid))&&void 0!==x?x:"",[eO,eH]=(0,s.useState)(!1),eW=tW($);(0,s.useEffect)(()=>{eW&&eo&&tq({isAccountBan:!0,isSelf:eo})},[eW,eo]),(0,s.useEffect)(()=>()=>{n3(!1)},[]),(0,s.useEffect)(()=>{if(ed||eu){let e=()=>{var e;if(!!ea.current)(null===(e=ea.current)||void 0===e?void 0:e.clientWidth)<846?ey(!0):ey(!1)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}},[ed,eu]);let ez=(0,l9.m)(),eZ=`${eh}_${eg}`;(0,F._)({scene:eZ,scrollListenerEl:ez,enableRecordFrameTime:!0,enableRecordLongTask:!0,crashFPSThreshold:24,slideEndDelay:300,logParams:{enter_from:eo?"personal_homepage":"others_homepage",enter_from_merge:eo?"personal_homepage":"others_homepage",tab_name:eh,sub_tab_name:eg,enter_method:(0,H.Rs)("enter_method"),is_personal_panel_video:Number((0,H.Rs)("is_personal_panel_video"))||0},abTestData:es});let e$=(0,s.useMemo)(()=>{if(eo)return!(["my_appointment","record","recommend","ai_note"].includes(eh)||"post"===eh&&[tD.SERIES].includes(eg||"")||"favorite_collection"===eh&&[tM.MUSIC].includes(eg||""))&&!0;return!1},[eo,eh,eg]),eK=(0,s.useMemo)(()=>!!eo&&"ai_note"===eh,[eo,eh]);(0,s.useEffect)(()=>{if(eN(!1),e$){let e=eg;("watch_later"===eh||"like"===eh)&&(e=tD.VIDEO),V.logInstance.sendLog("batchManageShow",{tab_name:eh,sub_tab_name:e})}},[eh,eg]);let eG=eM&&eR;return $.isBlock?(0,a.jsxs)("div",{className:f()(dh.frameContainer,dh.notMargin,dh.videoPerf),children:[(null==es?void 0:null===(w=es.userUiUpdate)||void 0===w?void 0:w.type)?(0,a.jsx)(df,{headImageInfo:null==$?void 0:null===(y=$.coverAndHeadImageInfo)||void 0===y?void 0:null===(C=y.profileCoverList)||void 0===C?void 0:C[0],abTestData:es,isSelf:eo}):(0,a.jsx)("div",{className:dh.topBackground}),(0,a.jsx)(t3,{userInfo:$,logId:Y,isHideImpInfo:el}),(0,a.jsx)(B.H,{title:"你已经拉黑对方，无法查看其作品",icon:(0,a.jsx)(U.Z,{}),className:dh.errorContent}),";"]}):$.isBlocked?(0,a.jsxs)("div",{className:f()(dh.frameContainer,dh.notMargin,dh.videoPerf),children:[(null==es?void 0:null===(I=es.userUiUpdate)||void 0===I?void 0:I.type)?(0,a.jsx)(df,{headImageInfo:null==$?void 0:null===(j=$.coverAndHeadImageInfo)||void 0===j?void 0:null===(b=j.profileCoverList)||void 0===b?void 0:b[0],abTestData:es,isSelf:eo}):(0,a.jsx)("div",{className:dh.topBackground}),(0,a.jsx)(t3,{userInfo:$,logId:Y,isHideImpInfo:el}),(0,a.jsx)(B.H,{title:"由于对方的隐私设置，你无法查看TA的作品",icon:(0,a.jsx)(U.Z,{}),className:dh.errorContent}),";"]}):!eo&&er&&1!==ei&&2!==ei?(0,a.jsxs)("div",{className:f()(dh.frameContainer,dh.notMargin,dh.videoPerf),children:[(null==es?void 0:null===(k=es.userUiUpdate)||void 0===k?void 0:k.type)?(0,a.jsx)(df,{headImageInfo:null==$?void 0:null===(S=$.coverAndHeadImageInfo)||void 0===S?void 0:null===(N=S.profileCoverList)||void 0===N?void 0:N[0],abTestData:es,isSelf:eo}):(0,a.jsx)("div",{className:dh.topBackground}),(0,a.jsx)(t3,{userInfo:$,logId:Y,isHideImpInfo:el}),(0,a.jsx)(B.H,{title:"私密账号",desc:"发起关注请求，通过后即可查看该账号内容",icon:(0,a.jsx)(U.Z,{}),className:dh.errorContent})]}):eW&&!eo?(0,a.jsxs)("div",{className:f()(dh.frameContainer,dh.notMargin,dh.videoPerf),children:[(null==es?void 0:null===(E=es.userUiUpdate)||void 0===E?void 0:E.type)?(0,a.jsx)(df,{headImageInfo:null==$?void 0:null===(T=$.coverAndHeadImageInfo)||void 0===T?void 0:null===(L=T.profileCoverList)||void 0===L?void 0:L[0],abTestData:es,isSelf:eo}):(0,a.jsx)("div",{className:dh.topBackground}),(0,a.jsx)(t3,{userInfo:$,logId:Y,isHideImpInfo:el}),(0,a.jsxs)("div",{className:f()(dh.banContainer,dh.videoPerf),children:[(0,a.jsx)(B.H,{icon:(0,a.jsx)(O.Z,{}),title:"账号已被封禁",className:dh.errorContent}),(0,a.jsxs)("div",{className:dh.desc,children:[(0,a.jsx)("span",{className:dh.text,children:"由于违反"}),(0,a.jsx)(P.a,{className:dh.link,href:tP,target:"_blank",rel:"noopener noreferrer",children:"《抖音社区自律公约》"}),(0,a.jsx)("span",{className:dh.text,children:"的相关规定，该账号已被封禁"})]})]})]}):(0,a.jsxs)("div",{className:f()(dh.frameContainer,dh.hasNavTab,dh.notMargin,dh.videoPerf,{[dh.fixedHeaderPadding]:eV}),children:[!ex&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(df,{headImageInfo:null==$?void 0:null===(n=$.coverAndHeadImageInfo)||void 0===n?void 0:null===(l=n.profileCoverList)||void 0===l?void 0:l[0],abTestData:es,isSelf:eo}),(0,a.jsx)(t3,{userInfo:$,logId:Y,lastdate:J,isHideImpInfo:el})]}),(0,a.jsx)("div",{className:dh.container,children:(0,a.jsx)("div",{ref:ea,className:f()(dh.listBoxContainer,dh.videoPerf),children:(0,a.jsx)(dp,{userInfo:$,children:(0,a.jsxs)(D.W,{ref:ej,scrollListener:ez,children:[(0,a.jsx)(ld,{userInfo:$,currentTab:eh,setCurrentTab:e=>{eD(e,"user_self"),n3()},topNavHeight:ex?200:eP,children:(0,a.jsxs)("div",{className:dh.tabinner,children:[e$&&(0,a.jsx)("div",{className:dh.batchBtn,onClick:()=>{null==eN||eN(!ek);let e=eg;("watch_later"===eh||"like"===eh)&&(e=tD.VIDEO),!ek&&V.logInstance.sendLog("batchManageClick",{tab_name:eh,sub_tab_name:e})},children:ek?"退出管理":"批量管理"}),eK&&(0,a.jsx)(R.Tooltip,{style:{width:240},showArrow:!1,position:"bottom",content:"笔记状态与视频绑定，若视频下线，或作者设置为仅自己可见，笔记也将下线。为避免笔记丢失，建议您及时自行保存或备份笔记内容。",children:(0,a.jsx)("div",{className:dh.tipsIcon,children:(0,a.jsx)(A.Z,{src:dY,width:15,height:16,viewBox:"0 0 15 16"})})})]})}),(0,a.jsxs)("div",{className:f()(dh.listContainer,dh.videoPerf),children:["post"===eh&&!eG&&(0,a.jsx)(ol,{topNavHeight:eP,currentTab:eh,userInfo:$,defaultPostRes:X,topOffset:eI,setHideUserInfo:ew,hideUserInfo:ex,abTestData:es,currentSubTab:eg,onSubTabChange:eA,defaultMixRes:q,defaultSeriesRes:Q,showSearchBar:!eC&&eR,searchBarSlot:(0,a.jsx)(ak,{changeKeyword:eL,exitSearch:eE,keyword:eM,currentTab:eh,showNewUi:!!(null==es?void 0:null===(r=es.userUiUpdate)||void 0===r?void 0:r.type),isListSelectable:ek}),isListSelectable:ek,setIsListSelectable:eN}),"recommend"===eh&&!eG&&(0,a.jsx)(dS,{topNavHeight:eP,currentTab:eh,userInfo:$,abTestData:es,showSearchBar:!eC&&eR,searchBarSlot:(0,a.jsx)(ak,{changeKeyword:eL,exitSearch:eE,keyword:eM,currentTab:eh,showNewUi:!!(null==es?void 0:null===(i=es.userUiUpdate)||void 0===i?void 0:i.type),isListSelectable:ek}),isListSelectable:ek,setIsListSelectable:eN}),"like"===eh&&!eG&&(0,a.jsx)(op,{abTestData:es,topNavHeight:eP,currentTab:eh,userInfo:$,showSearchBar:!eC&&eR,searchBarSlot:(0,a.jsx)(ak,{changeKeyword:eL,exitSearch:eE,keyword:eM,currentTab:eh,showNewUi:!!(null==es?void 0:null===(u=es.userUiUpdate)||void 0===u?void 0:u.type),isListSelectable:ek}),isListSelectable:ek,setIsListSelectable:eN}),"favorite_collection"===eh&&!eG&&(0,a.jsx)(dc,{topNavHeight:eP,currentTab:eh,currentSubTab:eg,onSubTabChange:eA,userInfo:$,abTestData:es,showSearchBar:!eC&&eR,searchBarSlot:(0,a.jsx)(ak,{changeKeyword:eL,exitSearch:eE,keyword:eM,currentTab:eh,showNewUi:!!(null==es?void 0:null===(c=es.userUiUpdate)||void 0===c?void 0:c.type),isListSelectable:ek}),isListSelectable:ek,setIsListSelectable:eN}),"record"===eh&&!eG&&(0,a.jsx)(ar,{osInfo:et,currentTab:eh,userInfo:$,topNavHeight:eP,currentSubTab:eg,onSubTabChange:eA,abTestData:es,userSettings:ec,showSearchBar:!eC&&eR,searchBarSlot:(0,a.jsx)(ak,{changeKeyword:eL,exitSearch:eE,keyword:eM,currentTab:eh,showNewUi:!!(null==es?void 0:null===(v=es.userUiUpdate)||void 0===v?void 0:v.type),isListSelectable:ek})}),"watch_later"===eh&&!eG&&(0,a.jsx)(ac,{osInfo:et,currentTab:eh,userInfo:$,topNavHeight:eP,abtest:es,isListSelectable:ek,setIsListSelectable:eN}),"my_appointment"===eh&&!eG&&(0,a.jsx)(dC,{osInfo:et,currentTab:eh,userInfo:$,topNavHeight:eP,abTestData:es}),"ai_note"===eh&&lo({abTestData:es})&&!eG&&(0,a.jsx)(dG,{userInfo:$}),eG&&(0,a.jsx)(i7,{uid:eU,currentTab:eh,getSearchRes:eS,homeText:eT,keyword:eM,setCurrentTab:ep,exitSearch:eE,topNavHeight:eP,abTestData:es,showSearchBar:!eC&&eR,searchBarSlot:(0,a.jsx)(ak,{changeKeyword:eL,exitSearch:eE,keyword:eM,currentTab:eh,showNewUi:!!(null==es?void 0:null===(m=es.userUiUpdate)||void 0===m?void 0:m.type),setIsListSelectable:eN}),isListSelectable:ek,setIsListSelectable:eN})]})]})})})}),eo&&(0,a.jsx)(ud,{showTab:eh})]})},uf=l("492652");function uh(){let{Context:e}=uf,{userInfo:t}=(0,eF.useUserInfoContext)()||{},{isSpider:l,info:n,isLogin:r,statusCode:i}=t||{};return{isSpider:l,userInfo:t,userInfoDetail:n,isLogin:r,statusCode:i}}var up={container:"yL0rlH8o",leftContainer:"OvA7uwvV",trustLoginSwitch:"RtUtx1xk",userInfoWrapper:"aMb6lThF",recommendWrapper:"Cl5LW1Yb",collectionsWrapper:"YypU_NIM",leftPlaceHolderRight:"jb8cbeCI",leftPlaceHolderLeft:"QCWFPWA5",rightPlaceHolderRight:"bzFzTQSf",rightContainer:"JbjTgcA7",errorRight:"HZ6i49GN",errorWrapper:"LImZ3ePd",errorContent:"gtHUe04I",notFound:"mPwupa2U",loading:"tYzDFqHh",noPadding:"X2DWT9G6",hasNavTab:"ssDTxJaC"};function ug(e){var t;let{isClient:l,isHideImpInfo:n,userInfo:r,osInfo:i,queryParam:o,otherUserLogId:d,defaultPostRes:u,defaultMixRes:c,defaultSeriesRes:v}=e,{isSpider:m}=uh();t=(0,z._)();let f=(0,s.useMemo)(()=>{var e,t,l,n;return m?null==u?void 0:null===(n=u.data)||void 0===n?void 0:null===(l=n.map)||void 0===l?void 0:null===(t=l.call(n,e=>null==e?void 0:e.createTime))||void 0===t?void 0:null===(e=t.sort((e,t)=>t-e))||void 0===e?void 0:e[0]:void 0},[null==u?void 0:u.data,m]);return(0,a.jsx)("div",{"data-e2e":"user-detail",id:"user_detail_element",className:up.container,"data-bytereplay-mask":"strict",children:(0,a.jsx)(um,{userInfo:r,showTab:null==o?void 0:o.showTab,showSubTab:null==o?void 0:o.showSubTab,logId:d,defaultPostRes:u,defaultMixRes:c,defaultSeriesRes:v,showSearchBar:!0,lastdate:f,isClient:l,isHideImpInfo:n,osInfo:i})})}let u_=()=>{let e=(0,es.DT)(),t=(0,tx.fV)(),l=(0,es.FJ)().awemePcClient;return{isClient:e,osInfo:t,clientVersion:null!=l?l:""}};function ux(e){let{user:t,queryUid:l}=e;return!t||!t.uid||t.secUid!==l}var uw=l("185248"),uC=l("497374"),uy=l("818538"),uI={frameContainer:"opWIeEzB",videoPerf:"fGtTV8Uh",isNewLogin:"x1Tlc0Bh",topBackground:"KFtVG3qj",loginGuide:"UItGz0hv",loginGuideTitle:"NExligT1",loginGuideDesc:"HrGY8lLZ",hasNavTab:"XakE3ZZr"},ub="OU84T_U8",uj="ybWDNpdE",uk="TspSdPlZ",uN="hLfqnCU1",uS="QETsO0PI",uE="lZXL9kpd",uL="FI9SXMlK",uT="NxE4Qu6p",uM="ftdFdNWf";function uR(){let e={title:"粉丝",count:"-",onclick:null},t={title:"关注",count:"-",onclick:null},l={title:"获赞",count:"-",onclick:null};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:ub,children:[(0,a.jsx)("div",{className:uj,children:(0,a.jsx)("div",{className:uk})}),(0,a.jsxs)("div",{className:uN,children:[(0,a.jsx)("h1",{className:uS,children:"未登录"}),(0,a.jsx)("div",{className:uE,children:[t,e,l].map((e,t)=>(0,a.jsxs)("div",{className:f()(uL),children:[(0,a.jsx)("p",{className:uT,children:e.title}),(0,a.jsx)("p",{className:uM,children:e.count})]},t))})]})]})})}var uP="aR7sC54G",uD="st6rifpn",uA="MLAFTEqr",uF="b1inrMin",uV="d3PFFx0E";let uB=e=>{let{abTestData:t}=e,l=[{title:"作品",key:"post"},{title:"推荐",key:"recommend"},{title:"喜欢",key:"like"},{title:"收藏",key:"favorite_collection"},{title:"观看历史",key:"record"},{title:"稍后再看",key:"watch_later"},{title:"我的预约",key:"my_appointment"},...lo({abTestData:t})?[{title:"AI 笔记",key:"ai_note"}]:[]];return(0,a.jsx)("div",{className:uA,children:l.map(e=>(0,a.jsx)("div",{className:f()(uF),children:(0,a.jsx)("span",{className:uV,children:e.title})},e.key))})};var uU=e=>{let{abTestData:t}=e;return(0,a.jsx)("div",{className:uP,children:(0,a.jsx)("div",{className:uD,children:(0,a.jsx)(uB,{abTestData:t})})})},uO=e=>{var t;let{isClient:l,abTestData:n}=e,r=(0,s.useCallback)(()=>void location.reload(),[]);return(0,ni.o)(()=>((0,uC.iV)()&&(0,uy.a)(),(0,Q.showAccountPage)({success:r,headerText:"登录后即可观看喜欢、收藏的视频",enterMethod:"personal_tab"}),()=>{(0,uy.a)(),W.emit(W.EVENT.hideModal),Q.loginPanelInfo.isShowingAccount=!1,Q.loginPanelInfo.isInAccountPage=!1}),[]),(0,a.jsxs)("div",{className:f()(uI.frameContainer,uI.hasNavTab,uI.videoPerf,{[uI.fixedHeaderPadding]:l,[uI.isNewLogin]:!0}),children:[!(null==n?void 0:null===(t=n.userUiUpdate)||void 0===t?void 0:t.type)&&(0,a.jsx)("div",{className:uI.topBackground}),(0,a.jsx)(uR,{}),(0,a.jsx)(uU,{abTestData:n})]})};function uH(e){let{isClient:t,abTestData:l}=e;return(0,a.jsx)("div",{"data-e2e":"user-detail",className:f()(up.container,up.noPadding,up.hasNavTab),children:(0,a.jsx)(uO,{isClient:t,abTestData:l})})}var uW=l("265482"),uz=(0,y.C)(e=>{var t,l,n;let{id:r}=(0,v.U)(),i="self"===r,{user:m,mix:y,series:j,post:k,status:N,isHideImpInfo:E=!1,isClient:L,osInfo:R,redirectFrom:P}=e||{},{isiPad:D,isMobile:A}=(0,g.X)();(0,c.C)(x.w3.components.user_page),(0,s.useEffect)(()=>{let e=new URL(window.location.href),t=e.searchParams.get("_sw")||"";t&&"unknown"!==t&&(e.searchParams.delete("_sw"),history.replaceState(null,"",e.toString()))},[]);let F=(0,u.a)(),V=null!==(t=(0,z._)())&&void 0!==t?t:{},{innerLink:B,tccConfig:U}=(0,I.K)(e=>{let{innerLink:t,tccConfig:l}=e;return{innerLink:t,tccConfig:l}}),O=(0,s.useMemo)(()=>(0,d.parse)(null==F?void 0:F.search),[null==F?void 0:F.search]);(0,s.useEffect)(()=>{let e=(0,d.parse)(location.search).showTab;"/user/self"!==location.pathname&&(!e||"post"===e)&&performance.mark("user_page_init")},[]),(0,s.useEffect)(()=>{try{navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",e=>{try{if("reload"===e.data.action){var t;window.location.reload(),lp.sendLog("userCacheInvalid",{message:null!==(t=e.data.reason)&&void 0!==t?t:""})}}catch(e){}})}catch(e){}},[]);let{isClient:$,osInfo:K}=function(e){let{isClient:t,clientVersion:l,osInfo:n}=e;return(0,s.useMemo)(()=>{if(void 0===t||void 0===l||void 0===n){let e=u_();return{isClient:e.isClient,clientVersion:e.clientVersion,osInfo:e.osInfo}}return{isClient:t,clientVersion:l,osInfo:n}},[t,l,n])}({isClient:L,osInfo:R}),{isSpider:G,userInfoDetail:Y,isLogin:q}=uh();i&&(r=null!==(l=null==Y?void 0:Y.secUid)&&void 0!==l?l:"");let{otherUserLogId:Q,isEmptyUser:X,isUserCanceled:J,statusCode:ee,isSelf:et,userInfo:el,setUserInfo:en}=function(e,t){let{isLogin:l,statusCode:n,userInfoDetail:r}=uh(),i=(0,l8.o)(t),o=(0,s.useMemo)(()=>(function(e){let{currentUser:t,isLogin:l,uid:n,otherInfo:r}=e,i={isEmptyUser:!1,isUserCanceled:!1,isSelf:!1,userInfo:{},statusCode:0};if(function(e){let{isLogin:t,queryUid:l,currentUid:n}=e;return!!t&&l===n}({isLogin:l,queryUid:n,currentUid:null==t?void 0:t.secUid}))i.userInfo=t,i.isSelf=!0,i.statusCode=0;else{let{user:e,statusCode:t}=r||{};ux({user:e,queryUid:n})&&(i.isEmptyUser=!0),i.isUserCanceled=!!(null==e?void 0:e.userCanceled),i.statusCode=t||0,i.userInfo=e,i.isSelf=!1}return i})({currentUser:r,isLogin:l,uid:i,otherInfo:e}),[i,r,l,e]),{userInfo:a,isEmptyUser:d,isUserCanceled:u,isSelf:c,statusCode:v}=o||{},[m,f]=(0,s.useState)(""),[h,p]=(0,s.useState)(a),[g,_]=(0,s.useState)(d),[x,C]=(0,s.useState)(u),[y,I]=(0,s.useState)(c),[b,j]=(0,s.useState)(v);(0,s.useEffect)(()=>{w.Le.setConfig(w.gI.UserProfileSelf,!!y)},[y]),(0,s.useEffect)(()=>{_(d),C(u),I(c),p(a),j(v)},[o]);let k=async()=>await (0,i_.fetchUserProfile)(i,null,void 0,!0)||{};return(0,s.useEffect)(()=>{if(void 0!==l&&(!1!==l||"self"!==i))(async()=>{if(l&&r&&i===(null==r?void 0:r.secUid))p(r),I(!0),j(n);else{let{user:e,statusCode:t,logPb:l}=await k(),n=()=>{var n;_(ux({user:e,queryUid:i})),C(!!(null==e?void 0:e.userCanceled)),j(t),p(e),f(null!==(n=null==l?void 0:l.impr_id)&&void 0!==n?n:""),I(!1)};try{(0,lv.unstable_batchedUpdates)(()=>{n()})}catch(e){n()}}})()},[r,o]),{otherUserLogId:m,isEmptyUser:g,isUserCanceled:x,statusCode:b,isSelf:y,userInfo:h,setUserInfo:p}}(m,i?null==Y?void 0:Y.secUid:void 0),er=(0,s.useCallback)(()=>{!i&&!et&&en(e=>{var t,l;let n=null===(t=w.Le.getConfig(w.gI.FollowStatusCache))||void 0===t?void 0:t[null==e?void 0:e.uid];return e.followStatus=null!==(l=null==n?void 0:n.followStatus)&&void 0!==l?l:e.followStatus,(0,o._)({},e)})},[et,en,i]);!function(e){let{isSelf:t,userInfo:l,isSelfPage:n,abTestData:r}=e;(0,ni.o)(()=>{let e=null==l?void 0:l.uid,n=e=>{(0,e1.TU)(e?"personal_homepage":"others_homepage")};e&&t?n(!0):e&&void 0!==t&&!t?n(!1):(0,e1.TU)("error_homepage")},[t,l]);let i=(0,s.useRef)(location.pathname);(0,s.useEffect)(()=>{if(!(null==l?void 0:l.uid))return;d8(l,t);let e=(0,H.Rs)("previous_page")||"",a=location.href,s={app_code_link:"app_code",web_code_link:"web_code"};if(!n)!async function(){let t=await (0,d0.Re)();lp.sendLog("pageView",(0,o._)({enter_from:(0,e1.yW)(),url:location.href,url_path:location.pathname,link_from:(0,ie.f)()?"pwa":s[e]||"",theme:(0,d1.bS)(aN.Q.getItem({sKey:io.CookieKeys.Theme})),from_push:aN.Q.getItem({sKey:io.CookieKeys.FromClientPush})?1:0,seo_vids:d2.t("seo_vids")||"",physical_screen_num:t.physical_screen_num,physical_screen_info:t.physical_screen_info,sidebar_status:(0,d3.GE)()},(0,d0.Wc)(d0.rh.PAGE_VIEW))),[dJ.AISearchPage.V1,dJ.AISearchPage.V3].includes(null==r?void 0:r.aiSearchPage)&&(lp.sendLog("aiSearchEntranceShow",{enter_from:(0,e1.yW)(),enter_from_merge:(0,e1.yW)()}),lp.sendLog("aiChatButtonShow",{enter_from:(0,e1.yW)(),ai_chat_button_position:"right_search"})),lp.sendLog("pageViewV2",(0,o._)({enter_from:(0,e1.yW)(),url:location.href,url_path:location.pathname,link_from:(0,ie.f)()?"pwa":s[e]||"",theme:(0,d1.bS)(aN.Q.getItem({sKey:io.CookieKeys.Theme})),from_push:aN.Q.getItem({sKey:io.CookieKeys.FromClientPush})?1:0,seo_vids:d2.t("seo_vids")||"",physical_screen_num:t.physical_screen_num,physical_screen_info:t.physical_screen_info},(0,d0.Wc)(d0.rh.PAGE_VIEW)))}(),(0,d5.vP)({key:location.pathname,event:(t,l,n)=>{let r=location.pathname,d=i.current,u=(0,d6.Nr)(r),c=(0,d6.Nr)(d),v=r!==d&&u&&c,m=u&&"page_visible_change"===n;if(l>0&&(0,e1.yW)()&&!v&&!m){var f,h,p,g,_,x;let r=(null===(f=window.EXPOSE_DATA)||void 0===f?void 0:f.landingPage)==="discover",i=(null===(h=window.EXPOSE_DATA)||void 0===h?void 0:h.landingPage)==="follow",d=r&&(null===(p=window.EXPOSE_DATA)||void 0===p?void 0:p.landingMode)!==2&&(null===(g=window.EXPOSE_DATA)||void 0===g?void 0:g.landingMode)!==3,u=null!==(x=null!==(_=(0,H.Rs)("enter_method"))&&void 0!==_?_:r||i?"default_landing":void 0)&&void 0!==x?x:"other";lp.sendLog("pageStayTime",(0,M._)((0,o._)({},(0,d0.Wc)(d0.rh.PAGE_VIEW)),{enter_from:"others_homepage",url:a,url_path:location.pathname,duration:l,is_visible:c?0:Number(t),link_from:(0,ie.f)()?"pwa":s[e]||"",sidebar_status:(0,d3.GE)(),reason:c?`exit_child_route_${n}`:n,is_recommend:"default_landing"===u?Number(d):void 0,is_small_window:(0,d7.A)()?"1":"0"}),!1)}i.current=location.pathname}})},[null==l?void 0:l.uid])}({userInfo:el,isSelf:et,isSelfPage:i,abTestData:V}),!function(e){let{isEmptyUser:t,isUserCanceled:l}=e;(0,s.useEffect)(()=>{var e,n;t&&av.oe.event.info({name:av.Mo.UserNotExist,report:{url:null===(e=location)||void 0===e?void 0:e.pathname}}),l&&av.oe.event.info({name:av.Mo.UserUnregister,report:{url:null===(n=location)||void 0===n?void 0:n.pathname}})},[t,l])}({isEmptyUser:X,isUserCanceled:J});let ei=(0,b.A)(et,null==Y?void 0:Y.uid);return(!function(e){let{isSelfPage:t}=e;if((0,s.useEffect)(()=>{t&&!(0,uw.Pt)(uw.$S.Reversion)&&(0,uw.br)(!0)},[t]),(0,s.useEffect)(()=>W.listen(W.EVENT.refreshPage,()=>{location.reload()}),[]),!t);}({isSelfPage:i}),(0,C.Z)({isLogin:q}),(0,s.useEffect)(()=>{let e="";return document.body&&(e=document.body.style.minWidth,D||A?document.body.style.minWidth="100%":document.body.style.minWidth="1024px"),()=>{document.body.style.minWidth=e}},[D,A]),i&&!q)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(uW.Z,{children:(0,a.jsx)("title",{children:"抖音-记录美好生活"})}),(0,a.jsx)(uH,{isClient:$,abTestData:V})]}):function(e){let{status:t,isSpider:l,statusCode:n,isEmptyUser:r,isUserCanceled:i,userInfo:o}=e;return t>400&&l||0!==n||!!(null==o?void 0:o.uid)&&r||!!(null==o?void 0:o.uid)&&i}({status:N,isSpider:G,statusCode:ee,isEmptyUser:X,isUserCanceled:J,userInfo:el})?(0,a.jsx)(S,{status:N,isSpider:G,statusCode:ee,isEmptyUser:X,isUserCanceled:J}):(0,a.jsx)(Z.Provider,{value:{updateFollowStatus:er,isSelf:et,haveDashBoard:ei,currentUserInfoDetail:Y,isSpider:G},children:(0,a.jsxs)("div",{className:f()(up.container,up.containerMargin,{userNewUi:null==V?void 0:null===(n=V.userUiUpdate)||void 0===n?void 0:n.type}),children:[(0,a.jsx)(T,{userInfo:el,uid:r,isSpider:G,redirectFrom:P}),(null==el?void 0:el.uid)?(0,a.jsx)(ug,{isHideImpInfo:E,isClient:$,osInfo:K,userInfo:el,queryParam:O,otherUserLogId:Q,defaultPostRes:k,defaultMixRes:y,defaultSeriesRes:j,key:el.uid}):(0,a.jsx)(h.gb,{text:"数据加载中",className:up.loading}),(0,a.jsx)(p.$,{className:"user-page-footer",innerLink:(null==B?void 0:B.data)||[],defaultValue:null==U?void 0:U[_.TccKey.SiteFooter]})]})})})},312369:function(e,t,l){l.d(t,{o:function(){return r}});var n=l(553542);function r(e){let{id:t}=(0,n.U)();return"self"===t&&null!=e?e:t}},925153:function(e,t,l){l.d(t,{x:function(){return c}});var n=l(520739),r=l(878389);l(413806),l(826893),l(954372),l(675373);var i=l(552771),o=l(594235),a=l(888163),s=l(970187),d=l(828782);let u=/^\/video|user|hashtag\/.*?/;async function c(e,t){let l=await o.get({key:a.TccKey.PovertyContentConfig,defaultValue:a.TCC_DEFAULT_VALUE_MAP.get(a.TccKey.PovertyContentConfig),ctx:t}),c=window.location.pathname;if(0===l.openApi||!(0,d._Q)(t)||(0,d.We)(t)||!e||0===e.length||!u.test(c))return e;let v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.map(e=>`${t}_${e.awemeId}`).join(" ")}(e,2),m=e,f=await (0,s.Ts)(v,t);return 0===f.statusCode&&(m=function(e,t){let l=t.map(e=>(0,r._)((0,n._)({},e),{targetId:e.targetId.split("_")[1]}));return e.map(e=>{var t;let o=l.find(t=>t.targetId===e.awemeId);return(0,r._)((0,n._)({},e),{isHighQuality:null!==(t=null==o?void 0:o.hitStatus)&&void 0!==t?t:i.HighQualityStatus.HighQuality})})}(e,f.data)),m}},311180:function(e,t,l){l.d(t,{u:function(){return g}}),l("874386");var n=l("563097"),r=l("88648"),i=l("309931"),o=l("735636"),a=l("713097"),s=l.n(a),d=l("928826");l("311771");var u=l("520739"),c=l("878389");let v=(0,r.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,c._)((0,u._)({width:13,height:13,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M12.601 12.601a1.362 1.362 0 0 1-1.927 0L6.5 8.427 2.326 12.6a1.362 1.362 0 0 1-1.927-1.927L4.573 6.5.4 2.326A1.362 1.362 0 1 1 2.326.399L6.5 4.573 10.674.4a1.362 1.362 0 1 1 1.927 1.927L8.427 6.5l4.174 4.174a1.362 1.362 0 0 1 0 1.927z",fill:"#2F3035",fillOpacity:".9"})})));var m=l("243150"),f={default:1,1:"default",custom:2,2:"custom"};let h=!!("undefined"!=typeof window&&window.document&&window.document.createElement),p=e=>{var t,l,n,r,i;if(!h)return null;let o=document.createElement("div"),a=(null===(t=document)||void 0===t?void 0:t.fullscreenElement)||(null===(l=document)||void 0===l?void 0:l.msFullscreenElement)||(null===(n=document)||void 0===n?void 0:n.mozFullScreenElement)||(null===(r=document)||void 0===r?void 0:r.webkitFullscreenElement)||null;return a?a.appendChild(o):null===(i=null!=e?e:document.body)||void 0===i||i.appendChild(o),o},g=r.forwardRef((e,t)=>{let{className:l,modalClassName:a,onCancel:u,onOk:c,type:g="default",size:_="default",mask:x=!0,isHide:w=!0,closable:C=!0,title:y,message:I,okText:b,cancelText:j,maskClosable:k=!0,children:N,mountEl:S}=e,[E,L]=(0,r.useState)(w),T=(0,r.useRef)(null),M=(0,r.useRef)(E);M.current=E;let R=(0,r.useRef)(),P=(0,r.useRef)(),D=(0,r.useRef)(!1);!D.current&&h&&(P.current=p(S),R.current=P.current.parentNode,D.current=!0),(0,r.useImperativeHandle)(t,()=>P.current),(0,r.useEffect)(()=>(null===P.current.parentNode&&null!==R.current&&R.current.appendChild(P.current),()=>{var e,t;null===(t=P.current)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(P.current)}),[]),(0,r.useEffect)(()=>{L(w)},[w]);let A=async e=>{if(!!k&&T.current===e.target)await L(!0),null==u||u(e,M.current)},F=async e=>{await L(!0),null==u||u(e,M.current)},V=async e=>{await L(!0),null==c||c(e,M.current)};return P.current?i.createPortal((0,n.jsx)(o.Z,{in:!E,classNames:"modal-mask",timeout:{enter:400,exit:150},appear:!0,children:(0,n.jsx)("div",{ref:T,onClick:e=>A(e),className:s()(d.default.maskLayerWap,{[d.default.maskLayer]:x,[d.default.visible]:E,[d.default.mountEl]:!!S},a),children:(0,n.jsxs)("div",{className:s()("modal-pannel",{mountEl:!!S}),children:[(0,n.jsxs)("div",{className:s()(d.default.modalWap,d.default[_],{[d.default.defaultType]:2===f[g]},l),children:[(0,n.jsx)(m.Z,{onClick:e=>F(e),className:s()(d.default.closeIcon,{[d.default.closeIconHide]:!C}),src:v,width:13,height:13,viewBox:"0 0 13 13"}),(0,n.jsx)("h2",{className:s()(d.default.title),children:y}),(0,n.jsx)("p",{className:s()(d.default.message),children:I}),(0,n.jsxs)("div",{className:s()(d.default.btn,{[d.default.btnHide]:!b&&!j}),children:[(0,n.jsx)("a",{href:"#",onClick:e=>V(e),className:s()(d.default.okText,{[d.default.okBtnHide]:!b}),children:b}),(0,n.jsx)("a",{href:"#",onClick:e=>F(e),className:s()(d.default.okText,d.default.cancelText,{[d.default.cancelBtnHide]:!j}),children:j})]})]}),(0,n.jsx)("div",{className:s()(d.default.modalWap,d.default[_],{[d.default.customType]:1===f[g]},l),children:N})]})})}),P.current):null})},613364:function(e,t,l){l.d(t,{K:function(){return c}});var n=l(520739),r=l(878389);l(675373);var i=l(563097),o=l(88648),a=l(338426),s=l(782580);let d=(0,a.ZP)(()=>Promise.all([l.e("92686"),l.e("8512"),l.e("70500"),l.e("64363"),l.e("29146"),l.e("61653")]).then(l.bind(l,847289)),{ssr:!1}),u=(0,a.ZP)(()=>Promise.all([l.e("25851"),l.e("48755"),l.e("99763")]).then(l.bind(l,546372)),{ssr:!1}),c=(0,o.forwardRef)((e,t)=>(0,s.useInLiveSearchRefactorAB)()?(0,i.jsx)(d,(0,r._)((0,n._)({},e),{ref:t})):(0,i.jsx)(u,(0,r._)((0,n._)({},e),{ref:t})))},260087:function(e,t,l){l.d(t,{Z:function(){return N}});var n=l("563097"),r=l("88648"),i=l("713097"),o=l.n(i),a=l("909543"),s=l("124919"),d=l("265656"),u=l("768492"),c=l("969255"),v=l("872136"),m=new v.h({fastLiveHeadClickMore:{eventName:"fast_live_head_click_more",params:{entrance_type:"",hover_show_cnt:0}},fastLiveHeadShow:{eventName:"fast_live_head_show",params:{entrance_type:"",anchor_id:"",room_id:"",show_type:""}}}),f=l("520739"),h=l("878389");l("874386"),l("413806"),l("826893");var p=l("88961"),g=l("567754"),_=l("645003"),x=l("63205"),w=l("343049"),C=l("246050"),y=l("441447"),I=l("105928"),b=l("769508"),j=e=>{var t,l;let{data:i,logParams:a,abTestData:s,liveList:d,index:c,defaultShowCount:v,isInDouyinWeb:j,onItemClick:k,itemClass:N,awemeInfo:S,isLogin:E}=e,[L,T]=(0,p.Z)(),M=(0,_.x)(()=>{m.sendLog("fastLiveHeadShow",{entrance_type:a.entrance_type,anchor_id:null==i?void 0:i.anchorId,room_id:null==i?void 0:i.roomId,show_type:"hover"})}),R=(0,u.cc)((0,f._)({web_rid:null==i?void 0:i.webRid,room_id:null==i?void 0:i.roomId,action_type:"click"},a)),P={episodeExtra:null==i?void 0:i.episodeExtra,logId:(null==a?void 0:a.request_id)||"0"},D=(0,r.useMemo)(()=>"String"!==(0,w.tQ)(R)?null:(0,C.D)(R.split("?",2)[1]),[R]);(0,r.useCallback)(()=>(0,h._)((0,f._)({},a),{show_rank:`${c+1}`,show_cnt:v}),[a,v,c]);let A=(0,r.useCallback)(()=>{y.emit(y.EVENT.videoPause,"AvatarItem_pauseMedia"),y.emit(y.EVENT.livePause),y.emit(y.EVENT.searchMusicPause)},[]),F=r.useRef(),V=r.useMemo(()=>{var e,t,l;return(null==S?void 0:null===(l=S.authorInfo)||void 0===l?void 0:null===(t=l.roomData)||void 0===t?void 0:null===(e=t.others)||void 0===e?void 0:e.web_enter_benefit_point_data)||{has_ongoing_lottery:!1,has_ongoing_lucky_money:!1}},[S]),B=(0,b.gE)(s,V.has_ongoing_lottery,V.has_ongoing_lucky_money,!0),U=(0,r.useMemo)(()=>{let[e,t]=R.split("?"),l=g.parse(t||"");return`${e}?${g.stringify(l)}`},[R,S]),O=e=>{A()};return(0,n.jsx)("div",{ref:L,children:(0,n.jsx)("div",{ref:M,onMouseEnter:e=>{var t;null===(t=F.current)||void 0===t||t.mouseEnterHandler(e)},onMouseLeave:e=>{var t;null===(t=F.current)||void 0===t||t.mouseLeaveHandler(e)},children:(0,n.jsxs)(x.a,{href:U,rel:"noopener noreferrer",target:"_blank",className:o()(I.default.liveItem,N),onClick:e=>{(0,b.tw)(null==i?void 0:i.anchorId,D,P,0,null==i?void 0:i.isEcomLive),k(),O(e)},children:[(0,n.jsx)(b.nh,{isEcomLive:null==i?void 0:i.isEcomLive,isShow:T,src:null==i?void 0:i.coverSrc,className:I.default.avatar,uid:null==i?void 0:i.anchorId,type:"extra-small",isFirstLive:(null==i?void 0:null===(l=i.episodeExtra)||void 0===l?void 0:null===(t=l.mod)||void 0===t?void 0:t.episode_stage)===2,liveRoomUrl:R,liveRoomParam:P,disableAllAnim:!0,awemeInfo:S,from:"follow",position:"right",isLogin:E,fixLeft:104,handlerRef:F,disableSelfEvent:!0,wrapStyle:{display:"flex"},useRedPack:!1,logParams:a,abtestData:s}),(0,n.jsxs)("div",{className:I.default.nameWrap,children:[(0,n.jsx)("div",{className:I.default.name,children:null==i?void 0:i.userName}),B.icon&&(0,n.jsxs)("div",{className:I.default.redPackWrap,children:[(0,n.jsx)("img",{src:B.icon,className:I.default.redPackImg}),(0,n.jsx)("span",{className:I.default.redPackText,children:B.text})]})]})]})})})},k=l("901046"),N=e=>{var t;let{liveList:l=[],hasLimit:i,loading:v,logParams:f,abTestData:h,onItemClick:p,isLogin:g}=e,_=(0,a.a)(),x=(0,d.En)(_.pathname),w=(null===(t=window)||void 0===t?void 0:t.location.hostname)==="www.douyin.com"&&!x,C=i?l.slice(0,3):l,y=C.length<6?C.length:5,I=(0,r.useRef)();return(0,r.useEffect)(()=>{let e=e=>{null==e||e.preventDefault(),null==e||e.stopPropagation()},t=I.current,l=i||C.length<5;return l&&(null==t||t.addEventListener("wheel",e)),()=>{l&&(null==t||t.removeEventListener("wheel",e))}},[i]),(0,n.jsx)("div",{ref:I,className:o()(c.default.container,c.default.hideScrollbar,{[c.default.longList]:!i}),children:v?(0,n.jsx)(s.g,{className:c.default.loading}):(0,n.jsxs)("div",{className:c.default.list,children:[C.map((e,t)=>(0,n.jsx)(j,{data:e,logParams:f,index:t,abTestData:h,liveList:l,defaultShowCount:y,isInDouyinWeb:w,onItemClick:p,itemClass:t!==C.length-1||i?"":c.default.avatarItem,awemeInfo:e.__fakeAwemeInfo,isLogin:g},e.anchorId)),i&&(0,n.jsx)(k.a,{className:c.default.more,spa:w,href:(0,u.ff)(),onClick:()=>{m.sendLog("fastLiveHeadClickMore",{entrance_type:f.entrance_type,hover_show_cnt:l.length})},children:"查看更多"})]})})}},207898:function(e,t,l){l.d(t,{G9:function(){return S},UU:function(){return N}}),l(874386);var n=l(563097),r=l(88648),i=l(713097),o=l.n(i),a=l(130162),s=l(909543),d=l(734123),u=l.n(d),c=l(784492),v=l(399242),m=l(725887),f=l(328155),h=l(265656),p=l(441447),g=l(308253),_=l(431053),x=l(95291),w=l(9352),C=l(56894),y=l(798644),I=l(575480),b=l(921359),j=l(420234);let k=[m.gI.PlayerCardInfo,m.gI.isVideoPlayed,m.gI.IsInModalVideo],N=()=>{let e=(0,r.useRef)(!1),{pathname:t}=(0,s.a)(),l=(0,r.useRef)(t),n=(0,r.useRef)(!1);return(0,f.Nr)(t)?n.current=!0:(n.current?(n.current=!1,e.current=l.current===t):e.current=!1,l.current=t),e},S=e=>{let{children:t,parentRouteClassName:l,checkIsActive:i}=e,{pathname:d}=(0,s.a)(),S=!0;i&&(S=i(d));let E=S&&(0,f.Nr)(d),L=(0,f.Nr)(d)||!S,T=(0,r.useRef)(),M=N(),R=(0,r.useRef)(d),P=(0,r.useRef)(d),D=(0,r.useMemo)(()=>(0,h.oS)(null==R?void 0:R.current)?v.lT.Recommend:(0,h.i8)(null==R?void 0:R.current)?v.lT.Follow:(0,h.z1)(null==R?void 0:R.current)?v.lT.Friend:(0,h.e2)(null==R?void 0:R.current)?v.lT.Modal:(0,h.h$)(null==R?void 0:R.current)?v.lT.User:(0,h.Q5)(null==R?void 0:R.current)?v.lT.AiSearch:void 0,[]);return L&&(P.current=d),(0,r.useLayoutEffect)(()=>{L&&p.emit(p.EVENT.videoPause,{isInChildRoute:!0})},[L]),(0,r.useEffect)(()=>()=>{if(E){let e=p.getPageScope(R.current);p.emit(p.EVENT.exitChildRoute,null,e),"child_route"!==e&&p.emit(p.EVENT.exitChildRoute,null,"child_route")}else p.emit(p.EVENT.enterChildRoute)},[E]),(0,r.useEffect)(()=>{if(L){let e=!1,t=t=>{e=!0};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),e&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},20)}}},[L]),(0,r.useLayoutEffect)(()=>{if(L){let e=k.map(e=>m.Le.getConfig(e));return m.Le.setConfig(m.gI.SlideStartTime,{slideStartTime:0}),()=>{k.forEach((t,l)=>{m.Le.setConfig(t,e[l])}),m.Le.setConfig(m.gI.SlideStartTime,{slideStartTime:0})}}},[L]),(0,r.useLayoutEffect)(()=>{!M.current&&(0,j.S)()&&(0,g._)()},[]),(0,c.Z)(()=>{let e=window.location.pathname;if(!L)return(!M.current||m.Le.getConfig(m.gI.NeedExitFullScreenAndModal))&&(m.Le.setConfig(m.gI.NeedExitFullScreenAndModal,!1),(0,g._)()),()=>{!(0,f.dH)(location.pathname)&&!(0,f.yk)(location.pathname)&&(0,g._)()};{var t,l,n,r,i;let o=null===(t=m.Le.getConfig(m.gI.IsInModalVideo))||void 0===t?void 0:t.isInModal,a=D&&!o?null===(l=y.s.getLastRegisterPlayerIdByScene)||void 0===l?void 0:l.call(y.s,D):(0,x.OB)();a&&(0,x.wS)(a,!1);let s=null===u()||void 0===u()?void 0:null===(r=u().instManager)||void 0===r?void 0:null===(n=r.find)||void 0===n?void 0:n.call(r,e=>(null==e?void 0:e.playerId)===a);if((0,f.dH)(e)){null==s||null===(i=s.pause)||void 0===i||i.call(s);let e=y.s.getPlayerInfoMap();m.Le.setConfig(m.gI.TempPlayerMap,e),y.s.clearPlayerInfoMap()}return()=>{var t,l,n,r;let i=!1,s=null!==(l=m.Le.getConfig(m.gI.TempPlayerMap))&&void 0!==l?l:null;if(s){if(M.current)null===(r=y.s.setPlayerInfoMap)||void 0===r||r.call(y.s,s);else{let t=new Map;s.forEach((e,l)=>{if(e.scene===v.lT.Modal){var n;null===(n=y.s.unRegister)||void 0===n||n.call(y.s,{id:l})}else t.set(l,e)}),(0,f.dH)(e),null===(n=y.s.setPlayerInfoMap)||void 0===n||n.call(y.s,t)}m.Le.setConfig(m.gI.TempPlayerMap,null)}(0,f.dH)(e)&&!M.current&&o&&(i=!0);let d=D&&(!o||i)?null===(t=y.s.getLastRegisterPlayerIdByScene)||void 0===t?void 0:t.call(y.s,D):(0,x.OB)(),u=i&&d?d:a||d;u&&(0,x.wS)(u,!0);let c=setTimeout(()=>{let e=(0,x.OB)(),t=y.s.getPlayersByScene(D).find(t=>t.playerId===e),l=y.s.getAllPlayer().find(e=>(null==e?void 0:e.playerId)===u);if(l&&!(t&&e!==u)){var n;!(0,f.Nr)(P.current)&&l.once("play",()=>{(0,_.yr)({fromCache:1})}),null==l||null===(n=l.play)||void 0===n||n.call(l)}},500);m.Le.setConfig(m.gI.BackToCacheDelayPlayTimer,c)}}},[L]),(0,r.useEffect)(()=>{if(L)return;let e=T.current,t=e=>p.emit(p.EVENT.routePageScroll,e);return null==e||e.addEventListener("scroll",t),()=>{null==e||e.removeEventListener("scroll",t)}},[L]),(0,r.useEffect)(()=>{E&&p.emit(p.EVENT.childRouteRender)},[E]),(0,r.useEffect)(()=>{!m.Le.getConfig(m.gI.SvgDirectRender)&&m.Le.setConfig(m.gI.SvgDirectRender,!0)},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.O,{active:!L,className:o()({[C.tt]:!L,[w.default.withoutscrollbar]:D===v.lT.User},l,C.ei,w.default.routeContainer),ref:T,children:t}),E&&(0,n.jsx)(I.w,{isActive:E,children:(0,n.jsx)("div",{className:o()(C.WV,C.ei,w.default.routeContainer,w.default.childRoute,{[w.default.enterChildRoute]:!S}),children:(0,n.jsx)(a.Outlet,{})})})]})}},250103:function(e,t,l){l.d(t,{C:function(){return m}});var n=l("520739"),r=l("878389"),i=l("563097"),o=l("77854"),a=l.n(o);l("88648");var s=l("207898"),d=l("302461"),u=l("441447"),c=l("56894");let v=()=>{(0,d.o)(()=>{let e=Array.from(document.querySelectorAll(`.${c.ei}`)).find(e=>e.getBoundingClientRect().height>0)||window;return u.emit(u.EVENT.globalScrollEl,e),u.listen(u.EVENT.sideBarShow,()=>{u.emit(u.EVENT.globalScrollEl,e)})},[])};function m(e,t,l){return function(o){v();let d=(0,i.jsx)(e,(0,n._)({},o));return(0,i.jsx)(s.G9,(0,r._)((0,n._)({checkIsActive:t,parentRouteClassName:l},a()),{children:d}))}}},680867:function(e,t,l){l.d(t,{X:function(){return n}});let n=(0,l(88648).createContext)(null)},138740:function(e,t,l){l.d(t,{Z:function(){return eb}});var n=l("520739"),r=l("878389");l("874386"),l("950331"),l("675373"),l("268917");var i=l("563097"),o=l("88648"),a=l("64053"),s=l("115766"),d=l("713097"),u=l.n(d),c=l("441447"),v=l("961412"),m=l("128231"),f=l.n(m);let h=(0,o.createContext)(null);l("209955");var p=l("902239"),g=l("973725"),_=l("713111"),x=l("680867");function w(e){let{searchText:t}=e;return(0,i.jsx)("div",{className:g.default.middle,children:t?"没有搜索到相关用户":"没有数据"})}function C(e){let{isMiddle:t}=e;return(0,i.jsx)("div",{className:u()({[g.default.middle]:t}),children:(0,i.jsx)(_.gb,{})})}function y(e){let{isMiddle:t,onLoadMoreData:l}=e;return(0,i.jsxs)("div",{className:u()({[g.default.middle]:t}),children:["用户信息获取失败，请",(0,i.jsx)("span",{className:g.default.reload,onMouseDown:()=>{l()},children:"刷新"}),"重试"]})}function I(e){var t,l,n;let{suggestData:r,searchText:o,onLoadMoreData:a,isLoading:s}=e,d=null;return(null==r?void 0:r.statusCode)===0||s?(null==r?void 0:r.hasMore)?d=(0,i.jsx)(C,{isMiddle:(null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.length)===0}):(null==r?void 0:r.hasFetchData)&&(null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.length)===0&&(d=(0,i.jsx)(w,{searchText:o})):d=(0,i.jsx)(y,{isMiddle:(null==r?void 0:null===(l=r.data)||void 0===l?void 0:l.length)===0,onLoadMoreData:a}),d}function b(e){let{children:t,className:l,targetEl:n,isSearch:r,searchText:a,onLoadMoreData:s,suggestData:d}=e,c=(0,o.useRef)(null),[v,m]=(0,o.useState)(null),[_,w]=(0,o.useState)(!1),C=(0,o.useRef)(null),y=(0,o.useRef)(!1),b=(0,o.useContext)(x.X),{isDetail:j}=null!=b?b:{},{refOuterContainer:k}=(0,o.useContext)(h)||{},{styles:N}=(0,p.D)(n,v,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,16]}}]}),S=(0,o.useCallback)(()=>{var e,t;return j?{}:{marginTop:-((null==k?void 0:null===(t=k.current)||void 0===t?void 0:null===(e=t.querySelector(".richtext-container"))||void 0===e?void 0:e.offsetHeight)+200)}},[]);C.current=s;let E=(0,o.useCallback)(f()(async()=>{if(!!v&&!y.current){if(v.scrollTop+v.clientHeight+100>v.scrollHeight){var e;await (null===(e=C.current)||void 0===e?void 0:e.call(C))}}},500),[v]);return(0,o.useEffect)(()=>{v&&(v.scrollTop=0)},[a,v]),(0,o.useEffect)(()=>{if(!!v&&(null==d?void 0:d.statusCode)===0&&!!(null==d?void 0:d.hasMore))return y.current=!1,v.addEventListener("scroll",E),()=>{y.current=!0,v&&v.removeEventListener("scroll",E)}},[v,E,d]),(0,i.jsxs)("div",{className:u()(g.default.container,l,"atBox-outside-container",g.default.atIcon),ref:m,style:S(),onMouseDown:e=>{e.preventDefault()},children:[(0,i.jsx)("div",{className:u()(g.default.innerContainer,"atBox-inner-container",{[g.default.isSearch]:r}),ref:c,children:t}),(0,i.jsx)(I,{suggestData:d,searchText:a,isLoading:_,onLoadMoreData:async()=>{w(!0),await s(),w(!1)}})]})}function j(e){let{children:t,store:l}=e,{onLoadMoreData:n,suggestData:r,searchText:a,isAtIconSelected:s}=(0,o.useContext)(h);return(0,i.jsx)(b,{searchText:a,targetEl:null==l?void 0:l.getReferenceElement(),onLoadMoreData:n,suggestData:r,isAtIconSelected:s,children:t})}var k=l("368200"),N=l("465769"),S=l("954576"),E=l("645003");let L=(0,o.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,r._)((0,n._)({width:13,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.611 11a4.889 4.889 0 1 0 0-9.777 4.889 4.889 0 0 0 0 9.777z",fill:"#FE2C55"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.691 7.23a.612.612 0 0 0 0 .863.612.612 0 0 0 .863 0l2.697-2.697a.61.61 0 1 0-.864-.864L5.691 7.23z",fill:"url(#icon-avater-select_svg__paint0_linear_37464_5518)"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.418 7.229a.612.612 0 0 1-.864 0l-.431-.432-1.288-1.288a.612.612 0 0 0-.864 0 .612.612 0 0 0 0 .864l1.72 1.72a.612.612 0 0 0 .863 0l.864-.864z",fill:"#fff"}),(0,i.jsx)("rect",{x:1.355,y:".856",width:10.511,height:10.511,rx:5.256,stroke:"#363741",strokeWidth:".733"}),(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"icon-avater-select_svg__paint0_linear_37464_5518",x1:7.925,y1:3.112,x2:5.088,y2:5.809,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#fff"}),(0,i.jsx)("stop",{offset:1,stopColor:"#ECEDED"})]})})]})));var T=l("836619"),M=l("115627"),R=l("271994");function P(e){var{className:t,mention:l,awemeInfo:a,selectOn:s,onClick:d}=e,c=(0,k._)(e,["className","mention","awemeInfo","selectOn","onClick"]);let[v,m]=(0,o.useState)(!1),f=(0,E.x)(()=>{S.Z.sendLog("commentAtShow",{author_id:`${null==a?void 0:a.authorUserId}`,group_id:null==a?void 0:a.awemeId,log_pb:null==a?void 0:a.logPb,enter_from:(0,N.vM)(),to_user_id:null==l?void 0:l.uid})}),h=(0,o.useCallback)(e=>{null==d||d(e),s&&m(e=>!e)},[d,s]),p=(0,o.useCallback)(()=>(0,i.jsx)("i",{className:T.default.mask}),[]);return(0,i.jsx)("div",(0,r._)((0,n._)({className:u()(T.default.container,t),onClick:e=>h(e)},c),{ref:f,children:(0,i.jsxs)("div",{className:T.default.innerContainer,children:[v?(0,i.jsx)(M.Z,{width:14,height:14,viewBox:"0 0 14 14",src:L,className:T.default.icon}):null,(0,i.jsx)(R.q,{src:l.avatarUri,type:"extraSmall",maskConf:{showMask:v,MaskItem:p}}),(0,i.jsx)("span",{className:T.default.userName,children:l.remarkName||l.nickname||""})]})}))}function D(e){var{children:t,mention:l,onMouseDown:n,onMouseUp:r,onMouseEnter:a}=e;(0,k._)(e,["children","mention","onMouseDown","onMouseUp","onMouseEnter"]);let{awemeInfo:s}=(0,o.useContext)(h);return(0,i.jsx)("div",{onMouseDown:n,onMouseUp:r,onMouseEnter:a,onMouseDown:e=>{n(e)},onMouseDownCapture:e=>{n(e)},onMouseUp:e=>{S.Z.sendLog("commentAtClick",{author_id:`${null==s?void 0:s.authorUserId}`,group_id:null==s?void 0:s.awemeId,log_pb:null==s?void 0:s.logPb,enter_from:(0,N.vM)(),to_user_id:null==l?void 0:l.uid}),r(e)},onClick:e=>{r(e)},onMouseEnter:()=>{},children:(0,i.jsx)(P,{mention:l,awemeInfo:s})})}function A(e){let{SuggestionComponent:t,loadSearchAtData:l,loadMoreDefaultAtData:n,atUserDefaultData:r,atUserSearchData:a,awemeInfo:s,editorState:d,addUserMention:u,isAtIconSelected:c,setIsAtIconSelected:v,refOuterContainer:m,setIsAtIconPoint:p}=e,[g,_]=(0,o.useState)(!1),[w,C]=(0,o.useState)(null==a?void 0:a.searchText),y=(0,o.useMemo)(()=>(null==a?void 0:a.hasMore)&&c,[a,c]),I=(0,o.useMemo)(()=>w?a:r,[a,r,w]),b=(0,o.useContext)(x.X),{isActive:k=!0}=null!=b?b:{};(0,o.useEffect)(()=>{(g||c)&&0===r.data.length&&0===r.statusCode&&r.hasMore&&n()},[g,r,n,c,k]),(0,o.useEffect)(()=>{!k&&_(!1)},[k]),(0,o.useEffect)(()=>{w&&l(w)},[w]);let N=(0,o.useCallback)(()=>w?l(w):n(),[w,l,n]),S=(0,o.useCallback)(f()(e=>{C(e.value)},300,{leading:!1,trailing:!0}),[]);return(0,i.jsx)(h.Provider,{value:{onLoadMoreData:N,suggestData:I,searchText:w,awemeInfo:s,editorState:d,addUserMention:u,isAtIconSelected:c,setIsAtIconSelected:v,refOuterContainer:m,setIsAtIconPoint:p},children:(0,i.jsx)(t,{open:g,onOpenChange:e=>{_(e)},suggestions:I.data,onSearchChange:e=>{S(e)},renderEmptyPopup:y,popperOptions:{loadMoreDefaultAtData:n,loadSearchAtData:l,suggestData:I,searchText:w},popoverContainer:j,entryComponent:D,hasMore:null==I?void 0:I.hasMore,isActive:k})})}l("981168"),l("242079"),l("851912"),l("826893"),l("927234"),l("791154");var F=l("352816"),V=l.n(F),B=(e,t,l)=>{let n=t.getAnchorKey(),r=t.getAnchorOffset();return function(e,t,l){let n=e.substr(0,t),r=l.map(e=>V()(e)).join("|"),i=RegExp(`(${r})`,"g"),o=n.matchAll(i),a=0,s=0;for(let e of o){let t=e[1].length;s=(a=e.index||0)+t}let d=n.slice(s);return{begin:a,end:n.length,matchingString:d}}(e.getCurrentContent().getBlockForKey(n).getText(),r,l)};function U(e){return"@"===e?"mention":`${e}mention`}function O(e,t,l,n,r){let i=e.getCurrentContent().createEntity(U(n),r,{mention:t}).getLastCreatedEntityKey(),o=e.getSelection(),{begin:s,end:d}=B(e,o,[n]),u=o.merge({anchorOffset:s,focusOffset:d}),c=a.Modifier.replaceText(e.getCurrentContent(),u,`${l}${t.name}`,void 0,i),v=u.getAnchorKey();e.getCurrentContent().getBlockForKey(v).getLength()===d&&(c=a.Modifier.insertText(c,c.getSelectionAfter()," "));let m=a.EditorState.push(e,c,"insert-fragment");return a.EditorState.forceSelection(m,c.getSelectionAfter())}let H=e=>{let t=e.getCurrentContent(),l=t.createEntity("mention","IMMUTABLE",{}).getLastCreatedEntityKey(),n=a.Modifier.insertText(t,t.getSelectionAfter(),"@",null,l);return a.EditorState.push(e,n,"insert-fragment")},W=(e,t)=>O(e,t,"@","@","IMMUTABLE"),z=(e,t)=>{let l=e.getCurrentContent(),n=l.createEntity("mention","IMMUTABLE",{mention:t}).getLastCreatedEntityKey(),r=e.getSelection(),i=a.Modifier.removeRange(l,r,"backward"),o=a.Modifier.insertText(i,i.getSelectionAfter()," "),s=a.Modifier.insertText(o,o.getSelectionAfter(),`@${t.name}`,void 0,n);s=a.Modifier.insertText(s,s.getSelectionAfter()," ");let d=a.EditorState.push(e,s,"insert-fragment");return a.EditorState.forceSelection(d,s.getSelectionAfter())},Z=(e,t)=>{let l=e.getCurrentContent(),n=l.createEntity("emoji","IMMUTABLE",{emojiInfo:t}).getLastCreatedEntityKey(),r=e.getSelection(),i=a.Modifier.removeRange(l,r,"backward"),o=a.Modifier.insertText(i,i.getSelectionAfter()," "),s=a.Modifier.insertText(o,o.getSelectionAfter(),`${t.text}`,void 0,n);s=a.Modifier.insertText(s,s.getSelectionAfter()," ");let d=a.EditorState.push(e,s,"insert-fragment");return a.EditorState.forceSelection(d,s.getSelectionAfter())};function $(e,t,l){let i=[],o=-1;return t.findEntityRanges(t=>{let n=t.getEntity();if(!n)return!1;let r=e.getEntity(n),a="mention"===r.getType();if(a){var s,d;let e=r.getData();i[++o]={user_id:null===(s=e.mention)||void 0===s?void 0:s.uid,sec_uid:null===(d=e.mention)||void 0===d?void 0:d.secUid,type:0,start:l+0,end:l+0}}return a},(e,t)=>{i[o]=(0,r._)((0,n._)({},i[o]),{start:l+e,end:l+t})}),i}let K=e=>({text:G(e),textExtra:(function(e){let t=e.getCurrentContent(),l=t.getFirstBlock(),n=t.getLastBlock(),r=l.getKey();if(r===n.getKey())return $(t,l,0);{let e=[];for(let l=r,n=0;l;l=t.getKeyAfter(l)){let r=t.getBlockForKey(l);e.push(...$(t,r,n)),n+=r.text.length+1}return e}})(e).filter(e=>null==e?void 0:e.user_id)}),G=e=>{let t=e.getCurrentContent().getBlocksAsArray(),l=[];for(let e=0;e<t.length;e++)l.push(t[e].text);return l.join("\n")},Y=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,o=e.getCurrentContent();if(0===l.length)return o=a.Modifier.insertText(o,o.getSelectionAfter(),t),a.EditorState.push(e,o,"insert-fragment");let s=l.sort((e,t)=>e.start-t.start);for(;t.length>i;)if(s.length>0&&s[0].start===i){let e=s[0],l=(0,r._)((0,n._)({},e),{uid:e.userId,name:t.slice(e.start,e.end)}),d=o.createEntity("mention","IMMUTABLE",{mention:l}),u=d.getLastCreatedEntityKey();o=a.Modifier.insertText(d,d.getSelectionAfter(),`${l.name}`,void 0,u),s.shift(),i=e.end}else{let e=s.length>0?s[0]:{start:t.length},l=t.slice(i,e.start);o=a.Modifier.insertText(o,o.getSelectionAfter(),l),i=e.start}return a.EditorState.push(e,o,"insert-fragment")},q=13;var Q=l("308450"),X=l("135729");function J(e){let{mention:t,children:l,className:n}=e;return(0,i.jsx)("a",{href:t.link,className:n,spellCheck:!1,"data-testid":"mentionLink",children:l})}function ee(e){let{children:t,className:l}=e;return(0,i.jsx)("span",{className:l,spellCheck:!1,"data-testid":"mentionText",children:t})}function et(e){let{entityKey:t,theme:l={},mentionComponent:n,children:r,decoratedText:o,className:a,contentState:s}=e,d=(0,X.default)(l.mention,a),u=s.getEntity(t).getData().mention,c=n||(u.link?J:ee);return(0,i.jsx)(c,{entityKey:t,mention:u,theme:l,className:d,decoratedText:o,children:r})}var el=l("134761"),en=l("201845"),er=l.n(en);let ei=e=>{let{onMentionSelect:t,mention:l,theme:n,index:r,onMentionFocus:a,isFocused:s,id:d,searchValue:u,entryComponent:c}=e,v=(0,o.useRef)(!1),m=(0,o.useRef)(null);(0,o.useEffect)(()=>{s&&requestAnimationFrame(()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"nearest"})})},[s]),(0,o.useEffect)(()=>{v.current=!1});let f=s?n.mentionSuggestionsEntryFocused:n.mentionSuggestionsEntry;return(0,i.jsx)("div",{ref:m,children:(0,i.jsx)(c,{className:f,onMouseDown:e=>{e.preventDefault(),v.current=!0},onMouseUp:()=>{v.current&&(t(l),v.current=!1)},onMouseEnter:()=>{a(r)},role:"option",id:d,"aria-selected":s?"true":void 0,theme:n,mention:l,isFocused:s,searchValue:u})})};ei.propTypes={entryComponent:er().any.isRequired,searchValue:er().string,onMentionSelect:er().func};function eo(e){let{mention:t,theme:l={}}=e;return t.avatar?(0,i.jsx)("img",{src:t.avatar,className:l.mentionSuggestionsEntryAvatar,role:"presentation"}):null}function ea(e){let{mention:t,theme:l,isFocused:o,searchValue:a}=e,s=(0,k._)(e,["mention","theme","isFocused","searchValue"]);return(0,i.jsxs)("div",(0,r._)((0,n._)({},s),{children:[(0,i.jsx)(eo,{mention:t,theme:l}),(0,i.jsx)("span",{className:null==l?void 0:l.mentionSuggestionsEntryText,children:t.name})]}))}let es=e=>e?"static"!==window.getComputedStyle(e).getPropertyValue("position")?e:es(e.parentElement):null;function ed(e){let t,l,n,{decoratorRect:r,popover:i,props:o}=e,a=es(i.parentElement);if(a){let e=a.getBoundingClientRect();t={scrollLeft:a.scrollLeft,scrollTop:a.scrollTop,left:r.left-e.left,top:r.bottom-e.top}}else t={scrollTop:window.pageYOffset||document.documentElement.scrollTop,scrollLeft:window.pageXOffset||document.documentElement.scrollLeft,top:r.bottom,left:r.left};let s=t.left+t.scrollLeft,d=t.top+t.scrollTop;return o.open&&(o.suggestions.length>0?(l="scale(1)",n="all 0.25s cubic-bezier(.3,1.2,.2,1)"):(l="scale(0)",n="all 0.35s cubic-bezier(.3,1,.2,1)")),{left:`${s}px`,top:`${d}px`,transform:l,transformOrigin:"1em 0%",transition:n}}l("413806"),l("897860");var eu=e=>{let[t,l,n]=e.split("-");return{blockKey:t,decoratorKey:parseInt(l,10),leafKey:parseInt(n,10)}};function ec(e){return void 0!==e}function ev(e){let{store:t,children:l,theme:a,popperOptions:s={placement:"bottom-start"}}=e,[d,u]=(0,o.useState)(()=>(0,X.default)(a.mentionSuggestions,a.mentionSuggestionsPopup)),[c,v]=(0,o.useState)(null),{styles:m,attributes:f}=(0,p.D)(t.getReferenceElement(),c,s);return(0,o.useEffect)(()=>{requestAnimationFrame(()=>u((0,X.default)(a.mentionSuggestions,a.mentionSuggestionsPopup,a.mentionSuggestionsPopupVisible)))},[a]),(0,i.jsx)("div",(0,r._)((0,n._)({ref:v,style:m.popper},f.popper),{className:d,children:l}))}var em=l("419631");let ef=l.n(em)()(e=>{});class eh extends o.Component{componentDidUpdate(){if(this.popover){let e=this.props.suggestions.length;if(e>0&&this.state.focusedOptionIndex>=e&&this.setState({focusedOptionIndex:e-1}),!this.props.store.getAllSearches().has(this.activeOffsetKey))return;let t=this.props.store.getPortalClientRect(this.activeOffsetKey);for(let[e,l]of Object.entries((this.props.positionSuggestions||ed)({decoratorRect:t,props:this.props,popover:this.popover})))this.popover.style[e]=l}}componentWillUnmount(){this.props.callbacks.onChange=void 0}render(){if(!this.props.open)return null;let e=this.props,{entryComponent:t,popoverComponent:l,popperOptions:a,popoverContainer:s=ev,onOpenChange:d,onAddMention:u,onSearchChange:c,suggestions:v,ariaProps:m,callbacks:f,theme:h={},store:p,entityMutability:g,positionSuggestions:_,mentionTriggers:x,mentionPrefix:w}=e,C=(0,k._)(e,["entryComponent","popoverComponent","popperOptions","popoverContainer","onOpenChange","onAddMention","onSearchChange","suggestions","ariaProps","callbacks","theme","store","entityMutability","positionSuggestions","mentionTriggers","mentionPrefix"]);return l||_?(ef("The properties `popoverComponent` and `positionSuggestions` are deprecated and will be removed in @draft-js-plugins/mentions 6.0 . Use `popperOptions` instead"),o.cloneElement(l||(0,i.jsx)("div",{}),(0,r._)((0,n._)({},C),{className:h.mentionSuggestions,role:"listbox",id:`mentions-list-${this.key}`,ref:e=>{this.popover=e}}),null==v?void 0:v.map((e,l)=>(0,i.jsx)(ei,{onMentionSelect:this.onMentionSelect,onMentionFocus:this.onMentionFocus,isFocused:this.state.focusedOptionIndex===l,mention:e,index:l,id:`mention-option-${this.key}-${l}`,theme:h,searchValue:this.lastSearchValue,entryComponent:t||ea},null!==e.id?e.id:e.name)))):this.props.renderEmptyPopup||0!==v.length?(0,i.jsx)(s,{store:this.props.store,popperOptions:a,theme:h,children:null==v?void 0:v.map((e,l)=>(0,i.jsx)(ei,{onMentionSelect:this.onMentionSelect,onMentionFocus:this.onMentionFocus,isFocused:this.state.focusedOptionIndex===l,mention:e,index:l,id:`mention-option-${this.key}-${l}`,theme:h,searchValue:this.lastSearchValue,entryComponent:t||ea},null!==e.id?e.id:e.uid))}):null}constructor(e){super(e),(0,el._)(this,"state",{focusedOptionIndex:0}),(0,el._)(this,"key",(0,a.genKey)()),(0,el._)(this,"popover",void 0),(0,el._)(this,"activeOffsetKey",void 0),(0,el._)(this,"lastSearchValue",void 0),(0,el._)(this,"lastActiveTrigger",""),(0,el._)(this,"lastSelectionIsInsideWord",void 0),(0,el._)(this,"onEditorStateChange",e=>{let t=this.props.store.getAllSearches();if(0===t.size)return e;let l=function(e,t,l){let n=e.getSelection(),r=n.getAnchorKey(),i=n.getAnchorOffset();if(!n.isCollapsed()||!n.getHasFocus())return null;let o=t.map(e=>eu(e)).filter(e=>e.blockKey===r).map(t=>{var l;return null==e?void 0:null===(l=e.getBlockTree(t.blockKey))||void 0===l?void 0:l.getIn([t.decoratorKey])});if(o.every(e=>void 0===e))return null;let a=e.getCurrentContent().getBlockForKey(r).getText(),s=o.filter(ec).map(e=>{let{start:t,end:n}=e;return l.map(e=>0===t&&i>=t+e.length&&a.substr(0,e.length)===e&&i<=n||l.length>1&&i>=t+e.length&&(a.substr(t+1,e.length)===e||a.substr(t,e.length)===e)&&i<=n||1===l.length&&i>=t+e.length&&i<=n?e:void 0).filter(ec)[0]}).filter(ec);if(s.isEmpty())return null;let[d,u]=s.entrySeq().first();return{activeOffsetKey:d,activeTrigger:u}}(e,t,this.props.mentionTriggers);if(!l)return(()=>(this.props.store.resetEscapedSearch(),this.closeDropdown(),e))();let n=this.activeOffsetKey;return this.activeOffsetKey=l.activeOffsetKey,this.onSearchChange(e,e.getSelection(),this.activeOffsetKey,n,l.activeTrigger),!this.props.store.isEscaped(this.activeOffsetKey||"")&&this.props.store.resetEscapedSearch(),!this.props.open&&!this.props.store.isEscaped(this.activeOffsetKey||"")&&this.openDropdown(),n!==this.activeOffsetKey&&this.setState({focusedOptionIndex:0}),e}),(0,el._)(this,"onSearchChange",(e,t,l,n,r)=>{let{matchingString:i}=B(e,t,[r]);(this.lastActiveTrigger!==r||this.lastSearchValue!==i||l!==n)&&(this.lastActiveTrigger=r,this.lastSearchValue=i,this.props.onSearchChange({trigger:r,value:i}))}),(0,el._)(this,"onDownArrow",e=>{e.preventDefault();let t=this.state.focusedOptionIndex+1;this.onMentionFocus(t>=this.props.suggestions.length?0:t)}),(0,el._)(this,"onTab",e=>{e.preventDefault(),this.commitSelection()}),(0,el._)(this,"onUpArrow",e=>{if(e.preventDefault(),this.props.suggestions.length>0){let e=this.state.focusedOptionIndex-1;this.onMentionFocus(e<0?this.props.suggestions.length-1:e)}}),(0,el._)(this,"onEscape",e=>{e.preventDefault(),this.props.store.escapeSearch(this.activeOffsetKey||""),this.closeDropdown(),this.props.store.setEditorState(this.props.store.getEditorState())}),(0,el._)(this,"onMentionSelect",e=>{if(!e)return;this.props.onAddMention&&this.props.onAddMention(e),this.closeDropdown();let t=O(this.props.store.getEditorState(),e,this.props.mentionPrefix,this.lastActiveTrigger||"",this.props.entityMutability);this.props.store.setEditorState(t)}),(0,el._)(this,"onMentionFocus",e=>{let t=`mention-option-${this.key}-${e}`;this.props.ariaProps.ariaActiveDescendantID=t,this.setState({focusedOptionIndex:e}),this.props.store.setEditorState(this.props.store.getEditorState())}),(0,el._)(this,"commitSelection",()=>{let e=this.props.suggestions[this.state.focusedOptionIndex];return this.props.store.getIsOpened()&&e?(this.onMentionSelect(e),"handled"):"not-handled"}),(0,el._)(this,"openDropdown",()=>{this.props.callbacks.handleReturn=this.commitSelection,this.props.callbacks.keyBindingFn=e=>{40===e.keyCode&&this.onDownArrow(e),38===e.keyCode&&this.onUpArrow(e),27===e.keyCode&&this.onEscape(e),9===e.keyCode&&this.onTab(e)};let e=`mention-option-${this.key}-${this.state.focusedOptionIndex}`;this.props.ariaProps.ariaActiveDescendantID=e,this.props.ariaProps.ariaOwneeID=`mentions-list-${this.key}`,this.props.ariaProps.ariaHasPopup="true",this.props.ariaProps.ariaExpanded=!0,this.props.onOpenChange(!0)}),(0,el._)(this,"closeDropdown",()=>{this.props.callbacks.handleReturn=void 0,this.props.callbacks.keyBindingFn=void 0,this.props.ariaProps.ariaHasPopup="false",this.props.ariaProps.ariaExpanded=!1,this.props.ariaProps.ariaActiveDescendantID=void 0,this.props.ariaProps.ariaOwneeID=void 0,this.props.onOpenChange(!1)}),this.props.callbacks.onChange=this.onEditorStateChange}}(0,el._)(eh,"propTypes",{open:er().bool.isRequired,onOpenChange:er().func.isRequired,entityMutability:er().oneOf(["SEGMENTED","IMMUTABLE","MUTABLE"]),entryComponent:er().func,onAddMention:er().func,suggestions:er().array.isRequired});let ep="undefined"!=typeof window?o.useLayoutEffect:o.useEffect;function eg(e){let t=(0,o.useRef)(),l=e=>{e.store.updatePortalClientRect(e.offsetKey,()=>t.current.getBoundingClientRect())};return ep(()=>(e.store.register(e.offsetKey),e.store.setIsOpened(!0),l(e),e.store.setEditorState(e.store.getEditorState()),()=>{e.store.unregister(e.offsetKey),e.store.setIsOpened(!1),e.store.setReferenceElement(null)}),[]),(0,o.useEffect)(()=>{l(e)}),(0,i.jsx)("span",{ref:l=>{t.current=l,e.store.setReferenceElement(l)},children:e.children})}var e_=e=>(t,l,n)=>{t.findEntityRanges(t=>{let l=t.getEntity();return null!==l&&e.some(e=>n.getEntity(l).getType()===U(e))},l)};l("954372");let ex=/\s/,ew=(e,t,l,n)=>{let r=t.getText();t.findEntityRanges(e=>!e.getEntity(),(t,i)=>{let o=r.slice(t,i);l?!function(e,t,l,n){let r,i;let o=e.lastIndex;for(;null!==(r=e.exec(t));){var a,s;if(e.lastIndex===o)break;o=e.lastIndex;let t=(i=l+r.index)+r[0].length;a=0,s=r.index;n(i,t)}}(e,o,t,n):!function(e,t,l,n){let r,i;let o=e.lastIndex;for(;null!==(r=e.exec(t))&&e.lastIndex!==o;){;o=e.lastIndex;let a=(i=l+r.index)+r[0].length;ex.test(t[i])&&(i+=1),n(i,a)}}(e,o,t,n)})};var eC=(e,t,l)=>{let n=`(${e.map(e=>V()(e)).join("|")})`,r=t?RegExp(`${n}(${l}|\\s)*`,"g"):RegExp(`(\\s|^)${n}${l}*`,"g");return(e,l)=>{ew(r,e,t,l)}},ey=l("784492"),eI=e=>{let{suggestions:t,onSearchChange:l,popoverContainer:n,hasMore:r}=e,{editorState:s,awemeInfo:d,addUserMention:u,isAtIconSelected:c,setIsAtIconSelected:v,setIsAtIconPoint:m}=(0,o.useContext)(h);return((0,ey.Z)(()=>{var e,t,n,r,i;let o=s.getCurrentContent(),d=o.getPlainText(),u=s.getSelection().getAnchorOffset(),c=null===(n=(0,a.convertToRaw)(o))||void 0===n?void 0:null===(t=n.blocks)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.entityRanges,f=null==c?void 0:null===(i=c.reverse)||void 0===i?void 0:null===(r=i.call(c))||void 0===r?void 0:r.find(e=>e.offset<u);if(d){if(f){let{offset:e,length:t}=f,n=d.substring(e+t-1,u),r=n.indexOf("@");r>-1?l({value:n.slice(r+1)}):v(!1)}else{let e=d.indexOf("@");e>-1?l({value:d.slice(e+1)}):v(!1)}}else v(!1),m(!1),l({value:""})},[s,l]),c&&((null==t?void 0:t.length)||!1!==r))?(0,i.jsx)(n,{children:null==t?void 0:t.map(e=>(0,i.jsx)("div",{id:`search_${e.uid}`,children:(0,i.jsx)(P,{mention:e,awemeInfo:d,onClick:t=>{t.stopPropagation(),S.Z.sendLog("commentAtClick",{author_id:`${null==d?void 0:d.authorUserId}`,group_id:null==d?void 0:d.awemeId,log_pb:null==d?void 0:d.logPb,enter_from:(0,N.vM)(),to_user_id:null==e?void 0:e.uid}),u(e),l({value:""}),v(!1),m(!1)}})},`search_${e.uid}`))}):null};l("418982"),l("130604");var eb=o.forwardRef(function(e,t){let{placeholder:l,onChange:d,loadSearchAtData:m,loadMoreDefaultAtData:f,atUserDefaultData:h,atUserSearchData:p,onEditFocus:g,onEditBlur:_,awemeInfo:x,handlePublishClick:w,isAtIconSelected:C,setIsAtIconSelected:y,refOuterContainer:I,setIsAtIconPoint:b,isAtIconPoint:j,className:k,readOnly:N,maxLength:S,player:E}=e,L=(0,o.useRef)(null),T=(0,o.useRef)(null),[M,R]=(0,o.useState)(()=>a.EditorState.createEmpty()),P=(0,o.useRef)([]),D=(0,o.useRef)(!1),[F,V]=(0,o.useState)(!1),B=(0,o.useMemo)(()=>(function(){let e,t,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o={keyBindingFn:void 0,handleKeyCommand:void 0,handleReturn:void 0,onChange:void 0},a={ariaHasPopup:"false",ariaExpanded:!1,ariaOwneeID:void 0,ariaActiveDescendantID:void 0},s=(0,Q.Map)(),d=(0,Q.Map)(),u=!1,c={getEditorState:void 0,setEditorState:void 0,getPortalClientRect:e=>d.get(e)(),getAllSearches:()=>s,isEscaped:t=>e===t,escapeSearch:t=>{e=t},resetEscapedSearch:()=>{e=void 0},register:e=>{s=s.set(e,e)},updatePortalClientRect:(e,t)=>{d=d.set(e,t)},unregister:e=>{s=s.delete(e),d=d.delete(e)},getIsOpened:()=>u,setIsOpened:e=>{u=e},getReferenceElement:()=>t,setReferenceElement:e=>{t=e}},{mentionPrefix:v="",theme:m={},positionSuggestions:f,mentionComponent:h,mentionSuggestionsComponent:p=eh,entityMutability:g="SEGMENTED",mentionTrigger:_="@",mentionRegExp:x="[\\w-\xc0-\xd6\xd8-\xf6\xf8-\xffĀ-ňŊ-ſА-я぀-ゟ゠-ヿ㄰-㆏가-힣一-龥؀-ۿ\xc0-ỹ。.><》《+。。,，]",supportWhitespace:w=!1,popperOptions:C}=l,y="string"==typeof _?[_]:_,I={ariaProps:a,callbacks:o,theme:m,store:c,entityMutability:g,positionSuggestions:f,mentionTriggers:y,mentionPrefix:v,popperOptions:C};return{MentionSuggestions:e=>(0,i.jsx)(p,(0,n._)({},e,I)),decorators:[{strategy:e_(y),component:e=>(0,i.jsx)(et,(0,r._)((0,n._)({},e),{theme:m,mentionComponent:h}))},{strategy:eC(y,w,x),component:e=>(0,i.jsx)(eg,(0,r._)((0,n._)({},e),{store:c}))}],getAccessibilityProps:()=>({role:"combobox",ariaAutoComplete:"list",ariaHasPopup:a.ariaHasPopup,ariaExpanded:a.ariaExpanded,ariaActiveDescendantID:a.ariaActiveDescendantID,ariaOwneeID:a.ariaOwneeID}),initialize:e=>{let{getEditorState:t,setEditorState:l}=e;c.getEditorState=t,c.setEditorState=l},keyBindingFn:e=>o.keyBindingFn&&o.keyBindingFn(e),handleReturn:e=>o.handleReturn&&o.handleReturn(e),onChange:e=>o.onChange?o.onChange(e):e}})({entityMutability:"IMMUTABLE",mentionPrefix:"@",mentionTrigger:"@",supportWhitespace:!0,mentionComponent:e=>(0,i.jsx)("span",{className:u()(e.className,"douyin_mention_word"),children:e.children})}),[]),{MentionSuggestions:U}=B||{},O=[];O.unshift(B);let $=(0,o.useCallback)(e=>{let t=W(M,e);R(t),null==d||d(G(t)),c.emit(c.EVENT.videoStopPlayNext)},[M,d]);(0,o.useImperativeHandle)(t,()=>({addUserMention:e=>{let t=z(M,e);R(t),null==d||d(G(t)),c.emit(c.EVENT.videoStopPlayNext)},addEmoji:e=>{let t=Z(M,{text:`${(null==e?void 0:e.text)||"[微笑]"}`});R(t),null==d||d(G(t)),c.emit(c.EVENT.videoStopPlayNext)},getCommentInfo:()=>{let e=K(M);return(0,r._)((0,n._)({},e),{pastedText:P.current})},getCommentText:()=>G(M),clearInput:()=>new Promise(e=>{R(t=>(P.current=[],e(t),a.EditorState.createEmpty())),null==d||d("")}),resetInput:e=>{let t=e.getSelection(),l=e.getCurrentContent().getBlockMap().last(),n=t.merge({anchorKey:l.getKey(),anchorOffset:l.getLength(),focusKey:l.getKey(),focusOffset:l.getLength(),isBackward:!1,hasFocus:!0}),r=a.EditorState.forceSelection(e,n);R(r),null==d||d(G(r))},focus:()=>{setTimeout(()=>{var e,t;null===(t=L.current)||void 0===t||null===(e=t.focus)||void 0===e||e.call(t)},200)},blur:()=>{setTimeout(()=>{var e,t;null===(t=L.current)||void 0===t||null===(e=t.blur)||void 0===e||e.call(t)},200)},addAtIcon:()=>{let e=H(M),t=a.EditorState.moveFocusToEnd(e);R(t),null==d||d(G(t))},setContent:(e,t)=>{let l=Y(M,e,t);R(l),null==d||d(G(l))}}),[M,d]);let X=(0,o.useCallback)(e=>{let{keyCode:t}=e,l=e.ctrlKey||e.metaKey;return t!==q||l?(0,a.getDefaultKeyBinding)(e):(w(),"noop")},[w,E]);return(0,o.useEffect)(()=>{V(!0)},[]),(0,i.jsx)("div",{className:u()("richtext-container",k),ref:T,children:F?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.ZP,{readOnly:N,editorState:M,onChange:e=>{R(e),null==d||d(G(e))},stripPastedStyles:!0,keyBindingFn:X,plugins:O,handlePastedText:(e,t,l)=>S>0&&l.getCurrentContent().getPlainText().length+e.length>S?"handled":(P.current.push(e),"not-handled"),placeholder:(0,i.jsx)(v.Z,{text:l}),handleBeforeInput:(e,t)=>S>0&&t.getCurrentContent().getPlainText().length+e.length>S?"handled":"not-handled",ref:L,onFocus:()=>{var e;!D.current&&setTimeout(()=>{R(e=>{let t=e.getCurrentContent().getLastBlock(),l=t.getKey(),n=t.getLength(),r=a.SelectionState.createEmpty(l).merge({anchorOffset:n,focusOffset:n});return a.EditorState.forceSelection(e,r)})}),D.current=!0,null==g||g(),c.emit(c.EVENT.videoStopPlayNext),j&&(null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.length)>0&&y(!0)},onBlur:()=>{D.current=!1,null==_||_(),c.emit(c.EVENT.videoRemoveStopPlayNext)},isAtIconSelected:C}),(0,i.jsx)(A,{SuggestionComponent:C?eI:U,loadSearchAtData:m,loadMoreDefaultAtData:f,atUserDefaultData:h,atUserSearchData:p,awemeInfo:x,editorState:M,addUserMention:$,isAtIconSelected:C,setIsAtIconSelected:y,refOuterContainer:I,setIsAtIconPoint:b})]}):(0,i.jsx)("div",{className:"placeholder-default",children:(0,i.jsx)("span",{children:l})})})})},954576:function(e,t,l){var n=l(520739),r=l(872136),i=l(467403);let o=(0,n._)({},(0,i.n)({includeEnterMethod:!0,includeExtendedParams:!0}),(0,i.z)());t.Z=new r.h(o)},57346:function(e,t,l){var n=l(563097),r=l(88648),i=l(713097),o=l.n(i),a=l(162095),s=l(477667),d=l(905771),u=l(146725),c=l(115627);t.Z=e=>{let{title:t,titleChildren:l,contentText:i,children:v,confirmText:m,cancelText:f,closeButton:h,cancelButton:p=!0,okBtnInRight:g,onConfirm:_,onCancel:x,onClose:w,className:C,show:y,setShow:I}=e,b=(0,r.useCallback)(()=>{if(!w||!1!==w())I(!1)},[w,I]),j=(0,r.useCallback)(()=>{if(!_||!1!==_())I(!1)},[_,I]),k=(0,r.useCallback)(()=>{if(!x||!1!==x())I(!1)},[x,I]);return(0,n.jsx)("div",{children:y&&(0,n.jsx)(u.T6,{className:d.default.mask,onClick:b,children:(0,n.jsxs)("div",{className:o()(d.default.modalContainer,C),children:[h&&(0,n.jsx)("div",{className:d.default.close,onClick:b,children:(0,n.jsx)(c.Z,{width:36,height:36,src:s.Z,color:"#A9AAB7"})}),t&&(0,n.jsx)("div",{className:d.default.title,children:t}),(0,n.jsxs)("div",{className:d.default.content,children:[i&&(0,n.jsx)("p",{children:i}),v]}),(0,n.jsxs)("div",{className:d.default.footer,children:[p&&(0,n.jsx)(a.Button,{theme:"solid",className:d.default.button,type:"secondary",onClick:k,children:f||"取消"}),(0,n.jsx)(a.Button,{theme:"solid",className:d.default.button,type:"primary",onClick:j,children:m||"确定"})]})]})})})}},916572:function(e,t,l){l.d(t,{eD:function(){return x}}),l("874386");var n=l("563097"),r=l("88648"),i=l("713097"),o=l.n(i),a=l("503483"),s=l("828782"),d=l("529596"),u=l("725887"),c=l("523659"),v=l("520739"),m=l("878389");let f=(0,r.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,m._)((0,v._)({width:14,height:15,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.646 7.146L8 9.793V2.5H7v7.293L4.354 7.146l-.708.708 3.5 3.5.354.353.354-.353 3.5-3.5-.708-.708zM3 12.5v1h9v-1H3z",fill:"#fff",stroke:"#fff",strokeWidth:".5"})})));var h=l("314703"),p=l("115627"),g=l("717864"),_=l("664959");let x=(0,r.memo)(e=>{let{className:t,hintText:l,log:i,isLogin:v,defaultHeighlight:m=!0,isShow:x,style:w,textContainerClassName:C,showDivider:y=!1,defaultShow:I=!0,showAnimation:b=!1,downloadHintClassName:j,downloadButtonClassNmae:k,autoCancelHeighlight:N=!0,onClick:S,onVisibilityChange:E}=e,{downloadHref:L,downloadAttr:T}=(0,g.o)({channelId:i.channelId}),[M,R]=(0,a.C)({value:x,defaultValue:I}),[P,D]=(0,r.useState)(m),A=(0,r.useRef)(null);return((0,r.useEffect)(()=>{null==E||E(M)},[M,E]),(0,r.useEffect)(()=>{(async()=>{!(0,s.DT)()&&!(0,s.tq)()&&(0,_.D5)()&&!M&&v&&!await (0,d.Y)(!0)&&R(!0)})(),M&&h.Z.sendLog("addToDesktopShow",{enter_from:null==i?void 0:i.enterFrom,type:null==i?void 0:i.type,guide_type:null==i?void 0:i.guideType,channel_id:null==i?void 0:i.channelId,ug_channel_id:u.Le.getConfig(u.gI.WebUgChannelId)||""})},[M,v,i,R]),(0,r.useEffect)(()=>(P&&!A.current&&M&&N&&(A.current=setTimeout(()=>{D(!1),clearTimeout(A.current),A.current=null},5e3)),()=>{clearTimeout(A.current),A.current=null}),[P,M]),b||M)?(0,n.jsxs)("div",{className:o()(c.default.container,t,{[c.default.withDivider]:y,[c.default.hide]:!M}),style:w,children:[(0,n.jsxs)("div",{className:o()(c.default.downloadHint,j),children:[(0,n.jsx)("div",{className:o()(c.default.downloadHintText,C),children:null!=l?l:"下载电脑客户端，随时访问抖音"}),(0,n.jsxs)("a",{href:L,download:T,className:o()(c.default.downloadButton,k,{[c.default.highlight]:P}),onClick:()=>{if(S)return S(),!1;h.Z.sendLog("addToDesktopClick",{enter_from:null==i?void 0:i.enterFrom,type:null==i?void 0:i.type,guide_type:null==i?void 0:i.guideType,group_id:null==i?void 0:i.groupId,channel_id:null==i?void 0:i.channelId,ug_channel_id:u.Le.getConfig(u.gI.WebUgChannelId)||""})},children:[(0,n.jsx)(p.Z,{className:c.default.downloadIcon,src:f,width:14,height:14,viewBox:"0 0 14 14"}),(0,n.jsx)("span",{children:"下载"})]})]}),y&&(0,n.jsx)("div",{className:c.default.divider})]}):(0,n.jsx)(n.Fragment,{})})},714102:function(e,t,l){l.d(t,{$:function(){return h}}),l(874386),l(527785),l(675373);var n=l(563097),r=l(88648),i=l(713097),o=l.n(i),a=l(549519),s=l(802222),d=l(721676),u=l(970187),c=l(346674),v=l(901046),m=l(550926),f={light:"isLight",dark:"isDark"};function h(e){var t,l;let{theme:i,linkItems:h,subLinkItems:p,innerLink:g=[],showInnerLink:_=!0,fetchInnerLinkAfterLCP:x=!1,className:w,defaultValue:C}=e,[y,I]=(0,r.useState)(()=>null==g?void 0:g.reduce((e,t)=>e.concat(null==t?void 0:t.links),[])),b=(0,m.u)({defaultValue:C}),j=h||(null==b?void 0:null===(t=b.footer)||void 0===t?void 0:t.links)||[],k=p||(null==b?void 0:null===(l=b.footer)||void 0===l?void 0:l.subLinks)||[];return(0,r.useEffect)(()=>{let e=null==g?void 0:g.reduce((e,t)=>e.concat(null==t?void 0:t.links),[]),t=!1;if(!(null==e?void 0:e.length)&&_){let e=()=>{(async()=>{var e,l;let[n,r]=await Promise.all([(0,u.Ws)(),(0,u.F8)()]),i=(null==n?void 0:n.statusCode)===0?null==n?void 0:n.data:[],o=(null==r?void 0:r.statusCode)===0?[{links:null==r?void 0:null===(l=r.data)||void 0===l?void 0:null===(e=l.map)||void 0===e?void 0:e.call(l,e=>({url:null==e?void 0:e.url,anchor:null==e?void 0:e.keyword}))}]:[];!t&&I(i.concat(o).reduce((e,t)=>e.concat(null==t?void 0:t.links),[]))})()};x?s.H(e):e()}return()=>{t=!0}},[]),(0,r.useEffect)(()=>{_&&!(null==y?void 0:y.length)&&(null==g?void 0:g.length)&&I(null==g?void 0:g.reduce((e,t)=>e.concat(null==t?void 0:t.links),[]))},[g,_,y]),(0,n.jsx)("footer",{className:o()(f[i],w),"data-e2e":"page-footer",children:(0,n.jsxs)("div",{className:c.default.footerWrapper,children:[(0,n.jsxs)(a.NoSSR,{children:[(0,n.jsx)("div",{className:c.default.linkItems,children:!!j.length&&j.map((e,t)=>(0,n.jsx)("div",{className:c.default.linkItem,children:(0,n.jsx)(v.a,{href:e.url,target:"_blank",rel:`noopener noreferrer ${(0,d.P)(e.title)}`,isNeedSeoOpt:!(null==e?void 0:e.needExtraParams),children:e.title})},t))}),!!k.length&&k.map((e,t)=>(0,n.jsx)("div",{className:c.default.subLinkItems,children:!!e.length&&e.map((e,t)=>(0,n.jsxs)("div",{className:c.default.subLinkItem,children:[e.icon&&(0,n.jsx)("img",{className:c.default.icon,src:e.icon,alt:"icon"}),e.url?(0,n.jsx)(v.a,{href:e.url,target:"_blank",rel:"noopener noreferrer nofollow",children:e.title}):(0,n.jsx)("span",{children:e.title})]},t))},`group_${t}`))]}),!!y.length&&_&&(0,n.jsxs)("div",{className:c.default.innerLinkContainer,children:[(0,n.jsx)("span",{className:c.default.divide}),(0,n.jsx)("span",{className:c.default.innerLinkTitle,children:"热门："}),y.map(e=>(0,n.jsx)("span",{className:c.default.innerLinkItem,children:(0,n.jsx)(v.a,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.anchor})},e.url))]})]})})}},310528:function(e,t,l){l.d(t,{$:function(){return u}}),l(874386);var n=l(563097),r=l(88648),i=l(12912),o=l(852664),a=l(434144),s=l(565024),d=l(987475);function u(e){let{children:t,mobileUrl:l,nonce:u,applicableDevice:c="pc,mobile"}=e,[v,m]=r.useState(!1);r.useEffect(()=>{(0,o.GP)()&&m(!0)},[]);let f=r.useMemo(()=>(0,a.Dr)(s.Q.getItem({sKey:d.CookieKeys.Theme})),[]);return(0,n.jsxs)(i.Helmet,{children:[(0,n.jsx)("meta",{charSet:"utf-8"}),t,(0,n.jsx)("meta",{httpEquiv:"Cache-Control",content:"no-transform"}),(0,n.jsx)("meta",{httpEquiv:"Cache-Control",content:"no-siteapp"}),(0,n.jsx)("meta",{httpEquiv:"x-dns-prefetch-control",content:"on"}),(0,n.jsx)("meta",{name:"applicable-device",content:l?"pc":c}),l&&(0,n.jsx)("meta",{name:"mobile-agent",content:`format=[html5]; url=${l}`}),l&&(0,n.jsx)("link",{rel:"alternate",media:"only screen and (max-width: 640px)",href:l}),(0,n.jsx)("meta",{name:"baidu-site-verification",content:"code-2WPwEy0bEv"}),(0,n.jsx)("meta",{name:"google",content:"notranslate"}),(0,n.jsx)("meta",{name:"theme-color",content:`${"light"===f?"#ffffff":"#161823"}`}),(0,n.jsx)("script",{nonce:u,children:`
        (function(win, export_obj) {
          win['TeaAnalyticsObject'] = export_obj;
          if (!win[export_obj]) {
              function _collect() {
                  _collect.q.push(arguments);
              }
              _collect.q = _collect.q || [];
              win[export_obj] = _collect;
          }
          win[export_obj].l = +new Date();
      })(window, 'collectEvent');
      `}),!v&&(0,n.jsx)("link",{rel:"manifest",href:"https://p-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/pwa/manifest.json"}),(0,n.jsx)("link",{href:"//fonts.bytedance.com/dfd/api/v1/css?family=DFPKingGothicGB-Medium:500&display=swap",rel:"stylesheet",media:"print",id:"media1"}),(0,n.jsx)("link",{href:"//fonts.bytedance.com/dfd/api/v1/css?family=DFPKingGothicGB-Regular:500&display=swap",rel:"stylesheet",media:"print",id:"media2"}),(0,n.jsx)("script",{nonce:u,children:`
          document.getElementById("media1").addEventListener("load", function () {
            this.media = "all";
            this.onload = null;
          });
          document.getElementById("media2").addEventListener("load", function () {
            this.media = "all";
            this.onload = null;
          });
        `})]})}},666592:function(e,t,l){l.d(t,{a:function(){return a}});var n=l(88648),r=l(742740),i=l(896117),o=l(509090);let a=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:a,setAwemeInfoList:s,userAwemeList:d,scrollRef:u,modalVideoIndex:c,additionalDistance:v=-60,refNextVideoCallBack:m}=e,f=(0,n.useRef)(t),h=(0,n.useRef)(!1),p=(0,n.useRef)(c);return(0,n.useEffect)(()=>{p.current=c},[c]),(0,n.useEffect)(()=>()=>{var e;if(p.current!==f.current){if("personal_homepage"===(0,r.yW)()||"others_homepage"===(0,r.yW)()){let e=window.innerWidth<=i.I?3:6,t=t=>Math.floor(t/e);if(t(p.current)===t(f.current))return}null===(e=u.current)||void 0===e||e.locateSelectVideo(f.current,v)}},[]),(0,n.useEffect)(()=>{(null==a?void 0:a.length)>c&&-1===t&&l(c||0)},[a]),(0,n.useEffect)(()=>{s(d)},[d]),(0,n.useEffect)(()=>{5>Math.abs(Number(null==a?void 0:a.length)-t)&&-1!==t&&!h.current&&(async()=>{var e,t,l;(null===(t=u.current)||void 0===t?void 0:null===(e=t.getHasMore)||void 0===e?void 0:e.call(t))?(h.current=!0,await (null===(l=u.current)||void 0===l?void 0:l.loadMoreData()),h.current=!1):m.current=()=>o.F.info("暂时没有更多了")})(),f.current=t},[t,a]),null}},657055:function(e,t,l){l.d(t,{Z:function(){return S}});var n=l("520739"),r=l("878389");l("874386"),l("268917"),l("675373");var i=l("563097"),o=l("88648"),a=l("128231"),s=l.n(a),d=l("713097"),u=l.n(d),c=l("576660"),v=l("832052"),m=l("223355"),f=l("433294"),h=l("162095"),p=l("124919"),g=l("861525");function _(e){let{reload:t,isLiveCategory:l}=e;return(0,i.jsxs)("div",{className:f.default.noMoreText,children:[l?"暂时没有更多了，可以一会":"服务异常，重新",(0,i.jsx)("span",{onClick:t,className:f.default.opBtn,children:"刷新"}),l?"试试":"拉取数据"]})}function x(e){let{statusCode:t,dataList:l,renderNoDataError:n,loginNeedLogMethod:r,panelNoData:o,panelLoginError:a,panelNoMoreData:s,panelReloadDataError:d,reload:u,hasMoreData:c,onClickPauseBtn:v,isNeedFirstPause:m,isClickMore:x,upperLoadingLayer:w=!1,isLiveCategory:C=!1}=e,y=null;return 2===t?y=a||(0,i.jsx)(g.x,{enterMethod:r}):0===t?y=c?m&&!x?(0,i.jsx)("div",{className:f.default.firstReqBtnWrapper,children:(0,i.jsx)(h.Button,{theme:"solid",type:"secondary",style:{width:"100%"},size:"small",onClick:v,children:"点击查看更多"})}):(0,i.jsx)(p.g,{text:"",upperLayer:w}):0===l.length?o||(0,i.jsx)("div",{className:f.default.noMoreText,children:"没有数据"}):s||(0,i.jsx)("div",{className:f.default.noMoreText,children:"暂时没有更多了"}):(0===l.length&&(y=null==n?void 0:n(t)),!y&&(y=d||(0,i.jsx)(_,{reload:u,isLiveCategory:C}))),(0,i.jsx)(i.Fragment,{children:y})}var w=l("393260"),C=l("927490"),y=l("582296"),I=l("66047"),b=l("235584"),j=l("109539");let{WHALE_CUT_HEADER:k}=c,N=o.memo(function(e){let{itemClassName:t,itemStyle:l,index:n,ItemCompnent:r,renderItem:a,itemInfo:s,directRenderItem:d,withMask:c,isHighLight:v,getMaskIndex:m}=e,[h,p]=(0,o.useState)(v);return d?a(s,n,s.scrollLogPb):((0,o.useEffect)(()=>{if(p(v),v){let e=setTimeout(()=>{p(!1)},3e3);return()=>{clearTimeout(e)}}},[v]),(0,i.jsxs)("li",{className:u()(t,f.default.item,{[f.default.coveredMask]:c,[f.default.highLight]:h&&v}),style:l,children:[r?(0,i.jsx)(r,{itemInfo:s,index:n,logPb:s.scrollLogPb}):a(s,n,s.scrollLogPb),null==c?void 0:c(s,null==m?void 0:m(s,n))]}))});var S=o.forwardRef(function(e,t){var l,a;let{defaultDataList:d=[],defaultHasMoreFlag:c=!0,defaultStatusCode:h=0,fetchMoreData:p,scrollContainerEl:g,containerClassName:_="",itemClassName:S="",itemStyle:E={},pageId:L="",renderItem:T,isHorizontal:M=!1,pause:R=!1,reloadNum:P=0,skeletonNum:D=20,renderSkeleton:A=null,panelLoginError:F=null,panelReloadDataError:V=null,panelNoData:B=null,panelNoMoreData:U=null,renderNoDataError:O=null,handleLoadEnd:H,dataFilter:W,onListRenderFinish:z,loginNeedLogMethod:Z="",needSkelton:$=!1,needFirstPause:K=!1,SkeletonComponent:G=null,ItemCompnent:Y=null,setDataList:q=null,retryTimes:Q=0,defaultWhaleDecisionCustom:X="",listFilterFn:J,directRenderItem:ee=!1,withMask:et,containerNoLineHeight:el=!1,needReCheckScroll:en=!0,buttomClassName:er,scrollListStyle:ei={},blockType:eo,isLiveCategory:ea=!1,renderList:es,highLightAwemeId:ed,getMaskIndex:eu,defaultFetchAllData:ec=!1,SortComponent:ev=null,customDataListCtx:em,getSortId:ef,getItemDragDisabled:eh,onSort:ep}=e,{dispatch:eg,userInfo:{isLogin:e_=!1}={}}=(0,j.useUserInfoContext)()||{},ex=(0,I._)(),ew=d||[],[eC,ey]=(0,o.useState)({dataList:W?W(ew):ew,statusCode:h}),{dataList:eI,statusCode:eb}=eC,ej=(0,o.useRef)(c),ek=(0,o.useRef)(null),eN=(0,o.useRef)(!1),eS=(0,o.useRef)(null),eE=(0,o.useRef)(null),eL=(0,o.useRef)(null),eT=(0,o.useRef)(null),eM=(0,o.useRef)(!0),eR=(0,o.useRef)(!1),eP=(0,o.useRef)(!1),eD=(0,o.useRef)(!1),eA=(0,o.useRef)(P),eF=(0,o.useRef)(P),[eV,eB]=(0,o.useState)($),eU=(0,o.useRef)(eI),[eO,eH]=(0,o.useState)(X),eW=(0,o.useRef)(1===c&&!e_&&X===k),ez=(0,o.useRef)([]);eU.current=eI,eR.current=K,eM.current=!eI.length,eT.current=L,eE.current=M,eS.current=p,eD.current=R;let eZ=(0,o.useRef)((null==d?void 0:d.length)||0);eZ.current=(null==eI?void 0:eI.length)||0;let{blockNum:e$,setBlockNum:eK,actionCloseBlock:eG,setActionCloseBlock:eY,refBlockShowMore:eq,handleJumpBlock:eQ,refLoginBlock:eX,getBlockNum:eJ,transition:e0,isShowDebounce:e1}=(0,b._g)({effectiveTime:null==ex?void 0:null===(l=ex.authorBlock)||void 0===l?void 0:l.effective_time,type:null==ex?void 0:null===(a=ex.authorBlock)||void 0===a?void 0:a.type,abtestData:ex,isLogin:e_});(0,o.useEffect)(()=>{if(e_||eO!==k&&(!eq.current||eG)){var e;eW.current=!1,(null===(e=ez.current)||void 0===e?void 0:e.length)>0&&ey(e=>{var t;let l=[...ez.current];return ez.current=[],{statusCode:e.statusCode,dataList:null==e?void 0:null===(t=e.dataList)||void 0===t?void 0:t.concat(l)}})}else eO===k&&(eW.current=!0)},[e_,eI,eO,eG]);let e2=(0,o.useMemo)(()=>{let e=[];for(let t=0;t<D;t++)e.push({type:1,data:e});return e},[A||G?D:0]),{loadMore:e3}=(0,C.c)({refFetchMore:eS,setScrollData:ey,refLoading:eN,disableFetchRef:eW,refBlockShowMore:eq,refPageId:eT,refTotalReloadNum:eA,refAvailableReloadNum:eF,getBlockNum:eJ,actionCloseBlock:eG,whaleDecisionCustom:eO,setWhaleDecisionCustom:eH,refListLength:eZ,refLoginBlock:eX,isLogin:e_,abTestData:ex,WHALE_CUT_HEADER:k,dataFilter:W,dataListRef:eU,hasMoreRef:ej,listFilterFn:J,refScrollCheck:eL,blockType:eo,hideListRef:ez,needReCheckScroll:en}),e5=o.useCallback(async()=>{let e;for(let l=0;l<Q;l++){var t;if(!((null==(e=await e3({errorRetry:l!==Q-1}))?void 0:e.hasMore)&&(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.length)===0))break}return e},[Q,e3]),e6=(0,o.useMemo)(()=>Q?e5:e3,[e5,e3]);eL.current=o.useCallback(async()=>{if(!!ek.current&&!eD.current&&!!ej.current&&(!eR.current||!!eP.current||!!eM.current))if(eM.current)await e6();else{let e=0,t=0,l=ek.current.getBoundingClientRect();if(g){let n=g.getBoundingClientRect();e=l.right-n.right,t=l.bottom-n.bottom}else e=l.right-window.innerWidth,t=l.bottom-window.innerHeight;(null==ek?void 0:ek.current)&&!eD.current&&(!eE.current&&(t<=800||ec)?await e6():eE.current&&(e<=500||ec)&&await e6())}},[]);let e7=o.useCallback(async()=>{eP.current=!1,ey(e=>(0,r._)((0,n._)({},e),{statusCode:0})),await e6()},[]),e4=o.useCallback(e=>{eP.current=!1,ej.current=!0,!(null==e?void 0:e.length)&&eB(!0),ey(t=>(0,r._)((0,n._)({},t),{statusCode:0,dataList:e||[]})),ez.current=[]},[]);return(0,o.useImperativeHandle)(t,()=>({reload:e7,reset:e4,getTotal:()=>eI.length,getDataList:()=>eI,getStatusCode:()=>eb,getListClientRect:()=>{var e,t;return null===(t=ek.current)||void 0===t?void 0:null===(e=t.getBoundingClientRect)||void 0===e?void 0:e.call(t)},getTargetNode:function(){var e,t;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===(t=ek.current)||void 0===t?void 0:null===(e=t.childNodes)||void 0===e?void 0:e[l]},locateSelectVideo:function(e){var t,l;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,i=null===(l=ek.current)||void 0===l?void 0:null===(t=l.childNodes)||void 0===t?void 0:t[e];if(!i)return;let o=null==i?void 0:i.offsetParent,a=null==i?void 0:i.offsetTop;for(;o&&o!==document.body&&o!==g;)a+=null==o?void 0:o.offsetTop,o=o.offsetParent;(0,m.d)(g||window,a+n,r)},getHasMore:()=>ej.current,scrollCheck:()=>{eL.current()},setScrollData:e=>{ey(t=>{var l,i;let o=null==t?void 0:null===(l=t.dataList)||void 0===l?void 0:l.find(e=>e.awemeType===v.e.NoLoginVideoGuide);if(o){let l=(null==e?void 0:null===(i=e.dataList)||void 0===i?void 0:i.filter(e=>e.awemeType!==v.e.NoLoginVideoGuide))||[];return(0,r._)((0,n._)({},t,e),{dataList:[o,...l]})}return(0,n._)({},t,e)})},loadMoreData:async function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return ej.current?await e6(...t):{statusCode:0,data:[],hasMore:0,logPb:""}},resetRes:e=>{ej.current=e.hasMore,ey({statusCode:e.statusCode,dataList:e.dataList})}}),[e7,e4,eI,eb,e6,g]),(0,o.useEffect)(()=>{null==q||q(eI),eI.length>0&&(null==z||z())},[eI]),(0,o.useEffect)(()=>{if(R)return;let e=g||document,t=s()(()=>{eL.current()},50,{leading:!0,trailing:!0,maxWait:100}),l=s()(()=>{let e=ek.current.getBoundingClientRect();if(!!e.width&&!!e.height)eL.current()},50,{leading:!0,trailing:!0,maxWait:100});return!ej.current&&H&&H(),e&&ej.current&&0===eb&&(e.addEventListener("scroll",t),window.addEventListener("resize",l),t()),()=>{e&&(e.removeEventListener("scroll",t),window.removeEventListener("resize",l))}},[g,e6,H,eb,R]),(0,o.useEffect)(()=>{(null==eI?void 0:eI.length)||0!==eb||!ej.current?eB(!1):eB(!0)},[eI,ej,eb]),(0,i.jsxs)(i.Fragment,{children:[ev?(0,i.jsx)("ul",{className:u()(_,{[f.default.noLineHeight]:et||el}),ref:ek,style:ei,"data-e2e":"scroll-list",children:(0,i.jsx)(ev,{dataList:eI,setScrollData:ey,itemClassName:S,itemStyle:E,ItemCompnent:Y,renderItem:T,withMask:et,directRenderItem:ee,highLightAwemeId:ed,getMaskIndex:eu,customDataListCtx:em,onSort:ep,getSortId:ef,getItemDragDisabled:eh})}):es?(0,i.jsx)("div",{className:u()(_,{[f.default.noLineHeight]:et||el}),ref:ek,style:ei,"data-e2e":"scroll-list",children:null==es?void 0:es(eI)}):(0,i.jsxs)("ul",{className:u()(_,{[f.default.noLineHeight]:et||el}),ref:ek,style:ei,"data-e2e":"scroll-list",children:[eI.map((e,t)=>(0,o.createElement)(N,{itemClassName:S,itemStyle:E,index:t,ItemCompnent:Y,renderItem:T,withMask:et,getMaskIndex:eu,itemInfo:e,key:(null==e?void 0:e.key)||`li_${t}`,directRenderItem:ee,isHighLight:ed&&ed===(null==e?void 0:e.awemeId)})),eV&&e2.map((e,t)=>(0,i.jsx)("li",{className:u()(S,f.default.item),style:E,children:G&&(0,i.jsx)(G,{})||A()},`li_skelton_${t}`))]}),(0,i.jsx)(w.W,{abTestData:ex,refBlockShowMore:eq,actionCloseBlock:eG,isLogin:e_,setActionCloseBlock:eY,blockNum:e$,setBlockNum:eK,dispatch:eg,refLoginBlock:eX,handleJumpBlock:eQ,disableFetchRef:eW,loadMoreData:e6,handleUnLoginClick:e=>{var t,l,n;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,y.default)({success:async()=>{null==eg||eg({type:"updateUserInfo"}),eW.current=!1,eq.current=!1,e6()},enterMethod:"",headerText:"登录后查看更多作品",next:`https://${null===(n=window)||void 0===n?void 0:null===(l=n.location)||void 0===l?void 0:l.host}`})},notAnimate:!0,children:(0,i.jsx)("div",{className:u()(f.default.bottomWrap,er),style:{width:M?"auto":"100%"},children:(0,i.jsx)(x,{statusCode:eb,dataList:eI,renderNoDataError:O,loginNeedLogMethod:Z,panelNoData:B,panelLoginError:F,panelNoMoreData:U,panelReloadDataError:V,reload:e7,hasMoreData:ej.current,onClickPauseBtn:async()=>{eP.current=!0,ey(e=>(0,n._)({},e)),await e6()},isNeedFirstPause:eR.current,isClickMore:eP.current,upperLoadingLayer:!1,isLiveCategory:ea})})})]})})},393260:function(e,t,l){l.d(t,{W:function(){return u}}),l(250440);var n=l(563097);l(88648);var r=l(162095),i=l(987475),o=l(847191),a=l(786374),s=l(433294),d=l(582296);let u=e=>{var t,l;let{abTestData:u,refBlockShowMore:c,actionCloseBlock:v,isLogin:m,setActionCloseBlock:f,blockNum:h,setBlockNum:p,dispatch:g,refLoginBlock:_,handleJumpBlock:x,disableFetchRef:w,loadMoreData:C,handleUnLoginClick:y,transition:I,notAnimate:b,children:j}=e;if([2,4].includes(null==u?void 0:null===(t=u.authorBlock)||void 0===t?void 0:t.type)&&c.current&&!v&&!m)return(0,n.jsx)(a.w,{close:()=>{c.current=!1,f(!0),(0,o.qQ)(i.LocalStorageKeys.AuthorBlock,{lastTimes:Date.now(),actionClose:!0})},blockNum:h,enterMethod:"authorcard_force_qrcode",change:()=>{null==g||g({type:"updateUserInfo"}),c.current=!1},onShow:()=>{[3,4].includes(null==u?void 0:u.authorBlock.type)&&_.current&&p(e=>{let t=e<2?e+1:e;return e<2&&(0,o.qQ)(i.LocalStorageKeys.AuthorBlock,{total:t,lastTimes:Date.now()}),t})},text:"登录查看更多视频",transition:I,notAnimate:b});if((null==u?void 0:null===(l=u.authorBlock)||void 0===l?void 0:l.type)&&c.current&&!v&&!m)return(0,n.jsx)(a.E,{isDetail:!1,blockNum:h,refBlockShowMore:c.current,handleJumpBlock:x,handleUnLogin:e=>{var t,l,n;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,d.default)({success:async()=>{null==g||g({type:"updateUserInfo"}),w.current=!1,c.current=!1,C()},enterMethod:"authorcard_force_click",headerText:"登录后查看更多作品",next:`https://${null===(n=window)||void 0===n?void 0:null===(l=n.location)||void 0===l?void 0:l.host}`})},text:"登录查看更多视频",blockText:"跳过登录，继续看视频",enterMethod:"authorcard_force_click",onShow:()=>{[3,4].includes(null==u?void 0:u.authorBlock.type)&&p(e=>{let t=e<2?e+1:e;return e<2&&(0,o.qQ)(i.LocalStorageKeys.AuthorBlock,{total:t,lastTimes:Date.now()}),t})}});if(!m&&w.current)return(0,n.jsxs)("div",{className:s.default.loginBtnWrapper,children:[(0,n.jsx)("div",{children:"登录后查看更多作品"}),(0,n.jsx)(r.Button,{theme:"solid",className:s.default.loginBtn,onClick:y,children:"立即登录"})]});else return j}},861525:function(e,t,l){l.d(t,{x:function(){return u}});var n=l("563097"),r=l("88648"),i=l("742740"),o=l("433294"),a=l("872136"),s=new a.h({loiginButtonClick:{eventName:"login_button_click",params:{enter_from:"",url_path:""}},loiginButtonShow:{eventName:"login_button_show",params:{enter_from:"",url_path:""}}}),d=l("582296");function u(e){let{enterMethod:t}=e;return(0,r.useEffect)(()=>{s.sendLog("loiginButtonShow",{enter_from:(0,i.yW)(),url_path:window.location.pathname||""})},[]),(0,n.jsxs)("div",{className:o.default.abContainer,children:[(0,n.jsx)("div",{className:o.default.abNoMoreText,children:"登录后可查看更多精彩视频"}),(0,n.jsx)("div",{className:o.default.abOpBtn,onClick:()=>{(0,d.default)({success:()=>{location.reload()},enterMethod:t}),s.sendLog("loiginButtonClick",{enter_from:(0,i.yW)(),url_path:window.location.pathname||""})},children:"点击登录"})]})}},927490:function(e,t,l){l.d(t,{c:function(){return s}});var n=l(520739),r=l(878389);l(250440),l(675373);var i=l(88648),o=l(987475),a=l(623527);let s=e=>{let{refFetchMore:t,setScrollData:l,refLoading:s,disableFetchRef:d,refBlockShowMore:u,refPageId:c,refTotalReloadNum:v,refAvailableReloadNum:m,getBlockNum:f,actionCloseBlock:h,whaleDecisionCustom:p,setWhaleDecisionCustom:g,refListLength:_,refLoginBlock:x,isLogin:w,abTestData:C,WHALE_CUT_HEADER:y,dataFilter:I,dataListRef:b,hasMoreRef:j,listFilterFn:k,refScrollCheck:N,blockType:S,hideListRef:E,needReCheckScroll:L}=e,T=(0,i.useRef)(w);return T.current=w,{loadMore:i.useCallback(async function(){let{errorRetry:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.current){l(e=>(0,r._)((0,n._)({},e),{statusCode:1}));return}if(!s.current&&!d.current&&!u.current){s.current=!0;try{var i,w;let r=c.current,M=m.current,{statusCode:R,data:P,hasMore:D,logPb:A,whaleDecisionCustom:F,clearBefore:V=!1}=await t.current(r,M);g(F);let{actionClose:B}=f(o.LocalStorageKeys.AuthorBlock);_.current+P.length>=18&&x.current&&!T.current&&S&&([1,2].includes(null==C?void 0:null===(i=C.authorBlock)||void 0===i?void 0:i.type)||[3,4].includes(null==C?void 0:null===(w=C.authorBlock)||void 0===w?void 0:w.type)&&!(B||h))&&(u.current=!0),p===y&&(d.current=!0);let U=!1;if(s.current=!1,r===c.current){let t=I?I(P,V?[]:b.current):P,r=R;0===R&&(j.current=!!d.current||!!u.current||D),0===R&&(0===P.length&&D?M<=0&&p!==y?r=-1:m.current=M-1:m.current=v.current),t.forEach(e=>{e.scrollLogPb=A}),!(e&&-1===r)&&l(e=>{if(e.statusCode=r,0===e.statusCode){let l=V?[]:e.dataList,n=k?k(l,t):l.concat(t||[]),r=0;n.length%6!=0&&p===y&&(r=(null==n?void 0:n.length)-(null==n?void 0:n.length)%6),u.current&&n.length>18&&(r=18),r>0&&(E.current=n.slice(r),n=null==n?void 0:n.slice(0,r)),e.dataList=n}return(0,n._)({},e)}),0===r&&(U=!0)}else U=!0;return U&&j.current&&L&&setTimeout(()=>{N.current()},0),(0!==R||D&&(!P||(null==P?void 0:P.length)===0))&&a.oe.event.error({name:a.Mo.ListServerError,report:{logId:A}}),{statusCode:R,data:P,hasMore:D,logPb:A}}catch(e){s.current=!1,l(e=>(0,r._)((0,n._)({},e),{statusCode:1}))}}},[])}}},764040:function(e,t,l){l.d(t,{x:function(){return y},B:function(){return I}});var n=l("520739"),r=l("878389");l("874386"),l("779788"),l("675373");var i=l("563097"),o=l("88648"),a=l("713097"),s=l.n(a),d=l("567754"),u=l("4168"),c=l("742740"),v=l("441447"),m=l("768492");let f=(0,o.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,r._)((0,n._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M4.627 1.106a.75.75 0 0 1 1.023.279l1.494 2.614h1.708l1.494-2.614a.75.75 0 0 1 1.302.744l-1.068 1.87h2.087a2 2 0 0 1 2 2V12a2 2 0 0 1-2 2H3.333a2 2 0 0 1-2-2V5.999a2 2 0 0 1 2-2h2.083l-1.068-1.87a.75.75 0 0 1 .279-1.023zm5.282 7.453L7.526 6.995a.527.527 0 0 0-.816.44v3.128c0 .42.465.67.816.44L9.909 9.44a.527.527 0 0 0 0-.88z",fill:"#fff"})}))),h=(0,o.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,r._)((0,n._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.862 2.195c.26-.26.682-.26.943 0l5.333 5.334c.26.26.26.682 0 .942l-5.333 5.334a.667.667 0 1 1-.943-.943L9.724 8 4.862 3.138a.667.667 0 0 1 0-.943z",fill:"#fff"})}))),p=(0,o.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,r._)((0,n._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("g",{filter:"url(#tv-shadow_svg__filter0_d_2936_6928)",children:(0,i.jsx)("path",{d:"M4.627 1.106a.75.75 0 0 1 1.023.279l1.494 2.614h1.708l1.494-2.614a.75.75 0 1 1 1.302.744l-1.068 1.87h2.087a2 2 0 0 1 2 2V12a2 2 0 0 1-2 2H3.333a2 2 0 0 1-2-2V5.999a2 2 0 0 1 2-2h2.083l-1.068-1.87a.75.75 0 0 1 .279-1.023zm5.282 7.453L7.525 6.995a.527.527 0 0 0-.815.44v3.128c0 .42.465.67.815.44L9.91 9.44a.527.527 0 0 0 0-.88z",fill:"#fff"})}),(0,i.jsx)("defs",{children:(0,i.jsxs)("filter",{id:"tv-shadow_svg__filter0_d_2936_6928",x:".333",y:1.007,width:15.333,height:14.993,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dy:1}),(0,i.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),(0,i.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2936_6928"}),(0,i.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_2936_6928",result:"shape"})]})})]}))),g=(0,o.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,r._)((0,n._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("g",{filter:"url(#right-shadow_svg__filter0_d_2936_6930)",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.862 2.195c.26-.26.682-.26.943 0l5.333 5.334c.26.26.26.682 0 .942l-5.333 5.334a.667.667 0 1 1-.943-.943L9.724 8 4.862 3.138a.667.667 0 0 1 0-.943z",fill:"#fff"})}),(0,i.jsx)("defs",{children:(0,i.jsxs)("filter",{id:"right-shadow_svg__filter0_d_2936_6930",x:3.667,y:2,width:8.667,height:14,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feOffset",{dy:1}),(0,i.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),(0,i.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2936_6930"}),(0,i.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_2936_6930",result:"shape"})]})})]})));var _=l("872136");let x=new _.h({livesdkPcReplayEntranceShow:{eventName:"livesdk_pc_replay_entrance_show",params:{enter_from:"",video_id:"",author_id:""}},livesdkPcReplayEntranceClick:{eventName:"livesdk_pc_replay_entrance_click",params:{enter_from:"",video_id:"",author_id:""}}});var w=l("364404"),C=l("509090");let y=e=>{let{className:t,authorId:l,shadow:a=!1,videoId:_,autoSize:y=!1,enterFrom:I=(0,c.yW)()}=e,[b,j]=(0,o.useState)(""),k=_?{video_id:_}:{},N=(0,o.useCallback)(async()=>{if(!b){C.F.info("主播暂无回放");return}v.emit(v.EVENT.videoPause,"LiveReplayEntry_handleClick"),x.sendLog("livesdkPcReplayEntranceClick",(0,n._)({enter_from:I,author_id:l},k));let e=(0,m.Hk)(b,(0,d.stringify)({previous_page:I,extra_params:JSON.stringify((0,r._)((0,n._)({},_?{from_video_id:_}:{}),{from_author_id:l}))}));window.open(e,"_blank")},[l,_,I,b]);return((0,o.useEffect)(()=>{b&&x.sendLog("livesdkPcReplayEntranceShow",(0,n._)({enter_from:I,author_id:l},k))},[_,b]),(0,o.useEffect)(()=>{(async function e(){if(l){var e;let t=(null===(e=(await (0,u.E_)({authorId:l})).data)||void 0===e?void 0:e.replayId)||"";t&&j(t)}})()},[l]),b)?(0,i.jsxs)("div",{onClick:N,className:s()(w.default.liveReplayEntryContainer,t,{[w.default.autoSize]:y}),children:[(0,i.jsxs)("div",{className:w.default.liveReplayEntryLeft,children:[a?(0,i.jsx)(p,{className:w.default.tvIcon}):(0,i.jsx)(f,{className:w.default.tvIcon}),(0,i.jsx)("div",{className:w.default.liveReplayEntryTitle,style:{textShadow:a?"0 1px rgba(0, 0, 0, .2)":"none"},children:"精彩直播回放"})]}),a?(0,i.jsx)(g,{className:w.default.rightIcon}):(0,i.jsx)(h,{className:w.default.rightIcon})]}):null},I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return void 0!==e.find(e=>6===e.type)}},490759:function(e,t,l){l.r(t),l.d(t,{ConfirmModal:function(){return h}});var n=l(520739),r=l(878389),i=l(563097),o=l(88648),a=l(713097),s=l.n(a),d=l(162095),u=l(477667),c=l(273245),v=l(115627),m=l(146725);let f=e=>{let{children:t,title:l,onCancel:n,closeBtn:r,panelStyle:a={},titleStyle:d={},maskClosable:f=!0,className:h,renderContent:p,content:g}=e,_=o.useCallback(e=>{e.stopPropagation(),f&&n&&n(!1)},[n,f]),x=o.useCallback(e=>{e.stopPropagation(),n&&n(!1)},[n]);return(0,i.jsx)("div",{onMouseDown:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation(),children:(0,i.jsx)(m.T6,{className:c.default.mask,onClick:_,children:(0,i.jsxs)("div",{className:s()(c.default.modalContainer,h),style:a,onClick:e=>{e.stopPropagation()},children:[r&&(0,i.jsx)("div",{className:c.default.close,onClick:x,children:(0,i.jsx)(v.Z,{width:36,height:36,src:u.Z,color:"#A9AAB7"})}),l&&(0,i.jsx)("div",{className:c.default.title,style:d,children:l}),"function"==typeof p?p():g?(0,i.jsx)("p",{className:c.default.content,children:g}):void 0,(0,i.jsx)("div",{className:c.default.buttonCt,children:t})]})})})},h=e=>{let{cancelBtnText:t="取消",confirmBtnText:l="确认",onCancel:o,onConfirm:a,onlyConfirmButton:u=!1,confirmBtnProps:v={},children:m,className:h}=e;return(0,i.jsx)(f,(0,r._)((0,n._)({},e),{children:(0,i.jsxs)("div",{className:c.default.buttonSpaceBetween,children:[!u&&(0,i.jsx)(d.Button,{theme:"solid",type:"secondary",className:s()(c.default.button,c.default.cancel),onClick:()=>{o(!0)},children:t}),(0,i.jsx)(d.Button,(0,r._)((0,n._)({theme:"solid",className:s()(c.default.button),onClick:a},v),{children:l}))]})}))};t.default=h},172061:function(e,t,l){l.d(t,{P:function(){return g}});var n=l("563097"),r=l("88648"),i=l("713097"),o=l.n(i),a=l("828782"),s=l("66627"),d=l("385236"),u=l("115627"),c=l("979571"),v=l("520739"),m=l("878389");let f=(0,r.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,m._)((0,v._)({width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M17.448 17.448a1.886 1.886 0 0 1-2.668 0L9 11.668l-5.78 5.78A1.886 1.886 0 1 1 .552 14.78L6.332 9 .552 3.22A1.886 1.886 0 1 1 3.22.552L9 6.332l5.78-5.78a1.886 1.886 0 1 1 2.668 2.668L11.668 9l5.78 5.78a1.886 1.886 0 0 1 0 2.668z",fill:"#fff"})}))),h=(0,r.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,m._)((0,v._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M16 4l-8 8.14L16 20",stroke:"#fff",strokeOpacity:".7",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",shapeRendering:"crispEdges"})})));var p=l("529840");let g=e=>{let{onClick:t,isClientMiniWin:l,isBackSvg:r=!1}=e,i=(0,a.DT)()&&(0,s.y)((0,a.FJ)().awemePcClient,">=","5.4.0"),v=!(r||i);return(0,n.jsxs)("div",{className:o()(p.default.container,"isDark",{[p.default.hide]:l},i&&p.default.clientHomeStyleWrap),onClick:t,children:[(0,n.jsx)("div",{className:p.default.circle}),i&&(0,n.jsx)(c.z,{className:o()(p.default.back),svg:(0,n.jsx)(d.Z,{style:{fontSize:"24px"}})}),r&&!i&&(0,n.jsx)(u.Z,{src:h,className:p.default.back,viewBox:"0 0 24 24"}),v&&(0,n.jsx)(u.Z,{src:f,className:p.default.close,viewBox:"0 0 18 18"})]})}},27091:function(e,t,l){l.r(t),l.d(t,{default:function(){return lZ}});var n=l("520739"),r=l("878389"),i=l("368200");l("874386"),l("250440");var o=l("563097"),a=l("88648"),s=l("309931"),d=l("713097"),u=l.n(d),c=l("905003"),v=l("78776"),m=l("458343"),f=l("613480"),h=l("637632"),p=l("725887"),g=l("441447"),_=l("852664"),x=l("223526"),w=l("376978"),C=l("561756"),y=l("705171");let I=e=>{let{originAwemeInfo:t}=e,[l,n]=(0,a.useState)(""),[r,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)(t);return{slideVideoTab:l,setSlideVideoTab:n,modalAwemeInfo:o,setModalAwemeInfo:s,globalIsSideBarShow:r,setIsSideBarShowFunc:i}};var b=l("877639"),j=l.n(b),k=l("302461"),N=l("262648"),S=l("737271"),E=l("679028"),L=l("953342"),T=l("487330");let M=e=>{let{abtestData:t,closeModal:l,container:n,isClientMiniWin:r=!1,modalEnterFrom:i}=e,{pipWindow:o}=(0,T.Iq)(e=>{let{pipWindow:t}=e;return{pipWindow:t}}),s=(0,a.useRef)(null),d=(0,a.useRef)([]),u=(0,a.useRef)(null),c=(0,a.useRef)(null),v=(0,a.useRef)(0);v.current=(0,_.vU)()?120:0;let m=(0,a.useCallback)((e,t)=>{let l=0,n=e.slice(Math.max(e.length-t,1));for(let e=0;e<n.length;e++)l+=n[e];return Math.ceil(l/t)},[]),f=(0,a.useCallback)(e=>{var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||e.stopPropagation(),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{d.current=[]},400);let l=new Date().getTime(),n=e.wheelDelta||-e.deltaY||-e.detail,r=Math.max(-1,Math.min(1,n)),o=void 0!==e.wheelDeltaX||void 0!==e.deltaX,a=Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!o;d.current=[...d.current,v.current+Math.abs(n)];let f=l-u.current;u.current=l,f>400&&1===d.current.length&&(d.current=[,,].fill(d.current[0]),c.current=!1);let h=m(d.current,20),_=h>m(d.current,40);_&&!c.current&&a&&((0,p.Vv)(L.PagingType.scroll),r<0?(g.emit("changeNext",{from:"scroll",triggerFrom:i}),g.emit(g.EVENT.reportPlayNext,{clickFrom:"scroll"})):(g.emit("changePrev",{from:"scroll",triggerFrom:i}),g.emit(g.EVENT.reportPlayPrev,{clickFrom:"scroll"})),c.current=!0),!_&&c.current&&a&&(c.current=!1)},[]);return(0,a.useEffect)(()=>(null==n||n.addEventListener("wheel",f),()=>{null==n||n.removeEventListener("wheel",f)}),[n]),(0,a.useEffect)(()=>{if(o)return null==o||o.addEventListener("wheel",f),()=>{null==o||o.removeEventListener("wheel",f)}},[o,f]),(0,k.o)(()=>{let e=j()(e=>{var t,l,n,i;if(e.nativeEvent||(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.contentEditable)==="true")return;let o=e;(null===(l=e.data)||void 0===l?void 0:l.type)==="KEY_DOWN"&&(null===(n=e.data)||void 0===n?void 0:n.data)&&(o=null===(i=e.data)||void 0===i?void 0:i.data);let a=r?[N.bf.ArrowUp.keyCode]:[N.bf.ArrowUp.keyCode,N.bf.W.keyCode],s=r?[N.bf.ArrowDown.keyCode]:[N.bf.ArrowDown.keyCode,N.bf.S.keyCode],d=p.Le.getConfig(p.gI.DisableNextPre);!a.includes(o.keyCode)||o.shiftKey||d&&o.keyCode===N.bf.ArrowUp.keyCode?s.includes(o.keyCode)&&!o.shiftKey&&(!d||o.keyCode!==N.bf.ArrowDown.keyCode)&&((0,p.Vv)(L.PagingType.hotkey),g.emit("changeNext",{from:"keyboard"}),g.emit(g.EVENT.reportPlayNext,{clickFrom:"keyboard"})):((0,p.Vv)(L.PagingType.hotkey),g.emit("changePrev",{from:"keyboard"}),g.emit(g.EVENT.reportPlayPrev,{clickFrom:"keyboard"}))},500,{leading:!0,trailing:!1});return document.addEventListener("keydown",e),window.addEventListener("message",e),()=>{document.removeEventListener("keydown",e),window.removeEventListener("message",e)}},[t,r]),(0,a.useEffect)(()=>{let e=e=>{if(e.shiftKey||e.metaKey||e.ctrlKey||(0,S.r)())return;let t=p.Le.getConfig(p.gI.DisableExit);"Escape"===e.code&&!r&&!t&&l({click_method:"esc"}),e.preventDefault()};return E.k.bind("Escape",e),()=>{E.k.remove("Escape",e)}},[l,r]),null},R=e=>{let{currentNumber:t}=e,l=(0,a.useRef)(t),n=(0,a.useRef)(!0);return -1===l.current&&-1!==t&&(l.current=t),l.current!==t&&(n.current=!1),n.current};var P=l("235863");let D=e=>window.location.href.includes(e)||window.location.href.includes("user/self"),A=e=>{let{awemeInfoListRef:t,userInfo:l,currentNumber:n}=e,[r,i]=(0,a.useState)(P.Kw.NotShow);return(0,a.useEffect)(()=>{var e,r,o,a;let s=!1,d=t.current,u=async()=>{var e,t;let r=await (0,P.AH)({userId:null==l?void 0:null===(e=l.info)||void 0===e?void 0:e.uid,itemId:null===(t=d[n])||void 0===t?void 0:t.awemeId});!s&&!r.statusCode&&i(r.status)};return D(null==l?void 0:null===(e=l.info)||void 0===e?void 0:e.secUid)&&d[n]&&(null===(o=d[n])||void 0===o?void 0:null===(r=o.authorInfo)||void 0===r?void 0:r.uid)===(null==l?void 0:null===(a=l.info)||void 0===a?void 0:a.uid)&&u(),()=>{s=!0}},[n,l]),{asrState:r}};var F=l("509090"),V=l("289228"),B=l("713111");l("284961"),l("826893");var U=l("832052"),O=l("613364"),H=l("882421");let W=a.forwardRef((e,t)=>{var l,i;let{item:s,isActive:d,customProps:u,playNextFunc:v,playPrevFunc:m,swiper:f,onLivePlay:h,onLivePause:p,isShowGuide:_,useNewUserSoundGuide:x,modalEnterFrom:w}=e,{userContext:C,abtestData:y}=u,{userInfo:I}=C||{},{isLogin:b}=I||{};(0,a.useEffect)(()=>{if(d&&f)try{let e=(0,g.emitterListen)(f,"changeNext",v),t=(0,g.emitterListen)(f,"changePrev",m);return()=>{try{null==e||e(),null==t||t()}catch(e){}}}catch(e){}},[d,v,m,f]);let j=(0,a.useCallback)(()=>{h(s)},[s]),k=(0,a.useCallback)(()=>{p(s)},[s]),N=(0,a.useMemo)(()=>{var e,t,l,n;if(null==s?void 0:s.flvSrc)return s.flvSrc;let r=null==s?void 0:null===(e=s.cellRoom)||void 0===e?void 0:e.rawdata,i=null==r?void 0:null===(n=r.stream_url)||void 0===n?void 0:null===(l=n.flv_pull_url)||void 0===l?void 0:l[null==r?void 0:null===(t=r.stream_url)||void 0===t?void 0:t.default_resolution];return(null==i?void 0:i.includes("https"))?i:null==i?void 0:i.replace("http","https")},[s]);return(0,o.jsx)(O.K,(0,r._)((0,n._)({ref:t},s),{disableNewPlayer:w===c.a.WaterFall,modalEnterFrom:w,isShow:d,isActive:d,customProps:u,source:{url:s.authorInfo.url,userName:`@ ${s.authorInfo.remarkName||s.authorInfo.nickname}`},gameName:"",scale:3/4,showUserCountInTag:!0,disableLiveCoverBorder:!0,isLogReady:b,userInfo:I,isEnd:2!==s.status,abTestData:y,logParams:(0,n._)({},null!==(i=null==s?void 0:s.logParams)&&void 0!==i?i:{},(null==s?void 0:s.searchLogParams)?{search_params:null==s?void 0:s.searchLogParams}:{},null==u?void 0:null===(l=u.logParams)||void 0===l?void 0:l.live_log_params),onPlay:j,onPause:k,onDestroy:k,enableLiveInfo:!0,isModal:!0,isShowGuide:_,useNewUserSoundGuide:x,flvSrc:N}))}),z=e=>{let{item:t,videoRef:l}=e;return t.awemeType===U.e.LiveCard?(0,o.jsx)(W,(0,r._)((0,n._)({},e),{ref:l})):(0,o.jsx)(H.Z,(0,r._)((0,n._)({},e),{isMultiInstanceScene:!0,ref:l}))};l("675373");var Z=l("338426"),$=l("87908"),K=l("542246"),G=l("172061"),Y=l("251537"),q=l("774765"),Q=l("133221");let X=(e,t,l,n,r,i)=>{let[o,s]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),{handleHiddenLog:c}=(0,Q.s)(),[v,m]=(0,a.useState)((0,S.r)()),f=(0,a.useRef)(null),h=(0,a.useRef)(!1),{run:p}=(0,q.Z)(()=>{s(!0)},500,[],{trailing:!1,leading:!0}),{run:g}=(0,q.Z)(async()=>{s(h.current||!1)},3e3),_=()=>{h.current=!0},x=()=>{h.current=!1},[w,C]=(0,a.useState)(null);return(0,k.o)(()=>{if(r&&l){var t,n;let l=null==i?void 0:null===(n=i.current)||void 0===n?void 0:null===(t=n.getPlayerRoot)||void 0===t?void 0:t.call(n);!l&&(null==e?void 0:e.awemeType)!==U.e.LiveCard&&(l=document.querySelector(`#${r} [data-e2e="feed-active-video"] .basePlayerContainer`)),C(null!=l?l:null)}else C(null)},[e,t,r,l,i]),(0,k.o)(()=>{var e,t;if(!!w&&!!l)return w.addEventListener("mousemove",p),w.addEventListener("mousemove",g),null===(e=f.current)||void 0===e||e.addEventListener("mouseenter",_),null===(t=f.current)||void 0===t||t.addEventListener("mouseleave",x),()=>{var e,t;w.removeEventListener("mouseenter",_),w.removeEventListener("mouseleave",x),null===(e=f.current)||void 0===e||e.removeEventListener("mousemove",p),null===(t=f.current)||void 0===t||t.removeEventListener("mousemove",g)}},[w,l,e]),(0,k.o)(()=>{if(!w||!l)return;let e=()=>{m((0,S.r)())};return document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("msfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("msfullscreenchange",e)}},[l,w]),(0,a.useEffect)(()=>{s(!0),h.current=!1,l&&w&&g()},[l,e,n,v,w]),(0,a.useEffect)(()=>{u(o)},[o]),{isShowExtra:!w||d,extraRef:f,searchBarProps:{onHistoryClick:e=>{let{text:t}=e.currentTarget.dataset;return c(t)},onSearchClick:e=>c(e),onInputKeyDown:(e,t)=>{if("Enter"===(0,N.CS)(e))return c(t)}}}};var J=l("49279"),ee=l("609006");let et=(0,Z.ZP)(()=>Promise.resolve().then(l.bind(l,180593)),{resolveComponent:e=>{let{SearchBar:t}=e;return t},ssr:!1}),el=(0,Z.ZP)(()=>Promise.resolve().then(l.bind(l,366068)),{resolveComponent:e=>{let{AiSearchBar:t}=e;return t},ssr:!1}),en=(0,Z.ZP)(()=>Promise.resolve().then(l.bind(l,366068)),{resolveComponent:e=>{let{AiSearchBarWithAiMiddlePage:t}=e;return t},ssr:!1}),er=(0,Z.ZP)(()=>Promise.resolve().then(l.bind(l,366068)),{resolveComponent:e=>{let{AiSearchBarWithAiInput:t}=e;return t},ssr:!1}),ei=e=>{var t,l,r,i,s;let{isInnerFeed:d,modalInnerFeedCard:c,isClientMiniWin:v,refPlayer:m,onBack:f,onBackWithInnerMode:h,abtestData:_,awemeInfoList:x,currentNumber:C,modalEnterFrom:y,isSelf:I,userInfo:b,logParams:j,searchParams:k,slideVideoTab:S,currentAwemeInfo:E,autoOpenPip:L,containerId:M,fullScreenTarget:R}=e,P=(null==E?void 0:E.awemeType)===U.e.LiveCard,{handleHiddenLog:D}=(0,Q.s)(),{supportAiTop1:A}=(0,T.Iq)(e=>{let{supportAiTop1:t}=e;return{supportAiTop1:t}}),F=(0,ee.V1)(),{awemeFeed:V}=(0,J.j)(),{isWebMiniWin:B}=(0,T.Iq)(e=>{let{isWebMiniWin:t}=e;return{isWebMiniWin:t}}),{isShowExtra:O,extraRef:H}=X(E,null==m?void 0:null===(t=m.current)||void 0===t?void 0:t.getPlayer(),!B&&!v,d,M,m),W=(0,a.useMemo)(()=>"waterFall"===y,[y]),[z,Z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{var e;Z(!!(null!==(e=p.Le.getConfig(p.gI.ImmersiveSwitchStatus))&&void 0!==e&&e))},[C]),(0,a.useEffect)(()=>{let e=g.listen(g.EVENT.ImmersiveSwitch,e=>{let{isOn:t}=e;t!==z&&Z(!!t)});return()=>e()},[z]);let q=V.useValue("cardType",e=>[$.L.Author,$.L.Related,$.L.Mix,$.L.AwemeRelated,$.L.Series].includes(e)),ei=(0,a.useMemo)(()=>L?d||!!c||q:d||!!c,[L,d,c,q]),eo=(0,a.useMemo)(()=>{var e;return"general_search"===y?(0,n._)({},j,(null==x?void 0:null===(e=x[C])||void 0===e?void 0:e.logParams)||{}):void 0},[j,y,x,C]),ea="general_search"===y?(0,n._)({},j,(null==x?void 0:null===(l=x[C])||void 0===l?void 0:l.logParams)||{}):void 0,es=(0,a.useCallback)(e=>{let{text:t}=e.currentTarget.dataset;return D(t)},[D]),ed=(0,a.useCallback)((e,t)=>{if("Enter"===(0,N.CS)(e))return D(t)},[D]),eu=(0,a.useMemo)(()=>({awemeInfo:x[C],scene:"modal",modalEnterFrom:y}),[x,C,y]),ec=(0,a.useMemo)(()=>w.H.baseOpt(_),[_]);return v||B?null:(0,o.jsxs)("div",{ref:H,className:u()({[K.default.extraTL]:W,[K.default.extraShow]:W&&O}),children:[ei?(0,o.jsx)(Y.N,{positionFixed:!0,exitTextProps:{getCurrentTab:()=>{var e,t;return(null==m?void 0:null===(t=m.current)||void 0===t?void 0:null===(e=t.getCurTab)||void 0===e?void 0:e.call(t))||S},modalEnterFrom:y,isSelf:I,uidEquals:(null==x?void 0:null===(i=x[C])||void 0===i?void 0:null===(r=i.authorInfo)||void 0===r?void 0:r.uid)===(null==b?void 0:null===(s=b.info)||void 0===s?void 0:s.uid),awemeInfo:null==x?void 0:x[C]},onHandleReturn:h}):(0,o.jsx)(G.P,{onClick:f,isClientMiniWin:v}),P||c&&!x[C]?null:(0,o.jsx)("div",{className:u()(K.default.searchCt,"isDark",{[K.default.hidden]:z}),children:(()=>{if((null==_?void 0:_.aiSearchAiInput)&&(null==_?void 0:_.aiSearchInputMiddleNew)&&A&&!F)return(0,o.jsx)(el,{customProps:{isModalVideo:!0,isSmoothInnerFeed:d,searchParams:k,logParams:ec?eo:ea},userInfo:b,abTestData:_,onSearchClick:ec?D:e=>D(e),onHistoryClick:ec?es:e=>{let{text:t}=e.currentTarget.dataset;return D(t)},onInputKeyDown:ec?ed:(e,t)=>{if("Enter"===(0,N.CS)(e))return D(t)},playerProps:ec?eu:{awemeInfo:x[C],scene:"modal",modalEnterFrom:y},fullScreenTarget:R});if(!(null==_?void 0:_.aiSearchAiInput)&&(null==_?void 0:_.aiSearchInputMiddleNew)&&A&&!F)return(0,o.jsx)(en,{customProps:{isModalVideo:!0,isSmoothInnerFeed:d,searchParams:k,logParams:ec?eo:ea},userInfo:b,abTestData:_,onSearchClick:ec?D:e=>D(e),onHistoryClick:ec?es:e=>{let{text:t}=e.currentTarget.dataset;return D(t)},onInputKeyDown:ec?ed:(e,t)=>{if("Enter"===(0,N.CS)(e))return D(t)},playerProps:ec?eu:{awemeInfo:x[C],scene:"modal",modalEnterFrom:y}});if((null==_?void 0:_.aiSearchAiInput)&&!(null==_?void 0:_.aiSearchInputMiddleNew)&&A&&!F)return(0,o.jsx)(er,{customProps:{isModalVideo:!0,isSmoothInnerFeed:d,searchParams:k,logParams:ec?eo:ea},userInfo:b,abTestData:_,onSearchClick:ec?D:e=>D(e),onHistoryClick:ec?es:e=>{let{text:t}=e.currentTarget.dataset;return D(t)},onInputKeyDown:ec?ed:(e,t)=>{if("Enter"===(0,N.CS)(e))return D(t)},playerProps:ec?eu:{awemeInfo:x[C],scene:"modal",modalEnterFrom:y},fullScreenTarget:R});else return(0,o.jsx)(et,{customProps:{isModalVideo:!0,isSmoothInnerFeed:d,searchParams:k,logParams:ec?eo:ea},userInfo:b,abTestData:_,onSearchClick:ec?D:e=>D(e),onHistoryClick:ec?es:e=>{let{text:t}=e.currentTarget.dataset;return D(t)},onInputKeyDown:ec?ed:(e,t)=>{if("Enter"===(0,N.CS)(e))return D(t)},playerProps:ec?eu:{awemeInfo:x[C],scene:"modal",modalEnterFrom:y}})})()})]})};l("429532");var eo=l("734123"),ea=l("982755"),es=l("53659"),ed=l("194236"),eu=l("399242"),ec=l("987475"),ev=l("580264"),em=l("338478"),ef=l("226683"),eh=l("320028"),ep=l("828782"),eg=l("504995"),e_=l("543159"),ex=l("749952"),ew=l("134585"),eC=l("489862"),ey=l("767449");let eI=e=>{let{player:t,awemeInfo:l,isActive:i,abtestData:o,modalEnterFrom:s}=e,d=c.a.WaterFall===s;(0,a.useEffect)(()=>{let e;if(!t||!i||!d)return;let a=!!(null==o?void 0:o.themeColorOptimize),s=()=>{(t.cumulateTime?t.cumulateTime:0)>15e3&&((0,ed.VY)({info:{[ew.BW.CompletePlayTime]:!0},awemeId:null==l?void 0:l.awemeId,abData:0}),clearInterval(e))},u=()=>{if(a){let e=p.Le.getConfig(p.gI.JxOuterProgress)||{},t=(null==e?void 0:e[null==l?void 0:l.awemeId])||{},i=(null==t?void 0:t.startTime)||0,o=(null==t?void 0:t.duration)||0;p.Le.setConfig(p.gI.JxOuterProgress,(0,r._)((0,n._)({},e),{[null==l?void 0:l.awemeId]:{duration:o,startTime:i,progress:100,isWatchedEnd:!0}}))}if((null==l?void 0:l.awemeType)!==68)(0,ed.VY)({info:{[ew.BW.Finish]:!0},awemeId:null==l?void 0:l.awemeId,abData:0})},c=()=>{var e,i;let o=null!==(e=null==t?void 0:t.currentTime)&&void 0!==e?e:0,a=null!==(i=null==t?void 0:t.duration)&&void 0!==i?i:0,s=p.Le.getConfig(p.gI.JxOuterProgress)||{},d=(null==s?void 0:s[null==l?void 0:l.awemeId])||{},u=!!(null==d?void 0:d.isWatchedEnd),c=a>0?Math.round(o/a*100):0;p.Le.setConfig(p.gI.JxOuterProgress,(0,r._)((0,n._)({},s),{[null==l?void 0:l.awemeId]:{isWatchedEnd:u,startTime:o,progress:u?100:c,duration:a}}))};return t.once(ey.Ku,u),a&&t.on(ey.MH,c),()=>{s(),t.off(ey.Ku,u),e&&clearInterval(e),a&&t.off(ey.MH,c)}},[t,l,i,o])},eb=e=>{let{awemeInfo:t,isActive:l,modalEnterFrom:n}=e;(0,a.useEffect)(()=>{var e;let{discoverPageCurrentVideoId:r,discoverPageVideoVV:i=0}=p.Le.getConfig(p.gI.LandingPageGuideInfo)||{};l&&(e=[c.a.Hot,c.a.WaterFall],e.includes(n))&&r!==t.awemeId&&p.Le.setConfig(p.gI.LandingPageGuideInfo,{discoverPageVideoVV:i+1,discoverPageCurrentVideoId:t.awemeId},!0)},[l,t.awemeId])};var ej=l("998415"),ek=l("62234"),eN=l("873034"),eS=l("607412"),eE=l("876877"),eL=l("623582"),eT=l("742740"),eM=l("335101");let eR=e=>{let{awemeInfo:t,isActive:l,logParams:r={}}=e||{},i=(0,eN.d)(r),o=(0,eM.n)();(0,a.useEffect)(()=>{if(l&&o&&t){let e=()=>{let e=`${eE.w3.modal.modal_first_video_play}_start`,l=`${eE.w3.modal.modal_first_video_play}_end`,r=(0,eS.bE)(e);if((null==r?void 0:r.length)>0){(0,eS.B1)({tag:l});let r=(0,eS.L8)(eE.w3.modal.modal_first_video_play,e,l);r>0&&eL.logInstance.sendLog("webPerfTiming",(0,n._)({enter_from:(0,eT.yW)(),aweme_id:null==t?void 0:t.awemeId,[eE.w3.modal.modal_first_video_play]:r},(null==i?void 0:i.current)||{})),(0,eS.tl)(e),(0,eS.tl)(l),(0,eS.tl)(eE.w3.modal.modal_first_video_play)}};if(o.isPlaying||o.currentTime>0){e();return}return o.on(eo.Events.AUTOPLAY_STARTED,e),o.on(eo.Events.AUTOPLAY_PREVENTED,e),()=>{o.off(eo.Events.AUTOPLAY_STARTED,e),o.off(eo.Events.AUTOPLAY_PREVENTED,e)}}},[t,o,l])},eP=e=>{let{awemeInfo:t,isActive:l,logParams:n={}}=e;return eR({awemeInfo:t,isActive:l,logParams:n}),null};var eD=l("804074"),eA=l("926116"),eF=l("91178"),eV=l("644071"),eB=l("957777"),eU=l("495437"),eO=l("30593"),eH=l("567754"),eW=l("815389"),ez=l("95291"),eZ=l("798644");let e$=e=>{let t=(0,eM.n)(),{awemeInfo:l,modalEnterFrom:n,isActive:r}=e;return(0,a.useEffect)(()=>{eZ.s.getAllPlayer().filter(e=>eZ.s.getPlayerScene(e.playerId)!==eu.lT.Modal).forEach(e=>{var t;null===(t=e.pause)||void 0===t||t.call(e),e.config.autoplay=!1,e.autoplay=!1})},[]),(0,a.useEffect)(()=>{var e,l;if((null==t?void 0:t.setConfig)&&(null===(l=t.plugins)||void 0===l?void 0:null===(e=l.keyboard)||void 0===e?void 0:e.keyCodeMap)){let e=t.plugins.keyboard.keyCodeMap;"rightD"in e&&delete e.rightD,"leftA"in e&&delete e.leftA,t.setConfig({keyboard:{keyCodeMap:e}})}},[t]),(0,a.useEffect)(()=>{t&&r&&(0,ez.wS)(t.playerId,!0)},[t,r]),(0,a.useEffect)(()=>{var e,t,l;return sessionStorage.setItem("ModalRefresh","1"),null===(l=document)||void 0===l||null===(t=l.activeElement)||void 0===t||null===(e=t.blur)||void 0===e||e.call(t),()=>{let{url:e,query:t}=eH.parseUrl(location.href);delete t.modal_id,window.history.replaceState(null,"",eH.stringifyUrl({url:e,query:t}))}},[]),(0,a.useEffect)(()=>{if(l&&!(0,ep.DT)()&&"recommendUpdateWindow"!==n&&n!==c.a.FollowAuthorModal&&r){let{url:n,query:r}=eH.parseUrl(location.href);if(!r.modal_id){var e,t;(0,eW.t_)(ec.SessionStorageKeys.BackURl,null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.pathname)}r.modal_id=null==l?void 0:l.awemeId,window.history.replaceState(null,"",eH.stringifyUrl({url:n,query:r}))}},[l,r,n]),(0,a.useEffect)(()=>{if(""===document.body.style.overflow)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[]),null};var eK=l("675221"),eG=l("770268"),eY=l("907170"),eq=l("443073");let eQ=e=>{let{isActive:t,startTime:l,awemeInfo:n,isLogin:r=!1,isClientMiniWin:i=!1}=e,o=(0,eM.n)(),s=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{if(o&&t&&l>=3&&(0,eg.D)(n)&&r&&!i&&!s.current){let e=()=>{var e,t;null===(t=o.showPrompt)||void 0===t||t.call(o,{text:`上次播放至：${(0,eY.$y)(1e3*l)}`},{mode:"arrow",autoHide:!0,interval:3e3,preventScreenOverflow:!0,style:{left:`${1e3*l/(null==n?void 0:null===(e=n.video)||void 0===e?void 0:e.duration)*100}%`,bottom:"10px",padding:"8px 12px",borderRadius:"12px",backgroundColor:"#33343F",color:"#ffffff",fontSize:"12px",transition:"none",zIndex:"20"}}),s.current=!0};return o.once("play",e),()=>{o.off("play",e)}}if(o&&t&&l>=3&&r&&i){var e;null===(e=o.hidePrompt)||void 0===e||e.call(o)}},[o,t,l,n,r,i]),null},eX=e=>{let t=(0,eq.N)();return(0,o.jsx)(V.k,{componentName:"WaterLaterContinueTip",Slardar:t,children:(0,o.jsx)(eQ,(0,n._)({},e))})};var eJ=l("213794"),e0=l("508471"),e1=l("916103"),e2=l("270547"),e3=l("625617"),e5=l("135638"),e6=l("751403"),e7=l("954196"),e4=l("462471"),e8=l("765208"),e9=l("578925"),te=l("183762"),tt=l("259702"),tl=l("872068"),tn=l("567341"),tr=l("275740"),ti=l("827053"),to=l("820510"),ta=l("36727"),ts=l("309063"),td=l("38790"),tu=l("433012"),tc=l("443291"),tv=l("502449"),tm=l("929767"),tf=l("420863"),th=l("513709"),tp=l("302759"),tg=l("914592"),t_=l("640829"),tx=l("529961"),tw=l("742758"),tC=l("140786"),ty=l("57196"),tI=l("734415"),tb=l("480272"),tj=l("52678"),tk=l("378056"),tN=l("455344"),tS=l("910443"),tE=l("544994"),tL=l("260224"),tT=l("466428"),tM=l("585543"),tR=l("739444"),tP=l("444493"),tD=l("713533"),tA=l("113925"),tF=l("736054"),tV=l("99459"),tB=l("135058"),tU=l("85517"),tO=l("67120"),tH=l("522728"),tW=l("645227"),tz=l("783983"),tZ=l("200600"),t$=l("731851"),tK=l("708334"),tG=l("63260"),tY=l("351087"),tq=l("177592"),tQ=l("492368"),tX=l("357083"),tJ=l("866402");l("340509"),l("368529");var t0=l("903220"),t1=l("148091"),t2=l("23171"),t3=l("680319"),t5=l("79139"),t6=l("801517"),t7=l("119715"),t4=l("757118"),t8=l("73528"),t9=l("568201");let le=e=>{let{config:t,isInitPlayer:l}=e,n=(0,eM.n)();return(0,a.useEffect)(()=>{if(l&&n){let e=setTimeout(()=>{var e,l;!(null===(e=n.plugins)||void 0===e?void 0:e.srplugin)&&(null===(l=t.plugins)||void 0===l?void 0:l.includes(t8.o))&&(n.config.srplugin=t.srplugin,n.registerPlugin(t8.o),setTimeout(()=>{n.emit(t9.B.RegisterMissingSrPlugin)}))});return()=>{clearTimeout(e)}}},[n,l]),null},lt=e=>{let t=(0,eq.N)();return(0,o.jsx)(V.k,{componentName:"RegisterMissingPlugin",Slardar:t,children:(0,o.jsx)(le,(0,n._)({},e))})};var ll=l("205825"),ln=l("930193"),lr=l("457309"),li=l("816242"),lo=l("427477"),la=l("954270"),ls=l("912377"),ld=l("316914"),lu=l("536844"),lc=l("314331");let lv=(0,a.memo)((0,a.forwardRef)((e,t)=>{var l,i,s,d,m,g,x,C,y,I,b,j,k,N,S,E,L,M,R,P,D,A;let{isActive:F,isNext:V,isPrev:B,isFirst:O,isLast:H,awemeInfo:W,nextAwemeInfo:z,prevAwemeInfo:Z,playNextFunc:$,abtestData:K,deleteCurrentSwiper:G,toggleComment:Y,onAvatarClick:q,fullScreenTarget:Q,logParams:X,videoToast:J,followHandler:ee,playPrevFunc:et,userInfo:el,dispatch:en,isAuthorCardShow:er,isShowRelatedCard:ei,moreBoxShowList:ey,videoHashtagClassName:eN,videoTags:eS,children:eE,disableAutoPlay:eL,shortCutFiltered:eT,positionBoxClassName:eM,customProps:eR,actionFollow:eH,actionUnFollow:eW,modalEnterFrom:ez,showPlaySwitch:eZ=!0,isShowPageFullScreen:eY=!1,isShowCssFullScreenGuide:eq,isInnerFeed:eQ,onCooperationAuthorClick:t8,isShowCooperation:t9,sideBarShow:le,slardarInstance:lv,defaultIsPageFullScreen:lm,avatarTipText:lf,onRelatedClick:lh,onDislike:lp,activityCardDirectOpen:lg,onActivityCardClick:l_=()=>{},onShopAnchorClick:lx=()=>{},onShopAnchorMouseEnter:lw=()=>{},onShopAnchorMouseLeave:lC=()=>{},onDouPlusClick:ly,onSodaClick:lI,isShowGuide:lb,notCanMixListen:lj,openSpecificTab:lk,index:lN,isFullScreen:lS,useNewUserSoundGuide:lE,isMultiInstanceScene:lL,isUpperFeed:lT,isRevisitStart:lM,startTime:lR,chapterProps:lP,setContainerPlayer:lD,reuseConfig:lA,recommendTagProps:lF,canShowListenVideo:lV,listenFeedNextAwemeInfo:lB,listenFeedPrevAwemeInfo:lU,hideModalWhenPip:lO,setHideModalByPip:lH,modalClose:lW,aiNoteProps:lz,isShowAdCard:lZ,isShowShopSideCard:l$,appendPlayerConfig:lK,LiveSliderCard:lG,disableShortCut:lY,isAdShortCut:lq,isShowAiCard:lQ,sideCardContext:lX}=e,lJ=(0,a.useRef)(null),{isMainland:l0,isWebMiniWin:l1,pipWindow:l2,isListenVideoMiniWin:l3,fullScreenQuestionVars:{isShowingQuestion:l5}={isShowingQuestion:!1}}=(0,T.Iq)(e=>{let{isMainland:t,isWebMiniWin:l,pipWindow:n,isListenVideoMiniWin:r,fullScreenQuestionVars:i}=e;return{isMainland:t,isWebMiniWin:l,pipWindow:n,isListenVideoMiniWin:r,fullScreenQuestionVars:i}}),{hasChapterBar:l6}=(0,tP.W)(K,W,null===(l=lJ.current)||void 0===l?void 0:l.player),{isClientMiniWin:l7}=(0,a.useContext)(f.C),l4=(0,ep.DT)(),[l8,l9]=(0,a.useState)(null);(null===(i=lJ.current)||void 0===i?void 0:i.player)&&(lJ.current.player.modalEnterFrom=ez,lJ.current.player.disableAutoPlay=eL,lJ.current.player.isShowPageFullScreen=eY);let ne=(0,a.useMemo)(()=>l1||l7||l3,[l1,l7,l3]);(0,a.useEffect)(()=>{if(!lV&&l3){let e=ls.e.getPipWindow({scene:v.d.ListenVideo});e&&e.close()}},[l3]);let{enablePip:nt}=(0,tO.$)({abtestData:K,enterFrom:ez,awemeInfo:W});eb({isActive:F,awemeInfo:W,modalEnterFrom:ez});let{noPaidVideo:nl}=(0,tH.B)({awemeInfo:W});(0,tW.u)({awemeInfo:W,player:null===(s=lJ.current)||void 0===s?void 0:s.player});let nn=(0,eg.D)(W),{isDanmuIcon:nr,hideList:ni,isChapterIcon:no,chapterMaxWidth:na,isAiNoteIcon:ns}=(0,tz.Cy)({isActive:F,abtestData:K,player:null===(d=lJ.current)||void 0===d?void 0:d.player,hasChapter:l6,hasAiNote:null==lz?void 0:lz.useable,showInnerAutoplay:eQ&&!nl,showAutoPlay:!eL&&!nl,showSubtitles:!!(null==W?void 0:W.claInfo),showFakeScreen:(null==W?void 0:W.awemeType)!==U.e.Note,showPlayBackRatio:(null==W?void 0:W.awemeType)!==U.e.Note,showWatchLater:nn,isMiniWin:ne});(0,tZ.j)({player:null==lJ?void 0:null===(m=lJ.current)||void 0===m?void 0:m.player,isActive:F,abValue:K}),(0,t$._)({awemeInfo:W,prevAwemeInfo:Z,isInnerFeedModel:eQ&&F}),(0,tK.V)({awemeInfo:W}),(0,t5.g)({player:null==lJ?void 0:null===(g=lJ.current)||void 0===g?void 0:g.player,awemeInfo:W}),(0,t6.G)({player:null==lJ?void 0:null===(x=lJ.current)||void 0===x?void 0:x.player,awemeInfo:W,scene:"pc_web_mix_aweme",abtestData:K}),(0,a.useImperativeHandle)(t,()=>{var e;return{getPlayer:()=>lJ.current.getPlayer(),player:null===(e=lJ.current)||void 0===e?void 0:e.player,getPlayerRoot:()=>{var e,t;return null===(e=(t=lJ.current).getPlayerRoot)||void 0===e?void 0:e.call(t)}}}),(0,tG.D)({awemeInfo:W,isActive:F});let nd=(0,a.useMemo)(()=>{let e={isModal:!0},t=(0,tD.YO)({abtestData:K,awemeInfo:W,isInnerFeed:eQ,modalEnterFrom:ez,isModalVideo:!0});Object.assign(e,(0,tR.k)({awemeInfo:W,abtestData:K,enableSr:t}),(0,t0.QF)({awemeInfo:W,abtestData:K,enableSr:t})),(0,tA.Zf)({config:e,awemeInfo:W,abtestData:K}),(0,tF.LX)({config:e,awemeInfo:W,abtestData:K,isMultiInstanceScene:lL}),(0,tD.nq)({config:e,abtestData:K,enableSr:t}),e.startTime=(0,eF.v)(W.awemeId),e.pip&&!1===[c.a.Im,c.a.Search,c.a.GeneralSearch].includes(ez)&&(e.pip.showIcon=nt),[c.a.GeneralSearch,c.a.Search].includes(ez)&&!eQ&&(e.progressDot=(0,e_.x)(null==W?void 0:W.videoAbstract));try{(null==e?void 0:e.mp4encryptplayer)&&(null==lK?void 0:lK.mp4encryptplayer)&&Object.assign(e.mp4encryptplayer,lK.mp4encryptplayer),(null==e?void 0:e.DASHPlugin)&&(null==lK?void 0:lK.DASHPlugin)&&Object.assign(e.DASHPlugin,lK.DASHPlugin)}catch(e){}return e},[W,K,ez,eQ,nt,ez,lK]),nu=(0,a.useMemo)(()=>(0,ea.Jt)(W),[W]),nc=(0,a.useMemo)(()=>(0,ea.gc)(W),[W]),nv=(0,a.useMemo)(()=>{var e;return[...(null==ey?void 0:ey.notInterestingIcon)?[]:[null===(e=es.getShortcut().dislike)||void 0===e?void 0:e.badgeText],...eT||[]]},[null==ey?void 0:ey.notInterestingIcon,eT]),nm=(0,a.useCallback)(()=>{c.a.WaterFall===ez&&(0,ed.VY)({info:{[ew.BW.Finish]:!0},awemeId:null==W?void 0:W.awemeId,abData:0})},[K,ez]);(0,tY.O)({player:null===(C=lJ.current)||void 0===C?void 0:C.player,isActive:F,awemeInfo:W,abtestData:K,isWebMiniWin:l1}),(0,tq.w)({player:null===(y=lJ.current)||void 0===y?void 0:y.player,isActive:F,awemeInfo:W,abtestData:K,isInnerFeed:eQ}),(0,tQ.U)({config:nd,isActive:F,awemeInfo:W,player:null===(I=lJ.current)||void 0===I?void 0:I.player}),(0,tX.Q)({player:null===(b=lJ.current)||void 0===b?void 0:b.player,isActive:F,awemeInfo:W,abtestData:K,isSliderVideo:!0,isKeyWorkCancalLike:!0,shortcutExclude:[],isClientMiniWin:l7,pipWindow:l2,isLogin:null==el?void 0:el.isLogin}),eI({player:null===(j=lJ.current)||void 0===j?void 0:j.player,isActive:F,awemeInfo:W,abtestData:K,modalEnterFrom:ez});let nf=(0,a.useRef)(!1),{idlCallBackFlag:nh}=(0,tJ.o)({isActive:V,once:!0}),np=(0,a.useMemo)(()=>{if(w.H.delayJXCreateNextVideo(K))return!!nf.current||F||B||V&&nh&&1!==lN;return F||B||V},[F,B,V,nh]);nf.current=np;let ng=(0,h.x)(),{anchorList:n_,hasJingxuanActivity:nx}=(0,ln.e)({abtestData:K,awemeInfo:W}),nw=!nx&&(0,li.$)({abTestData:K,awemeInfo:W});(0,ld.M)({awemeInfo:W,player:null==lJ?void 0:null===(k=lJ.current)||void 0===k?void 0:k.player,noPaidVideo:nl,isInnerFeed:eQ});let{listenVideoDisablePrev:nC,listenVideoDisableNext:ny}=(0,t7.T)({isAuthorCardShow:er,isFirst:O,isLast:H,isShowRelatedCard:ei,canUseListenFeed:ez===c.a.WaterFall,prevAwemeInfo:Z,nextAwemeInfo:z,listenFeedNextAwemeInfo:lB,listenFeedPrevAwemeInfo:lU,isInnerFeed:eQ,isActive:F}),{scene:nI,reuseId:nb}=null!=lA?lA:{},nj=!(ll.YY.checkIsReuseWithId(nI,nb)&&nb===(null==W?void 0:W.awemeId))&&!O&&ez===c.a.WaterFall,nk=(null==K?void 0:K.reuseVideoDiscover)&&nj?ek.Y:ej.f,nN=(0,a.useMemo)(()=>{var e;return(null===(e=window.__QUICK_PLAYER)||void 0===e?void 0:e.playerId)&&window.__QUICK_PLAYER.playerId===(null==l8?void 0:l8.playerId)},[l8]),nS=ez===c.a.WaterFall?null===(N=p.Le.getConfig(p.gI.JxOuterProgress))||void 0===N?void 0:N[null==W?void 0:W.awemeId]:{},nE=ez===c.a.WaterFall&&!!((null==nS?void 0:nS.isWatchedEnd)||(null==nS?void 0:nS.progress)),nL=(0,a.useMemo)(()=>(0,r._)((0,n._)({},X),{is_theme_progress_bar:nE?"1":"0"}),[X,nE]);return(0,a.useEffect)(()=>{var e,t,l;let n=null===(e=lJ.current)||void 0===e?void 0:e.player;if(n&&(nN||ll.YY.checkIsReusePlayer(null==lA?void 0:lA.scene,null==lA?void 0:lA.reuseId,n))){let e=null==n?void 0:null===(l=n.root)||void 0===l?void 0:null===(t=l.closest)||void 0===t?void 0:t.call(l,".basePlayerContainer");e&&eo.Util.addClass(e,"reusePlayer")}},[nN,lA,lJ.current]),(0,lc.O)({abtestData:K,player:null==lJ?void 0:null===(S=lJ.current)||void 0===S?void 0:S.player,scene:eu.lT.Modal,awemeInfo:W,isActive:F,refPlayer:lJ}),(0,o.jsxs)(nk,{xgplayerConfig:nd,isInitPlayer:np,style:(0,n._)({height:"100%",width:"100%"},l3?{display:"none"}:{}),className:u()(eC.default.container,"chapterPlayerStyle","modalPlayer","lowPopup",[c.a.GeneralSearch,c.a.Search].includes(ez)?"searchModal":""),ref:lJ,scene:eu.lT.Modal,onReady:e=>{l9(e)},slardarInstance:lv,reuseConfig:lA,setContainerPlayer:lD,abtestData:K,children:[(0,o.jsx)(t1.V,{awemeInfo:W,isActive:F,timeout:(0,_.b_)()?4e3:2e3,isFirst:!0}),(0,o.jsx)(eP,{awemeInfo:W,isActive:F,logParams:nL}),(0,o.jsx)(eB.p,{scene:eu.lT.Modal,isActive:F}),(0,o.jsx)(eF.t,{awemeInfo:W,player:null===(E=lJ.current)||void 0===E?void 0:E.player,isActive:F}),(0,o.jsxs)(eU.n,{isActive:F,controlHeight:eu.fp.MidHigh,position:"right",awemeInfo:W,className:(0,r._)((0,n._)({},eM),{right:u()(null==eM?void 0:eM.right,{fullscreenModal:lS})}),abtestData:K,children:[eZ&&!l7&&(0,o.jsx)(eO.I,{playNextFunc:$,playPrevFunc:et,disablePrev:O&&!(er||ei)||(er||ei)&&!Z,disableNext:H&&!(er||ei)||(er||ei)&&!z,className:u()(eC.default.playSwitchContainer,"filter-bg","activity"!==ez||lT?"":eC.default.playSwitchContainerHidden)}),!l7&&(w.H.newInteractionOpt(K)?(0,o.jsx)(eV.InteractionNew,{canShowListenVideo:lV,playPrevFunc:et,playNextFunc:$,listenVideoDisableNext:ny,listenVideoDisablePrev:nC,hideModalWhenPip:lO,setHideModalByPip:lH,modalClose:lW,actionFollow:eH,actionUnFollow:eW,onDouPlusClick:ly,awemeInfo:W,toggleComment:Y,loginUserInfo:el,loginDispatch:en,deleteCurrentSwiper:G,fullScreenTarget:Q,onAvatarClick:q,abtestData:K,videoToast:J,isActive:F,followHandler:ee,reportExtraParams:nL,moreBoxShowList:ey,onRelatedClick:lh,canShowAvatarFollowBtn:!nc,canShowAvatarTip:!nc,showMusicDetail:!(0,ea.gc)(W),avatarTipText:lf,onDislike:lp,isShowAiCard:lQ,recommendTriggered:null==lF?void 0:lF.recommended,showRecommendToFriend:!!lF,isSearchPlayer:"general_search"===ez,from:[c.a.GeneralSearch,c.a.Search].includes(ez)?"search":void 0}):(0,o.jsx)(eV.Interaction,{canShowListenVideo:lV,playPrevFunc:et,playNextFunc:$,listenVideoDisableNext:ny,listenVideoDisablePrev:nC,hideModalWhenPip:lO,setHideModalByPip:lH,modalClose:lW,actionFollow:eH,actionUnFollow:eW,onDouPlusClick:ly,awemeInfo:W,toggleComment:Y,loginUserInfo:el,loginDispatch:en,deleteCurrentSwiper:G,fullScreenTarget:Q,onAvatarClick:q,abtestData:K,videoToast:J,isActive:F,followHandler:ee,reportExtraParams:nL,moreBoxShowList:ey,onRelatedClick:lh,canShowAvatarFollowBtn:!nc,canShowAvatarTip:!nc,showMusicDetail:!(0,ea.gc)(W),avatarTipText:lf,onDislike:lp,isShowAiCard:lQ,recommendTriggered:null==lF?void 0:lF.recommended,showRecommendToFriend:!!lF,isSearchPlayer:"general_search"===ez,from:[c.a.GeneralSearch,c.a.Search].includes(ez)?"search":void 0}))]}),(0,o.jsx)(e$,{awemeInfo:W,isActive:F,modalEnterFrom:ez}),!(0,ex.B)(W)&&(0,o.jsx)(eK._,{awemeInfo:W,isActive:F,controlHeight:eu.fp.MidHigh,showImg:!(0,_.G6)(),abtestData:K}),(null==W?void 0:null===(L=W.video)||void 0===L?void 0:L.duration)>18e4&&(0,o.jsx)(eG.S,{awemeInfo:W,isActive:F,isLogin:null==el?void 0:el.isLogin,startTime:lM?lR:0,isClientMiniWin:l7}),ez===c.a.UserWatchLater&&(0,o.jsx)(eX,{awemeInfo:W,isActive:F,isLogin:null==el?void 0:el.isLogin,startTime:lR,isClientMiniWin:l7}),nt&&(0,o.jsx)(eD._,{isActive:F,awemeInfo:W,abtestData:K,hideModalWhenPip:lO,setHideModalByPip:lH,modalClose:lW,isReusePlayer:(null==K?void 0:K.reuseVideoDiscover)&&nj,logParams:nL}),(0,o.jsx)(eJ.V,{awemeInfo:W,isActive:F}),(null==W?void 0:null===(M=W.chargeInfo)||void 0===M?void 0:M.is_charge_content)&&(0,o.jsx)(e0.V,{awemeInfo:W,isActive:F,isMiniWin:ne,isShowReplay:!ne}),eL?(0,o.jsx)(e1.r,{}):(0,o.jsxs)(o.Fragment,{children:[eQ||nl?null:(0,o.jsx)(e2.kL,{isActive:F,awemeInfo:W,playNextFunc:$,customLocalStorage:[c.a.Search,c.a.GeneralSearch].includes(ez)?ec.LocalStorageKeys.SearchHorizontalAutoPlay:void 0,ablePlayNext:!(H&&!(er||ei)||(er||ei)&&!z),shortcutDisabled:!1,abtestData:K,defaultVal:1}),eQ&&!nl?(0,o.jsx)(e3.Ot,{isActive:F,awemeInfo:W,playPrevFunc:et,playNextFunc:$,ablePlayPrev:!((er||ei)&&!Z),ablePlayNext:!((er||ei)&&!z),hide:ni.some(e=>e[0]===tz.p7.InnerAutoPlayer),abtestData:K}):null]}),!nl&&(0,o.jsx)(e5.SD,{isActive:F,awemeInfo:W,abtestData:K,isInnerFeed:eQ,hide:ni.some(e=>e[0]===tz.p7.Clear),scene:eu.lT.Modal}),(0,o.jsx)(e6.SE,{isActive:F,awemeInfo:W,abtestData:K}),(0,o.jsx)(lt,{isInitPlayer:np,config:nd}),(0,o.jsx)(e7.k,{isActive:F,onVolumeShortCutChange:()=>{var e;(0,tV.t)(null===(e=lJ.current)||void 0===e?void 0:e.player)}}),(0,o.jsx)(e4.g,{isActive:F,abtestData:K,awemeInfo:W,scene:"modal"}),(0,o.jsx)(e8.b,{isActive:F}),!(0,tB.GP)(W)&&(w.H.baseOpt(K)?(0,o.jsx)(e9.Z,{awemeInfo:W,userInfo:el,isActive:F,logParams:nL,isFirst:O,isNext:V,isPrev:B}):(0,o.jsx)(e9.Z,{awemeInfo:W,userInfo:el,isActive:F,logParams:nL,isFirst:O,isNext:V,isPrev:B})),(0,o.jsx)(te.L,{awemeInfo:W,isActive:F,abtestData:K}),(0,o.jsx)(tt.E,{isActive:F,awemeInfo:W,abtestData:K,userInfo:el,deleteCurrentSwiper:G,config:nd,isNext:V,currentIndex:lN,reuseConfig:lA,startTime:lM?lR:0}),(0,o.jsx)(tl.h,{isActive:F}),(0,o.jsx)(tn.P,{isActive:F,awemeInfo:W,abtestData:K,userInfo:el,enablePip:nt}),ne?null:(0,o.jsx)(tr.t,{isInnerFeed:eQ,isModalVideo:!0,modalEnterFrom:ez,isActive:F,userInfo:el,dispatch:en,abtestData:K,awemeInfo:W,player:null==lJ?void 0:null===(R=lJ.current)||void 0===R?void 0:R.player,isClientMiniWin:l7}),lE?(0,o.jsx)(t3._q,{isActive:F,awemeInfo:W,isShowGuide:lb,abtestData:K}):(0,o.jsx)(ti.x,{isActive:F,awemeInfo:W,abtestData:K,isShowGuide:lb,scene:"recommend"}),nn&&ez!==c.a.UserWatchLater&&(0,o.jsx)(to.vq,{isActive:F,awemeInfo:W,isLogin:null==el?void 0:el.isLogin,loginDispatch:en,toast:J,logParams:nL,abtest:K}),nu&&(0,o.jsx)(ta.FeedbackAd,{awemeInfo:W,toast:J,deleteCurrentSwiper:G,abtestData:K}),(0,o.jsx)(ts.o,{isActive:F,awemeInfo:W}),(null==W?void 0:W.awemeType)===U.e.Note?(0,o.jsx)(td.PictureMode,{isActive:F,awemeInfo:W,logParams:nL,playNextFunc:$,abTestData:K,ablePlayNext:!(H&&!(er||ei)||(er||ei)&&!z),playPrevFunc:et,ablePlayPrev:!(O&&!(er||ei)||(er||ei)&&!Z),isClientMiniWin:l7,isShowSideBar:le,onPlayFinish:nm}):null,(0,o.jsx)(tu.q,{isActive:F,abtestData:K,awemeInfo:W,isInnerFeed:eQ}),nu&&(0,o.jsx)(tc.K,{awemeInfo:W,isActive:F}),(0,o.jsx)(tv.PlayBackSetting,{disable:nu,isActive:F,awemeInfo:W,logParams:nL,loginBlock:!(null==el?void 0:el.isLogin)&&!l1,loginDispatch:en,speedType:(0,_.G6)()?ev.$.Safari:ev.$.Normal}),eE,!l7||ng?(0,o.jsx)(tm.I,{isActive:F,fullScreenTarget:Q,loginDispatch:en,abtestData:K,isLogin:!!(null==el?void 0:el.isLogin)}):null,!ne&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tf.Danmaku,{isActive:F,awemeInfo:W,userInfo:el,loginDispatch:en,danmakuInfo:null==eR?void 0:eR.danmakuInfo,abtestData:K,isDanmuIcon:nr}),(0,o.jsx)(th.e,{isActive:F,awemeInfo:W,abtestData:K,aiNoteProps:lz,isAiNoteIcon:ns}),l6?(0,o.jsx)(tp.WC,{isActive:F,awemeInfo:W,userInfo:el,loginDispatch:en,abtestData:K,isChapterIcon:no,chapterProps:lP,logParams:nL,chapterMaxWidth:na}):null,l4&&(0,o.jsx)(t2.zm,{isActive:F,awemeInfo:W,isInnerFeed:eQ,abtestData:K}),eY&&(0,o.jsx)(tg.Vw,{awemeInfo:W,isShowGuide:eq,logParams:nL,isActive:F,defaultIsPageFullScreen:lm,modalEnterFrom:ez,abtestData:K}),(0,o.jsxs)(t_.r,{isActive:F,controlHeight:eu.fp.MidHigh,position:"bottom",awemeInfo:W,abtestData:K,children:[nw&&!(null==lF?void 0:lF.recommendTagType)&&(0,o.jsx)(li.n,{scene:"player",awemeInfo:W}),!(0,la.$m)(W)&&(null==lF?void 0:lF.recommendTagType)&&!(null==lF?void 0:lF.isShowVideoInfoSideCard)&&(0,o.jsx)(lo.B,(0,n._)({userInfo:el,awemeInfo:W,player:l8||(null==lJ?void 0:null===(P=lJ.current)||void 0===P?void 0:P.player),abTestData:K},lF)),n_.length>0&&(0,o.jsx)(lr.E,{awemeInfo:W,anchorList:n_,openActivityCard:l_,abtestData:K,activityCardDirectOpen:lg}),l0&&(0,em.n)(W)&&!(0,ef.o4)(W)&&ez!==c.a.RecommendUpdateWindow&&(0,o.jsx)(tx.n,{awemeInfo:W,onClick:lx,isActive:F,onMouseEnter:lw,onMouseLeave:lC}),(0,eh.A)(W)&&(0,o.jsx)(tw.X,{isActive:F,awemeInfo:W,isHide:lZ}),(0,ef.o4)(W)&&(0,ea.Gu)(W)&&(0,o.jsx)(tC.b,{isHide:l$,isActive:F,awemeInfo:W}),(0,ef.o4)(W)&&!(0,ea.Gu)(W)&&(0,o.jsx)(tU.A,{isActive:F,awemeInfo:W}),w.H.newInteractionOpt(K)?(0,o.jsx)(ty.VideoInfoNew,{isInnerFeed:eQ,isActive:F,awemeInfo:W,userInfo:el,scene:eu.lT.Modal,isTopicLinkSearchResult:!0,videoHashtagClassName:eN,modalEnterFrom:ez,videoTags:ez===c.a.RecommendUpdateWindow?[]:eS,abTestData:K,isShowCreateTime:!0,onCooperationAuthorClick:t8,isShowCooperation:t9,showSideBar:le,loginUserInfo:el,loginDispatch:en,fullScreenTarget:Q,reportExtraParams:nL,openSpecificTab:lk,onSodaClick:lI,canMixListen:!lj&&ez!==c.a.RecommendUpdateWindow&&!eQ,chapterProps:lP,sideCardContext:lX,showExpandButtonInner:(null==K?void 0:K.aiNoteV2)===2}):(0,o.jsx)(ty.VideoInfo,{isInnerFeed:eQ,isActive:F,awemeInfo:W,userInfo:el,scene:eu.lT.Modal,isTopicLinkSearchResult:!0,videoHashtagClassName:eN,modalEnterFrom:ez,videoTags:ez===c.a.RecommendUpdateWindow?[]:eS,abTestData:K,isShowCreateTime:!0,onCooperationAuthorClick:t8,isShowCooperation:t9,showSideBar:le,loginUserInfo:el,loginDispatch:en,fullScreenTarget:Q,reportExtraParams:nL,openSpecificTab:lk,onSodaClick:lI,canMixListen:!lj&&ez!==c.a.RecommendUpdateWindow&&!eQ,chapterProps:lP,sideCardContext:lX,showExpandButtonInner:(null==K?void 0:K.aiNoteV2)===2}),ez===c.a.WaterFall?(0,o.jsx)(tI.H,{isActive:F,isAdAweme:nu,awemeInfo:W,abtestData:K,toast:J,playNextFunc:$}):null,!!W.videoAbstract&&ez===c.a.GeneralSearch&&!eQ&&(0,o.jsx)(tb.y,{awemeInfo:W,isActive:F,showVideoInfo:!0,player:null===(D=lJ.current)||void 0===D?void 0:D.player,logParams:nL,isModal:!0,openSpecificTab:lk})]}),(0,o.jsx)(tj.h,{awemeInfo:W,isActive:F,userInfo:el,abtestData:K}),(0,o.jsx)(tk.MenuList,{isActive:F,awemeInfo:W,abtestData:K,isSliderVideo:!0,isKeyWorkCancalLike:!0,shortcutExclude:(0,ea.Gu)(W)&&nu&&lq?[]:["showAdDetail"],shortCutFiltered:nv,showEnterDetail:!(nu&&(0,ea.Gu)(W)),showAdMenu:nu&&(0,ea.Gu)(W),disableShortCut:lY||l5,disableAllNativeShortCut:lY||l5,modalEnterFrom:ez,userInfo:el,showRecommendToFriend:!!lF}),(0,o.jsx)(tN.B,{awemeInfo:W,abtestData:K,isActive:F}),(0,o.jsx)(tS.I,{abtestData:K,isActive:F,awemeInfo:W,logParams:nL,isChapterScene:!0}),(null==ni?void 0:ni.length)>0&&(0,o.jsx)(tE.SettingList,{isActive:F,awemeInfo:W,hideList:ni,player:null==lJ?void 0:null===(A=lJ.current)||void 0===A?void 0:A.player,dispatch:en,abtestData:K,userInfo:el}),(0,o.jsx)(t4.P,{abtestData:K,isActive:F,controlHeight:eu.fp.MidHigh})]}),l1&&(0,o.jsx)(eA.U,{awemeInfo:W}),l7&&(0,o.jsxs)(o.Fragment,{children:[F&&(0,o.jsx)(tL.MiniWinMask,{isActive:F,awemeInfo:W,abtestData:K,playPrevFunc:et,playNextFunc:$,disablePrev:O&&!(er||ei)||(er||ei)&&!Z,disableNext:H&&!(er||ei)||(er||ei)&&!z,ablePlayNext:!(H&&!(er||ei)||(er||ei)&&!z),loginUserInfo:el,loginDispatch:en,fullScreenTarget:Q,reportExtraParams:nL,recordPreferVideoSwitch:!0}),F&&!ng&&(0,o.jsx)(tT.N,{awemeInfo:W})]}),"general_search"===ez&&(0,o.jsx)(tM.l,{awemeInfo:W,from:"modal_player",isActive:F,isUpperFeed:lT}),ez===c.a.Activity&&(0,o.jsx)(lu.I,{awemeInfo:W,from:"modal_player",isActive:F,isUpperFeed:lT})]})}));var lm=l("476261");let lf=()=>{let e=(0,a.useRef)({});return{recordLatestAwemeId:(0,a.useCallback)((t,l)=>{t&&l&&!e.current[l]&&(e.current[l]=!0,p.Le.setConfig(p.gI.FeedLatestViewedAweme,{awemeId:l}))},[])}};var lh=l("153296"),lp=l("212623"),lg=l("118687"),l_=l("465769"),lx=l("872136");let lw=new lx.h({closePlayer:{eventName:"close_player",params:{enter_from:"",tab_name:"",click_method:""}},clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",play_material:"video"}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",play_material:"video"}},modalNextVideoUnready:{eventName:"modal_next_video_unready",params:{error:"",enter_from:"",group_id:"",log_pb:""}},modalNextVideoView:{eventName:"modal_next_video_view",params:{index:0,success:!0,error:"",enter_from:"",group_id:"",log_pb:""}},clickSmallWindowEntrance:{eventName:"click_small_window_entrance",params:{enter_from:"",click_method:"",is_manual:"0",group_id:"",player_display_mode:""}}}),lC=e=>{let{awemeInfo:t,refPlayer:l,hideModalByPipInitial:r=!1,setHideModalByPipInitial:i,modalEnterFrom:o,logParams:s}=e,d=(0,T.Iq)(e=>{let{pipWindow:t}=e;return{pipWindow:t}}),[u,m]=(0,a.useState)(r),f=function(){let{scene:e="auto",awemeId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scene:"auto"};if(o===c.a.WaterFall&&(lw.sendLog("clickSmallWindowEntrance",(0,n._)({enter_from:(0,l_.vM)(),click_method:e,is_manual:"auto"===e?"0":"1",player_display_mode:(0,l_.Ok)(),group_id:t},s)),"auto"===e)){var r,i,a;let e=null==l?void 0:null===(r=l.current)||void 0===r?void 0:r.getPlayer(),{pipWindow:t}=d;null==e||null===(a=e.plugins)||void 0===a||null===(i=a.pip)||void 0===i||i.requestPIP(t)}};return(0,a.useEffect)(()=>{r&&u&&(f({scene:"click_preview_icon",awemeId:null==t?void 0:t.awemeId}),null==i||i(!1))},[r,i]),(0,a.useEffect)(()=>()=>{d.pipWindow&&u&&d.pipWindow.close();let e=ls.e.getPipWindow({scene:v.d.ListenVideo});e&&u&&e.close()},[]),{hideModalByPip:u,setHideModalByPip:m}};var ly=l("948375");let lI=e=>{let{logParams:t,awemeInfoList:l,currentNumber:i,modalInnerFeedCard:o,awemeInfoListRef:s,onLivePause:d,modalEnterFrom:u,close:c,isInnerFeed:v}=e,{awemeFeed:m}=(0,J.j)(),f=(0,a.useMemo)(()=>null==l?void 0:l[i],[l,i]),h=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v&&!o?(m.dispatch({modalAwemeInfo:null,nextAwemeInfo:null,prevAwemeInfo:null}),lw.sendLog("closePlayer",(0,r._)((0,n._)({},t,e,(null==f?void 0:f.logParams)||{}),{enter_from:m.getValue("feedType")})),l&&c(i)):(c(i),lw.sendLog("closePlayer",(0,n._)({},t,e,(null==f?void 0:f.logParams)||{})))},[c,f,i,t,v]),p=(0,ly.Z)(()=>{m.dispatch("cardType",null),lw.sendLog("closePlayer",(0,r._)((0,n._)({},t,(null==f?void 0:f.logParams)||{}),{enter_from:m.getValue("feedType"),click_method:"button"})),m.dispatch("modalAwemeInfo",null),o&&(null==c||c())}),_=(0,ly.Z)(e=>{var t,l,n;if(null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(l=e.stopPropagation)||void 0===l||l.call(e),null==d||d(null===(n=s.current)||void 0===n?void 0:n[i]),(null==e?void 0:e.triggerFrom)!=="ai_search"&&(null==e?void 0:e.triggerFrom)!=="ai_extension"&&(null==e?void 0:e.triggerFrom)!=="activity"||u===(null==e?void 0:e.triggerFrom))h({click_method:"button"},!0)});return(0,a.useEffect)(()=>{let e=g.listen(g.EVENT.triggerModalPlayerClose,_),t=g.listen(g.EVENT.triggerModalPlayerCloseForCachePages,_);return()=>{e(),t()}},[_]),{closeModal:h,onBack:_,onBackWithInnerMode:p}},lb=e=>{let{disableSwitch:t,modalEnterFrom:l,recommendGuideVisible:r,handleCloseGuide:i,setCurrentNumber:o,awemeInfoListRef:s,abtestData:d,logParams:u,modalSlideOptimize:c,swiper:v,setIsFirstEnterVideo:m,closeWhenUp:f}=e,h=(0,a.useRef)(()=>{}),g=(0,a.useRef)(()=>{lw.sendLog("modalNextVideoUnready",(0,n._)({error:"正在加载下一个视频"},u)),F.F.info("正在加载下一个视频")}),_=(0,a.useCallback)(e=>{if(t)return;let{from:a="click_button",triggerFrom:f}=e||{};if("ai_search"!==f&&"ai_extension"!==f&&"activity"!==f||l===f)r&&i({scroll:"mouse",keyboard:"keyboard",click_button:"next_video_button"}[a]),"auto"===a&&(0,p.Vv)(L.PagingType.auto),o(e=>{let t=!0,l=e;if(e<s.current.length-1)t=!0,l=e+1;else if("aiNote"===f)t=!1,F.F.info("已经是最后一个视频了"),l=e;else{var r,i;t=!1,(null==d?void 0:d.discoverOptimize)?!!document.querySelector("#toastContainer")||null===(r=g.current)||void 0===r||r.call(g):null===(i=g.current)||void 0===i||i.call(g),l=e}return lw.sendLog("modalNextVideoView",(0,n._)({error:t?"":"正在加载下一个视频",index:e+1,success:t},u)),c&&(null==v||v.slideTo(l)),l}),m(!1)},[t,r,v,c]),x=(0,a.useCallback)(e=>{if(t)return;let{from:n="click_button",triggerFrom:a}=e||{};if("ai_search"!==a&&"ai_extension"!==a&&"activity"!==a||l===a)r&&f&&i({scroll:"mouse",keyboard:"keyboard",click_button:"last_video_button"}[n]),o(e=>{var t;if(e>0)return c&&(null==v||v.slideTo(e-1)),e-1;return null===(t=h.current)||void 0===t||t.call(h),c&&(null==v||v.slideTo(e)),e}),m(!1)},[t,r,f,v,c]);return{refPrevVideoCallBack:h,refNextVideoCallBack:g,playNextFunc:_,playPrevFunc:x}};l("897860"),l("110006");let lj="modal-video-0",lk=()=>{let e=parseInt(lj.match(/\d+$/)[0]);e++,lj=lj.replace(/\d+$/,e)},lN=()=>{let e=parseInt(lj.match(/\d+$/)[0]);e--,lj=lj.replace(/\d+$/,e)},lS=()=>({refDepth:(0,a.useRef)(lj)});var lE=l("265656"),lL=l("636111");let lT=e=>{let{abtestData:t,swiper:l,currentNumber:n,awemeInfoList:r}=e,i=(0,a.useMemo)(()=>{if((0,lE.En)()){var e;return null===(e=(0,lL.P)(t))||void 0===e?void 0:e.preloadCount}let l={};return((null==t?void 0:t.preloadCountApplySideServer)==="both"||isInClient()&&(null==t?void 0:t.preloadCountApplySideServer)==="client"||!isInClient()&&(null==t?void 0:t.preloadCountApplySideServer)==="web")&&(l=null==t?void 0:t.preloadCountServer),Object.assign({},null==t?void 0:t.preloadCount,l)},[t,l]);(0,a.useLayoutEffect)(()=>{(()=>{if(null==i?void 0:i.open){let e=(null==i?void 0:i.count)||3,t=r.slice(n+1).filter(e=>(null==e?void 0:e.awemeType)===U.e.Normal&&!(0,tB.Ni)(e)).slice(0,e);p.Le.setConfig(p.gI.PreloadList,t)}else{let e=r.slice(n+1,n+4).filter(e=>!(0,tB.Ni)(e));p.Le.setConfig(p.gI.PreloadList,e)}})()},[t,n,r])};var lM=l("259624"),lR=l("948431");let lP=e=>{let{refPlayer:t,swiper:l,setAwemeInfoList:n,awemeInfoList:r,scrollRef:i,isInnerFeed:o}=e,s=(0,a.useRef)(""),[d,u]=(0,a.useState)(!1);return(0,lM.g)({swiper:l,setAwemeInfoList:n,awemeInfoList:r,refMixPlayer:t,scrollRef:i,isInnerFeed:o}),(0,lR.Z)({refMixPlayer:t,changeMinWinCb:e=>{e&&(s.current=document.body.style.minWidth),document.body.style.minWidth=e?"auto":s.current,document.body.style.overflow=e?"hidden":"",u(e)}}),{isClientMiniWin:d}},lD=e=>{let{swiper:t,modalSlideOptimize:l,currentNumber:n,setCurrentNumber:r}=e;(0,a.useEffect)(()=>{t&&(l||t.slideTo(n))},[t,n,l]),(0,a.useEffect)(()=>{if(t){let e=null==t?void 0:t.activeIndex,l=l=>{r(null==t?void 0:t.activeIndex),(null==l?void 0:l.from)==="drag"&&g.emit((null==t?void 0:t.activeIndex)-e>0?g.EVENT.reportPlayNext:g.EVENT.reportPlayPrev,{clickFrom:"drag"}),e=null==t?void 0:t.activeIndex};return t.on("slideChange",l),()=>{t.off("slideChange",l)}}},[t])};l("954372"),l("882732"),l("544943");var lA=l("504229");let lF=["search_multi_modal","waterFall","hot",/^channel/,/^music/,"favorite_collection","like","post","record","watch_later"],lV=e=>{var t,l,n,r,i,o,a,s,d,u;let{scene:c,awemeInfoList:v,currentNumber:m,originAwemeInfo:f,modalAwemeInfo:h,isSelf:g}=e,_=null!==(t=v[m])&&void 0!==t?t:f,x=null==_?void 0:_.awemeId,w=p.Le.getConfig(p.gI.ModalStartTime)||{};if(w[x]){let e=w[x];return delete w[x],p.Le.setConfig(p.gI.ModalStartTime,w),{time:e,isRevisitStart:!1}}if(!(lF.findIndex(e=>{var t;return e===c||(null==e?void 0:null===(t=e.test)||void 0===t?void 0:t.call(e,c))})>=0))return{time:void 0,isRevisitStart:!1};let C="watch_later"===c,y=p.Le.getConfig(p.gI.PreviewPlayInfoRecord);if((0,lA.sF)()){let e=new URL(location.href).searchParams;e&&e.get("modal_id")&&(y={awemeId:e.get("modal_id"),recordPlayTime:Number(e.get("start_time"))/1e3})}let I=(null==y?void 0:y.awemeId)===(null==_?void 0:_.awemeId)?null==y?void 0:y.recordPlayTime:void 0,b=(null==_?void 0:_.awemeId)===(null==f?void 0:f.awemeId);if(C&&b&&!I){let{store:e}=null!==(o=p.Le.getConfig(p.gI.WatchLater))&&void 0!==o?o:{},t=(null==e?void 0:null===(l=e[null==_?void 0:_.awemeId])||void 0===l?void 0:l.loop)>0||(null==_?void 0:null===(n=_.playProgress)||void 0===n?void 0:n.watch_times)>0,d=null!==(s=null!==(a=null==e?void 0:null===(r=e[null==_?void 0:_.awemeId])||void 0===r?void 0:r.progress)&&void 0!==a?a:null==_?void 0:null===(i=_.playProgress)||void 0===i?void 0:i.play_progress)&&void 0!==s?s:0;return t||!d?{time:0,isRevisitStart:!1}:{time:Math.floor(d/1e3),isRevisitStart:!1}}if(["favorite_collection","like","record"].includes(c)&&b&&g){if((null==h?void 0:null===(d=h.playProgress)||void 0===d?void 0:d.play_progress)<=0)return{time:0,isRevisitStart:!1};let e=Math.max(Math.floor((null==h?void 0:null===(u=h.playProgress)||void 0===u?void 0:u.play_progress)/1e3)-2,1);return{time:I>=e?I:e,isRevisitStart:!0}}return{time:I,isRevisitStart:!1}};var lB=l("149250"),lU=l("847191"),lO=l("132607");let lH=e=>{let{modalEnterFrom:t,abtestData:l}=e,i=t===c.a.WaterFall||t===c.a.ShareModal&&"discover"===(0,eT.yW)(),o=i&&(l.jxAskAiDefaultOpen===lO.JxAskAiDefaultOpen.V1||l.jxAskAiDefaultOpen===lO.JxAskAiDefaultOpen.V2),s=i&&l.jxAskAiDefaultOpen===lO.JxAskAiDefaultOpen.V1,[d,u]=(0,a.useState)(!1),[v,m]=(0,a.useState)(!1),[f,h]=(0,a.useState)(!1),p=(0,a.useRef)(!1),g=(0,a.useCallback)(e=>{p.current=e},[]),_=(0,a.useCallback)(e=>{u(e),(0,lU.qQ)(ec.LocalStorageKeys.AiCardIsPined,e?"1":"0")},[]);return(0,a.useEffect)(()=>{if(o){let e="1"===(0,lU.$o)(ec.LocalStorageKeys.AiCardIsPined);u(e),m(e)}},[o]),(0,a.useEffect)(()=>{s&&(window.innerWidth>=1200&&h(!0),window.addEventListener("resize",()=>{window.innerWidth<1200&&h(!1)}))},[s]),(0,a.useMemo)(()=>(0,r._)((0,n._)({},o?{globalIsShowAiCard:v,setGlobalIsShowAiCard:m,aiCardIsPined:d,togglePinAiCard:_}:{}),{useJxSlideInheritAndPin:o,useJxDefaultOpen:s,aiCardIsDefaultOpen:f,hasDefaultShowAiCardRef:p,setHasDefaultShowAiCard:g}),[v,m,d,_,o,s,f,g])},{useRecommendGuide:lW}=lm.Z,lz=e=>{var t,l,i,s,d,v;let{appendPlayerConfig:m,preloadReady:b,preloadAwemeList:j=[],userContext:k,abtestData:N,close:S,anyHooks:E,moreBoxShowList:L={notInterestingIcon:!0,unfollow:!0,report:!0,shortcutList:!1,dataAnalysis:!1,deleteSelfPost:!1},logParams:P,defaultCommentShow:D=!1,className:U,insertCommentId:O,disableSwitch:H=!1,disableAutoPlay:W=!1,originAwemeInfo:Z,modalId:$,uid:K,useOldModal:G,danmakuInfo:Y,defaultShowSideBar:q,shortCutFilteredList:Q,modalEnterFrom:X="",collectFolderId:ee,collectionFolderInfo:et,isDefaultShowRelatedCard:el,modalInnerFeedCard:en,defaultOpenedCardType:er,defaultOpenedCardExtraProps:eo,defaultForceOpenTab:ea,activityCardDirectOpen:es,bingeInfo:ed,container:eu,isSelf:ec,scene:ev,notCanMixListen:em,searchParams:ef,mouseScrollContainer:eh,searchFrom:ep,wrapperClassName:eg,reuseConfig:e_,hideModalWhenPip:ex=!1,hideModalByPipInitial:ew=!1,setHideModalByPipInitial:eC,autoOpenPip:ey=!1,scrollRef:eI}=e,{userInfo:eb}=k,{refDepth:ej}=lS(),ek=(0,a.useRef)(null),eN=(0,a.useRef)(null),eS=(0,a.useRef)(),[eE,eL]=(0,a.useState)(-1),[eT,eM]=(0,a.useState)(!0),[eR,eP]=(0,a.useState)([]),[eD,eA]=(0,a.useState)(null),eF=(0,a.useRef)([]);eF.current=eR;let{awemeFeed:eV}=(0,J.j)(),eB=eV.useValue("modalAwemeInfo",Boolean),eU=eV.useValue("innerFeedAwemeInfo"),eO=X.includes("search"),{isWebMiniWin:eH,isListenVideoMiniWin:eW}=(0,T.Iq)(e=>{let{isWebMiniWin:t,isListenVideoMiniWin:l}=e;return{isWebMiniWin:t,isListenVideoMiniWin:l}}),[eZ,e$]=(0,a.useState)(),[eK,eG]=(0,a.useState)(!1),eY=(0,h.x)(),[eq,eQ]=(0,a.useState)(Z),eX=(null==N?void 0:N.discoverSlideOptimize)&&(null==P?void 0:P.enter_from)==="discover"||(null==N?void 0:N.searchSlideOptimize)&&eO,eJ=lH({modalEnterFrom:X,abtestData:N});(0,a.useEffect)(()=>(p.Le.setConfig(p.gI.IsInModalVideo,{isInModal:!0,modalEnterFrom:X}),X===c.a.WaterFall&&(window.isInJingxuanModal=!0),p.Le.setConfig(p.gI.VideoPlayMethod,"auto"),g.emit(g.EVENT.videoPause,"ModalVideoContent_enter"),g.emit(g.EVENT.musicPause),g.emit(g.EVENT.searchMusicPause),g.emit(g.EVENT.livePause),p.Le.setConfig(p.gI.isVideoPlayed,null),g.emit(g.EVENT.enterModalVideo,ej.current),lk(),()=>{var e;((null===(e=p.Le.getConfig(p.gI.IsInModalVideo))||void 0===e?void 0:e.modalEnterFrom)||"")===X&&(p.Le.setConfig(p.gI.IsInModalVideo,{isInModal:!1}),X===c.a.WaterFall&&(window.isInJingxuanModal=!1)),g.emit(g.EVENT.exitModalVideo,ej.current),lN()}),[]),(0,a.useEffect)(()=>{(0,p.Vv)(void 0)},[$]);let e0="general_search"===X,{recommendGuideChild:e1,useNewUserSoundGuide:e2,recommendGuideVisible:e3,handleCloseGuide:e5}=lW({isCanShow:X!==c.a.Im,enterFrom:"modal_video",modalEnterFrom:X,awemeInfoList:eR,className:y.default.guideCard,disableLottie:(0,_.b_)()||(0,_.Sb)(),isFullscreen:!0,closeWhenUp:e0,isCloseInGuide:!0,swiper:eD}),{playNextFunc:e6,playPrevFunc:e7,refNextVideoCallBack:e4,refPrevVideoCallBack:e8}=lb({disableSwitch:H,modalEnterFrom:X,recommendGuideVisible:e3,handleCloseGuide:e5,setCurrentNumber:eL,awemeInfoListRef:eF,abtestData:N,logParams:P,modalSlideOptimize:eX,swiper:eD,setIsFirstEnterVideo:eM,closeWhenUp:e0}),e9=(0,a.useCallback)(()=>{var e,t,l,n;eR.length-1===eE&&(eL(eE-1),eX&&(null==eD||eD.slideTo(eE-1))),eP(e=>{var t;let l=[...e];return l.splice(eE,1),null===(t=eS.current)||void 0===t||t.call(eS,{currentNumber:eE,awemeList:l}),l}),null===(t=ek.current)||void 0===t||null===(e=t.setIsAuthorCardShow)||void 0===e||e.call(t,!1),null===(n=ek.current)||void 0===n||null===(l=n.setIsShowRelatedCard)||void 0===l||l.call(n,!1)},[eE,eR,eD,eX]);lT({abtestData:N,swiper:eD,currentNumber:eE,awemeInfoList:eR});let{slideVideoTab:te,setSlideVideoTab:tt,modalAwemeInfo:tl,setModalAwemeInfo:tn,globalIsSideBarShow:tr,setIsSideBarShowFunc:ti}=I({originAwemeInfo:null!=Z?Z:eR[0]}),{defaultTab:to="",isTabFeed:ta,onLivePause:ts=()=>null,onLivePlay:td=()=>null}=(null==E?void 0:E((0,r._)((0,n._)({},e),{delVideoCallBackRef:eS,currentNumber:eE,awemeInfoList:eR,refPrevVideoCallBack:e8,refNextVideoCallBack:e4,curTab:te,awemeInfo:tl,setCurrentNumber:eL,setAwemeInfoList:eP,setModalAwemeInfo:tn,swiper:eD,preloadReady:b,preloadAwemeList:j,currentAwemeInfo:eq})))||{},{hideModalByPip:tu,setHideModalByPip:tc}=lC({awemeInfo:tl,refPlayer:ek,hideModalByPipInitial:ew,setHideModalByPipInitial:eC,modalEnterFrom:X,logParams:P}),{isClientMiniWin:tv}=lP({swiper:eD,setAwemeInfoList:eP,awemeInfoList:eR,refPlayer:ek,scrollRef:eI,isInnerFeed:eB}),{closeModal:tm,onBack:tf,onBackWithInnerMode:th}=lI({logParams:P,awemeInfoList:eR,currentNumber:eE,modalInnerFeedCard:en,awemeInfoListRef:eF,onLivePause:ts,modalEnterFrom:X,close:S,isInnerFeed:eB});M({abtestData:N,container:eh||eu,closeModal:tm,isClientMiniWin:tv,modalEnterFrom:X}),(0,a.useEffect)(()=>{let e=location.pathname,t=(0,ez.OB)();return t&&(0,ez.wS)(t,!1),()=>{t&&e===location.pathname&&(0,ez.wS)(t,!0),x.p.postTask({priority:"background",task:()=>g.emit(g.EVENT.syncInteraction)})}},[]);let{asrState:tp}=A({awemeInfoListRef:eF,userInfo:eb,currentNumber:eE});lD({swiper:eD,modalSlideOptimize:eX,currentNumber:eE,setCurrentNumber:eL});let tg=R({currentNumber:eE}),{recordLatestAwemeId:t_}=lf(),{isRevisitStart:tx,time:tw}=(0,a.useMemo)(()=>lV({scene:ev,awemeInfoList:eR,currentNumber:eE,originAwemeInfo:Z,modalAwemeInfo:tl,isSelf:ec}),[ev,eR,eE,Z,tl,ec]),tC=(0,a.useMemo)(()=>{var e,t,l,i,o;return{insertCommentId:eT?O:void 0,userContext:k,abtestData:N,logParams:(0,r._)((0,n._)({},P),{is_modal_first_enter:tg?"1":"0",is_auto_show_ask_ai:(null==eJ?void 0:eJ.aiCardIsPined)||(null==eJ?void 0:eJ.aiCardIsDefaultOpen)?"1":"0"}),showTopicAndMusicCard:!1,showMixCard:!1,showMixCardEntry:!1,showHotCard:!!((null===(e=eR[eE])||void 0===e?void 0:e.hotList)&&(null===(l=eR[eE])||void 0===l?void 0:null===(t=l.hotList)||void 0===t?void 0:t.rank)!==51&&(null===(o=eR[eE])||void 0===o?void 0:null===(i=o.hotList)||void 0===i?void 0:i.type)!==2),tab:"modal",useOldModal:G,danmakuInfo:Y}},[eT,O,k,N,P,eE,G,Y,eJ,tg]),ty=(0,a.useMemo)(()=>{var e;return(0,r._)((0,n._)({},L),{shortcutList:!0,notInterestingIcon:!!ta||L.notInterestingIcon,dataAnalysis:(null==L?void 0:L.dataAnalysis)&&(null==Z?void 0:Z.authorUserId)===(null===(e=eR[eE])||void 0===e?void 0:e.authorUserId),deleteSelfPost:null==L?void 0:L.deleteSelfPost,asrState:tp})},[L,ta,Z,eR,eE,tp]),tI=(0,a.useMemo)(()=>e=>F.F.info(e,void 0,1e3),[]),tb=(0,o.jsx)(z,{appendPlayerConfig:m,activityCardDirectOpen:es,close:tf,className:"isDark isDeepDark",fullScreenTarget:eu,deleteCurrentSwiper:e9,moreBoxShowList:w.H.baseOpt(N)?ty:(0,r._)((0,n._)({},L),{shortcutList:!0,notInterestingIcon:!!ta||L.notInterestingIcon,dataAnalysis:(null==L?void 0:L.dataAnalysis)&&(null==Z?void 0:Z.authorUserId)===(null===(t=eR[eE])||void 0===t?void 0:t.authorUserId),deleteSelfPost:null==L?void 0:L.deleteSelfPost,asrState:tp}),modalEnterFrom:X,modalInnerFeedCard:en,defaultOpenedCardType:er,defaultOpenedCardExtraProps:eo,swiper:g.commonEvent,videoToast:w.H.baseOpt(N)?tI:e=>F.F.info(e,void 0,1e3),item:eR[eE],playNextFunc:e6,playPrevFunc:e7,defaultCommentShow:D,InnerPlayer:lv,disableAutoPlay:W,relatedDefaultTab:to,originAwemeInfo:null!=Z?Z:eR[0],modalId:$,defaultShowSideBar:q,setModalAwemeInfo:tn,customProps:w.H.baseOpt(N)?tC:{insertCommentId:eT?O:void 0,userContext:k,abtestData:N,logParams:(0,r._)((0,n._)({},P),{is_modal_first_enter:tg?"1":"0",is_auto_show_ask_ai:(null==eJ?void 0:eJ.aiCardIsPined)||(null==eJ?void 0:eJ.aiCardIsDefaultOpen)?"1":"0"}),showTopicAndMusicCard:!1,showMixCard:!1,showMixCardEntry:!1,showHotCard:!!((null===(l=eR[eE])||void 0===l?void 0:l.hotList)&&(null===(s=eR[eE])||void 0===s?void 0:null===(i=s.hotList)||void 0===i?void 0:i.rank)!==51&&(null===(v=eR[eE])||void 0===v?void 0:null===(d=v.hotList)||void 0===d?void 0:d.type)!==2),tab:"modal",useOldModal:G,danmakuInfo:Y},ref:ek,shortCutFilteredList:Q,collectFolderId:ee,collectionFolderInfo:et,isDefaultShowRelatedCard:el,defaultForceOpenTab:ea,bingeInfo:ed,isClientMiniWin:tv,notCanMixListen:em,startTime:tw,onLivePause:ts,onLivePlay:td,searchFrom:ep,isShowGuide:e3,useNewUserSoundGuide:e2,isRevisitStart:tx,onAwemeInfoChange:eX?null:eQ,reuseConfig:e_,scrollRef:eI,hideModalWhenPip:ex,setHideModalByPip:tc,modalClose:S}),tj=ev?`dy-modal-video-container-${ev}`:void 0;return(0,o.jsxs)(f.C.Provider,{value:(0,n._)({userId:K,slideVideoTab:te,setSlideVideoTab:tt,setModalAwemeInfo:tn,awemeInfoList:eR,globalIsSideBarShow:tr,setIsSideBarShowFunc:ti,isCssFullScreen:!0,isSelf:ec,collectionFolderInfo:et,isClientMiniWin:tv,globalIsCommentTrayPushGuideShow:eZ,setIsCommentTrayPushGuideShowFunc:e$,globalCommentTrayPushGuideType:eK,setCommentTrayPushGuideTypeFunc:eG},eJ),children:[(0,o.jsxs)("div",{className:u()(eg,{[y.default.pipHide]:tu}),children:[(0,o.jsx)(ei,{containerId:tj,close:S,autoOpenPip:ey,isInnerFeed:eB,modalInnerFeedCard:en,isClientMiniWin:tv,refPlayer:ek,onBack:tf,onBackWithInnerMode:th,abtestData:N,awemeInfoList:eR,currentNumber:eE,modalEnterFrom:X,isSelf:ec,userInfo:eb,logParams:P,searchParams:ef,slideVideoTab:te,currentAwemeInfo:eB?eU:null==eR?void 0:eR[eE],fullScreenTarget:eu}),!tv&&e1,(0,o.jsx)("div",{id:"upperFeedContainer",className:u()(y.default.moreIndex,{[y.default.isClientMiniWin]:tv,searchUpperFeedContainer:eO})}),(0,o.jsx)(V.k,{componentName:"ModalVideoContent",children:(0,o.jsxs)("div",{id:tj,className:u()(y.default.modalVideo,U,"modal-video-container",{[y.default.isLoading]:!eR[eE],[y.default.modalSlider]:"search"===X,[y.default.isWebMiniWin]:eH||eW,isMiniWindow:tv,isMiniWindowOptimize:tv&&eY}),"data-e2e":"modal-video-container",children:[eR[eE]?(0,o.jsx)(lp.ZP,{onSwiper:eA,abTestData:N,cardBetween:0,nextSwiperHeaderHeight:0,upperSpace:0,data:eR,scene:lg.R5.Modal,defaultCssFullScreen:!0,initIndex:eE,useWheelListener:!1,collectionFolderInfo:et,globalAiCardValue:eJ,children:(0,o.jsx)(lh.o,{"data-e2e":"feed-item",className:u()(y.default.swiperItem),slot:lg.t6.INSIDE,children:e=>{let{slideData:t,activeIndex:l,currentIndex:n}=e;if(!(1>=Math.abs(l-n)))return null;{let e=l===n;return t_(e,null==t?void 0:t.awemeId),(0,a.cloneElement)(tb,{isActive:e,isFirst:0===n,isNext:l+1===n,isPrev:l-1===n,isLast:n===eR.length-1,index:n,isClientMiniWin:tv,item:t,videoRef:e?ek:eN})}}})}):(0,o.jsx)(B.gb,{}),(0,o.jsx)("div",{id:"modal_fullscreen_capture_feedback",children:(0,o.jsx)("div",{id:"modal_fullscreen_capture"})})]})})]}),(0,o.jsx)(C.IsLivingPlugin,{activeIndex:eE,dataList:eR,setDataList:eP,scene:"jingxuan_feed"})]})};var lZ=(0,a.memo)(e=>{var t;let{root:l,onSetAttribute:d,metaCtxId:u,isSelfMetaProvider:c=!1,modalEnterFrom:f}=e,{pipWindow:h,isListenVideoMiniWin:p,changeIsListenVideoMiniWin:g}=(0,T.Iq)(e=>{let{pipWindow:t,isListenVideoMiniWin:l,changeIsListenVideoMiniWin:n}=e;return{pipWindow:t,isListenVideoMiniWin:l,changeIsListenVideoMiniWin:n}}),_=(0,a.useRef)(document.createElement("div"));(0,a.useEffect)(()=>{let e=l||document.getElementById("douyin-right-container")||document.body;return null==d||d(_),e.appendChild(_.current),()=>{var e,t;(null===(e=_.current)||void 0===e?void 0:e.parentNode)&&(null===(t=_.current)||void 0===t||t.remove()),_.current=null}},[]),(0,a.useEffect)(()=>{if(p){g(!1);let e=ls.e.getPipWindow({scene:v.d.ListenVideo});e?e.close():lB.T.exit()}},[]),(0,m.w)(()=>{let e=_.current;if(e)return e.classList.add(y.default.routeHide),()=>{e.classList.remove(y.default.routeHide)}},[]);let x=(0,J.j)(),{awemeFeed:w}=x,C=(0,i._)(x,["awemeFeed"]);return c?s.createPortal((0,o.jsx)(lz,(0,r._)((0,n._)({},e),{close:t=>{var l,n,r;let i=ls.e.getPipWindow({scene:v.d.ListenVideo});i&&i.close(),null==h||null===(l=h.close)||void 0===l||l.call(h),_.current.parentNode&&(null===(r=_.current)||void 0===r||r.remove()),null==e||null===(n=e.close)||void 0===n||n.call(e,t)},container:l||_.current,mouseScrollContainer:_.current})),_.current):s.createPortal((0,o.jsx)(J.b,{context:(0,r._)((0,n._)({},C),{metaCtxId:null!==(t=null!=u?u:f)&&void 0!==t?t:"modal"}),children:(0,o.jsx)(lz,(0,r._)((0,n._)({},e),{close:t=>{var l,n,r;null==h||null===(l=h.close)||void 0===l||l.call(h),_.current.parentNode&&(null===(r=_.current)||void 0===r||r.remove()),null==e||null===(n=e.close)||void 0===n||n.call(e,t)},container:l||_.current,mouseScrollContainer:_.current}))}),_.current)})},756261:function(e,t,l){l.d(t,{R:function(){return u}});var n=l(563097);l(88648);var r=l(713097),i=l.n(r),o=l(645003),a=l(623582),s=l(742740),d=l(280717);let u=e=>{let{profileRankLabel:t,className:l,onClick:r,uid:u}=e,{iconUrl:c,text:v,bgColorStart:m,bgColorEnd:f,textColorStart:h,textColorEnd:p}=t||{},g=(0,o.x)(()=>{a.logInstance.sendLog("monthlyAuthorShow",{enter_from:(0,s.yW)(),author_id:u})});return c&&v?(0,n.jsx)("div",{ref:g,className:i()(d.default.monthlyRecommendUserTagContainer,l),onClick:r,children:(0,n.jsxs)("div",{className:i()(d.default.monthlyRecommendUserTag),style:m&&f?{background:`linear-gradient(90deg, ${m}, ${f})`}:{},children:[(0,n.jsx)("img",{className:d.default.icon,src:c,alt:""}),(0,n.jsx)("div",{className:d.default.text,style:h&&p?{background:`linear-gradient(204deg, ${h}, ${p})`,"background-clip":"text","-webkit-background-clip":"text","-webkit-text-fill-color":"transparent"}:{},children:v})]})}):null}},756024:function(e,t,l){l.d(t,{U:function(){return u},V:function(){return c}}),l(413806),l(826893);var n=l(563097);l(88648);var r=l(713097),i=l.n(r),o=l(645003),a=l(935427),s=l(801636),d=l(852664),u={SideCardVideo:"sideCardVideo",MonthVideo:"monthVideo",AllVideo:"allVideo"};let c=e=>{let{onClick:t,src:l,iconWidth:r=80,desc:u,showTitle:c=!1,className:v,name:m="看更多\n最新作品",onShow:f,cardStyle:h}=e,p=m.split("\n"),g=(0,o.x)(f);return(0,n.jsxs)("div",{className:i()(a.default.noLoginVideoGuide,v),ref:g,onClick:t,children:[(0,n.jsxs)("div",{className:i()(a.default.wrapper),children:[(0,n.jsx)("div",{className:a.default.imageContainer,children:(0,n.jsx)(s.Q,{className:i()(a.default.videoImg,{[a.default.isSafari]:(0,d.G6)()}),src:l,iconWidth:r,isSpider:!1})}),(0,n.jsxs)("div",{className:i()(a.default.playLoadingWrap,{[a.default.sideCard]:"sideCardVideo"===h,[a.default.allVideo]:"allVideo"===h,[a.default.monthVideo]:"monthVideo"===h}),style:{zIndex:c?0:10},children:[p.map(e=>(0,n.jsx)("div",{className:a.default.playLoadingText,children:e},e)),(0,n.jsx)("div",{className:i()("text-no-shadow",a.default.btn),children:"登录"})]})]}),c&&(0,n.jsx)("p",{className:i()(a.default.title,a.default.single),children:u})]})}},786374:function(e,t,l){l.d(t,{E:function(){return _},w:function(){return g}});var n=l("520739"),r=l("878389");l("874386");var i=l("563097"),o=l("88648"),a=l("88961"),s=l("713097"),d=l.n(s),u=l("162095"),c=l("623527"),v=l("465769"),m=l("872136"),f=new m.h({loginGuideShow:{eventName:"login_guide_show",params:{enter_from:"",enter_method:"",params_for_special:""}},loginGuideClick:{eventName:"login_guide_click",params:{enter_from:"",enter_method:"",params_for_special:""}}}),h=l("60446"),p=l("100638");l("315422");let g=e=>{let{success:t=null,host:l=null,next:s=null,enterMethod:u="author_card_login_guide",destroy:v=null,change:m=()=>null,close:f,className:h,blockNum:g,onShow:_,text:x,transition:w,notAnimate:C}=e,y=(0,o.useRef)(null),[I,b]=(0,o.useState)(!0),j=(0,o.useRef)(null),[k,N]=(0,a.Z)();(0,o.useEffect)(()=>{N&&_()},[N]);let S=()=>{var e;null===(e=y.current)||void 0===e||e.call(y),null==v||v()},E=async()=>{b(!0);let e=await (0,p.HJ)({success:t,next:s,enterMethod:u}),l=await (0,p._j)();j.current=new l((0,r._)((0,n._)({},e),{scanCodeDesc:()=>(0,i.jsx)(i.Fragment,{}),success:t=>{var l;setTimeout(S,0),null==e||null===(l=e.success)||void 0===l||l.call(e,t),null==m||m()}})),c.oe.event.info({name:c.Mo.PassportLoginEntry,report:{enterMethod:u,entry:"RelatedVideoCard"}}),b(!1)};(0,o.useEffect)(()=>{E()},[]);let L=(0,o.useCallback)(()=>{var e,t;return(null===(e=j.current)||void 0===e?void 0:e.LoginContainer)?null===(t=j.current)||void 0===t?void 0:t.LoginContainer():(0,i.jsx)("div",{})},[]);return(0,i.jsx)("div",{className:d()("related-video-card-login-guide-block",h,{showBlockBtn:2===g,animate__fadeInUpBig:w,notAnimate:C}),ref:k,children:I?null:(0,i.jsx)(o.Fragment,{children:(0,i.jsxs)("div",{className:"related-video-card-login-guide-block__content",children:[(0,i.jsx)(L,{}),(0,i.jsxs)("div",{className:"related-video-card-login-guide-block__desc",children:[(0,i.jsx)("p",{children:x}),(0,i.jsx)("p",{className:"related-video-card-login-guide-block__text",children:"打开【抖音】扫码登录"}),2===g&&(0,i.jsx)("div",{className:"related-video-card-login-guide-block__close",onClick:()=>{f()},children:(0,i.jsx)("span",{children:"跳过登录"})})]})]})})})},_=e=>{let{blockNum:t,isDetail:l,handleUnLogin:n,handleJumpBlock:r,onShow:s,text:c,blockText:m,enterMethod:p}=e,[g,_]=(0,a.Z)();return(0,o.useEffect)(()=>{_&&(f.sendLog("loginGuideShow",{enter_from:(0,v.vM)(),enter_method:p,params_for_special:"uc_login"}),null==s||s())},[_]),(0,i.jsxs)("div",{ref:g,className:d()(h.default.loginBtnWrapper,{[h.default.isDetail]:l}),children:[2===t?(0,i.jsx)("div",{className:h.default.jumpBlock,onClick:r,children:(0,i.jsx)("span",{children:m})}):(0,i.jsx)("div",{children:c}),(0,i.jsx)(u.Button,{className:h.default.loginBtn,onClick:()=>{f.sendLog("loginGuideClick",{enter_from:(0,v.vM)(),enter_method:p,params_for_special:"uc_login"}),n()},theme:"solid",children:"立即登录"})]})}},575480:function(e,t,l){l.d(t,{w:function(){return c}});var n=l(563097),r=l(88648),i=l(909543),o=l(404171),a=l(512685),s=l(986488),d=l(328155);let u=()=>{let e=(0,r.useRef)({isRecoveryFromChild:!1}),{pathname:t}=(0,i.a)(),l=(0,r.useRef)(t),n=(0,r.useRef)(!1);return(0,d.Nr)(t)?n.current=!0:(n.current?(n.current=!1,e.current.isRecoveryFromChild=l.current==l.current):e.current.isRecoveryFromChild=!1,l.current=t),e},c=e=>{let{isActive:t,children:l,inherit:i=!0}=e,d=(0,r.useRef)();(0,o.U)();let c=u();!d.current&&(d.current=new a.T(t));let v=(0,r.useMemo)(()=>({isActive:t,routeModel:d.current,ref:c}),[t]);return(0,r.useEffect)(()=>{d.current&&d.current.setActive(t)},[t]),(0,n.jsx)(s.I.Provider,{value:v,children:l})}},259624:function(e,t,l){l.d(t,{g:function(){return g}});var n=l(520739);l(874386),l(250440);var r=l(88648),i=l(832052),o=l(302461),a=l(399242),s=l(725887),d=l(979385),u=l(441447),c=l(737271),v=l(798644),m=l(948431),f=l(487330);let h=[i.e.LiveCard,i.e.WordCupCard,i.e.Article],p=[i.e.LiveCard,i.e.WordCupCard,i.e.Note,i.e.Article],g=e=>{let{swiper:t,setAwemeInfoList:l,awemeInfoList:g,awemeInfo:_,refMixPlayer:x,liveCardDisable:w=!0,scrollRef:C,isInnerFeed:y,enterFrom:I}=e,b=(0,r.useRef)(null),j=(0,m.Z)({refMixPlayer:x,from:"sideList"}),{isWebMiniWin:k,isListenVideoMiniWin:N}=(0,f.Iq)(e=>{let{isWebMiniWin:t,isListenVideoMiniWin:l}=e;return{isWebMiniWin:t,isListenVideoMiniWin:l}}),[S,E]=(0,r.useState)(!1),L=(0,r.useRef)({}),T=(0,r.useRef)([]),M=(0,r.useRef)(0);T.current=g,b.current=null==C?void 0:C.current;let R=(0,r.useMemo)(()=>k||j||N,[k,j,N]);return(0,o.o)(()=>{var e,n;let r=void 0!==y&&y||(null===(e=s.Le.getConfig(s.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal),i=null==x?void 0:null===(n=x.current)||void 0===n?void 0:n.getPlayer();if(!(i&&!i.isUserActive&&I&&["follow","friend"].includes(I)&&(k||N))){if(R&&(!r||!S)&&t&&g){for(let e=0;e<g.length;e++){let t=g[e];k?p.includes(t.awemeType)&&(L.current[e]=t):N&&!(0,d.P)(t)?L.current[e]=t:h.includes(t.awemeType)&&(L.current[e]=t)}let e=0;for(let l=0;l<Object.keys(L.current).length;l++)Number(Object.keys(L.current)[l])<t.activeIndex&&e++,g.splice(Number(Object.keys(L.current)[l])-l,1);return l([...g]),t.slideTo(t.activeIndex-e,0),()=>{var e;let n=0,r=[...T.current];for(let e=0;e<Object.keys(L.current).length;e++)Number(Object.keys(L.current)[e])<=t.activeIndex+n&&n++,r.splice(Number(Object.keys(L.current)[e]),0,L.current[Object.keys(L.current)[e]]);L.current={},l(r),(null===(e=b.current)||void 0===e?void 0:e.setScrollData)&&b.current.setScrollData({dataList:r}),setTimeout(()=>t.slideTo(t.activeIndex+n,0),0)}}}},[R,S,t,y]),(0,o.o)(()=>{let e=u.listen(u.EVENT.exitModalVideo,()=>{var e,t,l,n;if((null===(e=b.current)||void 0===e?void 0:e.setScrollData)&&(null===(l=T.current)||void 0===l?void 0:null===(t=l.filter(e=>"releated"===e.dataType))||void 0===t?void 0:t.length)>0){let e=null===(n=T.current)||void 0===n?void 0:n.filter(e=>"releated"!==e.dataType);b.current.setScrollData({dataList:e})}});return()=>{e()}},[]),(0,o.o)(()=>{let e=u.listen(u.EVENT.changeMinWindows,e=>{var l,n;let{event:r,clickMethod:o,source:d}=e,m=null==x?void 0:null===(l=x.current)||void 0===l?void 0:l.getPlayer(),f=(null==g?void 0:null===(n=g[null==t?void 0:t.activeIndex])||void 0===n?void 0:n.awemeType)===i.e.LiveCard&&w&&"small_window_widget"!==d,h=v.s.getPlayersByScene(a.lT.Modal).length>0&&m&&v.s.getPlayerScene(null==m?void 0:m.playerId)!==a.lT.Modal;if(!f&&!h)"check"===r&&setTimeout(()=>{if(!s.Le.getConfig(s.gI.IsMiniWin))((null==g?void 0:g.length)>0||_)&&((0,c.r)()&&(null==m||m.exitFullscreen()),u.emit(u.EVENT.changeMinWindows,{event:"open",isMiniWin:!0,clickMethod:o,source:d}))},50)});return()=>e()},[g,_,x,t,w]),(0,o.o)(()=>{var e,t;let r=null==x?void 0:null===(e=x.current)||void 0===e?void 0:e.getPlayer();if(r&&!r.isUserActive&&I&&["follow","friend"].includes(I)&&(k||N))return;let i=void 0!==y&&y||(null===(t=s.Le.getConfig(s.gI.IsInLookMiniModal))||void 0===t?void 0:t.isInMiniModal);if(R&&(!i||!S)&&g&&g.length!==M.current){let e=Object.keys(L.current).length,t={};for(let l=0;l<g.length;l++){let n=g[l];k?p.includes(n.awemeType)&&(t[e+l]=n):N&&!(0,d.P)(n)?t[e+l]=n:h.includes(n.awemeType)&&(t[e+l]=n)}for(let l=0;l<Object.keys(t).length;l++)g.splice(Number(Object.keys(t)[l])-l-e,1);L.current=(0,n._)({},L.current,t),l([...g]),M.current=g.length}},[g,R,S,y]),(0,o.o)(()=>{let e=u.listen(u.EVENT.changeVideoSideBar,e=>{let{isShowRelatedCard:t,isAuthorCardShow:l}=e;E(!!(t||l))});return()=>e()},[]),{refLiveStore:L}}},219175:function(e,t,l){l.d(t,{W:function(){return v}});var n=l(520739),r=l(878389),i=l(368200),o=l(563097),a=l(88648),s=l(948375),d=l(802816),u=l(783375);let c=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],v=(0,a.forwardRef)((e,t)=>{let{scrollListener:l}=e,v=(0,i._)(e,["scrollListener"]),m=(0,a.useRef)({subscribers:[],framePending:!1,node:null,rafHandle:null}),f=(0,a.useCallback)(e=>{m.current.subscribers=m.current.subscribers.concat(e)},[]),h=(0,a.useCallback)(e=>{m.current.subscribers=m.current.subscribers.filter(t=>t!==e)},[]),p=l||"undefined"!=typeof window&&window,g=(0,s.Z)(e=>{!m.current.framePending&&(m.current.rafHandle=window.requestAnimationFrame(()=>{if(!m.current.node)return;m.current.framePending=!1;let{top:e,bottom:t}=m.current.node.getBoundingClientRect();m.current.subscribers.forEach(l=>l({distanceFromTop:e,distanceFromBottom:t,eventSource:(0,d.S)(p)?p:document.documentElement}))}),m.current.framePending=!0)});(0,a.useEffect)(()=>()=>{window.cancelAnimationFrame(m.current.rafHandle)},[]),(0,a.useEffect)(()=>{if(p)return c.forEach(e=>{p.addEventListener(e,g)}),g({}),()=>{c.forEach(e=>{p.removeEventListener(e,g)})}},[p,g]);let _=(0,a.useRef)({subscribe:f,unsubscribe:h,getParent:()=>m.current.node});return(0,a.useImperativeHandle)(t,()=>({notifySubscribers:g}),[g]),(0,o.jsx)(u.X.Provider,{value:_.current,children:(0,o.jsx)("div",(0,r._)((0,n._)({},v),{ref:e=>m.current.node=e,onScroll:g,onTouchStart:g,onTouchMove:g,onTouchEnd:g}))})})},226834:function(e,t,l){l.d(t,{Z:function(){return s}});var n=l(134761);l(874386);var r=l(563097),i=l(88648),o=l(309931),a=l(783375);class s extends i.Component{componentDidMount(){this.context.subscribe(this.handleContainerEvent)}componentWillUnmount(){this.context.unsubscribe(this.handleContainerEvent)}componentDidUpdate(){this.placeholder.style.paddingBottom=this.props.disableCompensation?"0":`${this.state.isSticky?this.state.calculatedHeight:0}px`}render(){let e=i.cloneElement(this.props.children({isSticky:this.state.isSticky,wasSticky:this.state.wasSticky,distanceFromTop:this.state.distanceFromTop,distanceFromBottom:this.state.distanceFromBottom,calculatedHeight:this.state.calculatedHeight,style:this.state.style}),{ref:e=>{this.content=o.findDOMNode(e)}});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{ref:e=>this.placeholder=e}),e]})}constructor(...e){super(...e),(0,n._)(this,"state",{isSticky:!1,wasSticky:!1,style:{},distanceFromTop:0,distanceFromBottom:0,calculatedHeight:0}),(0,n._)(this,"placeholder",void 0),(0,n._)(this,"content",void 0),(0,n._)(this,"context",void 0),(0,n._)(this,"handleContainerEvent",e=>{let{distanceFromTop:t,distanceFromBottom:l,eventSource:n}=e,r=this.context.getParent(),i=!1;this.props.relative&&(i=n!==r,t=-(n.scrollTop+n.offsetTop)+this.placeholder.offsetTop);let o=this.placeholder.getBoundingClientRect(),a=this.content.getBoundingClientRect().height,s=l-this.props.bottomOffset-a,d=!!this.state.isSticky,u=i?d:t<=-this.props.topOffset&&l>-this.props.bottomOffset;l=(this.props.relative?r.scrollHeight-r.scrollTop:l)-a;let c=u?{position:"fixed",top:s>0?this.props.relative?r.offsetTop-r.offsetParent.scrollTop:0:s,left:o.left,width:o.width}:{};!this.props.disableHardwareAcceleration&&(c.transform="translateZ(0)"),this.setState({isSticky:u,wasSticky:d,distanceFromTop:t,distanceFromBottom:l,calculatedHeight:a,style:c})})}}(0,n._)(s,"defaultProps",{relative:!1,topOffset:0,bottomOffset:0,disableCompensation:!1,disableHardwareAcceleration:!1}),(0,n._)(s,"contextType",a.X)},783375:function(e,t,l){l.d(t,{X:function(){return n}});let n=l(88648).createContext(null)},109208:function(e,t,l){l.d(t,{_:function(){return o}}),l(874386);var n=l(88648),r=l(302133),i=l(948375);let o=e=>{let{previewUrlList:t,onVideoEnded:l,onVideoStopped:o,onVideoPlaying:a,hoverPreviewVideoElement:s}=e,[d,u]=(0,n.useState)(!1),[c,v]=(0,n.useState)(!1),m=(0,n.useRef)(),f=(0,n.useRef)();(0,n.useEffect)(()=>()=>{window.clearTimeout(f.current)},[]);let h=(0,r.Z)(),p=(0,i.Z)(e=>{window.clearTimeout(f.current),u(e)}),g=(0,i.Z)(e=>{if(window.clearTimeout(f.current),!h()){window.clearTimeout(f.current);return}f.current=window.setTimeout(()=>{if(!!h())u(!0)})}),_=(0,i.Z)(()=>{if(!!h())p(!1)}),x=(0,n.useMemo)(()=>t.length>0&&d,[t,d]),w=(0,n.useRef)(x);(0,n.useLayoutEffect)(()=>{!x&&w.current&&(null==o||o(),v(!1))},[x,o]),(0,n.useEffect)(()=>{w.current=x},[x]);let C=(0,i.Z)(()=>{null==l||l()}),y=(0,i.Z)(()=>{v(!0),null==a||a()});return(0,n.useEffect)(()=>{if(s)return s.addEventListener("mouseenter",g),s.addEventListener("mouseleave",_),()=>{s.removeEventListener("mouseenter",g),s.removeEventListener("mouseleave",_)}},[s]),{onMouseEnter:g,onMouseLeave:_,isPlay:x,isHovered:d,setIsHovered:p,onEnded:C,onPlaying:y,isReady:c,previewImageRef:m}}},172613:function(e,t,l){l.d(t,{U:function(){return v}}),l(874386);var n=l(88648),r=l(439837),i=l.n(r),o=l(577603),a=l.n(o),s=l(441447),d=l(725887),u=l(907170);i().extend(a());let c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"!=typeof e||e<=0)return"";let t="H时m分s秒";return e<6e4?t="s秒":e<36e5&&(t="m分s秒"),`已看${i().duration(e,"milliseconds").format(t)}`},v=(e,t)=>{var l,r,i,o,a;let v=null!==(i=e.video.duration)&&void 0!==i?i:0,[m,f]=(0,n.useState)(null!==(o=null==e?void 0:null===(l=e.playProgress)||void 0===l?void 0:l.play_progress)&&void 0!==o?o:0),[h,p]=(0,n.useState)(null!==(a=null==e?void 0:null===(r=e.playProgress)||void 0===r?void 0:r.watch_times)&&void 0!==a?a:0);return(0,n.useEffect)(()=>s.listen(s.EVENT.WatchLaterProgressChange,()=>{var t,l,n,r,i,o,a;let{store:s={}}=null!==(i=d.Le.getConfig(d.gI.WatchLater))&&void 0!==i?i:{},u=null!==(o=null===(t=s[e.awemeId])||void 0===t?void 0:t.progress)&&void 0!==o?o:null==e?void 0:null===(l=e.playProgress)||void 0===l?void 0:l.play_progress,c=null!==(a=null===(n=s[e.awemeId])||void 0===n?void 0:n.loop)&&void 0!==a?a:null==e?void 0:null===(r=e.playProgress)||void 0===r?void 0:r.watch_times;f(null!=u?u:0),p(null!=c?c:0)}),[]),{pctFormat:v>0?(0,u.Sb)(m,v,h):c(m),isWatchLaterTab:"watch_later"===t}}},269896:function(e,t,l){l.d(t,{J:function(){return K}});var n=l(520739);l(675373),l(874386),l(268917),l(250440);var r=l(563097),i=l(88648),o=l(713097),a=l.n(o),s=l(439837),d=l.n(s),u=l(338426),c=l(953342),v=l(399242),m=l(953208),f=l(832052),h=l(867961),p=l(87908),g=l(645003),_=l(552771),x=l(725887),w=l(907170),C=l(852664),y=l(441447),I=l(742740),b=l(81046),j=l(617289),k=l(964374),N=l(5025),S=l(964545),E=l(365184),L=l(490359),T=l(172613),M=l(109208),R=l(774569),P=l(115627),D=l(141947),A=l(801636),F=l(549086),V=l(383763),B=l(954270),U=l(66047),O=l(979571),H=l(816242),W=l(109539),z=l(415980);let Z=(0,u.ZP)(()=>Promise.all([l.e("42562"),l.e("27713"),l.e("54641")]).then(l.bind(l,783169)),{resolveComponent:e=>{let{Preview:t}=e;return t},ssr:!1}),$=e=>{var t,l,n,o,s,d,u,h,p,g,_;let{scene:C,awemeInfo:y,isSelf:I,uid:b,canShowUnLook:k,canShowCooperationTag:N=!0,from:S,abTestData:L,userInfo:M,showPermissionIcon:A=!1}=e,{pctFormat:V,isWatchLaterTab:U}=(0,T.U)(y,C),O=(0,i.useCallback)(()=>(0,r.jsx)(P.Z,{viewBox:"0 0 19 19",src:j.Z}),[]),W=C===c.cardScene.authorCard,z=[{key:"reviewStatus",El:R.p4},{key:"isTop",El:R.Bf},{key:"labelFriend",El:O},{key:"labelPartSee",El:O},{key:"weeklyRecommend",El:H.n},{key:"hotList",El:R.ac},{key:"relationLabels",El:R.qZ},{key:"cooperation",El:R.A1}],Z=[],$=[],[K,G]=(0,i.useState)(k&&(u=(null===(l=x.Le.getConfig(x.gI.UnLookVideos))||void 0===l?void 0:null===(t=l[null==y?void 0:y.awemeId])||void 0===t?void 0:t.status)===v.Pl.UnLook,true)&&u);if((0,i.useEffect)(()=>{var e,t;if(!k)return;G((null===(t=x.Le.getConfig(x.gI.UnLookVideos))||void 0===t?void 0:null===(e=t[null==y?void 0:y.awemeId])||void 0===e?void 0:e.status)===v.Pl.UnLook);let l=F.a.addCb(e=>{let{action:t,awemeId:l}=e;"lookVideo"===t&&l===y.awemeId&&K&&G(!1)});return()=>{l()}},[y,k]),K&&Z.push((0,r.jsx)("div",{className:a()(E.default.tag,"user-video-tag"),children:(0,r.jsx)(R.Yd,{})},"unLookTag")),!K){if(U&&I&&V&&Z.push((0,r.jsx)("div",{className:a()(E.default.tag,"user-video-tag"),children:(0,r.jsx)(R.Vp,{className:a()(E.default.historyProgressRate,E.default.bg),children:V})},"watchlater")),I&&"user"===S&&(null==y?void 0:y.historyProgressRate)){let e=(0,r.jsx)("div",{className:a()(E.default.tag,"user-video-tag"),children:(0,r.jsx)(R.Vp,{className:a()(E.default.historyProgressRate,E.default.bg),children:null==y?void 0:y.historyProgressRate})},"historyProgressRate");"record"===C&&Z.push(e)}z.forEach((e,t)=>{"user"===S&&"weeklyRecommend"===e.key&&(0,H.$)({awemeInfo:y,abTestData:L})&&0===Z.length&&Z.push((0,r.jsx)(e.El,{scene:"videoCard",awemeInfo:y}));let l=null==y?void 0:y.tag[e.key];if(l){var n,i,o,s,d,u,c;switch(e.key){case"reviewStatus":if(0===Z.length){let l=(0,w.As)(null==y?void 0:null===(i=y.status)||void 0===i?void 0:null===(n=i.reviewResult)||void 0===n?void 0:n.extra)||{};Z.push((0,r.jsx)("div",{className:a()(E.default.tag,"user-video-tag"),children:(0,r.jsx)(R.Vp,{className:a()(E.default.historyProgressRate,E.default.bg),children:null==l?void 0:l.status_desc_label})},`${e.key}_${t}`))}break;case"isTop":0===Z.length&&Z.push((0,r.jsx)("div",{className:a()(E.default.tag,"user-video-tag"),children:(0,r.jsx)(e.El,{})},`${e.key}_${t}`));break;case"labelFriend":case"labelPartSee":!1===A&&0===Z.length&&I&&(null==y?void 0:null===(o=y.authorInfo)||void 0===o?void 0:o.secUid)===b&&((null==y?void 0:null===(s=y.status)||void 0===s?void 0:s.privateStatus)===2||(null==y?void 0:null===(d=y.status)||void 0===d?void 0:d.partSee)===m.mI.Friend||(null==y?void 0:null===(u=y.status)||void 0===u?void 0:u.partSee)===m.mI.Part)&&Z.push((0,r.jsx)("div",{className:a()(E.default.tag,"user-video-tag"),children:(0,r.jsx)(R.Vp,{className:a()(E.default.historyProgressRate,E.default.bg),children:"朋友可见"})},`${e.key}_${t}`));break;case"hotList":(null===(c=JSON.parse((null==l?void 0:l.extra)||"{}"))||void 0===c?void 0:c.entrance_relativity)==="100"&&(null==l?void 0:l.rank)&&0===Z.length&&Z.push((0,r.jsx)("div",{className:a()(E.default.tag,"user-video-tag"),children:(0,r.jsx)(e.El,{name:null==l?void 0:l.header,top:(null==l?void 0:l.header)==="热榜"&&(null==l?void 0:l.rank)<=10?null==l?void 0:l.rank:0})},`${e.key}_${t}`));break;default:0===Z.length&&Z.push((0,r.jsx)("div",{className:a()(E.default.tag,"user-video-tag"),children:(0,r.jsx)(e.El,{})},`${e.key}_${t}`))}}})}0===Z.length&&(null===(o=y.cooperationInfo)||void 0===o?void 0:null===(n=o.cooperationCreators)||void 0===n?void 0:n.length)>1&&N&&Z.push((0,r.jsx)("div",{className:a()(E.default.tag,"user-video-tag"),children:(0,r.jsx)(R.Vp,{className:a()(E.default.historyProgressRate,E.default.bg),children:"共创"})},"cooperationIcon"));let Y=(0,B.$m)(y,(null==y?void 0:null===(s=y.authorInfo)||void 0===s?void 0:s.uid)===(null==M?void 0:null===(d=M.info)||void 0===d?void 0:d.uid));return 0===Z.length&&Y&&Z.push((0,r.jsx)(B.zx,{className:E.default.paidTag,type:Y})),(null==y?void 0:y.awemeType)===f.e.Article?$.push((0,r.jsx)("div",{className:a()(E.default.tag,E.default.rightTag,"user-video-tag"),children:(0,r.jsx)(D.PE,{className:a()({[E.default.bg]:!W})})},"longArticleIcon")):(null==y?void 0:y.awemeType)===f.e.Note&&((null==L?void 0:L.liveicon)&&(null==y?void 0:null===(p=y.images)||void 0===p?void 0:null===(h=p.every)||void 0===h?void 0:h.call(p,e=>5===e.clipType))?$.push((0,r.jsx)("div",{className:a()(E.default.tag,E.default.rightTag,"user-video-tag"),children:(0,r.jsx)(D.G3,{className:a()({[E.default.bg]:!W})})},"pictureWordIcon")):(!(null==y?void 0:y.isSlides)||(null==y?void 0:null===(_=y.images)||void 0===_?void 0:null===(g=_.every)||void 0===g?void 0:g.call(_,e=>[2,5].includes(e.clipType))))&&$.push((0,r.jsx)("div",{className:a()(E.default.tag,E.default.rightTag,"user-video-tag"),children:(0,r.jsx)(D.eD,{className:a()({[E.default.bg]:!W})})},"pictureWordIcon"))),(0,r.jsxs)(r.Fragment,{children:[!!Z.length&&(0,r.jsx)("div",{className:a()(E.default.tags,"user-video-stats-tag",E.default.topLeft),children:Z}),!!$.length&&(0,r.jsx)("div",{className:a()(E.default.tags,E.default.topRight),children:$})]})};function K(e){var t,l,o,s,u,v,x,j,T,R;let{videoHref:P,className:D,src:F,awemeInfo:B,likeCount:H,playCount:K,isSpider:G=!1,showTag:Y=!0,iconWidth:q=80,isSelf:Q,onClick:X,onShow:J,iconColor:ee="rgba(169, 170, 183, 1)",skeletonClass:et,skeletonIconStyle:el,uid:en,showTitle:er=!1,showHasLook:ei=!1,canShowUnLook:eo=!1,canShowCooperationTag:ea=!0,onVideoStopped:es,onVideoEnded:ed,onVideoPlaying:eu,scene:ec,logParams:ev,children:em,hoverNoOverFlow:ef=!0,tab:eh,onLoad:ep,from:eg,userTabKey:e_,onNicknameClick:ex,showPermissionIcon:ew=!1,reuseConfig:eC}=e,ey=(0,i.useMemo)(()=>{var e,t;return null==B?void 0:null===(t=B.video)||void 0===t?void 0:null===(e=t.playAddr)||void 0===e?void 0:e.map(e=>e.src||"")},[B]),{setIsHovered:eI,isPlay:eb,onEnded:ej,onPlaying:ek,isReady:eN,previewImageRef:eS,onMouseEnter:eE,onMouseLeave:eL}=(0,M._)({previewUrlList:ey,onVideoStopped:es,onVideoEnded:ed,onVideoPlaying:eu}),[eT,eM]=(0,i.useState)(!1),[eR,eP]=(0,i.useState)(null),{isiPad:eD}=(0,h.X)(),eA=B.awemeType!==f.e.Note&&B.awemeType!==f.e.Article&&![c.cardScene.authorCard].includes(ec)&&eh!==p.L.CollectFolder,eF=eb&&eA&&(!(0,C.vU)()||B),eV=(0,g.x)(J),eB=(0,i.useRef)(H),eU=(0,i.useMemo)(()=>{var e,t;let l=null==B?void 0:null===(e=B.video)||void 0===e?void 0:e.width;return(null==B?void 0:null===(t=B.video)||void 0===t?void 0:t.height)/l},[B]),eO=(0,i.useCallback)(e=>{if((null==B?void 0:B.awemeType)===f.e.Article){var t,l,n,r,i;e.preventDefault(),y.emit(y.EVENT.videoPause,"article_detail_click"),z.Z.report("video_cover_click",{enter_from:(0,I.yW)(),author_id:null==B?void 0:null===(t=B.authorInfo)||void 0===t?void 0:t.uid,group_id:null==B?void 0:B.awemeId,aweme_type:null==B?void 0:B.awemeType,enter_method:"click_tab",is_co_publish:Number(null==B?void 0:null===(n=B.cooperationInfo)||void 0===n?void 0:null===(l=n.cooperationCreators)||void 0===l?void 0:l.length)>1?1:0,co_publish_author_list:null===(i=B.cooperationInfo)||void 0===i?void 0:null===(r=i.cooperationCreators)||void 0===r?void 0:r.filter(e=>e.roleId!==c.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)});let o=`/article/${B.awemeId}`;window.open(o,"_blank");return}if(null==X||X(e),(null==ey?void 0:ey.length)!==0)eI(!1)},[eI,X,ey,B]);(0,i.useEffect)(()=>{!eF&&eM(!1)},[eF]),(0,i.useEffect)(()=>{eB.current=H},[H]),(0,i.useEffect)(()=>{let e=eV.current;if(e&&!eD){let t=b.mouseEnter(e,eE),l=b.mouseLeave(e,eL);return()=>{t(),l()}}},[eE,eL,eD]);let eH=(0,U._)(),{userInfo:eW}=(0,W.useUserInfoContext)()||{},ez=(null==B?void 0:null===(t=B.video)||void 0===t?void 0:t.width)>=(null==B?void 0:null===(l=B.video)||void 0===l?void 0:l.height),eZ="user"===eg&&ez;return(0,r.jsxs)(V.B,{onClick:eO,className:a()(E.default.userVideo,D,{[E.default.hoverNoOverflow]:ef}),href:P,target:"_blank",rel:"noopener noreferrer",isNeedSeoOpt:!0,isUseALink:(null==B?void 0:B.isHighQuality)!==_.HighQualityStatus.NotHighQuality,children:[(0,r.jsxs)("div",{className:a()(E.default.wrapper,{[E.default.animationScaleOne]:50===q,[E.default.canAnimation]:!eA}),ref:e=>{eV.current=e,eP(e)},children:[!!F&&(0,r.jsx)("div",{className:E.default.imageContainer,children:(0,r.jsx)(A.Q,{className:a()(E.default.videoImg,{[E.default.isSafari]:(0,C.G6)(),[E.default.containBlur]:eZ&&eF&&eT}),src:F,iconWidth:q,isSpider:G,iconColor:ee,skeletonClass:et,iconStyle:el,isPreviewing:eF&&eT&&!eZ,onLoad:ep,alt:(null==B?void 0:B.desc)?`${null==B?void 0:null===(o=B.authorInfo)||void 0===o?void 0:o.nickname}：${null==B?void 0:B.desc}`:`${null==B?void 0:null===(s=B.authorInfo)||void 0===s?void 0:s.nickname}于${d().unix(1633782931).format("YYYYMMDD")}发布的作品`})}),eF&&(0,r.jsx)(Z,{previewUrlList:ey,className:a()(E.default.previewContainer),isHorizontal:ez,onReady:()=>{null==ek||ek(),eM(!0)},isOperable:!0,onEnded:ej,ratio:eU,isMute:null==B?void 0:null===(v=B.status)||void 0===v?void 0:null===(u=v.videoMute)||void 0===u?void 0:u.isMute,fakeHorizontalInfo:B.fakeHorizontalInfo,ref:eS,forceContainerCover:"user"===eg,forceFitContain:eZ,logParams:(0,n._)({awemeInfo:B,tab_name:ec},ev),awemeInfo:B,container:eR,scene:ec,user:eW,reuseConfig:eC}),(0,r.jsx)("div",{className:E.default.mask}),Y&&!eF&&(0,r.jsx)($,{scene:ec,awemeInfo:B,isSelf:Q,uid:en,canShowUnLook:eo,canShowCooperationTag:ea,from:eg,abTestData:eH,userInfo:eW,showPermissionIcon:ew}),void 0!==H&&(0,r.jsxs)("span",{className:a()(E.default.likeCount,"author-card-user-video-like",{[E.default.invisible]:eF}),children:[!G&&(0,r.jsx)(O.z,{style:{fontSize:"20px"},svg:(0,r.jsx)(k.Z,{})}),(0,r.jsx)("span",{className:E.default.countText,children:(0,w.qe)(eB.current)})]}),void 0!==K&&(0,r.jsxs)("div",{className:a()(E.default.playCount,{[E.default.invisible]:eF}),children:[(0,r.jsx)(O.z,{style:{fontSize:"20px"},svg:(0,r.jsx)(N.Z,{})}),(0,r.jsx)("span",{className:E.default.countText,children:(0,w.qe)(K)})]}),Q&&ew&&(null==B?void 0:null===(x=B.authorInfo)||void 0===x?void 0:x.secUid)===en&&((null==B?void 0:null===(j=B.status)||void 0===j?void 0:j.privateStatus)===2||(null==B?void 0:null===(T=B.status)||void 0===T?void 0:T.partSee)===m.mI.Friend||(null==B?void 0:null===(R=B.status)||void 0===R?void 0:R.partSee)===m.mI.Part)&&(0,r.jsx)("div",{className:a()(E.default.playPermission,{[E.default.invisible]:eF}),children:(0,r.jsx)(O.z,{style:{fontSize:"18px"},svg:(0,r.jsx)(S.Z,{})})}),(0,r.jsx)("p",{className:a()(E.default.hidden,{[E.default.invisible]:eF}),children:null==B?void 0:B.desc}),(null==B?void 0:B.unidate)&&(0,r.jsxs)("p",{className:a()(E.default.hidden,{[E.default.invisible]:eF}),children:["发布时间：",d()((null==B?void 0:B.unidate)*1e3).format("YYYY-MM-DD HH:mm")]}),ei&&(0,r.jsxs)("div",{className:a()(E.default.look,{[E.default.invisible]:eF}),children:[(0,r.jsx)(L.Z,{}),(0,r.jsx)("span",{className:E.default.text,children:"刚刚看过"})]})]}),er&&(0,r.jsx)("p",{className:a()(E.default.title,E.default.single),children:null==B?void 0:B.desc}),em]})}},383763:function(e,t,l){l.d(t,{B:function(){return c}});var n=l(520739),r=l(878389),i=l(368200),o=l(563097);l(88648);var a=l(713097),s=l.n(a),d=l(47946),u=l(901046);function c(e){let{isUseALink:t=!0,children:l,className:a}=e,c=(0,i._)(e,["isUseALink","children","className"]);if(!t){let{onClick:e}=c;return(0,o.jsx)("div",(0,r._)((0,n._)({className:s()(d.default.aLink,a),onClick:e},c),{children:l}))}return(0,o.jsx)(u.a,(0,r._)((0,n._)({className:a},c),{children:l}))}},948431:function(e,t,l){l.d(t,{Z:function(){return c}}),l(874386);var n=l(88648),r=l(302461),i=l(399242),o=l(725887),a=l(441447),s=l(265656),d=l(533155),u=l(798644);let c=e=>{let{changeMinWinCb:t,refMixPlayer:l,from:c}=e||{},[v,m]=(0,n.useState)(!1),f=(0,n.useRef)(void 0);return(0,r.o)(()=>{m(o.Le.getConfig(o.gI.IsMiniWin));let e=a.listen(a.EVENT.changeMinWindows,e=>{var n;let{isMiniWin:r,source:o,event:a}=e,s=r,d=null==l?void 0:null===(n=l.current)||void 0===n?void 0:n.getPlayer();u.s.getPlayersByScene(i.lT.Modal).length>0&&d&&u.s.getPlayerScene(null==d?void 0:d.playerId)!==i.lT.Modal&&(s=!1),f.current=o,m(s),null==t||t(s)});return()=>e()},[]),(0,n.useEffect)(()=>{v&&!(0,s.En)()&&"sideList"===c&&d.Z.sendLog("smallWindowShow",{source:f.current})},[v]),v}},221773:function(e,t,l){l.d(t,{Z:function(){return i}}),l(874386);var n=l(88648),r=l(245762);let i=()=>{let[e,t]=(0,n.useState)([]),[l,i]=(0,n.useState)(!1),[o,a]=(0,n.useState)(0);return{liveList:e,updateData:(0,n.useCallback)(async()=>{i(!0);let e=await (0,r.y)({});i(!1);let{data:l,statusCode:n,logId:o}=e;0===n&&(t(l),a(o))},[]),loading:l,requestId:o}}},921359:function(e,t,l){l.d(t,{O:function(){return o}});var n=l(563097),r=l(88648),i=l(575480);let o=r.forwardRef((e,t)=>{let{active:l,children:o,className:a}=e,s=(0,r.useMemo)(()=>l?{}:{display:"none"},[l]);return(0,n.jsx)(i.w,{isActive:l,children:(0,n.jsx)("div",{className:a,ref:t,style:s,children:o})})})},708334:function(e,t,l){l.d(t,{V:function(){return a}}),l(250440);var n=l(88648),r=l(953208),i=l(623527),o=l(742740);let a=e=>{let{awemeInfo:t}=e;(0,n.useEffect)(()=>{var e,l,n,a,s,d,u,c,v;(null==t?void 0:null===(e=t.anchorInfo)||void 0===e?void 0:e.type)===r.as.AnchorShop&&!(null==t?void 0:null===(a=t.anchorInfo)||void 0===a?void 0:null===(n=a.extra)||void 0===n?void 0:null===(l=n[0])||void 0===l?void 0:l.product_detail_schema)&&[1,4].includes(Number(null==t?void 0:null===(u=t.anchorInfo)||void 0===u?void 0:null===(d=u.extra)||void 0===d?void 0:null===(s=d[0])||void 0===s?void 0:s.platform))&&i.oe.event.error({name:i.Mo.ShopAnchorDataError,report:{logId:t.logPb,erroData:null==t?void 0:null===(v=t.anchorInfo)||void 0===v?void 0:null===(c=v.extra)||void 0===c?void 0:c[0],enterFromMerge:(0,o.yW)()}})},[t])}},727085:function(e,t,l){l(874386);var n=l(563097),r=l(88648),i=l(801103),o=l(276541),a=l(647571),s=l(474379),d=l(713097),u=l.n(d),c=l(899152);l(459903),a.Z.use([s.Z]);t.Z=e=>{let{slideItems:t,className:l,width:a,height:s=20,isStartPlay:d=!1}=e,[v,m]=(0,r.useState)(),f=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(v&&d&&(null==t?void 0:t.length)>1){if(!f.current){var e;null==v||null===(e=v.slideNext)||void 0===e||e.call(v),f.current=setInterval(()=>{var e;null==v||null===(e=v.slideNext)||void 0===e||e.call(v)},3e3)}}else f.current&&clearInterval(f.current),f.current=null},[d,t,v]),(0,r.useEffect)(()=>()=>{f.current&&clearInterval(f.current),f.current=null},[]),(0,n.jsx)("div",{className:u()(c.default.adSwiper,l),children:(0,n.jsx)(i.t,{allowTouchMove:!1,direction:"vertical",slidesPerView:1,spaceBetween:0,loop:!0,onInit:m,width:a,height:s,autoplay:!1,children:t.map((e,t)=>(0,n.jsx)(o.o,{children:(0,n.jsx)("div",{className:c.default.slideContent,children:e})},t))})})}},375216:function(e,t,l){var n=l(563097);l(88648);var r=l(713097),i=l.n(r),o=l(894306);t.Z=e=>{let{className:t,children:l,style:r,onClick:a}=e;return(0,n.jsx)("span",{style:r,className:i()(o.default.adTag,t),onClick:a,children:l})}},531611:function(e,t,l){var n=l(563097);l(88648);var r=l(713097),i=l.n(r),o=l(590682),a=l(256855),s=l(727085),d=l(801636),u=l(212271);t.Z=e=>{let{className:t,title:l,imageUrl:r,isBackupImgUrl:c=!1,slideItems:v,buttonText:m,buttonBgColor:f=o.DEFAULT_BUTTON_COLOR,onClick:h,isStartPlay:p}=e;return(0,n.jsxs)("div",{className:i()(a.default.doubleLineAdCard,t),onClick:e=>h(e,{refer:u.tU.Blank}),children:[(0,n.jsxs)("div",{className:a.default.adInfo,children:[(0,n.jsx)("div",{onClick:e=>h(e,{refer:u.tU.Photo,click_type:c?u.Kw.AdBackupProduct:u.Kw.AdProduct}),children:(0,n.jsx)(d.Q,{src:r,iconHeight:40,iconWidth:40,className:a.default.adIcon})}),(0,n.jsxs)("div",{className:a.default.detail,children:[(0,n.jsx)("div",{className:a.default.title,onClick:e=>h(e,{refer:u.tU.Name}),children:l}),(0,n.jsx)(s.Z,{isStartPlay:p,className:a.default.swiperContainer,width:108,slideItems:v})]})]}),(0,n.jsx)("div",{className:a.default.adButton,onClick:e=>h(e,{refer:u.tU.Button}),style:{background:f},children:m})]})}},187348:function(e,t,l){var n=l(563097);l(88648);var r=l(713097),i=l.n(r),o=l(697021),a=l(830500),s=l(727085),d=l(801636),u=l(212271),c=l(979571);t.Z=e=>{let{className:t,imageUrl:l,isBackupImgUrl:r=!1,slideItems:v,buttonText:m,onClick:f,isStartPlay:h}=e;return(0,n.jsxs)("div",{className:i()(a.default.singleLineAdCard,t),onClick:e=>f(e,{refer:u.tU.Blank}),children:[(0,n.jsxs)("div",{className:a.default.adInfo,children:[(0,n.jsx)("div",{onClick:e=>f(e,{refer:u.tU.Photo,click_type:r?u.Kw.AdBackupProduct:u.Kw.AdProduct}),children:(0,n.jsx)(d.Q,{src:l,iconHeight:28,iconWidth:28,className:a.default.adIcon})}),(0,n.jsx)("div",{onClick:e=>f(e,{refer:u.tU.Name}),children:(0,n.jsx)(s.Z,{isStartPlay:h,className:a.default.swiperContainer,width:136,slideItems:v})})]}),(0,n.jsxs)("div",{className:a.default.btnBox,onClick:e=>f(e,{refer:u.tU.Button}),children:[(0,n.jsx)("span",{className:a.default.text,children:m}),(0,n.jsx)(c.z,{svg:(0,n.jsx)(o.Z,{}),className:a.default.icon})]})]})}},496831:function(e,t,l){var n=l(563097);l(88648);var r=l(713097),i=l.n(r),o=l(590682),a=l(153612),s=l(727085),d=l(801636),u=l(375216),c=l(212271);t.Z=e=>{var t;let{className:l,title:r,imageUrl:v,isBackupImgUrl:m=!1,slideItems:f,buttonText:h,buttonBgColor:p=o.DEFAULT_BUTTON_COLOR,tags:g=[],onClick:_,isStartPlay:x}=e;return(0,n.jsxs)("div",{className:i()(a.default.strongStyleAdCard,l),onClick:e=>_(e,{refer:c.tU.Blank}),children:[(0,n.jsxs)("div",{className:a.default.adInfo,children:[(0,n.jsx)("div",{onClick:e=>_(e,{refer:c.tU.Photo,click_type:m?c.Kw.AdBackupProduct:c.Kw.AdProduct}),children:(0,n.jsx)(d.Q,{src:v,iconHeight:72,iconWidth:72,className:a.default.adIcon})}),(0,n.jsxs)("div",{className:a.default.detail,children:[(0,n.jsx)("div",{className:a.default.title,onClick:e=>_(e,{refer:c.tU.Name}),children:r}),(null==g?void 0:g.length)>0&&(0,n.jsx)("div",{className:a.default.tagLine,children:null==g?void 0:null===(t=g.slice(0,2))||void 0===t?void 0:t.map((e,t)=>(0,n.jsx)(u.Z,{className:a.default.tag,onClick:t=>_(t,{refer:c.tU.Pull,product_tags:e}),children:e},t))}),(0,n.jsx)(s.Z,{isStartPlay:x,className:a.default.swiperContainer,width:156,slideItems:f})]})]}),(0,n.jsx)("div",{className:a.default.adButton,style:{background:p},onClick:e=>_(e,{refer:c.tU.Button}),children:h})]})}},800166:function(e,t,l){l.d(t,{VD:function(){return n},Wc:function(){return a},_u:function(){return s},k1:function(){return r},lg:function(){return i},vv:function(){return o}});let n=["不容错过的优品","值得买的好物","优选心仪好物","精选超值好货"],r=["人气热卖","优选好物"],i=["优选好物"],o=5,a=7,s=8},536844:function(e,t,l){l.d(t,{I:function(){return d}});var n=l(88648),r=l(850634),i=l(832052),o=l(725887),a=l(441447),s=l(335101);let d=e=>{let{awemeInfo:t,from:l,isActive:d,hackFullScreenDom:u=!1,videoAreaClickActive:c=!1,logParams:v,enableInteractionPlugin:m=!0,searchListType:f,isUpperFeed:h=!1,syncInMulti:p=!1}=e,g=(0,s.n)(),_=o.Le.getConfig(o.gI.ActivityModalCurrentActiveProgress);return(0,n.useEffect)(()=>{if(g&&d&&t){o.Le.getConfig(o.gI.ActivityModalEnterFullScreenAfterCreate)&&"modal_player"===l&&(o.Le.setConfig(o.gI.ActivityModalEnterFullScreenAfterCreate,!1),g.getFullscreen());let{awemeId:e}=t,n=()=>{_[0]=e,_[1]=g.currentTime};return g.on("timeupdate",n),()=>{g.off("timeupdate",n),"activity_player"===l&&_[0]===(null==t?void 0:t.awemeId)&&(_[0]="",_[1]=0)}}},[g,t,d]),(0,n.useEffect)(()=>{if(g&&t&&(null==t?void 0:t.awemeType)!==i.e.Note&&(null==t?void 0:t.awemeId)===_[0]){let e=_[1];g.once(r.FP.CANPLAY,()=>{g.seek(e)})}},[g]),(0,n.useEffect)(()=>{if(g&&"activity_player"===l&&d)return a.listen(a.EVENT.activitySyncVideoPlay,()=>{(null==t?void 0:t.awemeType)!==i.e.Note&&((null==t?void 0:t.awemeId)===_[0]&&g.seek(_[1]),o.Le.setConfig(o.gI.IsSearchOuterAsync,!0)),g.play()})},[g,d,t]),null}},148091:function(e,t,l){l.d(t,{V:function(){return c}});var n=l(88648),r=l(734123),i=l(419631),o=l.n(i),a=l(832052),s=l(441447),d=l(335101);let u=!1,c=e=>{let{awemeInfo:t,isFirst:l,isActive:i,timeout:c=2e3}=e,v=(0,d.n)();return(0,n.useEffect)(()=>{if(!i)return;let e=o()(e=>{let{isDown:n=!1}=e||{};u=!0,s.emit(s.EVENT.firstFrameReady,{firstFrameReadyPlayer:v,vid:null==t?void 0:t.awemeId,playerId:null==v?void 0:v.playerId,isFirst:l,isDown:!!n,isActive:i})});if((null==t?void 0:t.awemeType)!==a.e.Normal){setTimeout(()=>{e({isDown:!0})},0);return}if((null==t?void 0:t.awemeType)===a.e.Normal&&v){if(!1===l&&!u||v.isPlaying||v.currentTime>0){setTimeout(()=>{e({isDown:!0})},0);return}v.on(r.Events.AUTOPLAY_STARTED,e),v.on(r.Events.AUTOPLAY_PREVENTED,e);let t=setTimeout(()=>{e({isDown:!0})},c);return()=>{v.off(r.Events.AUTOPLAY_STARTED,e),v.off(r.Events.AUTOPLAY_PREVENTED,e),clearTimeout(t)}}},[v,t,l,i,c]),null}},916103:function(e,t,l){l.d(t,{r:function(){return i}});var n=l(88648),r=l(335101);let i=e=>{let t=(0,r.n)();return(0,n.useEffect)(()=>{if(t){let e=()=>{t.replay(),t.replayed=!0};return t.on("ended",e),()=>{t.off("ended",e)}}},[t]),null}},585543:function(e,t,l){l.d(t,{l:function(){return g}});var n=l(88648),r=l(850634),i=l(645260),o=l.n(i),a=l(613063),s=l.n(a),d=l(832052),u=l(282385),c=l(437983),v=l(725887),m=l(441447),f=l(693691),h=l(613480),p=l(335101);let g=e=>{let{awemeInfo:t,from:l,isActive:i,hackFullScreenDom:a=!1,videoAreaClickActive:g=!1,logParams:_,enableInteractionPlugin:x=!0,searchListType:w,isUpperFeed:C=!1,syncInMulti:y=!1,livePlayer:I,liveDocId:b}=e,j=(0,p.n)(),k=I||j,{openGeneralSearchModalSlide:N}=(0,n.useContext)(f.j)||{},{docId:S}=(0,n.useContext)(h.C)||{},E=I&&b?b:S,L=v.Le.getConfig(v.gI.SearchModalCurrentActiveProgress);return(0,n.useEffect)(()=>{if(k&&i&&t){v.Le.getConfig(v.gI.SearchModalEnterFullScreenAfterCreate)&&"modal_player"===l&&(v.Le.setConfig(v.gI.SearchModalEnterFullScreenAfterCreate,!1),k.getFullscreen());let{awemeId:e}=t,n=()=>{L[0]=e,L[1]=k.currentTime};return k.on("timeupdate",n),()=>{k.off("timeupdate",n),"search_player"===l&&L[0]===(null==t?void 0:t.awemeId)&&(L[0]="",L[1]=0)}}},[k,t,i]),(0,n.useEffect)(()=>{if(k&&t&&(null==t?void 0:t.awemeType)!==d.e.Note&&(null==t?void 0:t.awemeId)===L[0]){let e=L[1];k.once(r.FP.CANPLAY,()=>{k.seek(e)})}},[k]),(0,n.useEffect)(()=>{if(k&&"search_player"===l&&i)return m.listen(m.EVENT.generalSearchVideoPlay,()=>{(null==t?void 0:t.awemeType)!==d.e.Note&&((null==t?void 0:t.awemeId)===L[0]&&k.seek(L[1]),v.Le.setConfig(v.gI.IsSearchOuterAsync,!0)),k.play()})},[k,i,t]),(0,n.useEffect)(()=>{let e=o()(k,"plugins.fullscreen.root"),t=()=>{var e;null==k||null===(e=k.openGeneralSearchModalSlide)||void 0===e||e.call(k,{from:"fullscreen"})};return k&&i&&"search_player"===l&&a&&(y||w!==u.qs)&&!C&&(s()(k,"plugins.fullscreen.config.disable",!0),null==e||e.addEventListener("click",t)),()=>{s()(k,"plugins.fullscreen.config.disable",!1),null==e||e.removeEventListener("click",t)}},[k,i,a,w,t,C,y]),(0,n.useEffect)(()=>{if(k&&i&&"search_player"===l&&!x&&g){let e=e=>{if(e.target===k.root||e.target===k.video||e.target===k.innerContainer||e.target===k.video.__canvas){var t;null==k||null===(t=k.openGeneralSearchModalSlide)||void 0===t||t.call(k,{from:"pause"}),k.emit(r.FP.USER_ACTION,{action:"click_video_area"});return}};k.config.closeVideoClick=!0;let t=k.root;return t.addEventListener("click",e,!1),()=>{t.removeEventListener("click",e,!1),s()(k,"config.closeVideoClick",!1)}}},[k,i,a,g]),(0,n.useEffect)(()=>{if(k&&"search_player"===l&&i&&!C)return k.openGeneralSearchModalSlide=e=>{let{from:l}=e||{};if("fullscreen"===l&&v.Le.setConfig(v.gI.SearchModalEnterFullScreenAfterCreate,!0),"pause"===l&&!g)return!1;let n=N({docId:E,awemeId:null==t?void 0:t.awemeId,from:l});return n&&(0,c.h)("feed_enter",_),n},()=>{k.openGeneralSearchModalSlide=()=>!1}},[k,t,i,E,N,g,I,C]),(0,n.useEffect)(()=>{if(k&&"search_player"===l){let e=!1,t=m.listen(m.EVENT.pageFullScreen,t=>{let{fullScreen:l}=t;e=l});return()=>{t(),e&&m.emit(m.EVENT.pageFullScreen,{fullScreen:!1,playerId:null==k?void 0:k.playerId,clickMethod:"player_destroy"})}}},[k]),null}},529961:function(e,t,l){l.d(t,{n:function(){return I}});var n=l("520739"),r=l("878389"),i=l("563097"),o=l("88648"),a=l("713097"),s=l.n(a),d=l("734123"),u=l("645003"),c=l("623582"),v=l("338478"),m=l("7305"),f=l("618209");l("874386");var h=l("568201"),p=l("335101"),g=l("165674"),_={SingleLine:0,0:"SingleLine",TowLine:1,1:"TowLine"},x=l("443073"),w=l("115627"),C=l("289228");let y=e=>{var t,l,a;let{awemeInfo:x,onClick:C,isActive:y,className:I,onMouseEnter:b,onMouseLeave:j}=e,{displayState:k}=function(e){let{awemeInfo:t,isActive:l}=e,n=(0,p.n)(),r=(0,o.useRef)(!0),i=(0,o.useRef)(!1),[a,s]=(0,o.useState)(0),u=(0,o.useCallback)(()=>{if(!i.current){var e,t;null==n||null===(e=n.on)||void 0===e||e.call(n,h.B.TimeUpdate,m),null==n||null===(t=n.on)||void 0===t||t.call(n,d.Events.SEEKING,f)}i.current=!0},[n]),c=(0,o.useCallback)(()=>{if(i.current){var e,t;null==n||null===(e=n.off)||void 0===e||e.call(n,h.B.TimeUpdate,m),null==n||null===(t=n.off)||void 0===t||t.call(n,d.Events.SEEKING,f)}i.current=!1},[n]),v=(0,o.useCallback)(()=>{r.current=!0},[]),m=(0,o.useCallback)(e=>{let{currentTime:t}=e||{};t>=16&&(r.current=!1,s(1),c())},[n,t,c]),f=(0,o.useCallback)(e=>{let{currentTime:t}=e;t>=16&&(s(1),c()),r.current=!1},[c]),_=(0,o.useCallback)(()=>{s(1),v(),u()},[u,v]);return(0,g.u)(n,h.B.Ended,_),(0,o.useEffect)(()=>{v()},[l,v]),(0,o.useEffect)(()=>{s(0),v()},[t.awemeId,v]),(0,o.useEffect)(()=>{if(!!l){if(n&&r.current)return u(),()=>{c()}}},[n,t,l,u,c]),(0,o.useEffect)(()=>{(null==n?void 0:n.currentTime)&&m({currentTime:n.currentTime})},[n]),{displayState:a}}({isActive:y,awemeInfo:x}),N=(null==x?void 0:null===(l=x.anchorInfo)||void 0===l?void 0:null===(t=l.extra)||void 0===t?void 0:t[0])||{},S=(0,p.n)(),E=(0,u.x)(()=>{c.logInstance.sendLog("productEntranceShow",(0,r._)((0,n._)({},(0,v.R)(x)),{ecom_entrance_form:"video_cart_tag",if_qianchuan_ad:0}))}),L=(null==N?void 0:N.tags)||[],T=k===_.TowLine&&L.length>0;return(0,i.jsx)("div",{className:s()("xgplayer-shop-anchor",f.default.container,f.default.shopAnchor,{[f.default.more]:T},I),onClick:()=>{null==C||C(),null==S||S.emit(d.Events.USER_ACTION,{action:"shop_anchor_click"}),c.logInstance.sendLog("productEntranceClick",(0,r._)((0,n._)({},(0,v.R)(x)),{ecom_entrance_form:"video_cart_tag",if_qianchuan_ad:0}))},onMouseEnter:()=>{null==b||b()},onMouseLeave:()=>{null==j||j()},ref:E,children:(0,i.jsxs)("div",{className:f.default.subContainer,children:[(0,i.jsx)(w.Z,{src:m.Z,className:f.default.icon,width:20,height:20,viewBox:"0 0 20 20"}),(0,i.jsxs)("div",{className:f.default.desc,children:[(0,i.jsxs)("div",{className:f.default.firstLine,children:[null==x?void 0:null===(a=x.anchorInfo)||void 0===a?void 0:a.titleTag,(null==N?void 0:N.elastic_title)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:f.default.delimiter,children:" | "})," ",null==N?void 0:N.elastic_title]})]}),T&&(0,i.jsx)("div",{className:f.default.secondLine,children:L.map((e,t)=>(0,i.jsxs)("span",{className:f.default.towLineItem,children:[e," ",t<L.length-1&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)("span",{className:f.default.delimiter,children:" | "})]})]},e))})]})]})})},I=e=>{let t=(0,x.N)();return(0,i.jsx)(C.k,{componentName:"ShopAnchor",Slardar:t,children:(0,i.jsx)(y,(0,n._)({},e))})}},673648:function(e,t,l){l.d(t,{h:function(){return _},n:function(){return g}});var n=l(91907),r=l(562017),i=l(260211),o=l(134761);l(990921),l(874386),l(675373),l(268917),l(209955);var a=l(866674),s=l.n(a),d=l(877639),u=l.n(d),c=l(918294),v=l.n(c),m=l(212138),f=l.n(m),h=new WeakMap,p=new WeakMap;class g{add(e){return new Promise((t,l)=>{this.runList.push({param:e,resolve:t,reject:l}),(0,n._)(this,h).call(this)})}constructor({max:e,timeWait:t,runOperation:l}){(0,o._)(this,"max",0),(0,o._)(this,"runList",[]),(0,o._)(this,"runOperation",e=>{}),(0,r._)(this,h,{writable:!0,value:()=>{(0,n._)(this,p).call(this)}}),(0,r._)(this,p,{writable:!0,value:()=>{let e=this.runList;this.runList=[];let t=(null==e?void 0:e.length)||0,{max:l}=this;if(l<=0||t<=l){this.runOperation(e);return}for(let n=0;n<t;n+=l){let t=v()(e,n,n+l);if(null==t?void 0:t.length)this.runOperation(t);else break}}}),this.max=e||0;if(!l)throw Error("MultiRun runOperation 执行函数必须设置");if(!s()(l))throw Error("MultiRun runOperation 执行函数必须为函数形式");this.runOperation=l,(0,i._)(this,h,u()(()=>{(0,n._)(this,p).call(this)},t||300,{leading:!1,trailing:!0}))}}let _=(e,t)=>{f()(e,e=>{var l;null==e||null===(l=e.reject)||void 0===l||l.call(e,t||"error")})}},146584:function(e,t,l){let n;l.d(t,{NE:function(){return k},Ol:function(){return y},Ox:function(){return N},P_:function(){return I},RK:function(){return C},bF:function(){return j},et:function(){return S},v5:function(){return b}});var r=l(520739),i=l(878389);l(779788),l(675373),l(268917);var o=l(576660),a=l(597087),s=l(945388),d=l(66863),u=l(673648),c=l(212138),v=l.n(c),m=l(377530),f=l.n(m);let{COMMON_SEARCH_PARAMS:h,DISABLE_SECRET_VIDEO_PARAMS:p,CHANNEL_PC_WEB:g}=o||{},{ERROR_CODE:_}=a||{};async function x(e){let{sec_user_ids:t}=e;return(arguments.length>1&&void 0!==arguments[1]&&arguments[1],t&&0!==t.length)?await (0,d.v_)("/aweme/v1/web/im/user/info/",(0,r._)({},h),{sec_user_ids:JSON.stringify(t)}):{statusCode:_.ERROR_INVALID_PARAM}}s.HOME_DOMAIN;let w=new u.n({max:40,timeWait:100,runOperation:e=>{let t=[];v()(e,e=>{let{param:l}=e;t.push(l)}),x({sec_user_ids:f()(t)}).then(t=>{let l=null==t?void 0:t.data;if((null==t?void 0:t.status_code)===0&&(null==l?void 0:l.length)){let t={};v()(l,(e,l)=>{let n=null==e?void 0:e.sec_uid;n&&(t[n]=e)}),v()(e,e=>{var l,n;let r=null==e?void 0:e.param;r&&t[r]?null==e||null===(l=e.resolve)||void 0===l||l.call(e,t[r]):null==e||null===(n=e.reject)||void 0===n||n.call(e,"error")})}else(0,u.h)(e,"")}).catch(t=>{(0,u.h)(e,t)})}});async function C(e){return w.add(e)}var y={follow:1,1:"follow",unfollow:0,0:"unfollow"};async function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return await (0,d.v_)("/aweme/v1/web/commit/follow/user/",(0,r._)({},h),{user_id:e,type:t})}async function b(e){let{count:t=50,max_time:l=Date.now(),min_time:o=0,with_fstatus:a=1,source:s="coldup"}=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1];let u=n||o,c=await (0,d.U2)("/aweme/v1/web/im/spotlight/relation/",(0,i._)((0,r._)({},h),{count:t,source:s,max_time:l,min_time:u,need_remove_share_panel:!0,need_sorted_info:!0,with_fstatus:a}));return n=null==c?void 0:c.min_time,c}var j={block:1,1:"block",unblock:0,0:"unblock"},k={block:0,0:"block",allowOtherSee:1,1:"allowOtherSee",unSeeOther:2,2:"unSeeOther"};async function N(e,t,l,n){return await (0,d.v_)("/aweme/v1/web/user/block/",(0,r._)({},h),{user_id:e,sec_user_id:t,block_type:l,source:n})}async function S(e){return await (0,d.U2)("/aweme/v1/web/user/profile/other/",(0,i._)((0,r._)({},h),{source:g,sec_user_id:e}),{},void 0)}},476775:function(e,t,l){l.d(t,{wH:function(){return x},h4:function(){return C},yu:function(){return _},p:function(){return g},HV:function(){return w},Ym:function(){return p},G:function(){return y},fS:function(){return I}});var n=l("520739"),r=l("878389"),i=l("66863");l("284961"),l("826893");var o=l("281481"),a=l.n(o),s=l("960734"),d=l.n(s),u=l("419936"),c=l.n(u);function v(e){if(c()(e))return e.map(e=>v(e));if(d()(e)&&null!==e){let t={};for(let l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[a()(l)]=v(e[l]));return t}return e}function m(e){if(c()(e))return e.map(e=>m(e));if(d()(e)&&null!==e){let t={};for(let l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)]=m(e[l]));return t}return e}var f=l("842602");let{COMMON_SEARCH_PARAMS:h}=l("576660")||{},p=async e=>{let t=m(e);return v(await (0,i.U2)("/aweme/v1/web/douyin/select/study/ai_assistant/note/gen",(0,n._)({},h,t)))},g=async e=>{let t=m(e);return v(await (0,i.U2)("/aweme/v1/web/douyin/select/study/ai_assistant/note/save",(0,n._)({},h,t)))},_=async e=>{var t;let l=m(e),o=await (0,i.U2)("/aweme/v1/web/douyin/select/study/ai_assistant/note/list",(0,n._)({},h,l));return v((0,r._)((0,n._)({},o),{ai_note_list:(null===(t=o.ai_note_list)||void 0===t?void 0:t.map(e=>(0,r._)((0,n._)({},e),{related_item_info:e.related_item_info?(0,f.s0)(e.related_item_info):void 0})))||[]}))},x=async e=>{var t,l;let o=m(e),a=await (0,i.U2)("/aweme/v1/web/douyin/select/study/ai_assistant/note/get",(0,n._)({},h,o));return v((0,r._)((0,n._)({},a),{ai_note_info:(0,r._)((0,n._)({},a.ai_note_info),{related_item_info:(null===(t=a.ai_note_info)||void 0===t?void 0:t.related_item_info)?(0,f.s0)(null===(l=a.ai_note_info)||void 0===l?void 0:l.related_item_info):void 0})}))},w=async e=>{let t=m(e);return v(await (0,i.U2)("/aweme/v1/web/douyin/select/study/ai_assistant/note/delete",(0,n._)({},h,t)))},C=async e=>{let t=m(e);return await (0,i.U2)("/aweme/v1/web/note/get/",(0,n._)({},h,t))},y=async e=>await (0,i.v_)("/aweme/v1/web/note/gen/",(0,n._)({},h),(0,n._)({},e)),I=async e=>await (0,i.v_)("/aweme/v1/web/note/upsert/",(0,n._)({},h),(0,n._)({},e),{headers:{"Content-Type":"application/json"},isDataUseJson:!0})},934770:function(e,t,l){l.d(t,{T:function(){return d}});var n=l(520739);l(675373);var r=l(66863),i=l(576660),o=l(842602);let{COMMON_SEARCH_PARAMS:a}=i||{},s=e=>{let{status_code:t,status_msg:l,toast_back:n,toast_back_info:r,user:i}=e;return{statusCode:t,statusMsg:l,toastBack:n,toastBackInfo:r,user:(0,o.Cy)(i)}};async function d(e){let t=await (0,r.v_)("/aweme/v1/web/commit/user/",(0,n._)({},a),(0,n._)({},e));return(0,o.RL)(t,s)}},245762:function(e,t,l){l.d(t,{b:function(){return u},y:function(){return c}});var n=l(520739),r=l(878389);l(779788),l(675373);var i=l(576660),o=l(66863),a=l(842602);let{COMMON_SEARCH_PARAMS:s}=i||{};function d(e){let{data:t=[],status_code:l,log_pb:n,has_more:r,cursor:i,level:o,last_view:s}=e,d=t.map(e=>null==e?void 0:e.aweme);return{statusCode:l,hasMore:1===r,awemeList:(0,a.TN)({awemeList:d||[],logPb:n&&JSON.stringify(n)}),logPb:n&&JSON.stringify(n),cursor:i,level:o,lastView:s}}async function u(e){let{cursor:t,level:l,count:i=20,pull_type:u,awemeIds:c=[],roomIds:v=[]}=e,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,f=await (0,o.U2)("/aweme/v1/web/follow/feed/",(0,r._)((0,n._)({},s),{cursor:t,level:l,count:i,pull_type:u,aweme_ids:c.join(","),room_ids:v.join(",")}),{},void 0,m,{});return(0,a.RL)(f,d)}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{scene:l="aweme_pc_follow_top"}=e||{};return function(e){let{data:t,status_code:l=0,logId:i}=e,{data:o=[]}=t||{};return{data:o.map(e=>{var t,l,i,o,a,s,d,u,c,v,m,f,h,p,g,_,x,w,C,y,I,b,j,k,N,S,E,L,T,M,R;let P=(null==e?void 0:null===(t=e.room)||void 0===t?void 0:t.additional_stream_url)||(null==e?void 0:e.additional_stream_url),D={authorInfo:{roomData:(0,r._)((0,n._)({},(null==e?void 0:e.room)||{}),{owner:{web_rid:null==e?void 0:e.web_rid},user_count:null==e?void 0:null===(l=e.room)||void 0===l?void 0:l.user_count_str,others:null==e?void 0:null===(i=e.room)||void 0===i?void 0:i.others,additional_stream_url:P}),roomId:null==e?void 0:null===(o=e.room)||void 0===o?void 0:o.id_str,nickname:null==e?void 0:null===(s=e.room)||void 0===s?void 0:null===(a=s.owner)||void 0===a?void 0:a.nickname,title:null==e?void 0:null===(d=e.room)||void 0===d?void 0:d.title,secUid:null==e?void 0:null===(c=e.room)||void 0===c?void 0:null===(u=c.owner)||void 0===u?void 0:u.sec_uid,desc:null==e?void 0:null===(v=e.room)||void 0===v?void 0:v.title,uid:null==e?void 0:null===(f=e.room)||void 0===f?void 0:null===(m=f.owner)||void 0===m?void 0:m.id_str},desc:null==e?void 0:null===(h=e.room)||void 0===h?void 0:h.title};return{webRid:null==e?void 0:e.web_rid,userName:null==e?void 0:null===(g=e.room)||void 0===g?void 0:null===(p=g.owner)||void 0===p?void 0:p.nickname,anchorId:null==e?void 0:null===(x=e.room)||void 0===x?void 0:null===(_=x.owner)||void 0===_?void 0:_.id_str,roomId:null==e?void 0:null===(w=e.room)||void 0===w?void 0:w.id_str,coverSrc:null==e?void 0:null===(b=e.room)||void 0===b?void 0:null===(I=b.owner)||void 0===I?void 0:null===(y=I.avatar_thumb)||void 0===y?void 0:null===(C=y.url_list)||void 0===C?void 0:C[0],gameName:null==e?void 0:e.tag_name,episodeExtra:null==e?void 0:null===(j=e.room)||void 0===j?void 0:j.episode_extra,streamType:null==e?void 0:null===(N=e.room)||void 0===N?void 0:null===(k=N.stream_url)||void 0===k?void 0:k.stream_orientation,paidLiveData:null==e?void 0:null===(S=e.room)||void 0===S?void 0:S.paid_live_data,isEcomLive:(null==e?void 0:null===(T=e.room)||void 0===T?void 0:null===(L=T.ecom_data)||void 0===L?void 0:null===(E=L.room_cart_v2)||void 0===E?void 0:E.show_cart)===1,isCarnival:(null==e?void 0:null===(R=e.room)||void 0===R?void 0:null===(M=R.assist_label)||void 0===M?void 0:M.label_type)===82,__fakeAwemeInfo:D}}),statusCode:l,logId:i}}(await (0,o.U2)("/webcast/web/feed/follow/",(0,r._)((0,n._)({},s),{scene:l}),{},void 0,t,{}))}},823327:function(e,t,l){l.d(t,{u:function(){return u}});var n=l(520739),r=l(878389);l(779788),l(675373);var i=l(576660),o=l(842602),a=l(66863);let{COMMON_SEARCH_PARAMS:s}=i||{};function d(e){let{mc_list:t=[],has_more:l,status_code:n,log_pb:r,cursor:i}=e;return{data:t.map(o.o0),hasMore:!!l,statusCode:n,logPb:r&&JSON.stringify(r),cursor:i}}async function u(e){let{cursor:t,count:l=20}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=await (0,a.U2)("/aweme/v1/web/music/listcollection/",(0,r._)((0,n._)({},s),{cursor:Math.max(t,0),count:l}),{},void 0,i,{});return(0,o.RL)(u,d)}},970187:function(e,t,l){l.d(t,{F8:function(){return v},Ts:function(){return f},Ws:function(){return c},d0:function(){return h},hl:function(){return p}});var n=l(520739),r=l(878389);l(268917),l(779788),l(675373);var i=l(576660),o=l(66863),a=l(842602);l(180826);var s=l(552771);let{COMMON_SEARCH_PARAMS:d}=i;function u(e){let{status_code:t,link_data:l=[],show_pos:n=0}=e;return{statusCode:t,data:l.map(e=>{let{link_type:t=0,count:l=0,link_list:n=[]}=e;return{type:t,count:l,links:n}}),showPos:null!=n?n:0}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,i=await (0,o.U2)("/aweme/v1/web/seo/inner/link/",(0,r._)((0,n._)({},d),{entity_id:t,entity_type:l}),{},void 0,e,{});return(0,a.RL)(i,u)}async function v(){let{count:e=2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments.length>1&&void 0!==arguments[1]&&arguments[1],{statusCode:-1,data:[]}}function m(e){var t;let{status_code:l,status_msg:n,data:r,log_pb:i}=e;return{statusCode:l,statusMsg:n,data:null==r?void 0:r.map(e=>({targetId:e.target_id,hitStatus:e.hit_status})),logPb:null!==(t=null==i?void 0:i.impr_id)&&void 0!==t?t:""}}async function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=await (0,o.U2)("/aweme/v1/web/seo/judge/whitelist/",(0,r._)((0,n._)({},d),{target_ids:e}),{},void 0,t,{});return(0,a.RL)(l,m)}async function h(e){let{awemeId:t,url:l}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=await (0,o.U2)("/aweme/v1/web/seo/keyword/related/",(0,r._)((0,n._)({},d),{itemIds:t,url:l}),{},void 0,i,{});return(0,a.RL)(s,e=>(0,a.Fo)(e,t))}async function p(e){let{awemeId:t="",secUid:l="",entityType:i=s.EntityType.Video,cusotmConfig:u={},entityId:c=""}=e,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,m=await (0,o.U2)("/aweme/v1/web/seo/detail/links/",(0,r._)((0,n._)({},d),{aweme_id:t,entity_type:i,sec_uid:l,entity_id:c}),{},void 0,v,{});return(0,a.RL)(m,e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{links_list:l,status_code:n,log_pb:r}=e,i=[];return(l||[]).forEach(e=>{i.push({moduleSource:e.module_source,moduleTitle:e.module_title,isShowUserUrl:e.is_show_user_url,list:(0,a.TN)({awemeList:null==e?void 0:e.aweme_list,logPb:r,config:t}),linkList:(0,a.uJ)({linkList:null==e?void 0:e.link_list})})}),{statusCode:0===n?0:-1,detail:i,logPb:r&&JSON.stringify(r)}})(e,u))}},617289:function(e,t,l){var n=l(520739),r=l(878389),i=l(563097),o=l(88648);let a=(0,o.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,r._)((0,n._)({width:19,height:19,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.533 14.824a.625.625 0 0 0 1.25 0 7.391 7.391 0 0 0-3.371-6.208 5.115 5.115 0 0 0 1.113-3.195 5.107 5.107 0 0 0-1.506-3.636A5.107 5.107 0 0 0 10.384.28c-.815 0-1.594.185-2.316.55a.625.625 0 1 0 .564 1.116 3.896 3.896 0 0 1 5.643 3.476 3.862 3.862 0 0 1-1.165 2.776.756.756 0 0 0 .172 1.203 6.145 6.145 0 0 1 3.251 5.424zm-3.119 2.32a.625.625 0 0 0 1.25 0 7.19 7.19 0 0 0-3.262-6.027 4.982 4.982 0 0 0 1.071-3.095c0-1.338-.52-2.595-1.466-3.54a4.974 4.974 0 0 0-3.54-1.467c-1.337 0-2.595.52-3.54 1.466a4.974 4.974 0 0 0-1.467 3.54 4.974 4.974 0 0 0 1.071 3.096A7.19 7.19 0 0 0 .27 17.145a.625.625 0 0 0 1.25 0 5.943 5.943 0 0 1 3.143-5.247.752.752 0 0 0 .172-1.196 3.729 3.729 0 0 1-1.125-2.68 3.76 3.76 0 0 1 3.757-3.757 3.76 3.76 0 0 1 3.756 3.757c0 1.016-.399 1.967-1.124 2.68a.752.752 0 0 0 .171 1.197 5.943 5.943 0 0 1 3.144 5.246z",fill:"#fff"}),(0,i.jsx)("path",{d:"M17.783 14.824h.25-.25zm-3.371-6.208l-.196-.156-.171.216.231.15.136-.21zm.7-1.172l-.23-.099.23.099zm-1.093-5.659l-.177.177.177-.177zM8.068.83l.113.223L8.068.83zm-.276.84l-.223.113.223-.113zm.84.276l-.113-.223.113.223zm4.478 6.252l-.175-.179.175.179zm-.218.645l-.247.036.247-.036zm.39.557l-.118.22.118-.22zm-1.88 1.718l-.196-.155-.17.215.23.15.136-.21zm.669-1.125l-.23-.099.23.099zm-1.064-5.51l-.177.176.177-.177zm-7.08 0l.176.176-.176-.177zm-1.064 5.51l.23-.099-.23.099zm.668 1.125l.137.21.229-.15-.17-.214-.196.154zm1.132.781l-.118-.22.118.22zm.389-.554l.247.035-.247-.035zm-.217-.642l.175-.179-.175.179zm5.264 0l-.175-.179.175.179zm-.217.642l.247-.036-.247.036zm.388.554l.118-.22-.118.22zm6.888 3.301a.375.375 0 0 1-.375-.375h-.5c0 .483.392.875.875.875v-.5zm.375-.375a.375.375 0 0 1-.375.375v.5a.875.875 0 0 0 .875-.875h-.5zm-3.257-5.998a7.141 7.141 0 0 1 3.257 5.998h.5a7.641 7.641 0 0 0-3.485-6.418l-.272.42zm.606-1.48a4.869 4.869 0 0 1-.666 1.114l.392.312c.298-.375.543-.787.733-1.23l-.46-.197zm.393-1.925c0 .668-.132 1.315-.393 1.924l.46.197a5.358 5.358 0 0 0 .433-2.121h-.5zm-1.433-3.46a4.858 4.858 0 0 1 1.433 3.46h.5c0-1.44-.561-2.795-1.579-3.813l-.354.354zM10.384.53c1.307 0 2.534.509 3.458 1.433l.354-.354A5.358 5.358 0 0 0 10.384.03v.5zm-2.203.523A4.838 4.838 0 0 1 10.384.53v-.5c-.854 0-1.671.194-2.429.577l.226.446zm-.166.504a.375.375 0 0 1 .166-.504L7.955.606a.875.875 0 0 0-.386 1.176l.446-.226zm.504.166a.375.375 0 0 1-.504-.166l-.446.226a.875.875 0 0 0 1.175.386l-.225-.446zm1.865-.443a4.1 4.1 0 0 0-1.865.443l.225.446a3.6 3.6 0 0 1 1.64-.389v-.5zm4.141 4.142a4.146 4.146 0 0 0-4.141-4.142v.5a3.646 3.646 0 0 1 3.641 3.642h.5zm-1.24 2.954a4.113 4.113 0 0 0 1.24-2.954h-.5c0 .985-.387 1.907-1.09 2.597l.35.357zm-.145.432a.508.508 0 0 1 .146-.432l-.35-.357a1.007 1.007 0 0 0-.291.86l.495-.071zm.26.372a.506.506 0 0 1-.26-.372l-.495.07c.045.315.239.592.52.743l.235-.441zm3.383 5.645A6.395 6.395 0 0 0 13.4 9.18l-.236.44a5.895 5.895 0 0 1 3.12 5.205h.5zM14.04 17.52a.375.375 0 0 1-.375-.375h-.5c0 .483.392.875.875.875v-.5zm.375-.375a.375.375 0 0 1-.375.375v.5a.875.875 0 0 0 .875-.875h-.5zm-3.149-5.818a6.94 6.94 0 0 1 3.15 5.818h.5a7.439 7.439 0 0 0-3.376-6.237l-.274.419zm.576-1.434a4.73 4.73 0 0 1-.635 1.07l.393.31c.284-.362.52-.758.701-1.183l-.46-.197zm.382-1.871c0 .65-.128 1.279-.382 1.871l.46.197c.28-.655.422-1.351.422-2.068h-.5zM10.83 4.658a4.724 4.724 0 0 1 1.393 3.364h.5a5.224 5.224 0 0 0-1.54-3.717l-.353.353zM7.467 3.265c1.27 0 2.464.495 3.363 1.393l.354-.353a5.224 5.224 0 0 0-3.717-1.54v.5zM4.103 4.658a4.724 4.724 0 0 1 3.364-1.393v-.5a5.224 5.224 0 0 0-3.717 1.54l.353.353zM2.71 8.022c0-1.271.495-2.465 1.393-3.364l-.353-.353a5.224 5.224 0 0 0-1.54 3.717h.5zm.383 1.871a4.724 4.724 0 0 1-.383-1.871h-.5c0 .717.143 1.413.423 2.068l.46-.197zm.635 1.07a4.73 4.73 0 0 1-.635-1.07l-.46.197c.182.425.418.821.702 1.182l.393-.31zM.52 17.145a6.939 6.939 0 0 1 3.148-5.818l-.273-.419A7.439 7.439 0 0 0 .02 17.145h.5zm.375.375a.375.375 0 0 1-.375-.375h-.5c0 .483.391.875.875.875v-.5zm.375-.375a.375.375 0 0 1-.375.375v.5a.875.875 0 0 0 .875-.875h-.5zm3.275-5.467a6.193 6.193 0 0 0-3.275 5.467h.5a5.693 5.693 0 0 1 3.012-5.027l-.237-.44zm.26-.37a.503.503 0 0 1-.26.37l.237.44c.279-.15.472-.425.517-.739l-.495-.07zm-.146-.428a.504.504 0 0 1 .145.428l.495.071a1.004 1.004 0 0 0-.29-.856l-.35.357zM3.46 8.022c0 1.083.426 2.099 1.2 2.858l.35-.357a3.479 3.479 0 0 1-1.05-2.501h-.5zm4.007-4.007A4.01 4.01 0 0 0 3.46 8.022h.5a3.51 3.51 0 0 1 3.507-3.507v-.5zm4.006 4.007a4.01 4.01 0 0 0-4.006-4.007v.5a3.51 3.51 0 0 1 3.506 3.507h.5zm-1.199 2.858a3.979 3.979 0 0 0 1.2-2.858h-.5a3.48 3.48 0 0 1-1.05 2.501l.35.357zm-.145.428a.504.504 0 0 1 .145-.428l-.35-.357a1.003 1.003 0 0 0-.29.856l.495-.07zm.26.37a.503.503 0 0 1-.26-.37l-.495.071c.046.314.239.59.518.74l.236-.441zm3.275 5.467a6.193 6.193 0 0 0-3.276-5.467l-.236.44a5.693 5.693 0 0 1 3.012 5.027h.5z",fill:"#fff"})]})));t.Z=a},7305:function(e,t,l){var n=l(520739),r=l(878389),i=l(563097),o=l(88648);let a=(0,o.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,r._)((0,n._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("rect",{width:20,height:20,rx:2,fill:"#FF851D"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.158 5.41a1 1 0 0 1-.985-.828L5.97 3.414A.5.5 0 0 0 5.476 3H3a.5.5 0 0 0-.5.5v1A.5.5 0 0 0 3 5h.934a.5.5 0 0 1 .5.475l.359 7.076a1 1 0 0 0 .998.949H14.5a.5.5 0 0 0 .5-.5v-.5a.5.5 0 0 0-.5-.5H7a.5.5 0 0 1-.5-.5V11a.5.5 0 0 1 .5-.5h8.111a.5.5 0 0 0 .485-.377l1.04-4.09a.5.5 0 0 0-.484-.624H7.158zM6.25 17a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zm7.25-1.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0z",fill:"#fff"})]})));t.Z=a},490359:function(e,t,l){var n=l(520739),r=l(878389),i=l(563097),o=l(88648);let a=(0,o.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,r._)((0,n._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 0C7.163 0 0 7.163 0 16c0 8.836 7.163 16 16 16 8.836 0 16-7.164 16-16 0-8.837-7.164-16-16-16zm-1.944 9.594c-1.062-.725-2.502.036-2.502 1.322v10.168c0 1.286 1.44 2.046 2.502 1.321l7.06-4.82a1.92 1.92 0 0 0 0-3.171l-7.06-4.82z",fill:"#fff"})})));t.Z=a}}]);