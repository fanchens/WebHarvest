"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["264"],{874005:function(e,i,t){t.d(i,{Hv:function(){return S},JL:function(){return f},Tw:function(){return g},Xq:function(){return h},ao:function(){return m},hF:function(){return p},sb:function(){return y}});var o,n=t(520739),r=t(878389);t(779788),t(209955);var a=t(567754),l=t(167951),s=t(784106),d=t(679584),u=t(828782),c=t(919195);let _=(null===(o=(0,l.Es)())||void 0===o?void 0:o.user_unique_id)||"",v={webid:_,device_id:_,app_name:"douyin_web"},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.ZP.get("/webcast/gift/list/",{params:(0,n._)((0,r._)((0,n._)({},(0,s.f)(),(0,d.F)({}),v),{webcast_sdk_version:2450}),e)})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.ZP.get("/webcast/assets/effects/",{params:(0,n._)((0,r._)((0,n._)({},(0,s.f)(),(0,d.F)({}),v),{webcast_sdk_version:2450}),e)})},f=e=>c.ZP.get("/webcast/gift/extra/",{params:(0,n._)((0,r._)((0,n._)({},(0,s.f)(),(0,d.F)({}),v),{webcast_sdk_version:2450}),e)}),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.ZP.get("/webcast/gift/detail/",{params:(0,n._)((0,r._)((0,n._)({},(0,s.f)(),(0,d.F)({}),v),{webcast_sdk_version:2450}),e)})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.tags_extra)try{let i=JSON.parse(e.tags_extra);i.is_client=(0,u.DT)(),e.tags_extra=JSON.stringify(i)}catch(e){throw Error("tags_extra is not a valid JSON string")}else e.tags_extra=JSON.stringify({is_client:(0,u.DT)()});return((null==e?void 0:e.plugin_info)||(null==e?void 0:e.plugin_id))&&delete e.buff_level,c.ZP.post("/webcast/gift/send/",(0,a.stringify)((0,n._)({},e)),{headers:{"Content-Type":"application/x-www-form-urlencoded"},params:(0,n._)({},(0,s.f)(),(0,d.F)({}),v)})},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.ZP.get("/webcast/wallet/info/",{params:(0,n._)({},e)})},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.ZP.get("/webcast/web/user/layer/",{params:(0,n._)({},e)})}},556731:function(e,i,t){t.d(i,{A:function(){return h},E:function(){return m}});var o,n=t(520739),r=t(878389);t(779788),t(209955);var a=t(567754),l=t(167951),s=t(784106),d=t(679584),u=t(828782),c=t(919195);let _=(null===(o=(0,l.Es)())||void 0===o?void 0:o.user_unique_id)||"",v={webid:_,device_id:_,app_name:"douyin_web"},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.ZP.get("/webcast/props/mine/",{params:(0,n._)((0,r._)((0,n._)({},(0,s.f)(),(0,d.F)({}),v),{webcast_sdk_version:2450}),e)})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.tags_extra)try{let i=JSON.parse(e.tags_extra);i.is_client=(0,u.DT)(),e.tags_extra=JSON.stringify(i)}catch(e){throw Error("tags_extra is not a valid JSON string")}else e.tags_extra=JSON.stringify({is_client:(0,u.DT)()});return c.ZP.post("/webcast/props/consume/",(0,a.stringify)((0,n._)({},e)),{headers:{"Content-Type":"application/x-www-form-urlencoded"},params:(0,n._)({},(0,s.f)(),(0,d.F)({}),v)})}},448721:function(e,i,t){t.d(i,{Bv:function(){return h},F1:function(){return m},RN:function(){return r},Tg:function(){return f},Vv:function(){return g},Y5:function(){return p},ZN:function(){return d},bG:function(){return l},bl:function(){return c},fv:function(){return u},ik:function(){return _},vL:function(){return v},wJ:function(){return a}});var o=t(520739),n=t(919195),r={ROOM:200,200:"ROOM",FULL_SCREEN:201,201:"FULL_SCREEN",CHAT:202,202:"CHAT"};let a=async()=>n.ZP.get("/webcast/user/me/",{params:{room_id:0}}),l=async e=>n.ZP.get("/webcast/user/",{params:e}),s=e=>n.ZP.post("/webcast/user/relation/update/",{},{params:e}),d=e=>s((0,o._)({follow_type:1},e)),u=e=>s((0,o._)({follow_type:0},e)),c=e=>n.ZP.post("/webcast/linkmic_audience/verify_confirm/",{},{params:e}),_=e=>n.ZP.post("/webcast/linkmic_audience/verify_open/",{},{params:e}),v=e=>n.ZP.post("/webcast/room/like/",{},{params:e}),h=e=>n.ZP.post("/webcast/room/silence/",{},{params:e}),m=e=>n.ZP.post("/webcast/room/unsilence/",{},{params:e}),f=e=>n.ZP.get("/webcast/room/silence/list/",{params:e}),g=e=>n.ZP.post("/webcast/room/kick/user/",{},{params:e}),p=async e=>n.ZP.get("/webcast/web/live/watermark/",{params:e})},540686:function(e,i,t){t.d(i,{Ck:function(){return a},Ri:function(){return n},sF:function(){return r}});var o=t(829021);let n=[o.yP.AUDIO_1V8_STAGE,o.yP.AUDIO_GRID,o.yP.AUDIO_1V8,o.yP.MATE_CUSTOM,o.yP.AUDIO_DOUBLE_C],r=[o.yP.VIDEO_DYNAMIC,o.yP.VIDEO_1V6,o.yP.VIDEO_GRID,o.yP.VIDEO_1_V_8,o.yP.VIDEO_1_V_6,o.yP.VIDEO_1_V_3,o.yP.VIDEO_DYNAMIC_FLOAT,o.yP.VIDEO_T1_V_B8,o.yP.VIDEO_1V8,o.yP.VIDEO_2V4V4],a=[o.yP.VIDEO_1V6,o.yP.VIDEO_GRID,o.yP.VIDEO_6V6,o.yP.VIDEO_1_V_8,o.yP.VIDEO_DYNAMIC_FLOAT,o.yP.VIDEO_1_V_6,o.yP.VIDEO_1_V_3,o.yP.VIDEO_T1_V_B8,o.yP.VIDEO_1V8,o.yP.VIDEO_2V4V4]},258972:function(e,i,t){t.d(i,{j5:function(){return s},lC:function(){return a},oh:function(){return n},pv:function(){return l},xD:function(){return r}});var o=t(829021);let n={[o.yP.VIDEO_1V6]:{frameRate:30,width:256,height:256,maxKbps:800},[o.yP.VIDEO_1V8]:{frameRate:30,width:256,height:256,maxKbps:800},[o.yP.VIDEO_GRID]:{frameRate:30,width:240,height:240,maxKbps:800},[o.yP.VIDEO_6V6]:{frameRate:30,width:240,height:320,maxKbps:800}},r={2:{frameRate:15,width:360,height:640,maxKbps:800},3:{frameRate:15,width:360,height:320,maxKbps:500},4:{frameRate:15,width:360,height:320,maxKbps:500},5:{frameRate:15,width:240,height:320,maxKbps:400},6:{frameRate:15,width:240,height:320,maxKbps:400},7:{frameRate:15,width:240,height:240,maxKbps:280},8:{frameRate:15,width:240,height:240,maxKbps:280},9:{frameRate:15,width:240,height:240,maxKbps:280}},a={[o.yP.VIDEO_1V6]:{frameRate:30,width:256,height:256},[o.yP.VIDEO_GRID]:{frameRate:30,width:240,height:240},[o.yP.VIDEO_6V6]:{frameRate:30,width:240,height:320},[o.yP.VIDEO_DYNAMIC_FLOAT]:{frameRate:30,width:256,height:256}},l={2:{width:360,height:640,frameRate:30},3:{width:360,height:320,frameRate:30},4:{width:360,height:320,frameRate:30},5:{width:240,height:320,frameRate:30},6:{width:240,height:320,frameRate:30},7:{width:240,height:240,frameRate:30},8:{width:240,height:240,frameRate:30},9:{width:240,height:240,frameRate:30}};var s={MICROPHONE:0,0:"MICROPHONE",CAMERA:1,1:"CAMERA"}},688432:function(e,i,t){t.d(i,{U5:function(){return l},cb:function(){return n},fc:function(){return a},pL:function(){return r}}),t(250440),t(874386),t(110006),t(826893),t(455663);var o=t(709606);let n=(e,i,t)=>(e.giftScene|i)===e.giftScene&&e.price*t<=o.sF,r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.dq.NORMAL,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=!(arguments.length>4)||void 0===arguments[4]||arguments[4],l=[];return e.filter(e=>!i.length||i.includes(e.pageType)).forEach(e=>{l=[...l,...e.giftList]}),a?l.filter(e=>n(e,t,r)):l},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(e=>e.onPanel)},l=e=>{var i;let t=null;Array.from(document.querySelectorAll('[class*="gift_item_gift_grid"]')).forEach(i=>{let o=i.className.match(/id-(\d+(\.\d+)?)/);o&&parseFloat(o[1])===e&&(t=i)}),null==t||null===(i=t.scrollIntoView)||void 0===i||i.call(t,{block:"nearest",behavior:"auto"},1e3)}},404897:function(e,i,t){t.d(i,{Fy:function(){return a},Jn:function(){return r},LQ:function(){return d},Oo:function(){return l},PO:function(){return c},VP:function(){return _},ZV:function(){return s},yQ:function(){return u}}),t(927234);var o=t(746309);let n=e=>{let i=(0,o.OK)();null==i||i.sendEvent(e)},r=e=>{let{name:i,type:t="landPage",params:o}=e;n({name:"activity_indicator_jsb_not_support",categories:{name:i,type:t,params:o}})},a=e=>{n({name:"activity_indicator_script_load_error",categories:{rootID:e}})},l=e=>{n({name:"activity_indicator_script_execute_error",categories:{rootID:e}})},s=e=>{let{name:i,type:t="landPage",params:o}=e;n({name:"activity_indicator_jsb_error",categories:{name:i,type:t,params:o}})},d=e=>{let{name:i,type:t="landPage",params:o}=e;n({name:"activity_indicator_jsb_callback_error",categories:{name:i,type:t,params:o}})},u=e=>{let{name:i,type:t="landPage",params:o}=e;n({name:"activity_indicator_jsb_call",categories:{name:i,type:t,params:o}})},c=e=>{let{status:i,statusCode:t,url:o}=e;n({name:"activity_indicator_jsb_open_scheme",categories:{status:i,statusCode:null==t?void 0:t.toString(),url:o}})},_=e=>{let{bannerId:i,noDom:t,bannerName:o}=e;n({name:"activity_can_not_load_slave",categories:{bannerId:i,noDom:t,bannerName:o}})}},456618:function(e,i,t){t.d(i,{Kj:function(){return s},Qg:function(){return _},cC:function(){return v},fh:function(){return d},ox:function(){return l},yG:function(){return u},zr:function(){return c}});var o=t(368200);t(413806),t(826893),t(429532),t(268917);var n=t(645260),r=t.n(n),a=t(567754);let l=e=>{var i,t;let o={};try{o=JSON.parse(null!==(t=e.extra)&&void 0!==t?t:"{}")}catch(e){}return{id:Number(e.id),frameType:Number(e.frame_type),scriptSrc:o.scriptSrc||"",key:o.id||"",imgUrl:(null==e?void 0:null===(i=e.image)||void 0===i?void 0:i.url_list)?e.image.url_list[Math.round(Math.random()*(e.image.url_list.length-1))]:"",scheme:e.schema_url||"",rootId:o.rootId||"",pageUrl:o.pageUrl||"",extra:o}},s=e=>{var i,t,o,n,a,l,s,d;return{room_id:r()(e,"roomStore.roomInfo.roomId",""),user_id:r()(e,"userStore.userInfo.id_str",""),sec_user_id:r()(e,"userStore.userInfo.sec_uid",""),anchor_id:r()(e,"roomStore.roomInfo.anchor.id_str",""),anchor_id_str:r()(e,"roomStore.roomInfo.anchor.id_str",""),sec_anchor_id:r()(e,"roomStore.roomInfo.anchor.sec_uid",""),enter_from_merge:null===(t=window)||void 0===t?void 0:null===(i=t.__INVISIBLE_QUERY__)||void 0===i?void 0:i.enter_from_merge,request_id:null===(n=window)||void 0===n?void 0:null===(o=n.__INVISIBLE_QUERY__)||void 0===o?void 0:o.request_id,enter_method:null===(l=window)||void 0===l?void 0:null===(a=l.__INVISIBLE_QUERY__)||void 0===a?void 0:a.enter_method,user_unique_id:r()(e,"userStore.odin.user_unique_id",""),action_type:(null===(d=window)||void 0===d?void 0:null===(s=d.__INVISIBLE_QUERY__)||void 0===s?void 0:s.action_type)||"click"}},d=(e,i,t)=>{let o=s(i),n=e.split("?"),r=a.parse(n[1]),l=a.stringify(Object.assign(r,o,t));return`${n[0]}?${l}`},u="__ACT_CARBON_KEY__",c="__TASK_CARBON_KEY__",_={add(e){var i;let{type:t,data:o}=e,n=window["act"===t?u:c];null==n||null===(i=n.emit)||void 0===i||i.call(n,"add",{bannerInfo:o,initData:"",isLast:!0})},refresh(e){var i;let{type:t,data:o,initData:n}=e,r=window["act"===t?u:c];null==r||null===(i=r.emit)||void 0===i||i.call(r,"add",{bannerInfo:o,initData:n||"",isLast:!0})},mockMessage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{__MESSAGE_INSTANCE__:i}=window;i&&i.mock,e.forEach(e=>i.mock(e.method,e))}},v=e=>{let i={};e.forEach(e=>{let{scriptSrc:t,key:n}=e,r=(null==t?void 0:t.indexOf("protocol_id"))>-1,a=(null==t?void 0:t.indexOf("externalJsList"))>-1,l=[];if(i[n]=l,a||r){let i=t.split("?")[0]||t;try{let s=function(e){let i={};try{if(e.indexOf("?")>-1){let t=e.split("?");t.shift(),t.forEach(e=>{e.split("&").forEach(e=>{let t=e.split("=");i[t[0]]=decodeURIComponent(t[1])||null})})}}catch(e){}return i}(t),{externalJsList:d="[]"}=s,u=(0,o._)(s,["externalJsList"]);r&&(window[`__protocol_${e.key}__`]=u,i=`${i}?key=${n}`);let c=JSON.parse(d);a&&Array.isArray(c)&&c.length>0&&c.forEach(e=>{let{name:i,url:t}=e;l.every(e=>e.name!==i)&&!window[i]&&l.push({name:i,url:t})})}catch(e){}}}),window.__SCRIPT_MAP__=i}},872102:function(e,i,t){t.d(i,{T:function(){return ec},D:function(){return eu}});var o=t("134761"),n=t("520739");t("675373"),t("413806"),t("826893"),t("429532"),t("874386");var r=t("434144"),a=t("565024"),l=t("66627"),s=t("642448"),d=t("878389");t("284961");var u=t("970415"),c=t("784414"),_=t("645260"),v=t.n(_),h=(e,i,t)=>{i("fetch",async(i,t)=>{let{data:o,params:r,headers:a,url:l="",method:_="GET"}=t;try{let i=(0,c.Kj)(e)||{},t=(0,n._)({},r);Object.keys(t).forEach(e=>{(""===t[e]||void 0===t[e])&&delete t[e]});let f=(0,d._)((0,n._)({},i,t),{aid:6383}),g=await (0,u.IZ)({url:l.replace(/^https?:\/\/[^/]+/,""),method:_,headers:a,data:o,params:f});if(l.indexOf("/webcast/gift/exhibition/home/")>0){let i=null==e?void 0:e.roomStore,t=v()(i,"roomInfo.anchor.id_str"),o=v()(i,"roomInfo.anchor.nickname","");if((null==r?void 0:r.anchor_id)===t&&(null==r?void 0:r.target_open_id)===t&&o){var h,m;(null==g?void 0:null===(m=g.data)||void 0===m?void 0:null===(h=m.data)||void 0===h?void 0:h.anchor_name)&&(g.data.data.anchor_name=o)}}return(0,s.Vp)({data:{raw:null==g?void 0:g.data},raw:null==g?void 0:g.data},"success")}catch(e){return(0,s.bG)(s.MU.FAIL,"fail",(0,c.VK)(e))}})};let m="activity_indicator_jsb";var f=(e,i,t)=>{let o=async(e,i)=>{let{key:t}=i;try{var o;return(0,s.Vp)({value:null!==(o=localStorage.getItem(`${m}_${t}`))&&void 0!==o?o:""})}catch(e){return(0,s.bG)(s.MU.FAIL,"fail",{value:void 0})}},n=async(e,i)=>{let{key:t}=i;try{return localStorage.removeItemItem(`${m}_${t}`),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL,"fail")}};i("setStorage",async(e,i)=>{let{key:t,value:o}=i;try{return localStorage.setItem(`${m}_${t}`,o),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL,"fail")}}),i("getStorage",o),i("removeStorage",n)},g=t("828782"),p=(e,i,t)=>{let o=async(i,t)=>{try{let{roomStore:i}=e;return(0,s.Vp)({anchor_info:{nickname:v()(i,"roomInfo.anchor.nickname","")}})}catch(t){let{roomStore:i}=e;return(0,s.bG)(s.MU.FAIL,"",{anchor_info:{nickname:v()(i,"roomInfo.anchor.nickname","")}})}},n=async(i,t)=>{var o,n,r,a,l;let{userStore:{userInfo:d},roomStore:{roomInfo:u}}=e,c={avatar:null==d?void 0:null===(n=d.avatar_large)||void 0===n?void 0:null===(o=n.url_list)||void 0===o?void 0:o[0],nickname:null==d?void 0:d.nickname,sec_user_id:null==d?void 0:d.sec_uid,short_id:null==d?void 0:d.short_id,user_id:null==d?void 0:d.user_id_str,user_level:null==d?void 0:d.level,user_type:"",display_id:null==d?void 0:d.display_id},{anchor:_}=u,v={avatar:null==_?void 0:null===(a=_.avatar_thumb)||void 0===a?void 0:null===(r=a.url_list)||void 0===r?void 0:r[0],nickname:null==_?void 0:_.nickname,short_id:null==_?void 0:_.id_str,user_id:null==_?void 0:_.id_str,sec_user_id:null==_?void 0:_.sec_uid,anchor_level:void 0,anchor_type:void 0,display_id:void 0},h={room_id:null==u?void 0:u.roomId,room_layout:1,is_paidlive:!1,live_room_mode:(null==u?void 0:null===(l=u.room)||void 0===l?void 0:l.live_room_mode)||"0",game_points_playing:2,quiz_game_points_playing:2,is_life:!1};return(0,s.Vp)({user_info:c,room_info:h,anchor_info:v,__data:{user_info:c,room_info:h,anchor_info:v}})},r=async(i,t)=>{try{var o,n,r,a;let{userStore:i}=e,{userInfo:t,odin:l}=i,d={userInfo:{userID:null==t?void 0:t.user_id_str,nickName:null==t?void 0:t.nickname,avatarURL:null==t?void 0:null===(n=t.avatar_large)||void 0===n?void 0:null===(o=n.url_list)||void 0===o?void 0:o[0],secUserID:null==t?void 0:t.sec_uid,shortID:null==t?void 0:t.short_id},user_id:null==l?void 0:l.user_id,short_id:null==t?void 0:t.short_id,sec_user_id:null==t?void 0:t.sec_uid,nickname:null==t?void 0:t.nickname,avatar:null==t?void 0:null===(a=t.avatar_large)||void 0===a?void 0:null===(r=a.url_list)||void 0===r?void 0:r[0],is_silent:void 0,douyin_uid:null==t?void 0:t.short_id,is_login:null==l?void 0:l.user_is_login};if((null==l?void 0:l.user_is_login)===1)return(0,s.Vp)(d);return(0,s.bG)(s.MU.FAIL,"fail",d)}catch(e){return(0,s.bG)(s.MU.FAIL,"fail",{userInfo:{userID:""}})}},a=async(i,t)=>{try{var o,n;let{userStore:i}=e,{userInfo:t}=i,r=(null==t?void 0:t.id_str)||(null==t?void 0:t.sec_uid)||(null==t?void 0:t.short_id),a={isLogin:!!r,is_login:!!r,userInfo:{userID:null==t?void 0:t.id_str,nickName:null==t?void 0:t.nickname,avatarURL:null==t?void 0:null===(n=t.avatar_large)||void 0===n?void 0:null===(o=n.url_list)||void 0===o?void 0:o[0],secUserID:null==t?void 0:t.sec_uid,shortID:null==t?void 0:t.short_id}};if(r)return(0,s.Vp)(a);return(0,s.bG)(s.MU.FAIL,"fail",a)}catch(e){return(0,s.bG)(s.MU.FAIL,"fail",{userInfo:{userID:""}})}};i("getAppInfo",async(i,t)=>{try{let{userStore:{odin:i}}=null!=e?e:{userStore:{}};return(0,s.Vp)({aid:"6383",user_id:null==i?void 0:i.user_id,device_id:null==i?void 0:i.user_unique_id,is_mas:!!(0,g.xo)(),appID:"6383"})}catch(e){return(0,s.bG)(s.MU.FAIL)}}),i("getBaseInfo",o),i("baseInfo",n),i("userInfo",r),i("getUserInfo",a),i("x.getUserInfo",a)},y=t("744376"),S=t("456618"),L=(e,i,t)=>{i("sendLogV3",(i,t)=>{let{eventName:o,params:r}=t;try{return window.collectEvent(o,(0,n._)({},(0,y.m6)(),(0,S.Kj)(e),r)),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL)}})},A=t("509090"),I=t("567754"),P=t("861027"),k=t("404897"),b=t("856868"),M=t("755012"),C=t("709606"),w=t("284979"),E=t("441447"),U=(e,i,t)=>{let o=(e,i)=>{let{title:t,cancelText:o,confirmText:n,content:r,showCancel:a=!0}=i,{showModal:l}=(0,P.t)({});return new Promise(e=>{l({title:t,content:r,confirmBtnText:n,closeBtnText:o,onConfirm:()=>{e((0,s.Vp)({cancel:!1,confirm:!0}))},onClose:()=>{e((0,s.Vp)({cancel:!0,confirm:!1}))},showCancel:a})})},r=async(i,t)=>{let{url:o,_reset:n=!1,_noReset:r=!1,forceCover:a=!1}=t;if(-1!==o.indexOf("sslocal://lynxview?")){var l;return null===(l=e.singletonStore.liveContainer)||void 0===l||l.openLandPage({url:o,reset:!1,forceCover:a}),(0,s.Vp)()}if(-1!==o.indexOf("sslocal://webcast_redirect?entry=gold_gift"))try{let i=null==e?void 0:e.roomStore,t=null==e?void 0:e.userStore,o=null==e?void 0:e.activityIndicatorStore,n=v()(i,"roomInfo.roomId"),r=v()(i,"roomInfo.anchor.id_str"),a=v()(i,"roomInfo.anchor.sec_uid"),l=v()(t,"userInfo.id_str"),d=v()(t,"userInfo.sec_uid"),u=null==o?void 0:o._getGoldActLandUrl;return(null==o?void 0:o.setCurrentLandPage)([u({anchorId:r,secAnchorId:a,userId:l,secUserId:d,roomId:n})]),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL)}try{let i=await (0,c.L7)(o);if(!i)return A.F.info("打开失败，请重试"),"boolean"==typeof i?(0,k.PO)({status:"1",statusCode:b.P.Failed,url:i+""}):(0,k.PO)({status:"2",statusCode:b.P.Failed,url:i}),(0,s.bG)(s.MU.FAIL);(0,k.PO)({statusCode:b.P.Success,status:"0",url:i});let{url:t}=I.parse(i.split("?")[1]),a=(0,S.fh)(t,e,(()=>{let e={__isDouyinPC:"true"};try{let i=I.parse(o.split("?")[1]);if("string"==typeof i.url_query){let t=I.parse(decodeURIComponent(i.url_query));Object.assign(e,t)}}catch(e){}return e})()),l=e.activityIndicatorStore.currentLandPage.indexOf(a);if(l>=0){let i=[...e.activityIndicatorStore.currentLandPage];return i.splice(l,1),e.activityIndicatorStore.setCurrentLandPage(i,r),(0,s.Vp)()}return n?e.activityIndicatorStore.setCurrentLandPage([a],r):e.activityIndicatorStore.setCurrentLandPage([...e.activityIndicatorStore.currentLandPage,a],r),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL)}},a=async(e,i)=>r(e,(0,n._)({url:null==i?void 0:i.schema},i)),l=async(i,t)=>{let{url:o,pcNotClose:n}=t;try{let i=(0,S.fh)(o,e,{});return i=`${i}&__isDouyinPC=true`,n?e.activityIndicatorStore.setCurrentLandPage([...null==e?void 0:e.activityIndicatorStore.currentLandPage,i],!0):e.activityIndicatorStore.setCurrentLandPage([i]),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL)}},d=async(i,n)=>{var a,l,d,u,c,_,v,h,m,f,g,p,y,S,L,A,P;if("scheme"===n.type){if(!(null==n?void 0:null===(a=n.args)||void 0===a?void 0:a.url))return(0,s.bG)(s.MU.FAIL);let e=null==n?void 0:null===(d=n.args)||void 0===d?void 0:null===(l=d.url)||void 0===l?void 0:l.split("?");if(e[0].indexOf("webcast_room")>=0){let i=I.parse(e[1]||"");return i.web_rid&&window.open(`https://live.douyin.com/${i.web_rid}`),(0,s.Vp)()}return await r(i,{url:n.args.url,_noReset:null==n?void 0:null===(u=n.args)||void 0===u?void 0:u._noReset})}if("room"===n.type)return(null==n?void 0:null===(c=n.args)||void 0===c?void 0:c.web_rid)&&window.open(`/${n.args.web_rid}`),(0,s.Vp)();if("gift_panel"===n.type){let r=null==n?void 0:n.gift_id,a=null==n?void 0:n.is_send_gift,l=null==n?void 0:null===(_=n.gift_log_extra)||void 0===_?void 0:_.gift_source,d=(0,M.mS)(r,e.giftStore.giftList);if(r&&a&&(null==d?void 0:d.id))o(i,{title:"",content:`送出1个${d.name}(${d.price}钻)`,confirmText:"确定",showCancel:!0,cancelText:"取消"}).then(e=>{var o,a;(null==e?void 0:e.code)===s.MU.SUCCESS&&(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.confirm)&&(null==t||t.sendGift(i,{gift_id:r,gift_count:1,gift_source:l,to_user_id:null==n?void 0:null===(a=n.args)||void 0===a?void 0:a.user_id}))});else{e.giftStore.setGiftPanelSwitchStatus(n.page_type?C.nN.OPEN_BY_PAGE_TYPE:C.nN.OPEN_GIFT);let t=(null===(v=i.globalProps)||void 0===v?void 0:v.resolvedUrl)||"";n.page_type&&(null==e||e.giftStore.setCurrentPageType(n.page_type)),e.linkmicStore.isGroupLive&&t.indexOf("compete_card_pc.json")>0&&(null==n?void 0:null===(h=n.args)||void 0===h?void 0:h.user_id)&&(e.linkmicStore.setChoosePeopleArr([null==n?void 0:null===(m=n.args)||void 0===m?void 0:m.user_id]),E.emit(E.EVENT.selectGroupLiveAnchor,[null==n?void 0:null===(f=n.args)||void 0===f?void 0:f.user_id]))}return(0,s.Vp)()}if("login_panel"===n.type)return await t.openLoginPanel(i,n.args);if("profile"===n.type){let{user_id:t,sec_uid:o,sec_user_id:r,source:a=""}=n.args||{};if(((null===(g=i.globalProps)||void 0===g?void 0:g.resolvedUrl)||"").indexOf("compete_card_pc.json")>0&&e.linkmicStore.groupliveProfileSlot){let i=e.linkmicStore.groupliveProfileSlot.getBoundingClientRect();(0,w.o8)(e,{targetUid:t,secTargetUid:r||o,source:a,position:"bottom",left:i.x,top:i.y,skipPrivacyCheck:"true"===String((null==n?void 0:null===(p=n.args)||void 0===p?void 0:p.skip_privacy_check)||!1)})}else(0,w.o8)(e,{targetUid:t,secTargetUid:r||o,source:a,skipPrivacyCheck:"true"===String((null==n?void 0:null===(y=n.args)||void 0===y?void 0:y.skip_privacy_check)||!1)});return(0,s.Vp)()}return"charge"===n.type?(t.openLiveRecharge(i,n),(0,s.Vp)()):"open_pc_package"===n.type?((null==e?void 0:null===(S=e.giftStore)||void 0===S?void 0:S.giftPanelSwitchStatus)===C.nN.NO_CONTROL||(null==e?void 0:null===(L=e.giftStore)||void 0===L?void 0:L.giftPanelSwitchStatus)===C.nN.CLOSE?null==e||null===(A=e.giftStore)||void 0===A||A.setGiftPanelSwitchStatus(C.nN.OPEN_PROP):null==e||null===(P=e.giftStore)||void 0===P||P.setGiftPanelSwitchStatus(C.nN.CLOSE),(0,s.Vp)()):(t.pcNotSupport("openLive",n.type),(0,s.bG)(s.MU.FAIL))};i("showModal",o),i("openScheme",r),i("openSchema",a),i("openUrl",l),i("openLive",d),i("x.open",(e,i)=>(null==i?void 0:i.schema)?r(e,{url:i.schema,_reset:null==i?void 0:i.replace}):(0,s.bG)(s.MU.FAIL)),i("openVipEmojiPanel",()=>{try{var i,t;null==e||null===(t=e.vipStore)||void 0===t||null===(i=t.emojiPanelRef)||void 0===i||i.show("vipEmoji"),(0,s.Vp)({})}catch(e){(0,s.bG)({})}})},T=(e,i,t)=>{i("privilege_wear_notification",async(e,i)=>(window.location.reload(),(null==i?void 0:i.toast_text)&&A.F.info(null==i?void 0:i.toast_text),(0,s.Vp)())),i("toast",(e,i)=>{let{text:t}=i;try{return A.F.info(t),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL)}})},V=(e,i,t)=>{i("close",(i,t)=>{let{url:o}=t,n=o;if(!n){var r;n=null==i?void 0:null===(r=i.globalProps)||void 0===r?void 0:r.originUrl}let{activityIndicatorStore:{closeLandPage:a}}=e;return a(n),(0,s.Vp)()})};t("779788"),t("268917");var O=t("623527"),N=t("874005"),G=t("104013"),D=t("578580"),R=t("72405"),F=t("847191"),B=t("987475"),x=(e,i,t)=>{let o=async(i,o)=>{let{gift_id:r,gift_count:a,gift_source:l,args:u,gift_buff_level:c=0,to_user_id:_,send_scene:h=1,send_type:m=4}=o;try{var f,p,y,S,L,I,P,k,b,C,w,U,T,V,G,R,F,B,x,K,j,H,Y,q,$,Z,W;let o;let{userStore:{userInfo:J},roomStore:{roomInfo:Q},rechargeStore:{rechargeAuthStatus:z}}=e;if(!a)return(0,s.bG)(s.MU.FAIL);let X=_||v()(Q,"anchor.id_str"),ee=v()(Q,"room.id_str");if(v()(J,"id_str")===X)return A.F.info("不可为自己送礼"),(0,s.bG)(s.MU.FAIL);let ei=u?{plugin_id:JSON.stringify(u.plugin_id),plugin_info:JSON.stringify(u.plugin_info),toolbar_card_name:u.toolbar_card_name}:{};if(!ee)return(0,s.bG)(s.MU.FAIL);let et={gift_id:r,count:a,room_id:ee,to_room_id:ee,to_user_id:X,to_user_ids:"",send_type:m,send_scene:h,gift_source:0};D.kg.event("activity_indicator_send_gift",(0,d._)((0,n._)({},et),{is_client:(0,g.DT)()}));let eo=await (0,N.hF)((0,n._)((0,d._)((0,n._)({},et),{buff_level:c,tags_extra:(e=>{try{return JSON.stringify(e)}catch(e){return JSON.stringify({})}})({gift_source:l}),to_episode_id:v()(Q,"room.episode_extra.episode_id_str",0)||0}),ei));try{let e=(null==eo?void 0:null===(y=eo.data)||void 0===y?void 0:y.data.diy_item_info)||"{}";o=JSON.parse(e)}catch(e){}let en=null==eo?void 0:null===(f=eo.data)||void 0===f?void 0:f.status_code,er=await N.sb({});if(0===en){let s=v()(e,"giftStore.giftList",[]),d=v()(e,"giftStore.effectList",[]),u=(0,M.mL)(v()(eo.data,"data"),s,d,J,o,a);null==e||null===(L=e.giftStore)||void 0===L||null===(S=L.setGiftMessages)||void 0===S||S.call(L,u);let{data:c,logId:_}=er,h=v()(c,"status_code");if(0===h){let i=v()(c,"data.diamond",0);null==e||null===(w=e.giftStore)||void 0===w||null===(C=w.setBalance)||void 0===C||C.call(w,i)}else D.kg.event(`[${O.Tn.Error}]${O.Mo.LiveBalanceError}`,(0,n._)({statusCode:h,logId:null!=_?_:"",is_client:(0,g.DT)()},c)),A.F.info(v()(c,"data.prompts","获取余额失败，请稍后重试")),D.kg.error("获取余额失败",c,_);t.publishEvent(i,{eventName:"H5_sendGiftStatusChange",params:{gift_list:[{gift_id:Number(r),count:a}]}}),null==e||null===(P=e.eventStore)||void 0===P||null===(I=P.giftEvent)||void 0===I||I.liveGiftSendEvent({gift_id:r,combo_cnt:v()(eo.data,"data.combo_count"),group_cnt:v()(eo.data,"data.group_count"),gift_source:l,money_per_unit:v()(eo.data,"data.gift_struct.diamond_count"),gift_cnt:a,money:a*v()(eo.data,"data.gift_struct.diamond_count"),is_fans_club_gift:"0",to_user_id:v()(Q,"anchor.id_str"),full_seats_cnt:1,is_from_container:0}),null==e||null===(b=e.eventStore)||void 0===b||null===(k=b.giftEvent)||void 0===k||k.liveConsumeEvent({statusCode:en,amount:a*v()(eo.data,"data.gift_struct.diamond_count"),is_client:(0,g.DT)(),type:"gift_send"})}else if(D.kg.event(`[${O.Tn.Error}]${O.Mo.LiveGiftSendCodeNotZero}`,(0,n._)({statusCode:en,logId:null!==(U=null==eo?void 0:eo.logId)&&void 0!==U?U:"",is_client:(0,g.DT)()},null==eo?void 0:eo.data)),20003===en)await (0,M.m8)("登录后即可送礼","live_gift");else if(40001===en){if(!z)return(0,s.Vp)({error_code:null==eo?void 0:null===(B=eo.data)||void 0===B?void 0:B.status_code});let i=(null==e?void 0:null===(G=e.giftStore)||void 0===G?void 0:null===(V=G.giftList)||void 0===V?void 0:null===(T=V.find(e=>Number(e.id)===Number(r)))||void 0===T?void 0:T.price)||0;null==e||null===(F=e.giftStore)||void 0===F||null===(R=F.handleRecharge)||void 0===R||R.call(F,{type:"balance",balance:i-e.giftStore.balance,amount:i})}else 42201===en?A.F.info("为保障账号和资金安全，请先前往抖音app完成身份验证"):42202===en?A.F.info("为保障账号和资金安全，请先前往抖音app完成身份核对"):(A.F.info((null==eo?void 0:null===(K=eo.data)||void 0===K?void 0:null===(x=K.data)||void 0===x?void 0:x.prompts)||"送礼失败，请稍后重试"),D.kg.event(`[${O.Tn.Error}]${O.Mo.LiveSendGiftError}`,(0,n._)({statusCode:en,logId:null!==(j=null==eo?void 0:eo.logId)&&void 0!==j?j:"",is_client:(0,g.DT)()},null==eo?void 0:eo.data)));if((null==eo?void 0:null===(p=eo.data)||void 0===p?void 0:p.status_code)===40001)return A.F.info("余额不足，请充值后再试"),(0,s.Vp)({error_code:null==eo?void 0:null===(H=eo.data)||void 0===H?void 0:H.status_code});{let t=(null===(Y=i.globalProps)||void 0===Y?void 0:Y.resolvedUrl)||"";return e.linkmicStore.isGroupLive&&t.indexOf("compete_card_pc.json")>0&&_&&(e.linkmicStore.setChoosePeopleArr([_]),E.emit(E.EVENT.selectGroupLiveAnchor,[_])),(0,s.Vp)({error_code:null==eo?void 0:null===(q=eo.data)||void 0===q?void 0:q.status_code,error_msg:null!==(W=null==eo?void 0:null===(Z=eo.data)||void 0===Z?void 0:null===($=Z.data)||void 0===$?void 0:$.prompts)&&void 0!==W?W:""})}}catch(e){return(0,s.bG)(s.MU.FAIL)}};i("sendGift",o),i("getGiftGuestListData",(i,t)=>{try{var o,n,r,a;let{choosePeopleList:i,choosePeopleArr:t,choosePeopleAll:l,linkStatus:d}=e.linkmicStore,{roomInfo:u}=e.roomStore,c=null==e?void 0:null===(o=e.linkmicStore)||void 0===o?void 0:o.allowSendGiftGuest,_=Object.values(i).filter(e=>{var i,t,o;return!!c||(null===(t=e.user)||void 0===t?void 0:null===(i=t.user)||void 0===i?void 0:i.id_str)===(null==u?void 0:null===(o=u.anchor)||void 0===o?void 0:o.id_str)}).map(e=>{var i,t,o,n,r,a,l,s;let d="0";(null===(t=e.user)||void 0===t?void 0:null===(i=t.content)||void 0===i?void 0:i.linkmic_audience_content)?d=e.user.content.linkmic_audience_content.fan_ticket_fuzzy_str||"0":(null===(n=e.user)||void 0===n?void 0:null===(o=n.content)||void 0===o?void 0:o.linkmic_content)&&(d=e.user.content.linkmic_content.fan_ticket||"0");let c=4;return String(null===(a=e.user)||void 0===a?void 0:null===(r=a.user)||void 0===r?void 0:r.id_str)===String(null==u?void 0:null===(l=u.anchor)||void 0===l?void 0:l.id_str)&&(c=2),{count:d,identifier:c,user:JSON.stringify(null===(s=e.user)||void 0===s?void 0:s.user)}});if(d===R.cK.NOT_LINK)return(0,s.Vp)({data:{is_all_mic:!1,enable_all_mic:!1,current_user:null==u?void 0:null===(a=u.anchor)||void 0===a?void 0:a.id_str,current_user_list:(0,G.toJS)(t),guest_list:JSON.stringify(_),connection_type:""}});let v=Object.values(i),h={is_all_mic:l,enable_all_mic:l,current_user:(null==v?void 0:null===(r=v[0].user)||void 0===r?void 0:null===(n=r.user)||void 0===n?void 0:n.id_str)||"",current_user_list:(0,G.toJS)(t),guest_list:JSON.stringify(_),connection_type:""};return(0,s.Vp)({data:h})}catch(e){return(0,s.bG)(s.MU.FAIL)}}),i("closeGiftWebView",(e,i)=>{E.emit(E.EVENT.LynxEffectPlayDone,{})}),i("dismissGiftPanel",(e,i)=>(0,s.Vp)({})),i("captureAssemblyGift",(e,i)=>{let{pluginList:t,giftId:o,mainTitle:r,imageUrl:a,price:l,subTitle:u}=i,c={giftId:o,mainTitle:r,imageUrl:a,price:l,subTitle:u,pluginList:null==t?void 0:t.map(e=>({plugin_id:e.pluginId}))},_=(0,F.$o)(B.LocalStorageKeys.LiveRecentSendGift)||{},v=(null==_?void 0:_[o])||[];v.push(c);let h=v.slice(-3);return(0,F.qQ)(B.LocalStorageKeys.LiveRecentSendGift,(0,d._)((0,n._)({},_),{[o]:h})),E.emit(E.EVENT.UpdateRecentSendGift,c),(0,s.Vp)()}),i("openMysteryLandPage",()=>{var i,t;null==e||null===(t=e.activityIndicatorStore)||void 0===t||null===(i=t.JSBInstance)||void 0===i||i.openScheme({url:"sslocal://webcast_webview?type=popup&gravity=bottom&height_percent=75&web_bg_color=%23ff161823&url=https%3A%2F%2Flf-webcast-gr-sourcecdn.bytegecko.com%2Fobj%2Fbyte-gurd-source-gr%2Fwebcast%2Fmono%2Fh5%2Fwebcast_personal_center%2Fpages%2Fspyman_detail.html%3Fshow_back_icon%3D1%26origin%3Dpersonal_center",_reset:!0})}),i("getAssetsPath",(i,t)=>{let{giftStore:{effectList:o}}=e,{assets_ids:n}=t,r={};try{n.forEach(e=>{let i=o.find(i=>i.id===e);r[e]={code:2,path:null==i?void 0:i.src}});return(0,s.Vp)({data:{data:{assetsPath:r}}})}catch(e){return(0,s.bG)(s.MU.FAIL)}})},K=t("922894"),j=(e,i,t)=>{let o=null,n=null,r=async()=>o?o:n?await n:(n=(async()=>{var e,i,t,n,r;let a=await (0,K.Mr)({device_platform:"web",aid:"6383"});if((null==a?void 0:a.status)!==200||(null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.status_code)!==0)return D.ZN.error(O.Mo.LiveSettingError,{content:{statusCode:null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.status_code,logId:null!==(r=a.logId)&&void 0!==r?r:"",is_client:(0,g.DT)(),data:null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.data}}),null;{let e=null==a?void 0:null===(i=a.data)||void 0===i?void 0:i.data;return o=e,e}})(),await n);i("getClientSetting",async(e,i)=>{if(!i.key)return(0,s.bG)(s.MU.FAIL);let t=await r();return t?(0,s.Vp)({data:{[i.key]:t[i.key]}}):(0,s.bG)(s.MU.FAIL)})},H=t("611243"),Y=t("544406"),q=(e,i,t)=>{let o=async i=>new Promise(async(t,o)=>{let{rechargeStore:{rechargeAuthStatus:n}}=e,{showRecharge:l}=(0,H.y)();if(n){var d;let e=await (null===(d=Y.a.getIAPRechargeParams)||void 0===d?void 0:d.call(Y.a));l({type:"recharge",balance:(null==i?void 0:i.money_diff)||0,amount:0,theme:(0,r.Dr)(a.Q.getItem({sKey:B.CookieKeys.Theme})),requestPublicParams:e,onSuccess(){t((0,s.Vp)({recharge_code:1}))},onClose(){o((0,s.bG)(s.MU.FAIL,"close recharge dialog",{recharge_code:0}))}})}else o((0,s.bG)(s.MU.FAIL,"need login",{recharge_code:0}))});i("openLiveRecharge",async(i,t)=>{let{args:o}=t;try{let{rechargeStore:{rechargeAuthStatus:i}}=e,{showRecharge:t}=(0,H.y)();if(i){var n;let e=await (null===(n=Y.a.getIAPRechargeParams)||void 0===n?void 0:n.call(Y.a));t({type:"recharge",balance:(null==o?void 0:o.money_diff)||0,amount:0,theme:(0,r.Dr)(a.Q.getItem({sKey:B.CookieKeys.Theme})),requestPublicParams:e})}return(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL)}}),i("openRechargeDialog",o)},$=t("906177"),Z=t("75978"),W=(e,i,t)=>{let o=async(e,i)=>{try{return(0,Z.p)().then(e=>{var t,o;e((0,n._)({headerText:"登录后即可参与互动",success:async()=>{!(0,$.I)()&&window.location.reload()},next:`https://${null===(o=window)||void 0===o?void 0:null===(t=o.location)||void 0===t?void 0:t.host}`,enterMethod:""},i))}),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL)}};i("login",async(i,t)=>{let{userStore:n}=e,{userInfo:r}=n;if((null==r?void 0:r.user_id_str)||(null==r?void 0:r.sec_uid)||(null==r?void 0:r.short_id))return(0,s.Vp)({status:0});{let e=await o(i,{});return{code:e.code,data:{status:e.code===s.MU.SUCCESS?1:2},msg:""}}}),i("openLoginPanel",o)},J=(e,i,t)=>{i("sendRedEnvelopSuccess",async()=>{try{let{userStore:o}=e,{userInfo:n}=o;if(!((null==n?void 0:n.user_id_str)||(null==n?void 0:n.sec_uid)||(null==n?void 0:n.short_id)))return(0,s.bG)(s.MU.FAIL);let{data:r}=await N.sb({}),a=v()(r,"status_code");if(0!==a)return(0,s.bG)(s.MU.FAIL);{var i,t;let o=v()(r,"data.diamond",0);return null==e||null===(t=e.giftStore)||void 0===t||null===(i=t.setBalance)||void 0===i||i.call(t,o),(0,s.Vp)()}}catch(e){return(0,s.bG)(s.MU.FAIL)}})},Q=t("873791"),z=(e,i,t)=>{let o=new Q.N,n=async(e,i)=>{let{eventName:t,callback:n}=i;try{return o.on(t,n),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL,"fail")}},r=async(e,i)=>{let{eventName:t,params:n}=i;try{return o.emit(t,n),"subscription.vipsendnewpurchase"===t&&E.emit(E.EVENT.VipRechargeSuccess),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL,"fail")}},a=async(e,i)=>{let{eventName:t,listener:n}=i;try{return o.off(t,n),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL,"fail")}};i("on",async(e,i)=>{let{params:t,cb:n}=i;try{if("string"==typeof t)return o.on(t,n),(0,s.Vp)();return o.on(t.eventName,n),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL,"fail")}}),i("off",a),i("subscribeEvent",n),i("publishEvent",r),i("unSubscribeEvent",a),i("webcastBroadcast",r)},X=(e,i,t)=>{i("updateWalletInfo",(e,i)=>{try{return N.sb({}),(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL)}})},ee=t("448721"),ei=(e,i,t)=>{i("userAction",async(i,t)=>{let{type:o,args:{user_id:n=""}}=t;try{let i;let t=v()(e,"roomStore.roomInfo.roomId",""),r=v()(e,"userStore.userInfo.sec_uid",""),a=v()(e,"roomStore.roomInfo.anchor.id_str"),l=v()(e,"roomStore.setFollowStatus",()=>{});if("follow"===o?i=await (0,ee.ZN)({to_user_id:String(n),current_room_id:t,sec_user_id:r,sec_to_user_id:"",channel_id:200}):"unfollow"===o&&(i=await (0,ee.fv)({to_user_id:String(n),current_room_id:t,sec_user_id:r,sec_to_user_id:""})),String(a)===String(n)&&i){let e=v()(i,"data.data.follow_status",0);l(e)}if(10033===i.data.status_code)return(0,s.bG)(s.MU.FAIL,"fail",{code:i.data.status_code,prompts:i.data.data.prompts});return(0,s.Vp)()}catch(e){return(0,s.bG)(s.MU.FAIL)}})},et=t("556731"),eo=t("760640"),en=t("897004"),er=(e,i,t)=>{i("sendProps",async(i,t)=>{let{propID:o,count:r,gift_source:a}=t;try{var l,u,c,_;let{userStore:{userInfo:i},roomStore:{roomInfo:t},giftStore:{giftList:v,effectList:h,giftPanelShowFrom:m,setGiftMessages:f},linkmicStore:{choosePeopleArr:g,useChoosePeopleFunc:p},eventStore:{giftEvent:y}}=e,L=(null==i?void 0:i.id_str)||(null==i?void 0:i.sec_uid)||(null==i?void 0:i.short_id),I=null==t?void 0:t.roomId,P=null==t?void 0:null===(l=t.anchor)||void 0===l?void 0:l.id_str,k=!p||(null==g?void 0:g.join(""))===P,b=k?P:null==g?void 0:g[0];if(!L)return A.F.info("请先登录"),(0,s.bG)(s.MU.FAIL);let w=await et.E({count:r,room_id:I,to_room_id:I,to_uid:b,prop_def_id:o,send_prop_scene:k?en.Az.NORMAL:en.Az.LINK}),E=null==w?void 0:null===(u=w.data)||void 0===u?void 0:u.status_code,U=null==w?void 0:null===(c=w.data)||void 0===c?void 0:c.data;if(0!==E)return A.F.info((null==U?void 0:U.prompts)||"赠送道具失败，请稍后重试"),(0,s.bG)(s.MU.FAIL);{let t=(0,M.mS)(null==U?void 0:U.gift_id,v),l=(0,M.mL)(U,v,h,i,r);return f(l),null==y||null===(_=y.liveGiftSendEvent)||void 0===_||_.call(y,{gift_id:null==U?void 0:U.gift_id,combo_cnt:null==U?void 0:U.combo_count,group_cnt:null==U?void 0:U.group_count,gift_source:C._W.GIFT_BAG,money_per_unit:t.price,gift_cnt:r,money:r*t.price,is_fans_club_gift:(0,eo.dU)(null==U?void 0:U.gift_id)?"1":"0",to_user_id:String(P),full_seats_cnt:1,is_from_container:0,gift_show_from:m,pageType:C.kQ.PROP,tab_name:C.BS[C.kQ.PROP]||C.kQ.PROP}),window.collectEvent("livesdk_send_prop",(0,d._)((0,n._)({},(0,S.Kj)(e)),{prop_id:o,gift_id:null==U?void 0:U.gift_id,gift_source:a})),(0,s.Vp)()}}catch(e){return(0,s.bG)(s.MU.FAIL)}})};let ea={},el=e=>{let i=function(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.H5.PUBLIC;(0,s.Z1)(e,i,t),ea[e]=i};J(e,i,ea),h(e,i,ea),f(e,i,ea),p(e,i,ea),L(e,i,ea),U(e,i,ea),T(e,i,ea),V(e,i,ea),x(e,i,ea),j(e,i,ea),q(e,i,ea),W(e,i,ea),z(e,i,ea),X(e,i,ea),ei(e,i,ea),er(e,i,ea)};var es=t("738712"),ed=t.n(es),eu={live:1,1:"live"};(0,s.$l)(!0);class ec{initSdk(){var e,i,t;let o=null===(e=this._store)||void 0===e?void 0:e.roomStore,n=null===(i=this._store)||void 0===i?void 0:i.userStore;null===(t=this._store)||void 0===t||t.activityIndicatorStore,v()(o,"roomInfo.roomId"),v()(o,"roomInfo.anchor.id_str"),v()(o,"roomInfo.anchor.sec_uid");let l=v()(n,"userInfo.id_str");v()(n,"userInfo.sec_uid"),(0,s.S1)({injection:{user:{hasLogin:()=>void 0!==l,login:()=>Promise.resolve(),logout:()=>Promise.resolve(),getUserInfo:()=>{var e;let{id_str:i,sec_uid:t,nickname:o,avatar_large:r,telephone:a,short_id:l}=v()(n,"userInfo",{});return{userId:i,secUid:t,uniqueId:"",nickname:o,avatarURL:null==r?void 0:null===(e=r.url_list)||void 0===e?void 0:e[0],boundPhone:a,shortId:l?String(l):""}}},appInfo:()=>{var e,i;return{appID:"6383",appName:"douyin_pc",appVersion:null!==(e=window.version)&&void 0!==e?e:"unknown",appLang:null!==(i=navigator.language)&&void 0!==i?i:"unknown",deviceID:v()(n,"odin.user_unique_id",""),channel:"douyin_pc",isTeenMode:!1,appTheme:(0,r.Dr)(a.Q.getItem({sKey:B.CookieKeys.Theme})),updateVersionCode:"0.0.1",screenWidth:374}}},extraGlobalProps:{os:"Web"},options:{slardar:{bid:"anniex_web_webcast"}}})}getCommonParams(){var e,i,t,o,n,r,a,l;let s=null===(e=this._store)||void 0===e?void 0:e.roomStore,d=null===(i=this._store)||void 0===i?void 0:i.userStore;return{room_id:v()(s,"roomInfo.roomId",""),user_id:v()(d,"userInfo.id_str",""),sec_user_id:v()(d,"userInfo.sec_uid",""),anchor_id:v()(s,"roomInfo.anchor.id_str",""),anchor_id_str:v()(s,"roomInfo.anchor.id_str",""),sec_anchor_id:v()(s,"roomInfo.anchor.sec_uid",""),enter_from_merge:null===(o=window)||void 0===o?void 0:null===(t=o.__INVISIBLE_QUERY__)||void 0===t?void 0:t.enter_from_merge,request_id:null===(r=window)||void 0===r?void 0:null===(n=r.__INVISIBLE_QUERY__)||void 0===n?void 0:n.request_id,enter_method:null===(l=window)||void 0===l?void 0:null===(a=l.__INVISIBLE_QUERY__)||void 0===a?void 0:a.enter_method,user_unique_id:v()(d,"odin.user_unique_id","")}}appendCommonParams(e,i,t){let o=e.split("?"),n=I.parse(o[1]),r=I.stringify(Object.assign(n,i,t));return`${o[0]}?${r}`}getInitData(e){return this._initData.get(e)}openLandPage(e){var i,t,o,r,a,l,s,d,u;let{url:c,extraParams:_,reset:v=!1,initData:h={},forceCover:m}=e,f=c.split("?"),g=I.parse(f[1]),{url:p}=g,y=this.getCommonParams(),S=this.appendCommonParams(p,y,(0,n._)({__isDouyinPC:"true"},_||{}));g.url=S;let L=`${f[0]}?${I.stringify(g)}`,A=null===(i=this._store)||void 0===i?void 0:i.activityIndicatorStore.currentLandPage.indexOf(L);if(A>=0){let e=[...(null===(o=this._store)||void 0===o?void 0:null===(t=o.activityIndicatorStore)||void 0===t?void 0:t.currentLandPage)||[]];e.splice(A,1),null===(a=this._store)||void 0===a||null===(r=a.activityIndicatorStore)||void 0===r||r.setCurrentLandPage(e,!1)}else v?null===(l=this._store)||void 0===l||l.activityIndicatorStore.setCurrentLandPage([L],!0):null===(u=this._store)||void 0===u||u.activityIndicatorStore.setCurrentLandPage([...(null===(d=this._store)||void 0===d?void 0:null===(s=d.activityIndicatorStore)||void 0===s?void 0:s.currentLandPage)||[],L],!1,m);this._initData.set(L,h)}isSupportLynx(){var e,i;let t=new(ed())().getResult(),o=null==t?void 0:null===(e=t.browser)||void 0===e?void 0:e.name,n=null==t?void 0:null===(i=t.browser)||void 0===i?void 0:i.version;switch(o){case"Chrome":case"Edge":return(0,l.y)(n,">","84.0.0.0");case"Safari":return(0,l.y)(n,">","14.1.0.0");case"Opera":return(0,l.y)(n,">","70.0.0.0");case"Firefox":return(0,l.y)(n,">","79.0.0.0");default:return!0}}getLynxViewSchema(e){let i=encodeURIComponent(e);return`sslocal://lynxview?url=${i}&type=popup&gravity=bottom&height_percent=75&web_bg_color=ff060a19&radius=23&radius_bottom_right=0&radius_bottom_left=0&enable_preload=all&add_safe_area_height=0&use_wk_falcon=2`}static reset(){let e=Object.keys(ea);e.length&&e.forEach(e=>{(0,s.ln)(e),delete ea[e]})}static broadcastEvent(e,i){(0,s.broadcastEvent)(e,i)}constructor(e,i=""){(0,o._)(this,"_containerList",new Map),(0,o._)(this,"_store",null),(0,o._)(this,"_roomId",""),(0,o._)(this,"_initData",new Map),this._store=e,this._roomId=i,this.initSdk(),el(this._store)}}},784414:function(e,i,t){t.d(i,{Kj:function(){return a},L7:function(){return s},VK:function(){return l}}),t(209955),t(779788),t(675373),t(413806),t(826893);var o=t(645260),n=t.n(o),r=t(567754);let a=e=>{var i,t,o,r,a,l;return{room_id:n()(e,"roomStore.roomInfo.roomId",""),user_id:n()(e,"userStore.userInfo.id_str",""),sec_user_id:n()(e,"userStore.userInfo.sec_uid",""),anchor_id:n()(e,"roomStore.roomInfo.anchor.id_str",""),anchor_id_str:n()(e,"roomStore.roomInfo.anchor.id_str",""),sec_anchor_id:n()(e,"roomStore.roomInfo.anchor.sec_uid",""),enter_from_merge:null===(t=window)||void 0===t?void 0:null===(i=t.__INVISIBLE_QUERY__)||void 0===i?void 0:i.enter_from_merge,request_id:null===(r=window)||void 0===r?void 0:null===(o=r.__INVISIBLE_QUERY__)||void 0===o?void 0:o.request_id,enter_method:null===(l=window)||void 0===l?void 0:null===(a=l.__INVISIBLE_QUERY__)||void 0===a?void 0:a.enter_method,user_unique_id:n()(e,"userStore.odin.user_unique_id","")}},l=e=>{if(e instanceof Error){var i;return`${e.name}: ${e.message}
${null!==(i=e.stack)&&void 0!==i?i:"无堆栈信息"}`}if("object"==typeof e&&null!==e){if("message"in e&&"string"==typeof e.message)return e.message;try{return JSON.stringify(e)}catch(e){return"[不可序列化对象]"}}return String(e)},s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{if(0>e.indexOf("sslocal://webcast_redirect"))return e;let i=await fetch("https://lf-webcast-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/cdn/api/scheme_config/api.roma.config.json"),t=await i.json(),o=r.parse(e.split("?")[1]);return t.redirect_rules[o.entry][0].location}catch(e){return!1}}},861027:function(e,i,t){t.d(i,{t:function(){return u}});var o=t(563097);t(88648);var n=t(309931),r=t(734123),a=t(851190),l=t(28811),s=t(393828);let d=e=>{let{title:i,content:t,confirmBtnText:n="确定",closeBtnText:r="取消",onConfirm:d,onClose:u,showCancel:c=!0}=e;return(0,o.jsx)(l.Z,{visible:!0,className:s.default.mask,title:i,onCancel:u,children:(0,o.jsxs)("div",{className:s.default.wrap,children:[(0,o.jsx)("div",{className:s.default.content,children:t}),(0,o.jsxs)("div",{className:s.default.operation,children:[c&&(0,o.jsx)(a.zx,{onClick:()=>{u&&u()},children:r}),(0,o.jsx)(a.zx,{onClick:()=>{d&&d()},children:n})]})]})})},u=function(){let e,i,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{elementClass:a="confirm-modal"}=t,l=()=>{e&&i&&(r.Util.removeClass(i,a),n.unmountComponentAtNode(i),e.removeChild(i),e.style.overflow="")};return{showModal:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{title:s,content:u,confirmBtnText:c,closeBtnText:_,onConfirm:v,onClose:h}=t,m=async()=>{v&&await v(),l()},f=async()=>{h&&await h(),l()};e=document.fullscreenElement||document.body,!(i=r.Util.findDom(e,`.${a}`))&&(i=document.createElement("div"),r.Util.addClass(i,a),e.appendChild(i),e.style.overflow="hidden",n.render((0,o.jsx)(d,{title:s,content:u,confirmBtnText:c,closeBtnText:_,onConfirm:m,onClose:f}),i))},destroyModal:l}}},28811:function(e,i,t){var o=t(563097),n=t(713097),r=t.n(n),a=t(146725),l=t(115627),s=t(477667),d=t(88648),u=t(682);i.Z=e=>{let{children:i,title:t,visible:n,className:c,onCancel:_,closeable:v=!0}=e,h=d.useCallback(()=>{_&&_(!1)},[_]);return n?(0,o.jsx)(a.T6,{className:r()(u.default.mask,c),children:(0,o.jsxs)("div",{className:u.default.modalContainer,children:[v&&(0,o.jsx)("div",{className:u.default.close,onClick:h,children:(0,o.jsx)(l.Z,{width:36,height:36,src:s.Z,color:"#A9AAB7"})}),t&&(0,o.jsx)("div",{className:u.default.title,children:t}),(0,o.jsx)("div",{className:u.default.content,children:i})]})}):null}},460264:function(e,i,t){t.d(i,{FL:function(){return c},Yt:function(){return d},s1:function(){return u}}),t(429532);var o,n=t(362706),r=t(582746),a=t(956277),l=t(782580);let s={headerText:"登录后即可参与互动",next:"undefined"!=typeof location?`https://${null===(o=location)||void 0===o?void 0:o.host}`:void 0,enterMethod:"live_room"},d=()=>{var e;let i=(0,r.Z)(),t=null==i?void 0:null===(e=i.userStore)||void 0===e?void 0:e.userInfo,o=!!((null==t?void 0:t.id_str)||(null==t?void 0:t.id));return(0,a.Cg)()&&!o};function u(e){return i=>{var t,o,r;if(!(null==i?void 0:i.ignoreABCheck)&&!(0,l.getLoginLimitAB)(e))return!0;let a=null==e?void 0:null===(t=e.userStore)||void 0===t?void 0:t.userInfo;if((null==a?void 0:a.id_str)||(null==a?void 0:a.id))return!0;let d=Object.assign({headerText:"登录后即可参与互动",success:async()=>{window.location.reload()},next:`https://${null===(r=window)||void 0===r?void 0:null===(o=r.location)||void 0===o?void 0:o.host}`},s,i);return(0,n.x)(d),!1}}function c(){return u((0,r.Z)())}},956277:function(e,i,t){t.d(i,{Cg:function(){return r}});var o=t(782580),n=t(582746);let r=()=>(0,o.getLoginLimitAB)((0,n.Z)())},856868:function(e,i,t){t.d(i,{P:function(){return A},o:function(){return I}});var o=t(134761),n=t(520739);t(874386),t(284961),t(826893),t(675373);var r=t(970415),a=t(497364),l=t(509090),s=t(611243),d=t(744376),u=t(75978),c=t(578580),_=t(874005),v=t(755012),h=t(119513),m=t(448721),f=t(645260),g=t.n(f),p=t(623527),y=t(828782),S=t(906177),L=t(544406),A={Success:1,1:"Success",Failed:0,0:"Failed",InvalidParam:-3,"-3":"InvalidParam"};class I{constructor(e,i,t,f){var A=this;(0,o._)(this,"_containerName",void 0),(0,o._)(this,"_eventListenerMap",new Map),(0,o._)(this,"_store",null),(0,o._)(this,"_roomId",""),(0,o._)(this,"_container",null),(0,o._)(this,"openScheme",async e=>{let{url:i,isLiveModal:t=!1}=e;try{let{url:e}=(0,a.zP)(i);return this._container.open(e,void 0,void 0,void 0,t),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"openUrl",async e=>{let{url:i,position:t,garfishConfig:o,globalProps:n}=e;try{return this._container.open(i,t,o,n),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"close",async e=>{try{var i;let t=null!==(i=null==e?void 0:e.containerName)&&void 0!==i?i:this._containerName;return this.publishEvent({eventName:"close",params:{containerName:t}}),this._containerName&&this._container.close(t),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"fetch",async e=>{let{params:i,data:t,headers:o,url:n="",method:a="GET"}=e;try{let e=await (0,r.ZP)({url:n.replace(/^https?:\/\/[^/]+/,""),method:a,headers:o,data:t,params:i});return{code:1,raw:null==e?void 0:e.data}}catch(e){return{code:0}}}),(0,o._)(this,"sendLogV3",async e=>{let{eventName:i,params:t}=e;try{return window.collectEvent(i,(0,n._)({},(0,d.m6)(),(0,a.Kj)(this._store),t)),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"on",async e=>{let{eventName:i,callback:t}=e;try{return window.Garfish.channel.on(i,t),this._eventListenerMap.set(i,t),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"webcastBroadcast",async e=>{let{eventName:i,params:t}=e;try{return window.Garfish.channel.emit(i,t),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"subscribeEvent",async e=>{let{eventName:i,callback:t}=e;try{return window.Garfish.channel.on(i,t),this._eventListenerMap.set(i,t),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"publishEvent",async e=>{let{eventName:i,params:t}=e;try{return window.Garfish.channel.emit(i,t),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"unSubscribeEvent",async e=>{let{eventName:i,listener:t}=e;try{return window.Garfish.channel.off(i,t),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"setStorage",async e=>{let{key:i,value:t}=e;try{return localStorage.setItem(`${a.cp}_${i}`,t),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"getStorage",async e=>{let{key:i}=e;try{var t;return{code:1,value:null!==(t=localStorage.getItem(`${a.cp}_${i}`))&&void 0!==t?t:""}}catch(e){return{code:0,value:""}}}),(0,o._)(this,"removeStorage",async e=>{let{key:i}=e;try{return localStorage.removeItem(`${a.cp}_${i}`),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"toast",async e=>{let{text:i}=e;try{return l.F.info(i),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"openLiveRecharge",async()=>{try{var e;let{rechargeStore:{rechargeAuthStatus:i}}=this._store,{showRecharge:t}=(0,s.y)(),o=await (null===(e=L.a.getIAPRechargeParams)||void 0===e?void 0:e.call(L.a));return i&&t({type:"recharge",balance:0,amount:0,requestPublicParams:o}),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"openLoginPanel",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(0,u.p)().then(i=>{var t,o;i((0,n._)({headerText:"登录后即可参与互动",success:async()=>{!(0,S.I)()&&window.location.reload()},next:`https://${null===(o=window)||void 0===o?void 0:null===(t=o.location)||void 0===t?void 0:t.host}`,enterMethod:""},e))}),{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"refreshDouCoin",async()=>{try{let{data:o,logId:r}=await _.sb({}),a=g()(o,"status_code");if(0===a){var e,i,t;let n=g()(o,"data.diamond",0);null===(t=this._store)||void 0===t||null===(i=t.giftStore)||void 0===i||null===(e=i.setBalance)||void 0===e||e.call(i,n)}else c.kg.event(`[${p.Tn.Error}]${p.Mo.LiveBalanceError}`,(0,n._)({statusCode:a,logId:null!=r?r:"",is_client:(0,y.DT)()},o)),l.F.info(g()(o,"data.prompts","获取余额失败，请稍后重试")),c.kg.error("获取余额失败",o,r);return{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"sendGift",async e=>{let{gift_id:i,gift_count:t,gift_source:o,send_type:n=4}=e;try{var r,a,s,d,u,c,h,m,f,p,y,S;let{userStore:{userInfo:e},roomStore:{roomInfo:L}}=this._store;if(!t)return{code:0};if(g()(e,"id_str")===g()(L,"anchor.id_str"))return l.F.info("不可为自己送礼"),{code:0};if(!g()(L,"room.id_str"))return{code:0};let A=await (0,_.hF)({gift_id:i,count:t,room_id:g()(L,"room.id_str"),to_room_id:g()(L,"room.id_str"),to_user_id:g()(L,"anchor.id_str"),to_user_ids:"",send_type:n,send_scene:1,gift_source:0,buff_level:0,to_episode_id:g()(L,"room.episode_extra.episode_id_str",0)||0});if(0===A.data.status_code){let n=g()(this._store,"giftStore.giftList",[]),r=g()(this._store,"giftStore.effectList",[]),l=(0,v.mL)(g()(A.data,"data"),n,r,e,t);null===(d=this._store)||void 0===d||null===(s=d.giftStore)||void 0===s||null===(a=s.setGiftMessages)||void 0===a||a.call(s,l),this.refreshDouCoin(),this.publishEvent({eventName:"H5_sendGiftStatusChange",params:{gift_list:[{gift_id:Number(i),count:t}]}}),null===(h=this._store)||void 0===h||null===(c=h.eventStore)||void 0===c||null===(u=c.giftEvent)||void 0===u||u.liveGiftSendEvent({gift_id:i,combo_cnt:g()(A.data,"data.combo_count"),group_cnt:g()(A.data,"data.group_count"),gift_source:o,money_per_unit:g()(A.data,"data.gift_struct.diamond_count"),gift_cnt:t,money:t*g()(A.data,"data.gift_struct.diamond_count"),is_fans_club_gift:"0",to_user_id:g()(L,"anchor.id_str"),full_seats_cnt:1,is_from_container:0})}if((null==A?void 0:null===(r=A.data)||void 0===r?void 0:r.status_code)===40001)return l.F.info("余额不足，请充值后再试"),{code:1,error_code:null==A?void 0:null===(m=A.data)||void 0===m?void 0:m.status_code};return{code:1,error_code:null==A?void 0:null===(f=A.data)||void 0===f?void 0:f.status_code,error_msg:null!==(S=null==A?void 0:null===(y=A.data)||void 0===y?void 0:null===(p=y.data)||void 0===p?void 0:p.prompts)&&void 0!==S?S:""}}catch(e){return{code:0}}}),(0,o._)(this,"getAppInfo",async function(){var e,i;let{}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let{userStore:{odin:i}}=null!==(e=A._store)&&void 0!==e?e:{userStore:{}};return{code:1,aid:"6383",user_id:null==i?void 0:i.user_id,device_id:null==i?void 0:i.user_unique_id,is_mas:!!(0,y.xo)()}}catch(t){let{userStore:{odin:e}}=null!==(i=A._store)&&void 0!==i?i:{userStore:{}};return{code:0,aid:"6383",user_id:null==e?void 0:e.user_id,device_id:null==e?void 0:e.user_unique_id,is_mas:!!(0,y.xo)()}}}),(0,o._)(this,"getBaseInfo",async function(){let{}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let{roomStore:e}=A._store;return{code:1,anchor_info:{nickname:g()(e,"roomInfo.anchor.nickname","")}}}catch(i){let{roomStore:e}=A._store;return{code:0,anchor_info:{nickname:g()(e,"roomInfo.anchor.nickname","")}}}}),(0,o._)(this,"getPaidLiveInfo",async()=>{try{let{paidLiveStore:e}=this._store,i=g()(this._store,"roomStore.roomInfo.anchor.follow_info.follow_status",0),t=g()(this._store,"paidLiveStore.viewType",0),o=i===h.E.FOLLOWING||i===h.E.BOTH;return{code:1,paid_live_info:null==e?void 0:e.paidLiveData,follow_status:Number(o),view_type:Number(t)}}catch(e){return{code:0}}}),(0,o._)(this,"userAction",async e=>{let{type:i,args:{user_id:t=""}}=e;try{let e;let o=g()(this._store,"roomStore.roomInfo.roomId",""),n=g()(this._store,"userStore.userInfo.sec_uid",""),r=g()(this._store,"roomStore.roomInfo.anchor.id_str"),a=g()(this._store,"roomStore.setFollowStatus",()=>{});if("follow"===i?e=await (0,m.ZN)({to_user_id:String(t),current_room_id:o,sec_user_id:n,sec_to_user_id:"",channel_id:0}):"unfollow"===i&&(e=await (0,m.fv)({to_user_id:String(t),current_room_id:o,sec_user_id:n,sec_to_user_id:""})),String(r)===String(t)&&e){let i=g()(e,"data.data.follow_status",0);a(i)}return{code:1}}catch(e){return{code:0}}}),(0,o._)(this,"userInfo",async function(){let{}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let e=g()(window.__STORE__,"userStore.userInfo.id_str","");return{code:1,userInfo:{userID:e}}}catch(e){return{code:0,userInfo:{userID:""}}}}),this._containerName=e,this._store=i,this._roomId=t,this._container=f}}},497364:function(e,i,t){t.d(i,{Kj:function(){return v},Mu:function(){return d},cp:function(){return l},fh:function(){return h},nb:function(){return c},ov:function(){return s},zP:function(){return _},zs:function(){return u}}),t(954372),t(826893),t(927234),t(284961),t(413806);var o=t(246050),n=t(910863),r=t(645260),a=t.n(r);let l="hybrid_container";var s={LONG_TOUCH:0,0:"LONG_TOUCH",RIGHT_PANEL:1,1:"RIGHT_PANEL",COMMON:2,2:"COMMON",CUSTOM:3,3:"CUSTOM"};let d=e=>`${l}_${e.replace(/:|\.|\/|\?|\&|\=|\%|\+|\#/g,"_")}`;function u(e){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="";for(let o=0;o<e;o++){let e=Math.floor(Math.random()*i.length);t+=i.charAt(e)}return t}let c=e=>{var i,t;return null!==(t=null===(i=e.split("?"))||void 0===i?void 0:i[0])&&void 0!==t?t:""},_=e=>{var i,t;return(0,o.D)(null!==(t=null===(i=e.split("?"))||void 0===i?void 0:i[1])&&void 0!==t?t:"")},v=e=>{var i,t,o,n;return{room_id:a()(e,"roomStore.roomInfo.roomId",""),user_id:a()(e,"userStore.userInfo.id_str",""),sec_user_id:a()(e,"userStore.userInfo.sec_uid",""),anchor_id:a()(e,"roomStore.roomInfo.anchor.id_str",""),sec_anchor_id:a()(e,"roomStore.roomInfo.anchor.sec_uid",""),enter_from_merge:null===(t=window)||void 0===t?void 0:null===(i=t.__INVISIBLE_QUERY__)||void 0===i?void 0:i.enter_from_merge,enter_method:null===(n=window)||void 0===n?void 0:null===(o=n.__INVISIBLE_QUERY__)||void 0===o?void 0:o.enter_method,user_unique_id:a()(e,"userStore.odin.user_unique_id",""),currency_name:"钻石",short_currency_name:"钻",currency_full_name:"抖音钻石"}},h=(e,i)=>(0,n.G7)(v(i),e)},906177:function(e,i,t){t.d(i,{I:function(){return a}});var o=t(328155),n=t(441447);let r=()=>{try{let{location:e}=window;return"www.douyin.com"===e.host&&!(0,o.Nr)(e.pathname)}catch(e){return!1}},a=()=>!!r()&&(n.emit(n.EVENT.LivePreviewLoginSuccess),!0)},284979:function(e,i,t){let o;t.d(i,{DS:function(){return y},Dy:function(){return g},Q5:function(){return S},o8:function(){return f},qs:function(){return m},u_:function(){return p},yX:function(){return L}});var n=t(520739),r=t(878389),a=t(368200);t(675373),t(527785);var l=t(563097);t(88648);var s=t(746309),d=t(944189),u=t(338426),c=t(147914),_=t(563278);let v=(0,u.ZP)(()=>Promise.all([t.e("66135"),t.e("28251"),t.e("264"),t.e("26848"),t.e("60770")]).then(t.bind(t,970094)));let h=(o=null,e=>{o&&o.close();let{position:i,popoverProps:t}=e,s=(0,a._)(e,["position","popoverProps"]),u=document.createElement("div");document.body.appendChild(u);let c=(0,d.createRoot)(u),h={close:()=>{var e;c.unmount(),null===(e=u.parentElement)||void 0===e||e.removeChild(u),o=null}};return c.render((0,l.jsx)("div",{children:(0,l.jsx)(v,(0,r._)((0,n._)({},s),{popoverProps:(0,r._)((0,n._)({},t),{defaultVisible:!0}),onClose:h.close,children:(0,l.jsx)("span",{className:_.default.popHolder,style:i})}))})),o=h,h}),m=e=>{let{store:i}=e,t=(0,a._)(e,["store"]),o=(0,c.C)(i);return h((0,n._)({},o,t))},f=async(e,i)=>{try{let t=e.rightPanelStore.rootEl.getBoundingClientRect(),o={height:1,width:1,left:void 0===i.left?t.x:i.left,top:void 0===i.top?t.y:i.top};m((0,r._)((0,n._)({store:e},i),{popoverProps:{position:i.position||"leftTop"},targetUserType:"audience",position:o,clickSource:`h5_${i.source}`,needMask:!0}))}catch(e){(0,s.OK)().sendEvent({name:"JSBOpenProfileError",categories:{error:e,params:i}})}};var g={Follow:"follow",SendGift:"send_gift",ToOtherAnchor:"to_other_anchor",ProfileSetting:"profile_setting",PersonalCenter:"personal_center",FansGroup:"fans_group",At:"mention",Report:"report",Manage:"manage",Mute:"mute",SecondaryFollow:"secondary_follow",FlashSale:"flash_sale",Block:"block",Avatar:"avatar",UserName:"user_name",SmallShopEntrance:"small_shop_entrance",TakeLive:"take_live"},p={PayGrade:"pay_grade",FansClub:"fans_club",GiftHome:"gift_home",Subscription:"subscription",DressSuit:"dress_suit",ShopFansClub:"shop_fans_club",HighScoreSong:"high_score_song",PK:"pk",Match:"match",GiftExhibitionBanner:"gift_exhibition_banner",Shop:"shop",LocalLife:"local_life"},y={SendGift:"send_gift",LinkMic:"link_mic",Like:"like",FlashShopping:"flash_shopping",AnchorUserRelation:"anchor_user_relation",PotentialAnchorUserRelation:"potential_anchor_user_relation",AdventureInvite:"adventure_invite",AdventureList:"adventure_list",More:"more",Comment:"comment",GetSameDressButton:"get_same_dress_button",EnterEffectFloatShow:"enter_effect_float_show",GiftTrayFloatShow:"gift_tray_float_show",VisitorEntrance:"visitor_entrance"},S={LiveAnchorRankHonor:"live_anchor_rank_honor",AuthInfo:"auth_info",WhiteCategoryCert:"white_category_cert",IndustryCertification:"industry_certification",Admin:"admin",ContributorRank:"contributor_rank",CardInterCom:"card_inter_com",GenderAndAge:"gender_and_age",LocationInfo:"location_info",SchoolInfo:"school_info",FollowInfo:"follow_info",Poi:"poi"};let L=e=>[g,p,y,S].reduce((i,t,o)=>{let a=`function_list_${o+1}`,l=Object.values(t).filter(i=>{var t;return!!(null==e?void 0:null===(t=e.getElementsByClassName(i))||void 0===t?void 0:t.length)}).join("|");return(0,r._)((0,n._)({},i),{[a]:l})},{})},147914:function(e,i,t){t.d(i,{C:function(){return m},V:function(){return f}});var o=t(520739);t(675373),t(250440);var n=t(563097);t(88648);var r=t(709606),a=t(53562),l=t(338426),s=t(582746),d=t(490068),u=t(645260),c=t.n(u),_=t(460264),v=t(558452);let h=(0,l.ZP)(()=>Promise.all([t.e("66135"),t.e("28251"),t.e("264"),t.e("26848"),t.e("60770")]).then(t.bind(t,970094))),m=e=>{var i,t,o,n;let{roomStore:{roomInfo:a},userStore:{userInfo:l},activityIndicatorStore:{JSBInstance:s},vipStore:{setIsShowVipPanel:u},fansClubStore:{setFansClubShowStatus:h},linkmicStore:{linkRoomType:m,functionType2:f,setChoosePeopleAll:g,setChoosePeopleArr:p,setFaceRecognitionShow:y,linkMicSeatsRaw:S,groupLiveMemberList:L=[],isPaidLinking:A},singletonStore:{liveContainer:I},giftStore:{setGiftPanelShowFrom:P,setGiftPanelSwitchStatus:k},pkStore:{pkUserIdList:b,pkStatus:M,pkAppData:C,pkTeamCount:w,pkPlayMode:E,pkId:U,pkListData:T},eventStore:{linkmicEvent:V,slardarEvent:O}}=e,N=null==a?void 0:null===(i=a.anchor)||void 0===i?void 0:i.id_str,G=c()(T,"battle_stats.battle_settings.battle_config_setting.team_mode",0);return{anchorId:N,secAnchorId:null==a?void 0:null===(t=a.anchor)||void 0===t?void 0:t.sec_uid,roomId:null==a?void 0:null===(o=a.room)||void 0===o?void 0:o.id_str,currentUid:null==l?void 0:l.id_str,currentSecUid:null==l?void 0:l.sec_uid,openSchema:s.openScheme,liveContainer:I,setFaceRecognitionShow:y,linkmicEvent:V,slardarEvent:O,linkRoomType:m,functionType2:f,isPaidLinking:A,pkStatus:M,team_mode:G,channel_id:null==C?void 0:C.channelId,invite_mode:E,anchor_connect_status:(null==C?void 0:null===(n=C.grids)||void 0===n?void 0:n.length)||-1,pkTeamCount:w,pk_id:U,openVip:()=>{(0,v.Z)("personal_profile")},openFansClub:()=>{h({isShow:!0,source:"profile"})},openGiftPanel:e=>{null==g||g(!1),null==p||p([e]),null==P||P("profile"),null==k||k(r.nN.OPEN_GIFT)},checkIsGuestUser:e=>e!==N&&(b.includes(e)||Object.values(S).some(i=>{var t,o;return(null==i?void 0:null===(o=i.user)||void 0===o?void 0:null===(t=o.user)||void 0===t?void 0:t.id_str)===e})),checkCanShowProfile:e=>{var i,t,o,n;let r=null==a?void 0:a.room;if(null==r?void 0:null===(i=r.room_auth)||void 0===i?void 0:i.UserCard)return!0;let s=null==l?void 0:l.id_str,d=null==l?void 0:null===(t=l.user_attr)||void 0===t?void 0:t.is_admin;if(d||e===N||e===s||s===N)return!0;let u=!!(null==r?void 0:null===(n=r.others)||void 0===n?void 0:null===(o=n.group_live_data)||void 0===o?void 0:o.is_group_live),c=L.some(i=>{var t;return(null==i?void 0:null===(t=i.user)||void 0===t?void 0:t.id_str)===e});return u&&c},isLinkMicManger:(()=>{var e,i;let t=null==l?void 0:null===(e=l.user_attr)||void 0===e?void 0:e.is_admin,o=(null==l?void 0:null===(i=l.user_attr)||void 0===i?void 0:i.admin_privileges)||[];return t&&o.includes(d.s.LinkMicPrivilege)})(),beforeFetchData:(0,_.s1)(e),store:e}},f=(0,a.Pi)(e=>{let i=(0,o._)({},m((0,s.Z)()),e);return(0,n.jsx)(h,(0,o._)({},i))})},558452:function(e,i,t){t.d(i,{R:function(){return l},Z:function(){return s}});var o=t(273312),n=t(582746),r=t(441447),a=t(88648);let l=()=>{let e=(0,o.j)(),{vipStore:i,singletonStore:t,activityIndicatorStore:l,userStore:s}=(0,n.Z)(),{setIsShowVipPanel:d,isShowVipPanel:u}=i,{liveContainer:c}=t,{setCurrentLandPage:_}=l,{pcVipLr3:v}=e;(0,a.useEffect)(()=>{let e=r.listen(r.EVENT.OpenLiveVipLandPage,e=>{let{openSource:i}=e;if(v){var t;let e=`https://lf-webcast-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/lynx/vip_user_core_rl3_douyin/web/pages/panel_v3/template.js?appid=6383&request_page=${i}&initialProps=vip-user-core-rl3-panel-v3-cahce-2256641802902575&user_id=${null==s?void 0:null===(t=s.odin)||void 0===t?void 0:t.user_id}`;null==c||c.openLandPage({url:`sslocal://lynxview?url=${encodeURIComponent(e)}`,reset:!0})}else d({isShow:!0,source:i}),!u&&_([])});return()=>{e()}},[v,d,u,_,c])},s=e=>{r.emit(r.EVENT.OpenLiveVipLandPage,{openSource:e})}},897004:function(e,i,t){t.d(i,{Az:function(){return n},Uz:function(){return o},cf:function(){return r}});var o={GIFT:1,1:"GIFT"},n={NORMAL:1,1:"NORMAL",LINK:2,2:"LINK"};let r=[1]},993305:function(e,i,t){t.d(i,{Z:function(){return a}});var o=t(134761),n=t(104013),r=t(742401);class a{constructor(e){(0,o._)(this,"store",null),(0,o._)(this,"hydrate",e=>{for(let i in e)"store"!==i&&(this[i]=e[i])}),(0,o._)(this,"reset",()=>{this.store=null}),!r.s&&(this.store=e),(0,n.makeObservable)(this,{hydrate:n.action})}}},72405:function(e,i,t){t.d(i,{Fk:function(){return L},SH:function(){return A},ZP:function(){return C},cK:function(){return I},g3:function(){return P},uH:function(){return b},xQ:function(){return k}});var o=t(134761),n=t(520739),r=t(878389);t(874386),t(250440),t(268917),t(779788),t(429532);var a=t(993305),l=t(996990),s=t(513965),d=t(429594),u=t(9034),c=t(509090),_=t(104013),v=t(540686),h=t(266382),m=t(505424),f=t(618618),g=t(104468),p=t(258972),y=t(779145),S=t.n(y);let L=(()=>{let e={};return[...Array(9)].forEach((i,t)=>{e[t]={idx:t}}),e})(),A=(e,i)=>!!Array.isArray(i)&&!!(i.length>0)||e===u.yP.VIDEO_6V6;var I={NOT_LINK:0,0:"NOT_LINK",LINKING:1,1:"LINKING",LINKED:2,2:"LINKED"},P={APPLYING:0,0:"APPLYING",TRUE:1,1:"TRUE",FALSE:2,2:"FALSE"},k={ENABLE_VIDEO:0,0:"ENABLE_VIDEO",ENABLE_AUDIO:1,1:"ENABLE_AUDIO",APPLY:2,2:"APPLY",HIDE:3,3:"HIDE",GROUP_CHOISE:4,4:"GROUP_CHOISE",INVITE_OPEN_CAMERA:5,5:"INVITE_OPEN_CAMERA",INVITE_LINK:6,6:"INVITE_LINK"},b={NONE:0,0:"NONE",ORDER_SING:1,1:"ORDER_SING",SELECT_GUEST:2,2:"SELECT_GUEST"};let M={[typeof l.V0]:void 0,[l.V0.LinkmicPlayMode_OrderSing]:[u.yP.AUDIO_1V8_STAGE,u.yP.AUDIO_1V8,u.yP.AUDIO_GRID,u.yP.VIDEO_DYNAMIC,u.yP.VIDEO_1V6,u.yP.VIDEO_1V8,u.yP.VIDEO_GRID,u.yP.VIDEO_1_V_8,u.yP.VIDEO_1_V_3,u.yP.VIDEO_1_V_6,u.yP.VIDEO_DYNAMIC_FLOAT,u.yP.AUDIO_DOUBLE_C],[l.V0.LinkmicPlayMode_Teamfight]:[u.yP.AUDIO_1V8,u.yP.AUDIO_1V8_STAGE,u.yP.VIDEO_1V8,u.yP.VIDEO_2V4V4],[l.V0.LinkmicPlayMode_DynamicLayout]:[u.yP.VIDEO_DYNAMIC],[l.V0.LinkmicPlayMode_GuestBattle]:[u.yP.VIDEO_1V8],[l.V0.LinkmicPlayMode_KTVSingingChallenge]:[u.yP.VIDEO_1V8],[l.V0.LinkmicPlayMode_NormalPaidLinkmic]:[u.yP.VIDEO_1V8]};class C extends a.Z{get linkRoomTypeHooks(){return this.getLinkRoomType(this.imLinkMicLayout)||this.getLinkRoomType(this.seiLinkMicLayout)}get isLinked(){return 2===this.linkStatus}get linkRoomType(){return this.getLinkRoomType(this.linkMicLayout)}get linkMicLayout(){return 2===this.linkStatus?this.imLinkMicLayout:(this.seiLinkMicLayout===u.yP.AUDIO_1V8||this.seiLinkMicLayout===u.yP.AUDIO_1V8_STAGE||this.seiLinkMicLayout===u.yP.AUDIO_GRID)&&(this.imLinkMicLayout===u.yP.AUDIO_1V8||this.imLinkMicLayout===u.yP.AUDIO_1V8_STAGE||this.imLinkMicLayout===u.yP.AUDIO_GRID||this.imLinkMicLayout===u.yP.VIDEO_6V6||this.imLinkMicLayout===u.yP.AUDIO_DOUBLE_C)?this.imLinkMicLayout:this.seiLinkMicLayout}get isSing(){var e,i;return null===(i=this.orderSingInfo)||void 0===i?void 0:null===(e=i.user_microphone_list)||void 0===e?void 0:e.some(e=>!!(null==e?void 0:e.is_singing))}get enlargedSeatPostion(){let e=2===this.linkStatus?this.imLinkMicSeats:this.seiLinkMicSeats;return(0,h.ut)(e)}get hasEnlargedSeat(){return -1!==this.enlargedSeatPostion}get linkMicSeatsRaw(){return 2===this.linkStatus?this.imLinkMicSeats:this.seiLinkMicSeats}get linkMicSeats(){let e=2===this.linkStatus?this.imLinkMicSeats:this.seiLinkMicSeats;return[u.yP.VIDEO_T1_V_B8,u.yP.VIDEO_6V6].includes(this.linkMicLayout)?e:(0,h.Qx)(e)}get teamfightInfo(){return 2===this.linkStatus?this.imTeamfightInfo:this.seiTeamFightInfo}get isLinkRoom(){return void 0!==this.linkMicLayout}get isDefaultOpenVideo(){return this.linkMicConfig.config[s.V9.AU_BigPartyAudienceDefaultOpenVideo]===s.q2.OPEN}get isAllowVideo(){return this.linkMicConfig.config[s.V9.AU_BigPartyAllowAudienceOpenVideo]===s.q2.OPEN}get selfLinkInfo(){if(void 0!==this.selfLinkedPosition)return this.linkMicSeats[this.selfLinkedPosition]}get playModesPC(){let e=[];return this.playModes.forEach(i=>{let t=M[i];void 0!==this.linkMicLayout&&t&&(null==t?void 0:t.includes(this.linkMicLayout))&&e.push(i)}),e}get isPaidLinking(){return this.playModes.includes(l.V0.LinkmicPlayMode_NormalPaidLinkmic)}get allowSendGiftGuest(){var e,i,t,o;return this.linkMicLayout===u.yP.VIDEO_DYNAMIC_FLOAT||("video"===this.linkRoomTypeHooks?(null===(i=this.linkMicConfig)||void 0===i?void 0:null===(e=i.config)||void 0===e?void 0:e[s.V9.AU_BigPartyGuestCanAcceptGift])===s.q2.OPEN:"audio"===this.linkRoomTypeHooks&&(null===(o=this.linkMicConfig)||void 0===o?void 0:null===(t=o.config)||void 0===t?void 0:t[s.V9.AU_AudioChatGuestCanAcceptGift])===s.q2.OPEN)}get useChoosePeopleFunc(){var e,i,t,o;if("audio"===this.linkRoomTypeHooks||"video"===this.linkRoomTypeHooks){if(this.choosePeopleShowTCC&&this.allowSendGiftGuest&&(null!==(o=null===(t=this.choosePeopleArr)||void 0===t?void 0:t.length)&&void 0!==o?o:0)>0)return!0}else if(this.isGroupLive&&(null!==(i=null===(e=this.choosePeopleArr)||void 0===e?void 0:e.length)&&void 0!==i?i:0)>0)return!0;return!1}constructor(e){super(e),(0,o._)(this,"linkMicConfig",{config:{}}),(0,o._)(this,"otherRoomLinkSilenceStatus",void 0),(0,o._)(this,"imLinkMicSeats",(0,n._)({},L)),(0,o._)(this,"seiLinkMicSeats",(0,n._)({},L)),(0,o._)(this,"imLinkMicLayout",void 0),(0,o._)(this,"seiLinkMicLayout",void 0),(0,o._)(this,"uiLayout",void 0),(0,o._)(this,"seiPosition",void 0),(0,o._)(this,"playModes",[]),(0,o._)(this,"orderSingInfo",void 0),(0,o._)(this,"orderSingUserScore",void 0),(0,o._)(this,"orderSingBannerData",void 0),(0,o._)(this,"orderSingSortRule",d.jQ.OrderSingGiftRule),(0,o._)(this,"choosePeopleArr",[]),(0,o._)(this,"choosePeopleAll",!1),(0,o._)(this,"choosePanelVisible",!1),(0,o._)(this,"choosePeopleShowTCC",!1),(0,o._)(this,"choosePeopleList",{}),(0,o._)(this,"functionType2",""),(0,o._)(this,"imTeamfightInfo",void 0),(0,o._)(this,"seiTeamFightInfo",void 0),(0,o._)(this,"guestBattleInfo",void 0),(0,o._)(this,"eggModeInfo",void 0),(0,o._)(this,"rankListShow",!1),(0,o._)(this,"rankParam",void 0),(0,o._)(this,"liveRoomMode",void 0),(0,o._)(this,"showHonorStation",!1),(0,o._)(this,"honorUser",void 0),(0,o._)(this,"scene",void 0),(0,o._)(this,"sceneNum",void 0),(0,o._)(this,"selectedLinkMicDevices",{}),(0,o._)(this,"linkStatus",0),(0,o._)(this,"devicesModalMode",3),(0,o._)(this,"applySource",m.JW.NONE),(0,o._)(this,"audioPermission",0),(0,o._)(this,"videoPermission",0),(0,o._)(this,"selectedPosition",void 0),(0,o._)(this,"userPopupCoordinate",void 0),(0,o._)(this,"isFansGuide",!1),(0,o._)(this,"isCandidate",!1),(0,o._)(this,"linkmicModalSettings",{show:!1}),(0,o._)(this,"guestBattleSettingsShow",!1),(0,o._)(this,"selfLinkedPosition",void 0),(0,o._)(this,"selfLinkMicId",void 0),(0,o._)(this,"isPlayModeNotSupport",!1),(0,o._)(this,"floatModal",0),(0,o._)(this,"dressListInfo",{}),(0,o._)(this,"showLinkMicApplyModal",!1),(0,o._)(this,"devicesModalCountDown",0),(0,o._)(this,"enlargeSeatApplyUid",null),(0,o._)(this,"enlargeSeatImage",""),(0,o._)(this,"enlargeGuestType",0),(0,o._)(this,"inviteFromUserId",""),(0,o._)(this,"dressMvpInfo",{}),(0,o._)(this,"dressListAll",[]),(0,o._)(this,"layoutBackgroundImg",""),(0,o._)(this,"layoutConfig",void 0),(0,o._)(this,"isAgcAnchor",!1),(0,o._)(this,"faceRecognitionShow",!1),(0,o._)(this,"groupLiveMemberList",void 0),(0,o._)(this,"isGroupLive",0),(0,o._)(this,"doubleCEnlarge",{showType:"",uid:void 0}),(0,o._)(this,"isCrossLink",!1),(0,o._)(this,"roomBattleType","pk"),(0,o._)(this,"crossLinkTimerStart",0),(0,o._)(this,"openUiLayout",void 0),(0,o._)(this,"lastOpenUiLayout",void 0),(0,o._)(this,"changeVideoDevice",{}),(0,o._)(this,"groupLiveComponents",[]),(0,o._)(this,"groupliveProfileSlot",null),(0,o._)(this,"asrSubtitle",{isOpen:!1,type:1}),(0,o._)(this,"openAudioSubtitle",!1),(0,o._)(this,"subtitleType",void 0),(0,o._)(this,"lastLayout",void 0),(0,o._)(this,"showGiftInfo",!1),(0,o._)(this,"linkmicVideoEqualLayoutFrameOpt","0"),(0,o._)(this,"setGroupLiveMemberList",e=>{this.groupLiveMemberList=e}),(0,o._)(this,"setIsGroupLive",e=>{this.isGroupLive=e}),(0,o._)(this,"setLinkmicModalSettings",e=>{this.linkmicModalSettings=e}),(0,o._)(this,"setGuestBattleSettingsShow",e=>{this.guestBattleSettingsShow=e}),(0,o._)(this,"getLinkRoomType",e=>{if(v.Ri.includes(e))return"audio";if(v.sF.includes(e))return"video";if(e===u.yP.VIDEO_6V6)return this.liveRoomMode===f.ke.AUDIO?"audio":"video";if(void 0===e&&"new_audience"===this.functionType2)return"video"}),(0,o._)(this,"setChoosePeopleArr",e=>{var i,t,o,n;this.choosePeopleArr&&(null===(i=this.choosePeopleArr)||void 0===i?void 0:i.length)>0&&localStorage.setItem(`linkmic-last-choose-people-${null===(n=this.store)||void 0===n?void 0:null===(o=n.roomStore)||void 0===o?void 0:null===(t=o.roomInfo)||void 0===t?void 0:t.roomId}`,JSON.stringify(e)),this.choosePeopleArr=e}),(0,o._)(this,"setChoosePeopleAll",e=>{var i,t,o;this.choosePeopleAll=e,localStorage.setItem(`linkmic-last-choose-people-all-${null===(o=this.store)||void 0===o?void 0:null===(t=o.roomStore)||void 0===t?void 0:null===(i=t.roomInfo)||void 0===i?void 0:i.roomId}`,String(e))}),(0,o._)(this,"setChoosePanelVisible",e=>{this.choosePanelVisible=e}),(0,o._)(this,"setChoosePeopleShowTCC",e=>{this.choosePeopleShowTCC=e}),(0,o._)(this,"getPositionIdxByUserIdStr",e=>{let i=S()(this.linkMicSeats);return null==i?void 0:i.findIndex(i=>{var t,o;return(null==i?void 0:null===(o=i.user)||void 0===o?void 0:null===(t=o.user)||void 0===t?void 0:t.id_str)===e})}),(0,o._)(this,"getRealPositionIdxByUserIdStr",e=>{var i;let t=S()(this.linkMicSeats);return null==t?void 0:null===(i=t.find(i=>{var t,o;return(null==i?void 0:null===(o=i.user)||void 0===o?void 0:null===(t=o.user)||void 0===t?void 0:t.id_str)===e}))||void 0===i?void 0:i.idx}),(0,o._)(this,"setApplySource",e=>{this.applySource=e}),(0,o._)(this,"setSelfLinkedPosition",e=>{this.selfLinkedPosition=e}),(0,o._)(this,"setAudioPermission",e=>{this.audioPermission=e}),(0,o._)(this,"setFunctionType2",e=>{this.functionType2=e}),(0,o._)(this,"setVideoPermission",e=>{this.videoPermission=e}),(0,o._)(this,"setDevices",e=>{this.selectedLinkMicDevices=e}),(0,o._)(this,"setOtherRoomLinkSilenceStatus",e=>{this.otherRoomLinkSilenceStatus=e}),(0,o._)(this,"setAudioDevice",e=>{this.selectedLinkMicDevices=(0,r._)((0,n._)({},this.selectedLinkMicDevices),{audio:e})}),(0,o._)(this,"setVideoDevice",e=>{this.selectedLinkMicDevices=(0,r._)((0,n._)({},this.selectedLinkMicDevices),{video:e})}),(0,o._)(this,"setSelectedPosition",e=>{this.selectedPosition=e}),(0,o._)(this,"setUserPopupCoordinate",e=>{this.userPopupCoordinate=e}),(0,o._)(this,"setInviteFromUserId",e=>{this.inviteFromUserId=e}),(0,o._)(this,"setShowDevicesModal",async e=>{this.setAudioPermission(0);let i=await (0,g.P)();if(!i.audio){c.F.info("无音源输入，连线失败"),this.setAudioPermission(2),this.setAudioDevice(void 0);return}this.setAudioPermission(1);let{audioInputs:t}=await (0,g.n)({linkRoomType:this.linkRoomType});if(0===t.length){c.F.info("无音源输入，连线失败");return}let o=async()=>{this.setVideoPermission(0),(await (0,g.P)(p.j5.CAMERA)).video?this.setVideoPermission(1):(this.setVideoPermission(2),this.setVideoDevice(void 0))};(2===e||6===e||4===e)&&"video"===this.linkRoomType&&i&&this.isAllowVideo&&this.isDefaultOpenVideo&&await o(),(0===e||5===e)&&await o(),this.devicesModalMode=e}),(0,o._)(this,"setLiveRoomMode",e=>{this.liveRoomMode=e}),(0,o._)(this,"setEnlargeSeatApplyUid",e=>{this.enlargeSeatApplyUid=e}),(0,o._)(this,"setEnlargeSeatImage",e=>{this.enlargeSeatImage=e}),(0,o._)(this,"setEnlargeGuestType",e=>{this.enlargeGuestType=e}),(0,o._)(this,"updateFunctionType2",e=>{e===u.yP.VIDEO_1V6||e===u.yP.AUDIO_1V8||e===u.yP.AUDIO_1V8_STAGE||e===u.yP.AUDIO_DOUBLE_C||e===u.yP.VIDEO_DYNAMIC_FLOAT&&"new_audience"!==this.functionType2?this.functionType2="radio":e===u.yP.VIDEO_DYNAMIC||e===u.yP.VIDEO_GRID||e===u.yP.AUDIO_GRID?this.functionType2="party":e===u.yP.MATE_CUSTOM&&(this.functionType2="audio_audience")}),(0,o._)(this,"setImLinkMicLayout",e=>{let i=[u.yP.AUDIO_1V8,u.yP.AUDIO_GRID,u.yP.AUDIO_1V8_STAGE].includes(this.seiLinkMicLayout)&&[u.yP.AUDIO_1V8,u.yP.AUDIO_GRID,u.yP.VIDEO_6V6,u.yP.AUDIO_1V8_STAGE].includes(e);2===this.linkStatus?this.updateFunctionType2(e):i&&this.updateFunctionType2(e),this.imLinkMicLayout=e}),(0,o._)(this,"setSeiLinkMicLayout",e=>{2!==this.linkStatus&&this.updateFunctionType2(e),this.seiLinkMicLayout=e}),(0,o._)(this,"setUiLayout",e=>{this.uiLayout=Number(e)}),(0,o._)(this,"setPlayModes",e=>{this.playModes=e}),(0,o._)(this,"setPlayModesByConfig",e=>{let i=[...this.playModes],t=Object.keys(e);for(let e of t)t[e]&&!i.includes(Number(e))?i.push(Number(e)):t[e]&&i.includes(Number(e))&&(i=i.filter(i=>i!==Number(e)));this.playModes=i}),(0,o._)(this,"setLinkMicSettings",e=>{this.linkMicConfig.settings=e}),(0,o._)(this,"setTeamfightInfo",(e,i)=>{if(i){var t,o;let i=null===(o=this.teamfightInfo)||void 0===o?void 0:null===(t=o.team_infos)||void 0===t?void 0:t.map(i=>{var t;let o=null===(t=e.team_infos)||void 0===t?void 0:t.find(e=>{var t,o;return String(null!==(t=null==e?void 0:e.team_id_str)&&void 0!==t?t:null==e?void 0:e.team_id)===String(null!==(o=null==i?void 0:i.team_id_str)&&void 0!==o?o:null==i?void 0:i.team_id)});return(0,r._)((0,n._)({},i),{is_score_fuzzy:null==o?void 0:o.is_score_fuzzy,score:null==o?void 0:o.score,score_str:null==o?void 0:o.score_str,score_fuzzy:null==o?void 0:o.score_fuzzy,contributors:null==o?void 0:o.contributors,players:null==o?void 0:o.players,owner_id:null==o?void 0:o.owner_id,bonus_score:null==o?void 0:o.bonus_score})});this.imTeamfightInfo=(0,r._)((0,n._)({},this.teamfightInfo),{current_time_ms:e.current_time_ms,team_infos:i}),this.seiTeamFightInfo=(0,r._)((0,n._)({},this.teamfightInfo),{current_time_ms:e.current_time_ms,team_infos:i});return}this.imTeamfightInfo=e,this.seiTeamFightInfo=e}),(0,o._)(this,"setGuestBattleInfo",e=>{this.guestBattleInfo=e}),(0,o._)(this,"setEggModeInfo",e=>{this.eggModeInfo=e}),(0,o._)(this,"setOrderSingInfo",e=>{this.orderSingInfo=e}),(0,o._)(this,"setOrderSingUserScore",e=>{this.orderSingUserScore=e}),(0,o._)(this,"setOrderSingBannerData",e=>{this.orderSingBannerData=e}),(0,o._)(this,"setOrderSingSortRule",e=>{this.orderSingSortRule=e}),(0,o._)(this,"setRankListShow",e=>{this.rankListShow=e}),(0,o._)(this,"setShowHonorStation",e=>{this.showHonorStation=e}),(0,o._)(this,"setHonorUser",e=>{this.honorUser=e}),(0,o._)(this,"setRankParam",e=>{this.rankParam=e}),(0,o._)(this,"setImLinkMicSeats",(e,i)=>{if(i){if(this.imLinkMicSeatsVersion){if(!!(Number(this.imLinkMicSeatsVersion)<Number(i)))this.imLinkMicSeats=e,this.imLinkMicSeatsVersion=i}else this.imLinkMicSeats=e,this.imLinkMicSeatsVersion=i}else this.imLinkMicSeats=e}),(0,o._)(this,"setSeiLinkMicSeats",e=>{this.seiLinkMicSeats=e}),(0,o._)(this,"setLinkStatus",e=>{2===this.linkStatus&&2!==e&&(this.setSeiLinkMicLayout(this.imLinkMicLayout),this.setSeiLinkMicSeats(this.imLinkMicSeats)),this.linkStatus=e,0===e&&this.setSelfLinkedPosition(void 0)}),(0,o._)(this,"setLinkMicConfig",e=>{this.linkMicConfig=e}),(0,o._)(this,"updateLinkMicConfig",e=>{let i=Object.assign({},this.linkMicConfig.config,e);this.linkMicConfig=(0,r._)((0,n._)({},this.linkMicConfig),{config:i})}),(0,o._)(this,"setIsFansGuide",e=>{this.isFansGuide=e}),(0,o._)(this,"setIsCandidate",e=>{this.isCandidate=e}),(0,o._)(this,"initLinkMicSeats",()=>{this.imLinkMicSeats=(0,n._)({},L),this.seiLinkMicSeats=(0,n._)({},L)}),(0,o._)(this,"setSelfLinkMicId",e=>{this.selfLinkMicId=e}),(0,o._)(this,"setIsPlayModeNotSupport",e=>{this.isPlayModeNotSupport=e}),(0,o._)(this,"setFloatModal",e=>{this.floatModal=e}),(0,o._)(this,"setSceneNum",e=>{this.sceneNum!==e&&(this.sceneNum=e)}),(0,o._)(this,"setDressListInfo",e=>{this.dressListInfo=e}),(0,o._)(this,"setShowLinkMicApplyModal",e=>{this.showLinkMicApplyModal=e}),(0,o._)(this,"setDevicesModalCountDown",e=>{this.devicesModalCountDown=e}),(0,o._)(this,"setDressMvpInfo",e=>{this.dressMvpInfo=e}),(0,o._)(this,"setDressListAll",e=>{this.dressListAll=e}),(0,o._)(this,"setLayoutBackgroundImg",e=>{this.layoutBackgroundImg=e}),(0,o._)(this,"setLayoutConfig",e=>{this.layoutConfig=e}),(0,o._)(this,"setAgcAnchor",e=>{this.isAgcAnchor=e}),(0,o._)(this,"setChoosePeopleList",e=>{this.choosePeopleList=e}),(0,o._)(this,"setFaceRecognitionShow",e=>{this.faceRecognitionShow=e}),(0,o._)(this,"setDoubleCEnlarge",e=>{this.doubleCEnlarge=e}),(0,o._)(this,"setIsCrossLink",e=>{this.isCrossLink=e}),(0,o._)(this,"setCrossLinkTimerStart",e=>{this.crossLinkTimerStart=e}),(0,o._)(this,"setRoomBattleType",e=>{this.roomBattleType=e}),(0,o._)(this,"setOpenUiLayout",e=>{e!==this.openUiLayout&&(void 0===this.lastOpenUiLayout?this.lastOpenUiLayout=e:this.lastOpenUiLayout=this.openUiLayout,this.openUiLayout=e)}),(0,o._)(this,"setChangeVideoDevice",e=>{this.changeVideoDevice=e}),(0,o._)(this,"setGroupLiveComponents",e=>{this.groupLiveComponents=e}),(0,o._)(this,"setGroupliveProfileSlot",e=>{this.groupliveProfileSlot=e}),(0,o._)(this,"setAsrSubtitle",e=>{this.asrSubtitle=e}),(0,o._)(this,"setLastLayout",e=>{this.lastLayout=e}),(0,o._)(this,"setShowGiftInfo",e=>{this.showGiftInfo=e}),(0,o._)(this,"setLinkmicVideoEqualLayoutFrameOpt",e=>{this.linkmicVideoEqualLayoutFrameOpt=e}),(0,o._)(this,"resetStore",e=>{this.linkMicConfig={config:{}},this.imLinkMicSeats=(0,n._)({},L),this.seiLinkMicSeats=(0,n._)({},L),this.imLinkMicSeatsVersion=void 0,this.imLinkMicLayout=void 0,this.seiLinkMicLayout=void 0,this.playModes=[],this.orderSingInfo=void 0,this.orderSingUserScore=void 0,this.orderSingSortRule=d.jQ.OrderSingGiftRule,this.liveRoomMode=void 0,this.imTeamfightInfo=void 0,this.guestBattleInfo=void 0,this.eggModeInfo=void 0,this.rankListShow=!1,this.showHonorStation=!1,this.honorUser=void 0,this.rankParam=void 0,this.selectedLinkMicDevices={},!e&&(this.linkStatus=0),this.showDevicesModal=!1,this.enlargeSeatApplyUid=null,this.enlargeSeatImage="",this.enlargeGuestType=0,this.applySource=m.JW.NONE,this.audioPermission=0,this.videoPermission=0,this.selectedPosition=void 0,this.userPopupCoordinate=void 0,this.isFansGuide=!1,this.isCandidate=!1,this.selfLinkedPosition=void 0,this.selfLinkMicId=void 0,this.isPlayModeNotSupport=!1,this.floatModal=0,this.otherRoomLinkSilenceStatus=void 0,this.choosePanelVisible=!1,this.choosePeopleArr=[],this.choosePeopleAll=!1,this.layoutBackgroundImg="",this.choosePeopleList={},this.isGroupLive=0,this.groupLiveMemberList=[],this.isCrossLink=!1,this.crossLinkTimerStart=0,this.roomBattleType="pk",this.openUiLayout=void 0,this.lastOpenUiLayout=void 0,this.changeVideoDevice={},this.groupliveProfileSlot=null,this.asrSubtitle={isOpen:!1,type:1},this.lastLayout=void 0,this.showGiftInfo=!0}),(0,o._)(this,"reset",()=>{}),(0,_.makeObservable)(this,{sceneNum:_.observable,setSceneNum:_.action,linkMicConfig:_.observable,imLinkMicSeats:_.observable,seiLinkMicSeats:_.observable,linkMicSeats:_.computed,linkMicSeatsRaw:_.computed,setImLinkMicSeats:_.action,setSeiLinkMicSeats:_.action,imLinkMicLayout:_.observable,seiLinkMicLayout:_.observable,uiLayout:_.observable,linkMicLayout:_.computed,setImLinkMicLayout:_.action,setSeiLinkMicLayout:_.action,setUiLayout:_.action,seiPosition:_.observable,teamfightInfo:_.computed,imTeamfightInfo:_.observable,seiTeamFightInfo:_.observable,setTeamfightInfo:_.action,guestBattleInfo:_.observable,setGuestBattleInfo:_.action,eggModeInfo:_.observable,setEggModeInfo:_.action,playModes:_.observable,setPlayModes:_.action,setPlayModesByConfig:_.action,playModesPC:_.computed,orderSingInfo:_.observable,setOrderSingInfo:_.action,orderSingUserScore:_.observable,setOrderSingUserScore:_.action,orderSingBannerData:_.observable,setOrderSingBannerData:_.action,orderSingSortRule:_.observable,setOrderSingSortRule:_.action,choosePeopleArr:_.observable,setChoosePeopleArr:_.action,choosePeopleAll:_.observable,setChoosePeopleAll:_.action,choosePanelVisible:_.observable,setChoosePanelVisible:_.action,allowSendGiftGuest:_.computed,choosePeopleShowTCC:_.observable,setChoosePeopleShowTCC:_.action,useChoosePeopleFunc:_.computed,enlargeSeatApplyUid:_.observable,enlargeSeatImage:_.observable,enlargeGuestType:_.observable,functionType2:_.observable,otherRoomLinkSilenceStatus:_.observable,rankListShow:_.observable,showHonorStation:_.observable,honorUser:_.observable,rankParam:_.observable,selectedLinkMicDevices:_.observable,linkStatus:_.observable,devicesModalMode:_.observable,selectedPosition:_.observable,userPopupCoordinate:_.observable,audioPermission:_.observable,videoPermission:_.observable,isFansGuide:_.observable,isCandidate:_.observable,selfLinkedPosition:_.observable,selfLinkMicId:_.observable,isPlayModeNotSupport:_.observable,floatModal:_.observable,liveRoomMode:_.observable,selfLinkInfo:_.computed,linkRoomType:_.computed,linkRoomTypeHooks:_.computed,isLinkRoom:_.computed,isDefaultOpenVideo:_.computed,isAllowVideo:_.computed,setFunctionType2:_.action,setLinkMicConfig:_.action,setOtherRoomLinkSilenceStatus:_.action,setRankListShow:_.action,setShowHonorStation:_.action,setHonorUser:_.action,setRankParam:_.action,setDevices:_.action,setShowDevicesModal:_.action,setUserPopupCoordinate:_.action,setEnlargeSeatApplyUid:_.action,setAudioPermission:_.action,setVideoPermission:_.action,setSelfLinkMicId:_.action,setSelectedPosition:_.action,setIsFansGuide:_.action,setIsCandidate:_.action,resetStore:_.action,setSelfLinkedPosition:_.action,setIsPlayModeNotSupport:_.action,setFloatModal:_.action,dressListInfo:_.observable,setDressListInfo:_.action,showLinkMicApplyModal:_.observable,setShowLinkMicApplyModal:_.action,devicesModalCountDown:_.observable,setDevicesModalCountDown:_.action,inviteFromUserId:_.observable,setInviteFromUserId:_.action,linkmicModalSettings:_.observable,setLinkmicModalSettings:_.action,guestBattleSettingsShow:_.observable,setGuestBattleSettingsShow:_.action,setLinkMicSettings:_.action,dressMvpInfo:_.observable,setDressMvpInfo:_.action,dressListAll:_.observable,setDressListAll:_.action,layoutBackgroundImg:_.observable,layoutConfig:_.observable,isAgcAnchor:_.observable,setAgcAnchor:_.action,choosePeopleList:_.observable,setChoosePeopleList:_.action,faceRecognitionShow:_.observable,setFaceRecognitionShow:_.action,groupLiveMemberList:_.observable,setGroupLiveMemberList:_.action,isGroupLive:_.observable,setIsGroupLive:_.action,doubleCEnlarge:_.observable,setDoubleCEnlarge:_.action,setEnlargeSeatImage:_.action,setEnlargeGuestType:_.action,setLayoutConfig:_.action,setLayoutBackgroundImg:_.action,isCrossLink:_.observable,setIsCrossLink:_.action,crossLinkTimerStart:_.observable,setCrossLinkTimerStart:_.action,roomBattleType:_.observable,setRoomBattleType:_.action,openUiLayout:_.observable,lastOpenUiLayout:_.observable,setOpenUiLayout:_.action,changeVideoDevice:_.observable,setChangeVideoDevice:_.action,groupLiveComponents:_.observable,setGroupLiveComponents:_.action,groupliveProfileSlot:_.observable,setGroupliveProfileSlot:_.action,asrSubtitle:_.observable,setAsrSubtitle:_.action,lastLayout:_.observable,setLastLayout:_.action,showGiftInfo:_.observable,setShowGiftInfo:_.action,linkmicVideoEqualLayoutFrameOpt:_.observable,setLinkmicVideoEqualLayoutFrameOpt:_.action,isPaidLinking:_.computed})}}},429594:function(e,i,t){t.d(i,{jQ:function(){return o}});var o={UnknownRule:0,0:"UnknownRule",OrderSingGiftRule:1,1:"OrderSingGiftRule",LinkmicPositionRule:2,2:"LinkmicPositionRule"}},490068:function(e,i,t){t.d(i,{s:function(){return o}});var o={UnknowPrivilege:0,0:"UnknowPrivilege",Unknow2Privilege:1,1:"Unknow2Privilege",PromptPrivilege:2,2:"PromptPrivilege",FactionPrivilege:3,3:"FactionPrivilege",WordPrivilege:4,4:"WordPrivilege",SliencePrivilege:5,5:"SliencePrivilege",BlockPrivilege:6,6:"BlockPrivilege",LinkMicPrivilege:7,7:"LinkMicPrivilege",VotePrivilege:8,8:"VotePrivilege",WishPrivilege:9,9:"WishPrivilege",LittleGamePrivilege:10,10:"LittleGamePrivilege",ScreenChatPrivilege:11,11:"ScreenChatPrivilege",CommentOnWallPrivilege:12,12:"CommentOnWallPrivilege",AdminDanmakuPrivilege:13,13:"AdminDanmakuPrivilege",LinkmicGuestBattlePrivilege:14,14:"LinkmicGuestBattlePrivilege",LinkmicTeamFightPrivilege:15,15:"LinkmicTeamFightPrivilege",LinkmicRoomBattlePrivilege:16,16:"LinkmicRoomBattlePrivilege",LinkmicRoomOrderSing:17,17:"LinkmicRoomOrderSing",UnionAnchorProvilege:18,18:"UnionAnchorProvilege",AudienceLinkmicPlaymodeControl:19,19:"AudienceLinkmicPlaymodeControl",EnlargeGuest:20,20:"EnlargeGuest",SetPositionName:21,21:"SetPositionName",PinPrivilege:22,22:"PinPrivilege",ScreenRecordPrivilege:23,23:"ScreenRecordPrivilege",ManageGameTeams:24,24:"ManageGameTeams"}},996990:function(e,i,t){t.d(i,{V0:function(){return n},xs:function(){return o}});var o={Scene_Unknown:0,0:"Scene_Unknown",Scene_PK:1,1:"Scene_PK",Scene_AnchorLinkmic:2,2:"Scene_AnchorLinkmic",Scene_VirutalPK:3,3:"Scene_VirutalPK",Scene_AudienceLinkmic:4,4:"Scene_AudienceLinkmic",Scene_AudioChatRoom:5,5:"Scene_AudioChatRoom",Scene_CloudGame:6,6:"Scene_CloudGame",Scene_AnchorMultiLinkmic:7,7:"Scene_AnchorMultiLinkmic",Scene_VideoChatRoom:8,8:"Scene_VideoChatRoom",Scene_KTV:9,9:"Scene_KTV",Scene_ShareVideo:10,10:"Scene_ShareVideo",Scene_ShareKTV:11,11:"Scene_ShareKTV",Scene_VideoEqualRoom:12,12:"Scene_VideoEqualRoom",Scene_VideoKTV:13,13:"Scene_VideoKTV",Scene_GameAnchorLinkmic:14,14:"Scene_GameAnchorLinkmic",Scene_GameAnchorLinkmicWithLayout:15,15:"Scene_GameAnchorLinkmicWithLayout",Scene_CrossRoomLinkmic:16,16:"Scene_CrossRoomLinkmic",Scene_MediaLinkmic:17,17:"Scene_MediaLinkmic",Scene_AudioChannelRoom:18,18:"Scene_AudioChannelRoom",Scene_CommentaryLinkmic:19,19:"Scene_CommentaryLinkmic",Scene_Default:100,100:"Scene_Default"},n={LinkmicPlayMode_Unknown:0,0:"LinkmicPlayMode_Unknown",LinkmicPlayMode_VideoFriend:1,1:"LinkmicPlayMode_VideoFriend",LinkmicPlayMode_VideoChatFloatWindowLayout:2,2:"LinkmicPlayMode_VideoChatFloatWindowLayout",linkmicPlayMode_MultiPK:3,3:"linkmicPlayMode_MultiPK",LinkmicPlayMode_DynamicLayout:4,4:"LinkmicPlayMode_DynamicLayout",LinkmicPlayMode_GuestBattle:5,5:"LinkmicPlayMode_GuestBattle",LinkmicPlayMode_KTVSingingChallenge:6,6:"LinkmicPlayMode_KTVSingingChallenge",LinkmicPlayMode_Teamfight:7,7:"LinkmicPlayMode_Teamfight",LinkmicPlayMode_AnchorKTV:8,8:"LinkmicPlayMode_AnchorKTV",LinkmicPlayMode_BGMKTV:9,9:"LinkmicPlayMode_BGMKTV",LinkmicPlayMode_VideoKTV:10,10:"LinkmicPlayMode_VideoKTV",LinkmicPlayMode_NormalPaidLinkmic:11,11:"LinkmicPlayMode_NormalPaidLinkmic",LinkmicPlayMode_BidPaidLinkmic:12,12:"LinkmicPlayMode_BidPaidLinkmic",LinkmicPlayMode_VideoEnlargeGuest:13,13:"LinkmicPlayMode_VideoEnlargeGuest",LinkmicPlayMode_VideoEqual_Top1V8:14,14:"LinkmicPlayMode_VideoEqual_Top1V8",LinkmicPlayMode_MultiPK_Team:15,15:"LinkmicPlayMode_MultiPK_Team",LinkmicPlayMode_RoomBattle:16,16:"LinkmicPlayMode_RoomBattle",LinkmicPlayMode_SelfDiscipline:17,17:"LinkmicPlayMode_SelfDiscipline",LinkmicPlayMode_DuoBattle:18,18:"LinkmicPlayMode_DuoBattle",LinkmicPlayMode_OrderSing:19,19:"LinkmicPlayMode_OrderSing",LinkmicPlayMode_InteractiveScreenCast:20,20:"LinkmicPlayMode_InteractiveScreenCast",LinkmicPlayMode_KTVComponent:21,21:"LinkmicPlayMode_KTVComponent",LinkmicPlayMode_ThemedCompetition:22,22:"LinkmicPlayMode_ThemedCompetition",LinkmicPlayMode_Chorus:23,23:"LinkmicPlayMode_Chorus",LinkmicPlayMode_AudioChat_1_PLUS_8:24,24:"LinkmicPlayMode_AudioChat_1_PLUS_8",LinkmicPlayMode_AudioChat_3x3_ONE_ENMPTY:25,25:"LinkmicPlayMode_AudioChat_3x3_ONE_ENMPTY",LinkmicPlayMode_AudioChat_3x3_N_EMPTY:26,26:"LinkmicPlayMode_AudioChat_3x3_N_EMPTY",LinkmicPlayMode_VotePlay:27,27:"LinkmicPlayMode_VotePlay",LinkmicPlayMode_ShellPlay:28,28:"LinkmicPlayMode_ShellPlay",LinkmicPlayMode_Adventure:29,29:"LinkmicPlayMode_Adventure",LinkmicPlayMode_Breakthrough:30,30:"LinkmicPlayMode_Breakthrough",LinkmicPlayMode_GameBarrage:31,31:"LinkmicPlayMode_GameBarrage",LinkmicPlayMode_AudioSubtitle:32,32:"LinkmicPlayMode_AudioSubtitle",LinkmicPlayMode_Survival:33,33:"LinkmicPlayMode_Survival",LinkmicPlayMode_StarWish:34,34:"LinkmicPlayMode_StarWish",LinkmicPlayMode_MV:35,35:"LinkmicPlayMode_MV",LinkmicPlayMode_RealTimeChorus:36,36:"LinkmicPlayMode_RealTimeChorus",LinkmicPlayMode_GuestLink:37,37:"LinkmicPlayMode_GuestLink",LinkmicPlayMode_GameBarrageLink:38,38:"LinkmicPlayMode_GameBarrageLink",LinkmicPlayMode_ChorusConcert:39,39:"LinkmicPlayMode_ChorusConcert",LinkmicPlayMode_ChestGame:40,40:"LinkmicPlayMode_ChestGame",LinkmicPlayMode_GiftComment:41,41:"LinkmicPlayMode_GiftComment"}},513965:function(e,i,t){t.d(i,{NM:function(){return r},V9:function(){return o},q2:function(){return n}});var o={NONE:0,0:"NONE",AL_IsTurnOn:1,1:"AL_IsTurnOn",AL_AcceptMultiLinkmic:2,2:"AL_AcceptMultiLinkmic",AL_AcceptNotFollowerInvite:3,3:"AL_AcceptNotFollowerInvite",AL_AllowGiftToOtherAnchors:4,4:"AL_AllowGiftToOtherAnchors",PK_IsTurnOn:5,5:"PK_IsTurnOn",PK_AcceptNotFollowerInvite:6,6:"PK_AcceptNotFollowerInvite",PK_AllowGiftToOtherAnchors:7,7:"PK_AllowGiftToOtherAnchors",AU_IsTurnOn:8,8:"AU_IsTurnOn",AU_BigPartyAcceptNeedVerified:9,9:"AU_BigPartyAcceptNeedVerified",AU_BigPartyOnlyAcceptFollowerApply:10,10:"AU_BigPartyOnlyAcceptFollowerApply",AU_BigPartyGuestCanAcceptGift:11,11:"AU_BigPartyGuestCanAcceptGift",AU_IntimateChatOnlyAcceptFollowerApply:12,12:"AU_IntimateChatOnlyAcceptFollowerApply",AU_IntimateChatGuestCanAcceptGift:13,13:"AU_IntimateChatGuestCanAcceptGift",AU_IntimateChatOnlyJoinThroughInvitation:14,14:"AU_IntimateChatOnlyJoinThroughInvitation",AU_IntimateChatAcceptNeedVerified:15,15:"AU_IntimateChatAcceptNeedVerified",AU_AudioChatAcceptNeedVerified:16,16:"AU_AudioChatAcceptNeedVerified",AU_AudioChatOnlyAcceptFollowerApply:17,17:"AU_AudioChatOnlyAcceptFollowerApply",AU_AudioChatGuestCanAcceptGift:18,18:"AU_AudioChatGuestCanAcceptGift",AU_BigPartyAllowAdminOperateAudience:19,19:"AU_BigPartyAllowAdminOperateAudience",AU_IntimateChatAllowAdminOperateAudience:20,20:"AU_IntimateChatAllowAdminOperateAudience",AU_AudioChatAllowAdminOperateAudience:21,21:"AU_AudioChatAllowAdminOperateAudience",AU_BigPartyEmojiEntrance:22,22:"AU_BigPartyEmojiEntrance",AU_AudioChatEmojiEntrance:23,23:"AU_AudioChatEmojiEntrance",AU_AllowAdminOperateAudience:24,24:"AU_AllowAdminOperateAudience",AU_OfficialChannelHostCanAcceptGift:25,25:"AU_OfficialChannelHostCanAcceptGift",PK_AcceptFriendInvite:26,26:"PK_AcceptFriendInvite",PK_AcceptHourlyRankInvite:27,27:"PK_AcceptHourlyRankInvite",AU_InteractEmojiEntrance:28,28:"AU_InteractEmojiEntrance",AU_EmojiWithSound:29,29:"AU_EmojiWithSound",PK_PrecisionMatch:30,30:"PK_PrecisionMatch",PK_PrecisionMatchPreferGender:31,31:"PK_PrecisionMatchPreferGender",PK_PrecisionMatchFrequency:32,32:"PK_PrecisionMatchFrequency",AU_BigPartyAllowAudienceOpenVideo:33,33:"AU_BigPartyAllowAudienceOpenVideo",AU_KTVAllowAudienceOpenVideo:34,34:"AU_KTVAllowAudienceOpenVideo",AU_KTVGuideSongSwitch:35,35:"AU_KTVGuideSongSwitch",AU_IntimateChatAllowAudienceOpenVideo:36,36:"AU_IntimateChatAllowAudienceOpenVideo",AU_ApplyStrongReminderEntrance:37,37:"AU_ApplyStrongReminderEntrance",AU_KTVEnableBeatComponent:39,39:"AU_KTVEnableBeatComponent",AU_BigPartyOnlyJoinThroughInvitation:40,40:"AU_BigPartyOnlyJoinThroughInvitation",AU_IntimateChatPaiedCount:41,41:"AU_IntimateChatPaiedCount",AU_IntimateChatLimitedTime:42,42:"AU_IntimateChatLimitedTime",AU_BigPartyPaiedCount:43,43:"AU_BigPartyPaiedCount",AU_BigPartyLimitedTime:44,44:"AU_BigPartyLimitedTime",AU_AddLinkmicTime:45,45:"AU_AddLinkmicTime",AU_AudioChatPlayMode:46,46:"AU_AudioChatPlayMode",AU_IsAudioChatPreLinkmicTurnOn:47,47:"AU_IsAudioChatPreLinkmicTurnOn",AU_BigPartyEnableDynamicLayout:48,48:"AU_BigPartyEnableDynamicLayout",AU_BigPartyEnableEqual:49,49:"AU_BigPartyEnableEqual",PK_AcceptPopularityRankInvite:50,50:"PK_AcceptPopularityRankInvite",AU_IntimateChatApplicationReason:51,51:"AU_IntimateChatApplicationReason",AU_BigPartyAudienceDefaultOpenVideo:52,52:"AU_BigPartyAudienceDefaultOpenVideo",AU_KTVEnableAtmosphere:53,53:"AU_KTVEnableAtmosphere",AU_KTVEnableColdStartSongList:54,54:"AU_KTVEnableColdStartSongList",AU_KTVEnableAvatar:55,55:"AU_KTVEnableAvatar",AU_KTVFriendsGroup:56,56:"AU_KTVFriendsGroup",AU_IntimateChatBidPaidLinkmic:57,57:"AU_IntimateChatBidPaidLinkmic",AU_WaitingListSortStrategy:58,58:"AU_WaitingListSortStrategy",AU_AutoInitInfo:59,59:"AU_AutoInitInfo",AU_VideoChatEnableDynamic:60,60:"AU_VideoChatEnableDynamic",AU_EnableAudienceLinkmic:61,61:"AU_EnableAudienceLinkmic",AU_VideoChatAcceptAudienceApply:62,62:"AU_VideoChatAcceptAudienceApply",AU_NormalPaidLinkmicConfig:63,63:"AU_NormalPaidLinkmicConfig",AU_NormalPaidLinkmicExplainCard:64,64:"AU_NormalPaidLinkmicExplainCard",AU_NormalPaidLinkmicDesc:65,65:"AU_NormalPaidLinkmicDesc",AU_IntimateChatNormalPaidLinkmicConfig:66,66:"AU_IntimateChatNormalPaidLinkmicConfig",AU_IntimateChatBidPaidLinkmicConfig:67,67:"AU_IntimateChatBidPaidLinkmicConfig",AU_KTVChallengeConfig:68,68:"AU_KTVChallengeConfig",AU_RoomBattleConfig:69,69:"AU_RoomBattleConfig",AU_NormalPaidLinkmicAddPriceConfig:70,70:"AU_NormalPaidLinkmicAddPriceConfig",AU_VideoChatBidPaidLinkmicConfig:71,71:"AU_VideoChatBidPaidLinkmicConfig",AU_GuestBattleConfig:72,72:"AU_GuestBattleConfig",AU_TeamFightConfig:73,73:"AU_TeamFightConfig",PK_AcceptVolumeUp:75,75:"PK_AcceptVolumeUp",AU_SelfDisciplineConfig:76,76:"AU_SelfDisciplineConfig",AU_linkmicAutoSilence:77,77:"AU_linkmicAutoSilence",AU_PriorSong:78,78:"AU_PriorSong",AU_DuoBattleConfig:80,80:"AU_DuoBattleConfig",AU_RadioAcceptAudiencePreApply:81,81:"AU_RadioAcceptAudiencePreApply",AU_KTVAutoLeave:82,82:"AU_KTVAutoLeave",AU_KTVLyricMode:87,87:"AU_KTVLyricMode",AU_InitVideoChatFromAudienceLinkmic:88,88:"AU_InitVideoChatFromAudienceLinkmic",AU_PaidQueue:89,89:"AU_PaidQueue",AU_KTVComponent:90,90:"AU_KTVComponent",AU_KTVMidiMode:92,92:"AU_KTVMidiMode",AU_ClearGuestRankList:93,93:"AU_ClearGuestRankList",AU_AudioSubtitle:94,94:"AU_AudioSubtitle",AU_AutoOpenLinkmic:95,95:"AU_AutoOpenLinkmic",AU_StarWish:96,96:"AU_StarWish",AU_AdventureConfig:100,100:"AU_AdventureConfig",AL_UnionInvite:101,101:"AL_UnionInvite",AU_KTVMultiChorusConfig:102,102:"AU_KTVMultiChorusConfig",AU_KTVMultiChorusConfigV2:103,103:"AU_KTVMultiChorusConfigV2",AL_AcceptBigSmallLayout:104,104:"AL_AcceptBigSmallLayout",AU_EnlargeGuestEqual1V8:105,105:"AU_EnlargeGuestEqual1V8",AU_OrderSingConf:106,106:"AU_OrderSingConf",AU_GuestLinkConfig:107,107:"AU_GuestLinkConfig",AU_KTVStageHideLyricsSwitch:108,108:"AU_KTVStageHideLyricsSwitch",AU_Audio1V8EnlargeStageSwitch:109,109:"AU_Audio1V8EnlargeStageSwitch",AU_ChestGame:111,111:"AU_ChestGame",AU_GiftComment:112,112:"AU_GiftComment"},n={UNSET:0,0:"UNSET",OPEN:1,1:"OPEN",OFF:2,2:"OFF",ONLY_FOLLOWING_USER:20,20:"ONLY_FOLLOWING_USER",ONLY_FANS_CLUB_USER:21,21:"ONLY_FANS_CLUB_USER",ONLY_FANS:22,22:"ONLY_FANS",ALL_USERS:23,23:"ALL_USERS",AUDIO_CHAT_ONE_PLUS_EIGHT:24,24:"AUDIO_CHAT_ONE_PLUS_EIGHT",AUDIO_CHAT_THREE_TIMES_THREE_ONE_EMPTY:25,25:"AUDIO_CHAT_THREE_TIMES_THREE_ONE_EMPTY",AUDIO_CHAT_THREE_TIMES_THREE_N_EMPTY:26,26:"AUDIO_CHAT_THREE_TIMES_THREE_N_EMPTY",WAITING_LIST_SORT_STRATEGY_APPLY_TIME:40,40:"WAITING_LIST_SORT_STRATEGY_APPLY_TIME",WAITING_LIST_SORT_STRATEGY_FAN_TICKET:41,41:"WAITING_LIST_SORT_STRATEGY_FAN_TICKET",WAITING_LIST_SORT_STRATEGY_RECOMEND:42,42:"WAITING_LIST_SORT_STRATEGY_RECOMEND"},r={SWITCH_UNSET:0,0:"SWITCH_UNSET",SWITCH_ON:1,1:"SWITCH_ON",SWITCH_OFF:2,2:"SWITCH_OFF"}},755012:function(e,i,t){t.d(i,{BU:function(){return A},Js:function(){return P},S6:function(){return k},TG:function(){return E},Yr:function(){return f},Zk:function(){return I},c3:function(){return b},m8:function(){return T},mL:function(){return U},mS:function(){return C},rp:function(){return V},us:function(){return w},wU:function(){return p},x_:function(){return g}});var o=t(520739),n=t(878389);t(250440),t(527785),t(268917),t(874386),t(675373),t(882732),t(544943),t(779788),t(981168);var r=t(645260),a=t.n(r),l=t(801034),s=t(709606),d=t(75978),u=t(688432),c=t(328155),_=t(441447),v=t(746309);let h=()=>{try{let{location:e}=window;return"www.douyin.com"===e.host&&!(0,c.Nr)(e.pathname)}catch(e){return!1}},m=()=>!!h()&&(_.emit(_.EVENT.LivePreviewLoginSuccess),!0),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[s.o0.CHEAP,s.o0.FREE].includes(Number(e.type))},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[s.o0.EXPENSIVE,s.o0.FACE,s.o0.FANS_GIFT,s.o0.FLY_LINKMIC,s.o0.INTERACT_GIFT].includes(Number(e.type))},p=e=>(null==e?void 0:e.price)>=99,y=e=>e.map(e=>{let{group_count:i,group_text:t}=e;return{groupCount:i,groupText:t}}),S=e=>{let{id:i,name:t,type:o,diamond_count:n,primary_effect_id:r,is_displayed_on_panel:l,group_info:d=[],honor_level:u,gift_scene:c}=e;return{id:i,name:t,type:o,price:n,effectId:r,onPanel:l,groupInfo:y(d),honorLevel:u,fansClubLevel:a()(e,"fansclub_info.min_level")||s._q[i],lockStatus:a()(e,"gift_preview_info.lock_status"),blockToast:a()(e,"gift_preview_info.block_toast"),label:a()(e,"gift_label_icon.url_list.0"),icon:a()(e,"icon.url_list.0"),giftScene:c,namingAvatar:a()(e,"top_right_avatar.url_list.0"),reqExtraType:a()(e,"req_extra_type",0),afterSendAction:a()(e,"after_send_action",0)}},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>S(e))},A=e=>e.map(e=>{var i;let{page_name:t="",page_type:o=0}=e,n=o===s.kQ.OLD_CARATED?null==e?void 0:null===(i=e.section_info)||void 0===i?void 0:i.reduce((e,i)=>null==e?void 0:e.concat(null==i?void 0:i.gifts),[]):e.gifts;return{pageName:t,pageType:o,display:!!e.display,giftList:L(n)}}),I=e=>{let{rawGiftPages:i,giftScene:t}=e;try{let e=i.find(e=>e.page_type===s.kQ.GIFT&&e.display);if(!e)return[];let{page_name:o="",page_type:n=0,gifts:r}=e,a=[];for(let e of r){let i=S(e);if((0,u.cb)(i,t,1)&&a.push(i),a.length>=20)break}return[{pageName:o,pageType:n,display:!0,giftList:a}]}catch(e){var o,n;null===(n=(0,v.OK)())||void 0===n||null===(o=n.sendEvent)||void 0===o||o.call(n,{name:"get_first_gift_pages_error",metrics:{count:1},categories:{error:e,giftScene:t}})}},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>{let{id:i,name:t,md5:o,resource_type:n,resource_url:r={}}=e;return{id:i,name:t,md5:o,type:n,src:a()(r,"url_list.0")}})},k=e=>{let{h:i,w:t,videoH:o,videoW:n,aFrame:r,rgbFrame:l}=a()(e,"portrait",{}),s=((e,i)=>{if(1200===e&&540===i)return 900;if(810===e&&1440===i)return e;if(e>=2e3||e>=1400&&i>=1400)return e/4;else if(e>640)return e/2;else return e})(Number(i),Number(t))||640,d=Number(t)*(s/Number(i))||360;return{height:s,width:d,videoHeight:o,videoWidth:n,aFrame:r,rgbFrame:l,muted:!0}},b=async e=>{try{var i,r,a,l,s;let{ZipReader:d,HttpReader:u,TextWriter:c,BlobWriter:_}=await t.e("1104").then(t.bind(t,262733)),v=new d(new u(e,{preventHeadRequest:!0})),h=await (null==v?void 0:v.getEntries()),m=h.find(e=>"config.json"===e.filename),f=await (null==m?void 0:null===(i=m.getData)||void 0===i?void 0:i.call(m,new c)),g=JSON.parse(f),p=null==g?void 0:null===(r=g.portrait)||void 0===r?void 0:r.path,y=h.find(e=>e.filename===p),S=await (null==y?void 0:null===(a=y.getData)||void 0===a?void 0:a.call(y,new _)),L=null===(l=URL)||void 0===l?void 0:l.createObjectURL(S),A=null===(s=URL)||void 0===s?void 0:s.createObjectURL(new Blob([JSON.stringify({portrait:(0,n._)((0,o._)({},g.portrait),{path:L})})]));return{media:S,config:g,localMediaPath:L,localConfigPath:A}}catch(e){return{media:null,config:null}}},M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{displayKey:a()(e,"key"),displayText:a()(e,"defaultPattern")||a()(e,"default_pattern"),pieces:a()(e,"pieces",[]).map(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{displayText:a()(e,"stringValue")||a()(e,"string_value")}})}},C=(e,i)=>i.find(i=>Number(i.id)===Number(e))||{},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=e.filter(e=>e.isSelf),t=e.filter(e=>!e.isSelf);return[...i,...t.sort((e,i)=>a()(e,"gift.price")>a()(i,"gift.price")?-1:1).slice(0,100)]},E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.map(e=>{let n;let r=(a()(e,"method")===s.ZP.WEBCAST_BINDING_GIFT_MESSAGE?a()(e,"payload.msg"):a()(e,"payload"))||{};try{let e=a()(r,"diy_item_info","[]");e&&(n=JSON.parse(e))}catch(e){}let d=Number(a()(r,"gift_id")),u=a()(r,"gift")||{},c=a()(r,"user")||{},_=a()(r,"tray_info")||{},v=a()(r,"tray_display_text")||{},h=i.find(e=>Number(e.id)===Number(d))||{},m=Number(a()(n,"[0].values.mp4_asset","")||a()(u,"primary_effect_id"))||h.effectId,f=t.find(e=>Number(e.id)===Number(m))||{},g=Number(a()(r,"repeat_count")||a()(r,"combo_count")),p=Number(a()(r,"banned_display_effects"));return{isSelf:e.isSelf,method:e.method,diyItemInfo:n,user:{id:c.sec_uid||c.id_str,name:c.nickname,avatar:(0,l.uC)(a()(c,"avatar_thumb.url_list.0"))},gift:{id:d,name:u.name||h.name,price:u.diamond_count||h.price,type:u.type||h.type,icon:(0,l.uC)(a()(u,"image.url_list.0")||h.icon)},tray:{combo:g,target:g,displayTextConfig:M(v),bgImg:(0,l.uC)(a()(_,"tray_base_img.url_list.0")),dynamicIcon:(0,l.uC)(a()(_,"tray_dynamic_img.url_list.0")),type:Number(a()(_,"tray_type")),isNaming:Number(a()(_,"tray_type"))===s.ms.NAMING,banned:(p&s.qn.TRAY)===s.qn.TRAY},effect:(0,o._)({id:m,banned:(p&s.qn.EFFECT)===s.qn.EFFECT},f)}}).filter(e=>a()(e,"user.id")&&a()(e,"user.name")&&a()(e,"gift.id")&&a()(e,"gift.name")&&a()(e,"tray.combo"))},U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=e.gift_id,c=a()(e,"gifts.0")||{},_=a()(e,"gift_struct")||{},v=a()(c,"display_text.pieces.0.user_value.user")||n,h=c.tray_info||{},m=c.tray_display_text||{},f=i.find(e=>Number(e.id)===Number(u))||{},g=Number(a()(r,"[0].values.mp4_asset")||a()(_,"primary_effect_id"))||f.effectId,p=t.find(e=>Number(e.id)===Number(g))||{},y=e.repeat_count||e.combo_count;return[{isSelf:!0,increasedCount:d,user:{id:v.sec_uid,name:v.nickname,avatar:(0,l.uC)(a()(v,"avatar_thumb.url_list.0"))},gift:{id:u,name:c.name||f.name,price:c.diamond_count||f.price,type:c.type||f.type,icon:(0,l.uC)(a()(c,"image.url_list.0")||f.icon)},diyItemInfo:r,tray:{combo:y,target:y,displayTextConfig:M(m),bgImg:(0,l.uC)(a()(h,"tray_base_img.url_list.0")),dynamicIcon:(0,l.uC)(a()(h,"tray_dynamic_img.url_list.0")),type:Number(a()(h,"tray_type")),isNaming:Number(a()(h,"tray_type"))===s.ms.NAMING},effect:(0,o._)({id:g},p)}].filter(e=>a()(e,"user.id")&&a()(e,"gift.id")&&a()(e,"tray.combo"))},T=async function(){var e,i;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(await (0,d.p)())({headerText:t,enterMethod:o,next:`https://${null===(i=window)||void 0===i?void 0:null===(e=i.location)||void 0===e?void 0:e.host}`,success:()=>{if(!m()){var e,i,t;null===(t=window)||void 0===t||null===(i=t.location)||void 0===i||null===(e=i.reload)||void 0===e||e.call(i)}}})},V=e=>{var i,t;e&&(null==e?void 0:e.fullscreen)&&(null==e||null===(t=e.plugins)||void 0===t||null===(i=t.fullscreen)||void 0===i||i.changeFullScreen())}},744376:function(e,i,t){t.d(i,{V:function(){return s},m6:function(){return d},oD:function(){return u}}),t(779788);var o=t(396169),n=t(987475),r=t(618360),a=t(645260),l=t.n(a);let s=e=>{document.cookie=(0,o.serialize)(n.CookieKeys.PaidLiveDuration,JSON.stringify(e),{domain:".douyin.com",path:"/"})},d=()=>{var e,i;let t=l()(window,"__STORE__.paidLiveStore.paidLiveData.paid_type",0),o=l()(window,"__STORE__.paidLiveStore.viewType",r.ku.BAN),n=null===(i=window)||void 0===i?void 0:null===(e=i.__INVISIBLE_QUERY__)||void 0===e?void 0:e.entrance_form;return{is_paidlive:Number(t),watch_paidlive_status:u(o),entrance_form:n}},u=e=>{switch(e){case r.ku.TRY_WATCH_ING:return"try";case r.ku.TRT_WATCH_FINISH:return"try_end";case r.ku.NORMAL_WATCH:default:return"regular"}}},362706:function(e,i,t){t.d(i,{x:function(){return r}}),t(954372),t(826893);var o=t(674379),n=t(75978);let r=e=>{/iframe/.test(location.pathname)?(0,o.dn)({headerText:e.headerText,enterMethod:e.enterMethod}):(0,n.p)().then(i=>{i(e)})}},104468:function(e,i,t){t.d(i,{P:function(){return g},n:function(){return v}}),t(675373),t(874386);var o=t(302653),n=t.n(o),r=t(828782),a=t(47047),l=t(63405),s=t(66627),d=t(509090),u=t(342583),c=t(258972);let _=async()=>Promise.all([Promise.all([t.e("76746"),t.e("56689"),t.e("95395"),t.e("85687")]).then(t.bind(t,737327)),Promise.all([t.e("76746"),t.e("95395"),t.e("99051")]).then(t.bind(t,157477))]).then(e=>{let[{singleEngineInstance:i},{VERTC:t}]=e;return{VERTC:t,singleEngineInstance:i}}),v=e=>_().then(async i=>{let{VERTC:t,singleEngineInstance:o}=i,{linkRoomType:l}=e||{};return await o({linkRoomType:l}),t.enumerateDevices().then(e=>{let i=(0,r.DT)()&&(0,a.O)(),t=n()(e.filter(e=>"audioinput"===e.kind&&("default"!==e.deviceId||i)),"groupId");return{audioInputs:t,videoInputs:n()(e.filter(e=>"videoinput"===e.kind&&e.deviceId&&("default"!==e.deviceId||i)),"groupId")}})}),h=async(e,i)=>"granted"===(await l.invoke("GET_MEDIA_ACCESS_STATUS",{data:e})).data||!!(await l.invoke("ASK_FOR_MEDIA_ACCESS",{data:e})).data||(i&&d.F.info(i),!1),m=async()=>{let{VERTC:e}=await _();return await e.enableDevices()},f=(0,u.ZP)(m),g=async e=>{var i,t;if((null===(t=(0,a.fV)())||void 0===t?void 0:null===(i=t.os)||void 0===i?void 0:i.toLowerCase())==="mac"&&(0,r.DT)()){let{data:i}=await l.invoke("GET_VERSION"),t=i?null==i?void 0:i.version:"",o=!1,n=!1;return(0,s.y)(t,">=","1.1.0")?(n=await h("microphone","请授权扬声器与麦克风权限, 否则无法连麦"))&&e===c.j5.CAMERA&&(o=(o=await h("camera","请授权摄像头权限, 否则无法连麦"))||await h("screen","请授权摄像头权限, 否则无法连麦")):d.F.info("当前版本暂不支持该功能，请升级至最新版本体验"),{video:o,audio:n}}return f().then(e=>{{var i,t,o,n;let{rtcEvent:r}=window.__STORE__.eventStore;r.livesdkRtcAudioVideoAuthEvent({audio:e.audio,video:e.video,audioErrorMessage:(null==e?void 0:null===(i=e.audioExceptionError)||void 0===i?void 0:i.message)||"",audioErrorName:(null==e?void 0:null===(t=e.audioExceptionError)||void 0===t?void 0:t.name)||"",videoErrorMessage:(null==e?void 0:null===(o=e.videoExceptionError)||void 0===o?void 0:o.message)||"",videoErrorName:(null==e?void 0:null===(n=e.videoExceptionError)||void 0===n?void 0:n.name)||""})}return e}).catch(e=>{{var i;let{rtcEvent:t}=window.__STORE__.eventStore;t.livesdkRtcAudioVideoAuthFailEvent({error:(null===(i=JSON)||void 0===i?void 0:i.stringify(e))||""})}return{video:!1,audio:!1}})}},266382:function(e,i,t){t.d(i,{Qx:function(){return l},ic:function(){return d},ut:function(){return s}});var o=t(520739),n=t(878389);t(874386),t(527785);var r=t(779145),a=t.n(r);let l=e=>{let i=a()(e),t=null==i?void 0:i.findIndex(e=>{var i,t,o;return null==e?void 0:null===(o=e.user)||void 0===o?void 0:null===(t=o.content)||void 0===t?void 0:null===(i=t.linkmic_audience_content)||void 0===i?void 0:i.is_enlarged});if(-1!==t&&0!==t){let[e,...r]=i,a=r.filter(e=>(null==e?void 0:e.idx)!==t).filter(i=>{var t,o,n,r;return(null==i?void 0:null===(o=i.user)||void 0===o?void 0:null===(t=o.user)||void 0===t?void 0:t.id_str)!==(null==e?void 0:null===(r=e.user)||void 0===r?void 0:null===(n=r.user)||void 0===n?void 0:n.id_str)});return[i[t],e,...a].reduce((e,i,t)=>(0,n._)((0,o._)({},e),{[t]:i}),{})}return e},s=e=>{let i=a()(e);return null==i?void 0:i.findIndex(e=>{var i,t,o;return null==e?void 0:null===(o=e.user)||void 0===o?void 0:null===(t=o.content)||void 0===t?void 0:null===(i=t.linkmic_audience_content)||void 0===i?void 0:i.is_enlarged})},d=e=>-1!==s(e)}}]);