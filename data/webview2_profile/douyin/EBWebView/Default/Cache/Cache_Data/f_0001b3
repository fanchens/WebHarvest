"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["48755"],{368300:function(e,i,l){l.d(i,{y:function(){return D}});var t=l("520739"),n=l("878389");l("874386"),l("413806"),l("826893"),l("779788");var o=l("563097"),r=l("88648"),a=l("713097"),s=l.n(a),u=l("567754"),d=l("623527"),c=l("465769"),v=l("742740"),_=l("983253"),f=l("235049"),m=l("623582"),A=l("115627"),g=l("713111"),I=l("4168"),E=l("812798");let p=(0,r.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,n._)((0,t._)({width:28,height:28,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,o.jsx)("path",{d:"M19.59 9.59a.833.833 0 1 0-1.18-1.18L14 12.822l-4.41-4.41a.833.833 0 0 0-1.18 1.178L12.822 14l-4.41 4.41a.833.833 0 1 0 1.178 1.18L14 15.177l4.41 4.411a.833.833 0 1 0 1.18-1.178L15.177 14l4.411-4.41z",fill:"#161823"})}))),h=(0,r.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:50,height:50,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsxs)("g",{filter:"url(#ic_tick-circle_svg__filter0_d_747_17320)",shapeRendering:"crispEdges",children:[(0,o.jsx)("path",{d:"M25.001 44.992c11 0 20-9 20-20s-9-20-20-20-20 9-20 20 9 20 20 20z",fill:"#fff"}),(0,o.jsx)("path",{d:"M25.001 45.492c11.276 0 20.5-9.224 20.5-20.5s-9.224-20.5-20.5-20.5-20.5 9.224-20.5 20.5 9.224 20.5 20.5 20.5z",stroke:"#000",strokeOpacity:".1",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,o.jsx)("path",{d:"M30.303 30.303a7.5 7.5 0 1 1 0-10.607c.691.691 2.197 2.387 2.197 2.387",stroke:"#333",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M32.5 18.333v3.75h-3.75",stroke:"#333",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("defs",{children:(0,o.jsxs)("filter",{id:"ic_tick-circle_svg__filter0_d_747_17320",x:".001",y:"-.008",width:50,height:50,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{}),(0,o.jsx)("feGaussianBlur",{stdDeviation:2}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_747_17320"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_747_17320",result:"shape"})]})})]}))),D=e=>{var i;let{awemeInfo:l,onClose:a,onPaySuccess:D,onPayTimeout:y,logParams:C,paidLiveData:b,visible:k}=e,[O,N]=(0,r.useState)("");(0,r.useRef)();let P=(0,r.useRef)(0);(0,r.useRef)(!1);let[V,x]=(0,r.useState)(void 0),[w,L]=(0,r.useState)(!1),j=(0,r.useCallback)(async()=>{var e,i,l,o,r;x(void 0),N("");let[a,s="{}"]=null==b?void 0:null===(l=b.ticket_session)||void 0===l?void 0:null===(i=l.prepay_cashier_jump_url)||void 0===i?void 0:null===(e=i.split)||void 0===e?void 0:e.call(i,"?"),_=u.parse(s),f=await (0,I.kH)({jsonParams:JSON.stringify((0,n._)((0,t._)({},_),{origin_appid:"6383",schema_type:"1",use_new_api:"1",mix_short_name:encodeURIComponent((null==s?void 0:s.mix_short_name)||"")})||{})});(null==f?void 0:f.statusCode)===0?(N(null==f?void 0:null===(o=f.data)||void 0===o?void 0:o.url),x(!1)):(d.oe.event.error({name:d.Mo.PaidVideoQRCodeError,report:{enterFrom:(0,c.mo)(),enterFromMerge:(0,v.yW)(),buySchema:null==b?void 0:null===(r=b.ticket_session)||void 0===r?void 0:r.prepay_cashier_jump_url,logId:null==f?void 0:f.logId}}),x(!0))},[b]);(0,r.useEffect)(()=>{var e;(null==b?void 0:null===(e=b.ticket_session)||void 0===e?void 0:e.prepay_cashier_jump_url)&&j()},[null==b?void 0:null===(i=b.ticket_session)||void 0===i?void 0:i.prepay_cashier_jump_url]);let T=(0,r.useMemo)(()=>{var e,i,t,n,o,r,a;return{enter_from:(0,_.Rs)("enter_from"),module:decodeURIComponent((0,_.Rs)("module")||""),enter_from_merge:(0,v.yW)(),previous_page:(0,_.Rs)("previous_page"),group_id:null==l?void 0:l.awemeId,author_id:null==l?void 0:null===(e=l.authorInfo)||void 0===e?void 0:e.uid,ce_content_id:(null==l?void 0:null===(i=l.seriesInfo)||void 0===i?void 0:i.seriesId)||(null==l?void 0:null===(t=l.mixInfo)||void 0===t?void 0:t.mixId)||"",ce_content_type:(0,f.a)(l),ce_item_id:String((null==l?void 0:null===(n=l.seriesInfo)||void 0===n?void 0:n.currentEpisode)||(null==l?void 0:null===(o=l.mixInfo)||void 0===o?void 0:o.currentEpisode)),is_trailer:(null==l?void 0:null===(a=l.chargeInfo)||void 0===a?void 0:null===(r=a.preview_config)||void 0===r?void 0:r.is_preview)?1:0,from_group_id:null==C?void 0:C.from_group_id}},[C,l]);return(0,r.useEffect)(()=>{m.logInstance.sendLog("pcPaymentPopupShow",(0,t._)({button_type:"scan"},T))},[]),(0,r.useEffect)(()=>{w&&m.logInstance.sendLog("pcPaymentPopupShow",(0,n._)((0,t._)({},T),{button_type:"refresh"}))},[w]),(0,o.jsxs)("div",{className:E.default.container,style:{display:k?"block":"none"},children:[(0,o.jsxs)("div",{className:E.default.title,children:[(0,o.jsx)("span",{children:"抖音App扫码购买"}),(0,o.jsx)(A.Z,{src:p,width:28,height:28,viewBox:"0 0 28 28",onClick:e=>{e.stopPropagation(),P.current=0,null==a||a()},style:{cursor:"pointer"}})]}),(0,o.jsxs)("div",{className:E.default.box,children:[void 0===V&&!O&&(0,o.jsx)(g.gb,{}),V&&(0,o.jsxs)("div",{className:s()(E.default.timeoutMask,E.default.smallBtnGrayContainer),onClick:async()=>{await j()},children:[(0,o.jsx)("div",{className:E.default.mask}),(0,o.jsxs)("div",{className:E.default.timeoutBox,children:[(0,o.jsx)(A.Z,{src:h,width:50,height:50,viewBox:"0 0 50 50"}),(0,o.jsx)("div",{className:E.default.mainTitle,children:"抖音码获取失败"}),(0,o.jsx)("div",{children:"点击刷新"})]})]}),O&&(0,o.jsx)("img",{src:O,onError:()=>{x(!0)},onLoad:()=>{x(!1)}}),w&&(0,o.jsxs)("div",{className:s()(E.default.timeoutMask,E.default.smallBtnGrayContainer),onClick:async()=>{m.logInstance.sendLog("pcPaymentPopupClick",(0,n._)((0,t._)({},T),{button_type:"refresh"})),L(!1),P.current=0,await j()},children:[(0,o.jsx)("div",{className:E.default.mask}),(0,o.jsxs)("div",{className:E.default.timeoutBox,children:[(0,o.jsx)(A.Z,{src:h,width:50,height:50,viewBox:"0 0 50 50"}),(0,o.jsx)("div",{className:E.default.mainTitle,children:"二维码已过期"}),(0,o.jsx)("div",{children:"点击刷新"})]})]})]})]})}},181139:function(e,i,l){l.d(i,{h:function(){return a}}),l(874386);function t(e,i){return Math.random()*(i-e)+e}let n=[[0,20],[20,70],[20,70],[70,80]],o=[[0,90],[0,20],[75,90],[0,90]],r=[0,1,2,3],a=()=>{let e=function(e){let i=[...e],l=Math.floor(Math.random()*i.length);return i[l]}(r);return{new_left:t(n[e][0],n[e][1]),mew_top:t(o[e][0],o[e][1])}}},622962:function(e,i,l){l.d(i,{f:function(){return a}}),l(209955);var t=l(201308),n=l(88648),o=l(111906),r=l(64814);function a(e){let i=(0,n.useContext)(o.qd);if(void 0===i)throw(0,t.g)("roomStore"),Error("roomStore must be used within Provider");return(0,r.oR)(i,e)}},790853:function(e,i,l){l.d(i,{q:function(){return o}}),l(779788);var t=l(791483),n=l(632766);function o(e){let{message:i,socketData:l}=e;(0,t.C)(()=>{var e,t,o;let r="websocketkey20230220",a=[];try{a=JSON.parse(null!==(t=null===(e=localStorage)||void 0===e?void 0:e.getItem(r))&&void 0!==t?t:"[]")}catch(e){}if(!!i)if(l)null==i||i.setWebsocketKey(l),null===(o=localStorage)||void 0===o||o.setItem(r,JSON.stringify(l));else{let e=function(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,n.ZP)({service_name:"webcast.douyin.live_pc",key:"message_websocket_params"}).then(e=>{var l;null==i||i.setWebsocketKey(e),null===(l=localStorage)||void 0===l||l.setItem(r,JSON.stringify(e))}).catch(t=>{l>1?e(l-1):null==i||i.setWebsocketKey(a)})};e(2)}},[i])}},289322:function(e,i,l){l.d(i,{g:function(){return n}});var t=l("88648");function n(e,i,l){return(0,t.useMemo)(()=>(e||i)&&l?i?{text:"红包",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAqCAYAAAAqAaJlAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG9SURBVHgB7dg/SwJhHAfw73PnkEOCjdZw6FRCQxQ5OLjYErjUFATZC6ipMWroFTS51dQQCNFog0OEFkGTOdkfKscSlxrOe3qeRwJByefOewqO5wPHnfLznq/3/M7nENA0TeMIXKKUZtjOgn9ahJAz+I0F3aNqlOEndkKLqpUZlsGAPAtqWcMK3IT9d8EMa68X4FQfoAI/b2frZGhdCLKqz7CvCiBTUZjbWZDFODueGDiwc1gCff0AImGY+TSMlfm+Otr+BC3ewrmoic8QicsmH/ZnEBbC3jkVx2QmxkInYKTiwGQUaH/BXiv0VHdrTfa+kU2C1pvd2am/eZol6UWBVh4zdvGm7Fw3AH7V/BIZY182AZKby4eWZ49/K5W/sikLIbZxTqnWnT6vwXlAPiO8lVYXQNhrGa7bgDOWkmLj6H1TtAaf4s7RpWiFQUSfs34n0zHRPl54CttL9C0fnIcfD6NzcN5Xw28wHnZUvv7OmpvpvlD85jN3c/hTfO2WXeSdl3faqTTE3oWNYRlGboNBRG+yzW/62UAVHVYVHVYVHVYVHVaVwIZ9glot+Ik9Ge1TNe5kxg/uH3OapgXYNzeh8BuGJMJ2AAAAAElFTkSuQmCC"}:e?{text:"福袋",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAqCAYAAAAqAaJlAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGNSURBVHgB7ZjhTcMwEIVfEAOECTAT0A3ICN0A2KAb0A1gA2AEJqBMwAgJE9ANDlt2RRpV8V1ytqLKn3R/krPv6XL22QEKhcIyIaLa2lo4Zm3NIBdB5JO132D14L052ImxLXlek4u2AZpewAPPQfxnED/kO/hsBs9baw/c2BUEhAy21mroclVV1T7mdAEBYcJH6PLGETqZ8Lk1aElQt6LM9nDZ1cjGu81qh9TYjGxpHq0wJC4xEZsRJ/Ya0/nAOSPauoaQYI88wS5LvTrId6BZNUs52i75bqWB62zaDeZIaEO6bLmxxTVLfssx0MPt1zfq7dZlFbpCHa4MNhxHaQe7RxpY80pPXdol0Cd68mJnNqxag3Q0MQdJGayQFhNzkIhtkJbbmINEbHSymTQxB4lYg7SYWDdjiQ2TpK5ZxGJwM5tDaDTO0sSOrguu2DvkQSWzBnlYjS2ypYl1zBa7Qx66sasO93br/hP8wC8AA/3zbGfty9rLmOPkCyP5+1ON/89mGMP2fct2YSwUCnH+AHt0QXc2NcYoAAAAAElFTkSuQmCC"}:{text:"",icon:null}:{text:"",icon:null},[e,i,l])}},162787:function(e,i,l){l.d(i,{X:function(){return V}});var t=l("520739"),n=l("878389");l("874386"),l("250440");var o=l("563097"),r=l("713097"),a=l.n(r),s=l("645260"),u=l.n(s),d=l("96008"),c=l.n(d),v=l("88648"),_=l("776729"),f=l("172334"),m=l("512358"),A=l("693314"),g=l("368136"),I=l("825035"),E=l("9034"),p=l("996990"),h=l("326473"),D=l("471957"),y=l("703114"),C={DEFAULT:0,0:"DEFAULT",GUEST:1,1:"GUEST"},b=e=>{let{type:i=0,isLock:l,cls:t,handleClick:n,joinText:r}=e;return(0,o.jsxs)("div",{onClick:n,className:a()(y.default.joinContainer,t),"data-e2e":"mic_seat",children:[(0,o.jsx)("div",{className:y.default.joinIcon,children:(0,o.jsx)("span",{className:a()(y.default.joinSvg,{[y.default.lockIcon]:l,[y.default.guestLockIcon]:1===i&&l,[y.default.joinGuest]:1===i})})}),(0,o.jsx)("span",{className:y.default.joinText,children:r})]})},k=l("930302"),O=l("648527"),N=l("67680"),P=l("464315");let V=e=>{var i,l,r,s;let{user:d,className:y,onJoinRoom:V,disable:x,onUserClick:w,isLock:L,showAnchorLabel:j,playModesPC:T,orderSingInfo:S,setFloatModal:M,avatarBorderColor:R,joinText:U=O.p.JOIN_CHAT,setRankParam:B,setRankListShow:G,teamfightInfo:H,guestBattleInfo:F,giftLabelBackgroundColor:Q,selfUidStr:Y,giftLabelIcon:K="",giftLabelStyle:Z={},allowSendGiftGuest:z=!0,onHover:W,isMvp:J,isRed:X,mvpIcon:q,position:$,singV3Ab:ee="0",animationMap:ei,mvpUseridRef:el,mvpChangeRef:et,audioPower:en,isCrossLink:eo=!1,roomBattleType:er="pk",dynamic:ea=!1,isAudioStage:es=!1,giftLabelMerge:eu=!1}=e,[ed,ec]=v.useState(!1);v.useRef("");let ev=v.useMemo(()=>(null==d?void 0:d.is_background)===1,[d]),e_=v.useMemo(()=>(null==d?void 0:d.silence_status)!==_.Ai.STATUS_UNSILENCE,[d]),{isGuestBattle:ef}=(0,D.Z)({guestBattleInfo:F}),{giftNum:em,isGroupFight:eA}=(0,k.Z)({listUser:d,teamfightInfo:H,selfUidStr:Y,guestBattleInfo:F,isCrossLink:eo,roomBattleType:er}),eg=v.useCallback(e=>{e.talk>0?ec(!0):!e.talk&&ec(!1)},[]),{gameType:eI}=(0,P.zL)(),eE=v.useMemo(()=>{var e,i,l,o,r,a,s;let u=[];return S&&(null==S||null===(e=S.user_microphone_list)||void 0===e||e.forEach(e=>{if(e.is_singing){var i,l,o,r;(null==e?void 0:null===(i=e.microphone_list)||void 0===i?void 0:i[0].title_sponsor)&&(u=[(0,n._)((0,t._)({},null==e?void 0:null===(l=e.microphone_list)||void 0===l?void 0:l[0]),{toUserId:null!==(r=null==e?void 0:null===(o=e.order_user)||void 0===o?void 0:o.id_str)&&void 0!==r?r:""})])}})),F&&(u=null==F?void 0:null===(i=F.results)||void 0===i?void 0:i.filter(e=>{var i,l;return String(null==e?void 0:null===(i=e.user)||void 0===i?void 0:i.id_str)===String(null==d?void 0:null===(l=d.user)||void 0===l?void 0:l.id_str)},[])),H&&(eI===N.D$.ROOMBATTLE?null==H||null===(a=H.team_infos)||void 0===a||null===(r=a.filter(e=>(null==e?void 0:e.team_id)==="1"))||void 0===r||null===(o=r[0])||void 0===o||null===(l=o.players)||void 0===l||l.forEach(e=>{var i;(null==e?void 0:e.title_sponsor)&&String(null==e?void 0:e.user_id)===String(null==d?void 0:null===(i=d.user)||void 0===i?void 0:i.id_str)&&(u=[e])}):null==H||null===(s=H.team_infos)||void 0===s||s.forEach(e=>{var i;null==e||null===(i=e.players)||void 0===i||i.forEach(e=>{var i;(null==e?void 0:e.title_sponsor)&&String(null==e?void 0:e.user_id)===String(null==d?void 0:null===(i=d.user)||void 0===i?void 0:i.id_str)&&(u=[e])})})),u||[]},[F,H,S]),ep=e=>{null==e||e.stopPropagation(),B({teamfight_id:eA?null==H?void 0:H.teamfight_id_str:null==F?void 0:F.battle_id_str,user:null==d?void 0:d.user,isGuestContribution:ef}),G(!0)};v.useEffect(()=>d?(null==en||en.on(null==d?void 0:d.linkmic_id_str,eg),()=>{ec(!1),null==en||en.off(null==d?void 0:d.linkmic_id_str,eg)}):c(),[eg,null==d?void 0:d.linkmic_id_str,en]);let eh=v.useMemo(()=>{if(!ef||!(null==d?void 0:d.user.id_str)||!(null==F?void 0:F.battle_id))return"";let e=null==F?void 0:F.status,i=null,l=null==ei?void 0:ei.get(`${null==d?void 0:d.user.id_str}_${null==F?void 0:F.battle_id}`);return(null==F||F.results.forEach(l=>{var t,n,o;if(String(l.guest_id)===String(null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.id_str)){if([1,4].includes(Number(e))&&(null==l?void 0:l.role)===1)switch(Number(null==l?void 0:null===(o=l.crown_info)||void 0===o?void 0:null===(n=o.cur_grade)||void 0===n?void 0:n.level)){case 1:i="CrystalCrown";break;case 2:i="GemstoneCrown";break;case 3:i="DiamondCrown";break;default:i="Knuckle"}[1,4].includes(Number(e))&&(null==l?void 0:l.role)===2&&(i="HeartBreak"),(null==l?void 0:l.role)===0&&(i=""),2===Number(e)&&(null==l?void 0:l.role)===1&&(i="Victory")}}),l===i)?"":(null==ei||ei.set(`${null==d?void 0:d.user.id_str}_${null==F?void 0:F.battle_id}`,i),i)},[null==F?void 0:F.status,null==F?void 0:F.results,ef,null==d?void 0:null===(i=d.user)||void 0===i?void 0:i.id_str,null==F?void 0:F.battle_id]),eD=v.useMemo(()=>{if(!ef)return"";let e="";return null==F||F.results.forEach(i=>{var l,t,n;if(String(i.guest_id)===String(null==d?void 0:null===(l=d.user)||void 0===l?void 0:l.id_str)){if((null==i?void 0:i.role)===1)switch(Number(null==i?void 0:null===(n=i.crown_info)||void 0===n?void 0:null===(t=n.cur_grade)||void 0===t?void 0:t.level)){case 1:e="CrystalCrown";break;case 2:e="GemstoneCrown";break;case 3:e="DiamondCrown";break;default:e="Knuckle"}(null==i?void 0:i.role)===2&&(e="HeartBreak")}}),e},[d,F,ef]),ey=v.useMemo(()=>(null==T?!!void 0:!!T.includes(p.V0.LinkmicPlayMode_OrderSing))||!1,[T]),eC=v.useMemo(()=>{var e;let i={};return null==S||S.user_microphone_list.forEach(e=>{var l,t,n,o,r;i[null==e?void 0:null===(l=e.order_user)||void 0===l?void 0:l.id_str]={userId:null==e?void 0:null===(t=e.order_user)||void 0===t?void 0:t.id_str,is_singing:null==e?void 0:e.is_singing,currentSingItem:null==S?void 0:S.current_sing_item,golden_microphone_icon:null==S?void 0:S.golden_microphone_icon,live_linkmic_order_sing_micro_opt:null==S?void 0:S.live_linkmic_order_sing_micro_opt,goldenCount:null===(r=e.microphone_list)||void 0===r?void 0:null===(o=r.filter(e=>e.microphone_type===f.W5.GOLDEN_MICROPHONE))||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.micro_phone_num}}),i[null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.id_str]},[S,d]),eb=v.useCallback(e=>{e.stopPropagation(),M(E.uH.ORDER_SING)},[M]),ek=(null===(l=(null!==(s=null==F?void 0:F.results)&&void 0!==s?s:[]).filter(e=>{var i,l;return String(e.guest_id)===(null==d?void 0:null===(i=d.user)||void 0===i?void 0:i.id_str)||String(e.guest_id_str)===(null==d?void 0:null===(l=d.user)||void 0===l?void 0:l.id_str)}))||void 0===l?void 0:l.length)>0,eO=v.useRef();return d?(0,o.jsxs)("div",{onClick:w,className:a()(h.default.userContainer,y,{[h.default.dynamicAudioItem]:ea&&!es,[h.default.audioStageUserScale]:ea&&es}),onMouseEnter:e=>null==W?void 0:W(e,eO),ref:eO,"data-e2e":"mic_seat",children:[(0,o.jsx)(A.b,{img:u()(d,"user.avatar_large.url_list[0]",""),isTalking:ed&&!e_,gender:null===(r=d.user)||void 0===r?void 0:r.gender,user:d,className:a()(h.default.avatar,{[h.default.userAdjust]:ea&&es}),isLeave:ev,borderColor:R,battleIcon:eD,battleAnimation:eh,showAnchorLabel:j&&!ey,isMvp:J,mvpIcon:q,mvpUseridRef:el,mvpChangeRef:et,titleSponsor:eE}),es?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(g._,{isMute:e_,noName:!0,className:h.default.userNameRight})}):(0,o.jsxs)(o.Fragment,{children:[ey&&(0,o.jsx)(I._,{className:h.default.micphoneLabel,onClick:eb,isAnchor:j&&!ey,labelInfo:eC,singV3Ab:ee,user:d,position:$,titleSponsor:eE}),eu?(0,o.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,o.jsx)("div",{style:{flex:"1 1 0%",minWidth:0},children:(0,o.jsx)(g._,{isMute:e_,className:h.default.userName,userName:u()(d,"user.nickname",""),onClick:ep})}),z&&(0,o.jsx)("div",{style:{flex:"0 0 auto",marginLeft:8},children:(0,o.jsx)(m.X,{giftNum:em,isJoinGuestBattle:ek,onClick:ep,showGiftIcon:!Q,background:Q,giftLabelIcon:K,type:ef?m.l.GUEST:m.l.DEFAULT,giftLabelStyle:Z,isMvp:J,isRed:X,mvpIcon:q,style:{position:"relative"},guestBattleInfo:F,user:d})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g._,{isMute:e_,className:h.default.userName,userName:u()(d,"user.nickname",""),onClick:ep}),z&&(0,o.jsx)(m.X,{giftNum:em,isJoinGuestBattle:ek,onClick:ep,showGiftIcon:!Q,background:Q,giftLabelIcon:K,type:ef?m.l.GUEST:m.l.DEFAULT,giftLabelStyle:Z,isMvp:J,isRed:X,mvpIcon:q,style:{position:"relative"},guestBattleInfo:F,user:d})]})]})]}):(0,o.jsx)(b,{type:ef?C.GUEST:C.DEFAULT,cls:a()(y,{[h.default.dynamicAudioItem]:ea}),isLock:L,joinText:U,handleClick:x||L?c():V})}},525465:function(e,i,l){l.d(i,{s:function(){return D}}),l("874386"),l("250440");var t=l("563097"),n=l("713097"),o=l.n(n),r=l("88648"),a=l("734123"),s=l("561346"),u=l("805591"),d=l("9034"),c=l("531288"),v=l("283359"),_=l("529907"),f=l("727795"),m=l("509090"),A=l("582746"),g=l.p+"media/bg.394717bcadc491f0.png",I=l("841131"),E=l("559106");let p={[d.yP.AUDIO_1V8]:80,[d.yP.AUDIO_1V8_STAGE]:80,[d.yP.AUDIO_GRID]:80,[d.yP.VIDEO_1V6]:42.5,[d.yP.VIDEO_DYNAMIC]:63.56,[d.yP.VIDEO_GRID]:62.45,[d.yP.VIDEO_6V6]:61,[d.yP.VIDEO_2V4V4]:50.6},h=16/9,D=e=>{let{isAdmin:i=!1,roomId:l="",layout:n,renderElement:D,className:y,isTheaterOn:C,statusText:b,teamfightInfo:k,onClickStatusBar:O,isPreview:N,incomingPlayer:P=null}=e,{eventStore:V,linkmicStore:x}=(0,A.Z)(),{linkmicEvent:w}=V||{},L=r.useRef(),[j,T]=r.useState(h),{isInPunish:S,leftTeamScore:M,rightTeamScore:R}=(0,_.Z)({teamfightInfo:k}),{player:U}=(0,u.n)(),B=P||U,G=r.useCallback(()=>{var e,i;let l=null==B?void 0:null===(e=B.root)||void 0===e?void 0:e.clientWidth,t=null==B?void 0:null===(i=B.root)||void 0===i?void 0:i.clientHeight;return l&&t?l/t:h},[]),H=r.useCallback(()=>{clearTimeout(L.current),L.current=setTimeout(()=>{T(G())},50)},[]);r.useEffect(()=>(null==B||B.on(a.Events.FULLSCREEN_CHANGE,H),()=>{null==B||B.off(a.Events.FULLSCREEN_CHANGE,H)}),[]);let F=r.useCallback(()=>{T(G())},[]);r.useEffect(()=>(window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}),[]),r.useEffect(()=>{H()},[C]);let Q=r.useMemo(()=>`${p[n]*h/j}%`,[j,n]),Y=r.useMemo(()=>null==k?void 0:k.status,[k]),K=r.useCallback(()=>(0,t.jsx)("div",{className:v.default.source,children:(0,t.jsx)(c.Z,{teamFightInfo:k,eggModeInfo:null==x?void 0:x.eggModeInfo,leftPKScore:M,rightPKScore:R,showAroundFaceStatus:S})}),[M,R,S,null==x?void 0:x.eggModeInfo]),Z=Y===s.Hj.LinkmicTeamfightStatus_PREPARE&&i,z=()=>(0,t.jsx)("div",{className:v.default.actionBar,onClick:()=>$(),children:"开始团战"}),{hideEgg:W,isMutiEggTimeUseful:J}=(0,E.Z)(),X=r.useMemo(()=>(0,t.jsx)(I.Z,{isVideoGuropFight:!1,isGroupFight:!0,eggModeInfo:null==x?void 0:x.eggModeInfo}),[null==x?void 0:x.eggModeInfo]),q=r.useMemo(()=>{var e;return(0,t.jsxs)("div",{className:v.default.audioGridContainer,style:{width:Q},children:[(0,t.jsx)("div",{className:o()(v.default.mediumAudioItem,v.default.anchorItem),children:D(0)}),(null==x?void 0:null===(e=x.eggModeInfo)||void 0===e?void 0:e.egg_info)&&J&&[s.Hj.LinkmicTeamfightStatus_PLAYING,s.Hj.LinkmicTeamfightStatus_PUNISHING].includes(Y)&&X,(0,t.jsxs)("div",{className:v.default.seatsGroupContainer,children:[(0,t.jsxs)("div",{className:v.default.topBar,children:[K(),Z?z():b&&!N&&(0,t.jsx)("div",{className:v.default.status,onClick:()=>null==O?void 0:O(),children:b})]}),[void 0,void 0].map((e,i)=>{var l;return(0,t.jsxs)("div",{className:v.default.gridsArea,children:[(null==x?void 0:null===(l=x.eggModeInfo)||void 0===l?void 0:l.egg_info)&&J&&[s.Hj.LinkmicTeamfightStatus_PLAYING,s.Hj.LinkmicTeamfightStatus_PUNISHING].includes(Y)&&(0,t.jsxs)("div",{className:W?v.default.hide:v.default.show,children:[(0,t.jsx)("div",{className:v.default.eggLeftSide,style:{backgroundImage:`${0===i?"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))":"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}`}}),(0,t.jsx)("div",{className:v.default.eggRightSide,style:{backgroundImage:`${0===i?"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))":"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}`}})]}),(0,t.jsxs)("div",{className:v.default.gridsBox,children:[(0,t.jsx)("div",{className:v.default.grid,children:[void 0,void 0].map((e,l)=>(0,t.jsx)("div",{className:v.default.mediumAudioItem,children:D(4*l+1+2*i)},`${i}_${l}`))}),(0,t.jsx)("div",{className:v.default.grid,children:[void 0,void 0].map((e,l)=>(0,t.jsx)("div",{className:v.default.mediumAudioItem,children:D(4*l+2+2*i)},`${i}_${l}`))})]})]},i)})]})]})},[D,Q,b,K,Y,Z,null==x?void 0:x.eggModeInfo]),$=()=>{null==w||w.liveGroupFightStart(),(0,f.lV)({room_id:l}).then(e=>{var i,l,t,n;(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.prompts)?(m.F.info(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.prompts,null==B?void 0:B.root),null==w||w.liveGroupFightStartSuccess("fail_member_cnt")):null==w||w.liveGroupFightStartSuccess("success")})};return r.useEffect(()=>{null==x||x.setLayoutBackgroundImg(n===d.yP.AUDIO_1V8||n===d.yP.AUDIO_GRID||n===d.yP.AUDIO_1V8_STAGE?g:"")},[n]),r.useEffect(()=>()=>{null==x||x.setLayoutBackgroundImg("")},[]),(0,t.jsx)("div",{className:o()(v.default.container,y,{[v.default.audioBackground]:[d.yP.AUDIO_GRID,d.yP.AUDIO_1V8_STAGE,d.yP.AUDIO_1V8,d.yP.AUDIO_DOUBLE_C].includes(n)}),children:(n===d.yP.AUDIO_1V8||n===d.yP.AUDIO_GRID||n===d.yP.AUDIO_1V8_STAGE)&&q})}},350416:function(e,i,l){l.d(i,{PY:function(){return b}}),l(874386),l(250440);var t=l(563097),n=l(713097),o=l.n(n),r=l(88648),a=l(734123),s=l(805591),u=l(362608),d=l(9034),c=l(582051),v=l(727795),_=l(984216),f=l(779145),m=l.n(f),A=l(561346),g=l(529907),I=l(531288),E=l(509090),p=l(582746),h=l(841131),D=l(559106);let y={[d.yP.AUDIO_1V8]:50.4,[d.yP.AUDIO_GRID]:42,[d.yP.VIDEO_1V6]:42.5,[d.yP.VIDEO_1V8]:42.5,[d.yP.VIDEO_DYNAMIC]:63.56,[d.yP.VIDEO_GRID]:62.45,[d.yP.VIDEO_6V6]:61,[d.yP.VIDEO_1_V_8]:63.56,[d.yP.VIDEO_1_V_6]:63.56,[d.yP.VIDEO_1_V_3]:63.56,[d.yP.VIDEO_DYNAMIC_FLOAT]:32,[d.yP.VIDEO_T1_V_B8]:43},C=16/9,b=e=>{let{layout:i,renderElement:l,className:n,backgroundImg:f,isTheaterOn:b,micSeats:k,teamfightInfo:O,ext:N={},isAdmin:P=!1,roomId:V,onClickStatusBar:x,isPreview:w=!1,incomingPlayer:L=null}=e,{eventStore:j,linkmicStore:T}=(0,p.Z)(),{linkmicEvent:S}=j||{},{isInPunish:M,leftTeamScore:R,rightTeamScore:U,statusTexting:B,redGroupSeats:G}=(0,g.Z)({teamfightInfo:O}),H=r.useRef(),[F,Q]=r.useState(C),{player:Y}=(0,s.n)(),K=L||Y,Z=r.useCallback(()=>{var e,i;let l=null==K?void 0:null===(e=K.root)||void 0===e?void 0:e.clientWidth,t=null==K?void 0:null===(i=K.root)||void 0===i?void 0:i.clientHeight;return l&&t?l/t:C},[]),z=r.useCallback(()=>{clearTimeout(H.current),H.current=setTimeout(()=>{Q(Z())},50)},[]);r.useEffect(()=>(null==K||K.on(a.Events.FULLSCREEN_CHANGE,z),()=>{null==K||K.off(a.Events.FULLSCREEN_CHANGE,z)}),[]);let W=r.useCallback(()=>{Q(Z())},[]);r.useEffect(()=>(window.addEventListener("resize",W),()=>{window.removeEventListener("resize",W)}),[]),r.useEffect(()=>{z()},[b]);let J=r.useMemo(()=>`${y[i]*C/F}%`,[F,i]),X=r.useMemo(()=>null==O?void 0:O.status,[O]),{hideEgg:q,isMutiEggTimeUseful:$}=(0,D.Z)(),ee=r.useMemo(()=>(0,t.jsx)(h.Z,{isVideoGuropFight:!0,isGroupFight:!0,eggModeInfo:null==T?void 0:T.eggModeInfo}),[null==T?void 0:T.eggModeInfo]);r.useEffect(()=>{X===A.Hj.LinkmicTeamfightStatus_FINISHED&&(null==T||T.setEggModeInfo({}))},[X]);let ei=r.useCallback(()=>(0,t.jsx)("div",{className:u.default.sourceBar,children:[A.Hj.LinkmicTeamfightStatus_PLAYING,A.Hj.LinkmicTeamfightStatus_PUNISHING].includes(X)?(0,t.jsx)(I.Z,{teamFightInfo:O,eggModeInfo:null==T?void 0:T.eggModeInfo,leftPKScore:R,rightPKScore:U,showAroundFaceStatus:M}):(0,t.jsx)("div",{className:u.default.emptyBar})}),[R,U,M,J,X]),el=()=>{null==S||S.liveGroupFightStart(),(0,v.lV)({room_id:V}).then(e=>{var i,l,t,n;(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.prompts)?(E.F.info(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.prompts,null==K?void 0:K.root),null==S||S.liveGroupFightStartSuccess("fail_member_cnt")):null==S||S.liveGroupFightStartSuccess("success")})},et=()=>(0,t.jsx)("div",{className:u.default.actionBar,onClick:e=>{el()},children:"开始团战"}),en=X===A.Hj.LinkmicTeamfightStatus_PREPARE&&P,eo=r.useMemo(()=>{var e,i;return(0,t.jsxs)("div",{className:o()(u.default.videoT1B8Container),style:{width:J},children:[(0,t.jsx)("div",{className:o()(u.default.anchor,"__clairvoyance"),children:l(0)}),(null==T?void 0:null===(e=T.eggModeInfo)||void 0===e?void 0:e.egg_info)&&$&&[A.Hj.LinkmicTeamfightStatus_PLAYING,A.Hj.LinkmicTeamfightStatus_PUNISHING].includes(X)&&ee,!w&&(0,t.jsxs)("div",{className:u.default.topBar,children:[ei(),en?et():B&&(0,t.jsx)("div",{className:u.default.status,onClick:e=>{null==x||x(e)},children:B})]}),(0,t.jsxs)("div",{className:u.default.guests,children:[(null==T?void 0:null===(i=T.eggModeInfo)||void 0===i?void 0:i.egg_info)&&$&&[A.Hj.LinkmicTeamfightStatus_PLAYING,A.Hj.LinkmicTeamfightStatus_PUNISHING].includes(X)&&(0,t.jsxs)("div",{className:`${u.default.eggModeAnimate} ${q?u.default.hide:u.default.show}`,children:[(0,t.jsxs)("div",{className:u.default.eggModeAnimateChild,children:[(0,t.jsx)("div",{className:u.default.eggLeftSide,style:{backgroundImage:"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))"}}),(0,t.jsx)("div",{className:u.default.eggRightSide,style:{backgroundImage:"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))"}})]}),(0,t.jsxs)("div",{className:u.default.eggModeAnimateChild,children:[(0,t.jsx)("div",{className:u.default.eggLeftSide,style:{backgroundImage:"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}}),(0,t.jsx)("div",{className:u.default.eggRightSide,style:{backgroundImage:"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}})]})]}),[void 0,void 0].map((e,i)=>(0,t.jsx)("div",{className:u.default.gridRow,children:[void 0,void 0,void 0,void 0].map((e,n)=>{var r,a;let s=n+1+4*i;return(0,t.jsx)("div",{className:o()(u.default.videoItem,"videoItem","__clairvoyance",{[u.default.red]:G.includes(s)&&!(null==k?void 0:null===(r=k[s])||void 0===r?void 0:r.user),[u.default.blue]:!G.includes(s)&&!(null==k?void 0:null===(a=k[s])||void 0===a?void 0:a.user)}),children:l(s)},`${i}_${n}`)})},i))]})]})},[l,J,ei,B,et,k,w,null==T?void 0:T.eggModeInfo]),[er,ea]=r.useState({}),es=r.useRef(null);r.useEffect(()=>(es.current=setTimeout(()=>{ea({})},300),()=>{es.current&&clearTimeout(es.current)}),[F,i]);let eu=r.useMemo(()=>{try{var e;let i=document.getElementsByClassName("__clairvoyance");return null===(e=m()(i))||void 0===e?void 0:e.map(e=>(0,_._q)(null==K?void 0:K.root,e))}catch(e){return[]}},[k,F,i,er]);return(0,t.jsxs)("div",{className:o()(u.default.container,n,{[u.default.audioBackground]:[d.yP.AUDIO_GRID,d.yP.AUDIO_1V8,d.yP.AUDIO_DOUBLE_C].includes(i),[u.default.video6v6Background]:i===d.yP.VIDEO_6V6}),children:[(e=>{if(e===d.yP.VIDEO_T1_V_B8)return eo;return null})(i),i===d.yP.VIDEO_T1_V_B8&&f&&(0,t.jsx)(c.Z,{backgoundImgSrc:f,clairvoyancePaths:eu})]})}},58404:function(e,i,l){l.d(i,{G:function(){return m}});var t=l(520739),n=l(878389),o=l(368200);l(874386),l(413806),l(826893),l(268917);var r=l(563097),a=l(88648),s=l(765595),u=l(684767),d=l(713097),c=l.n(d),v=l(567754),_=l(327984),f=l(721222);let m=e=>{var{href:i,children:l,style:d,className:m,passParamKeys:A=[],spa:g,onClick:I,passParams:E={},firstTabName:p,onClickLog:h,title:D,stopPropagation:y,isHideUrl:C=!1,openMultiTaskWindowInWindow:b=!1}=e,k=(0,o._)(e,["href","children","style","className","passParamKeys","spa","onClick","passParams","firstTabName","onClickLog","title","stopPropagation","isHideUrl","openMultiTaskWindowInWindow"]);let[O,N]=a.useState(i);a.useEffect(()=>{N(i)},[i]);let P=a.useCallback(e=>{if(y&&e.stopPropagation(),I&&I(e),!i)return;h&&(0,f.Vd)({category_name:p,more_detail:D,enter_from:"hot_hover"});let[l,n]=i.split("?",2),o=[],r=(0,s.U)(A),a=(0,t._)({},window.__INVISIBLE_QUERY__||{},r,E),u=(0,v.stringify)(a);u&&o.push(u),n&&o.push(n);let d=l;o.length>0&&(d=[l,o.join("&")].join("?")),N(d)},[i,A,I,E,y,b]);return g?(0,r.jsx)(_.Link,(0,n._)((0,t._)({to:O||"",style:d,className:c()(m),onClick:P},k),{target:(0,u.f)()?"_self":k.target,children:l})):(0,r.jsx)("a",(0,n._)((0,t._)({href:C?void 0:O,className:m,style:d,onClick:P},k),{target:(0,u.f)()?"_self":k.target,children:l}))}},803480:function(e,i,l){l.d(i,{j:function(){return g}}),l(874386);var t=l(563097),n=l(713097),o=l.n(n),r=l(88648),a=l(774569),s=l(331991),u=l(59802),d=l(751365),c=l(441447),v=l(645260),_=l.n(v),f=l(618360),m=l(289322);let A=e=>{let i=String(Math.floor(100+Math.floor(e%60))).slice(1),l=String(100+Math.floor(e/60)).slice(1);return`${l}:${i}`},g=e=>{var i;let{count:l,className:n,title:v,showTitle:g,program:I,paidLiveData:E,isLogin:p=!1,viewType:h,showCount:D=!0,appointment:y,webEnterBenefitPointData:C,showRedPack:b=!1}=e,[k,O]=r.useState(0),N=r.useCallback(()=>(0,t.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.95765 2.59839C6.95765 3.66536 6.06542 4.53306 4.96128 4.54561H4.91349C3.80935 4.53306 2.91711 3.66536 2.91711 2.59839V1.94879C2.91711 0.872405 3.82209 0 4.93738 0C6.05268 0 6.95765 0.872405 6.95765 1.94879V2.59839ZM1.45988 6.17671C2.29926 5.77687 3.98475 5.55579 4.93675 5.55579C5.89025 5.55579 7.57874 5.77687 8.41962 6.17985C8.90764 6.45268 9.25 7.06419 9.25 7.7792V8.19036C9.25 8.72034 8.9692 9.16565 8.5833 9.30834C7.65982 9.57176 5.92479 9.71288 4.93825 9.71288C3.95021 9.71288 2.21367 9.56863 1.2887 9.30677C0.905796 9.16252 0.625 8.71877 0.625 8.18879V7.77763C0.625 7.06106 0.968862 6.44797 1.45988 6.17671Z",fill:"white",fillOpacity:"0.9"})}),[]),P=Number(_()(E,"paid_type",0))===f.xc.PAID_LIVE,V=Number(_()(E,"view_right",0)),x=_()(E,"ticket_session.ticket_session_id_str","");r.useEffect(()=>{let e=c.listen(c.EVENT.paidLiveDuration,e=>{P&&(null==e?void 0:e.ticket_id_str)&&e.ticket_id_str===x&&O(null==e?void 0:e.last_time)});return()=>e()},[x,P]);let w=r.useMemo(()=>C||{has_ongoing_lottery:!1,has_ongoing_lucky_money:!1},[C]),L=(0,m.g)(w.has_ongoing_lottery,w.has_ongoing_lucky_money,b),j=L.icon?(0,t.jsx)("img",{src:L.icon,className:u.default.redPackIcon}):null,T=r.useCallback(()=>{var e,i,l,n;if(P){if(p&&h===f.ku.TRY_WATCH_ING)return(0,t.jsx)(a.jR,{isFirstLive:(null==I?void 0:null===(e=I.mod)||void 0===e?void 0:e.episode_stage)===d.j.FIRST_LIVE})}else return(null==I?void 0:null===(i=I.mod)||void 0===i?void 0:i.episode_stage)===d.j.FIRST_LIVE?(0,t.jsx)(a.Sx,{className:u.default.liveTag,episodeStage:null==I?void 0:null===(l=I.mod)||void 0===l?void 0:l.episode_stage}):(0,t.jsx)(a.z,{className:u.default.liveTag,episodeStage:null==I?void 0:null===(n=I.mod)||void 0===n?void 0:n.episode_stage,prefixIcon:j})},[P,null==I?void 0:null===(i=I.mod)||void 0===i?void 0:i.episode_stage,p,h]),S=r.useMemo(()=>P&&!V&&k>0&&p,[P,V,k,p]);return(0,t.jsxs)("div",{className:o()(u.default.liveUserCount,n),children:[D&&T(),S&&(0,t.jsxs)("div",{className:u.default.countDown,children:["试看中 ",A(k)]}),!P&&l&&D&&(0,t.jsx)(s.A,{className:u.default.userCount,count:l,renderSVG:N}),D&&v&&g?(0,t.jsx)("span",{className:u.default.title,children:v}):!!y&&(0,t.jsx)("span",{className:u.default.title}),y]})}},840871:function(e,i,l){l.d(i,{j:function(){return s}});var t=l(520739),n=l(878389);l(250440);var o=l(88648),r=l(302461),a=l(567754);let s=e=>{let{href:i,isLiving:l,isActive:s,useF:u,onEnterRoom:d,enterLogParams:c,forceEnter:v,isInPWA:_,disabled:f=!1,abTestData:m={}}=e,A=(0,o.useCallback)(e=>{if(!(Array.from(document.querySelectorAll(".modal-video-container")).filter(e=>e.getBoundingClientRect().height>0).length>0)||0!==Array.from(document.querySelectorAll(".modal-video-container .liveSearchPlayer")).filter(e=>e.getBoundingClientRect().height>0).length){if(("F"===e.key||"f"===e.key)&&!e.shiftKey&&u){var o,r;if(e.stopPropagation(),e.preventDefault(),v){v();return}(i||(null===(r=location)||void 0===r?void 0:null===(o=r.href)||void 0===o?void 0:o.includes("/jingxuan")))&&l&&d({openLiveModal:!0,event:e,callback:()=>{let e="";e=i.indexOf("?")>=0?`${i}&${a.stringify((0,n._)((0,t._)({},c),{action_type:"hot_key"}))}`:`${i}?${a.stringify((0,n._)((0,t._)({},c),{action_type:"hot_key"}))}`,window.open(e,_?"_self":"_blank")}})}}},[i,s,l,d,_,u,c,v,m]);(0,r.o)(()=>{if(!f)return s&&document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[s,f,A])}},221358:function(e,i,l){l.d(i,{Z:function(){return A}}),l("602157"),l("874386");var t=l("563097"),n=l("713097"),o=l.n(n),r=l("88648"),a=l("101156"),s=l("122196"),u=l("556536"),d=l("48460"),c=l("727795"),v=l("579828"),_=l("167951"),f=l("127311"),m=l("840871"),A=e=>{let{className:i,description:l,enterText:n,href:A,abTestData:g,isInPWA:I,onEnterRoom:E,isLiving:p,isActive:h,enterLogParams:D,useF:y=!0,roomIdStr:C="",scene:b="web_feed",size:k="normal",forceEnter:O,useRedPack:N=!0,disableEnterRoomShotCut:P=!1,isHover:V,setIsHover:x,onMouseEnter:w,rawdata:L}=e,[j,T]=r.useState(!1),[S,M]=r.useState(!1),R=r.useCallback(async()=>{var e,i,l,t,n,o,r,a,s,u;let d=(0,v.a)(),f=await (0,c.aL)({room_id:C,scene:b,channel:"channel_pc_web",region:"cn",device_id:null===(e=(0,_.Es)())||void 0===e?void 0:e.user_unique_id,device_type:null==d?void 0:d.device_type,os_version:null==d?void 0:d.os,version_code:null==d?void 0:d.version_code,webcast_sdk_version:2450});200===Number(f.status)&&(null==f?void 0:null===(i=f.data)||void 0===i?void 0:i.data)&&(T((null==f?void 0:null===(o=f.data)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:null===(t=n.others)||void 0===t?void 0:null===(l=t.web_enter_benefit_point_data)||void 0===l?void 0:l.has_ongoing_lucky_money)||!1),M((null==f?void 0:null===(u=f.data)||void 0===u?void 0:null===(s=u.data)||void 0===s?void 0:null===(a=s.others)||void 0===a?void 0:null===(r=a.web_enter_benefit_point_data)||void 0===r?void 0:r.has_ongoing_lottery)||!1))},[C,b]);(0,m.j)({href:A,isLiving:p,isActive:h,isInPWA:I,onEnterRoom:E,enterLogParams:D,useF:y,forceEnter:O,disabled:P,abTestData:g});let U=r.useMemo(()=>!!j||!!S,[j,S]),B=r.useMemo(()=>j?"redPacket":S?"lottery":"",[g,j,S]),G=!f._.isOptmizeInvisibleLive(g)||h;r.useEffect(()=>{h&&R()},[h,R]);let H=r.useMemo(()=>{var e,i,l,t;return(null==g?!!void 0:!!g.douyinShowVrRoom)&&(1===Number(null==L?void 0:null===(e=L.extra)||void 0===e?void 0:e.vr_type)||2===Number(null==L?void 0:null===(i=L.extra)||void 0===i?void 0:i.vr_type)||(null==L?void 0:null===(t=L.pico_info)||void 0===t?void 0:null===(l=t.multi_stream_info)||void 0===l?void 0:l.multi_stream_scene)==="multi_camera")},[L,g]);return(0,t.jsxs)("div",{className:o()(d.default.liveDivideContainer,i,{[d.default.small]:"small"===k}),onMouseEnter:()=>{null==x||x(!0),null==w||w(!0)},children:[(0,t.jsx)("div",{className:o()(d.default.liveDivide,d.default.liveDivideAb),children:(0,t.jsxs)("div",{className:o()(d.default.textContent,d.default.textContentAb,{[d.default.isHoverd]:V}),children:[(!(U&&B)||!N)&&!H&&(0,t.jsx)(a.WaveLineAnimation,{className:G?"":d.default.hidden}),!!B&&U&&N&&!H&&(0,t.jsxs)(t.Fragment,{children:["redPacket"===B&&(0,t.jsx)(s.r,{className:G?"":d.default.hidden}),"lottery"===B&&(0,t.jsx)(u.J,{className:G?"":d.default.hidden})]}),H&&(0,t.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABZWSURBVHgB7VwLjJXVtd7nMQ8YYN4jDDPDDJVaoVDQi1zxRvA2qbltbfX2grmt8UK94iPegG289za1DLQmEqulGuurmooRixBFY4y1EGZqUDARqQo1PmdwUFGB4eGDOa/d79v/2oc9v/+ZOTNzZkD7r2TnnPP/+7H2eu211177KBVCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQggFh4gKYVCgta7AxyKUeSgV8ngNSnskEulUIQwfgPjNKB06GPi8OaBNKOwFgkgfxM8y4dChQ5UqDwsTV8MAwu1JKPPVwKETKtyeT0UZ5798jx9H++4828/Hx/dRZjqP/yp9tAeNl06nF+Frs33W09Pzu6NHj24tLy//TlFR0SXyuBm/l6L+SvSjTghwcnpw8AflSU6/mKNuq79tPqouuHX0g8dG7ZgS6TeayWTabYVPP/10bWVlJWhdTmmv+Oyzz9Y67R9bsGBBrD98oqrAIANGUqnUUFgfkUlEAvq3pQU/VzivOg8fPvwrp70Kwg1lEb62KUeKc8CFrKc9e28ezJ8/nwzI4gSCv5tMJkugFUX4WYTx/+aM1fzRRx9FVq5cGRF8AulRUAZwEAI4H4VqDqpvTOYo2rObKIr29a8iHrDvLe67Y8eO3VBRUdG1cOHC6IoVKzjxqB831GnG19X+MUHUd0DIrahz2PeK9dv27t1bxX7b29vJgHfsy9GjR5+D3zEWfI+XlpbOcOZxBO1iu3fvjhAfNRLASWKw6JlnnlnU3Nxcum3bttOffvrprz/55JPTH3/88Rm2PPHEE9/g5/vvv3+1q/NAes9LL710Gts76htx+2cBsVa67SCJD9bX148+9dRTS3xte+Hlmg8C+nn59ddf/+64ceOqUK2KpqSzs/NHxMNX75d4Tykf9e677/6n+w6CtguS/mvg8Kz7/IMPPriqoaFhFPHh2GokXH6ZdGzatGnFJAjt49ixY6vxrLasrOyUMWPG1LHw+3333fdPMFPvuEjv2rXrezU1NWPJPKh73K+2/I2JTvYz7dFHH/1GVVXVOI7JsYmD25YEQLt/ddtx7Ouvv/4rxAdVTgFO41n4e926dWeAWYec6t0QmFMAZWSWn9h+YN9kJvEhA1QfJmjYGIDPMiIBBtRwYlDRCfYT7yZ8/PHHT7lIQxtu4eTJNCKOOlZylJ0Af2vf4rlnz57/IYNlISxDKXYlzrYDUda47aCd/058UKUeONW7n3xOqXbrHzly5H8pHBSo6667bgrs/cNBxCdzKFzop6q2tnaMxedEMMDVACP1SiTNP7lPPvlkG941sB7b4HMUNUAdV1vjgUDae5keEGGdSG0t7H+FMI5jmwmjGOkXbepwJZSEHjVq1EQrGMSP36XUX3PNNV9zx4IZeoJaRsKyLtts3779B5wL3NA/wu+/e8eOHRexPQWJmkKNsSZIBzgFwwIifSReqUgAkeZWvZJItbW1zfdNrOumm246h8QgIWWSpcIAowE6wPQQwJDDlDho00MgxJXWdAnDjNbw97PPPlvntgOxHhZNpFmsJV6iQdZcGs1IJBKv2DY0SYJbJds42jzeMoTfpdRSkLgGWFM6IgyQgegFxcT2lRAJFkrD1q1bp/kXuA8//PA+EJ/STw2pZD3lk2L53qH7ARCpE0SbpY67ocYhwIL4LbdeV1fXchKNhBeilon2jBENNGbTb2ZWrVrVRE1jO1nLxltGWGZY6RfhK7EOgR4JN5S7PrqO69evz1xwwQVpcD999tlnJ0DUFIiQPOuss66MRqNNbhsg+mOo8HMgygLY2BRMVgqPM9Ak0x/dSTCtVfXvt7P+JOxGX8RkuTumIERgFiJg8CS3Xnd3dxfwSMOup0C4JExm8r333kvBi0oWFxenwIQkzGIGbmuX22769Onl0J5MPB5PoX0K46XxmL53hv2B+Gk+5/uSkpI0mJ9B39rSRY0kWK5rWQSpiq+++upXfd5FL8Ckb+D6YRctncP0EECc3WDcn3J4JN143kLpAyolBw8evNJ9+cILL1woJme0tdFiOlnfeHCU4gMHDtzktqNLjfdl1FKRcLsLrmJ90R4+H6WcxVf73OmRZoSyewNOjP4xFy1s45+jDfdTDs+udRnn991hFp6+9NJLueFpgWQ3ccG8//77z3TtNYFej/J891Iw4Ar33c6dO79v1xp3z6BlzeBaQlPjZwD3M3a/wSJmq8wWdy+ixBXWIx2K8APVj7tBmgIsuNEpU6Y8DDPzk+rq6ouhstP37dv3m14IRaPLYRoqufNctmxZC9rPs+9A1L2QviUwcUfwky6fIdrVV1/93vLlyy/Szk42Fot9b/PmzdxgRTmuO0ZdXV0D3mfw1ZoILbhqSLbGZkzDjKSDzAbw05D6DNa19IQJE5J4ZEwYC3/PmjUrRfMLXDJsb/vojxHDCRExBcXWj5YFq5ESjM8GunCupMGr+Saex6Ep/+E+hwn7ifKirJOw7Z+E9uyjgVrAAu262a2PdWUOzQW8oHPd59CI/1ee1PbaJFltpRmkiQGDn3TbWc+GuPnMS8zx9bN95QPDrgGEDRs28IMxHA2iZmB+jPSxgIARaMif3fpYSOfDDMRRv8V9DgJ3STsuggkQKMlFD7/NbKE5e9368FBmok10y5YtvRZTLLQ0YRrmJiv58soQD8zVcGupBY22DbRoFxZvhfgO69I8utKdaW1t1RJ6tn32okEuhgw7A8Ruc3HKYFJp2F56DkZ1QUB+z8Am9yIcTE0UZiCG90fd5zDLY/GRgOlKwIQkYAp6sHAnwNAUmQpm9BobBNsLqY1in3EUa0uWCdCWbz/yyCPlEAbjrlrikGj0vmgusVNuAgOm2zaM+WD8COx8VKZl22jH1OQU+1znAsPKAO0deHTAQ7gUZoj2Nk23D+qdAGF6YI6MBJ977rlT3XaY7FEwKgZP54j7fOLEiafTTYWGJCClPZDwHlZHXwl8pmDb/9mtj0X0KM0CCK3BjIftcxCj/Pzzz7/E+Z1FmT+xkEZmz579M7cvmK3nSGS4q9QcNQhaqBEBfdz93OiYz27Y+cn+DRrXBATEWgKCchfQvUPM5Suup0QX1noiEu4wffE3o6tuH9zw4V213eE+9dRT39S9ofutt96aojwhdL0Vat5lbkXiZ+NU9JDyOWgJoosabnCIH/HHbQAdmMhimIwzUDXGyUNCFzIkHDDZWi7WnDSkd52fsOjjv7EgV3Phg02uhsb8yr+/YIxG4lAmBMKdb0AAzeCEz5na23O0BOCtgetS9GPDJCWDYYAaoX2ACZoRwRdffLGWoQE9QGCUkoRnFJWfS5cuPY3xooH0QSbaUIM9MiRTr7rqqtP82tYfcH8hcZ5qaqzdKKoBgh6pWJAgZw5ksJid7o/99AUILTPkwGhirfICYyYms3Hjxm/lywQS+M477zxLoq80P+NEctnf+Ntvv31Ovkzgwnvvvfdm+5I4VZEenDkZHg3Q3plphXzPhqOJLHeTIN5M+PV/7GuiDCeQyPTlreRSauWkqo77hrvvvnuO3xy5wLWC+4AlS5Z8TfYZNSgVNmxAXGxfZEKueH6uvshEN9rKOdt55wmRvB/m2yEQ4LnsfPm9koU7WPj9cahrMdS3CL55HESNQCob586dOxUTmQYvZhwk+ggI37Vp06Zt3MmirygDWrDv9OtTaJ/ev39/FKaoCISPY7/AxVHfc889E+fNm3c6CDsVbmITxujC+7233HLLn2677bZPQDB6NWm4qUkExBIMihE5eFRxwacIdWJwW9UDDzxQP2fOnKlg0DTsDRrZF9aO3WD29rvuuutj1NHAncE3el0J4JSEeU3B51+OLltl3vej/Li/YJv2zst1QRjAzmDfW0GwVt+rM84777xXMIkoJKgEBDTZAphwFJPhWBlMiEE3bpIsE8071MlIJDEJj4lMSIPI7CdOJkjmQYSEI1HU8Q0Pd85RGcO8IxPB6AQ0KIH9BN1fhkNiWA+K4Y4WoU4cdTgmiZLtS+Zm8TGMZF8gfAJzSUIj0rfeemsjmPGWb96/Rbm2rxygXAwY0GKixcOBNLUEEJ+ZAJMhzZo7SUgUJc8UDowJsXC7zgyCGCZGT8KM7xIf2mHCwtwz0OdnKBvSzJLkZov9sB37YYEgxNmvoMB+kgwnw29PkRmQ2DSIb/CAFiUl1JzdPdu+iA/7EkEhtUxoGfVTIH6K+xgc4HN33BxAmmWkieojnymXhgxqIwbifo74mMQenOu+fMcdd0RAOG5YDPE4YRIFEyMjbBjCqLbsXkncBIkPc5GE9iQZ7Jo6dWqaAS9oAGPrSZiZJDdu7MftSz5JrCQlHgxMktAYI8U+GGxj2AC2m8xLM96Pd0m7CWR7FjKWn8QLTkAKDDFj4ncCe5cU8Mq0t7erVwBofyiAJsuYfqJzeDu6QPuACP3uoIWLIV8nDSMuixU3S2bDhc9yWVS5ODIqVyO/K2xGA0O5yjvOjEoh0nEb+mU/XEyd40P2ZTZbdDe52BIHmxlh3UXthRsiAThVCA7VxEf6zPbFRZfzQfQ1Zs80+Axm7d8CSNBt9yYqWAsCGZB3bignwCwvzH+m/x2TlVpaWtbD9EQZR5HTMJ526bffflvjGaU+CsmKQJqjkCYGvBQDXuwaRMggPJ2ePHly5s033zSzURIWwJgZmBD2k0E/NCUxaFYEXoyZEL5raBBNnpFejElJZVtzqmZmHrEBSp2Gk5DFCcziRi6KNqYCtcD2BY3U1ED0RTNmIomcA+qSCdvhEDyHOcx1yFDR2Ng4C7i2ac/g++mnhpQnKioUh637qZ/1dNlEgihVpco5jKBEcGPmSJ8pNpRgE6k4uRzZAzZM4PZTJCEN0xe/y3PTTx/qnj2st32xLXGxRfqNC0696lMTbUid58p+OpA2QflMDv2GRHwT0wfnb/APzK06GUDkiKSDvJ+IdqMWtceAQvB8kOt1xOkWPYgjPxcfFyenL9eeZxlAc8m5vvHGG8v8dCBtlCQUBOGvBguuBDBByT8w1PgXRGrGjBllrOMmVDl99IoVaecY0J20b1ylHMK7+PiKCqiTazqBguF++qXVnT/XhlwaAPf5/1DdrGMBfahBgzUjXOAw8A/151VvK6pV2EV4SOp28oLNdxpNRyAoGQBu6ndy0WBIDJDOTHLqzTffPEkHAMzQt22oVn05wR6tlvgTdC3ceOONzfTWcq0DQxocxWQ10OUL4j6DbsxAG2So9qQHkWCG0b8aFOVlmiTeV9m8VlXIwy4SlGolB9JVzz///EVBEgAmvMR9gjpROTDDCxGY3yoQ/69Bc2cE1s2ILrgGiJs3ioNIgu29Ohg6eLAxWAS0F2VsVicZACfOqSNowqQFo6akjc0HVYUUQn18F1nKXSJDxosXL57aR4y+W3tXgQY0BuL0i6St1jmue54IAB5LHbx6AWlw+eWXT5N7BubIUgV4QUNFwL8RqWE2M0LAc/s5KNmJMjPPYYKuf55QJmjvMl9brslx7qQBaaG8sMhYGwZRhTbD9qQLZbSYoVOYFIXw7Nw8TqvatJchkXOHmisHVItJUyMI/RHeEn/VqlX/gurMHRpv7b86HssqLAO0eAHOZqRGbpQ0rV69+hxestD9QwcKzUyzdNsrnR0m6C99MUEPo3elvbWnVXta2ydwrosWLWLOUJPQIBsFUL7rUYVE0MRjuBZwoeFawLNbIsAUQwSmmuEBrdb5QxvKMkjSeXZ9Cbo/4GeCKoBkadkUaU/SW3U/0m6BR5VwQ1dyrspLkaTpMbZfPMSiPq4jDZ0plgnKi3dQ3Spk8SEihgnUBmzJ1+uBQTcY8QzCHDfu27fv533UG7QmaO/s+kKU1ULwbj0AoNTzJg/nSIGTGz111vQ4lwPVsIHDgLh78C5ZDBMl2baZSHJtGAQj8oEOlEqd++CDpoSEZrCMxN6o87hdkwtI+La2touVlxDcbFPi8bvOuRhoTE8/d8EKZpaydtsyQXmaUCuINVqTxAxmaMTZZETQXYDBAu8QqN7ZbDYYl9NXH2D/hw8cOPD7LVu2LJS5ZLOx5RKeuRQocy8ZjtBDPhC1MX6qoOTe1EgSU4OoaRZ5Mobp5bzVMlRmYLG+LSDkQQas0IME4sRLI6+99tq19OsFZ4s759Igc6uxV2m56OZLfF1o06QlbOse8ynvek6laMMEIu1jQpYZOGlaQClj8tNACMUURHubXh2/yGevsd46kL44NnEgLiS6mNBJttj7C/bqqZJEL1lwiwPOPfqilyo4aN8dMOXZwjInHbDOMkJ5UpRlhqg0nzVedtllX9+8efPFOI78JczVn3UfUvrMM8/MQ19j3Ltk9n7X/v37Z+sciyuz4Xg9ldl3JDh38nLBo8kVDgevLOElx7ScJkdcTffvB0583MshglmcRUJoH8fZvEzl3Z+tF63g5qXJWStsaYFEbshFfGbPoV2dm6VmiW//HmHTpk3TebeLybk0J4899tj5QuysWVTHid3sPLPSXi9/q1DrHvYruXinet+GGQiNAp8XknvmZIoH9/xXESZnMRlKkquiWLNiIGIMa0CMmXLMw8HE+R8ObGvOEOCCtqL+Yn/HMDtHHnrooR8uWbLkZd6MQdtjYEDP7NmzmT+kOV5nZ2ccpQgH/Mx+K0bfcfQd4+E/DoxMP/zu5OfYzwwz7nigz1wguXKaweF8uqioiGkxTG3JHvYzxQUlI7QbiF0JrF/ICxqmc17VAaJppvBBQpOYAC9PJCBZ5lIFvh/DxHg5oweT5G/z/oorrijLRfwHH3zwR7DRuyVTzeQV8SKdvy40w2TaMeONv8EEntbZDAtDYBCbBOcVJ97QMTdt8I43bY4VFxf3oO0xxPZ7mGMETU5gDimZS4ZLkBA/O9+B0scPBf3LMjf7i4zgJ9NToAnmehK1gn9iBFtsDsGxfY8yrRDMiDP5yt8fib927dpLwJxdVjrxmAlfabTVNumKVWGbmVxq7qDxwjT6NV0oLwnMMIH4Yaw06ihhZAZCYdJZICiZgwcPatuGDIaG6Q0bNhjJ10NNKzkRoD9/0B0Vz8GmlXBBo20dS3vr3sulzV+zZs13lXcf2LiA9i8AfDGXbIhEOQlXKFVcPNlGMqPLxVUew8WU64X1ZpSkthA3myKjB5FpcdKD9qWC2CAcCUHicOHDseYPoDE/xbuZXJTFgxovGWxjbLzdvSaqZWOI58V87zgBWUKz8J2bj6S8tcd/xXREiX7COGy9CKaz79y5Mw6zVAw3sgQ2uBjvrH9Ns8JkWpMaDgYlmUHHzDuYuIw1CdrLPFb8qzSaON5+hO3PXjndsWNHduEVk6Ukay6jc2QtD8d8R/z/IvKA7IUOfJbZu1zyPz4Ma5jLGmJWKPk5o43al7SlJNHK+fxcDpD6Rwdn/2BSXpT330LVckmvhuuCxFtcs6O+oBDI8BG5KZ8LrEraO8T4ytTxBN1BeEXmHjDvCNAVpPsnt9PVFxH0ySo5gpeNKZnLfbLQltA02X/O+gJLvoWTWnKMK2nDCn538EtAfELBL+kVDIIWVZoaZ/PzpeBAoSHifAaegfolVzt/jBHQh63j+uORPsaLOPWVv732pb3nGNePa+CcdO4U+lz95zNmCCGEEEIIIYQQQgghhPAPCn8HoRde7dBmB3wAAAAASUVORK5CYII=",style:{width:32}}),(0,t.jsxs)("div",{className:d.default.textContainer,children:["点击",y&&"或按",y&&(0,t.jsx)("div",{className:d.default.Fkey}),"进入",`${H?"全景":""}直播间`]})]})}),l&&(0,t.jsx)("div",{className:d.default.description,children:l})]})}},403678:function(e,i,l){l(874386),l(602157);var t=l(563097),n=l(713097),o=l.n(n),r=l(88648),a=l(961412),s=l(331991),u=l(645588),d=l(58404),c=l(618360),v=l(774569),_=l(522828),f=l(509090),m=l(560296),A=l(751365),g=l(803480);l(274887);var I=l(768492);let E=r.memo(e=>{let{isPaidLive:i,episodeExtra:l,showPaidLiveEnd:n}=e;return(0,t.jsxs)("div",{className:u.default.liveTag,children:[i&&(0,t.jsx)(()=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(v.jR,{}),(0,t.jsx)("div",{className:u.default.endText,children:n?"试看结束":""})]}),{}),!i&&(0,t.jsx)(()=>{var e,i,n;return(null==l?void 0:null===(e=l.mod)||void 0===e?void 0:e.episode_stage)===A.j.FIRST_LIVE?(0,t.jsx)(v.Sx,{episodeStage:null==l?void 0:null===(i=l.mod)||void 0===i?void 0:i.episode_stage}):(0,t.jsx)(v.z,{episodeStage:null==l?void 0:null===(n=l.mod)||void 0===n?void 0:n.episode_stage})},{})]})}),p=r.memo(e=>{var i,l,n,A;let{userName:p,userCount:h,title:D="",className:y,style:C,episodeExtra:b,secUid:k,userParams:O,onClickUser:N,isAd:P=!1,isPaidLive:V=!1,viewType:x=c.ku.NORMAL_WATCH,isLogin:w,tagInfo:L,abTestData:j,useUserName:T=!0,paidLiveInfo:S,useFollowBtn:M=!1,isFollow:R,dispatch:U,userInfo:B,rawdata:G,onLoginSuccess:H,isActive:F=!1}=e,{dynamicLabel:Q,assistLabel:Y}=L,[K,Z]=r.useState(!1),[z,W]=r.useState(!1),[J,X]=r.useState(!1),{follow:q}=(0,_.OM)({selfUid:null==B?void 0:null===(i=B.info)||void 0===i?void 0:i.uid,actionUid:null==G?void 0:null===(l=G.owner)||void 0===l?void 0:l.id_str,defaultFollowerStatus:R,defaultFollowStatus:R,isLogin:w,preventReport:!0,onLoginSuccess:H,success:e=>{let{action:i}=e;"follow"===i&&(f.F.info("关注成功"),X(!0),setTimeout(()=>{W(!0),X(!1)},1e3))},fail:e=>{let{action:i}=e;"follow"===i&&f.F.info("关注失败")}}),{followStatus:$}=(0,m.r)({selfUid:null==B?void 0:null===(n=B.info)||void 0===n?void 0:n.uid,actionUid:null==G?void 0:null===(A=G.owner)||void 0===A?void 0:A.id_str,defaultFollowerStatus:R,defaultFollowStatus:R}),ee=r.useMemo(()=>V&&!w,[w,V]),ei=r.useMemo(()=>V&&x===c.ku.TRT_WATCH_FINISH,[V,x]);return r.useEffect(()=>{W(1===$)},[$]),r.useRef(null),(0,t.jsx)("div",{className:o()(u.default.liveInfo,y),style:C,children:(0,t.jsxs)("div",{className:u.default.wrap,children:[(0,t.jsxs)("div",{className:u.default.tagContainer,children:[(0,t.jsx)(E,{isPaidLive:V,showPaidLiveEnd:ei,episodeExtra:b}),V&&(0,t.jsx)(g.j,{paidLiveData:S,isLogin:w,showCount:!1,viewType:x,count:"0"})]}),T&&(0,t.jsx)(d.G,{onClick:N,href:`${(0,I.HC)(k)}`,passParams:O,target:"_blank",children:(0,t.jsx)("span",{className:o()(u.default.userName,u.default.userTextHover),style:{pointerEvents:"all"},children:(0,t.jsx)(a.Z,{text:`@${p}`})})}),(0,t.jsxs)("div",{className:u.default.description,children:[(0,t.jsx)("span",{className:u.default.title,children:(0,t.jsx)(a.Z,{text:"string"==typeof D?D:(null==D?void 0:D.text)||""})}),!ee&&h&&(0,t.jsx)(s.A,{count:h}),P&&(0,t.jsx)(v.Xv,{})]})]})})});i.Z=p},335566:function(e,i,l){l.r(i),l.d(i,{LinkMicPreviewPlugin:function(){return Q},default:function(){return Y}});var t=l("520739");l("874386"),l("250440"),l("429532"),l("675373"),l("819117");var n=l("563097"),o=l("88648"),r=l("734123"),a=l("877639"),s=l.n(a),u=l.p+"media/orderSingBg.af200848a13db11d.png",d=l("270422"),c=l("773265"),v=l("162787"),_=l("9034"),f=l("731564"),m=l("110742"),A=l("805591"),g=l("48273"),I=l.p+"media/groupFightBg.394717bcadc491f0.png",E=l("881942"),p=l("768492"),h=l("529907"),D=l("471957"),y=l("525465");l("284961"),l("826893");var C=l("283993"),b=l("645260"),k=l.n(b),O=l("648527");let N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("https")?e:e.replace("http","https")},P=(e,i)=>{let{isGroupFight:l=!1,redGroupSeats:t=[],isGuestBattle:n=!1}=i;return n?"加入作战":l?`加入${t.includes(e)?"红队":"蓝队"}`:O.p.JOIN_CHAT},V=(e,i,l,t)=>{var n,o,r,a,s,u,d,c,v,_,f,m,A;let{isGuestBattle:g=!1}=t,I=g?N(k()(e,"ui_info.score_icon.url_list[0]","")):"",E={},p=null==l?void 0:null===(n=l.user)||void 0===n?void 0:n.id_str,h=null==e?void 0:null===(o=e.results)||void 0===o?void 0:o.filter(e=>String(e.guest_id)===p||String(e.guest_id_str)===p)[0];if(!h||h.role===C.L0.GuestBattlePlayerRoleNone)return{giftIcon:I,giftStyle:E};let D=String(null!==(s=null==h?void 0:null===(a=h.crown_info)||void 0===a?void 0:null===(r=a.cur_grade)||void 0===r?void 0:r.level)&&void 0!==s?s:-1),y=null==h?void 0:h.role;if(E={width:"22px",height:"22px",maxWidth:"22px",maxHeight:"22px",position:"absolute",top:"-2px",left:"-4px"},y===C.L0.GuestBattlePlayerRoleWinner){let e=null!==(c=null==i?void 0:null===(d=i.guest_battle_theme_element)||void 0===d?void 0:null===(u=d.first_config)||void 0===u?void 0:u.grade_configs)&&void 0!==c?c:[];e.length&&(I=N(null===(_=e[D])||void 0===_?void 0:null===(v=_.play_value_icon)||void 0===v?void 0:v.url_list[0]))}else{let e=null==i?void 0:null===(m=i.guest_battle_theme_element)||void 0===m?void 0:null===(f=m.straggler_config)||void 0===f?void 0:f.grade_config;(null==e?void 0:e.play_value_icon)&&(I=N(null==e?void 0:null===(A=e.play_value_icon)||void 0===A?void 0:A.url_list[0]))}return{giftIcon:I,giftStyle:E}};var x=l("727795"),w=l("266382"),L=l("350416"),j=l("601613"),T=l("540686"),S=l.p+"media/guestBattleBg.90cb9b030e3bf46e.png",M=l("310732"),R=l("623278"),U=l("199892"),B=l("483347");let G=(0,p.Pe)(),H=e=>E.Z.get(`${G}/webcast/linkmic_audience/get_play_mode_info/`,{params:e}),F=e=>E.Z.get(`${G}/webcast/dress/list/`,{params:e}),Q=e=>{var i,l;let{anchorId:a,roomId:E,className:p,linkerMap:C={},functionType2:b,onLayoutChange:k,dressListAll:O=[],linkmicVideoEqualLayoutFrameOpt:N="0",setIsPk:G,layout:Q}=e,{player:Y}=(0,A.n)(),[K,Z]=o.useState(Q),[z,W]=o.useState(c.Fk),[J,X]=o.useState({}),q=o.useRef({}),$=o.useRef({}),[ee,ei]=o.useState(!1),el=o.useRef(void 0);el.current=K;let[et,en]=o.useState(0),eo=o.useRef(new R.a),[er,ea]=o.useState(),[es,eu]=o.useState(),ed=null==er?void 0:null===(i=er.data)||void 0===i?void 0:i.teamfight_info,ec=null==er?void 0:null===(l=er.data)||void 0===l?void 0:l.guest_battle_info,ev=o.useMemo(()=>{var e,i;return Number.isInteger(null==es?void 0:null===(e=es.data)||void 0===e?void 0:e.gift_id)&&Number(null==es?void 0:null===(i=es.data)||void 0===i?void 0:i.gift_id)>0},[null==es?void 0:es.data]),e_=o.useMemo(()=>void 0!==K,[K]);o.useEffect(()=>{E&&e_&&(H({room_id:E,_point:2}).then(e=>{ea(null==e?void 0:e.data)}),(0,x.RO)({room_id:E}).then(e=>{eu(null==e?void 0:e.data)}))},[E,e_]),o.useEffect(()=>{let e=null==ec?void 0:ec.dress_id;if(""!==e){let i=null==O?void 0:O.find(i=>(null==i?void 0:i.dress_id)===e);i?X(i):F({dress_id:e}).then(e=>{var i,l,t,n;if(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.data){let i=null!==(n=null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.dress_list)&&void 0!==n?n:[];i.length&&X(i[0])}})}},[null==ec?void 0:ec.dress_id]),o.useEffect(()=>{C[5]&&[21,22].includes(et)?22===et?Z(_.yP.AUDIO_GRID):26===et?Z(_.yP.AUDIO_DOUBLE_C):25===et?Z(_.yP.MATE_CUSTOM):Z(_.yP.AUDIO_1V8):C[16]&&Z(_.yP.VIDEO_6V6)},[C,et]);let ef=o.useCallback(()=>z,[W,z]),em=o.useMemo(()=>(0,w.Qx)(z),[z]),eA=o.useCallback(s()(()=>(0,g.m)(E,a).then(e=>{let{data:{data:i,status_code:l}}=e;if(0===l){var t,n,o,r,a,s;let e={},l={};return en(null==i?void 0:null===(t=i.linker_base_info)||void 0===t?void 0:t.ui_layout),null==i||null===(n=i.user)||void 0===n||n.forEach(i=>{i.linkmic_id_str&&(e[i.linkmic_id_str]=i)}),el.current===_.yP.VIDEO_6V6&&(null==i||null===(a=i.linker_content_map[null===(s=Object.keys(null==i?void 0:i.linker_content_map))||void 0===s?void 0:s[0]])||void 0===a||null===(r=a.linked_users)||void 0===r||r.map(i=>{i.user_position=i.user_position+_.Lf[K],i.linkmic_id_str&&(e[i.linkmic_id_str]=i)})),null==i||null===(o=i.locked_positions)||void 0===o||o.forEach(e=>{("number"==typeof e.position||"string"==typeof e.position)&&(l[e.position]=e)}),q.current=Object.assign({},q.current,e),$.current=l,Promise.resolve()}}),3e3),[E,a,K]),{isGroupFight:eg,isGroupPlaying:eI,isInPunish:eE,redGroupSeats:ep,statusTexting:eh}=(0,h.Z)({teamfightInfo:ed,linkMicSeats:z}),{isGuestBattle:eD}=(0,D.Z)({guestBattleInfo:ec});o.useEffect(()=>{let e=Object.keys(C);if(!(e.length<=0)&&(1!==e.length||"4"!==e[0]))return eA().then(()=>{let e=(0,t._)({},c.Fk);Object.keys(q.current).forEach(i=>{let l=q.current[i];e[l.user_position]={idx:l.user_position,user:l}}),W(e)}).finally(()=>{ei(!0)}),()=>{(null==eA?void 0:eA.cancel)&&(null==eA||eA.cancel())}},[]);let ey=o.useCallback(()=>q.current,[]),eC=o.useCallback(()=>$.current,[]);o.useEffect(()=>{null==k||k(K)},[K]),(0,c.wz)({setLayout:Z,enable:!0,setSeats:W,getSeats:ef,layout:K,getUsers:ey,getPositions:eC,onUsersUpdate:ee&&eA,roomIdStr:E,audioPower:eo.current,setIsPk:G});let eb=o.useCallback(()=>{Z(void 0)},[]);o.useEffect(()=>{if(K===_.yP.AUDIO_1V8||K===_.yP.AUDIO_1V8_STAGE||K===_.yP.AUDIO_GRID||K===_.yP.AUDIO_DOUBLE_C||K===_.yP.VIDEO_1V6||K===_.yP.VIDEO_1V8||K===_.yP.VIDEO_2V4V4||K===_.yP.VIDEO_GRID||K===_.yP.VIDEO_6V6||K===_.yP.VIDEO_DYNAMIC||K===_.yP.VIDEO_DYNAMIC_FLOAT||K===_.yP.VIDEO_1_V_3||K===_.yP.VIDEO_1_V_6||K===_.yP.VIDEO_1_V_8||K===_.yP.VIDEO_T1_V_B8||K===_.yP.MATE_CUSTOM){var e;ei(!0),(null===(e=Object.keys(q.current))||void 0===e?void 0:e.length)===0&&eA().then(()=>{let e=K===_.yP.MATE_CUSTOM?{}:(0,t._)({},c.Fk);K===_.yP.AUDIO_DOUBLE_C&&(e[9]={idx:9}),Object.keys(q.current).forEach(i=>{let l=q.current[i];e[l.user_position]={idx:l.user_position,user:l}}),W(e)}).finally(()=>{ei(!0)})}else ei(!1)},[K]),o.useEffect(()=>(Y.on(r.Events.URL_CHANGE,eb),()=>{Y.off(r.Events.URL_CHANGE,eb)}),[]);let ek=o.useCallback(e=>{var i,l,t,o,r,s,u,c;let f=em[e];if(K===_.yP.AUDIO_1V8||K===_.yP.AUDIO_1V8_STAGE||K===_.yP.AUDIO_GRID||K===_.yP.AUDIO_DOUBLE_C){let r=P(e,{isGroupFight:eg,isGuestBattle:eD,redGroupSeats:ep}),{giftIcon:s,giftStyle:u}=V(ec,J,null==f?void 0:f.user,{isGuestBattle:eD});return(0,n.jsx)(v.X,{user:null==f?void 0:f.user,isLock:(null==f?void 0:null===(i=f.info)||void 0===i?void 0:i.status)===d.U.LinkmicPositionStatus_Locked,giftLabelBackgroundColor:[eI,eE].some(Boolean)&&0!==e?ep.includes(e)?"rgba(248, 42, 116, 1)":"rgba(24, 158, 254, 1)":void 0,dynamic:!eg&&B.re.includes(Number(et)),joinText:r,giftLabelIcon:s,giftLabelStyle:u,setFloatModal:()=>null,showAnchorLabel:(0,w.ic)(em)&&String(null===(o=em[e])||void 0===o?void 0:null===(t=o.user)||void 0===t?void 0:null===(l=t.user)||void 0===l?void 0:l.id_str)===String(a),audioPower:eo.current})}if(K===_.yP.VIDEO_1V6||K===_.yP.VIDEO_1V8||K===_.yP.VIDEO_2V4V4||K===_.yP.VIDEO_DYNAMIC||K===_.yP.VIDEO_GRID||K===_.yP.VIDEO_6V6||K===_.yP.VIDEO_DYNAMIC_FLOAT||K===_.yP.VIDEO_1_V_8||K===_.yP.VIDEO_1_V_6||K===_.yP.VIDEO_1_V_3||K===_.yP.VIDEO_T1_V_B8||K===_.yP.MATE_CUSTOM)return K!==_.yP.MATE_CUSTOM||(null==f?void 0:f.user)?(0,n.jsx)(m.W,{idx:e,isLock:(null==f?void 0:null===(r=f.info)||void 0===r?void 0:r.status)===d.U.LinkmicPositionStatus_Locked,user:null==f?void 0:f.user,layout:K,position:e,isPreview:!0,setFloatModal:()=>null,showAnchorLabel:(0,w.ic)(em)&&String(null===(c=em[e])||void 0===c?void 0:null===(u=c.user)||void 0===u?void 0:null===(s=u.user)||void 0===s?void 0:s.id_str)===String(a),joinText:P(e,{isGroupFight:eg,isGuestBattle:eD,redGroupSeats:ep}),audioPower:eo.current,style:"1"===N&&B.re.includes(et)?{border:"2px solid #140731"}:void 0}):null;return null},[K,em,ec,J,eg,eD,a,et]),eO=(0,U.R)(z,a,K),eN=o.useMemo(()=>B.dr.includes(Number(et)),[et]);if(eg)return K===_.yP.VIDEO_T1_V_B8?(0,n.jsx)(L.PY,{layout:K,count:Object.keys(z).length,renderElement:ek,teamfightInfo:ed,statusText:eh,micSeats:z,roomId:E,backgroundImg:I,isPreview:!0}):(0,n.jsx)(y.s,{className:p,layout:K,count:Object.keys(z).length,renderElement:ek,statusText:eh,isPreview:!0});return(0,n.jsx)(n.Fragment,{children:eN?(0,n.jsx)(j.X0,{idPrefix:"preview",className:p,renderElement:ek,layout:et,linkers:eO,incomingPlayer:Y,needVideoLayoutContainer:T.Ck.includes(K)}):(0,n.jsx)(f.S,{className:p,layout:K,count:Object.keys(z).length,renderElement:ek,isGuestBattle:eD,backgroundImg:eD?S:[_.yP.AUDIO_1V8_STAGE,_.yP.AUDIO_1V8,_.yP.AUDIO_GRID,_.yP.AUDIO_DOUBLE_C].includes(K)&&ev?u:[_.yP.AUDIO_1V8_STAGE,_.yP.AUDIO_1V8,_.yP.AUDIO_GRID,_.yP.AUDIO_DOUBLE_C].includes(K)&&!ev?M:null,micSeats:em,ext:{showVideoDynamicFloatLayoutJoinBtn:!1},linkers:eO,uiLayout:et,linkmicVideoEqualLayoutFrameOpt:N})})};var Y=Q},175739:function(e,i,l){l.d(i,{b:function(){return d}});var t=l(563097),n=l(88648),o=l(805591),r=l(734123),a=l(441447),s=l(721222),u=l(680319);let d=e=>{let{player:i}=(0,o.n)(),{useNewUserSoundGuide:l,isActive:d=!1,isShowGuide:c}=e,v=n.useRef(!0);return n.useEffect(()=>{if(i){let e=()=>{a.emit(a.EVENT.videoPlay)},t=()=>{var e,t;null!==(t=(e=window).__INVISIBLE_QUERY__)&&void 0!==t||(e.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1,(0,s.MR)(),a.emit(a.EVENT.videoPlayPrevent),v.current&&!l&&setTimeout(()=>{i.muted=!0,i.play(),v.current=!1},10)};return i.on(r.Events.AUTOPLAY_PREVENTED,t),i.on(r.Events.AUTOPLAY_STARTED,e),()=>{i.off(r.Events.AUTOPLAY_PREVENTED,t),i.off(r.Events.AUTOPLAY_STARTED,e)}}},[i,l]),l?(0,t.jsx)(u.V8,{player:i,isActive:d,isShowGuide:c}):null}},408661:function(e,i,l){l.r(i),l.d(i,{PaidLivePlugin:function(){return K},default:function(){return Z}});var t=l("520739"),n=l("878389");l("874386"),l("250440");var o=l("563097"),r=l("88648");l("819117"),l("675373");var a=l("441447"),s=l("565024"),u=l("618360"),d=l("987475"),c=l("791483"),v=l("805591"),_=l("645260"),f=l.n(_),m=l("877639"),A=l.n(m),g=l("744376"),I=l("727795"),E=l("578580"),p=l("742401");let h=function(e,i,l,o,_,m,h,D,y,C){let b=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,k=!(arguments.length>11)||void 0===arguments[11]||arguments[11],O=(0,r.useRef)(0),N=(0,r.useRef)({}),P=(0,r.useRef)(),V=(0,r.useRef)(),x=(0,r.useRef)({[u.JX.TRY_WATCH_LEAVE]:!1}),w=(0,r.useRef)(""),[L,j]=(0,r.useState)(0),[T,S]=(0,r.useState)(y),M=(0,r.useRef)(!1),R=(0,r.useRef)(!1),U=(0,r.useRef)(k),{player:B}=(0,v.n)(),G=b||B,H=r.useCallback(e=>{let i=f()(e,"data.data.duration",0),l=f()(e,"data.data.delivery",0),r=f()(e,"data.data.ret_type",1),a=f()(e,"data.data.right_type",0);o(e=>(0,n._)((0,t._)({},e),{duration:i,delivery:l,view_right:0!==a?1:0})),_(r)},[o,_]),F=r.useCallback(()=>(null==m?void 0:m.paid_live_type)===u.xc.EQUITABLE_CAMERA_POSITION?{paid_live_type:null==m?void 0:m.paid_live_type,entity_id:l}:{},[m,l]),Q=r.useCallback(()=>{Math.floor(y-O.current)>0?j(O.current+1):j(y)},[y]),Y=()=>{(null==V?void 0:V.current)&&clearInterval(V.current)};r.useEffect(()=>{O.current=L,l&&R.current&&(N.current[l]=O.current,(0,g.V)(N.current)),S(Math.floor(y-O.current))},[L,y]),r.useEffect(()=>{U.current=k,!k&&(P.current&&clearInterval(P.current),Y())},[k]),r.useEffect(()=>{a.emit(a.EVENT.paidLiveDuration,{last_time:Math.floor(T),ticket_id_str:l})},[T,l]);let K=r.useCallback(A()(async()=>{let e=Math.floor(y-O.current);if(!!k){if(e>0)try{let e=await (0,I.xL)((0,t._)({id:l,id_type:1,ping_type:u.JX.TRY_WATCH_START,timestamp:Math.floor(Date.now()/1e3)},F()));E.kg.info("ping 上报试看开始",e),H(e)}catch(e){E.kg.error("ping 上报试看error",e)}P.current&&P.current&&clearInterval(P.current),P.current=setInterval(async()=>{if(!!U.current){if(Math.floor(y-O.current)>0){let e=await (0,I.xL)((0,t._)({id:l,id_type:1,ping_type:u.JX.COMMON_PING,timestamp:Math.floor(Date.now()/1e3)},F()));E.kg.info("ping 上报试看",e),H(e)}}},1e4,!0)}},3e3),[l,H,y,k]),Z=r.useCallback(()=>{var e;let t=s.Q.getItem({sKey:d.CookieKeys.PaidLiveDuration})||{};N.current=t,j(Math.max(Number(null===(e=N.current)||void 0===e?void 0:e[l])||0,Math.min(i,null==m?void 0:m.max_preview_duration))),C&&requestAnimationFrame(()=>{a.emit(a.EVENT.paidLiveInitTime,{})}),R.current=!0},[l,i]),z=()=>{if(!p.s)P.current&&clearInterval(P.current)};r.useEffect(()=>{Z()},[Z]);let W=r.useCallback(()=>{if(!p.s){if(V.current&&clearInterval(V.current),!k){(null==P?void 0:P.current)&&clearInterval(P.current);return}K(),V.current=setInterval(()=>{Q()},1e3,!0),M.current=!0}},[Q,K,k]),J=r.useCallback(async()=>{if(!x[u.JX.TRY_WATCH_LEAVE]){if(z(),Y(),null==w?void 0:w.current)try{x[u.JX.TRY_WATCH_LEAVE]=!0;let e=await (0,I.xL)((0,t._)({id:w.current,id_type:1,ping_type:u.JX.TRY_WATCH_LEAVE,timestamp:Math.floor(Date.now()/1e3)},F()));w.current===l&&H(e),E.kg.info("ping 上报离开",e)}catch(e){E.kg.info("ping 上报离开error",e)}}},[H,l]),X=(0,r.useRef)(!0);(0,r.useEffect)(()=>()=>{V.current&&clearInterval(V.current),P.current&&clearInterval(P.current)},[]),(0,c.C)(()=>{if(!!e)return!G.paused&&(W(),X.current=!1),G&&(null==G||G.on("pause",J)),G&&(null==G||G.on("play",W)),()=>{G&&(null==G||G.off("pause",J)),G&&(null==G||G.off("play",W))}},[G,e,h,J,W]);let q=r.useCallback(async()=>{if(!!k){if(h===u.ku.NORMAL_WATCH&&0===D)try{let e=await (0,I.xL)((0,t._)({id:l,id_type:1,ping_type:u.JX.PERFORMANCE,timestamp:Math.floor(Date.now()/1e3)},F()));E.kg.info("ping 上报履约",e),H(e)}catch(e){E.kg.info("ping 上报履约error",e)}}},[h,D,l,H,k]);return r.useEffect(()=>{l&&J().finally(()=>{x[u.JX.TRY_WATCH_LEAVE]=!1,w.current=l})},[l]),r.useEffect(()=>()=>{J()},[]),r.useEffect(()=>{if(!!e)return!G.paused&&q(),G&&(null==G?void 0:G.on)&&G.on("play",q),()=>{null==G||G.off("play",q)}},[G,q,e]),{lastTime:T}},D=(e,i,l,o,a)=>(r.useEffect(()=>{if(!!e)return e.on("PaidLiveDataMessage",e=>{e&&Array.isArray(e)&&e.length>0&&e.map(e=>{var r;let s=Number(f()(e,"payload.paid_business_data.ret_type",u.Pf.TRY_WATCH_ING)),d=Number(f()(e,"payload.paid_business_data.duration",180)),c=Number(f()(e,"payload.paid_business_data.delivery",0)),v=f()(e,"payload.paid_business_data.ticket_id",""),_=f()(e,"payload.paid_business_data.ticket_sku_id",""),m=f()(e,"payload.paid_business_data.entity_rels",{}),A="object"==typeof m?Object.keys(m):[],g=null==i?void 0:null===(r=i.ticket_session)||void 0===r?void 0:r.ticket_session_id_str;A.concat([v,_]).includes(g)&&(l((0,n._)((0,t._)({},i),{duration:d,delivery:c})),o(s)),null==a||a(f()(e,"payload.paid_business_data"))})})},[e,i,l,o]),null);var y=l("848625"),C=l("713503"),b=l("370302");let k=(e,i)=>{var l,t;if(!(null==e?void 0:null===(l=e.room)||void 0===l?void 0:l.stream_url)&&!i)return{};let n=(null==i?void 0:i.pull_datas)||((null==e?void 0:null===(t=e.room)||void 0===t?void 0:t.stream_url)?e.room.stream_url.pull_datas:{})||{},o=Object.keys(n)[0];return n[o]},O=e=>{var i;let l=f()(e,"room.stream_url"),t=(null===(i=f()(e,"web_stream_url",null))||void 0===i?void 0:i.live_core_sdk_data)?f()(e,"web_stream_url"):l,n=f()(t,"live_core_sdk_data.pull_data",{}),o=f()(l,"live_core_sdk_data.pull_data",{}),r=k(e),a=k(e,t),s=(null==n?void 0:n.stream_data)?JSON.parse(n.stream_data):null,u=(null==o?void 0:o.stream_data)?JSON.parse(o.stream_data):null,d=(null==r?void 0:r.stream_data)?JSON.parse(r.stream_data):null,c=(null==a?void 0:a.stream_data)?JSON.parse(a.stream_data):null;return{H265_streamData:{options:f()(n,"options",null),common:f()(s,"common",null),stream:f()(s,"data",null)},H264_streamData:{options:f()(o,"options",null),common:f()(u,"common",null),stream:f()(u,"data",null)},UGC_streamData:{options:f()(r,"options",null),common:f()(d,"common",null),stream:f()(d,"data",null)},H265_UGC_streamData:{options:f()(a,"options",null),common:f()(c,"common",null),stream:f()(c,"data",null)}}};var N=l("878511"),P=l("623504"),V=l("509090"),x=l("579828"),w=l("167951");let L=(e,i,l,o,s,d,c,_,m,A,g)=>{let{player:p}=(0,v.n)(),h=(0,r.useRef)(e),{abrPts:D}=(0,N.Z)(),k=g||p,{roomStore:L}=A,j=r.useMemo(()=>{var e;return(null==L?void 0:null===(e=L.pollingFrequency)||void 0===e?void 0:e["webcast/room/info_by_scene"])||1e4},[]),T=r.useCallback(()=>{var e,o,r;if(null==A?void 0:null===(o=A.cameraStore)||void 0===o?void 0:null===(e=o.cameraInfo)||void 0===e?void 0:e.isMainCamera){let e=(0,x.a)();(0,I.aL)({room_id:i,scene:"paid_live_change_stream",channel:"channel_pc_web",region:"cn",device_id:null===(r=(0,w.Es)())||void 0===r?void 0:r.user_unique_id,device_type:null==e?void 0:e.device_type,os_version:null==e?void 0:e.os,version_code:null==e?void 0:e.version_code,webcast_sdk_version:2450}).then(e=>{if(e&&200===e.status&&0===e.data.status_code){var i,o;if(l===P.W.COMMON_SCENE||l===P.W.IN_LIVING_RECOMMEND||l===P.W.LIVING_SEARCH){E.kg.info("预览流换流",e);try{let{options:{default_quality:l},stream_data:t}=f()(e,"data.data.stream_url.live_core_sdk_data.pull_data"),n=JSON.parse(t),o=null==n?void 0:n.data,r=null==n?void 0:null===(i=n.common)||void 0===i?void 0:i.session_id,a=(0,C.f)(o[null==l?void 0:l.sdk_key].main.flv);(0,b.GT)(a,{abr_pts:D,sessionId:r}),k.paused?null==k||k.setConfig({url:a}):k.src=a,c(f()(e,"data.data.paid_live_data",{}))}catch(e){E.kg.error("预览流换流 ERROR",e)}}else{E.kg.info("直播间换流",e);try{let{streamStore:i,roomStore:l}=A,r=O({room:f()(e,"data.data",{})});null==i||i.setStreamData(r);let a=f()(e,"data.data.paid_live_data",{});c(a),null==l||l.setRoomInfo((0,n._)((0,t._)({},l.roomInfo),{room:(0,n._)((0,t._)({},null==l?void 0:null===(o=l.roomInfo)||void 0===o?void 0:o.room),{paid_live_data:a})}))}catch(e){E.kg.error("直播间换流 ERROR",e)}}}else V.F.info("服务异常，请稍后再试！"),E.kg.info("换流失败",e)})}},[i,l,k,D,c]),S=(0,r.useRef)(m);(0,r.useEffect)(()=>{(l===P.W.COMMON_SCENE||l===P.W.LIVING_SEARCH)&&m&&S.current!==m&&T()},[m,l,T]),(0,y.b)(async()=>{e===u.ku.NORMAL_WATCH&&h.current!==e&&o>0&&(E.kg.info("试看权限 变为完整观看权限"),await T()),e!==u.ku.NORMAL_WATCH&&h.current===u.ku.NORMAL_WATCH&&0===o&&(E.kg.info("完整观看权限 变为试看权限"),await T()),h.current=e},[e,o]);let M=r.useRef(),R=r.useRef(d);(0,r.useEffect)(()=>{R.current=d},[d]);let U=r.useCallback(async()=>{let e=1e3*s-Date.now();E.kg.info(`流有效校验，流剩余有效时长，${s-Math.floor(Date.now()/1e3)}`),e<1e3*Number(R.current)&&o&&(E.kg.info("流信息不合法，触发换流"),await T())},[s,T,o]);(0,r.useEffect)(()=>{let e=a.listen(a.EVENT.paidLiveInitTime,()=>U());return()=>{e()}},[U]),(0,r.useEffect)(()=>(M.current&&clearInterval(M.current),e===u.ku.TRY_WATCH_ING&&o>0&&(M.current=setInterval(async()=>{await U()},j)),()=>{M.current&&clearInterval(M.current)}),[o,e,U,j])};var j=l("88506");let T=e=>{let{scene:i=P.W.IN_LIVING_ROOM,logParams:l={},isActive:o}=e,{player:a}=(0,v.n)();(0,r.useRef)(!1);let s=(0,r.useRef)(0),u=(0,r.useRef)(l);r.useEffect(()=>{u.current=l},[l]);let d=r.useCallback(()=>{s.current=Date.now(),(0,j.U0)((0,t._)({},u.current))},[]),c=(0,r.useRef)(o);(0,r.useEffect)(()=>{if(i!==P.W.IN_LIVING_ROOM)o&&d()},[o]),(0,r.useEffect)(()=>{if(i!==P.W.IN_LIVING_ROOM){if(!o&&o!==c.current){let e=Math.floor((Date.now()-s.current)/1e3);(0,j.dL)((0,n._)((0,t._)({},u.current),{duration:e}))}c.current=o}},[o])};var S=l("842392"),M=l("309931"),R=l("206169"),U=l("181139");let B=(0,r.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,n._)((0,t._)({width:8,height:10,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,o.jsx)("path",{d:"M6.805 1.84A2.19 2.19 0 0 1 5.845.4a1.958 1.958 0 0 1-.04-.4H4.227v6.323A1.327 1.327 0 0 1 2.905 7.6c-.223 0-.432-.055-.614-.155a1.323 1.323 0 0 1-.71-1.172A1.329 1.329 0 0 1 3.3 5.005v-1.61A2.908 2.908 0 0 0 0 6.272c0 .983.49 1.85 1.24 2.378a2.885 2.885 0 0 0 1.665.527 2.91 2.91 0 0 0 2.904-2.904v-3.21c.614.446 1.373.71 2.191.71V2.195c-.44 0-.85-.131-1.195-.354z",fill:"#A6A6A6"})}))),G=e=>{let{display_id:i="",viewType:l}=e,[t,n]=r.useState(!0),[a,s]=r.useState(0),[d,c]=r.useState(0),{player:_}=(0,v.n)(),f=r.useRef();return r.useEffect(()=>(l!==u.ku.TRT_WATCH_FINISH&&(f.current&&clearInterval(f.current),f.current=setInterval(()=>{n(!1),requestAnimationFrame(()=>{n(!0);let{new_left:e,mew_top:i}=(0,U.h)();s(e),c(i)})},5e3)),()=>{f.current&&clearInterval(f.current)}),[]),(0,o.jsx)(o.Fragment,{children:t&&(0,M.createPortal)((0,o.jsxs)("div",{className:R.default.waterText,style:{left:`${a}%`,top:`${d}%`,opacity:.4},children:[(0,o.jsx)("div",{children:"付费内容请勿录屏"}),(0,o.jsx)("div",{children:"必要时将追究违者法律责任"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(B,{}),(0,o.jsx)("span",{style:{paddingLeft:4},children:i})]})]}),(null==_?void 0:_.root)||document.body)})};var H=l("368300"),F=l("784492"),Q=l("632766");let Y=(e,i)=>i===u.Pf.NORMAL_WATCH?u.ku.NORMAL_WATCH:Number(e)>0?u.ku.TRY_WATCH_ING:u.ku.TRT_WATCH_FINISH,K=e=>{var i;let{paidLiveData:l,isLogin:a=!1,display_id:s="",scene:d=P.W.COMMON_SCENE,webRid:c="",roomId:v,setPaidLiveData:_,setViewType:m=e=>{},viewType:A,retType:g,setRetType:I,isFirstLive:E=!1,logParams:p={},onPaidLiveTryWatch:y=()=>{},onPaidLiveBuyTicket:C=()=>{},isActive:b=!0,jumpHref:k="",hybridContainer:O,message:N,store:V={},setPaidLiveBurryContrl:x=()=>{}}=e,[w,j]=r.useState(!0),M=Number(f()(l,"max_preview_duration",180)),R=f()(l,"ticket_session.ticket_session_id_str",""),U=Number(f()(l,"duration",0)),B=Number(f()(l,"delivery",0)),{singletonStore:K,cameraStore:Z,roomStore:z}=V,W=null==Z?void 0:null===(i=Z.cameraInfo)||void 0===i?void 0:i.isMainCamera,J=d===P.W.IN_LIVING_ROOM,X=Number(f()(l,"async_auth_data.keep_alive_time",0)),q=Number(f()(l,"async_auth_data.keep_alive_time_stamp",0)),{lastTime:$}=h(a,U,R,_,I,l,A,B,M,W,null,b);return D(N,l,_,I,e=>{try{let{ticket_id:i,right_type:l,entity_rels:o}=e,{cameraStore:{cameraInfoList:r,setCameraInfoList:a}}=V,s=r.map(e=>{var r,a,s,d,c,v,_,f;if(e.paid_live_type===u.xc.SEPARATE_PAID_LIVE&&(null==e?void 0:null===(a=e.camera_paid_info)||void 0===a?void 0:null===(r=a.paid_live_base_info)||void 0===r?void 0:r.ticket_session_id_str)===i&&(e.camera_paid_info.paid_live_base_info.view_right=l),(e.paid_live_type===u.xc.EQUITABLE_CAMERA_POSITION||e.isMainCamera)&&"object"==typeof o){let i=Object.keys(o);if(e.paid_live_type===u.xc.EQUITABLE_CAMERA_POSITION&&i.includes(null==e?void 0:null===(d=e.camera_paid_info)||void 0===d?void 0:null===(s=d.paid_live_base_info)||void 0===s?void 0:s.ticket_session_id_str)&&(e.camera_paid_info.paid_live_base_info.view_right=l),e.isMainCamera&&i.includes(null==z?void 0:null===(c=z.roomInfo)||void 0===c?void 0:c.roomId)){let e=null==z?void 0:null===(_=z.roomInfo)||void 0===_?void 0:null===(v=_.room)||void 0===v?void 0:v.paid_live_data;null==z||z.setRoomInfo((0,n._)((0,t._)({},z.roomInfo),{room:(0,n._)((0,t._)({},null==z?void 0:null===(f=z.roomInfo)||void 0===f?void 0:f.room),{paid_live_data:(0,n._)((0,t._)({},e),{view_right:l})})}))}}return e});a(s)}catch(e){}}),L(A,v,d,X,q,$,_,I,a,V,null),T({scene:d,logParams:p,isActive:b}),(0,F.Z)(()=>{x(!0),m(Y($,g))},[$,m,g]),r.useEffect(()=>{try{(async()=>{let e=await (0,Q.ZP)({service_name:"webcast.douyin.live_pc",key:"paid_live_settings"}),i=f()(e,"water_mark",!0);j(!!i)})()}catch(e){}},[]),r.useEffect(()=>{if(d!==P.W.LIVING_SEARCH&&d!==P.W.IN_LIVING_RECOMMEND){var e,i;A!==u.ku.NORMAL_WATCH&&A!==u.ku.BAN?null==K||null===(e=K.setPaidLiveQRCodeVisible)||void 0===e||e.call(K,!0):null==K||null===(i=K.setPaidLiveQRCodeVisible)||void 0===i||i.call(K,!1)}},[d,A]),(0,o.jsx)("div",{children:a?(0,o.jsxs)(o.Fragment,{children:[A===u.ku.TRT_WATCH_FINISH&&(0,o.jsx)(S.V,{scene:d,webRid:c,logParams:p,isFirstLive:E,onPaidLiveBuyTicket:C,jumpHref:k,isActive:b,container:O,store:V}),J?(0,o.jsx)(H.y,{paidLiveData:l,visible:null==K?void 0:K.paidLiveQRCodeVisible,onClose:()=>{var e;null==K||null===(e=K.setPaidLiveQRCodeVisible)||void 0===e||e.call(K,!1)}}):null,w&&(0,o.jsx)(G,{display_id:s,viewType:A})]}):(0,o.jsx)(P.Z,{scene:d,logParams:p,isFirstLive:E,onPaidLiveTryWatch:y,watchTime:M})})};var Z=K},920560:function(e,i,l){l.d(i,{Cx:function(){return I},QS:function(){return E},ZP:function(){return p}});var t=l("520739"),n=l("878389");l("874386"),l("338172");var o=l("563097"),r=l("713097"),a=l.n(r),s=l("88648"),u=l("95334"),d=l("805591"),c=l("616003"),v=l("578580"),_=l("909543");let f=(0,s.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,n._)((0,t._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,o.jsx)("path",{d:"M4.17 5.333a4.667 4.667 0 1 1-.497 4.417.667.667 0 0 0-1.237.5A6.002 6.002 0 0 0 14 8 6 6 0 0 0 3.333 4.229v-.896a.667.667 0 1 0-1.333 0V6c0 .368.298.667.667.667h2.666a.667.667 0 0 0 0-1.334H4.17z",fill:"#fff",fillOpacity:".9"})})));var m=l("774444"),A=l("441447"),g=l("768492");let I=e=>{let{player:i}=(0,d.n)();return(0,o.jsx)(E,(0,n._)((0,t._)({},e),{player:i}))},E=e=>{let{cover:i,children:l="当前直播已结束",className:t,isLiveModal:n=!1,isPreview:r=!1,anchorSecUserId:d,playerEvent:I,isAnchorBan:E=!1,isKickOut:p=!1,roomId:h="",player:D}=e,y=(0,s.useRef)(!1),[C,b]=s.useState(3),k=(0,s.useRef)(null),[O,N]=s.useState(!0),{isInPreview:P,isInPreviewActive:V,next:x,deleteCurrentSwiper:w,swiper:L}=(0,m.DQ)(),j=(0,s.useRef)(0),T=s.useMemo(()=>V?(j.current=(null==L?void 0:L.activeIndex)||0,j.current):j.current,[V]);(0,s.useEffect)(()=>{!n&&!r&&(null==D?void 0:D.exitFullscreen)&&(null==D||D.exitFullscreen())},[]),(0,s.useEffect)(()=>{I&&l[0]===c.kx.LIVE_FINISH&&!y.current&&(null==I||I.livesdkFinishShow(),y.current=!0),I&&l[0]===c.kx.KICK_OUT&&A.emit(A.EVENT.KicKOutLive,{roomID:h}),I&&l[0]&&A.emit(A.EVENT.livePlayerEndCoverShow,{filter_detail:l[0]})},[l,h]);let S=s.useCallback(()=>{if(P){A.emit(A.EVENT.RefreshLive,{roomID:h}),clearInterval(k.current),N(!0),b(3);return}document.location.reload()},[h,P]),{pathname:M}=(0,_.a)(),R=null==M?void 0:M.startsWith("/iframe/"),U=s.useCallback(()=>{R&&d&&(v.kg.event("iframe reflow"),window.open(`${(0,g.HC)(d)}`,"_blank"))},[R,d]),B=e=>e[0]===c.kx.KICK_OUT?(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:u.default.text,children:e}),(0,o.jsxs)("div",{className:u.default.reset,onClick:()=>S(),children:[(0,o.jsx)(f,{}),(0,o.jsx)("div",{className:u.default.resetText,children:"继续看播"})]})]}):e[0]===c.kx.ANCHOR_BAN&&E?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("img",{className:u.default.anchorBanIcon,src:"https://lf1-webcastcdn-tos.douyinstatic.com/obj/webcast/live_audience_block_warning.png"})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("span",{className:u.default.text,onClick:U,children:[e,R?(0,o.jsxs)(o.Fragment,{children:["，",(0,o.jsx)("span",{style:{textDecoration:"underline"},children:"点击前往个人页"})]}):null]})}),G=(0,s.useRef)(V);return(0,s.useEffect)(()=>(V&&!p&&(k.current=setInterval(()=>{b(e=>(1===e&&(null==w||w(T)),e<=0)?(clearInterval(k.current),N(!1),0):e-1)},1e3)),()=>{clearInterval(k.current),N(!0),b(3)}),[V,p,w,T]),(0,s.useEffect)(()=>{G.current&&!p&&!V&&l[0]===c.kx.LIVE_FINISH&&(null==w||w(T)),G.current=V},[V,p,w,l,T]),(0,s.useEffect)(()=>A.listen(A.EVENT.DisableLeaveCountDown,()=>{clearInterval(k.current),N(!1),b(3)}),[]),(0,s.useEffect)(()=>{A.emit(A.EVENT.LivePreviewEnd,{roomID:h})},[h]),(0,o.jsxs)("div",{className:a()(u.default.errorCover,t),children:[(0,o.jsx)("img",{className:u.default.cover,src:i}),!P&&B(l),P&&(0,o.jsxs)("div",{className:u.default.nextVideoWrap,children:[B(l),O&&!p&&(0,o.jsxs)("div",{className:u.default.nextVideo,children:[C,"秒后自动播放下一内容"]})]})]})};var p=I},34150:function(e,i,l){l.d(i,{JJ:function(){return f},lW:function(){return _}});var t=l("520739"),n=l("878389"),o=l("563097"),r=l("713097"),a=l.n(r),s=l("88648"),u=l("948375"),d=l("805591");let c=(0,s.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,n._)((0,t._)({xmlns:"http://www.w3.org/2000/svg",width:120,height:120,fill:"none",ref:i},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.816 89.106a12.42 12.42 0 0 0 6.911 2.087h46.79c6.891 0 12.478-5.587 12.478-12.478v-5.644l15.779 4.508a3.12 3.12 0 0 0 3.976-2.999V45.419a3.12 3.12 0 0 0-3.976-3l-15.78 4.509v-5.645c0-2.892-.984-5.555-2.636-7.672L60.806 53.308l5.58 3.348c2.524 1.514 2.524 5.172 0 6.687L46.67 75.172c-2.599 1.56-5.905-.313-5.905-3.344V70.81L19.816 89.106zm36.758-38.338l-9.904-5.942c-2.599-1.559-5.905.313-5.905 3.344v16.405L16.458 85.804a12.42 12.42 0 0 1-2.208-7.089V41.283c0-6.89 5.586-12.477 12.477-12.477h46.79c2.286 0 4.428.615 6.271 1.688L56.574 50.768z",fill:"#41424C"})})));var v=l("192284");let _=e=>{let{className:i,onRetry:l,player:t}=e,n=(0,u.Z)(()=>{var e,i;if(l&&l(),!!t)null===(e=t.retry)||void 0===e||e.call(t),null===(i=t.refresh)||void 0===i||i.call(t)});return(0,o.jsxs)("div",{className:a()(v.default.errorCover,i),children:[(0,o.jsx)("span",{className:v.default.icon,children:(0,o.jsx)(c,{})}),(0,o.jsxs)("div",{className:v.default.text,children:[(0,o.jsx)("span",{children:"视频加载失败，您可以尝试"}),(0,o.jsx)("span",{className:v.default.refresh,onClick:n,children:"点此刷新"})]})]})},f=e=>{let{player:i}=(0,d.n)();return(0,o.jsx)(_,(0,n._)((0,t._)({},e),{player:i}))}},893622:function(e,i,l){l.d(i,{n:function(){return u}});var t=l("563097"),n=l("88648"),o=l("805591"),r=l("520739"),a=l("878389");let s=(0,n.forwardRef)((e,i)=>(0,t.jsx)("svg",(0,a._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,t.jsx)("path",{d:"M24.932 16.444c0-4.687-3.89-8.444-8.634-8.444a8.679 8.679 0 0 0-7.207 3.79v-1.558a.99.99 0 0 0-1.98 0v4.038c0 .547.444.99.99.99h4.038a.99.99 0 0 0 0-1.98h-1.646c1.137-1.963 3.304-3.3 5.804-3.3 3.7 0 6.655 2.918 6.655 6.464 0 3.547-2.956 6.465-6.655 6.465-2.963 0-5.459-1.88-6.326-4.453a.99.99 0 0 0-1.876.633c1.138 3.38 4.39 5.8 8.202 5.8 4.746 0 8.635-3.758 8.635-8.445z",fill:"#fff"})}))),u=(0,l("618105").r)(()=>{let{player:e}=(0,o.n)(),i=n.useCallback(()=>{e.replay()},[]);return(0,t.jsx)("div",{style:{cursor:"pointer"},onClick:i,children:(0,t.jsx)(s,{})})})},828191:function(e,i,l){l.d(i,{B:function(){return c},l:function(){return v}});var t=l(88648),n=l(734123),o=l(805591),r=l(988381),a=l(987475),s=l(847191),u=l(441447),d=l(721222);let c=e=>()=>{var i,l;if(0===e.currentTime)return;0===(0,s.$o)(a.LocalStorageKeys.PLAYER_IS_MUTE)&&e.muted&&(0,s.qQ)(a.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,r.w)(e.muted);let t=e.volume,n=(0,r.T1)(),o=(0,r.rC)();(0,d.ni)({before_voice_value:o?0:Math.round((null!=n?n:0)*100),voice_value:Math.round((null!=t?t:0)*100),voice_status:e.muted?0:1,if_browser_limited:null!==(l=null===(i=window.__INVISIBLE_QUERY__)||void 0===i?void 0:i.if_browser_limited)&&void 0!==l?l:0}),0===t?(0,r.w)(!0):(0,r.n$)(Number(null!=t?t:.1)),u.emit(u.EVENT.syncInteraction)};function v(){let{player:e}=(0,o.n)(),i=(0,t.useMemo)(()=>c(e),[]);return(0,t.useEffect)(()=>{e.muted=(0,r.rC)();let l=e.getPlugin("volume");return l&&l.useHooks&&l.useHooks("muted_change",()=>{var i,l,t,n,o;if(0===e.volume){let i=(0,r.T1)();return e.volume=i,(0,r.w)(!1),(0,d.ni)({before_voice_value:Math.round(100*i),voice_value:0,voice_status:1,if_browser_limited:null!==(t=null===(l=window.__INVISIBLE_QUERY__)||void 0===l?void 0:l.if_browser_limited)&&void 0!==t?t:0}),!1}return setTimeout(()=>{(0,r.w)(e.muted)},50),(0,d.ni)({before_voice_value:0,voice_value:Math.round((null!==(n=e.volume)&&void 0!==n?n:0)*100),voice_status:0,if_browser_limited:null!==(o=null===(i=window.__INVISIBLE_QUERY__)||void 0===i?void 0:i.if_browser_limited)&&void 0!==o?o:0}),!0}),e.on(n.Events.VOLUME_CHANGE,i),()=>{e.off(n.Events.VOLUME_CHANGE,i)}},[]),null}},331991:function(e,i,l){l.d(i,{A:function(){return s}});var t=l(563097),n=l(309244),o=l(713097),r=l.n(o);l(88648);var a=l(502755);let s=e=>{let{count:i,className:l,renderSVG:o}=e;return(0,t.jsxs)("span",{className:r()(a.default.userCount,l),children:[o?o():(0,t.jsx)(n.Z,{}),(0,t.jsx)("span",{className:a.default.count,children:i||"0"})]})}},773265:function(e,i,l){l.d(i,{Fk:function(){return k},Lq:function(){return O},wz:function(){return N}});var t=l(520739),n=l(878389);l(874386),l(250440),l(268917),l(110006),l(826893);var o=l(907831),r=l.n(o),a=l(645260),s=l.n(a),u=l(96008),d=l.n(u),c=l(877639),v=l.n(c),_=l(779145),f=l.n(_),m=l(88648),A=l(734123),g=l(9034),I=l(805591),E=l(116326),p=l(167698),h=l(39738),D=l(483347),y=l(984216),C=l(441447),b=l(72405);let k=(()=>{let e={};return[...Array(9)].forEach((i,l)=>{e[l]={idx:l}}),e})(),O=e=>{let i={};return[...Array(e)].forEach((e,l)=>{i[l]={idx:l}}),i},N=e=>{let{enable:i,setSeats:l,getUsers:o,getPositions:a,setLayout:u,layout:c,selfLinkMicId:_,onUsersUpdate:N,roomIdStr:P,getSeats:V,audioPower:x,linkRoomType:w="video",uiLayout:L,setUiLayout:j=d(),incomingPlayer:T=null,linkStatus:S,setIsPk:M}=e,{player:R}=(0,I.n)(),U=T||R,B=m.useRef(0),G=m.useCallback(v()((e,i)=>{var u,d;let c=o();if((null==e?void 0:e.length)===0&&(null===(u=Object.keys(c))||void 0===u?void 0:u.length)>1&&i===h.V_.LINKMICUILAYOUT_AUDIOCHAT_TOP2V4V4)return;let v=a(),_=!1,f=r()(k);if(i===h.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC||i===h.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT?f={}:i===h.V_.LINKMICUILAYOUT_AUDIOCHAT_TOP2V4V4&&(f=O(10)),e.forEach(e=>{var l,t;let n;let o=c[s()(e,"uid_str","")];"number"==typeof(null==e?void 0:e.type)&&"number"==typeof(null==o?void 0:o.link_type)&&(o.link_type=e.type),"number"==typeof(null==e?void 0:e.p)?n=e.p:"string"==typeof(null==e?void 0:e.p)?n=Number(e.p):o&&"number"==typeof o.user_position&&(n=o.user_position),[h.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC].includes(i)&&o&&"number"==typeof o.user_position&&(n=o.user_position),("number"==typeof n||"string"==typeof n)&&(f[n]={user:null!=o?o:null===(t=f[n])||void 0===t?void 0:t.user,idx:Number(n)}),(null===(l=V()[n])||void 0===l?void 0:l.linkmic_id_str)!==(null==o?void 0:o.linkmic_id_str)&&(_=!0),(!o||o.user_position!==n)&&(_=!0)}),Object.keys(v).forEach(e=>{f[e].info=(0,t._)({},v[e])}),e.length!==Object.keys(c).length&&(![h.V_.LINKMICUILAYOUT_VIDEOCHAT_ENLARGEGUEST1V6,h.V_.LINKMICUILAYOUT_VIDEOCHATFLOATWINDOWLAYOUT].includes(i)||0!==e.length)&&(_=!0),_&&N&&N(),1===Object.keys(f).length&&[h.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC,h.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT,h.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT].includes(i)&&(f[1]={idx:1}),!(null===(d=f[0])||void 0===d?void 0:d.user)){let e=Object.values(c).find(e=>(null==e?void 0:e.user_position)===0),i=s()(Object.values(f).find(i=>{var l,t,n;return(null==i?void 0:null===(t=i.user)||void 0===t?void 0:null===(l=t.user)||void 0===l?void 0:l.id_str)===(null==e?void 0:null===(n=e.user)||void 0===n?void 0:n.id_str)}),"idx",-1);i>0&&(f[i]={idx:i}),f[0]=(0,n._)((0,t._)({},f[0]),{user:e})}l(f)},500),[_,V,w]),H=m.useCallback(v()(function(e,i){var u,c;arguments.length>2&&void 0!==arguments[2]&&arguments[2];let v=o();if((null==e?void 0:e.length)===0&&(null===(u=Object.keys(v))||void 0===u?void 0:u.length)>1&&[g.yP.AUDIO_1V8,g.yP.AUDIO_GRID].includes(i))return;let _=a(),m=!1,A=r()(k);if(i===g.yP.VIDEO_DYNAMIC&&(A={}),e.forEach(e=>{var l,t,n,o,r,a,u;let c;let _=v[s()(e,"uid_str","")];if("number"==typeof(null==e?void 0:e.type)&&"number"==typeof(null==_?void 0:_.link_type)&&(_.link_type=e.type),"audio"===w&&(null==_?void 0:_.link_type)===1&&(_.link_type=2),"number"==typeof(null==e?void 0:e.p)?c=e.p:"string"==typeof(null==e?void 0:e.p)?c=Number(e.p):_&&"number"==typeof _.user_position&&(c=_.user_position),[g.yP.AUDIO_1V8,g.yP.AUDIO_GRID].includes(i)&&_&&"number"==typeof _.user_position){let e=Object.values(v).find(e=>(null==e?void 0:e.user_position)===0),i=null===(o=window)||void 0===o?void 0:null===(n=o.__STORE__)||void 0===n?void 0:null===(t=n.roomStore)||void 0===t?void 0:null===(l=t.anchor)||void 0===l?void 0:l.id_str;(null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.id_str)===i&&(c=_.user_position)}if(i===g.yP.VIDEO_1V6){let e=f()(v);(null==e?void 0:e.some(e=>{var i,l;return null==e?void 0:null===(l=e.content)||void 0===l?void 0:null===(i=l.linkmic_audience_content)||void 0===i?void 0:i.is_enlarged}))?d()():c+=1}else i===g.yP.VIDEO_1V8?c+=1:i===g.yP.VIDEO_DYNAMIC_FLOAT?c+=1:i===g.yP.VIDEO_6V6&&(c=({0:0,1:1,2:6,3:7,4:2,5:3,6:8,7:9,8:4,9:5,10:10,11:11})[c]);("number"==typeof c||"string"==typeof c)&&(i===g.yP.VIDEO_DYNAMIC?_&&(A[c]={user:_,idx:Number(c)}):A[c]={user:null!=_?_:null===(a=A[c])||void 0===a?void 0:a.user,idx:Number(c)}),void 0!==i&&(null===(u=V()[c])||void 0===u?void 0:u.linkmic_id_str)!==(null==_?void 0:_.linkmic_id_str)&&(m=!0),(!_||_.user_position!==c)&&(m=!0)}),Object.keys(_).forEach(e=>{A[e].info=(0,t._)({},_[e])}),e.length!==Object.keys(v).length&&(i!==g.yP.VIDEO_1V6||0!==e.length)&&(m=!0),m&&N&&N(),1===Object.keys(A).length&&i===g.yP.VIDEO_DYNAMIC&&(A[1]={idx:1}),!(null===(c=A[0])||void 0===c?void 0:c.user)){let e=Object.values(v).find(e=>(null==e?void 0:e.user_position)===0),i=s()(Object.values(A).find(i=>{var l,t,n;return(null==i?void 0:null===(t=i.user)||void 0===t?void 0:null===(l=t.user)||void 0===l?void 0:l.id_str)===(null==e?void 0:null===(n=e.user)||void 0===n?void 0:n.id_str)}),"idx",-1);i>0&&(A[i]={idx:i}),A[0]=(0,n._)((0,t._)({},A[0]),{user:e})}l(A)},500),[_,V,w]),F=m.useCallback(e=>{e.forEach(e=>{let i=s()(e,"uid_str","");if(0!==e.talk)try{null==x||x.push(i,e)}catch(e){}})},[x]),Q=m.useCallback(e=>{u(e),N&&N()},[N,u]),Y=m.useCallback(e=>{if(100===(e=e.detail||e).code&&!!i)try{let i=new TextDecoder().decode(e.content),t=(0,E.KR)(i);if(t&&t.app_data){let e=JSON.parse(t.app_data);if(B.current>e.timestamp)return;B.current=e.timestamp;let{ui_layout:i}=e;if(D.re.includes(Number(i))){let l=(0,y.M2)(Number(i));c!==l&&Q(l),G(e.grids,i),F(e.grids)}else switch(e.ver){case p.t.AUDIO_TALK_ROOM:c!==g.yP.AUDIO_1V8&&c!==g.yP.AUDIO_GRID&&Q(g.yP.AUDIO_1V8),H(e.grids,g.yP.AUDIO_1V8),F(e.grids);break;case p.t.AUDIO_TALK_ROOM_1V8:c!==g.yP.AUDIO_1V8&&Q(g.yP.AUDIO_1V8),H(e.grids,g.yP.AUDIO_1V8),F(e.grids);break;case p.t.VIDEO_TALK_ROOM:case p.t.VIDEO_EQUAL:c!==g.yP.VIDEO_GRID&&Q(g.yP.VIDEO_GRID),H(e.grids,g.yP.VIDEO_GRID),F(e.grids);break;case p.t.VIDEO_DYNAMIC:c!==g.yP.VIDEO_DYNAMIC&&Q(g.yP.VIDEO_DYNAMIC),H(e.grids,g.yP.VIDEO_DYNAMIC),F(e.grids);break;case p.t.VIDEO_DYNAMIC_FLOAT:c!==g.yP.VIDEO_DYNAMIC_FLOAT&&Q(g.yP.VIDEO_DYNAMIC_FLOAT),H(e.grids,g.yP.VIDEO_DYNAMIC_FLOAT),F(e.grids);break;case p.t.VIDEO_C:c!==g.yP.VIDEO_1_V_8&&Q(g.yP.VIDEO_1_V_8),H(e.grids,g.yP.VIDEO_1_V_8),F(e.grids);break;case p.t.VIDEO_DYNAMIC_1V6:c!==g.yP.VIDEO_1_V_6&&Q(g.yP.VIDEO_1_V_6),H(e.grids,g.yP.VIDEO_1_V_6),F(e.grids);break;case p.t.VIDEO_DYNAMIC_1V3:c!==g.yP.VIDEO_1_V_3&&Q(g.yP.VIDEO_1_V_3),H(e.grids,g.yP.VIDEO_1_V_3),F(e.grids);break;case p.t.VIDEO_T1B8:c!==g.yP.VIDEO_T1_V_B8&&Q(g.yP.VIDEO_T1_V_B8),H(e.grids,g.yP.VIDEO_T1_V_B8),F(e.grids);break;case p.t.C_VIDEO_CAMERA:case p.t.VIDEO_CAMERA_NEW:c!==g.yP.VIDEO_1V6&&Q(g.yP.VIDEO_1V6),H(e.grids,g.yP.VIDEO_1V6),F(e.grids);break;case p.t.VIDEO_1V8:c!==g.yP.VIDEO_1V8&&Q(g.yP.VIDEO_1V8),H(e.grids,g.yP.VIDEO_1V8),F(e.grids);break;case p.t.VIDEO_2V4v4:c!==g.yP.VIDEO_2V4V4&&Q(g.yP.VIDEO_2V4V4),H(e.grids,g.yP.VIDEO_2V4V4),F(e.grids);break;case p.t.VIDEO_6V6:c!==g.yP.VIDEO_6V6&&Q(g.yP.VIDEO_6V6),P&&P===e.channel_id&&H(e.grids,g.yP.VIDEO_6V6),F(e.grids);break;case p.t.MULTI_ANCHOR:case p.t.PK:M(!0),c&&Q(void 0);break;default:c&&Q(void 0),M(!1)}}else{var l;(null==t?void 0:null===(l=t.source)||void 0===l?void 0:l.includes("TTLiveSDK"))&&Q(void 0)}t&&t.audio_subtitle&&S!==b.cK.LINKED&&C.emit(C.EVENT.AudioStageUpdate,t.audio_subtitle)}catch(e){}},[H,P,c,Q,F,i,G,L,j,S]);return m.useEffect(()=>(null==U||U.on(A.Events.SEI_PARSED,Y),()=>{null==U||U.off(A.Events.SEI_PARSED,Y)}),[U,Y,i]),null}},338073:function(e,i,l){l.d(i,{L:function(){return s}});var t=l(520739),n=l(985703),o=l(910863),r=l(684767),a=l(88648);let s=e=>{let{onEnterRoom:i,enterLogParams:l={},href:s,propsOnLoginSuccess:u,adData:d,isReuseBasicPlayer:c=!1}=e,v=a.useMemo(()=>{let e=d?(0,n.e1)({rawAdData:d}):{};return(0,o.G7)((0,t._)({open_promotion_list:"1",enter_method_temai:"click_live_cart_tag"},l,e),s)},[s,l,d]),_=a.useMemo(()=>{let e=d?(0,n.e1)({rawAdData:d}):{};return(0,o.G7)((0,t._)({open_promotion_list:"1",open_promotion_detail:"1",enter_method_temai:"click_live_popup_card"},e,l),s)},[s,l,d]),f=a.useCallback(e=>{let{scene:o}=e||{};null==u||u();let a=d?(0,n.e1)({rawAdData:d}):{};null==i||i({openLiveModal:!0,onEnterParams:"cart"===o?(0,t._)({open_promotion_list:"1",open_promotion_detail:"0",enter_method_temai:"click_live_cart_tag"},l,a):(0,t._)({open_promotion_list:"1",open_promotion_detail:"1",enter_method_temai:"click_live_popup_card"},a,l)}),!c&&("cart"===o?window.open(v,(0,r.f)()?"_self":"_blank"):"pop"===o&&window.open(_,(0,r.f)()?"_self":"_blank"))},[u,i,v,_,c,l,d]),m=a.useCallback(()=>{let e=d?(0,n.e1)({rawAdData:d}):{};null==i||i({openLiveModal:!0,onEnterParams:(0,t._)({open_promotion_list:"1",open_promotion_detail:"0",enter_method_temai:"click_live_cart_tag"},l,e)}),!c&&window.open(v,(0,r.f)()?"_self":"_blank")},[v,i,c,l,d]);return{onShopLoginSuccess:f,onCartClick:m,onPromotionPopClick:a.useCallback(()=>{let e=d?(0,n.e1)({rawAdData:d}):{};null==i||i({openLiveModal:!0,onEnterParams:(0,t._)({open_promotion_list:"1",open_promotion_detail:"1",enter_method_temai:"click_live_popup_card"},e,l)}),!c&&window.open(_,(0,r.f)()?"_self":"_blank")},[_,i,c,l,d])}}},623278:function(e,i,l){l.d(i,{a:function(){return r}});var t=l(134761);l(268917);var n=l(879146),o=l.n(n);class r{push(e,i){this.powers[e]?(this.powers[e].length<2||this.powers[e].pop(),this.powers[e].push(i)):this.powers[e]=[i],0!==this.status[e]&&(this.status[e]=0,clearTimeout(this.timer[e]),this.timer[e]=setTimeout(()=>this.publish(e),100))}on(e,i){this.ee.on(e,i)}off(e,i){this.ee.off(e,i),clearTimeout(this.timer[e])}destroy(){Object.keys(this.timer).forEach(e=>{clearTimeout(this.timer[e])})}publish(e){clearTimeout(this.timer[e]),this.status[e]=0;let i=this.powers[e].shift();i&&this.ee.emit(e,i),this.powers[e].length>0?this.timer[e]=setTimeout(()=>this.publish(e),this.interval):(this.timer[e]=setTimeout(()=>{this.ee.emit(e,{talk:0})},2*this.interval),delete this.status[e])}constructor(){(0,t._)(this,"ee",void 0),(0,t._)(this,"powers",{}),(0,t._)(this,"status",{}),(0,t._)(this,"timer",{}),(0,t._)(this,"interval",850),this.ee=new(o())}}},48273:function(e,i,l){l.d(i,{Y:function(){return d},m:function(){return c}});var t=l(746309),n=l(768492),o=l(149897),r=l(428775),a=l.n(r);let s=`${(0,n.Pe)()}`,u=a().create({baseURL:s});(0,o.U)(u);let d=async(e,i)=>{let l=u.get("/webcast/distribution/check_user_live_status/",{withCredentials:!0,params:{user_ids:e,aid:6383,distribution_scenes:i,device_platform:"webapp"}});return l.then(l=>{var n,o,r;let{status_code:a,data:s=[]}=(null==l?void 0:l.data)||{},u=null==l?void 0:null===(n=l.headers)||void 0===n?void 0:n["x-tt-logid"];null===(r=(0,t.OK)())||void 0===r||null===(o=r.sendEvent)||void 0===o||o.call(r,{name:"check_live_status_live_success",categories:{status_code:a,data:s,logId:u,userId:e,scene:i},type:"event"})}),l.catch(l=>{var n,o;null===(o=(0,t.OK)())||void 0===o||null===(n=o.sendEvent)||void 0===n||n.call(o,{name:"check_live_status_error",categories:{userId:e,scene:i,err:l},type:"event"})}),l},c=(e,i)=>u.get("/webcast/linkmic_audience/list/v2/",{withCredentials:!0,params:{room_id:e,aid:6383,anchor_id:i,live_id:1,device_platform:"web",language:navigator.language}})},770945:function(e,i,l){l.d(i,{h:function(){return r}});var t=l(768492),n=l(567754);let o=`${(0,t.Pe)()}`,r=(e,i)=>`${o}/${e}${i?"?":""}${(0,n.stringify)(i)}`},884087:function(e,i,l){l.r(i);var t=l(563097);l(88648);var n=l(884082);i.default=e=>{let{onShowVipLiveBoundary:i,paidLiveData:l,roomId:o,roomStatus:r,messageInstance:a,onBtnClick:s,isInLivingRoom:u,roomInfo:d,customContent:c,abTestData:v}=e;return(0,t.jsx)(n.ZP,{roomId:o,roomStatus:r,messageInstance:a,onBtnClick:s,paidLiveData:l,onShowBoundary:i,isInLivingRoom:u,roomInfo:d,customContent:c,abTestData:v})}},556536:function(e,i,l){l.d(i,{J:function(){return a}});var t=l("563097"),n=l("713097"),o=l.n(n);l("88648");var r=l("47404");let a=e=>{let{className:i}=e;return(0,t.jsx)("div",{className:o()(r.default.icon,i),children:(0,t.jsx)("img",{src:"data:image/png;base64,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"})})}},122196:function(e,i,l){l.d(i,{r:function(){return a}});var t=l("563097"),n=l("713097"),o=l.n(n);l("88648");var r=l("633313");let a=e=>{let{className:i}=e;return(0,t.jsx)("div",{className:o()(r.default.icon,i),children:(0,t.jsx)("img",{src:"data:image/png;base64,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"})})}},680319:function(e,i,l){l.d(i,{V8:function(){return h},_q:function(){return D}});var t=l(520739),n=l(878389);l(874386);var o=l(563097),r=l(88648),a=l(734123),s=l(309931),u=l(407544),d=l(465769),c=l(441447),v=l(784415),_=l(326494),f=l(289228),m=l(443073),A=l(335101),g=l(568201),I=l(589617);let E=0,p=!1,h=e=>{var i,l;let{isShowGuide:t,isActive:n,player:f,awemeId:m}=e,A=(0,r.useRef)(!1),[h,D]=(0,r.useState)(!1),{attemptOpen:y,executeClose:C}=(0,u.B)({popName:"浏览器限制-声音提醒",onOpen:()=>{D(!0)},onClose:()=>{D(!1)}});(0,r.useLayoutEffect)(()=>{if(!f||t)return;let e=()=>{if(!A.current)(0,_.q)({player:f,onSuccess:()=>{!t&&E<5&&y()}}),A.current=!0};return f.on(a.Events.AUTOPLAY_PREVENTED,e),()=>{f.off(a.Events.AUTOPLAY_PREVENTED,e)}},[f,t,n]),(0,r.useEffect)(()=>{if(!n||t||!f){C();return}if(!p&&E<5&&(f.muted||f.paused)){let e=setTimeout(()=>{f.muted=!1,f.paused&&setTimeout(()=>{f.play()}),A.current=!1,p=!0},200);return()=>{clearTimeout(e)}}E<5&&f.muted?y():C()},[t,n,f]);let b=!t&&h;(0,r.useEffect)(()=>{b&&n&&(E+=1,v.Z.sendLog("voiceBubbleShow",{enter_from:(0,d.vM)()}))},[n,b]);let k=()=>{E=5,C()};if((0,r.useEffect)(()=>{if(f){let e=e=>{((null==e?void 0:e.action)==="change_muted"||(null==e?void 0:e.action)==="change_volume")&&k()};return f.on(a.Events.USER_ACTION,e),()=>{f.off(a.Events.USER_ACTION,e)}}},[f]),(0,r.useEffect)(()=>{if(f){let e=e=>{("volumeDown"===e.action||"volumeUp"===e.action)&&k()};return f.on(g.B.CustomShortCut,e),()=>{f.off(g.B.CustomShortCut,e)}}},[f]),(0,r.useEffect)(()=>{if(!!m)c.emit(c.EVENT.silentStatusChange,{awemeId:m,isAuto:!0,status:b})},[b,m]),!b)return null;let O=null==f?void 0:null===(l=f.getPlugin)||void 0===l?void 0:null===(i=l.call(f,"SoundGuideTooltipPlugin"))||void 0===i?void 0:i.root;return O?(0,s.createPortal)((0,o.jsx)(I.V,{onClose:k,onOpen:()=>{v.Z.sendLog("clickVoiceBubble",{enter_from:(0,d.vM)()}),f.muted=!1,k()},description:"当前为静音，是否要打开声音？"}),O):null},D=e=>{let i=(0,m.N)(),l=(0,A.n)();return(0,o.jsxs)(f.k,{componentName:"NewUseSoundGuidePlugin",Slardar:i,children:[(0,o.jsx)(I.I,(0,t._)({},e)),(0,o.jsx)(h,(0,n._)((0,t._)({},e),{player:l}))]})}},784415:function(e,i,l){var t=l(872136);i.Z=new t.h({voiceBubbleShow:{eventName:"voice_bubble_show",params:{enter_from:""}},voiceBarShow:{eventName:"voice_bar_show",params:{enter_from:""}},clickVoiceBubble:{eventName:"click_voice_bubble",params:{enter_from:"",is_open:1}}})},326494:function(e,i,l){l.d(i,{q:function(){return n}});let t=e=>e.muted||0===e.volume,n=e=>{let{onFail:i,onSuccess:l,player:n}=e;!t(n)&&(n.muted=!0),setTimeout(()=>{!t(n)&&(n.muted=!0),n.paused&&n.play(),setTimeout(()=>{n.paused?(n.muted=!1,null==i||i()):t(n)&&(null==l||l())},500)})}}}]);