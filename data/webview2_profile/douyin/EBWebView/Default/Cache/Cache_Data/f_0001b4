"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["99763"],{310732:function(e,t,i){e.exports=i.p+"media/audioBg.5de6b39f044e76ed.png"},726401:function(e,t,i){i.d(t,{Cg:function(){return o},Cs:function(){return n},Df:function(){return l},EY:function(){return u},Xt:function(){return s},YT:function(){return r},kh:function(){return a}});var r={Red:1,1:"Red",Blue:2,2:"Blue"};let l={1:"red",2:"blue"},a={StatusProfitEgg_Unknown:0,StatusProfitEgg_WaitingForStart:1,StatusProfitEgg_Challenging:2,StatusProfitEgg_WaitingForSettle:3,StatusProfitEgg_Success:4,StatusProfitEgg_Fail:5,StatusProfitEgg_Rewarding:6,StatusProfitEgg_Finish:7},n={TypeProfitEgg_Unknown:0,TypeProfitEgg_Create:1,TypeProfitEgg_Start:2,TypeProfitEgg_Update:3,TypeProfitEgg_Settle:4,TypeProfitEgg_Finish:5,TypeProfitEgg_Contribute:6},s={PKValue:1,AssistCount:2},o={1:{marginLeft:"8px"},2:{marginRight:"8px"}},u={Text_Success:"成功",Text_Fail:"失败",Text_Finish:"结束",Color_Yellow:"#FFE24A",Color_White:"#FFF",Flex_End:"flex-end",Flex_Start:"flex-start",Right:"right",Left:"left",MidLine_Margin:"0 4px",Fight_Value:"对战值",Assis_Count:"人助力",ONE_Twenty:"120px",Handred_Percent:"100%"}},464600:function(e,t,i){i.d(t,{B0:function(){return a},Kg:function(){return l},f9:function(){return s},u7:function(){return n}});var r=i(726401);let l=(e,t,i,r)=>r?Number(e):Number(e)-Math.floor(Number(i)/1e3-Number(t)),a=(e,t,i,l,a)=>{switch(e){case r.kh.StatusProfitEgg_WaitingForStart:return t(null==i?void 0:i.task_duration,null==i?void 0:i.task_start_time,null==l?void 0:l.current_time,!0);case r.kh.StatusProfitEgg_Rewarding:return t(null==a?void 0:a.reward_duration,null==a?void 0:a.reward_start_time,null==l?void 0:l.current_time);case r.kh.StatusProfitEgg_Challenging:case r.kh.StatusProfitEgg_WaitingForSettle:case r.kh.StatusProfitEgg_Success:case r.kh.StatusProfitEgg_Fail:return t(null==i?void 0:i.task_duration,null==i?void 0:i.task_start_time,null==l?void 0:l.current_time);default:return 0}},n=(e,t,i,l,a,n,s,o)=>{let u=i===r.Xt.PKValue?r.EY.Fight_Value:r.EY.Assis_Count;switch(e){case r.kh.StatusProfitEgg_WaitingForStart:return`集${t}${u}获得${a}倍加成`;case r.kh.StatusProfitEgg_Challenging:return l();case r.kh.StatusProfitEgg_WaitingForSettle:case r.kh.StatusProfitEgg_Success:return n?s(`等待${a}倍对战值加成`,!1,a):l();case r.kh.StatusProfitEgg_Fail:case r.kh.StatusProfitEgg_Rewarding:return n?`${a}倍加成中`:"继续加油吧";case r.kh.StatusProfitEgg_Finish:return s(i===r.Xt.PKValue?`共加成${null==o?void 0:o.total_reward_score}对战值`:`共${null==o?void 0:o.total_reward_score}人助力`,!1,null==o?void 0:o.total_reward_score);default:return""}},s=(e,t,i,l,a,n,s,o,u,d)=>{let c=l===r.Xt.PKValue?r.EY.Fight_Value:r.EY.Assis_Count;switch(t){case r.Cs.TypeProfitEgg_Create:return`集${i}${c}获得${a}倍加成`;case r.Cs.TypeProfitEgg_Start:return n();case r.Cs.TypeProfitEgg_Contribute:case r.Cs.TypeProfitEgg_Update:return s?o(`等待${a}倍对战值加成`,!0,a):n();case r.Cs.TypeProfitEgg_Settle:return s?`${a}倍加成中`:"继续加油吧";case r.Cs.TypeProfitEgg_Finish:return o((r.Xt.PKValue,`共加成${null==u?void 0:u.total_reward_score}对战值`),!1,null==u?void 0:u.total_reward_score);default:return d(e,i,l,n,a,s,o,u)}}},726900:function(e,t,i){i.d(t,{K:function(){return a}}),i(874386),i(209955);var r=i(88648),l=i(632766);function a(e){let[t,i]=(0,r.useState)(null),[a,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!!e)(async()=>{try{n(null);let e=await (0,l.ZP)({service_name:"webcast.douyin.live_pc",key:"polling_frequency"});i(e)}catch(e){n(e instanceof Error?e:Error(String(e)))}})()},[e]),{pollingFrequency:t,error:a}}},713503:function(e,t,i){i.d(t,{f:function(){return r}}),i(284961),i(826893);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/^http:\/\//i,"https://")}},875222:function(e,t,i){i(874386);var r=i(88648),l=i(1792),a=i(354312);t.Z=e=>{let{abtestData:t,tab:i,url:n,data:s,default_qulity:o}=e,[u,d]=r.useState(!1),{isFeedH265:c,addH265ErrorNum:_,resetH265ErrorNum:h}=(0,a.Z)({abtestData:t,tab:i});return{playerUrl:r.useMemo(()=>{if(c&&s&&!u){var e,t;let i=(0,l.i4)(null==s?void 0:null===(e=s.live_core_sdk_data)||void 0===e?void 0:e.pull_data,o)||(0,l.i4)(null==s?void 0:null===(t=s.live_core_sdk_data)||void 0===t?void 0:t.pull_data);if(i)return i}return n},[n,c,s,u]),isH265Err:u,isFeedH265:c,setIsH265Err:d,addH265ErrorNum:_,resetH265ErrorNum:h}}},546372:function(e,t,i){i.r(t),i.d(t,{LiveSearchPlayerSkeleton:function(){return ty},default:function(){return tw},LiveSearchPlayerInner:function(){return tm},LiveSearchPlayer:function(){return tE}});var r=i("520739"),l=i("878389");i("675373"),i("874386"),i("413806"),i("826893"),i("250440"),i("779788");var a=i("563097"),n=i("713097"),s=i.n(n),o=i("645260"),u=i.n(o),d=i("88648"),c=i("338426"),_=i("850634"),h=i("618105"),p=i("639194"),v=i("765208"),g=i("585543"),f=i("782262"),m=i("893622"),y=i("567006"),E=i("920560"),w=i("34150"),k=i("730876"),b=i("828191"),P=i("175739"),S=i("809250"),L=i("222256"),C=i("744376"),I=i("988381"),x=i("439239"),R=i("629163"),T=i("1792"),N=i("335566"),j=i("770945"),D=i("48273"),F=i("721222"),O=i("368200"),V=i("58404"),M="tfUWVF5m",A="rGL3Tv86",U="aYUfCR7Y",W=i("872136"),B=new W.h({userAction:{eventName:"search_result_click",params:{impr_id:"",rank:0,search_id:"",search_keyword:"",search_result_id:"",is_aladdin:0,token_type:"",button_type:"",from_video_id:"",enter_from:"general_search"}}}),Z={userCount:"e3x7qebH",player:"VuxIMbWc",linkArea:"JBnbKuvK",preview:"tHKfRCng",poster:"nZMllP3B",liveInfo:"IVCwfIpB",toolbarContainer:"nhKut_Vm",divide:"in3QFKGO",inActive:"zanaMdll",info:"XvbSaglY"},$=i("803480");i("602157");var z=i("961412"),G={liveInfo:"FzqVbpg0",userInfo:"OFDnSv6I",userName:"YxTBglx1",description:"wv_QJwEH"};let H=e=>{let{title:t,authorInfo:i,className:r,style:l}=e;return(0,a.jsxs)("div",{className:s()(G.liveInfo,r),style:l,children:[!!(null==i?void 0:i.nickname)&&(0,a.jsx)("div",{className:G.userInfo,children:(0,a.jsx)("div",{className:G.userName,children:(0,a.jsx)(z.Z,{text:`@${i.nickname}`})})}),!!t&&(0,a.jsx)("div",{className:G.description,children:(0,a.jsx)(z.Z,{text:"string"==typeof t?t:(null==t?void 0:t.text)||""})})]})};var q=i("905003"),Y=i("632766"),K=i("618360"),J=i("774575"),X=i("441447"),Q=i("924300"),ee=i("47047"),et=i("828782"),ei=i("725887"),er=i("167951"),el=i("684767"),ea=i("884210"),en=i("338073"),es=i("551581"),eo=i("273312"),eu=i("622962"),ed=i("790853"),ec=i("111906"),e_=i("408661"),eh=i("623504"),ep=i("751365"),ev=i("737074"),eg=e=>{let{roomId:t,anchorId:i,hasPlay:l,program:a,enterLogParams:n,shopParams:s,nowTime:o,isActive:u,isPause:c,isVisibleRef:_,isPaidLive:h,isFollow:p,isModal:v=!1}=e,{setIntervalWarp:g,clearIntervalWarp:f}=ev.Z,m=(0,d.useRef)(null),y=(0,d.useRef)(null);(0,d.useEffect)(()=>(u&&!c&&l?m.current=g(()=>{E("interval")},1e4):f(m.current),()=>{f(m.current)}),[c,u,l]),(0,d.useEffect)(()=>{let e=e=>{(0,F.Y5)((0,r._)({duration:Date.now()-y.current,has_play:l?1:0,anchor_id:i,room_id:t,is_paidlive:Number(h),is_visible:_.current,follow_status:p},(0,F.Ne)(a),n,s)),y.current=null};return u&&(c&&y.current&&v?e(1):!c&&v&&(y.current=Date.now())),()=>{y.current&&v&&e(3)}},[u,c,v]);let E=(0,d.useCallback)(e=>{(0,F.UH)((0,r._)({duration:Date.now()-o.current,has_play:l?1:0,anchor_id:i,room_id:t,is_paidlive:Number(h),is_visible:_.current,from_type:e,follow_status:p},(0,F.Ne)(a),n,s)),o.current=Date.now()},[o,l,i,t,c,_]);return{liveDuration:E}},ef=i("805591");let em=e=>{let{isActive:t,player:i}=e;return(0,d.useEffect)(()=>{if(i&&t){let e=X.listen(X.EVENT.searchWaterfallFullCardPause,()=>{i.pause()}),t=X.listen(X.EVENT.searchWaterfallFullCardUnmute,()=>{i.muted=!1});return()=>{null==e||e(),null==t||t()}}},[i,t]),null},ey=e=>{let{player:t}=(0,ef.n)();return(0,a.jsx)(em,(0,l._)((0,r._)({},e),{player:t}))};var eE=i("221358"),ew=i("567754"),ek=i("884087"),eb=i("884082"),eP=i("606006"),eS=i("948375"),eL=i("132607"),eC=i("66627"),eI=i("850670"),ex={liveSearchPlayer:"k4NzjjCI",waterMark:"IssZB3da"},eR=i("134761");i("268917"),i("429532");var eT=i("732715");i("544943");function eN(){return Date.now()}class ej{config(e){window.collectEvent(`${this._name}.config`,e)}event(e,t){window.collectEvent(`${this._name}.${e}`,t)}init(e){window.collectEvent(`${this._name}.init`,e)}start(){window.collectEvent(`${this._name}.start`)}constructor(e){this._name=e}}let eD=1;class eF{get videoSize(){if(!this._player)return{width:0,height:0,play_width:0,play_height:0};let{clientWidth:e,clientHeight:t,videoWidth:i,videoHeight:r}=this._player;return{width:i,height:r,play_width:e,play_height:t}}initTea(e){let{TeaCtor:t=ej}=e,i=this._Tea=new t(`douyin-player-logger-${eD++}`),{user_unique_id:r,teaInitPre:l,user_id:a,device_id:n}=e;l&&l(i),i.init({app_id:7497}),i.start(),i.config({user_unique_id:r||a,device_id:n})}push(e){if(e.timestamp=eN(),(e=(0,l._)((0,r._)({},e,this.videoSize),{core_type:this._player.srcObject?"mediastream":"media"})).play_current_time=this._player.currentTime,e.cdn_play_url=this._player.src,!!e.cdn_play_url){{var t,i;e.live_stream_session_id=function(e,t){if("string"==typeof e)return new URLSearchParams(e.split("?")[1]).get(t)}(e.cdn_play_url,"_session_id"),e.random_session_id=+e.cdn_play_url.includes("rsi=0"),e.play_format="string"!=typeof(i=e.cdn_play_url)?"unknown":i.indexOf(".flv")>-1?"flv":i.indexOf(".m3u8")>-1?"m3u8":i.indexOf(".mp4")>-1?"mp4":i.indexOf(".sdp")>-1?"rtm":"unknown";let{url:r,protocol:l}=(null===(t=this._player.config)||void 0===t?void 0:t.baseConfig)||{};try{e.base_config=JSON.stringify({url:r,protocol:l})}catch(e){}}e.visible=document.visibilityState,e.muted=+this._player.muted,Object.assign(e,function(){let e={cpu_core_number:-1,memory_usage:-1,network_downlink:-1};try{var t;e.cpu_core_number=navigator.hardwareConcurrency||-1,e.memory_usage=navigator.deviceMemory||-1,e.network_downlink=null===(t=navigator.connection)||void 0===t?void 0:t.downlink,void 0==e.network_downlink&&(e.network_downlink=-1)}catch(e){}return e}(),this.commonParams),this.send(e)}}send(e){var t;if(null===(t=this.isDisableReport)||void 0===t?!void 0:!t.call(this,e.event_key,e))this.onReport&&this.onReport(e.event_key,e),this._Tea.event(e.event_key,e)}constructor(e,t){(0,eR._)(this,"commonParams",void 0),(0,eR._)(this,"_player",void 0),(0,eR._)(this,"onReport",void 0),(0,eR._)(this,"isDisableReport",void 0),(0,eR._)(this,"updateCommonParams",e=>{Object.assign(this.commonParams,e)}),this.initTea(e),this.commonParams=t,this.onReport=e.onReport,this.isDisableReport=e.isDisableReport,this._player=e.player}}let eO=e=>{let{TTCommon:t}=window;return t?(eO=e=>{if(!e)return 0;try{let{alg_type:i,sharp_level:r,scale_type:l,sr_enable:a,sr_local_error:n,proc_avg:s,render_from:o}=JSON.parse(t.executeWithElement(e,"getSrCurrentInfo",""))||{};return{is_super_resolution:3===a&&0===n||!n&&s>0?1:0,sr_alg_type:i,sr_sharp_level:r,sr_scale_type:l,sr_enable:a,sr_local_error:n,sr_render_from:o}}catch(e){return{}}})(e):(eO=()=>{},{})};class eV{init(){this.initLog(),this.initEvt()}initLog(){let e=function(e){let{player:t,project_key:i,user_id:l,device_id:a,user_unique_id:n,app_name:s,cdn_ip:o,aid:u,is_preview:d,codec_type:c,ext:_,product_line:h="live"}=e;return(0,r._)({project_key:i,product_line:h,live_sdk_version:"2",player_sdk_version:t.version,logger_version:"0.11.16",report_version:"5",user_id:l,device_id:a,uuid:n,app_name:s,cdn_ip:o,is_wasm:0,review_is_live:2,aid:u,live_id:`${u}-${l}-${Date.now()}`,is_preview:d?1:0,codec_type:c||"h264",ua:navigator.userAgent,href:window.location.href,fps:-1,logger_init_time:Date.now(),dpr:devicePixelRatio||1},_)}(this.options);this.log={start_play:{start_play_time:0,event_key:"start_play"},first_frame:{start:0,first_frame_view:0,event_key:"first_frame",first_sei_delay:0,ntp_sync:0,ntp_delta:0,ttfb:-1,ttdb:-1,ttfb_end:0},first_frame_failed:{code:void 0,msg:"",event_key:"first_frame_failed"},stall:{reason:0,stall_start:0,stall_end:0,ready_state:0,event_key:"stall"},play_stop:{code:0,stop_time:0,drop_percent:0,is_stream_received:0,stall_count:0,stall_time:0,retry_count:0,duration:0,stall_count_per_100sec:0,stall_time_per_100sec:0,event_key:"play_stop",dns_parse_time:-1,redirect:-1,ttfb:-1,buffered:[],is_firstframe_received:0,meta:null},playing:{index:0,stall_count:0,stall_time:0,play_time:1e4,retry_count:0,is_last:0,video_buffer_time:0,audio_buffer_time:0,speed_switch_count:0,speed_switch_info:"none",download_speed:0,decode_fps:0,render_fps:0,drop_count:0,drop_percent:0,sei_source:"",sei_delay:0,ntp_sync:0,ntp_delta:0,event_key:"playing",stop_time:0,duration:0,stall_count_per_100sec:0,stall_time_per_100sec:0,rtm_network:[]},play_error:{code:void 0,info:"",event_key:"play_error"},play_low_decode:{fps:-1,decode_fps:-1,bitrate:-1,url:-1,msg:"",event_key:"play_low_decode"},play_av_unsync:{aDts:-1,vDts:-1,frameLength:-1,currentTime:-1,duration:0,event_key:"play_av_unsync"},play_loadstream:{loadstream_url:"",event_key:"play_loadstream"},play_stream_loaded:{event_key:"play_stream_loaded"},play_metadata_loaded:{metadata_type:"",event_key:"play_metadata_loaded"},play_demux_error:{msg:"",event_key:"play_demux_error"},play_stream_discontinue:{type:"",dts:-1,event_key:"play_stream_discontinue"},pause:{event_key:"pause"},play_url_change:{event_key:"play_url_change"},play_result:{event_key:"play_result",result:0,threshold:this.options.playResultThreshold||25e3,is_threshold:0,start:0},play_ended:{event_key:"play_ended"},play_chase_frame:{event_key:"play_chase_frame"},play_audio_gap:{event_key:"play_audio_gap"},play_audio_overlap:{event_key:"play_audio_overlap"},degrade:{event_key:"degrade"},worker_message:{event_key:"worker_message"}},this.tea=new eF(this.options,e)}initEvt(){var e,t,i;let r=this._player;r&&(this._player.on(eT.le.SEI,this.handleSEIParsed),this._player.on(eT.le.FLVERROR,this.handleError),this._player.on(eT.le.TTFB,this.handleTTFB),this._player.on(eT.le.RESPONSEHEADERS,this.setCdnIp),this._player.on(eT.le.METADATA,this.handleMetaDataLoaded),this._player.on(eT.le.PROP_SPEED,this.handleSpeedUpdate),this._player.once(eT.le.KEYFRAME,this.handleKeyframe),this._player.on(eT.le.PROP_ENDEDSTATUS,this.handleEndStatus),this._player.on(eT.le.RTM_NETWORK,this.handleRTMNetwork),null===(e=this._player._core)||void 0===e||e.on("srstate_change",this.handleSRStateChange),null===(t=this._player._core)||void 0===t||t.on("workerinit",this.handleWorkerInit),null===(i=this._player._core)||void 0===i||i.on("unsync",this.handleAVUnsync),r.addEventListener("loadstart",this.reportStartPlay),r.addEventListener("loadeddata",this.reportFirstframe),r.addEventListener("canplay",this.handleCanplay),r.addEventListener("waiting",this.handleWaiting),r.addEventListener("playing",this.handleOncePlaying),r.addEventListener("playing",this.handlePlaying),r.addEventListener("timeupdate",this.handleTimeupdate),r.addEventListener("ended",this.handleEnd),r.addEventListener("pause",this.handlePause),r.addEventListener("error",this.handleError),r.addEventListener("degrade",this.handleDegrade),this.initWindowListener())}offEvt(){var e,t,i;let r=this._player;r&&(this._player.off(eT.le.SEI,this.handleSEIParsed),this._player.off(eT.le.FLVERROR,this.handleError),this._player.off(eT.le.TTFB,this.handleTTFB),this._player.off(eT.le.RESPONSEHEADERS,this.setCdnIp),this._player.off(eT.le.METADATA,this.handleMetaDataLoaded),this._player.off(eT.le.PROP_SPEED,this.handleSpeedUpdate),this._player.off(eT.le.KEYFRAME,this.handleKeyframe),this._player.off(eT.le.PROP_ENDEDSTATUS,this.handleEndStatus),this._player.off(eT.le.RTM_NETWORK,this.handleRTMNetwork),null===(e=this._player._core)||void 0===e||e.off("srstate_change",this.handleSRStateChange),null===(t=this._player._core)||void 0===t||t.off("workerinit",this.handleWorkerInit),null===(i=this._player._core)||void 0===i||i.off("unsync",this.handleAVUnsync),r.removeEventListener("loadstart",this.reportStartPlay),r.removeEventListener("loadeddata",this.reportFirstframe),r.removeEventListener("canplay",this.handleCanplay),r.removeEventListener("waiting",this.handleWaiting),r.removeEventListener("playing",this.handleOncePlaying),r.removeEventListener("playing",this.handlePlaying),r.removeEventListener("timeupdate",this.handleTimeupdate),r.removeEventListener("ended",this.handleEnd),r.removeEventListener("pause",this.handlePause),r.removeEventListener("error",this.handleError),r.removeEventListener("degrade",this.handleDegrade),this.removeWindowListener())}initWindowListener(){window.addEventListener("beforeunload",this.destroyFunc)}removeWindowListener(){window.removeEventListener("beforeunload",this.destroyFunc)}stallEnd(){let e=eN();if(this.inWaitingStart){let t=e-this.inWaitingStart;t>200&&(this.log.play_stop.stall_count++,this.log.play_stop.stall_time+=t,this.log.playing.stall_time+=e-Math.max(this.inWaitingStart,this.log.playing.timestamp),this.log.stall.stall_end=e,this.log.playing.stall_count++,this.tea.push(this.log.stall))}this.inWaitingStart=0}reportPause(){this.log.pause.timestamp=eN(),this.tea.push(this.log.pause)}handleUserLeave(){if(!this.destroyed&&!!this.started)this.updatePlayStopParams(),this.reportPlayStop(),this.clearPlayingInterval()}reportPlayStop(){this.tea.push(this.log.play_stop)}updatePlayStopParams(){let e=eN(),t=e-this.log.start_play.start_play_time,{play_stop:i}=this.log;if(this.inWaitingStart&&e-this.inWaitingStart>200&&(i.stall_time+=e-this.inWaitingStart),this.inWaitingStart=0,Object.assign(i,{stall_time_per_100sec:i.stall_time/t*100,stall_count_per_100sec:1e3*i.stall_count/t*100}),0===this.log.play_stop.stall_count_per_100sec&&(this.log.play_stop.stall_time_per_100sec=0),!(this.log.play_stop.stall_time_per_100sec>100)&&!(this.log.play_stop.stall_time_per_100sec<0))this.log.playing.index?(Object.assign(this.log.playing,{is_last:1}),this.reportPlaying(!1)):(this.log.play_stop.error_code=this.log.play_error.code,this.log.play_stop.error_info=this.log.play_error.msg),Object.assign(i,{duration:t/1e3,play_time:t})}reportPlaying(e){this.log.playing.index++;let t=this.log.playing.timestamp,i=0,a=eN();this.inWaitingStart&&this.inWaitingStart<a&&(i=Math.min(this.log.playing.play_time,a-Math.max(this.inWaitingStart,t))),this.getPlayerQuality(),this.getPlayerBuffer(),this.updateSpeedAndFPS();let n=a-t;n<0&&(n=1e4),i>200&&(this.log.playing.stall_time+=i,this.log.playing.stall_count++),Object.assign(this.log.playing,{duration:e?0:n/1e3,stall_time_per_100sec:e?0:this.log.playing.stall_time/n*100,stall_count_per_100sec:e?0:1e3*this.log.playing.stall_count/n*100,first_frame_view:this.log.first_frame.first_frame_view}),this.log.playing.video_render_stall_time_per_100sec=this.log.playing.stall_time_per_100sec,this.log.playing.video_render_stall_count_per_100sec=this.log.playing.stall_count_per_100sec,this.log.playing.timestamp=a,this.tea.push(Object.assign((0,l._)((0,r._)({},eO(this._player._video)),{time_hour:new Date(a).getHours()}),this.log.playing)),this.log.playing.stall_time=0,this.log.playing.stall_count=0,this.log.playing.rtm_network=[]}setPlayResultTimer(){this.clearPlayResultTimer(),this.log.play_result.start=eN(),this.playResultTimer=setTimeout(()=>{if(!(this.log.play_result.timestamp>=this.log.play_result.start))this.log.play_result.elapsed=eN()-this.log.play_result.start,this.log.play_result.is_shorter=+(this.log.play_result.elapsed<this.log.play_result.threshold),!this.log.play_result.is_shorter&&(this.log.play_result.is_threshold=1,this.tea.push(this.log.play_result))},this.log.play_result.threshold)}clearPlayResultTimer(){clearTimeout(this.playResultTimer)}clearPlayingInterval(){clearInterval(this.intervalId)}getPlayerBuffer(){let e=this._player,t=e.buffered;if(t){let i=Math.max(0,t.length-1);try{let r=(t.end(i)-e.currentTime)*1e3;return this.log.playing.audio_buffer_time=this.log.playing.video_buffer_time=r,r}catch(e){}}return 0}getBuffered(){let e=[];try{for(let t=0;t<this._player.buffered.length;t++)e.push([this._player.buffered.start(t),this._player.buffered.end(t)])}catch(e){}return e}getPlayerQuality(){let e=this._player;try{let t=e.getVideoPlaybackQuality();this.log.playing.drop_count=t.droppedVideoFrames-this.tempDroppedFrameCount,this.log.playing.drop_percent=this.log.playing.drop_count/(t.totalVideoFrames-this.tempTotalFrameCount),this.log.play_stop.drop_percent=t.droppedVideoFrames/t.totalVideoFrames,this.tempDroppedFrameCount=t.droppedVideoFrames,this.tempTotalFrameCount=t.totalVideoFrames,this.log.stall.drop_count=this.log.playing.drop_count,this.log.stall.drop_percent=this.log.playing.drop_percent}catch(e){}}updateSpeedAndFPS(){if(this.speedInfo){let{totalByteSize:e,recentSpeed:t,renderFrames:i}=this.speedInfo,r=eN(),l=r-this.playingSpeedInfoCache.timestamp;if(this.playingSpeedInfoCache.timestamp){if(e>=this.playingSpeedInfoCache.totalByteSize){let i=e-this.playingSpeedInfoCache.totalByteSize;this.log.playing.downloaded_size=i,this.log.playing.download_speed=8*i/l,this.log.playing.current_speed=t/8e3}else this.log.playing.downloaded_size=e,this.log.playing.download_speed=t/1e3,this.log.playing.current_speed=t/8e3;this.log.playing.render_fps=(i-this.playingSpeedInfoCache.renderFrames)/l*1e3}else this.log.playing.downloaded_size=e,this.log.playing.current_speed=t/8e3;this.playingSpeedInfoCache={totalByteSize:e,renderFrames:i,timestamp:r}}}constructor(e){var t,i=this;(0,eR._)(this,"options",void 0),(0,eR._)(this,"_player",void 0),(0,eR._)(this,"log",{}),(0,eR._)(this,"tea",void 0),(0,eR._)(this,"inWaitingStart",0),(0,eR._)(this,"tempDroppedFrameCount",0),(0,eR._)(this,"tempTotalFrameCount",0),(0,eR._)(this,"started",!1),(0,eR._)(this,"firstFrameViewed",!1),(0,eR._)(this,"destroyed",!1),(0,eR._)(this,"speedInfo",void 0),(0,eR._)(this,"playingSpeedInfoCache",{renderFrames:0,totalByteSize:0,timestamp:0}),(0,eR._)(this,"playResultTimer",void 0),(0,eR._)(this,"intervalId",void 0),(0,eR._)(this,"reportUrlChange",e=>{this.tea.push(Object.assign(this.log.play_url_change,{url:e}))}),(0,eR._)(this,"updateExt",e=>{var t;null===(t=this.tea)||void 0===t||t.updateCommonParams(e)}),(0,eR._)(this,"reportStartPlay",()=>{this.log.start_play.start_play_time=eN(),!this.started&&this.tea.push(this.log.start_play),this.started=!0,this.setPlayResultTimer()}),(0,eR._)(this,"handleTTFB",e=>{let{responseUrl:t,url:i,elapsed:r}=e;this.log.first_frame.ttfb=r||-1,this.log.first_frame.is_redirect=+(t!==i)}),(0,eR._)(this,"setCdnIp",e=>{var t;let{headers:i}=e;i&&(null===(t=this.tea)||void 0===t||t.updateCommonParams({cdn_ip:i["x-server-ip"]||i["X-Server-Ip"]||i["X-SERVER-IP"]}))}),(0,eR._)(this,"handleMetaDataLoaded",e=>{let{trackType:t,codec:i}=e;this.log.play_metadata_loaded.meta=e,this.log.play_metadata_loaded.codec=i,this.log.play_metadata_loaded.mediaType=t,"video"===t&&this.tea.updateCommonParams({codec_type:i}),this.tea.push(this.log.play_metadata_loaded)}),(0,eR._)(this,"handleSpeedUpdate",e=>{if(this.speedInfo=e,this.speedInfo){let{recentSpeed:e,renderFrames:t}=this.speedInfo;this.log.stall.current_speed=e/8e3,this.log.stall.render_fps=t}}),(0,eR._)(this,"handleKeyframe",e=>{this.log.play_stop.is_firstframe_received=1,this.log.play_stop.firstframe_pts=e.pts}),(0,eR._)(this,"handleEndStatus",()=>{this.stallEnd()}),(0,eR._)(this,"handleRTMNetwork",e=>{this.log.playing.rtm_network.push(e)}),(0,eR._)(this,"handleSRStateChange",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.running?i.log.playing.is_super_resolution=1:(i.log.playing.is_super_resolution=0,i.log.playing.sr_code=e.code,i.log.playing.sr_message=e.message)}),(0,eR._)(this,"handleWorkerInit",e=>{let{costtime:t,workerReadyTime:i,workerinitStartTime:a}=e.detail||e,n=i>this.log.start_play.start_play_time?i-a:0;this.log.play_stop.worker_init_cost=this.log.first_frame.worker_init_cost=n,this.tea.push((0,l._)((0,r._)({},this.log.worker_message),{cost_time:t,worker_init_cost:n}))}),(0,eR._)(this,"handleAVUnsync",e=>{let{currentTime:t,gap:i}=e.detail||e;this.tea.push((0,l._)((0,r._)({},this.log.play_av_unsync),{currentTime:t,duration:i}))}),(0,eR._)(this,"handleWaiting",()=>{!this.inWaitingStart&&this.firstFrameViewed&&(this.inWaitingStart=this.log.stall.stall_start=eN(),this.log.stall.play_current_time=this._player.currentTime,this.log.stall.buffered=this.getBuffered(),this.log.stall.start_diff=this.inWaitingStart-this.log.first_frame.timestamp,this.log.stall.audio_buffer_time=this.getPlayerBuffer())}),(0,eR._)(this,"handleCanplay",()=>{this.stallEnd(),this.reportFirstframe()}),(0,eR._)(this,"handleOncePlaying",()=>{if(this._player.removeEventListener("playing",this.handleOncePlaying),this._player.paused){this.handlePause();return}this.playingSpeedInfoCache={totalByteSize:0,renderFrames:0,timestamp:0},this.reportPlaying(!0),this.clearPlayingInterval();this.intervalId=setInterval(()=>{(100>Math.abs(eN()-this.log.playing.timestamp-1e4)||eN()-this.log.playing.timestamp>=1e4)&&(this._player?this._player.paused?this.handlePause():this.reportPlaying(!1):this.destroyFunc())},1e3)}),(0,eR._)(this,"handlePlaying",()=>{this.stallEnd()}),(0,eR._)(this,"handleTimeupdate",()=>{this.stallEnd()}),(0,eR._)(this,"handleSEIParsed",e=>{if(100===e.code){let t;let{log:{playing:i,first_frame:r,play_result:l}}=this;try{t=new TextDecoder("utf-8").decode(e.content)}catch(i){t=function(e){var t,i,r,l,a;for(t="",r=e.length,i=0;i<r;)switch((l=e[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(l);break;case 12:case 13:t+=String.fromCharCode((31&l)<<6|63&(a=e[i++]));break;case 14:a=e[i++],t+=String.fromCharCode((15&l)<<12|(63&a)<<6|(63&e[i++])<<0)}return t}(e.content)}t=t.slice(t.indexOf("{"),t.lastIndexOf("}")+1);try{let e=JSON.parse(t),a=e.ts||e.heart_beat&&e.heart_beat.ts;if(Object.assign(r,e.loudness),Object.assign(l,e.loudness),!a){i.sei_string=t;return}i.sei_delay=eN()-a,r.first_sei_delay=i.sei_delay,i.sei_source=e.source,i.ntp_sync=0,r.ntp_sync=0}catch(e){i.sei_string=t}i.sei_delay?i.sei_string=void 0:i.sei_string=t}}),(0,eR._)(this,"handlePause",()=>{this.stallEnd(),this.clearPlayingInterval(),this.reportPlaying(!1),this._player.addEventListener("playing",this.handleOncePlaying),this.reportPause()}),(0,eR._)(this,"handleEnd",()=>{this.stallEnd(),this.clearPlayingInterval(),this.log.playing.is_last=1,this.reportPlaying(!1),this.tea.push(this.log.play_stop)}),(0,eR._)(this,"handleError",e=>{e=e.detail||e;let t=this._player.error||{};Object.assign(this.log.play_error,{code:e.httpCode||e.code||t.code,info:e.message||t.message}),this.tea.push(this.log.play_error),!this.destroyed&&(!this.firstFrameViewed&&(Object.assign(this.log.first_frame_failed,{code:this.log.play_error.code,msg:e.message||t.message}),void 0!==this.log.first_frame_failed.timestamp&&(this.log.first_frame_failed.timestamp=eN()),this.tea.push(this.log.first_frame_failed),!this.log.play_result.is_threshold&&(this.clearPlayResultTimer(),this.log.play_result.reason=e.message||t.message,this.log.play_result.code=this.log.play_error.code,this.tea.push(this.log.play_result))),this.handleUserLeave())}),(0,eR._)(this,"handleDegrade",e=>{Object.assign(this.log.degrade,{message:e.message}),this.tea.push(this.log.degrade)}),(0,eR._)(this,"reportFirstframe",()=>{if(this.firstFrameViewed)return;this.firstFrameViewed=!0;let e=eN();Object.assign(this.log.first_frame,{first_frame_view:e-this.log.start_play.start_play_time,buffered:this.getPlayerBuffer()}),this.tea.push(this.log.first_frame),this.clearPlayResultTimer(),this.log.play_result.result=1,this.tea.push(this.log.play_result),this.log.play_stop.is_stream_received=1}),(0,eR._)(this,"destroyFunc",()=>{!this.destroyed&&(this.handleUserLeave(),this.destroyed=!0,this.offEvt(),this.clearPlayingInterval(),this.clearPlayResultTimer())}),this.options=(t=e,(0,r._)({onReport:()=>{}},t)),this._player=this.options.player,this.init()}}class eM{bindUrlChange(){this.player.on("urlchange",this.restart)}offUrlChange(){this.player.off("urlchange",this.restart)}updateExt(e){this.options.ext=(0,r._)({},this.options.ext,e),this.logger.updateExt(e)}destroy(){this.logger.destroyFunc(),this.offUrlChange()}constructor(e){(0,eR._)(this,"player",void 0),(0,eR._)(this,"options",void 0),(0,eR._)(this,"logger",void 0),(0,eR._)(this,"restart",e=>{let{url:t}=e;this.logger.reportUrlChange(t),this.destroy(),this.logger=new eV(this.options),this.bindUrlChange(),this.logger.reportStartPlay()}),this.options=e,this.logger=new eV(e),this.player=this.options.player,this.bindUrlChange(),this.logger.reportStartPlay()}}var eA=i("291051"),eU=i.n(eA),eW=i("814903"),eB=i("246050"),eZ=i("852477"),e$=i("174430"),ez=i("910374");let eG=e=>{let{logOptions:t,secretKey:i,isPaidLive:a,bitrate:n,baseConfig:s}=e,{keepalivetime:o=0}=(0,eB.D)(s.url),u=9999;return i&&a&&0!==Number(o)&&(u=Number(o)-Math.floor(Date.now()/1e3)),(0,d.useMemo)(()=>{var e,s,o,d,c,_;let{device_id:h,user_id:p,ext:v={}}=null!=t?t:{};return(0,l._)((0,r._)({},t),{aid:eW.xo.aid,project_key:eW.xo.project_key,app_name:eW.xo.app_name,user_unique_id:h,device_id:h,user_id:p,ext:(0,r._)({isSupportedH265:(0,e$.iz)()?1:0,isSupportedH266:(0,e$.ue)()?1:0,isSupportedAvx2:(0,e$.ws)()?1:0,arch:null!==(o=null===(s=window)||void 0===s?void 0:null===(e=s.TTE_ENV)||void 0===e?void 0:e.arch)&&void 0!==o?o:"",scm_version:null!==(d=window.version)&&void 0!==d?d:"unknown",tce_cluster:null!==(c=window.tce_cluster)&&void 0!==c?c:"unknown",mediaType:"video",aes_flv_stream:i&&a?1:0,aes_flv_keepAliveTime:i&&a?u:0,abvids:null!==(_=ei.Le.getConfig(ei.gI.AbtestVids))&&void 0!==_?_:"",bitrate:n},v),onReport:eZ.X,isDisableReport:ez.vw})},[])},eH=e=>{let{onEnd:t,onError:i,onPlay:r,onPause:l,onLoadStart:a,onLoadedData:n,onPlayerCreated:s}=e,o=(0,eS.Z)(t),u=(0,eS.Z)(i),d=(0,eS.Z)(r),c=(0,eS.Z)(l),_=(0,eS.Z)(a),h=(0,eS.Z)(n);return(0,eS.Z)(e=>{e.on("ended",o),e.on("error",u),e.on("loadeddata",h),e.on("loadstart",_),e.on("play",d),e.on("pause",c),null==s||s(e)})};function eq(e){return e.toString().padStart(2,"0")}i("927234"),i("882732");let eY=()=>{let e=new Date;return`${Math.random().toString().slice(-3)}-${e.getFullYear()}${eq(e.getMonth()+1)}${eq(e.getDate())}${eq(e.getHours())}${eq(e.getMinutes())}${eq(e.getSeconds())}${e.getMilliseconds()}${Math.random().toString().slice(-7)}${Math.random().toString(16).toUpperCase().slice(-10)}`},eK=(e,t)=>{if(!e)return e;try{let i=new URL(e);return i.searchParams.set("_session_id",function(e){let t=e||eY();return`${t}.${Date.now()}.${Math.random().toString().slice(-5)}`}(t)),i.searchParams.set("rsi",t?"1":"0"),i.searchParams.set("abr_pts","-800"),i.href}catch(t){return e}};var eJ=i("550387");let eX=(0,d.forwardRef)((e,t)=>{let{children:i,baseConfig:n,pluginsConfig:s,className:o,sessionId:u,disableLogger:c}=e,{onLoadStart:h,onEnd:p,onPause:v,onError:g}=(0,eJ.V)(),f=eH((0,l._)((0,r._)({},e),{onLoadStart:()=>{var t;h(),null===(t=e.onLoadStart)||void 0===t||t.call(e)},onEnd:()=>{var t;p(),null===(t=e.onEnd)||void 0===t||t.call(e)},onError:()=>{var t;g(),null===(t=e.onError)||void 0===t||t.call(e)},onPause:()=>{var t;v(),null===(t=e.onPause)||void 0===t||t.call(e)}})),m=(0,d.useMemo)(()=>({plugins:[eI.Gz,eI.l1,eI.Zh],pluginsConfig:eU()({play:{position:_.PZ.CONTROL_LEFT},controls:{autoHide:!0},loading:{text:!1}},s)}),[]),y=eG(e),E=(0,d.useMemo)(()=>(0,l._)((0,r._)({},n),{worker:{recylable:!1},preProcessUrl:e=>eK(e=n.preProcessUrl?n.preProcessUrl(e):e,u)}),[n]);return(0,a.jsxs)(_.v7,{ref:t,className:o,baseConfig:E,preset:m,logOptions:y,Logger:eM,onPlayerCreated:f,children:[(0,a.jsx)(eI.ig,{}),(0,a.jsx)(ez.aR,{disableLogger:c}),i]})}),eQ=e=>{let{playerRef:t}=(0,d.useContext)(_.ET),i=(0,d.useRef)(!0);return(0,d.useEffect)(()=>{let e=t.current,r=()=>{X.emit(X.EVENT.videoPlay)},l=()=>{var t,r;null!==(r=(t=window).__INVISIBLE_QUERY__)&&void 0!==r||(t.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1,(0,F.MR)(),X.emit(X.EVENT.videoPlayPrevent),i.current&&setTimeout(()=>{e.muted=!0,e.play(),i.current=!1},10)};return t.current.on("autoplay_was_prevented",l),t.current.on("autoplay_started",r),()=>{var e,i;null===(e=t.current)||void 0===e||e.off("autoplay_was_prevented",l),null===(i=t.current)||void 0===i||i.off("autoplay_started",r)}},[]),null},e0=()=>{let{playerRef:e}=(0,d.useContext)(_.ET);return(0,d.useEffect)(()=>{let t=X.listen(X.EVENT.livePause,()=>{var t;null===(t=e.current)||void 0===t||t.pause()});return()=>{t()}},[]),null},e1=V.G,e3=()=>{let{playerRef:e}=(0,d.useContext)(_.ET);return(0,d.useEffect)(()=>{e.current.muted=(0,I.rC)();let t=(0,b.B)(e.current);return e.current.on("volumechange",t),()=>{var i;null===(i=e.current)||void 0===i||i.off("volumechange",t)}},[]),null},e2=e=>{let{playerRef:t}=(0,d.useContext)(_.ET);return(0,a.jsx)(E.QS,(0,l._)((0,r._)({},e),{player:null==t?void 0:t.current}))},e6=e=>{let{playerRef:t}=(0,d.useContext)(_.ET);return(0,a.jsx)(w.lW,(0,l._)((0,r._)({},e),{player:t.current}))},e8=e=>{let{ext:t}=e,{loggerRef:i}=(0,d.useContext)(_.ET);return(0,d.useEffect)(()=>{i.current&&t&&i.current.updateExt(t)},[i.current,t]),null};var e7=i("403678");let e5=e=>{let{playerRef:t}=(0,d.useContext)(_.ET);return(0,a.jsx)(em,(0,l._)((0,r._)({},e),{player:t.current}))};var e4=i("875222"),e9=i("553376"),te={ENDED:0,0:"ENDED",ERROR:1,1:"ERROR",LIVING:2,2:"LIVING"},tt=i("916462"),ti=i.n(tt),tr=i("726900");let tl=(e,t)=>{let{ref:i,playerTeaEvtSubmit:a}=t,{gameName:n}=e,s=(0,d.useMemo)(()=>{var t,i,a,s;let{logParams:o={}}=e;return(0,l._)((0,r._)({},o),{enter_method:o.enter_method||"web_card",enter_from_merge:o.enter_from_merge,game_name:n,search_params:JSON.stringify(o.search_params),search_tab:`aweme_${null===(t=o.search_params)||void 0===t?void 0:t.search_type}`,previous_page:"",live_type:"game",function_type:"",seat_fit_status:"off",request_id:o.request_id,column_type:(null===(i=o.search_params)||void 0===i?void 0:i.colum_type)||"single",search_id:null===(a=o.search_params)||void 0===a?void 0:a.search_id,search_result_id:null===(s=o.search_params)||void 0===s?void 0:s.search_result_id})},[e.logParams,n]),o=(0,eS.Z)(t=>{var l,n,o,u;(0,F.bi)((0,r._)({anchor_id:e.anchorId,room_id:e.roomId,video_id:e.roomId,is_aweme_tied:null===(l=e.logParams)||void 0===l?void 0:l.is_aweme_tied},(0,F.Ne)(e.program),s)),null===(n=i.current.player)||void 0===n||n.pause(),null===(o=e.onEnterDetail)||void 0===o||o.call(e),null==t||null===(u=t.callback)||void 0===u||u.call(t),null==a||a(2)});return{enterLogParams:s,onEnterRoom:o}},ta=(e,t)=>{let{ecomData:i,roomCart:a,logParams:n}=e,{roomUrl:s,onEnterRoom:o,enterLogParams:u}=t,c=(0,d.useMemo)(()=>{var e,t;return 1===Number(null!==(t=null==i?void 0:null===(e=i.room_cart_v2)||void 0===e?void 0:e.show_cart)&&void 0!==t?t:null==a?void 0:a.show_cart)},[i,a]),{onCartClick:_,onPromotionPopClick:h,onShopLoginSuccess:p}=(0,en.L)({onEnterRoom:o,propsOnLoginSuccess:e.onLoginSuccess,href:s,enterLogParams:(0,l._)((0,r._)({},u),{enter_method:(null==n?void 0:n.shop_car_method)?null==n?void 0:n.shop_car_method:"web_live_card_popup_card"})}),v=(0,d.useMemo)(()=>c?{EVENT_ORIGIN_FEATURE:"TEMAI",_param_live_platform:"live"}:{},[c]);return{isShowCart:c,onCartClick:_,onPromotionPopClick:h,onShopLoginSuccess:p,shopParams:v}},tn=(e,t)=>{var i;let{roomId:r,anchorId:l,program:a,isActive:n,isModal:s}=e,{isPaidLive:o,isFollow:u,enterLogParams:c,shopParams:_,liveStatus:h,ref:p}=t,[v,g]=(0,d.useState)(!1),[f,m]=(0,d.useState)(!n);(0,d.useEffect)(()=>{m(!n),ei.Le.setConfig(ei.gI.HasLiveContent,n)},[n]);let y=(0,d.useRef)(Date.now()),E=(0,d.useRef)(1),{liveDuration:w}=eg({roomId:r,anchorId:l,hasPlay:v,program:a,enterLogParams:c,shopParams:_,nowTime:y,isActive:n,isPause:f,isVisibleRef:E,isPaidLive:o,isFollow:u,isModal:s}),k=(0,eS.Z)(()=>{E.current="hidden"===document.visibilityState?0:1,h===te.LIVING&&!f&&w("visibilitychange")});(0,d.useEffect)(()=>(document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k)}),[]),(0,d.useEffect)(()=>{n&&f&&v&&w("pause"),n&&!f&&(y.current=Date.now())},[n,f,v]);let b=(0,eS.Z)(()=>{m(!1),n&&h===te.LIVING&&!v&&w("success"),g(!0)}),P=(0,eS.Z)(()=>{var t;null===(t=e.onDestroy)||void 0===t||t.call(e),!f&&h===te.LIVING&&w("play_destroy"),g(!1)});(0,d.useEffect)(()=>{var e;if(!(null===(e=p.current)||void 0===e?void 0:e.player))return;let{player:t}=p.current;t.on("play",b),t.on("pause",()=>{m(!0)}),t.once("destroy",P)},[null===(i=p.current)||void 0===i?void 0:i.player])},ts=e=>{let[t,i]=(0,d.useState)(!1),[r,l]=(0,d.useState)({});(0,d.useEffect)(()=>{(0,Y.ZP)({service_name:"webcast.douyin.live_pc",key:"entrance"}).then(e=>{i(!0),"object"==typeof e&&l(e)},()=>{i(!0)})},[]);let{webRid:a,detailUrl:n,cameraId:s}=e;return{remoteURLResolved:t,roomUrl:(0,d.useMemo)(()=>{var e,t;if((null===(t=r[a])||void 0===t?void 0:null===(e=t.scopes)||void 0===e?void 0:e.indexOf("FEED"))>-1&&r[a].url)return r[a].url;if(n)return n;let i={};return"string"==typeof s&&"0"!==s&&(i.camera_id=s),(0,j.h)(a,i)},[a,n,s,r])}},to=e=>{let{roomId:t,isActive:i}=e,{setMessageInstance:r,destroy:l,messageInstance:a}=(0,eu.f)(ti());return(0,d.useEffect)(()=>(r(new es.v0C),()=>{l&&l()}),[]),(0,ed.q)({message:a}),(0,d.useEffect)(()=>{if(!!i&&!!a)try{return a.setImRequestPath("/webcast/im/fetch/preview/"),a.start(t),()=>{var e;return null==a?void 0:null===(e=a.destroy)||void 0===e?void 0:e.call(a)}}catch(e){}},[t,i]),{messageInstance:a}},tu=(e,t)=>{let{ref:i}=t,{anchorId:r,sceneId:l,needAutoCheckRoomStatus:a}=e,[n,s]=(0,d.useState)(te.LIVING),{pollingFrequency:o}=(0,tr.K)(!0),c=(0,d.useMemo)(()=>(null==o?void 0:o["webcast/distribution/check_user_live_status"])||6e4,[o]),_=(0,eS.Z)(()=>(0,D.Y)(r,l).then(e=>{let{status_code:t,data:r=[]}=e.data;if(0===t){var l,a;if(r.some(e=>{let t=u()(e,"user_live",[])[0];return 1===u()(t,"live_status")}))return s(te.LIVING),te.LIVING;return null===(a=i.current)||void 0===a||null===(l=a.player)||void 0===l||l.pause(),s(te.ENDED),te.ENDED}return s(te.ERROR),te.ERROR}));return(0,d.useEffect)(()=>{if(a&&n===te.LIVING){let e=setInterval(_,c);return()=>clearInterval(e)}},[a,n,c]),{liveStatus:n,setLiveStatus:s,checkRoomStatus:_}};var td=i("234062");let tc=(0,c.ZP)(()=>Promise.all([i.e("3556"),i.e("21083"),i.e("5072")]).then(i.bind(i,896280)),{ssr:!1}),t_={play:{dbClick:!0}},th=e=>{var t,i,n,o,c,_,h,p,v,g,f,m,y,E;let{flvSrc:w,anchorId:k,webRid:b,liveRoomMode:P,roomId:S,logParams:L,className:C,program:N,children:j,onError:D,authorInfo:O,abTestData:V,isActive:M,userCount:A,enableLiveInfo:U,title:W,showTitle:B,appointment:z,userInfo:G,paidLiveData:q={},assistLabel:Y,dynamicLabel:ei,isShow:el,onPlay:ea,onPause:en,sessionId:es,__rawdata:eu,linkerMap:ed={}}=e,ec=(0,d.useRef)({}),{syncVolume:e_}=(0,eo.j)(),{liveStatus:eh,setLiveStatus:ep,checkRoomStatus:ev}=tu(e,{ref:ec}),eg=u()(G,"isLogin",!1),[ef,em]=(0,d.useState)(U),ey=(0,J.F)(null==O?void 0:O.followStatus)?1:0,{isVip:ew,isVipLive:ek}=(0,eb.Rk)(q,V),{remoteURLResolved:eP,roomUrl:eR}=ts(e),[eT,eN]=(0,d.useState)({}),[ej,eD]=(0,d.useState)(!1),[eF,eO]=(0,d.useState)(!1),{februaryOptimize:eV}=d.useMemo(()=>({februaryOptimize:(null==V?void 0:V.liveFebruaryOptimize)===eL.LiveFebruaryOptimize.On}),[V]),eM=(0,d.useMemo)(()=>{if(!(0,et.DT)())return!0;let e=(0,et.FJ)().awemePcClient||"0.0.0";return(0,eC.y)(e,">=","4.7.0")},[]),eA=null==eu?void 0:null===(i=eu.others)||void 0===i?void 0:null===(t=i.web_data)||void 0===t?void 0:t.additional_stream_url,{playerUrl:eU,resetH265ErrorNum:eW}=(0,e4.Z)({abtestData:V,tab:eM?"search":"",url:w,data:eA}),eB=d.useRef(!1),eZ=(0,eS.Z)(e=>{ev().then(t=>{if(t!==te.ENDED){var i,r,l;(0,Q.T)(e),null===(l=ec.current)||void 0===l||null===(r=l.logger)||void 0===r||null===(i=r.updateExt)||void 0===i||i.call(r,{h265_degrade:1}),null==D||D()}})}),e$=(0,eS.Z)(()=>{ev().then(e=>{var t;if(!!(null===(t=ec.current)||void 0===t?void 0:t.player))e===te.LIVING&&ec.current.player.refresh()})}),ez=K.ku.BAN,{playerTeaEvtSubmit:eG}=(0,td.Z)({from:"searchPlayer",player:null===(n=ec.current)||void 0===n?void 0:n.player,isRoomEnd:eh===te.ENDED,eventParams:eT,isH265:!1,isActive:M}),{enterLogParams:eH,onEnterRoom:eq}=tl(e,{ref:ec,playerTeaEvtSubmit:eG}),{isShowCart:eY,onCartClick:eJ,onPromotionPopClick:tt,onShopLoginSuccess:ti,shopParams:tr}=ta(e,{enterLogParams:eH,onEnterRoom:eq,roomUrl:eR});tn(e,{isPaidLive:!1,isFollow:ey,enterLogParams:eH,shopParams:tr,liveStatus:eh,ref:ec});let{playerWaterMark:th,volumeWaterMark:tp}=(0,e9.Z)({user_id:(null==G?void 0:null===(o=G.info)||void 0===o?void 0:o.userId)||(0,er.sq)(),player:null===(c=ec.current)||void 0===c?void 0:c.player,isLiveWaterMark:(null==V?void 0:null===(_=V.liveWaterMark)||void 0===_?void 0:_.searchPreview)===1&&0===Object.keys(null!=ed?ed:{}).length,isSmallWindow:!1,isPlayerSucc:eF,liveUserWaterMarkEvent:F.xw,logParams:(0,l._)((0,r._)({},eH),{anchor_id:k,room_id:S,video_id:S})});(0,d.useEffect)(()=>{eN(eH)},[eH]);let tv=(0,d.useMemo)(()=>(0,r._)({autoplay:!0,volume:(0,I.T1)()},tp?{volumeWaterMark:tp}:{}),[tp]),tg=(0,d.useRef)(),tf=(0,d.useRef)();if(!M&&!tf.current&&(tf.current={},fetch(eK(eU,es),{method:"HEAD"}).then(e=>{e.ok&&(tf.current.url=e.url)})),M&&!tg.current){let e=new AbortController,t=setTimeout(()=>{e.abort()},3e3);tg.current={fetch:fetch((null===(y=tf.current)||void 0===y?void 0:y.url)||eK(eU,es),{signal:e.signal}),abortController:e,abortTimer:t}}let tm=(0,eS.Z)(e=>{let t=!1;e.on("destroy",()=>{t=!0,tg.current.abortController.abort(),tg.current=null}),tg.current.fetch.then(i=>{var r;if(!t)clearTimeout(null===(r=tg.current)||void 0===r?void 0:r.abortTimer),i.ok?e.playStream(i.body,eK(eU,es)):e.src=eK(eU,es),e.play()},()=>{e.src=eK(eU,es),e.play()})}),ty=(0,d.useMemo)(()=>{let e=null==V?void 0:V.previewLabel;return null!=e&&e!==eL.PreviewLabel.Default},[V]),tE=(0,d.useMemo)(()=>({ignoreEmptyUrlUpload:eh===te.ENDED||void 0===eh?1:0,isNewAce:!0,roomMode:P,roomId:S,webRid:b,enter_from_merge:null==L?void 0:L.enter_from_merge,enter_method:"web_live_cell",is_preview:0,act_code:null==L?void 0:L.act_code}),[eh,P,S,b,null==L?void 0:L.enter_from_merge,null==L?void 0:L.act_code]);(0,d.useEffect)(()=>{!M&&eB.current&&(eG(1),eB.current=!1)},[M]),(0,d.useEffect)(()=>{var e;if(!!el)(0,F.JW)((0,l._)((0,r._)({anchor_id:k,room_id:S,is_paidlive:Number(!1),is_aweme_tied:null==L?void 0:L.is_aweme_tied,search_type:(null==L?void 0:null===(e=L.search_params)||void 0===e?void 0:e.search_type)||"",follow_status:ey,if_live_close:eh===te.ENDED?1:0},(0,F.Ne)(N),eH,tr),{is_viplive:ek?1:0}))},[el,S]),(0,d.useEffect)(()=>{var e;let t=null===(e=ec.current)||void 0===e?void 0:e.player;t&&(null==t||t.on("flverror",eZ))},[ec.current]);let{isElectron:tw,isMac:tk}=(0,d.useMemo)(()=>({isElectron:(0,et.DT)(),isMac:"Mac"===(0,ee.fV)().os}),[]),tb=(0,d.useCallback)(()=>{ep(te.LIVING)},[]),tP=(0,eS.Z)(()=>{X.emit(X.EVENT.searchMusicPause),null==ea||ea(),null==eW||eW(),window.__LIVE_PLAYER__=ec.current,!eB.current&&(eB.current=!0)}),tS=(0,eS.Z)(()=>{X.emit(X.EVENT.searchVideoLoadStart,{playerType:"live"})}),tL=(0,eS.Z)(()=>{eO(!0),X.emit(X.EVENT.searchVideoLoaded,{playerType:"live"}),X.emit(X.EVENT.searchPageHydrate)}),{messageInstance:tC}=to(e);if(!M)return(0,a.jsxs)("div",{className:s()(Z.player,C),style:e.style,children:[(0,a.jsx)("img",{src:e.cover,className:Z.poster}),(0,a.jsx)($.j,{count:A,program:N,title:W,showTitle:B,appointment:z,className:Z.userCount,paidLiveData:q,isLogin:eg,viewType:ez,webEnterBenefitPointData:null==eu?void 0:null===(E=eu.others)||void 0===E?void 0:E.web_enter_benefit_point_data,showRedPack:!0})]});if(eh===te.ENDED)return(0,a.jsx)(e2,{cover:e.cover,className:e.endCoverClassName});let tI=(0,a.jsx)(e1,{target:"_blank",href:`${eR}&from_search=true`,onClick:eq,passParams:eH,className:Z.linkArea,children:(0,a.jsx)("div",{style:{width:"100%",height:"100%"},onMouseEnter:()=>eD(!0),onMouseLeave:()=>eD(!1),children:(0,a.jsx)("div",{className:Z.divide,children:!e.hideEnterText&&eP&&(0,a.jsx)(eE.Z,{isActive:!0,abTestData:V,isLiving:eh===te.LIVING,onEnterRoom:eq,href:`${eR}&from_search=true`,roomIdStr:S,useF:!0,size:"small",scene:"douyin_pc_search",isHover:!1,setIsHover:eD,rawdata:eu})})})}),tx=eh===te.ERROR&&(0,a.jsx)(e6,{className:e.errorCoverClassName,onRetry:tb}),tR=!ty&&(0,a.jsx)($.j,{count:A,program:N,title:W,showTitle:B,appointment:z,className:Z.userCount,paidLiveData:q,isLogin:eg,viewType:ez,webEnterBenefitPointData:null==eu?void 0:null===(h=eu.others)||void 0===h?void 0:h.web_enter_benefit_point_data,showRedPack:!0}),tT=U&&!ty&&(0,a.jsx)(H,{title:W,authorInfo:O,className:Z.liveInfo,style:{opacity:ef?1:0}}),tN=ty&&(0,a.jsx)(e7.Z,{className:s()(Z.info),isLogin:eg,userName:null==O?void 0:O.nickname,secUid:null==O?void 0:O.secUid,anchorId:k,userParams:{enter_method:"web_live_cell",enter_from_merge:null==L?void 0:L.enter_from_merge,event_page:"live",tab_name:"search"},isFollow:ey,userCount:A,isPaidLive:!1,abTestData:V,tagInfo:{assistLabel:Y,dynamicLabel:ei},useUserName:U,paidLiveInfo:q,viewType:ez}),tj=(0,a.jsx)("div",{className:Z.toolbarContainer,children:(0,a.jsx)(tc,{type:"mini",scene:"preview",headerUserInfo:G,defaultCartVisible:eY,onLoginSuccess:ti,onPopClick:tt,onCartClick:eJ,isLiveShopPopVisibel:null==G?void 0:G.isLogin,roomId:S,authorId:k,getLiveShoppingLogParams:()=>({enter_from_merge:null==L?void 0:L.enter_from_merge,enter_method:"web_live_cell",request_id:null==L?void 0:L.request_id}),messageInstance:tC})}),tD=th&&(null==th?void 0:th.backgroundImage)&&(0,a.jsx)("div",{style:th,className:ex.waterMark});return(0,a.jsxs)(eX,{ref:ec,baseConfig:tv,pluginsConfig:t_,className:s()(Z.player,ex.liveSearchPlayer,"liveSearchPlayer",C,{electron:tw,mac:tk}),logOptions:{user_id:(0,er.sq)(),device_id:null===(p=(0,er.Es)())||void 0===p?void 0:p.user_unique_id,ext:(0,l._)((0,r._)({definition:(0,R.iW)(eU),live_type:null==eu?void 0:eu.live_room_mode,scene:x.C.liveSearch,is_game:null==eu?void 0:null===(g=eu.game_data)||void 0===g?void 0:null===(v=g.game_tag_info)||void 0===v?void 0:v.is_game},(null==eu?void 0:null===(m=eu.others)||void 0===m?void 0:null===(f=m.web_data)||void 0===f?void 0:f.additional_stream_url)?{}:{h265_miss:1}),{anchor_id:k,room_id:S,is_all_265:!((0,T.ld)(null==eu?void 0:eu.stream_url)||(0,T.ld)(eA))})},disableLogger:eh===te.ENDED,onError:eZ,onEnd:e$,onPlay:tP,onPause:en,onLoadStart:tS,onLoadedData:tL,onPlayerCreated:tm,sessionId:es,children:[(0,a.jsx)(eI.GI,{}),j,(0,a.jsx)(eI.gu,{}),(0,a.jsx)(e3,{}),tI,tx,tR,tT,tN,tj,tD,(0,a.jsx)(e0,{}),(0,a.jsx)(e5,{isActive:!0}),(0,a.jsx)(e8,{ext:tE}),(0,a.jsx)(eQ,{})]})};var tp=i("126544"),tv=i("797973"),tg=i("302461");(0,h.r)(e=>{var{text:t}=e,i=(0,O._)(e,["text"]);return(0,a.jsxs)(V.G,(0,l._)((0,r._)({},i),{className:s()(M,A,i.className),children:[(0,a.jsx)("span",{className:U,children:null!=t?t:"进入详情"}),(0,a.jsx)("svg",{width:"6",height:"9",viewBox:"0 0 6 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{opacity:"0.7",fillRule:"evenodd",clipRule:"evenodd",d:"M0.689396 8.12382C0.396503 7.83093 0.396503 7.35605 0.689396 7.06316L3.51782 4.23473L0.689396 1.40631C0.396503 1.11341 0.396503 0.63854 0.689396 0.345646C0.98229 0.0527533 1.45716 0.0527533 1.75006 0.345646L5.10881 3.7044C5.40171 3.9973 5.40171 4.47217 5.10881 4.76506L1.75006 8.12382C1.45716 8.41671 0.98229 8.41671 0.689396 8.12382Z",fill:"black"})})]}))});let tf=(0,c.ZP)(()=>Promise.all([i.e("3556"),i.e("21083"),i.e("5072")]).then(i.bind(i,896280)),{ssr:!1}),tm=d.forwardRef((e,t)=>{var i,n,o,c,_,h,O,M,A,U,W,z,G,K,ec,ev,ef,em;let{hlsSrc:eS,flvSrc:eL,cover:eC,hideEnterText:eI,anchorId:ex,userCount:eR,webRid:eT,roomId:eN,cameraId:ej,gameName:eD,detailUrl:eF,logParams:eO,appointment:eV,isShow:eM,linkerDetail:eA={},linkerMap:eU={},liveRoomMode:eW,program:eB,onFocus:eZ,onBlur:e$,onPlay:ez=()=>null,onPause:eG=()=>null,onReady:eH,onDestroy:eq=()=>null,onEnterDetail:eY=()=>null,onFullScreen:eK,className:eJ,style:eX,sceneId:eQ=394,isActive:e0=!1,title:e1,showTitle:e3=!1,enableLiveInfo:e2=!1,disableEnterButton:e6=!1,disableFullScreen:e8=!0,needSwitchLiveRoom:e7=!1,needAutoCheckRoomStatus:e5=!1,fullScreenTarget:te,endCoverClassName:tt="",errorCoverClassName:ti="",children:tl,sessionId:ta,ecomData:tn,roomCart:ts,authorInfo:to,secretKey:tu,userInfo:tc={},abTestData:t_={},paidLiveData:th={},onLoginSuccess:tm,onPaidLiveTryWatch:ty,onPaidLiveBuyTicket:tE,assistLabel:tw,dynamicLabel:tk,isModal:tb,docId:tP,isShowGuide:tS,useNewUserSoundGuide:tL,__rawdata:tC,modalEnterFrom:tI}=e,tx=d.useRef(null),[tR,tT]=d.useState(2),tN=d.useMemo(()=>(null==eA?void 0:eA.linker_play_modes)||[],[eA]),[tj,tD]=d.useState({os:"",version:""}),[tF,tO]=d.useState(!1),[tV,tM]=d.useState(!e0),tA=d.useRef(Date.now()),[tU,tW]=d.useState(!1),tB=d.useRef(!0),tZ=d.useRef(1),t$=d.useRef(0),{syncVolume:tz}=(0,eo.j)(),[tG,tH]=d.useState({}),[tq,tY]=d.useState(!1),[tK,tJ]=d.useState(!1),tX=d.useRef(!1),tQ=d.useMemo(()=>tI===q.a.WaterFall,[tI]),t0=(0,tv.Z)(()=>`/root/live/${eT}`),t1=d.useCallback(()=>{if(tQ){let e=t0();if(e){let t=`${e}?${ew.stringify((0,r._)({},eO))}`;(0,tp.X)({href:t,reusePlayer:0,webRid:eT,abtestData:t_,roomId:eN,usePreCreate:!0})}}},[eO,eT,tQ,eN,t_]),t3=d.useMemo(()=>{var e,t;return(null===(t=tG[eT])||void 0===t?void 0:null===(e=t.scopes)||void 0===e?void 0:e.indexOf("FEED"))>-1?tG[eT]:null},[tG,eT]),t2=(null==t3?void 0:t3.url)||(0,j.h)(eT),t6=d.useMemo(()=>{let[e,t]=t2.split("?"),i=ew.parse(t||"");return tQ?void 0:`${e}?${ew.stringify(i)}&from_search=true`},[tQ,t2,e]),t8=(0,J.F)(null==to?void 0:to.followStatus)?1:0,{AnchorABMap:t7={}}=tC||{},t5=(null==t7?void 0:t7.linkmic_video_equal_layout_frame_opt)||"0";d.useImperativeHandle(t,()=>{var e,t;return{getPlayer:null===(e=tx.current)||void 0===e?void 0:e.getPlayer,getPlayerRoot:null===(t=tx.current)||void 0===t?void 0:t.getPlayerDom}});let t4=d.useMemo(()=>{var e,t;return 1===Number(null!==(t=null==tn?void 0:null===(e=tn.room_cart_v2)||void 0===e?void 0:e.show_cart)&&void 0!==t?t:null==ts?void 0:ts.show_cart)},[tn,ts]),t9=u()(tc,"isLogin",!1),ie=d.useMemo(()=>t4?{EVENT_ORIGIN_FEATURE:"TEMAI",_param_live_platform:"live"}:{},[t4]),{inActive:it}=(0,eP.Z)({isActive:e0}),{viewType:ii,setViewType:ir,retType:il,setRetType:ia,paidLiveData:is,setPaidLiveData:io,isPaidLive:iu,hideLinkMicPreview:id}=(0,ea.M)(th,t9),ic=null==tC?void 0:null===(n=tC.others)||void 0===n?void 0:null===(i=n.web_data)||void 0===i?void 0:i.additional_stream_url,{playerUrl:i_,isH265Err:ih,isFeedH265:ip,setIsH265Err:iv,addH265ErrorNum:ig,resetH265ErrorNum:im}=(0,e4.Z)({abtestData:t_,tab:"search",url:eL,data:ic}),iy=d.useMemo(()=>(0,L.tq)()?eS:i_,[i_,eS]),iE=d.useMemo(()=>{var e,t,i,a;let n="",s="off",o="game";return eU[8]?n="radio":eU[12]?n="party":eU[5]&&(tN.includes(24)?n="radio":tN.includes(26)&&(n="party")),(null==tN?void 0:tN.includes(4))&&(s="on"),eU[8]||eU[12]?o="video":eU[5]&&(o="voice"),(0,l._)((0,r._)({},eO),{enter_method:(null==eO?void 0:eO.enter_method)||"web_card",enter_from_merge:null==eO?void 0:eO.enter_from_merge,game_name:eD,search_params:JSON.stringify((null==eO?void 0:eO.search_params)||"{}"),search_tab:`aweme_${null==eO?void 0:null===(e=eO.search_params)||void 0===e?void 0:e.search_type}`,previous_page:"",live_type:o,function_type:n,seat_fit_status:s,request_id:null==eO?void 0:eO.request_id,column_type:(null==eO?void 0:null===(t=eO.search_params)||void 0===t?void 0:t.colum_type)||"single",search_id:null==eO?void 0:null===(i=eO.search_params)||void 0===i?void 0:i.search_id,search_result_id:null==eO?void 0:null===(a=eO.search_params)||void 0===a?void 0:a.search_result_id})},[eO,eD,eU,tN]),{playerTeaEvtSubmit:iw}=(0,td.Z)({from:"searchPlayer",player:null===(o=tx.current)||void 0===o?void 0:o.getPlayer(),isRoomEnd:0===tR,eventParams:iE,isH265:!1,isActive:e0}),ik=d.useMemo(()=>{let e={};return"string"==typeof ej&&"0"!==ej&&(e.camera_id=ej),e},[ej]),ib=eF||(0,j.h)(eT,ik),iP=(0,eu.f)(e=>e.setMessageInstance),iS=(0,eu.f)(e=>e.destroy);d.useEffect(()=>(iP(new es.v0C),()=>{iS&&iS()}),[]);let iL=(0,eu.f)(e=>e.messageInstance),[iC,iI]=d.useState(null),{isVip:ix,isVipLive:iR,freePreview:iT}=(0,eb.Rk)(iC||(null==tC?void 0:tC.paid_live_data)||{},t_);(0,ed.q)({message:iL}),d.useEffect(()=>{try{if(e0)return iL.setImRequestPath("/webcast/im/fetch/preview/"),iL.start(eN),()=>{var e;return null==iL?void 0:null===(e=iL.destroy)||void 0===e?void 0:e.call(iL)}}catch(e){}},[eN,e0]);let iN=d.useCallback(()=>{X.emit(X.EVENT.searchMusicPause),null==ez||ez()},[ez]),ij=d.useCallback(()=>(0,D.Y)(ex,eQ).then(e=>{let{status_code:t,data:i=[]}=e.data;if(0===t){if(i.some(e=>{let t=u()(e,"user_live",[])[0];return 1===u()(t,"live_status")}))return tT(2),2;{var r;let e=null===(r=tx.current)||void 0===r?void 0:r.getPlayer();return null==e||e.pause(),tT(0),0}}return tT(1),1}),[ex,eQ]),iD=d.useCallback(e=>{ij().then(t=>{if(0!==t&&((0,Q.T)(e),tT(1),ip&&!ih)){var i,r,l;null===(l=tx.current)||void 0===l||null===(r=l.getPlayerLogger())||void 0===r||null===(i=r.updateExt)||void 0===i||i.call(r,{h265_degrade:1}),iv(!0),ig()}})},[ij,ip,ih]),iF=d.useCallback(()=>{ij().then(e=>{if(!tx.current)return;let t=tx.current.getPlayer();2===e&&t.retry()})},[ij]),iO=d.useCallback(()=>{iN(),tM(!1),tT(2),ip&&!ih&&e0&&im(),window.__LIVE_PLAYER__=tx.current,!tX.current&&(tX.current=!0)},[iN,ip,ih,e0]),iV=d.useCallback(()=>{eG(),tM(!0)},[eG]),iM=d.useCallback(()=>{null==eZ||eZ()},[eZ]),iA=d.useCallback(()=>{null==e$||e$()},[e$]),iU=d.useCallback(e=>{let{action:t,paused:i}=e,a="";switch(t){case"switch_play_pause":a=i?"click_play_button":"click_pause_button";break;case"switch_fullscreen":a="click_full_screen";break;case"change_muted":a="click_volume"}a&&B.sendLog("userAction",(0,l._)((0,r._)({},null==eO?void 0:eO.search_params),{button_type:a}))},[eO]),iW=d.useCallback(()=>{B.sendLog("userAction",(0,l._)((0,r._)({},null==eO?void 0:eO.search_params),{button_type:"click_refresh"}))},[eO]),iB=d.useCallback(()=>{X.emit(X.EVENT.searchVideoLoadStart,{playerType:"live"})},[]),iZ=d.useCallback(()=>{tJ(!0),X.emit(X.EVENT.searchVideoLoaded,{playerType:"live"}),X.emit(X.EVENT.searchPageHydrate)},[]);d.useEffect(()=>{if(eM){var e;(0,F.JW)((0,l._)((0,r._)({anchor_id:ex,room_id:(null==tC?void 0:tC.id_str)||eN,is_paidlive:Number(iu),is_aweme_tied:null==eO?void 0:eO.is_aweme_tied,search_type:(null==eO?void 0:null===(e=eO.search_params)||void 0===e?void 0:e.search_type)||"",follow_status:t8,if_live_close:0===tR?1:0},(0,F.Ne)(eB),iE,ie),{is_viplive:iR?1:0}))}},[eM,eN,tC]),d.useEffect(()=>{tD((0,ee.fV)())},[]),d.useEffect(()=>{tO((0,et.DT)())},[]),d.useEffect(()=>{e7&&iF()},[e7,iF,ex]);let i$=(0,tr.K)(!0),iz=d.useMemo(()=>(null==i$?void 0:i$["webcast/distribution/check_user_live_status"])||6e4,[i$]);d.useEffect(()=>{if(e5&&2===tR){let e=setInterval(()=>ij(),iz);return()=>clearInterval(e)}},[e5,ij,tR,iz]);let iG=d.useCallback(e=>{var t,i,a,n;(0,F.bi)((0,r._)({anchor_id:ex,room_id:(null==tC?void 0:tC.id_str)||eN,video_id:eN,is_aweme_tied:null==eO?void 0:eO.is_aweme_tied},(0,F.Ne)(eB),iE)),iw(2),B.sendLog("userAction",(0,l._)((0,r._)({},null==eO?void 0:eO.search_params),{from_video_id:ei.Le.getConfig(ei.gI.PageEnterFromVideoID)||"",button_type:"click_into_live"})),tM(!0),eY();let s=null===(t=tx.current)||void 0===t?void 0:t.getPlayer();if(null==s||s.pause(),null===(a=location)||void 0===a?void 0:null===(i=a.href)||void 0===i?void 0:i.includes("/jingxuan")){t1();return}null==e||null===(n=e.callback)||void 0===n||n.call(e)},[t1,eO,iE,ex,eN,tC]);(0,tg.o)(()=>{var e,t;let i=null===(e=tx.current)||void 0===e?void 0:e.getPlayer();i&&(null==i||null===(t=i.play)||void 0===t||t.call(i))},[]);let{onCartClick:iH,onPromotionPopClick:iq,onShopLoginSuccess:iY}=(0,en.L)({onEnterRoom:iG,propsOnLoginSuccess:tm,href:ib,enterLogParams:(0,l._)((0,r._)({},iE),{enter_method:(null==eO?void 0:eO.shop_car_method)?null==eO?void 0:eO.shop_car_method:"web_live_card_popup_card"}),isReuseBasicPlayer:tQ}),{liveDuration:iK}=eg({roomId:eN,anchorId:ex,hasPlay:tU,program:eB,enterLogParams:iE,shopParams:ie,nowTime:tA,isActive:e0,isPause:tV,isVisibleRef:tZ,isPaidLive:iu,isFollow:t8,isModal:tb}),{playerWaterMark:iJ,volumeWaterMark:iX}=(0,e9.Z)({user_id:(0,er.sq)(),player:null===(c=tx.current)||void 0===c?void 0:c.getPlayer(),isLiveWaterMark:(null==t_?void 0:null===(_=t_.liveWaterMark)||void 0===_?void 0:_.searchPreview)===1&&0===Object.keys(null!=eU?eU:{}).length,isSmallWindow:!1,isPlayerSucc:tK,liveUserWaterMarkEvent:F.xw,logParams:(0,l._)((0,r._)({},iE),{anchor_id:ex,room_id:eN,video_id:eN})});d.useEffect(()=>{var e;let t=null===(e=tx.current)||void 0===e?void 0:e.getPlayer();if(!!t)0===tR&&(t.plugins.play.hide(),t.plugins.volume.hide())},[tR]),d.useEffect(()=>{tM(!e0),ei.Le.setConfig(ei.gI.HasLiveContent,e0)},[e0]),d.useEffect(()=>{let e=()=>{tZ.current="hidden"===document.visibilityState?0:1,2===tR&&!tV&&!t$.current&&iK("visibilitychange")};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[tR,tV,t$,iK]),d.useEffect(()=>{e0&&tV&&tU&&(t$.current=Date.now(),iK("pause")),e0&&!tV&&(tA.current=Date.now(),t$.current=0),!e0&&tX.current&&iw(1)},[e0,tV,tU]);let iQ=u()(tc,"info.shortId","");d.useEffect(()=>{var e;let t=null===(e=tx.current)||void 0===e?void 0:e.getPlayer();if(!t)return;let i=()=>{tM(!1),tW(!0),e0&&tB.current&&2===tR&&(iK("success"),tA.current=Date.now())},r=()=>{tM(!0)},l=()=>{null==eq||eq(),!t$.current&&2===tR&&(iK("play_destroy"),tW(!1))};return null==t||t.on("autoplay_started",i),null==t||t.once("destroy",l),null==t||t.on("autoplay_was_prevented",r),()=>{null==t||t.off("autoplay_started",i),null==t||t.off("autoplay_was_prevented",r),null==t||t.off("destroy",l)}},[tx.current,e0,tA.current,tB,tM,tW,eN,ex,tZ,t$.current,eq]),d.useEffect(()=>{(async()=>{try{let e=await (0,Y.ZP)({service_name:"webcast.douyin.live_pc",key:"entrance"});tY(!0),"object"==typeof e&&tH(e)}catch(e){tY(!1)}})()},[]);let i0=d.useCallback(()=>{tT(2)},[]),i1=(null==eB?void 0:null===(h=eB.mod)||void 0===h?void 0:h.episode_stage)===ep.j.FIRST_LIVE,i3=d.useMemo(()=>({is_paidlive:Number(iu),watch_paidlive_status:(0,C.oD)(ii),entrance_form:""}),[iu,ii]),i2=d.useMemo(()=>(0,r._)({},ie,i3,iE),[i3,i3,iE]);return d.useEffect(()=>{var e,t;let i=null==tx?void 0:null===(t=tx.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);i&&e7&&(i.src=iy)},[iy,e7]),d.useEffect(()=>{let e;if(!e0)return;let t=e=>{null==e||e.stopPropagation()};return tx.current&&(null==(e=tx.current.getPlayer().getPlugin("volume").root)||e.addEventListener("pointerdown",t),null==e||e.addEventListener("touchstart",t)),()=>{null==e||e.removeEventListener("pointerdown",t),null==e||e.removeEventListener("touchstart",t)}},[tU,e0]),e0?(0,a.jsxs)(p.Nu,{url:iy,ref:tx,onReplay:iW,onFocus:iM,onBlur:iA,onEnd:iF,onError:iD,onPause:iV,onPlay:iO,onReady:eH,onFullScreen:eK,onUserAction:iU,onLoadStart:iB,onLoadedData:iZ,fullscreenTarget:te,volume:(0,I.T1)(),className:s()(Z.player,"liveSearchPlayer","xgplayer-inactive",eJ,{electron:tF,mac:"Mac"===tj.os,[Z.inActive]:it}),style:eX,closeVideoDblclick:!0,closeFocusVideoFocus:!0,closePauseVideoFocus:!0,closePlayVideoFocus:!0,disableFullScreen:e8,sessionId:ta,loggerOptions:(0,r._)({user_id:(0,er.sq)(),device_id:null===(O=(0,er.Es)())||void 0===O?void 0:O.user_unique_id,scene:x.C.liveSearch,definition:(0,R.iW)(iy),live_type:null==tC?void 0:tC.live_room_mode,is_game:null==tC?void 0:null===(A=tC.game_data)||void 0===A?void 0:null===(M=A.game_tag_info)||void 0===M?void 0:M.is_game,is_shopping:t4,anchor_id:ex,room_id:eN,is_all_265:!((0,T.ld)(null==tC?void 0:tC.stream_url)||(0,T.ld)(ic))},(null==tC?void 0:null===(W=tC.others)||void 0===W?void 0:null===(U=W.web_data)||void 0===U?void 0:U.additional_stream_url)?{}:{h265_miss:1}),isPaidLive:iu,isVipLive:iR,isVip:ix,freePreview:iT,secretKey:tu,autoHide:!0,playerWaterMark:iJ,volumeWaterMark:iX,disableLogger:0===tR,children:[(0,a.jsx)("div",{children:(0,a.jsx)(V.G,{target:(null==t3?void 0:t3.html_target)||"_blank",href:t6,onClick:iG,passParams:iE,className:Z.linkArea})}),0!==tR&&!id&&(0,a.jsx)(N.LinkMicPreviewPlugin,{className:Z.preview,linkerMap:eU,anchorId:ex,roomId:eN,functionType2:"new_audience",linkmicVideoEqualLayoutFrameOpt:t5}),(0,a.jsx)(ek.default,{onShowVipLiveBoundary:e=>{e&&iI({privilege_info_map:{101:{paid_live_type:101,paid_live_info:{view_right:0}}}})},onBtnClick:()=>{window.open(`${t2}?${ew.stringify((0,l._)((0,r._)({},iE),{open_vip_panel:1}))}`,el.f?"_self":"_blank")},roomId:eN,roomStatus:tR,paidLiveData:iC||th,roomInfo:{room:{id_str:eN},anchor:{id_str:ex,nickname:null==tC?void 0:null===(z=tC.owner)||void 0===z?void 0:z.nickname}},messageInstance:iL,abTestData:t_}),(0,a.jsx)(v.b,{isActive:e0,currentPlayer:null===(G=tx.current)||void 0===G?void 0:G.getPlayer()}),(0,a.jsx)(m.n,{position:"controlsLeft"}),(0,a.jsx)(y.G5,{linkmicVideoEqualLayoutFrameOpt:t5}),0===tR&&(0,a.jsx)(E.Cx,{cover:eC,className:tt}),!iu&&1===tR&&!iu&&(0,a.jsx)(w.JJ,{className:ti,onRetry:i0}),(0,a.jsx)($.j,{count:eR,program:eB,title:e1,showTitle:e3,appointment:eV,className:Z.userCount,paidLiveData:is,isLogin:t9,viewType:ii,webEnterBenefitPointData:null==tC?void 0:null===(K=tC.others)||void 0===K?void 0:K.web_enter_benefit_point_data,showRedPack:!0}),(0,a.jsx)(k.p,{ext:{ignoreEmptyUrlUpload:0===tR||void 0===tR?1:0,isNewAce:!0,roomMode:eW,roomId:eN,webRid:eT,enter_from_merge:null==eO?void 0:eO.enter_from_merge,enter_method:"web_live_cell",is_preview:0,act_code:null==eO?void 0:eO.act_code}}),!eI&&(0,a.jsx)(V.G,{target:(null==t3?void 0:t3.html_target)||"_blank",href:t6,onClick:iG,passParams:iE,className:s()(Z.divide,{[Z.inActive]:it}),children:tq&&(0,a.jsx)(eE.Z,{enterText:(null==eB?void 0:null===(ec=eB.mod)||void 0===ec?void 0:ec.episode_stage)===ep.j.FIRST_LIVE?"点击进入首播":null==t3?void 0:t3.enter_text,divideAb:!0,isActive:e0,abTestData:t_,isLiving:2===tR,onEnterRoom:iG,href:t6,roomIdStr:eN,useF:!0,size:"small",scene:"douyin_pc_search",rawdata:tC})}),e2&&(0,a.jsx)(H,{title:e1,authorInfo:to,className:Z.liveInfo}),(0,a.jsx)("div",{className:Z.toolbarContainer,children:(0,a.jsx)(tf,{type:"mini",scene:"preview",headerUserInfo:tc,defaultCartVisible:t4,onLoginSuccess:iY,onPopClick:iq,onCartClick:iH,isLiveShopPopVisibel:null==tc?void 0:tc.isLogin,roomId:eN,authorId:ex,getLiveShoppingLogParams:()=>({enter_from_merge:null==eO?void 0:eO.enter_from_merge,enter_method:"web_live_cell",request_id:eO.request_id}),messageInstance:iL})}),(0,a.jsx)(b.l,{}),(0,a.jsx)(P.b,{isActive:e0,isShowGuide:tS,useNewUserSoundGuide:tL}),iu&&0!==tR&&(0,a.jsx)(e_.default,{paidLiveData:is,isLogin:t9,display_id:iQ,webRid:eT,roomId:eN,viewType:ii,setViewType:ir,setRetType:ia,scene:eh.W.LIVING_SEARCH,retType:il,setPaidLiveData:io,isFirstLive:i1,logParams:i2,onPaidLiveTryWatch:ty,onPaidLiveBuyTicket:tE,isActive:e0}),(0,a.jsx)(S.g,{}),(0,a.jsx)(ey,{isActive:e0}),(0,a.jsx)(g.l,{from:"search_player",isActive:e0,hackFullScreenDom:!0,videoAreaClickActive:!1,logParams:eO,enableInteractionPlugin:!1,searchListType:"single",isUpperFeed:!1,livePlayer:null==tx?void 0:null===(ef=tx.current)||void 0===ef?void 0:null===(ev=ef.getPlayer)||void 0===ev?void 0:ev.call(ef),liveDocId:tP}),(0,a.jsx)(f.t,{logParams:eO}),tl]}):(0,a.jsxs)("div",{className:s()(Z.player,eJ),style:eX,children:[(0,a.jsx)("img",{src:eC,className:Z.poster}),(0,a.jsx)($.j,{count:eR,program:eB,title:e1,showTitle:e3,appointment:eV,className:Z.userCount,paidLiveData:is,webEnterBenefitPointData:null==tC?void 0:null===(em=tC.others)||void 0===em?void 0:em.web_enter_benefit_point_data,showRedPack:!0})]})}),ty=e=>{var t;let{className:i,style:r,cover:l,userCount:n,program:o,title:u,showTitle:d,paidLiveData:c,appointment:_,__rawdata:h}=e;return(0,a.jsxs)("div",{className:s()(Z.player,i),style:r,children:[(0,a.jsx)("img",{src:l,className:Z.poster}),(0,a.jsx)($.j,{count:n,program:o,title:u,showTitle:d,appointment:_,className:Z.userCount,webEnterBenefitPointData:null==h?void 0:null===(t=h.others)||void 0===t?void 0:t.web_enter_benefit_point_data,showRedPack:!0})]})},tE=d.forwardRef((e,t)=>{var i,n,s,o;let c;let h=d.useMemo(()=>{var t;return(0,ec.Lj)(null!==(t=null==e?void 0:e.webRid)&&void 0!==t?t:"-1")()},[null==e?void 0:e.webRid]),p="_douyin_player_search_error",[v,g]=d.useState(()=>Number(localStorage.getItem(p)||"0")>3),f=d.useCallback(()=>{g(!0);let e=Number(localStorage.getItem(p)||"0");localStorage.setItem(p,String(e+1))},[]),m=Number(u()(e.paidLiveData,"paid_type",0))===K.xc.PAID_LIVE,y=101===u()(e.paidLiveData,"privilege_info_map[101].paid_live_type"),{ecomData:E,roomCart:w}=e,k=d.useRef(1===Number(null!==(n=null==E?void 0:null===(i=E.room_cart_v2)||void 0===i?void 0:i.show_cart)&&void 0!==n?n:null==w?void 0:w.show_cart));return c=!(!(null==e?void 0:e.disableNewPlayer)&&(0,_.Eo)())||(0,L.tq)()||v||m||y||k.current||0!==Object.keys(null!==(s=e.linkerMap)&&void 0!==s?s:{}).length?(0,a.jsx)(tm,(0,l._)((0,r._)({},e),{ref:t})):(0,a.jsx)(th,(0,l._)((0,r._)({},e),{onError:f})),(0,a.jsx)(ec.qd.Provider,{value:h,children:c},null!==(o=null==e?void 0:e.webRid)&&void 0!==o?o:"-1")});var tw=tE},782262:function(e,t,i){i.d(t,{t:function(){return d}});var r=i(520739),l=i(878389),a=i(88648),n=i(734123),s=i(725887),o=i(350577),u=i(335101);let d=e=>{let{logParams:t}=e,i=(0,u.n)(),d=(0,a.useCallback)(e=>{let{action:i,pluginName:a,paused:n,status:u}=e,d="";switch(i){case"switch_play_pause":d=n?"click_play_button":"click_pause_button";break;case"switch_fullscreen":d="click_full_screen";break;case"click":case"dragend":"progress"===a&&(d="click_progress");break;case"change_muted":d="click_volume";break;case"speed_change":d="click_speed_change";break;case"clean_screen":d="open"===u?"click_bullet_clean":"click_bullet_close";break;case"switch_clarity":d="click_quality_change";break;case"page_fullscreen_change":d="click_full_window";break;case"fake_screen_change":d="open"===u?"click_intelligence_size":"click_formal_size";break;case"danmaku_switch":d="open"===u?"click_bullet_open":"click_bullet_close";break;case"danmaku_emoji_click":d="click_bullet_emo";break;case"danmaku_setting":d="click_bullet_setting";break;case"danmaku_input_focus":d="click_bullet_enter";break;case"digg":d="open"===u?"click_good":"click_good_cancel";break;case"open_comment":d="click_comment";break;case"click_share":d="click_forward";break;case"collect":d="on"===u?"click_collect":"click_collect_cancel";break;case"dislike":d="click_dislike";break;case"phone_resume":d="click_phone_continue";break;case"report":d="click_report";break;case"show_short_cut_list":d="click_shortcut_list";break;case"click_view_later":d="click_view_later";break;case"collect_music":d="click_collect_music";break;case"shop_anchor_click":d="click_shop_anchor";break;case"click_compilation":d="click_compilation";break;case"click_hot":d="click_hotboard";break;case"click_related_search":d="click_related_search_anchor_v2";break;case"click_series":d="click_short_video";break;case"click_video_area":d="click_video_area";break;case"click_small_window":d="click_small_window";break;case"click_window_close":d="click_window_close";break;case"click_window_zoom":d="click_window_zoom";break;case"click_window_cancel_pin":d="click_window_cancel_pin";break;case"click_window_pin":d="click_window_pin";break;case"click_window_minimize":d="click_window_minimize"}d&&o.Z.sendLog("userAction",(0,l._)((0,r._)({},null==t?void 0:t.search_params),{button_type:d,button_type_v2:d,from_video_id:s.Le.getConfig(s.gI.PageEnterFromVideoID)}))},[t]);return(0,a.useEffect)(()=>{var e;if(!!i)return null==i||null===(e=i.on)||void 0===e||e.call(i,n.Events.USER_ACTION,d),()=>{var e;null==i||null===(e=i.off)||void 0===e||e.call(i,n.Events.USER_ACTION,d)}},[i,d]),null}},350577:function(e,t,i){var r=i(872136);t.Z=new r.h({userAction:{eventName:"search_result_click",params:{impr_id:"",rank:0,search_id:"",search_keyword:"",search_result_id:"",from_video_id:"",is_aladdin:0,token_type:"",button_type:"",enter_from:"general_search"}}})},585543:function(e,t,i){i.d(t,{l:function(){return f}});var r=i(88648),l=i(850634),a=i(645260),n=i.n(a),s=i(613063),o=i.n(s),u=i(832052),d=i(282385),c=i(437983),_=i(725887),h=i(441447),p=i(693691),v=i(613480),g=i(335101);let f=e=>{let{awemeInfo:t,from:i,isActive:a,hackFullScreenDom:s=!1,videoAreaClickActive:f=!1,logParams:m,enableInteractionPlugin:y=!0,searchListType:E,isUpperFeed:w=!1,syncInMulti:k=!1,livePlayer:b,liveDocId:P}=e,S=(0,g.n)(),L=b||S,{openGeneralSearchModalSlide:C}=(0,r.useContext)(p.j)||{},{docId:I}=(0,r.useContext)(v.C)||{},x=b&&P?P:I,R=_.Le.getConfig(_.gI.SearchModalCurrentActiveProgress);return(0,r.useEffect)(()=>{if(L&&a&&t){_.Le.getConfig(_.gI.SearchModalEnterFullScreenAfterCreate)&&"modal_player"===i&&(_.Le.setConfig(_.gI.SearchModalEnterFullScreenAfterCreate,!1),L.getFullscreen());let{awemeId:e}=t,r=()=>{R[0]=e,R[1]=L.currentTime};return L.on("timeupdate",r),()=>{L.off("timeupdate",r),"search_player"===i&&R[0]===(null==t?void 0:t.awemeId)&&(R[0]="",R[1]=0)}}},[L,t,a]),(0,r.useEffect)(()=>{if(L&&t&&(null==t?void 0:t.awemeType)!==u.e.Note&&(null==t?void 0:t.awemeId)===R[0]){let e=R[1];L.once(l.FP.CANPLAY,()=>{L.seek(e)})}},[L]),(0,r.useEffect)(()=>{if(L&&"search_player"===i&&a)return h.listen(h.EVENT.generalSearchVideoPlay,()=>{(null==t?void 0:t.awemeType)!==u.e.Note&&((null==t?void 0:t.awemeId)===R[0]&&L.seek(R[1]),_.Le.setConfig(_.gI.IsSearchOuterAsync,!0)),L.play()})},[L,a,t]),(0,r.useEffect)(()=>{let e=n()(L,"plugins.fullscreen.root"),t=()=>{var e;null==L||null===(e=L.openGeneralSearchModalSlide)||void 0===e||e.call(L,{from:"fullscreen"})};return L&&a&&"search_player"===i&&s&&(k||E!==d.qs)&&!w&&(o()(L,"plugins.fullscreen.config.disable",!0),null==e||e.addEventListener("click",t)),()=>{o()(L,"plugins.fullscreen.config.disable",!1),null==e||e.removeEventListener("click",t)}},[L,a,s,E,t,w,k]),(0,r.useEffect)(()=>{if(L&&a&&"search_player"===i&&!y&&f){let e=e=>{if(e.target===L.root||e.target===L.video||e.target===L.innerContainer||e.target===L.video.__canvas){var t;null==L||null===(t=L.openGeneralSearchModalSlide)||void 0===t||t.call(L,{from:"pause"}),L.emit(l.FP.USER_ACTION,{action:"click_video_area"});return}};L.config.closeVideoClick=!0;let t=L.root;return t.addEventListener("click",e,!1),()=>{t.removeEventListener("click",e,!1),o()(L,"config.closeVideoClick",!1)}}},[L,a,s,f]),(0,r.useEffect)(()=>{if(L&&"search_player"===i&&a&&!w)return L.openGeneralSearchModalSlide=e=>{let{from:i}=e||{};if("fullscreen"===i&&_.Le.setConfig(_.gI.SearchModalEnterFullScreenAfterCreate,!0),"pause"===i&&!f)return!1;let r=C({docId:x,awemeId:null==t?void 0:t.awemeId,from:i});return r&&(0,c.h)("feed_enter",m),r},()=>{L.openGeneralSearchModalSlide=()=>!1}},[L,t,a,x,C,f,b,w]),(0,r.useEffect)(()=>{if(L&&"search_player"===i){let e=!1,t=h.listen(h.EVENT.pageFullScreen,t=>{let{fullScreen:i}=t;e=i});return()=>{t(),e&&h.emit(h.EVENT.pageFullScreen,{fullScreen:!1,playerId:null==L?void 0:L.playerId,clickMethod:"player_destroy"})}}},[L]),null}},589617:function(e,t,i){i.d(t,{I:function(){return m},V:function(){return g}}),i(602157);var r=i(563097),l=i(489478),a=i(734123),n=i(88648),s=i(162095),o=i(948375),u=i(428647),d=i(291773),c=i(441447),_=i(253408),h=i(979571),p=i(335101);let v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.useRef)(e);return(0,n.useEffect)(()=>{t.current=e},[e]),t};function g(e){let{onOpen:t,onClose:i,description:l}=e,a=(0,o.Z)(i),v=(0,p.n)();return(0,n.useEffect)(()=>{c.emit(c.EVENT.closeOtherTip,"SoundGuideTooltip");let e=e=>{let{pluginName:t}=e;"volume"===t&&(null==a||a())};return v.on("icon_mouseenter",e),()=>{v.off("icon_mouseenter",e)}},[v]),(0,n.useEffect)(()=>{let e=c.listen(c.EVENT.closeOtherTip,e=>{"SoundGuideTooltip"!==e&&(null==a||a())});return()=>e()},[i]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:_.default.item,children:[(0,r.jsx)("span",{className:_.default.text,children:l}),(0,r.jsx)(s.Button,{type:"primary",size:"small",theme:"solid",onClick:t,className:_.default.button,children:"打开声音"}),(0,r.jsx)(h.z,{svg:(0,r.jsx)(u.Z,{}),onClick:i,className:_.default.close}),(0,r.jsx)(h.z,{svg:(0,r.jsx)(d.Z,{}),className:_.default.down})]})})}class f extends a.Plugin{static get pluginName(){return"SoundGuideTooltipPlugin"}static get defaultConfig(){return{position:l.POSITIONS.CONTROLS_RIGHT,index:.99,className:"xgplayer-sound-guide"}}afterCreate(){if(this.config.disable)return}destroy(){}render(){return`
    <xg-icon class="xgplayer-sound-guide" data-state="normal">
    </xg-icon>`}}let m=e=>{let{isActive:t,disable:i,logParams:r,abtestData:l}=e,a=(0,p.n)(),s=v(r);return(0,n.useEffect)(()=>{if(a)return 2===a.config.reuse&&a.getPlugin("SoundGuideTooltipPlugin")?()=>{}:(a.registerPlugin(f,{disable:i,isActive:!0,player:a,logParams:s.current}),()=>{a.getPlugin("SoundGuideTooltipPlugin")&&2!==a.config.reuse&&a.unRegisterPlugin("SoundGuideTooltipPlugin",!0)})},[a,i,l]),null}},309244:function(e,t,i){var r=i(520739),l=i(878389),a=i(563097),n=i(88648);let s=(0,n.forwardRef)((e,t)=>(0,a.jsx)("svg",(0,l._)((0,r._)({width:12,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.81 3.615c0 1.485-1.24 2.692-2.777 2.71h-.066C4.43 6.306 3.189 5.1 3.189 3.614v-.904C3.19 1.214 4.45 0 6 0c1.552 0 2.81 1.214 2.81 2.711v.904zM1.163 8.594c1.167-.557 3.512-.864 4.837-.864 1.327 0 3.676.307 4.846.868.679.38 1.155 1.23 1.155 2.225v.572c0 .738-.39 1.357-.928 1.556-1.284.366-3.698.563-5.071.563-1.375 0-3.79-.201-5.078-.565C.391 12.748 0 12.13 0 11.393v-.572c0-.997.478-1.85 1.162-2.227z",fill:"#fff",fillOpacity:".9"})})));t.Z=s},907838:function(e,t,i){i.d(t,{O:function(){return h}});var r=i("563097"),l=i("88648"),a=i("713097"),n=i.n(a),s=i("750095"),o=i("823563");let u=(e,t)=>{let[i,r]=(0,l.useState)(s.Ro),a=l.useRef(),n=(0,l.useCallback)(()=>{var t,i;let r=null==e?void 0:null===(t=e.root)||void 0===t?void 0:t.clientWidth,l=null==e?void 0:null===(i=e.root)||void 0===i?void 0:i.clientHeight;return r&&l?r/l:s.Ro},[]),u=l.useCallback(()=>{clearTimeout(a.current),a.current=setTimeout(()=>{r(n())},50)},[]),d=(0,l.useMemo)(()=>t===o.$R.xg?Object.values(s.AO):Object.values(s.Fq),[t]);(0,l.useEffect)(()=>(d.forEach(t=>{null==e||e.on(t,u)}),()=>{d.forEach(t=>{null==e||e.off(t,u)})}),[e,d,u]);let c=l.useCallback(()=>{u()},[]);return l.useEffect(()=>(window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c)}),[]),l.useEffect(()=>{u()},[]),i};var d=i("144502"),c=i("600389");function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),r.forEach(function(t){var r,l,a;r=e,l=t,a=i[t],l in r?Object.defineProperty(r,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[l]=a})}return e}let h=e=>{let{player:t,uiLayout:i,renderMicSeat:a,uiLayoutConfig:h,linkerList:p=[],playerType:v=o.$R.xg,layoutCalculateType:g=o.NT.horizontal,containerClassName:f,contentClassName:m,adjustPlayerPosition:y=!0,children:E,regionClassName:w}=e,k=u(t,v);(0,l.useEffect)(()=>{if(!!y){if(s.w1.includes(g)){let{h:e,y:i}=(0,d.tD)(h);t.position({y:i,h:e})}else t.position({y:0,h:1});return()=>{y&&t.position({y:0,h:1})}}},[t,h,g,y]);let b=(0,l.useMemo)(()=>(0,d.fG)(h,g,k),[g,h,k]);return(0,r.jsx)(r.Fragment,{children:i&&h?(0,r.jsx)("div",{className:n()(c.Z.dynamicLayoutContainer,f),children:(0,r.jsxs)("div",{className:n()(m),style:_({},b),children:[(()=>{if(!h||!(null==p?void 0:p.length))return null;let{regions:e}=h,t=(0,d.B9)(i,e,p);return null==t?void 0:t.map((e,l)=>{let{p:s}=e,u=(0,d.ue)(h,e),c=(0,d.XZ)(i,h,e,t),v=p.find(e=>e.p===s)||{p:s,linkType:o.Zd.PLACEHOLDER};return(0,r.jsx)("div",{style:_({},u,c),className:n()(w),children:a&&a(l,v)},l)})})(),E||null]})}):null})}},600389:function(e,t,i){i(910461),t.Z={dynamicLayoutContainer:"dynamicLayoutContainer_77b13"}},750095:function(e,t,i){i.d(t,{AO:function(){return n},Fq:function(){return s},Hd:function(){return l},Ro:function(){return u},w1:function(){return o}});var r,l,a=i(823563);let n={CUSTOM_CSS_FULLSCREEN_CHANGE:"PREVIEW_ENTERROOM_CSS_FULL",FULLSCREEN_CHANGE:"fullscreen_change",VIDEO_RESIZE:"video_resize"},s={CUSTOM_CSS_FULLSCREEN_CHANGE:"PREVIEW_ENTERROOM_CSS_FULL",FULLSCREEN_CHANGE:"fullscreenchange",VIDEO_RESIZE:"video_resize"},o=[a.NT.horizontal],u=16/9;(r=l||(l={}))[r.VideoChat_DynamicLayout1V6=7]="VideoChat_DynamicLayout1V6",r[r.LinkMicUiLayout_Live_Partner_Dynamic=25]="LinkMicUiLayout_Live_Partner_Dynamic"},823563:function(e,t,i){var r,l,a,n,s,o;i.d(t,{$R:function(){return l},NT:function(){return a},Zd:function(){return r}}),(n=r||(r={}))[n.PLACEHOLDER=-1]="PLACEHOLDER",n[n.VIDEO=1]="VIDEO",n[n.AUDIO=2]="AUDIO",(s=l||(l={}))[s.xg=1]="xg",s[s.ies=2]="ies",(o=a||(a={}))[o.horizontal=1]="horizontal",o[o.portrait=2]="portrait"},144502:function(e,t,i){i.d(t,{B9:function(){return u},XZ:function(){return c},fG:function(){return o},tD:function(){return a},ue:function(){return d}});var r=i(750095),l=i(823563);let a=e=>{let{canvas:t,content:i}=e,r=t.h;return{h:i.h/r,y:i.y/r}},n=(e,t=!0)=>`${(100*e).toFixed(4)}${t?"%":""}`,s=e=>{let{content:t}=e,i=t.h*r.Ro;return t.w/i},o=(e,t,i)=>{if(!e)return{};if(t===l.NT.portrait){let t=n(e.content.w/e.canvas.w),i=n(e.content.h/e.canvas.h),r=n(e.content.y/e.canvas.h);return{position:"absolute",width:t,height:i,top:r,left:n(e.content.x/e.canvas.w)}}if(t===l.NT.horizontal){let t=n(s(e)*(r.Ro/i));return{position:"relative",width:t,height:"100%"}}return{}},u=(e,t,i)=>{if([r.Hd.LinkMicUiLayout_Live_Partner_Dynamic,r.Hd.VideoChat_DynamicLayout1V6].includes(e))return(null==i?void 0:i.length)&&!((null==i?void 0:i.length)<=2)?t.slice(0,i.length):t.slice(0,2);return t},d=(e,t,i=!0)=>{let{content:r}=e,{w:l,h:a}=r,{x:s,y:o,w:u,h:d}=t;return{position:"absolute",left:n(s/l,i),top:n(o/a,i),width:n(u/l,i),height:n(d/a,i),display:"flex",justifyContent:"center",alignItems:"center"}},c=(e,t,i,l)=>{let{p:a}=i,n=[],s="";if(e===r.Hd.VideoChat_DynamicLayout1V6&&0===a){if(null==l||l.forEach(e=>{if(0!==e.p){let{width:i,height:r,left:l,top:a}=d(t,e,!1);n.push(`M${l},${a} h${i} v${r} h-${i} z`)}}),n.length){let e=["M0,0 h100 v100 h-100 z",...n].join(" "),t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("fill-rule","evenodd"),t.setAttribute("d",e);let i=`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" width="100%" height="100%" viewBox="0 0 100 100">${t.outerHTML}</svg>`;s=`url('${i}')`}}return{maskImage:s}}},809761:function(e,t,i){i.d(t,{ZP:function(){return s}});var r=i(88648);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}var a=function(e){var t=(0,r.useRef)(e);return t.current=e,t},n=function(e,t){var i="",r=-1;return Object.keys(e).forEach(function(l){var a=e[l];t>=a&&a>r&&(i=l,r=a)}),i},s=function(e){var t=void 0===e?{}:e,i=t.useBorderBoxSize,s=t.breakpoints,o=t.updateOnBreakpointChange,u=t.shouldUpdate,d=t.onResize,c=t.polyfill,_=(0,r.useState)({currentBreakpoint:"",width:null,height:null}),h=_[0],p=_[1],v=(0,r.useRef)({}),g=(0,r.useRef)(),f=(0,r.useRef)(),m=(0,r.useRef)(!1),y=(0,r.useRef)(),E=a(d),w=a(u),k=(0,r.useCallback)(function(){f.current&&f.current.disconnect()},[]),b=(0,r.useCallback)(function(e){e&&e!==y.current&&(k(),y.current=e,p({currentBreakpoint:"",width:e.clientWidth,height:e.clientHeight})),f.current&&y.current&&f.current.observe(y.current)},[k]);return(0,r.useEffect)(function(){if((!("ResizeObserver"in window)||!("ResizeObserverEntry"in window))&&!c)return function(){return null};var e=null;return f.current=new(c||ResizeObserver)(function(t){var r=t[0];e=requestAnimationFrame(function(){var e=r.contentBoxSize,t=r.borderBoxSize,l=r.contentRect,a=e;i&&(t?a=t:!m.current&&(m.current=!0));var u=(a=Array.isArray(a)?a[0]:a)?a.inlineSize:l.width,d=a?a.blockSize:l.height;if(u!==v.current.width||d!==v.current.height){v.current={width:u,height:d};var c={currentBreakpoint:"",width:u,height:d,entry:r,observe:b,unobserve:k};s?(c.currentBreakpoint=n(s,u),c.currentBreakpoint!==g.current&&(E.current&&E.current(c),g.current=c.currentBreakpoint)):E.current&&E.current(c);var _={currentBreakpoint:c.currentBreakpoint,width:u,height:d,entry:r};if(!w.current||w.current(_)){if(!w.current&&s&&o){p(function(e){return e.currentBreakpoint!==_.currentBreakpoint?_:e});return}p(_)}}})}),b(),function(){k(),e&&cancelAnimationFrame(e)}},[JSON.stringify(s),i,b,k,o]),l({},h,{observe:b,unobserve:k})}}}]);