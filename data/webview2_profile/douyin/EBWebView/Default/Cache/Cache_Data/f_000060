"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["99414"],{915841:function(e,t,l){l.d(t,{u:function(){return m}}),l(779788);var i=l(88648),n=l(985703),o=l(982755),a=l(590682),r=l(832052),d=l(737470),u=l(623582),s=l(594649),c=l(725887),v=l(860805),f=l(212271);let m=e=>{let{awemeInfo:t,isActive:l,index:m}=e;(0,i.useEffect)(()=>{if(l&&(0===m&&c.Le.setConfig(c.gI.AdGapInfo,{ad_id:"",cid:"",time:new Date().getTime(),index:0}),t.rawAdData&&(0,n.hj)(t)||(0,o.Jt)(t))){var e,i;let l=c.Le.getConfig(c.gI.AdGapInfo),_=(0,o.Rx)(t);if((null==l?void 0:l.cid)===(null==_?void 0:_.creative_id)||m-((null==l?void 0:l.index)||0)-1<0)return;let h=(0,o.Rx)(t),g=null==h?void 0:null===(e=h.lynx_components)||void 0===e?void 0:e.find(e=>(null==e?void 0:e.lynx_type)===a.AD_FEED_TYPE),p=(null==g?void 0:null===(i=g.lynx_raw_data)||void 0===i?void 0:i.mixed_area_info)||{};t.awemeType===r.e.LiveCard&&(0,n.Do)(h)===d.nw.Swiper304&&(p=(null==h?void 0:h.card_data)||{});let w=new Date().getTime();(null==l?void 0:l.index)!==0&&u.logInstance.sendLog("adGapInfo",{cur_time_gap:w-((null==l?void 0:l.time)||0),cur_item_gap:(null==l?void 0:l.index)===0?0:m-((null==l?void 0:l.index)||0)-1,last_cid:null==l?void 0:l.cid,last_ad_id:null==l?void 0:l.ad_id,cid:null==_?void 0:_.creative_id,ad_id:null==_?void 0:_.ad_id,current_index:m,start_pos:m}),(0,s.E)("info_receive",{tag:(0,v.f)(),refer:f.tU.Card,ad_extra_data:JSON.stringify(p)}),c.Le.setConfig(c.gI.AdGapInfo,{ad_id:null==_?void 0:_.ad_id,cid:null==_?void 0:_.creative_id,time:w,index:m})}},[l,m])}},557546:function(e,t,l){l.d(t,{I:function(){return a}});var i=l(88648),n=l(832052),o=l(379788);let a=e=>{let{awemeInfo:t,isActive:l}=e;(0,i.useEffect)(()=>{if(l){var e,i,a,r,d,u,s,c,v,f,m,_,h,g;(null==t?void 0:null===(i=t.webRawData)||void 0===i?void 0:null===(e=i.insertInfo)||void 0===e?void 0:e.item_id)&&(0,o.sk)({id:null==t?void 0:null===(r=t.webRawData)||void 0===r?void 0:null===(a=r.insertInfo)||void 0===a?void 0:a.item_id,taskId:null==t?void 0:null===(u=t.webRawData)||void 0===u?void 0:null===(d=u.insertInfo)||void 0===d?void 0:d.task_id,exposeLimit:null==t?void 0:null===(c=t.webRawData)||void 0===c?void 0:null===(s=c.insertInfo)||void 0===s?void 0:s.expose_limit,objectType:null==t?void 0:null===(f=t.webRawData)||void 0===f?void 0:null===(v=f.insertInfo)||void 0===v?void 0:v.object_type,authorId:(null==t?void 0:t.awemeType)===n.e.LiveCard?null==t?void 0:null===(h=t.cellRoom)||void 0===h?void 0:null===(_=h.rawdata)||void 0===_?void 0:null===(m=_.owner)||void 0===m?void 0:m.id_str:null==t?void 0:null===(g=t.authorInfo)||void 0===g?void 0:g.uid})}},[t,l])}},45095:function(e,t,l){l.d(t,{J:function(){return a}});var i=l(88648),n=l(441447),o=l(742740);let a=e=>{let{index:t}=e;(0,i.useEffect)(()=>{n.emit(n.EVENT.FeedUpdateItemIndex,{scene:(0,o.yW)(),index:t})},[t])}},950672:function(e,t,l){let i,n;l.d(t,{ce:function(){return ez}});var o=l("520739"),a=l("878389"),r=l("368200");l("675373");var d=l("563097"),u=l("88648"),s=l("465571"),c=l("782580"),v=l("219153"),f=l("439239"),m=l("132607"),_=l("832052"),h=l("245861"),g=l("737470"),p=l("612774"),w=l("40335"),A=l("111906"),y=l("725887"),I=l("613480"),L=l("882421"),E=l("95950"),x=l("876877"),S=l("289228"),C=l("656482"),N=l("583165"),b=l("634362"),k=l("915841"),T=l("45095");l("209955"),l("874386"),l("250440"),l("338172");var R=l("138871"),P=l.n(R),D=l("948375"),j=l("645260"),M=l.n(j),V=l("64814"),F=l("243321"),z=l("246647"),W=l("713503"),O=l("578580"),U=l("985703"),q=l("982755"),B=l("987475"),H=l("551581"),G=l("925976"),Y=l("828782"),K=l("9147"),J=l("742740"),X=l("332679"),Z=l("441447"),Q=l("847191"),$=l("357083"),ee=l("798644"),et=l("183762"),el=l("953342"),ei=l("647291"),en=l("517509"),eo=l("872136");let ea={prfFirstFeedShow:{eventName:"prf_first_feed_show",params:{feed_total_duration:0,menu_total_duration:0,landing_page:"",is_landscape:0,group_id:"",vduration:0,if_invisible:"0",is_small_window:"0",real_index:0,is_cache_video:0,aweme_type:_.e.Normal,is_quick_player:0}},prfFirstFeedFirstFrameShow:{eventName:"prf_first_feed_first_frame_show",params:{feed_total_duration:0,landing_page:"",is_landscape:0,group_id:"",real_index:0,is_cache_video:0,aweme_type:_.e.Normal,is_quick_player:0}}};var er=new eo.h(ea),ed=l("66047"),eu=l("109539"),es=l("493986");let ec=(e,t)=>{let l=(0,u.useContext)(A.qd),i=(0,u.useContext)(v.qd);if(void 0===l)throw Error("roomStore must be used within Provider");return(0,V.oR)(t?i:l,e)},ev=()=>{try{var e,t,l,i,n,o,a,r;y.Le.getConfig(y.gI.MarkFirstEnter)&&(y.Le.setConfig(y.gI.MarkFirstEnter,!1),(0,Y.DT)()?(0,K.sE)({awemeType:_.e.LiveCard}):(null===(i=performance)||void 0===i?void 0:null===(l=i.timing)||void 0===l?void 0:l.fetchStart)&&er.sendLog("prfFirstFeedShow",{feed_total_duration:Date.now()-(null===(r=performance)||void 0===r?void 0:null===(a=r.timing)||void 0===a?void 0:a.fetchStart),landing_page:(0,J.yW)(),if_invisible:(0,X.Vr)()?"1":"0",is_small_window:(0,X.QD)()?"1":"0",aweme_type:_.e.LiveCard}),er.sendLog("prfFirstFeedFirstFrameShow",{feed_total_duration:Date.now()-(null===(o=performance)||void 0===o?void 0:null===(n=o.timing)||void 0===n?void 0:n.fetchStart),landing_page:(0,J.yW)(),aweme_type:_.e.LiveCard})),((null===(e=y.Le.getConfig(y.gI.AbtestData))||void 0===e?void 0:e.prefetchFirst)||(null===(t=y.Le.getConfig(y.gI.AbtestData))||void 0===t?void 0:t.prefetchFirstServer))&&Z.emit(Z.EVENT.firstLoadMore)}catch(e){}},ef=e=>{var t,l;let{guide_text:i,enable:n,cover:o,highlight_id_str:a,highlight_type:r,video_id:d,video_url:u}=(null==e?void 0:null===(t=e.preview_expose)||void 0===t?void 0:t.preview_high_light)||{};return{guideText:i||"",enable:n||!1,cover:(null==o?void 0:null===(l=o.url_list)||void 0===l?void 0:l[0])||"",hightLightId:a||"",hightLightType:r||"",videoId:d||"",videoUrl:u||""}},em=(e,t,l,i)=>{let{enable:n=!1,highlight_id_str:o=""}=e||{};if(es.c.has(`${i}-${o}`))return ei.kV.NORMAL;let{hightLightStyle:a="0"}=t||{};return("recommend"===l||"follow"===l)&&n&&"0"!==a?"1"===a?ei.kV.HIGHLIGHT:"2"===a?ei.kV.SMALL_HIGHLIGHT:ei.kV.NORMAL:ei.kV.NORMAL},e_=(0,u.memo)(e=>{var t,l,i,n,a,r,s,v,f,m,_,h,g,p,w,A,I,L,E,x,S,C,N,b,k,T,R,j,V,Y,K,J,X,eo,ea,er;let es,e_,eh,eg,ep,ew;let{item:eA,isActive:ey,fullScreenTarget:eI,isFullScreen:eL,forceSwiperUpdate:eE,loggerOptions:ex,playNextFunc:eS,playPrevFunc:eC,swiper:eN,isFirst:eb,deleteCurrentSwiper:ek,from:eT,tab:eR,LiveChildComponent:eP,isVideoSupportMP4:eD,isShowGuide:ej,useNewUserSoundGuide:eM,index:eV,useLivePreviewEnterRoom:eF,onReady:ez,isNext:eW}=e,{userInfo:eO,dispatch:eU}=(0,eu.useUserInfoContext)()||{userInfo:{}},[eq,eB]=(0,u.useState)(""),eH=(0,u.useRef)(null),{isLogin:eG}=eO||{},eY=(0,ed._)(),[eK,eJ]=(0,u.useState)(!1),[eX,eZ]=(0,u.useState)(ee.s.getIsPageFullscreen()||!1),[eQ,e$]=(0,u.useState)(""),[e0,e1]=(0,u.useState)(!eF&&0===eV),e3=(0,D.Z)(()=>null==eU?void 0:eU({type:"updateUserInfo"})),e2=null==eA?void 0:null===(t=eA.cellRoom)||void 0===t?void 0:t.rawdata,e4=eA.rawAdData&&(0,U.hj)(eA)?(0,q.Rx)(eA):null,e8=(0,q.Gu)(eA);null==e2||null===(l=e2.scene_type_info)||void 0===l||l.commentary_type;let e5=null==e2?void 0:e2.stream_url;try{let{options:e,stream_data:t}=e5.live_core_sdk_data.pull_data,l=M()(e,"default_quality",{}),i=JSON.parse(t),n=null==i?void 0:i.data,o=(0,en.a)({abtestData:eY,streamUrl:e5,streamData:n,defaultStream:null==l?void 0:l.sdk_key});ep=null==i?void 0:null===(V=i.common)||void 0===V?void 0:V.sessionId,ew=null==i?void 0:null===(Y=i.common)||void 0===Y?void 0:Y.secret_key,es=(0,W.f)(n[o].main.flv),e_=(0,W.f)(n[o].main.hls),eh=JSON.parse(null!==(X=null==n?void 0:null===(J=n[o])||void 0===J?void 0:null===(K=J.main)||void 0===K?void 0:K.sdk_params)&&void 0!==X?X:{}).vbitrate,!es&&O.kg.info("upload stream info if get flv failed",i),eg=(null==eY?void 0:eY.liveUseArea)===1?Object.keys(n).filter(e=>"ao"!==e).map(e=>{let t;try{t=JSON.parse(n[e].main.sdk_params)}catch(e){t={resolution:"0x0"}}return{quality:e,resolution:t.resolution,url:(0,W.f)(n[e].main.flv)}}):null}catch(e){O.kg.error("parse Stream error",e)}let e6="number"==typeof(null==e2?void 0:e2.owner_user_id)?P().stringify(null==e2?void 0:e2.owner_user_id):"object"==typeof(null==e2?void 0:e2.owner_user_id)?null==e2?void 0:e2.owner_user_id.valueOf():null==e2?void 0:e2.owner_user_id,e7=(null==eA?void 0:eA.libfinsertTaskId)||"0",e9=(null==eA?void 0:eA.liveReason)||"",te=(null==e2?void 0:null===(i=e2.room_view_stats)||void 0===i?void 0:i.is_hidden)?"":null==e2?void 0:null===(n=e2.room_view_stats)||void 0===n?void 0:n.display_short,tt=1===Number(null!==(eo=null==e2?void 0:null===(r=e2.ecom_data)||void 0===r?void 0:null===(a=r.room_cart_v2)||void 0===a?void 0:a.show_cart)&&void 0!==eo?eo:null==e2?void 0:null===(s=e2.room_cart)||void 0===s?void 0:s.show_cart),tl="";try{tl=null===(ea=JSON.parse(null==eA?void 0:eA.logPb))||void 0===ea?void 0:ea.impr_id}catch(e){tl=""}let ti=(0,u.useCallback)(()=>{if(!eQ)eS()},[eS,eQ]),tn=(0,u.useCallback)(()=>{if(!eQ)eC()},[eC,eQ]);(0,u.useEffect)(()=>{if(ey){var e;eJ(!!Number(null!==(e=(0,Q.$o)(B.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY))&&void 0!==e?e:0))}},[ey]),(0,u.useEffect)(()=>{let e=Z.listen(Z.EVENT.videoPause,e=>{var t;let l=location.pathname||"",i=l.includes("/live/")&&!l.startsWith("/live/");if(!(0,c.getInNewProjectPreviewABWithoutStoreCheck)(eY)||(null==e?!void 0:!e.isInChildRoute)||!i)null===(t=eH.current)||void 0===t||t.pause()});return()=>{null==e||e()}},[]),(0,u.useEffect)(()=>{let e=Z.listen(Z.EVENT.pageFullScreen,e=>{let{fullScreen:t}=e;ey&&(null===y.Le||void 0===y.Le||y.Le.setConfig(y.gI.IsPageFullScreen,{type:t||!1})),eZ(t||!1)});return()=>{null==e||e()}},[ey]),(0,u.useEffect)(()=>{null==ez||ez()},[]),(0,u.useEffect)(()=>{ey&&!eY.volumeBalanceControl&&(0,et.QU)()},[ey,eY]);let to=ec(e=>e.setMessageInstance,(0,c.getInNewProjectPreviewABWithoutStoreCheck)(eY)),ta=ec(e=>e.destroy,(0,c.getInNewProjectPreviewABWithoutStoreCheck)(eY));(0,u.useEffect)(()=>(to(new H.v0C),()=>{ta&&ta()}),[]),(0,u.useEffect)(()=>{let e=Z.listen(Z.EVENT.LynxAutoEnterLive,e=>{let{roomId:t}=e;eB(t)});return()=>{null==e||e()}},[]);let tr={adData:e4,currentIndex:eV,isHardAd:e8,isInsertAd:null==eA?void 0:null===(f=eA.webRawData)||void 0===f?void 0:null===(v=f.insertInfo)||void 0===v?void 0:v.is_ad,anchorId:e6,roomId:null==e2?void 0:null===(_=e2.owner)||void 0===_?void 0:null===(m=_.own_room)||void 0===m?void 0:m.room_ids_str[0],webRid:null==e2?void 0:null===(h=e2.owner)||void 0===h?void 0:h.web_rid,secUid:null==e2?void 0:null===(g=e2.owner)||void 0===g?void 0:g.sec_uid,flvSrc:es,hlsSrc:e_,bitrate:eh,resolutions:eg,sessionId:ep,insertTaskId:e7,liveReason:e9,userCount:te,cover:null==e2?void 0:null===(w=e2.cover)||void 0===w?void 0:null===(p=w.url_list)||void 0===p?void 0:p[0],episodeExtra:null==e2?void 0:e2.episode_extra,gameName:"",isEnd:(null==e2?void 0:e2.status)!==2,playMode:em(null==e2?void 0:null===(A=e2.preview_expose)||void 0===A?void 0:A.preview_high_light,eY,eR,null==e2?void 0:null===(E=e2.owner)||void 0===E?void 0:null===(L=E.own_room)||void 0===L?void 0:null===(I=L.room_ids_str)||void 0===I?void 0:I[0]),highLightInfo:ef(e2),logParams:{enter_from_merge:ei.j4.get(eT),is_aweme_tied:eG?1:0,request_id:tl,stream_type:null!==(er=el.LIVE_STREAM_TYPE[null==e2?void 0:null===(x=e2.stream_url)||void 0===x?void 0:x.stream_orientation])&&void 0!==er?er:"other"},loggerOptions:ex,userName:null==e2?void 0:null===(S=e2.owner)||void 0===S?void 0:S.nickname,title:null==e2?void 0:e2.title,isLogReady:!!eG,isActive:ey,isNext:eW,fullScreenRoot:eI,isFullScreen:eL,isPageFullScreen:eX,onFullScreenChange:eE,next:eS,prev:eb?void 0:eC,sceneId:G.U[ei.mB.get(eT)],from:eT,isAutoNext:eK,swiper:eN,width:null==e2?void 0:null===(N=e2.stream_url)||void 0===N?void 0:null===(C=N.extra)||void 0===C?void 0:C.width,height:null==e2?void 0:null===(k=e2.stream_url)||void 0===k?void 0:null===(b=k.extra)||void 0===b?void 0:b.height,tab:eR,onAutoNextChange:()=>{eJ(e=>(localStorage.setItem("player_nextautoplay",e?"0":"1"),!e))},ref:eH,deleteCurrentSwiper:ek,abtestData:eY,isShowCartInFeed:tt,userInfo:eO,onLoginSuccess:e3,followInfo:null==e2?void 0:null===(T=e2.owner)||void 0===T?void 0:T.follow_info,rawdata:e2,paidLiveData:null==e2?void 0:e2.paid_live_data,onLoadStart:()=>{Z.emit(Z.EVENT.pageFirstFrameLoadStart)},onLoaded:()=>{Z.emit(Z.EVENT.pageFirstFrameLoaded),ey&&!eq&&Z.emitAfterListen(Z.EVENT.showDouyinWindow,{from:"live"}),eb&&ev(),e1(!1)},onInnerText:e=>{e$(e)},secretKey:ew,isCarnival:(null==e2?void 0:null===(R=e2.assist_label)||void 0===R?void 0:R.label_type)===82,isVideoSupportMP4:eD,roomInfo:e2,isShowGuide:ej,useNewUserSoundGuide:eM,dispatch:eU,seasonId:null==e2?void 0:null===(j=e2.episode_extra)||void 0===j?void 0:j.season_id_str,autoEnterRoomId:eq,originData:eA};return(0,u.useEffect)(()=>{if(ey){var e,t;null===(t=eH.current)||void 0===t||null===(e=t.setUserActive)||void 0===e||e.call(t,!0)}},[ey]),(0,u.useEffect)(()=>{if(ey&&eN){try{null==eN||eN.on("changeNext",ti),null==eN||eN.on("changePrev",tn)}catch(e){}return()=>{try{var e,t;null==eN||null===(e=eN.off)||void 0===e||e.call(eN,"changeNext",ti),null==eN||null===(t=eN.off)||void 0===t||t.call(eN,"changePrev",tn)}catch(e){}}}},[ey,ti,tn]),(0,$.M)(),(0,u.useEffect)(()=>{!ey&&e1(!1)},[ey]),(0,d.jsx)(F.k,{componentName:z.l.LIVE_CARD_IN_MIX_PLAYER,children:(0,d.jsx)(eP,(0,o._)({},tr))})});var eh=l("713097"),eg=l.n(eh),ep=l("346177"),ew=l("243150"),eA=l("756560"),ey=l("30593"),eI=l("469832");let eL=(0,u.forwardRef)((e,t)=>(0,d.jsxs)("svg",(0,a._)((0,o._)({width:373,height:33,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,d.jsx)("path",{d:"M365.69 20.879v9.182h-3.734V20.88h-8.387l-.306-3.184h8.693v-6.427h-3.888a47.403 47.403 0 0 1-1.591 4.224h-3.52c1.561-3.765 2.51-7.04 3.183-11.08h3.459a62.116 62.116 0 0 1-.674 3.672h3.031v-5.57h3.734v5.57h6.183v3.184h-6.183v6.427h7.009v3.184h-7.009zm-17.722-7.775h1.652c1.378 0 2.143.765 2.143 2.143V30.06h-3.734V15.34h-2.479l-1.133-3.276c3.214-2.785 4.867-6.152 5.693-9.55h3.949c-1.041 4.561-2.786 7.99-6.091 10.591zM334.592 26.266h7.346v3.06h-18.243l-.306-3.06h7.53v-3.857h-5.694l-.336-3.03h6.03v-3.03h3.673v3.03h6.029v3.03h-6.029v3.857zm0-13.713h7.162v3.061H324.43l-.306-3.06h6.795V9.4h-5.571l-.306-3.061h5.877V2.514h3.673V6.34h5.876V9.4h-5.876v3.153zm-13.499 6.03v8.356c0 1.5-1.01 2.724-2.724 2.816-1.194.062-2.081 0-3.122-.275l-.826-3.183c.795.275 1.408.336 2.142.275.582-.061.98-.367.98-.918v-6.367l-3.245.674-.52-3.306 3.765-.674v-5.479h-3.092l-.306-3.122h3.398V2.636h3.55V7.38h2.847v3.122h-2.847v4.837l2.786-.52v3.183l-2.786.581zM303.279 26.266h2.602c.275 0 .459-.184.459-.46V12.738c0-.276-.184-.46-.459-.46h-2.602v13.989zm-3.612 0v-2.938h-4.468v2.938h4.468zm0-5.969v-2.51h-4.468v2.51h4.468zm0-5.54v-2.48h-4.468v2.48h4.468zm-2.479-8.172l-.918 2.51h11.294c1.47 0 2.449.979 2.449 2.448V27c0 1.47-.979 2.45-2.449 2.45h-20.262c-1.47 0-2.449-.98-2.449-2.45V11.543c0-1.469.979-2.448 2.449-2.448h4.928l.887-2.51h-9.152l-.306-3.184h27.548v3.184h-14.019zm-5.601 19.68V12.279h-2.602c-.275 0-.459.183-.459.459v13.07c0 .275.184.459.459.459h2.602zM274.782 14.91h-15.885v1.01c0 .276.153.46.459.46h14.967c.306 0 .459-.184.459-.46v-1.01zm0-2.602v-1.01c0-.275-.153-.459-.459-.459h-14.967c-.306 0-.459.184-.459.46v1.01h15.885zm-2.938 11.02c2.051 1.683 4.775 2.693 8.907 3.428l-.857 3.122c-4.897-1.194-8.785-2.816-11.233-5.847v6.06h-3.673v-6.06c-2.173 2.786-5.693 4.622-11.325 5.877l-.827-3.152c4.071-.582 6.795-1.684 8.938-3.428h-8.203l-.306-2.816h11.723v-1.44h-7.377c-1.714 0-2.449-.979-2.449-2.448v-6.03c0-1.469.735-2.448 2.449-2.448h6.918V2.514h3.55V4.32h11.784v2.693h-11.784v1.133h7.989c1.714 0 2.449.98 2.449 2.448v6.03c0 1.47-.735 2.449-2.449 2.449h-7.407v1.439h11.692v2.816h-8.509zM208.393 5.88V2.576l6.55 2.05v3.306l-6.55-2.05zm-1.041 7.04V9.616l6.55 2.05v3.306l-6.55-2.05zm-.061 17.11a58.236 58.236 0 0 0 3.459-12.549h3.673c-.613 4.194-1.592 8.356-3.184 12.55h-3.948zM226.85 6.524h-3.735v-4.01h3.735v4.01zm0 19.253h8.141v3.183h-20.048l-.245-3.183h8.417V19.44h-6.55l-.275-3.183h6.825v-5.724h-7.162l-.276-3.183h18.764v3.183h-7.591v5.724h6.856v3.183h-6.856v6.336zM186.844 6.83h-3.795l-1.653-4.316h3.734l1.714 4.315zm10.499.948h5.479v3.184H192.17v4.346h11.448v3.183H192.69c1.408 3.122 4.928 6.091 11.571 7.959l-.98 3.611c-6.55-1.897-10.529-4.744-12.764-8.264-2.142 3.459-6.427 6.428-13.223 8.234l-.979-3.581c7.254-2.051 10.59-5.05 11.692-7.959h-10.835l-.276-3.183h11.54v-4.346h-10.499l-.275-3.184h15.824l1.898-5.264h3.918l-1.959 5.264zM163.153 21.032l-2.234-7.713h3.55l2.235 7.713h-3.551zm1.439-15.213h5.632c1.53 0 2.295.398 2.357 2.235.183 4.713.183 13.62-.245 18.15-.184 1.96-1.194 3.092-3.03 3.337-1.714.245-3.673.122-5.479-.214l-.796-3.03c1.591.336 3.275.459 4.867.244.673-.06 1.01-.398 1.071-1.071.275-4.346.337-11.509.306-16.161-.031-.337-.184-.429-.429-.429h-5.356c-.979 2.112-2.387 4.163-4.224 6.214l-1.194-4.132c2.02-2.296 3.337-5.602 3.612-8.418h3.459c-.092 1.102-.245 2.204-.551 3.275zm-10.193 12.887h-4.346v6.58c0 .276.184.46.459.46h3.428c.276 0 .459-.184.459-.46v-6.58zm0-3V9.86c0-.276-.183-.46-.459-.46h-3.428c-.275 0-.459.184-.459.46v5.846h4.346zm-1.163-9.427h2.204c1.592 0 2.449.857 2.449 2.448V26.42c0 1.592-.857 2.449-2.449 2.449h-6.428c-1.591 0-2.449-.857-2.449-2.45V8.729c0-1.592.858-2.45 2.449-2.45h.918l.704-3.764h3.337l-.735 3.765zM141.483 9.156h-3.612L136.004 3.4h3.55l1.929 5.755zm-4.653 14.11c.214.49.429.98.673 1.408.949 1.714 2.449 2.173 5.541.919l-.704 3.887c-4.439 1.438-6.275.214-7.806-2.357a9.06 9.06 0 0 1-.734-1.439c-1.99 1.316-4.224 2.327-6.673 3.03l-1.041-3.428c2.602-.734 4.775-1.775 6.551-3.06-.612-2.357-1.102-5.326-1.47-8.969h-6.335v3.398l4.254-.735v3.214l-4.254.765v6.06c0 2.572-1.255 3.919-3.643 4.133-1.408.122-2.724 0-3.765-.153l-.826-3.245c1.132.215 2.326.337 3.52.215.643-.062 1.041-.49 1.041-1.347v-4.99l-5.265.95-.674-3.214 5.939-1.01v-4.04h-5.51l-.337-3.184h5.847V7.197h-4.408l-.306-3.245h5.111c2.143 0 4.622-.275 6.642-.887V6.4c-.979.275-2.142.46-3.366.612v3.061h6.029c-.03-.582-.091-1.163-.122-1.775l-.398-5.785h3.673l.337 5.662c.03.643.092 1.286.122 1.898h8.111v3.183h-7.835c.214 2.388.52 4.438.918 6.244 1.347-1.591 2.296-3.336 2.847-5.08h3.764c-1.163 3.55-3.03 6.488-5.448 8.845zM57.768 26.633c0 1.653-.826 2.449-2.479 2.449h-6.244c-1.653 0-2.48-.796-2.48-2.449V7.625c0-1.653.827-2.448 2.48-2.448h6.244c1.653 0 2.48.795 2.48 2.448v19.008zm-7.59-1.194c0 .306.153.46.459.46h3.06c.306 0 .46-.154.46-.46V8.82c0-.306-.153-.46-.46-.46h-3.06c-.306 0-.46.154-.46.46v16.62zM37.965 6.34h3.979c1.653 0 2.357.797 2.448 2.45.276 5.478.276 12.304 0 17.875-.091 1.928-1.255 3.06-3.213 3.152-1.164.062-2.48 0-3.612-.275l-.857-3.183c1.01.245 2.112.367 3.122.275.643-.061.949-.398.98-1.01.336-4.744.244-11.019 0-15.64-.031-.338-.154-.46-.46-.46h-2.387c-.03 9.274-1.102 14.876-4.133 20.538h-3.948C33.098 23.91 34.2 19.042 34.23 9.523h-2.877l-.275-3.183h3.152V2.514h3.735V6.34zM25.384 26.633l-1.407-6.58h3.03l1.438 6.58h-3.06zm-4.59 0l-1.378-6.948h3.06l1.44 6.948h-3.123zm-13.132-.428l2.326-6.397h3.122l-2.142 6.397H7.662zm11.111.826c0 1.837-1.04 2.786-2.663 2.847-1.071.03-3-.061-4.132-.398l-.46-2.847c.797.215 2.174.276 2.756.276.55 0 .918-.337.918-.857v-10.07h3.581v11.05zM.653 13.563V10.35l6.09 1.928v3.214l-6.09-1.929zm.949-7.131V3.218L7.6 5.024v3.214l-6-1.806zM.01 29.663c1.745-3.764 2.816-7.346 3.428-10.896H7.05a45.04 45.04 0 0 1-3.183 10.896H.01zm21.793-17.66c1.53 1.836 3.887 3.244 6.642 4.315l-1.193 3.55c-4.347-1.774-7.683-4.621-9.152-7.866h-.643c-1.653 3.245-4.53 5.632-9.734 8.05l-.98-3.55c2.878-1.163 5.082-2.54 6.612-4.5H8.213l-.306-3.06h7.07c.276-.735.46-1.5.582-2.357H9.744l-.307-3.061h16.927v3.06H19.2a24.261 24.261 0 0 1-.55 2.358h9.213v3.06h-6.06z",fill:"#fff"}),(0,d.jsx)("g",{filter:"url(#title_svg__filter0_b_1538_13540)",children:(0,d.jsx)("rect",{x:75.102,y:".5",width:32,height:32,rx:8,fill:"#fff",fillOpacity:".16"})}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M90.402 9.774a2.8 2.8 0 1 0 0 5.6 2.8 2.8 0 0 0 0-5.6zm-5.2 2.8a5.2 5.2 0 1 1 4.66 5.172 1.202 1.202 0 0 1-.261.028c-1.361 0-2.655.67-3.634 1.756a6.205 6.205 0 0 0-1.416 2.644H88a1.2 1.2 0 1 1 0 2.4h-4.8a1.2 1.2 0 0 1-1.2-1.2c0-1.995.85-3.973 2.184-5.451a8.043 8.043 0 0 1 2.39-1.828 5.181 5.181 0 0 1-1.373-3.521zm15.682 7.214a1.2 1.2 0 0 0-1.764-1.627l-3.952 4.282-1.917-1.917a1.2 1.2 0 0 0-1.697 1.697l2.8 2.8a1.2 1.2 0 0 0 1.73-.035l4.8-5.2z",fill:"#fff"}),(0,d.jsx)("defs",{children:(0,d.jsxs)("filter",{id:"title_svg__filter0_b_1538_13540",x:48.435,y:-26.167,width:85.333,height:85.333,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,d.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,d.jsx)("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:13.333}),(0,d.jsx)("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_1538_13540"}),(0,d.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_backgroundBlur_1538_13540",result:"shape"})]})})]})));var eE={container:"wRLw4zjS",content:"cOTNKSVf",title:"RmiLPVH_",subTitle:"Mfg6AEER",list:"CD1qXhdJ",buttons:"fyifysyL",btn:"RoOQc4b5",enter:"rgoAmOZm",noLike:"eVCcJNtL",video:"mPBiHxOW",followItem:"rhk6uiQ8",avatarWrap:"y9YA3cdO",avatarImgWrap:"XIeJfmNI",animation:"dGm8MlJ8",avatarImg:"hu_GkQnO",liveBorder:"o2_Jz8W7",liveBorderAnimation:"VtEjHq4J",liveImg:"WKAtd0uX",userName:"fLxz7DX_",userLabel:"pY4zEYs0",opacity90:"kuDAf71S",opacity50:"Z_V3YLKy",opacity20:"nhQ_jfCc",hide:"j6hneaaD",showAnimation:"ifkXkKIJ"},ex=e=>{var t;let{infoList:l,isActive:i,swiper:n,onPrev:o,deleteCurrentSwiper:a}=e,{isFullScreen:r=!1,isCssFullScreen:s=!1}=null!==(t=(0,u.useContext)(I.C))&&void 0!==t?t:{},{onAddFollowWidget:c,onCloseGuide:v,onShowGuide:f,onDislikeGuide:m}=(0,eI.e)({type:"follow"}),[_,h]=(0,u.useState)(!1),g=(0,u.useRef)(null),p=(0,u.useRef)(null),w=(0,u.useRef)(),A=(0,ep.D)(()=>{clearTimeout(g.current),a(),null==o||o(),v()},400,{leading:!0,trailing:!1}),y=(0,ep.D)(()=>{clearTimeout(g.current),a(),v()},400,{leading:!0,trailing:!1}),L=()=>{if(i&&w.current){var e;w.current.muted=!!Number(localStorage.getItem(B.LocalStorageKeys.PLAYER_IS_MUTE)),w.current.volume=Number(null!==(e=localStorage.getItem(B.LocalStorageKeys.PLAYER_VOLUME))&&void 0!==e?e:.3),w.current.play()}};return(0,u.useEffect)(()=>{var e,t,l;i&&f(),i&&w.current?(w.current.muted=!!Number(localStorage.getItem(B.LocalStorageKeys.PLAYER_IS_MUTE)),w.current.volume=Number(null!==(t=localStorage.getItem(B.LocalStorageKeys.PLAYER_VOLUME))&&void 0!==t?t:.3),null===(e=w.current)||void 0===e||e.play()):null===(l=w.current)||void 0===l||l.pause()},[i]),(0,u.useEffect)(()=>{if(i){(0,eA.o)({pauseCustomShortcut:!0,pauseGlobalShortcut:!0,pausePlayControlShortcut:!0},"followWidgetCard"),g.current=setTimeout(()=>{y()},15e3),p.current=setTimeout(()=>{h(!0)},200);try{null==n||n.on("changeNext",y),null==n||n.on("changePrev",A)}catch(e){}return()=>{try{var e,t;null==n||null===(e=n.off)||void 0===e||e.call(n,"changeNext",y),null==n||null===(t=n.off)||void 0===t||t.call(n,"changePrev",A)}catch(e){}clearTimeout(g.current),clearTimeout(p.current),(0,eA.m)("followWidgetCard")}}},[A,y,i]),(0,u.useEffect)(()=>{let e=Z.listen(Z.EVENT.videoPause,()=>{var e;null===(e=w.current)||void 0===e||e.pause()});return()=>{e()}},[]),(0,d.jsxs)("div",{className:eg()(eE.container),children:[(0,d.jsx)("video",{loop:!0,ref:e=>{w.current=e,L()},src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/ild_jw_upfbvk_lm/ljhwZthlaukjlkulzlp/follow/follow-widget-card.mp4",className:eE.video}),(0,d.jsxs)("div",{className:eg()(eE.content,_?eE.showAnimation:eE.hide),children:[(0,d.jsx)("div",{className:eg()(eE.title),children:(0,d.jsx)(ew.Z,{src:eL,width:373,height:33,viewBox:"0 0 373 33"})}),(0,d.jsx)("div",{className:eg()(eE.subTitle),children:"便捷查看关注的人开播、作品更新等动态"}),(0,d.jsx)("div",{className:eg()(eE.list),children:(l||[]).map((e,t)=>(0,d.jsxs)("div",{className:eg()(eE.followItem,2===t&&eE.opacity90,3===t&&eE.opacity50,4===t&&eE.opacity20),children:[(0,d.jsxs)("div",{className:eg()(eE.avatarWrap),children:[e.isLive&&(0,d.jsx)("div",{className:eg()(eE.liveBorder)}),e.isLive&&(0,d.jsx)("div",{className:eg()(eE.liveBorder,eE.liveBorderAnimation)}),(0,d.jsxs)("div",{className:eg()(eE.avatarImgWrap,e.isLive&&eE.animation),children:[e.isLive&&(0,d.jsx)("img",{className:eg()(eE.liveImg),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAt9SURBVHgB7d1NbFTXFcDxc9+MUUswoVKTRZDKkEVisNO4EskWJ130a5FJ43G6aAQhm0KqQio12SSN3aaLfKgJVSCrBtOwqIgRplLSdBPMsiFSjQLIdIORSquSSKEhZIFn5vae92Y8z4PNeDzz5r03/v8ky55PBrjn3nPPvffZCNrG5vIb5GuyQXoygyXxNhhrc541m/zHjOTctw1i3Jd/h/99Q91bXHWPX608PqvfjPteNvaSJ+ZzMeVLUvJm5au5WTM7eVXQMiNomu3L57SRi/U2uYY66Br3oLs7Jzc36ChpAEzbcvmM53kX3ac6Y85OTAmaQgA04PfqvZmhckmGjOfd7+7Sxt7Jht4sDYpTXkamZK40bWYmZwVLIgDq+A1+XXawXLZ5k/EecT18TtJt2qVR0+KVT5hPjk0KFiAApNroe3ZYkbwkv4dvkZl0ATEppRunGB1WcQBooy/19uQ9KzvczSFZnaaMNePm3NHDskqtugCwA8NDfnrjedrwu7inb8pVf1Qw9vBqm0ivigCoS3GGBEuzctGIGVsto0JXB0DQ8NfstWL3Cb19c9z6g2scU1KaG+vmuUJXBoDt+0mu7M3tI81pD5cejXdrIHRVAPgNP1McNcbskHb57R4x331A5N+fily+IvaFgyJffCWRcv8r5o8vimy8w79p/35e5NcHpW1614rcdadIX06M+5J7viX2mdca/r26MRCy0gVqqU5pn8tf29rjG22EvbeJ3KtfOZG9r0n0XARsdA30rjsqn+FTl5E0oI26d13o59uCAHI/G32vde6+Lbla46//E39WEPvKrdN+t+K9U7I9O21/oWsCIfUBYAdGXgxyfBtNqqMNqUpHgSR4sD8YIdrppz8U+cspkZnZhk/1AyHTM1TqH9mfOXf0DUmx1AaAljOtNYdc4881fLLruc1zK8yKNEWo0t707ZU1PLtrTNrmtEuJrl1fGJzN0tdfdgE9c0nshYvBe16YXf7rjeSM2NfL/YVfGGufMecnTkgKpS4ANN2x69Zow88vewaz3jWUB/qlZb1tep9WWfe3P/K+mN2F2n3aoK+Fcnht3A9srb3k4LtuBLviN3j/ue0azYxstsZMpjUtSlUA2IHHXZ5fHo0s3UkT16D9Rl2leb028CqX95sP3gx+dgEjJ6ZqjV4n2ZWRzJ5wac+HHy0MnhWopEXbbf9IqtYQUhEAWt2x2ZLr9ctDshKueiOTp6RpWzYFE9+qD09HXwFqlsvdzcOuSrWtP0izPj7X+DUaLJWRzGzbKlb/fT4+Ly3T0UDsuBsNhtIyGiQ+AIpbHsvbTOmQtFLPdz2ffeGANMvs/9WCAPDfI6IAMH87MF/1uYlOej85GnyG41O1kqimgDpHqTbm3Y+JfapBAGjvv3u4dltz/3Y0/pA0jQaeJJSf69838rqX8Y5LXItZ4QapE8Wk9f5aG31rIsjplQbC+rW3fo32/o8MVV5vg3WNKPhzAzca3DfyezuYT2zKmsgRwE95MqWT7j8oJxHxe/e+Tbd+Urhefu9m10u/KcthXz4cpEtR0F5fAzM8GdfqjUuBxLhVkGd3itVePVwhcveLpkkuzzfhlO6flxa+jwZSmz+3dRUimevJ2778w0lMiRK3EuyGzR2u59DacqS9hj8JjKiiY58/GEw6m6F1+FCjNU+EbrvJra3OYbSxu6qWcSvUbacr3d//uUTkc2PNM0lLiRI1AlQWtUZlNXJlzXnaY+eHagHwL1e9eStU8dHH0ucbrmM75P6Pc+bs0TYuirQmEQGwoLYfB9er2pfHZcVcQ/VTqk7RGv9iVa31X3epzoPBz/ULZeHbp91E+fJnN7/+i+sSMaMdXHlg5H6TvbHLTMd/ZYvYA2A+35fo8v2GdHJ7uoVKyFLVm6i4BmxP11V7Nt5RC0Kd3O57rbZdQm/vfTV4XIPAfV4/TYtta4d91M716NHTuyVmsQbAfOM3MR88155zkQ1iy7axwwFQz02Aze/2zAeiffVwMEqEudu6TuDPfXSRTMuuupgWTq0664wkQGwBcGNrYdB62vMnYL9+ExWeWGkD152d1d5f9ybtHhHRCXOFvzr8zvvB8+rNzNaCQEeCPQUxriTqB0Gzk/bWuOmAHZcEiG0dIGskvvp+2ty+1t/3YyZecb391krDLwS9eH3jb9SjaxAUnq1tm9DU6aU9Yj44EKwP9K6VyOlps4RsnottBLB6AFtMm/f0rpBOEHWTWCtCG8/azo1Q/pdUyqN7Cjc9xb4yHvT8VTqhrU6UdS/Ql6EJrqZDT475DX++FFwJBJn5gQuQ5yRK/lHLhIgtALxs8Q1b7NkrSRgFdEvwrlFZMZea+L1xO2gPrJWcpXpinazrolaVC16/59cA3rZwXcOG05p7Nt/0VvbghBhdTqgGgYsTe+SvEjE3I5c/SELEFgBaAisNDO9PzCgQJ23sLv3wN7Xp3p7F9vlrQ9e1Am3sz+10ufv24HlagnW3W6XBYrZt6cBcwE659GdaEiLWKlBiRoG+TSs+6OJb38LBFPXEjxbu7a83czHY6VndsqzVm5On23cqTFMkVxZteOyyDX+SsR4rwVWJGQXiPuiiac3uWzyu6xTh/frV01xhi23Vzm+v/Vy/cLbxm53/O+vkl60QCyVqLhAXPYdb2dFZPaBiXnp6+QtsutClK9nhhS3dGFcNAH/XZ90cRbdYdzYArF5wSxIm9gDwR4H+4TFjzOsSF9cD2+dbmMRqBeXtUVkxze9dVcYvTWpPb7rwck36Cz9KN1ZwKilaidgLlDk38Ua5v7A31hXhuK/40MyB9Hqh7c61+xY8oXYGoEpToA5yyf+fvARuh07MbtCSsU9mxJyUOGhjqG8gzehtcRLcBresBOkpsJci2D69XFYueqXiuCRQYgKg5+zElEuFDrf1qm7Ldded8TaQ7ubn/kk9H5yo8wBeT3GfmxA/ImyRaJq/RlC3ndmEVowXXEFCKle8a2XUW/YHS17lJyxRAaAT4rmB4Uc7ngqFT1ythC5GhfbkdJzW8d9576Yq0PyWCX28bo+Q1SpQ9AFgi1Z+LAmWuDPBfio08JhbG/D2Sqfo4ZBWtgVruTLOAEgoK+X9a84fS8yq72ISeSg+c/bYvvJAQYvYg7JaNbMrU2v+eunHpa5aoY/XnyFeH/HEXSe+10uJq/vXS2zBuZ2HZarX1ImVXpvoe08v+bBfxVm3Vqx7ntGdpeFFqo/OiX2qri2Fr/zWKl0o+/bj0kbWFOfu5sJYLTAzf551QfCQzZb+IatgUqxpuskPLdoj2QstbtXuLOv8Mok1/8Uk+spwGgQ3thYeynqSjJNjUVpqIezyf0WOvCeN+FshrjVxqF1PwUUwb3FjyW90YVNSIvGXRlxz/t1pNxJ8p5V0qKVtDu3S6OKzupmtrhJl/3MlqO40eq0OH/r6ZlazH/ys7RN31/jHMmcnRiVFUrPpJDEH6LGoNDZ+lbpdV6WB4VEO0SSKn/OnKe0JS+W2w+By6cXj7uOv3jJpErhSZ8nYXT0p/uXaqd53W9xa2OkZeZG0KA7muPnyxi4zG//V3VrRFRvP5waGhzwrO11qtJ1giJqdKomMpbnXD+u6kxeaHhWzxVxWzP3lcnmzZ7zbralcdtGY4Lv1S6psuLsVI7Muu79qrJku2/L/bEamMtdKU2nv8et14dGjlbF9+dxyn1vMZpf93KSzZXO1pzw336i78bfBAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoDP+D6+TMQ7iAjHrAAAAAElFTkSuQmCC"}),e.avatarImg?(0,d.jsx)("img",{className:eg()(eE.avatarImg),src:e.avatarImg}):null,e.avatarSvg?(0,d.jsx)(ew.Z,{className:eg()(eE.avatarImg),src:e.avatarSvg,width:32,height:32,viewBox:"0 0 32 32"}):null]})]}),(0,d.jsx)("div",{className:eg()(eE.userName),children:e.userName}),(0,d.jsx)("div",{className:eg()(eE.userLabel),children:e.userLabel})]},e.userName))}),(0,d.jsxs)("div",{className:eE.buttons,children:[(0,d.jsx)("div",{className:eg()(eE.btn,eE.enter),onClick:()=>{var e;null===(e=w.current)||void 0===e||e.pause(),a(),c()},children:"立即添加"}),(0,d.jsx)("div",{className:eg()(eE.btn,eE.noLike),onClick:()=>{var e;null===(e=w.current)||void 0===e||e.pause(),a(),m()},children:"不感兴趣"})]})]}),(r||s)&&(0,d.jsx)(ey.I,{playPrevFunc:A,playNextFunc:y,className:eg()("filter-bg")})]})};let eS=(i=null,()=>{try{if(i)return i;return(i=Promise.all([l.e("66135"),l.e("58195"),l.e("92686"),l.e("3556"),l.e("29977"),l.e("8512"),l.e("70500"),l.e("64363"),l.e("29146"),l.e("21083"),l.e("72773")]).then(l.bind(l,803640)).then(e=>({default:e.LiveSliderCard}))).catch(()=>i=null),i}catch(e){}});let eC=(n=null,()=>{try{if(n)return n;return(n=Promise.all([l.e("66135"),l.e("25244"),l.e("1709"),l.e("46362"),l.e("67239"),l.e("58195"),l.e("3556"),l.e("264"),l.e("31689"),l.e("29977"),l.e("59765"),l.e("25851"),l.e("48755"),l.e("10435"),l.e("14059")]).then(l.bind(l,2744)).then(e=>({default:e.LiveSliderCard}))).catch(()=>n=null),n}catch(e){}});var eN=l("557546"),eb=l("623527");let ek=e=>{let{awemeInfo:t,isActive:l}=e;(0,u.useEffect)(()=>{if(l){var e,i;let{item_id:l,task_id:n,is_ad:o,object_type:a,expose_limit:r}=null!==(i=null==t?void 0:null===(e=t.webRawData)||void 0===e?void 0:e.insertInfo)&&void 0!==i?i:{};l&&eb.oe.event.error({name:eb.Mo.AdminInsertExpose,report:{itemId:l,taskId:n,isAd:o,objectType:a,exposeLimit:r}})}},[t,l])},eT=(0,u.lazy)(()=>Promise.all([l.e("66135"),l.e("25244"),l.e("1709"),l.e("46362"),l.e("67239"),l.e("58195"),l.e("3556"),l.e("264"),l.e("31689"),l.e("29977"),l.e("59765"),l.e("25851"),l.e("48755"),l.e("10435"),l.e("84803")]).then(l.bind(l,85016)).then(e=>({default:e.LiveSmallWindow}))),eR=(0,u.lazy)(eC),eP=(0,u.lazy)(eS),eD=(0,u.lazy)(()=>Promise.all([l.e("66135"),l.e("25244"),l.e("1709"),l.e("46362"),l.e("67239"),l.e("264"),l.e("31689"),l.e("29977"),l.e("59765"),l.e("45776"),l.e("37692"),l.e("6091")]).then(l.bind(l,969221))),ej=e=>{let{isNewProject:t,children:l}=e,i=(0,r._)(e,["isNewProject","children"]);return t?(0,d.jsx)(v.qd.Provider,(0,a._)((0,o._)({},i),{children:l})):(0,d.jsx)(A.qd.Provider,(0,a._)((0,o._)({},i),{children:l}))},eM=(0,u.memo)(e=>{let t=(0,ed._)(),l=(0,eu.useUserInfoContext)(),{from:i,videoRef:n,InnerPlayer:r,item:u}=e;return(0,s.C)(x.w3.components.video_player),(0,d.jsx)(L.Z,(0,a._)((0,o._)({},e),{isMultiInstanceScene:!0,ref:n,InnerPlayer:r,LiveSliderCard:eT,slardarInstance:N.oe,customProps:{userContext:l,abtestData:t,logParams:{video_mode:"landscape",enter_from:ei.yW.get(i),tab_name:ei.yW.get(i)},showRelatedCardEntry:!1,showRelatedCardGuide:!1,showTopicAndMusicCard:!1,showMixCard:!1,showMixCardEntry:!1,tab:ei.yW.get(i)}}))}),eV=(0,u.memo)(e=>{var t,l,i,n,r,v,_;let h=null!==(_=null==e?void 0:null===(n=e.item)||void 0===n?void 0:null===(i=n.cellRoom)||void 0===i?void 0:null===(l=i.rawdata)||void 0===l?void 0:null===(t=l.owner)||void 0===t?void 0:t.web_rid)&&void 0!==_?_:null,g=(0,ed._)(),{Currency:y}=p,{rechargeConfig:I}=(0,w.K)(),L=(0,u.useMemo)(()=>(0,A.Lj)(null!=h?h:"-1")(),[h]);(0,s.C)(x.w3.components.live_player);let E=(0,u.useMemo)(()=>{var t;return(0,a._)((0,o._)({},e),{loggerOptions:(0,o._)({scene:f.C.liveSlider},null!==(t=null==e?void 0:e.loggerOptions)&&void 0!==t?t:{})})},[e]),S=(null==g?void 0:null===(r=g.previewEnterRoom)||void 0===r?void 0:r.value)===m.PreviewEnterRoomLib.Alpha||(null==g?void 0:null===(v=g.previewEnterRoom)||void 0===v?void 0:v.value)===m.PreviewEnterRoomLib.Beta,N=(0,c.getInNewProjectPreviewABWithoutStoreCheck)(g),b="recommend"===e.tab,k=S&&b;return(0,d.jsx)(y.Provider,{value:I,children:(0,d.jsxs)(ej,{value:L,isNewProject:N,children:[(0,d.jsx)(C.p,{isActive:null==e?void 0:e.isActive}),(0,d.jsx)(u.Suspense,{children:(0,d.jsx)(e_,(0,a._)((0,o._)({},E),{useLivePreviewEnterRoom:k,LiveChildComponent:N?eP:k?eD:eR}))})]},h)})}),eF=e=>{(0,ed._)();let{fullScreenTarget:t}=(0,u.useContext)(I.C),{changeSplashAdStatus:l}=(0,b.K)(e=>{let{changeSplashAdStatus:t}=e;return{changeSplashAdStatus:t}}),{item:i,isActive:n,isFirst:r,isNext:d}=e;if((0,s.C)(x.w3.components.mixplayer),n){let e=!!(n&&(null==i?void 0:i.awemeType)===_.e.LiveCard);y.Le.setConfig(y.gI.HasLiveContent,e)}(0,u.useLayoutEffect)(()=>{r&&(i.awemeType!==_.e.Normal||!(0,h.p)(i))&&(null==l||l(g.QB.Normal))},[r,i]),(0,eN.I)({isActive:n,awemeInfo:i}),ek({isActive:n,awemeInfo:i}),(0,k.u)({isActive:n,awemeInfo:i,index:null==e?void 0:e.index}),(0,T.J)({index:null==e?void 0:e.index});let c=(0,a._)((0,o._)({},e),{fullScreenTarget:t,__is_replaced_live__:null==i?void 0:i.__is_replaced_live__});return(null==i?void 0:i.awemeType)===_.e.FollowWidgetCard?u.createElement(ex,{infoList:i.infoList,isActive:e.isActive,swiper:e.swiper,deleteCurrentSwiper:e.deleteCurrentSwiper,onNext:e.playNextFunc,onPrev:e.playPrevFunc}):(null==i?void 0:i.awemeType)===_.e.LiveCard?(n&&(0,E.AN)(),d&&(window.nextPlayer=null),u.createElement(eV,c)):u.createElement(eM,c)},ez=e=>(0,d.jsx)(S.k,{componentName:"MixPlayer",children:(0,d.jsx)(eF,(0,o._)({},e))})},647291:function(e,t,l){l.d(t,{j4:function(){return o},kV:function(){return r},mB:function(){return a},x_:function(){return i},yW:function(){return n}}),l(874386);var i={recommend:"recommend",follow:"follow",friend:"friend",topic:"topic"};let n=new Map([["recommend","recommend"],["follow","follow"],["friend","friend"],["topic","topic"]]),o=new Map([["recommend","web_homepage_hot"],["follow","web_homepage_follow"],["friend","web_homepage_friend"],["topic","web_homepage_topic"]]),a=new Map([["recommend","RECOMMEND"],["follow","FOLLOW"],["friend","FRIEND"],["topic","TOPIC"]]);var r={NORMAL:"normal",HIGHLIGHT:"highlight",SMALL_HIGHLIGHT:"small_highlight"}},517509:function(e,t,l){l.d(t,{a:function(){return i}});let i=e=>e.defaultStream},679105:function(e,t,l){l.d(t,{b:function(){return D}});var i=l("520739");l("874386"),l("338172"),l("268917"),l("413806"),l("826893");var n=l("729532"),o=l("88648"),a=l("567754"),r=l("439837"),d=l.n(r),u=l("645260"),s=l.n(u),c=l("987475"),v=l("597087"),f=l("832052"),m=l("509090"),_=l("158166"),h=l("713503"),g=l("983253"),p=l("725887"),w=l("459132"),A=l("167951"),y=l("565024"),I=l("797460"),L=l("847191"),E=l("828782"),x=l("684922"),S=l("905754"),C=l("794155"),N=l("109050"),b=l("517509"),k=l("2165");l("981168"),l("897860");let T=()=>{let e=p.Le.getConfig(p.gI.itemIdToVideoPreferData)||{},t={fsn:[],min:[],show:[],skip:[],head:[]};return Object.keys(e).forEach(l=>{Object.keys(e[l].interaction).forEach(i=>{"dislike"===i&&t.skip.push({gid:l,user_act:R(e[l].interaction),s_ts:String(e[l].s_ts||0),p_t_a:String(e[l].p_t_a||0),aid:String(e[l].aid),v_t:String(e[l].v_t),timestamp:String(e[l].interaction.dislike||0)}),"follow"===i&&t.head.push({gid:l,user_act:R(e[l].interaction),s_ts:String(e[l].s_ts||0),p_t_a:String(e[l].p_t_a||0),aid:String(e[l].aid),v_t:String(e[l].v_t),timestamp:String(e[l].interaction.follow||0)}),e[l].interaction[i]&&t[i]&&t[i].push({gid:l,user_act:R(e[l].interaction),s_ts:String(e[l].s_ts||0),p_t_a:String(e[l].p_t_a||0),aid:String(e[l].aid),v_t:String(e[l].v_t),timestamp:String(e[l].interaction[i]||0)})})}),Object.keys(t).forEach(e=>{t[e].sort((e,t)=>{let l=Number(null==e?void 0:e.timestamp)||0;return(Number(null==t?void 0:t.timestamp)||0)-l})}),t},R=e=>String(parseInt([Number(!!e.dislike)||0,Number(!!e.clickComment)||0,Number(!!e.fav)||0,Number(!!e.click)||0,Number(!!e.head)||0,Number(!!e.follow)||0,Number(!!e.share)||0,Number(!!e.comment)||0,Number(!!e.lk)||0,Number(!!e.fsn)||0].join(""),2));var P=l("487330");function D(e){let{abTestData:t,isLogin:l,refCancelTabFeedFunc:r,retryFuncRef:u,ffDanmakuStatus:R,danmakuSwitchStatus:D,initialRecommendAwemeList:j,initialRecommendAwemeListPromise:M}=e,[V,F]=(0,o.useState)(0),[z,W]=(0,o.useState)(!1),O=(0,o.useRef)((null==j?void 0:j.length)?2:1),U=(0,o.useRef)([]),q=(0,o.useRef)(""),{isMainland:B}=(0,P.Iq)(e=>{let{isMainland:t}=e;return{isMainland:t}}),H=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;O.current=e},[]);return{fetchSlideList:(0,o.useCallback)(async e=>{var o,R,P,j,M,z,H,G,Y,K,J,X,Z,Q,$;let ee={},{mode:et,pull_type:el,refresh_type:ei,reqCount:en}=e,eo=a.parse((0,g.ht)()),ea=(null===(o=p.Le.getConfig(p.gI.FreeAdStatus))||void 0===o?void 0:o.status)||0,er=p.Le.getConfig(p.gI.RecommendReqCount)||0,ed=(0,E.DT)(),eu=8===el,es={refreshIndex:eu?1:w.B.prefetchFromClientUsed?++O.current:O.current++,count:eu?1:10,tagId:"",cancelCb:r,awemePcRecRawData:{},globalwid:null===(R=(0,A.Es)())||void 0===R?void 0:R.globalwid,pullType:el||("loadmore"===et?2:0),refresh_type:ei,minWindow:p.Le.getConfig(p.gI.IsMiniWin)||!1,plugBlock:(null===(P=p.Le.getConfig(p.gI.AdBlock))||void 0===P?void 0:P.needFilterAd)||!1,launchLiveFilters:null==U?void 0:U.current,freeRight:Number(1===ea||2===ea),useProtobuf:!1,usePassThrough:!1,viewCount:er,reqCount:en},ec=p.Le.getConfig(p.gI.AwemePcRecRawData)||{},ev={};ev=T(),ec.newVideoPrefer=ev;let ef=(0,C.Sp)();ec.is_client=(0,E.DT)(),ec.ff_danmaku_status=1;let em=null===(j=p.Le.getConfig(p.gI.DanmakuSetting))||void 0===j?void 0:j.isOpen;ec.danmaku_switch_status=(null!=em?em:D)?1:0,ec.is_dash_user=y.Q.getItem({sKey:c.CookieKeys.isDashUser})||0,ec=(0,i._)({},ec,ef),(null==t?void 0:t.slideSmooth)&&(null==ec?void 0:ec.newVideoPrefer)&&delete ec.newVideoPrefer,es.awemePcRecRawData=ec,es.awemePcRecRawData.related_recommend=1,y.Q.getItem({sKey:c.CookieKeys.RechargeFlag})&&l?es.awemePcRecRawData.top_up_user=1:es.awemePcRecRawData.top_up_user=void 0,ed&&(es.awemePcRecRawData.min_window=es.minWindow?1:0),!B&&!(null===(M=navigator)||void 0===M?void 0:M.language.startsWith("zh"))&&(null==t?void 0:t.i18nAb)&&(es.needTranslation=1),n.z.markStart("recommend_csr_fetch_data",{once:!0}),(null==t?void 0:null===(z=t.tabFeedTimeout)||void 0===z?void 0:z.csr)&&(es.options={options:{timeout:null==t?void 0:null===(Y=t.tabFeedTimeout)||void 0===Y?void 0:Y.csr}}),ee=await (0,N.NN)(es),n.z.markEnd("recommend_csr_fetch_data",{once:!0}),p.Le.setConfig(p.gI.AwemePcRecRawData,{videoPrefer:{fsn:[],like:[],halfMin:[],min:[]},seo_info:document.referrer,ug_info:(0,g.Rs)("ug_source")});let{statusCode:e_,hasMore:eh,awemeList:eg=[],logPb:ep}=ee;if(0===eg.length?(k.Z.sendLog("feedServerError",{status_code:V,log_id:ep,refresh_index:O.current}),e_!==v.ERROR_CODE.ERROR_CANCEL&&W(!0)):(!eu&&p.Le.setConfig(p.gI.RecommendReqCount,er+eg.length),W(!1)),e_===v.ERROR_CODE.ERROR_CANCEL)return{cancel:!0};F(e_);let ew=(0,S._)(eg,l);if("refresh"===et&&eo.vid&&eo.vid!==(null===(H=eg[0])||void 0===H?void 0:H.awemeId)&&(m.F.info("视频无法查看，请浏览其他精彩内容"),(0,g.U$)(["vid","previous_page"])),q.current=ep,(null==ew?void 0:ew.length)<3&&"refresh"===et&&!(0,I.B)()&&(null===(K=u.current)||void 0===K||K.call(u)),1===es.refreshIndex&&eo.live_insert_type){let e=[];null==ew||ew.forEach(t=>{var l,i,n,o;(null==t?void 0:t.awemeType)===f.e.LiveCard&&(null==t?void 0:null===(i=t.cellRoom)||void 0===i?void 0:null===(l=i.rawdata)||void 0===l?void 0:l.id_str)&&e.push(null==t?void 0:null===(o=t.cellRoom)||void 0===o?void 0:null===(n=o.rawdata)||void 0===n?void 0:n.id_str)});let t=(0,L.$o)(c.LocalStorageKeys.LiveLandingIds),l=d()().format("YYYYMMDD");(null==t?void 0:t.date)===l?(0,L.qQ)(c.LocalStorageKeys.LiveLandingIds,{date:null==t?void 0:t.date,ids:(J=[...(null===(X=t.ids)||void 0===X?void 0:X.split(","))||[],...e],J.join(","))}):(0,L.qQ)(c.LocalStorageKeys.LiveLandingIds,{date:l,ids:null==e?void 0:e.join(",")}),(0,g.U$)(["live_insert_type"])}if((null==t?void 0:null===(G=t.previewEnterRoom)||void 0===G?void 0:G.value)!==1&&1!==O.current)for(let e=0;e<ew.length;e++){let l=ew[e];if(l.awemeType===f.e.LiveCard&&(null==l?void 0:null===(Z=l.cellRoom)||void 0===Z?void 0:Z.rawdata)){let e,i;let n=null==l?void 0:null===(Q=l.cellRoom)||void 0===Q?void 0:Q.rawdata,o=(0,_.O)({room:n,abtestData:t,isFeedH265:(0,_.W)({tab:"recommend"})}),a=null==n?void 0:n.stream_url;try{let{options:l,stream_data:n}=(null==a?void 0:null===($=a.live_core_sdk_data)||void 0===$?void 0:$.pull_data)||{},o=s()(l,"default_quality",{}),r=JSON.parse(n),d=null==r?void 0:r.data,u=(0,b.a)({abtestData:t,streamUrl:a,streamData:d,defaultStream:null==o?void 0:o.sdk_key});e=(0,h.f)(d[u].main.flv),i=(0,h.f)(d[u].main.hls)}catch(e){}let r=(0,E.tq)()?i:e,d=(null==o?void 0:o.url)||r,u=await (0,x.J)(d);(null==u?void 0:u.code)===0&&(null==u?void 0:u.url)&&(null==u?void 0:u.url)!==d&&(l.cellRoom.rawdata.redirectUrl=u.url)}}return{statusCode:e_,hasMore:eh,data:ew,logPb:ep}},[t,l]),statusCode:V,refRefreshIndex:O,isListError:z,setIsListError:W,setRefreshIndex:H}}},2165:function(e,t,l){var i=l(230535);t.Z=i.Z},109050:function(e,t,l){let i;l.d(t,{A:function(){return I},NN:function(){return N},Nu:function(){return S}});var n=l(520739),o=l(878389);l(779788),l(179133),l(826893),l(110006),l(675373),l(112587),l(17322),l(560401),l(779566),l(69896),l(416555),l(404948),l(209955);var a=l(567754),r=l(439837),d=l.n(r),u=l(576660),s=l(832052),c=l(594235),v=l(888163),f=l(987475),m=l(828782),_=l(983253),h=l(565024),g=l(847191),p=l(842602),w=l(22617),A=l(88533);let{COMMON_SEARCH_PARAMS:y}=u;function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{aweme_list:l=[],status_code:i,log_pb:n}=e||{},{filterLiveInClient:o=!1}=t||{},a=l;return(0,m.DT)()&&o&&(a=l.filter(e=>(null==e?void 0:e.aweme_type)!==s.e.LiveCard)),{statusCode:i,hasMore:!0,awemeList:(0,p.TN)({awemeList:a||[],logPb:n&&JSON.stringify(n)}),logPb:n&&JSON.stringify(n)}}let L=e=>{let t="";if(e){var l;let i=null==e?void 0:null===(l=e.request)||void 0===l?void 0:l.search,n=null==i?void 0:i.match(/vid=([0-9]+)?/);(null==n?void 0:n[1])&&(t=null==n?void 0:n[1])}else{let e=a.parse((0,_.ht)());(null==e?void 0:e.vid)&&(t=null==e?void 0:e.vid)}return t},E=e=>{var t;let l="",i=e?null==e?void 0:null===(t=e.request)||void 0===t?void 0:t.search:(0,_.ht)(),n=a.parse(i);return(null==n?void 0:n.live_insert_type)&&(l=null==n?void 0:n.live_insert_type),l},x=(e,t)=>{var l;let i="",n="",o=t?null==t?void 0:null===(l=t.request)||void 0===l?void 0:l.search:(0,_.ht)(),r=a.parse(o);return r.ug_source&&r.creative_id&&1===e&&(i=r.ug_source,n=r.creative_id),{ug_source:i,creative_id:n}};async function S(e,t){let{pullType:a,tagId:r="",count:d=10,refreshIndex:u=1,customConfig:s={},globalwid:c="",awemePcRecRawData:v={},options:g={},cancelCb:S={current:()=>{}},preFetch:C=!1,minWindow:N,launchLiveFilters:b,freeRight:k=0,viewCount:T=0,refresh_type:R,useProtobuf:P=!1,usePassThrough:D=!1,share_aweme_id:j,plugBlock:M=!1,needTranslation:V,reqCount:F}=e;v.is_client=(0,m.DT)(t),v.is_xigua_user=(0,_.CY)("xigua_webid")?1:0,P&&(g=(0,o._)((0,n._)({},g),{protobufDecode:async e=>{!i&&(i=await l.e("19413").then(l.t.bind(l,544695,23)));let t=i.com.ss.ugc.aweme.aweme_v2_feed_response,n=t.decode(new Uint8Array(e)),o=t.toObject(n),a=Date.now();(0,p.Pb)(o);let r=Date.now();return w.Z.sendLog("protobufPackParse",{duration:r-a}),o},useProtobuf:!0}));let z="",W=h.Q.getItem({sKey:f.CookieKeys.FeedCacheData,ctx:t});(null==W?void 0:W.awemeId)&&(z=null==W?void 0:W.awemeId);let O=(0,A.g8)(D?"/aweme/v2/web/feed/":"/aweme/v1/web/tab/feed/",(0,n._)((0,o._)((0,n._)((0,o._)((0,n._)({},y),{filterGids:z,tag_id:r,share_aweme_id:1===u?L(t)?L(t):j:"",live_insert_type:E(),pc_launch_live_filters:b,count:d,refresh_index:u,video_type_select:1,aweme_pc_rec_raw_data:JSON.stringify(v),globalwid:c,pull_type:a,refresh_type:R,min_window:N?1:0,free_right:k,view_count:T}),F?{req_count:F}:{}),{plug_block:M?1:0,need_translation:V}),x(u,t)),t,e=>I(e,s),g,e=>{var t;return 0===e.statusCode&&(null===(t=e.awemeList)||void 0===t?void 0:t.length)===0},S),{result:U}=await O;return U}let C=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await c.get({key:v.TccKey.CommonSetting,defaultValue:v.TCC_DEFAULT_VALUE_MAP.get(v.TccKey.CommonSetting)});try{e.customConfig?e.customConfig.filterLiveInClient=t.clientFilterLiveInRecommend||!1:e.customConfig={filterLiveInClient:t.clientFilterLiveInRecommend||!1}}catch(e){}if((null==e?void 0:e.refreshIndex)===1){let t=a.parse((0,_.ht)());if(null==t?void 0:t.live_insert_type){let t=(0,g.$o)(f.LocalStorageKeys.LiveLandingIds),l=d()().format("YYYYMMDD");(null==t?void 0:t.date)===l&&(e.launchLiveFilters=null==t?void 0:t.ids)}}};async function N(e){var t,l,i;arguments.length>1&&void 0!==arguments[1]&&arguments[1];let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,{refreshIndex:o}=e;await C(e);let a=await S(e,n);return 1===o&&(null===(t=a.awemeList)||void 0===t?void 0:t.length)>0&&(null===(i=a.awemeList[0])||void 0===i?void 0:null===(l=i.status)||void 0===l?void 0:l.isDelete)&&(a.awemeList=a.awemeList.slice(1)),a}},158166:function(e,t,l){l.d(t,{O:function(){return p},W:function(){return w}}),l(981168),l(250440),l(779788),l(874386);var i=l(801034),n=l(645260),o=l.n(n),a=l(987475),r=l(565024),d=l(828782),u=l(297640),s=l(314325),c={ao:0,0:"ao",ld:1,1:"ld",sd:2,2:"sd",hd:3,3:"hd",uhd:4,4:"uhd",fhd:5,5:"fhd",origin:6,6:"origin"};let v=["ld","sd","hd","uhd","fhd","origin"],f=e=>{let{streamData:t={},localQuality:l,defealutQuality:i,initQualities:n=v,abtestData:o}=e,a=n.slice().sort((e,t)=>c[e]-c[t]),r=[];t&&(r=Object.keys(t).slice().filter(e=>a.includes(e)).sort((e,t)=>c[e]-c[t]));let d=e=>{let t=a.indexOf(e);if(t<1)return"";let l=a[t-1];return r.includes(l)?l:d(l)},u="",f="";if(r.length){l&&(l&&r.includes(String(l))?f=String(l):l&&(f=d(l)));let e=e=>r.includes(e)?e:d(e),t=(()=>{let t=f||(0,s.qt)();return i&&c[i]<=c[t]?e(i):t})();if(f!==t&&r.includes(t)&&(f=t),!f){let e=(0,s.qt)();f=e&&r.includes(e)?e:d("")}u=""===f?r[r.length-1]:f}else u="";return[u]},m=e=>{var t;let{roomData:l,isFeedH265:i}=e,n=o()(l,"stream_url"),a=(null===(t=o()(l,"additional_stream_url",null))||void 0===t?void 0:t.live_core_sdk_data)?o()(l,"additional_stream_url"):n,r=o()(n,"live_core_sdk_data.pull_data",{}),d=o()(a,"live_core_sdk_data.pull_data",{}),u=(null==r?void 0:r.stream_data)?JSON.parse(r.stream_data):null,s=(null==d?void 0:d.stream_data)?JSON.parse(d.stream_data):null,c=i?o()(s,"data",null):o()(u,"data",null);return{stream:c,options:i?o()(d,"options",null):o()(r,"options",null)}},_=(e,t)=>{if(e){let l=o()(e,`${t}.main`,{});return(0,i.uC)(l.flv||"")}return""},h=e=>{let{stream:t,startQuality:l}=e,i=_(t,l);return{url:i,lowUrl:_(t,"md")||_(t,"ld")}},g=e=>{let{stream:t,abtestData:l,defaultQuality:i}=e,n=a.CookieKeys.WebcastLocalQuality,o="";try{o=r.Q.getItem({sKey:n})||localStorage.getItem(n)}catch(e){}let[d]=f({streamData:t,localQuality:o,defealutQuality:i,abtestData:l});return{startQuality:d}},p=e=>{let{room:t,abtestData:l,isFeedH265:i}=e,{stream:n,options:o}=m({roomData:t,isFeedH265:i}),a=(0,s.Rl)({options:o,abtestData:l}),{startQuality:r}=g({stream:n,abtestData:l,defaultQuality:a});return h({stream:n,startQuality:r})},w=e=>{var t,l,i,n,o,a,r;let{tab:s}=e;return!((()=>{try{let e=window.localStorage.getItem("h265ErrorNumNew")||window.localStorage.getItem("h265ErrorNum");return e?Number(e):0}catch(e){return 0}})()>2||!["recommend","followLiveHeadPreCreated"].includes(s)||(0,d.DT)()&&(!(null===(n=window)||void 0===n?void 0:null===(i=n.MediaSource)||void 0===i?void 0:null===(l=i.isTypeSupported)||void 0===l?void 0:l.call(i,"video/mp4;codecs=hev1.1.6.L93.B0"))||!(null===(r=window)||void 0===r?void 0:null===(a=r.MediaSource)||void 0===a?void 0:null===(o=a.isVideoProfilePlatformSupported)||void 0===o?void 0:o.call(a,16))))&&(!!(0,d.DT)()||!!(0,u.E)())&&(null===(t=window.navigator)||void 0===t?void 0:t.hardwareConcurrency)>4}},96570:function(e,t,l){l.d(t,{P:function(){return h}});var i=l("563097"),n=l("88648"),o=l("713097"),a=l.n(o),r=l("828782"),d=l("66627"),u=l("385236"),s=l("520739"),c=l("878389");let v=(0,n.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,c._)((0,s._)({width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M17.448 17.448a1.886 1.886 0 0 1-2.668 0L9 11.668l-5.78 5.78A1.886 1.886 0 1 1 .552 14.78L6.332 9 .552 3.22A1.886 1.886 0 1 1 3.22.552L9 6.332l5.78-5.78a1.886 1.886 0 1 1 2.668 2.668L11.668 9l5.78 5.78a1.886 1.886 0 0 1 0 2.668z",fill:"#fff"})})));var f=l("547641"),m=l("979571"),_=l("115627");let h=e=>{let{onClick:t,isClientMiniWin:l,isMiniWin:n,className:o,isBackSvg:s=!1}=e,c=(0,r.DT)()&&(0,d.y)((0,r.FJ)().awemePcClient,">=","5.4.0");return(0,i.jsx)("div",{className:a()(f.default.container,"isDark",o,{[f.default.hide]:l||n},c&&f.default.clientHomeStyleWrap),onClick:t,children:(0,i.jsxs)("div",{className:f.default.wrapper,children:[(0,i.jsx)("div",{className:f.default.circle}),s||c?(0,i.jsx)(m.z,{className:f.default.back,svg:(0,i.jsx)(u.Z,{style:{fontSize:"24px"}})}):(0,i.jsx)(_.Z,{src:v,className:f.default.close,viewBox:"0 0 18 18"})]})})}},198178:function(e,t,l){l.r(t);var i=l(520739);l(874386);var n=l(563097),o=l(88648),a=l(713097),r=l.n(a),d=l(399242),u=l(828782),s=l(66627),c=l(441447),v=l(504229),f=l(283172),m=l(366068),_=l(92351),h=l(364979),g=l(180593),p=l(96570),w=l(29498),A=l(49279),y=l(251537),I=l(568201),L=l(487330),E=l(609006);t.default=e=>{var t;let{scene:l,awemeInfo:a,abtestData:x,userInfo:S,isClientMiniWin:C,isMiniWin:N,isInnerFeed:b,isActive:k,player:T,fullScreenTarget:R}=e,{awemeFeed:P}=(0,A.j)(),{supportAiTop1:D}=(0,L.Iq)(e=>{let{supportAiTop1:t}=e;return{supportAiTop1:t}}),j=P.useValue("modalAwemeInfo",Boolean),M=P.useValue("feedType"),{isShowExtra:V,extraRef:F,searchBarProps:z,handleExitFullscreen:W}=(0,w.Y)(a,T,k),O=(0,o.useRef)(null),U=(0,o.useRef)(j),[q,B]=(0,o.useState)(!1),H=(0,u.DT)()&&(0,s.y)((0,u.FJ)().awemePcClient,">=","5.4.0"),G=(0,E.V1)(),[Y,K]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{B(!j&&U.current),U.current=j},[j]),(0,o.useEffect)(()=>{if(!j&&O.current){var e;let t=null===(e=O.current)||void 0===e?void 0:e.aweme;c.emit(c.EVENT.postCurVideoInfo,{awemeId:t.awemeId,groupId:t.groupId,scene:O.current.scene,suggestWords:null==t?void 0:t.suggestWords})}},[j]),(0,o.useEffect)(()=>{!j&&(O.current={aweme:a,scene:l})},[a,j,l]),(0,o.useEffect)(()=>{if(T&&k){var e;let t=T.getPlugin("ImmersiveSwitchSettingPlugin");(null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.isOn)?K(!0):Y&&K(!1);let l=e=>{K(e.isOn)};return T.on(I.B.ImmersiveSwitchChange,l),()=>T.off(I.B.ImmersiveSwitchChange,l)}},[T,k,b]),(0,n.jsxs)("div",{className:r()(f.default.extraTL,"isDark",{[f.default.extraShow]:V,[f.default.clientHomeStyleWrap]:H}),ref:F,children:[j?(0,n.jsx)(y.N,{exitTextProps:{getCurrentTab:()=>M,modalEnterFrom:l,isSelf:!1,uidEquals:(null==a?void 0:null===(t=a.authorInfo)||void 0===t?void 0:t.uid)===(null==S?void 0:S.uid),awemeInfo:a},onHandleReturn:()=>{P.dispatch("modalAwemeInfo",null),(0,v.sF)()&&W()}}):(0,n.jsx)(p.P,{onClick:W,isMiniWin:N,isClientMiniWin:C}),(0,n.jsx)("div",{className:r()(f.default.searchCt,{[f.default.hidden]:Y}),children:(()=>{if((null==x?void 0:x.aiSearchAiInput)&&(null==x?void 0:x.aiSearchInputMiddleNew)&&D&&!G)return(0,n.jsx)(m.default,(0,i._)({customProps:{isFullScreenShow:!0,isSmoothInnerFeed:j||q},userInfo:S,abTestData:x,playerProps:{awemeInfo:a,scene:l,fullScreenScene:d.lT.FullScreen},fullScreenTarget:R},z));if(!(null==x?void 0:x.aiSearchAiInput)&&(null==x?void 0:x.aiSearchInputMiddleNew)&&D&&!G)return(0,n.jsx)(_.E1,(0,i._)({customProps:{isFullScreenShow:!0,isSmoothInnerFeed:j||q},userInfo:S,abTestData:x,playerProps:{awemeInfo:a,scene:l,fullScreenScene:d.lT.FullScreen}},z));if((null==x?void 0:x.aiSearchAiInput)&&!(null==x?void 0:x.aiSearchInputMiddleNew)&&D&&!G)return(0,n.jsx)(h.E1,(0,i._)({customProps:{isFullScreenShow:!0,isSmoothInnerFeed:j||q},userInfo:S,abTestData:x,playerProps:{awemeInfo:a,scene:l,fullScreenScene:d.lT.FullScreen},fullScreenTarget:R},z));else return(0,n.jsx)(g.default,(0,i._)({customProps:{isFullScreenShow:!0,isSmoothInnerFeed:j||q},userInfo:S,abTestData:x,playerProps:{awemeInfo:a,scene:l,fullScreenScene:d.lT.FullScreen}},z))})()})]})}},656482:function(e,t,l){l.d(t,{p:function(){return f}}),l(874386),l(250440);var i=l(563097),n=l(88648),o=l(791483),a=l(63405),r=l(441447),d=l(504229),u=l(622005),s=l(443073),c=l(289228),v=l(382299);let f=e=>{let{log:t,isFromLynx:l,onCloseLynx:f,removeHideInLynxClassName:m,setHideInLynxClassName:_,showWindowByWebWhenLynx:h}=(0,v.H)(),{isActive:g=!0}=e||{},[p,w]=(0,n.useState)(l()),A=(0,s.N)(),y=p&&g&&l(),I=async e=>{var l;t("LynxEmbedPlugin onShowDouyinWindow",e);let{data:i}=await a.invoke("getLynxInfo");if((null===(l=i.url)||void 0===l?!void 0:!l.includes("/root/live"))||(null==e?void 0:e.from)!=="live")w(!1),(null==e?void 0:e.from)==="live"&&h(),f("self")};return((0,o.C)(()=>{if(y){let e=r.listen(r.EVENT.showDouyinWindow,I);return()=>{e()}}return()=>{}},[y]),(0,o.C)(()=>{w(l())},[g]),y)?(_(),(0,d.sF)())?null:(0,i.jsx)(c.k,{componentName:"LynxEmbedPlugin",Slardar:A,children:(0,i.jsx)("embed",{id:"plugin-punch-hole-1","ttplugin-id":"plugin-punch-hole-1",type:"ttplugin/v1","data-layer-type":"punch-hole",className:u.default.LynxEmbedPlugin})}):(m(),null)}},798256:function(e,t,l){l.d(t,{B:function(){return i}});var i={RECOMMEND:"recommend",FOLLOW:"follow",FRIEND:"friend",TOPIC:"topic"}},254890:function(e,t,l){l.d(t,{JA:function(){return x},zg:function(){return S}});var i=l("520739");l("250440"),l("268917"),l("874386"),l("429532"),l("675373");var n=l("88648"),o=l("987475"),a=l("832052"),r=l("302461"),d=l("847191"),u=l("742740"),s=l("195591"),c=l("441447"),v=l("130556"),f=l("725887"),m=l("828782"),_=l("379788"),h=l("207761"),g=l("872136"),p=new g.h({clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",is_small_window:"0",play_material:"video"}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",is_small_window:"0",play_material:"video"}},feedRequest:{eventName:"feed_request",params:{enter_from:"",is_first:0,is_click:0,is_auto_play:0,unread_feed_nums:0}},feedRequestResponse:{eventName:"feed_request_response",params:{enter_from:"",is_first:0,video_count:0,duration:0,is_success:0,is_click:0,is_auto_play:0,live_position:-1,unread_feed_nums:0}},feedSlideBlocked:{eventName:"feed_slide_blocked",params:{duration:0,count:0,enter_from:""}}}),w=l("798256"),A=l("135058"),y=l("257858"),I=l("953342");function L(){let e=(0,d.$o)(o.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY);return Number(null!=e?e:0)}let E=Object.keys(w.B).map(e=>w.B[e]),x=e=>{let{refCancelTabFeedFunc:t,setAwemeInfoList:l,fetchSlideList:n,fromTab:o,cb:a}=e;(async()=>{var e,r;null==t||null===(e=t.current)||void 0===e||e.call(t),l([]);let d=0;E.includes(o)&&(d=new Date().getTime(),p.sendLog("feedRequest",{enter_from:(0,u.yW)(),is_first:0,is_click:1,is_auto_play:L()}));let c=await n({mode:"refresh"});E.includes(o)&&p.sendLog("feedRequestResponse",(0,i._)({enter_from:(0,u.yW)(),is_first:0,video_count:null===(r=c.data)||void 0===r?void 0:r.length,duration:new Date().getTime()-d,is_success:0===c.statusCode?1:0,is_click:1,is_auto_play:L()},(0,s.p0)(null==c?void 0:c.data))),0===c.statusCode&&c.data&&l(c.data),null==a||a()})()},S=e=>{let{swiper:t,awemeInfoList:l,setAwemeInfoList:g,swiperCallBack:x,fetchSlideList:S,fromTab:C,lastItemCb:N,abTestData:b={},initialRecommendAwemeList:k,initialRecommendAwemeListPromise:T,maxLimit:R,enableSlideBlockedLog:P=!1}=e,D=(0,n.useRef)(!1);(0,n.useRef)(!1);let j=(0,n.useRef)([]),M=(0,n.useRef)(!1),V=(0,n.useRef)(0),{markStart:F,markEnd:z}=function(e){let t=(0,n.useRef)(0),l=(0,n.useRef)(0),i=(0,n.useRef)(!1),o=(0,n.useCallback)(()=>{if(!!e){if(i.current){l.current+=1;return}l.current=1,t.current=performance.now(),i.current=!0}},[]);return{markStart:o,markEnd:(0,n.useCallback)(()=>{if(!!e){if(i.current){i.current=!1;let e=performance.now()-t.current;p.sendLog("feedSlideBlocked",{enter_from:(0,u.yW)(),duration:e,count:l.current})}}},[])}}(P),W=(0,n.useCallback)((e,t)=>{let l=[];for(let i=0;i<t.length;i++)!e.find(e=>{var l,n,o,r,d,u;return(null==e?void 0:e.awemeType)!==a.e.LiveCard?(null==e?void 0:e.awemeId)===(null===(l=t[i])||void 0===l?void 0:l.awemeId):(null==e?void 0:null===(o=e.cellRoom)||void 0===o?void 0:null===(n=o.rawdata)||void 0===n?void 0:n.id_str)===(null===(u=t[i])||void 0===u?void 0:null===(d=u.cellRoom)||void 0===d?void 0:null===(r=d.rawdata)||void 0===r?void 0:r.id_str)})&&l.push(t[i]);return l},[]),O=(0,n.useCallback)(async e=>{D.current=!0;let n=0;E.includes(C)&&(n=new Date().getTime(),p.sendLog("feedRequest",{enter_from:(0,u.yW)(),is_first:0,is_click:0,is_auto_play:L(),unread_feed_nums:(null==l?void 0:l.length)-(null==t?void 0:t.activeIndex)}));let o=await S((0,i._)({mode:"loadmore"},function(e){let{fromTab:t}=e,l={};return t===w.B.RECOMMEND&&(l=function(e){let{abTestData:t}=e,l={};return t.loadmoreCount>0&&(l.reqCount=t.loadmoreCount),l}(e)),l}({abTestData:b,fromTab:C})));if(E.includes(C)){var a;p.sendLog("feedRequestResponse",(0,i._)({enter_from:(0,u.yW)(),is_first:0,video_count:null===(a=o.data)||void 0===a?void 0:a.length,duration:new Date().getTime()-n,is_success:0===o.statusCode?1:0,is_click:0,is_auto_play:L(),unread_feed_nums:(null==l?void 0:l.length)-(null==t?void 0:t.activeIndex)},(0,s.p0)(null==o?void 0:o.data)))}0===o.statusCode?(V.current=0,g(l=>{let i=W(l,o.data),n=[...l,...i];if(R)for(let e=0;e<n.length;e++)if(e<(null==t?void 0:t.activeIndex)-R)n[e]=!1;else break;return D.current=!1,null==e||e(n),n})):D.current=!1,z()},[S,W,t,R,g]),U=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.assign({},null==b?void 0:b.loadMore,null==b?void 0:b.loadMoreServer),o="recommend"===(0,u.yW)()&&(null==n?void 0:n.defaultCount)||4;if(e||Math.abs((null==t?void 0:t.activeIndex)-l.length)<=o&&!D.current){D.current=!0;let e=async()=>{let e=(null==b?void 0:b.preloaderOpt)&&i?e=>{if(i){var t;c.emit(c.EVENT.prefetchLoadMoreFinish,null==e?void 0:null===(t=e.slice(2,3))||void 0===t?void 0:t.filter(e=>!(0,A.Ni)(e)))}}:null;await O(e)};if("recommend"!==(0,u.yW)())(0,v.l)(e,{timeout:3e3});else if(null==b?void 0:b.loadIdlecallbackDelay){var a;(0,v.l)(e,{timeout:null!==(a=null==b?void 0:b.loadIdlecallbackDelay)&&void 0!==a?a:3e3})}else e()}},[t,l,b,O]);(0,n.useEffect)(()=>{let e=Object.assign({},null==b?void 0:b.loadMore,null==b?void 0:b.loadMoreServer),i=null==e?void 0:e.bufferEmitCount;if((null==e?void 0:e.bufferEmit)&&i){let e=c.listen(c.EVENT.bufferedLoadMore,()=>{Math.abs((null==t?void 0:t.activeIndex)-l.length)<=i&&!D.current&&O()});return()=>{null==e||e()}}},[t,O,l.length,b]);let q=(0,n.useCallback)(e=>{let l="number"==typeof e?e:t.activeIndex;g(e=>e.slice(0,l).concat(e.slice(l+1))),U()},[t,U]);(0,r.o)(()=>c.listen(c.EVENT.firstLoadMore,()=>{U(!1,!0)}),[U]);let B=(0,n.useCallback)(function(e,t){let{isFirst:l=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!l)null==x||x("prev"),e&&"click_button"!==e&&c.emit(c.EVENT.reportPlayPrev,{clickFrom:e})},[x]),H=(0,n.useCallback)(function(e,t){let{isLast:l=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(U(),l){null==N||N();return}let i=f.Le.getConfig(f.gI.VideoFeedList),n=(null==i?void 0:i.autoPlayCount)||1;"auto"===e?f.Le.setConfig(f.gI.VideoFeedList,{autoPlayCount:n+1}):null==x||x("next"),e&&"click_button"!==e&&c.emit(c.EVENT.reportPlayNext,{clickFrom:e})},[U,N,x]),G=(0,n.useCallback)(e=>{var i,n;if((null==t?void 0:t.destroyed)||!t)return;let{from:o}=e||{};f.Le.setConfig(f.gI.FeedBackInfo,{activeIndex:null!==(n=t.activeIndex+1)&&void 0!==n?n:-1}),t.activeIndex===l.length-1&&F(),H(o,l[t.activeIndex],{isLast:t.activeIndex===l.length-1}),null===(i=t.slideNext)||void 0===i||i.call(t)},[t,l,H]),Y=(0,n.useCallback)(e=>{var i,n;if(!t||t.destroyed)return;f.Le.setConfig(f.gI.FeedBackInfo,{activeIndex:(n=t.activeIndex-1,n)});let{from:o}=e||{};B(o,l[t.activeIndex],{isFirst:0===t.activeIndex}),null===(i=t.slidePrev)||void 0===i||i.call(t)},[t,l,B]),K=(0,n.useCallback)(()=>{U(!0)},[U]);(0,n.useEffect)(()=>{(async()=>{var e,t,l;if(null==k?void 0:k.length)return;if(T instanceof Promise){let t=await T;if(null==t?void 0:null===(e=t.recommendAwemeList)||void 0===e?void 0:e.length){g(t.recommendAwemeList);return}}let n=(0,h.getCookiesItem)(o.CookieKeys.DebugVids);if(n)try{let e=JSON.parse(n||"[]");if(!(null==e?void 0:e.length))return;let t=await (0,_.c7)({itemIds:e,from:"useBasicSlideFunc.tsx",originType:y.F.SlideList});g((null==t?void 0:t.detail)||[]);return}catch(e){}let a=0;E.includes(C)&&(a=new Date().getTime(),p.sendLog("feedRequest",{enter_from:(0,u.yW)(),is_first:1,is_click:0,is_auto_play:L()})),D.current=!0;let r=await S({mode:"refresh"});D.current=!1,E.includes(C)&&p.sendLog("feedRequestResponse",(0,i._)({enter_from:(0,u.yW)(),is_first:1,video_count:null===(t=r.data)||void 0===t?void 0:t.length,duration:new Date().getTime()-a,is_success:0===r.statusCode?1:0,is_click:0,is_auto_play:L(),live_position:null==r?void 0:null===(l=r.data)||void 0===l?void 0:l.findIndex(e=>(null==e?void 0:e.awemeType)===101)},(0,s.p0)(null==r?void 0:r.data))),0===r.statusCode&&r.data&&g(e=>[...e||[],...W(e,r.data)||[]])})()},[k,T]),(0,r.o)(()=>{let e=c.listen(c.EVENT.wallPaperInsert,e=>{let t=(0,d.$o)(o.LocalStorageKeys.WallPaper);if((null==t?!void 0:!t.disappear)&&((null==t?!void 0:!t.timetamp)||new Date(Date.now()).toDateString()!==new Date(null==t?void 0:t.timetamp).toDateString()))g(t=>{var l;let i=t.findIndex(t=>t.awemeId===e);return i>-1&&(null===(l=j.current)||void 0===l?void 0:l.length)&&!M.current?(M.current=!0,(0,d.qQ)(o.LocalStorageKeys.WallPaper,{timetamp:Date.now()}),t.slice(0,i+1).concat(j.current,t.slice(i+1))):t})});return()=>{null==e||e()}},[]),(0,n.useEffect)(()=>{var e;let t=null!==(e=f.Le.getConfig(f.gI.CheckAwemeList))&&void 0!==e?e:[],i=l.filter(e=>e.awemeType!==a.e.LiveCard);if(i.length>0){if(0===t.length){let e=i.map(e=>({vid:e.awemeId,time:Date.now(),dy_q:Number(e.dyQ),tag:e.isAds?2:0}));f.Le.setConfig(f.gI.CheckAwemeList,e)}if(t.length>0){let e=t[t.length-1],l=i.findIndex(t=>t.awemeId===e.vid),n=i.slice(l+1).map(e=>({vid:e.awemeId,time:Date.now(),dy_q:Number(e.dyQ),tag:e.isAds?2:0}));f.Le.setConfig(f.gI.CheckAwemeList,t.concat(n))}}},[l]),(0,n.useEffect)(()=>{if(t){let e=-1,i=()=>{-1!==e&&(t.activeIndex>e?H:B)("drag",l[t.activeIndex])},n=()=>{e=t.activeIndex,t.once("slideChange",i)},o=()=>{setTimeout(()=>e=-1),(0,f.Vv)(I.PagingType.drag)},a=()=>{t.once("touchMove",n)};try{t.on("touchStart",a),t.on("touchEnd",o)}catch(e){}return()=>{try{t.off("touchMove",n),t.off("touchEnd",o),t.off("touchStart",a)}catch(e){}}}},[t,l]);let J=(0,n.useMemo)(()=>{let e={};return((null==b?void 0:b.preloadCountApplySideServer)==="both"||(0,m.DT)()&&(null==b?void 0:b.preloadCountApplySideServer)==="client"||!(0,m.DT)()&&(null==b?void 0:b.preloadCountApplySideServer)==="web")&&(e=null==b?void 0:b.preloadCountServer),Object.assign({},null==b?void 0:b.preloadCount,e)},[b]);return(0,n.useEffect)(()=>{if(t){if(0===t.activeIndex){let e=l.slice(1,2).filter(e=>!(0,A.Ni)(e));f.Le.setConfig(f.gI.PreloadList,e)}let e=()=>{if(null==J?void 0:J.open){let e=t.activeIndex+2,i=(null==J?void 0:J.count)||1,n=l.slice(e).filter(e=>(null==e?void 0:e.awemeType)===a.e.Normal&&!(0,A.Ni)(e)).slice(0,i);f.Le.setConfig(f.gI.PreloadList,n)}else{let e=l.slice(t.activeIndex+1,t.activeIndex+3).filter(e=>!(0,A.Ni)(e));f.Le.setConfig(f.gI.PreloadList,e)}};try{t.on("slideChange",e)}catch(e){}return()=>{try{t.off("slideChange",e)}catch(e){}}}},[t,l,J]),(0,n.useEffect)(()=>{if(t&&(null==l?void 0:l.length)===0)try{t.slideTo(0,0)}catch(e){}},[t,l]),{deleteCurrentSwiper:q,nextPageFunc:G,lastPageFunc:Y,retryFunc:K}}},286350:function(e,t,l){l.d(t,{A:function(){return o}}),l(250440);var i=l(88648),n=l(441447);let o=e=>{let{awemeInfoList:t,setAwemeInfoList:l}=e;(0,i.useEffect)(()=>{let e=n.listen(n.EVENT.checkSafeAwemeList,e=>{l(t.filter(t=>!e.includes(t.awemeId)))});return()=>e()},[t])}},29498:function(e,t,l){l.d(t,{Y:function(){return s}}),l(874386);var i=l(88648),n=l(774765),o=l(725887),a=l(262648),r=l(441447),d=l(613480),u=l(133221);let s=(e,t,l)=>{var s;let[c,v]=(0,i.useState)(!0),[f,m]=(0,i.useState)(!1),{handleHiddenLog:_}=(0,u.s)(),{isCssFullScreen:h,isFullScreen:g}=(0,i.useContext)(d.C),[p,w]=(0,i.useState)(null===(s=o.Le.getConfig(o.gI.IsInLookMiniModal))||void 0===s?void 0:s.isInMiniModal),A=(0,i.useRef)(null),y=(0,i.useRef)(!1),{run:I}=(0,n.Z)(()=>{v(!0)},500,[],{trailing:!1,leading:!0}),{run:L}=(0,n.Z)(async()=>{v(y.current||!1)},3e3),E=()=>{y.current=!0},x=()=>{y.current=!1};return(0,i.useEffect)(()=>r.listen(r.EVENT.syncInteraction,()=>{var e;w(null===(e=o.Le.getConfig(o.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)}),[]),(0,i.useEffect)(()=>{var e,l,i,n,o,a,r;if(!(h||g)||!t||p)return;let d=null!==(r=null==t?void 0:t.innerContainer)&&void 0!==r?r:null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.el,u=(null==d?void 0:null===(l=d.closest)||void 0===l?void 0:l.call(d,".basePlayerContainer"))||(null==t?void 0:null===(n=t.root)||void 0===n?void 0:null===(i=n.closest)||void 0===i?void 0:i.call(n,".basePlayerContainer"));if(!!u)return u.addEventListener("mousemove",I),u.addEventListener("mousemove",L),null===(o=A.current)||void 0===o||o.addEventListener("mouseenter",E),null===(a=A.current)||void 0===a||a.addEventListener("mouseleave",x),()=>{var e,t;u.removeEventListener("mousemove",I),u.removeEventListener("mousemove",L),null===(e=A.current)||void 0===e||e.removeEventListener("mouseenter",E),null===(t=A.current)||void 0===t||t.removeEventListener("mouseleave",x)}},[h,g,t,p]),(0,i.useEffect)(()=>{if(!!(h||g)&&!p)v(!0),y.current=!1,l&&L()},[l,e,h,g,p]),(0,i.useEffect)(()=>{m((h||g)&&!p&&c)},[h,g,c,p]),{isShowExtra:f,isCssFullScreen:h,isFullScreen:g,extraRef:A,handleExitFullscreen:()=>{h?r.emit(r.EVENT.pageFullScreen,{fullScreen:!1,playerId:null==t?void 0:t.playerId}):null==t||t.exitFullscreen()},searchBarProps:{onHistoryClick:e=>{let{text:t}=e.currentTarget.dataset;return _(t)},onSearchClick:e=>_(e),onInputKeyDown:(e,t)=>{if("Enter"===(0,a.CS)(e))return _(t)}}}}},846455:function(e,t,l){l.d(t,{z:function(){return o}}),l(874386);var i=l(88648),n=l(441447);let o=e=>{let{isNext:t,positionIndex:l,abtestData:o}=e,[a,r]=(0,i.useState)(!1),d=(0,i.useRef)(!1);return(0,i.useEffect)(()=>n.listen(n.EVENT.firstFrameReady,()=>{d.current=!0}),[]),(0,i.useEffect)(()=>{if(t&&1===l){if(!d.current)return n.listen(n.EVENT.firstFrameReady,()=>{r(!0)});r(!0)}},[]),{flag:a}}},193463:function(e,t,l){l.d(t,{K:function(){return s}}),l(675373),l(429532);var i=l(734123),n=l(88648),o=l(877639),a=l.n(o),r=l(848625),d=l(725887),u=l(441447);let s=e=>{let{isActive:t,player:o,abtestData:s}=e,c=(0,n.useRef)(null);(0,r.b)(async()=>{if(!c.current)try{let{Pylon:e,EBiz:t}=await l.e("74770").then(l.bind(l,198991));c.current=new e({biz:t.DOUYIN_WEB_RECOMMEND})}catch(e){}},[]),(0,n.useEffect)(()=>{if(t&&c.current&&o)try{let e=null==s?void 0:s.slidePreloadConfig,t=c.current.strategyInference({scene:"feed_slide",abConfig:{slideStrategy:(null==e?void 0:e.slideConfig)||[6,12]}});d.Le.setConfig(d.gI.FastSlowSlide,t);let l=window.playerPreloader;if(!(null==e?void 0:e.open)||!window.playerPreloader)return;0===t?l.updateConfig(e.normal):2===t?l.updateConfig(e.slow):1===t&&l.updateConfig(e.fast)}catch(e){}},[t,o,null==s?void 0:s.slidePreloadConfig]),(0,n.useEffect)(()=>{if(o&&t){let e=a()(()=>{let t=null==o?void 0:o.bufferedPoint,l=(null==t?void 0:t.end)-(null==o?void 0:o.currentTime)||0,n=Object.assign({},null==s?void 0:s.loadMore,null==s?void 0:s.loadMoreServer);l>(null==n?void 0:n.bufferEmit)&&(u.emit(u.EVENT.bufferedLoadMore),o.off(i.Events.TIME_UPDATE,e))},2e3);return o.on(i.Events.TIME_UPDATE,e),()=>{o.off(i.Events.TIME_UPDATE,e)}}},[t,o,s])}},805796:function(e,t,l){l.r(t),l.d(t,{FeedLiveAd:function(){return U}});var i=l("520739"),n=l("878389");l("413806"),l("826893"),l("250440");var o=l("563097"),a=l("88648"),r=l("877639"),d=l.n(r),u=l("713097"),s=l.n(u),c=l("162095"),v=l("982755"),f=l("594649"),m=l("623582"),_=l("737470"),h=l("590682"),g=l("985703"),p=l("441447"),w=l("860805"),A=l("465769"),y=l("742740"),I=l("774575"),L=l("907170"),E=l("623527");let x=e=>{let{awemeInfo:t,adData:l}=e;(0,a.useEffect)(()=>{let e=(null==l?void 0:l.min_price)?["product_name","product_title","ad_title","word_image_url","image_url","button_text","min_price","product_tags"]:["product_name","ad_title","word_image_url","image_url","button_text"];try{var i,n;let o=(0,v.Rx)(t),a=null==o?void 0:null===(i=o.lynx_components)||void 0===i?void 0:i.find(e=>(null==e?void 0:e.lynx_type)===h.AD_FEED_TYPE);e.forEach(e=>{!l[e]&&E.oe.event.error({name:E.Mo.AdCardInfoMiss,report:{awemeId:t.awemeId,key:e,adType:_.Z9.Live,creativeId:null==o?void 0:o.creative_id,logId:t.logPb}})}),!(null==l?void 0:l.min_price)&&E.oe.event.error({name:E.Mo.AdCardInfoMiss,report:{awemeId:t.awemeId,key:"min_price",adType:_.Z9.Live,creativeId:null==o?void 0:o.creative_id,logId:t.logPb}}),!(null==a?void 0:null===(n=a.lynx_raw_data)||void 0===n?void 0:n.open_url)&&E.oe.event.error({name:E.Mo.AdCardInfoMiss,report:{awemeId:t.awemeId,key:"open_url",adType:_.Z9.Live,creativeId:null==o?void 0:o.creative_id,logId:t.logPb}})}catch(e){}},[t])};var S=l("179994");l("874386"),l("268917");var C=l("863882");let N=e=>{var t,l;let{adData:i,logParams:n}=e,o=null==i?void 0:null===(t=i.lynx_components)||void 0===t?void 0:t.find(e=>(null==e?void 0:e.lynx_type)===h.AD_FEED_TYPE),r=null==o?void 0:null===(l=o.lynx_raw_data)||void 0===l?void 0:l.mixed_area_info;(0,a.useEffect)(()=>{let e=["product_phrase","product_name","image_url","live_product_infos"];try{let t=[];e.forEach(e=>{!(null==r?void 0:r[e])&&t.push(e)}),["collection_num","return_vistors","favorable_rate","product_tags","sell_num"].every(e=>!(null==r?void 0:r[e]))&&t.push("feedback"),t.length>=e.length&&(0,f.E)("othershow_fail",{tag:"draw_ad",value:i.creative_id,log_extra:i.log_extra}),E.oe.event.error({name:E.Mo.AdCardInfoMiss,report:{key:t,adType:_.Z9.Live,creativeId:null==i?void 0:i.creative_id,logId:null==n?void 0:n.requestId,logParams:n}})}catch(e){}},[i])};var b=l("857415"),k=l("851161"),T=l("187348"),R=l("531611"),P=l("496831"),D=l("800166"),j=l("212271"),M=e=>{let{adData:t,awemeInfo:l,isActive:n,logParams:r,isHide:u=!1}=e||{},[c,g]=(0,a.useState)(!1),[L,E]=(0,a.useState)(),[x,S]=(0,a.useState)(!1),M=(0,a.useRef)(!1),V=(0,a.useRef)(new Date().getTime()),F=(0,a.useRef)(new Date().getTime()),z=(0,a.useCallback)(d()((e,t)=>{var n,o;e.stopPropagation(),p.emit(p.EVENT.openAdSideCard);let a=(0,v.Rx)(l);(0,f.E)("realtime_click",(0,i._)({tag:(0,w.f)(),value:null==a?void 0:a.creative_id,log_extra:null==a?void 0:a.log_extra,ad_extra_data:(0,i._)({show_time:new Date().getTime()-V.current,click_time:new Date().getTime()-F.current},t)},t)),m.logInstance.sendLog("productEntranceClick",{cid:null==a?void 0:a.creative_id,source_page:(0,A.mo)(),enter_from:(0,A.mo)(),enter_from_merge:(0,y.yW)(),group_id:l.awemeId,content_id:l.awemeId,author_id:null===(n=l.authorInfo)||void 0===n?void 0:n.uid,follow_status:(0,I.F)(null===(o=l.authorInfo)||void 0===o?void 0:o.followStatus)?"1":"0",commodity_id:"",product_id:"",if_qianchuan_ad:1,ad_type:_.Z9.Live})},1e3,{leading:!0,trailing:!1}),[l]),W=(0,b.l)({adData:t,onClickElement:z}),{productName:O,phrase:U,sellInfo:q,tagsElement:B,feedbackInfo:H,componentIds:G,buttonText:Y,imageUrl:K,isBackupImgUrl:J,tagsText:X,defaultPhraseElement:Z}=W,Q="#FE2C55",$=O||"视频同款商品",{componentType:ee,adSlideItems:et}=(0,a.useMemo)(()=>{let e=null,t=[],l=[];return(null==G?void 0:G.includes(_.nw.SingleLine303))?(e=_.nw.SingleLine303,l=[U,q,B,H].filter(e=>!!e),t=[$]):(null==G?void 0:G.includes(_.nw.MultiLine303))?(e=_.nw.MultiLine303,l=[U,q,B,H].filter(e=>!!e)):(null==G?void 0:G.includes(_.nw.Detail303))&&(e=_.nw.Detail303,l=[U,q,H].filter(e=>!!e)),0===l.length?t.push(Z):t=t.concat(l.slice(0,3)),{componentType:e,adSlideItems:t}},[W]),{stopListen:el}=(0,k.e)({awemeInfo:l,isActive:n,timerCb:e=>{var l,i;let{currentTime:n,isSeeking:o,isEnd:a}=e;(o||a)&&(g(!0),E(Q),S(!0),el());let r=null==t?void 0:null===(l=t.lynx_components)||void 0===l?void 0:l.find(e=>(null==e?void 0:e.lynx_type)===h.AD_FEED_TYPE),{show_button_seconds:d=D.vv,show_button_color_seconds:u=D.Wc,switch_style_seconds:s=D._u}=(null==r?void 0:null===(i=r.lynx_raw_data)||void 0===i?void 0:i.mixed_area_info)||{};n>=d&&g(!0),n>=u&&E(Q),n>=s&&(S(!0),el())}});return((0,a.useEffect)(()=>{c&&(F.current=new Date().getTime(),(0,f.E)("othershow",{tag:(0,w.f)(),value:t.creative_id,log_extra:t.log_extra,refer:(0,v.UV)(ee)?j.tU.SupportAreaCard:j.tU.SupportArea,ad_extra_data:{card_show_duration:F.current-V.current}}))},[c]),N({adData:t,logParams:r}),(0,a.useEffect)(()=>{if(c&&!M.current&&ee){var e,t;M.current=!0;let i=(0,v.Rx)(l);m.logInstance.sendLog("productEntranceShow",{cid:null==i?void 0:i.creative_id,if_qianchuan_ad:1,ad_type:_.Z9.Live,source_page:(0,A.mo)(),enter_from:(0,A.mo)(),enter_from_merge:(0,y.yW)(),group_id:l.awemeId,content_id:l.awemeId,author_id:null===(e=l.authorInfo)||void 0===e?void 0:e.uid,follow_status:(0,I.F)(null===(t=l.authorInfo)||void 0===t?void 0:t.followStatus)?"1":"0",commodity_id:"",product_id:""})}},[c]),(0,a.useEffect)(()=>{M.current=!1},[l]),c)?ee===_.nw.SingleLine303?(0,o.jsx)(T.Z,{className:s()(C.default.adCard,{[C.default.hidden]:u}),buttonText:"观看直播",imageUrl:K,isBackupImgUrl:J,slideItems:et,isStartPlay:x,onClick:z}):ee===_.nw.MultiLine303?(0,o.jsx)(R.Z,{className:s()(C.default.adCard,{[C.default.hidden]:u}),title:$,imageUrl:K,isBackupImgUrl:J,buttonText:"观看直播",slideItems:et,buttonBgColor:L,isStartPlay:x,onClick:z}):ee===_.nw.Detail303?(0,o.jsx)(P.Z,{className:s()(C.default.adCard,{[C.default.hidden]:u}),title:$,imageUrl:K,isBackupImgUrl:J,buttonText:"观看直播",tags:X&&(null==X?void 0:X.length)>0?X:D.lg,slideItems:et,buttonBgColor:L,isStartPlay:x,onClick:z}):null:null},V=l("101156"),F=l("964997"),z=l("999981"),W=l("801636");let O=e=>{let{awemeInfo:t,isActive:l,adData:i,isHide:n=!1}=e||{},{product_title:r,product_name:u,button_background_color:g,ad_title:L,word_image_url:E,image_url:C,button_text:N,min_price:b=0,product_tags:k=["优选好物"]}=i,T=(0,a.useRef)(!1),R=d()((e,l)=>{var i,o;if(P===j.cL.HIDDEN||n)return;e.stopPropagation(),p.emit(p.EVENT.openAdSideCard);let a=(0,v.Rx)(t);(0,f.E)("realtime_click",{tag:(0,w.f)(),value:null==a?void 0:a.creative_id,log_extra:null==a?void 0:a.log_extra,refer:l}),m.logInstance.sendLog("adComponentClick",{component_name:"FeedLiveAd",cid:null==a?void 0:a.creative_id,ad_refer:l}),m.logInstance.sendLog("productEntranceClick",{cid:null==a?void 0:a.creative_id,source_page:(0,A.mo)(),enter_from:(0,A.mo)(),enter_from_merge:(0,y.yW)(),group_id:t.awemeId,content_id:t.awemeId,author_id:null===(i=t.authorInfo)||void 0===i?void 0:i.uid,follow_status:(0,I.F)(null===(o=t.authorInfo)||void 0===o?void 0:o.followStatus)?"1":"0",commodity_id:"",product_id:"",if_qianchuan_ad:1,ad_type:_.Z9.Live})},1e3,{leading:!0,trailing:!1}),{displayState:P}=(0,z.I)({awemeInfo:t,isActive:l,showTimeList:[i.show_button_seconds,i.show_button_color_seconds,i.switch_style_seconds],needInit:!1});(0,a.useEffect)(()=>{T.current=!1},[t]);let D=(0,a.useMemo)(()=>{let e="";return P===j.cL.MINI_DARK||P===j.cL.MINI_LIGHT?e=u:P===j.cL.NORMAL_LIGHT&&(e=r||u),e},[P,r,u]);return(0,a.useEffect)(()=>{if(P!==j.cL.HIDDEN&&!n&&!T.current){var e,l;T.current=!0;let i=(0,v.Rx)(t);m.logInstance.sendLog("productEntranceShow",{cid:null==i?void 0:i.creative_id,if_qianchuan_ad:1,ad_type:_.Z9.Live,source_page:(0,A.mo)(),enter_from:(0,A.mo)(),enter_from_merge:(0,y.yW)(),group_id:t.awemeId,content_id:t.awemeId,author_id:null===(e=t.authorInfo)||void 0===e?void 0:e.uid,follow_status:(0,I.F)(null===(l=t.authorInfo)||void 0===l?void 0:l.followStatus)?"1":"0",commodity_id:"",product_id:""})}},[P,n]),x({awemeInfo:t,adData:i}),(0,o.jsx)("div",{className:s()(F.default.adWrapper,S.default.adWrapper,{[F.default.hasTransition]:!(P===j.cL.HIDDEN||n),[F.default.adWrapperHidden]:P===j.cL.HIDDEN||n}),id:F.default.adWrapper,children:(0,o.jsxs)("div",{className:F.default.adContainer,onClick:e=>R(e),children:[!b&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:F.default.adSource,onClick:e=>R(e,j.tU.Source),children:[(0,o.jsx)(W.Q,{src:C,iconHeight:30,iconWidth:30,className:F.default.adIcon}),(0,o.jsx)("span",{className:F.default.adName,children:D})]}),P>j.cL.MINI_LIGHT&&(0,o.jsxs)("div",{onClick:e=>R(e,j.tU.Title),className:F.default.adTitleWrapper,children:[(0,o.jsx)(W.Q,{src:E,iconHeight:30,iconWidth:30,className:F.default.moreIcon}),(0,o.jsx)("div",{className:F.default.split}),(0,o.jsx)("div",{className:F.default.adTitle,children:L})]})]}),!!b&&(0,o.jsxs)(o.Fragment,{children:[P<j.cL.NORMAL_LIGHT&&(0,o.jsxs)("div",{className:F.default.adSource,onClick:e=>R(e,j.tU.Source),children:[(0,o.jsx)(W.Q,{src:C,iconHeight:30,iconWidth:30,className:F.default.adIcon}),(0,o.jsx)("span",{className:F.default.adName,children:D})]}),P>j.cL.MINI_LIGHT&&(0,o.jsxs)("div",{className:S.default.adTitleWrapper,children:[(0,o.jsx)("div",{onClick:e=>R(e,j.tU.Source),children:(0,o.jsx)(W.Q,{src:C,iconHeight:30,iconWidth:30,className:S.default.mainCover,skeletonClass:S.default.skeleton})}),(0,o.jsxs)("div",{className:S.default.info,onClick:e=>R(e,j.tU.Title),children:[(0,o.jsx)("span",{className:S.default.adName,children:L}),(0,o.jsx)("div",{children:k.slice(0,2).map(e=>(0,o.jsx)("span",{className:S.default.tag,children:e},e))}),(0,o.jsxs)("div",{className:S.default.price,children:[(0,o.jsx)("span",{className:S.default.unit,children:"\xa5"}),b]})]})]})]}),(0,o.jsx)("div",{className:F.default.adButton,children:(0,o.jsxs)(c.Button,{theme:"solid",onClick:e=>R(e,j.tU.Button),style:{background:P<=j.cL.MINI_DARK?h.DEFAULT_BUTTON_COLOR:g},children:[(0,o.jsx)(V.WaveLineAnimation,{size:15}),(0,o.jsx)("span",{style:{fontWeight:500},children:N||"查看详情"})]})})]})})},U=e=>{var t,l;let{awemeInfo:a}=e||{},r=(0,g.hj)(a),d=(0,v.Rx)(a),u=(0,L.As)(null==d?void 0:d.log_extra),s=null==u?void 0:u.component_ids,c=null==d?void 0:null===(t=d.lynx_components)||void 0===t?void 0:t.find(e=>(null==e?void 0:e.lynx_type)===h.AD_FEED_TYPE),f=null==c?void 0:null===(l=c.lynx_raw_data)||void 0===l?void 0:l.mixed_area_info;return r&&f?(null==s?void 0:s.includes(_.nw.SingleLine303))||(null==s?void 0:s.includes(_.nw.MultiLine303))||(null==s?void 0:s.includes(_.nw.Detail303))?(0,o.jsx)(M,(0,n._)((0,i._)({},e),{adData:d})):(0,o.jsx)(O,(0,n._)((0,i._)({},e),{adData:f})):null}},957504:function(e,t,l){l.d(t,{h:function(){return g}}),l("874386");var i=l("563097"),n=l("88648"),o=l("734123"),a=l("948375"),r=l("622273"),d=l("725887"),u=l("441447"),s=l("646304"),c=l("167067"),v=l("872136"),f=new v.h({checkVideoUnsafe:{eventName:"check_video_unsafe",params:{aweme_ids:[],counts:0}},checkVideoUnsafeModal:{eventName:"check_video_unsafe_modal",params:{aweme_id:""}}}),m=l("335101");let _={},h=48e4;{let e=localStorage.getItem("check_safe_time");h=e?Number(e):h}let g=e=>{let{awemeInfo:t,isActive:l,isUseOneCheck:v,playPrevFunc:g,playNextFunc:p,deleteCurrentSwiper:w}=e,A=(0,m.n)(),[y,I]=(0,n.useState)(!1),[L,E]=(0,n.useState)(5),x=(0,a.Z)(async()=>{if(Date.now()-1e3*Number(t.dyQ)>h){let e=t.awemeId,l=[{item_id:e,dy_q:t.dyQ,tag:t.isAds?2:0,potential_risk_level:0,authentication_token:""}],i=await (0,s.Y)(l);0===i.statusCode&&(_[e]=Date.now(),i.result.find(t=>t.item_id===e)&&(A.pause(),I(!0),f.sendLog("checkVideoUnsafe",{aweme_ids:[t.awemeId],counts:1}),f.sendLog("checkVideoUnsafeModal",{aweme_id:t.awemeId})));return}}),S=(0,n.useCallback)(async()=>{var e;let l=t.awemeId,i=null!==(e=d.Le.getConfig(d.gI.CheckAwemeList))&&void 0!==e?e:[],n=i.findIndex(e=>e.vid===l);if(-1!==n&&Date.now()-i[n].time>h){let e=i.slice(n,n+6).map(e=>({item_id:e.vid,dy_q:e.dy_q,tag:e.tag,potential_risk_level:0,authentication_token:""})),o=await (0,s.Y)(e);if(0===o.statusCode){let e=i.length;for(let t=n;t<Math.min(n+6,e);t++){let e=o.result.find(e=>e.item_id===i[t].vid);i[t].time=Date.now(),i[t].hasCheck=(null==e?void 0:e.safety_code)===0}d.Le.setConfig(d.gI.CheckAwemeList,i),o.result.find(e=>e.item_id===l)&&(A.pause(),I(!0),f.sendLog("checkVideoUnsafeModal",{aweme_id:t.awemeId}));let a=o.result.filter(e=>e.item_id!==l&&1===e.safety_code).map(e=>e.item_id);u.emit(u.EVENT.checkSafeAwemeList,a),f.sendLog("checkVideoUnsafe",{aweme_ids:o.result.map(e=>e.item_id),counts:o.result.length})}}},[A,t]),C=(0,n.useCallback)(async e=>{if(!e||"firstFrame"===e.eventType)v?x():S()},[v,x,S]);return(0,r.t)(e=>{!e&&l&&A&&x()}),(0,n.useEffect)(()=>{if(y&&L>0){A.pause();let e=setTimeout(()=>{E(L-1)},1e3);return()=>clearTimeout(e)}},[y,L]),(0,n.useEffect)(()=>{if(y&&0===L&&w){if(v){if("reverse"===d.Le.getConfig(d.gI.InnerAutoPlay).mode){g();return}p();return}w()}},[y,L,v,w]),(0,n.useEffect)(()=>{v&&(E(5),I(!1))},[v,t]),(0,n.useEffect)(()=>{if(A&&l)return A.on(o.Events.XGLOG,C),A.on(o.Events.REPLAY,C),()=>{A.off(o.Events.XGLOG,C),A.off(o.Events.REPLAY,C)}},[A,l,C]),y&&(0,i.jsxs)("div",{className:c.default.container,children:[(0,i.jsx)("div",{className:c.default.damaIcon}),(0,i.jsx)("div",{className:c.default.damaText,children:"当前视频出现问题，无法播放"}),(0,i.jsxs)("div",{className:c.default.damaTime,children:[(0,i.jsx)("span",{className:c.default.nums,children:L}),(0,i.jsx)("span",{children:"秒后自动切换至下一个内容"})]})]})}},992074:function(e,t,l){l.d(t,{x:function(){return v}});var i=l(520739);l(250440),l(268917);var n=l(563097),o=l(88648),a=l(734123),r=l(725887),d=l(289228),u=l(335101),s=l(443073);let c=e=>{let{awemeInfo:t,isActive:l,abTestData:i}=e,n=(0,u.n)(),d=()=>{let e=r.Le.getConfig(r.gI.AwemePcRecRawData);return!e&&(e={videoPrefer:{fsn:[],like:[],halfMin:[],min:[]}},r.Le.setConfig(r.gI.AwemePcRecRawData,e)),e};return(0,o.useEffect)(()=>{if(n){let e=()=>{n.playTimestamp=new Date().getTime()};return null==n||n.on(a.Events.PLAY,e),()=>n.off(a.Events.PLAY,e)}},[n]),(0,o.useEffect)(()=>{if(n&&l){let e=()=>{var e;let{fsn:l}=d().videoPrefer;l.filter((e,t)=>t%2==0).includes(null==t?void 0:t.groupId)||l.push(null==t?void 0:t.groupId,null==t?void 0:null===(e=t.authorInfo)||void 0===e?void 0:e.uid),(0,r.xL)(t,n,"fsn")};return null==n||n.on(a.Events.ENDED,e),()=>null==n?void 0:n.off(a.Events.ENDED,e)}},[n,l,t]),(0,o.useEffect)(()=>{if(n&&l)return()=>{[3e4,6e4].filter(e=>n.cumulateTime>=e).map(e=>3e4===e?"halfMin":"min").map(e=>{var l;return{field:e,groupId:null==t?void 0:t.groupId,authorId:null==t?void 0:null===(l=t.authorInfo)||void 0===l?void 0:l.uid}}).forEach(e=>{let l=d().videoPrefer[e.field];l.filter((e,t)=>t%2==0).includes(null==t?void 0:t.groupId)||l.push(e.groupId,e.authorId),(0,r.xL)(t,n,e.field)}),n.cumulateTime<2e3&&(0,r.xL)(t,n,"skip"),n.overallPlayTime?n.overallPlayTime+=n.cumulateTime:n.overallPlayTime=n.cumulateTime}},[n,l,t]),null},v=e=>{let t=(0,s.N)();return(0,n.jsx)(d.k,{componentName:"CumulativeTime",Slardar:t,children:(0,n.jsx)(c,(0,i._)({},e))})}},220922:function(e,t,l){l.r(t),l.d(t,{PostGuideDownloadInner:function(){return I},PostGuideDownload:function(){return L}});var i=l("520739");l("874386");var n=l("563097"),o=l("88648"),a=l("713097"),r=l.n(a),d=l("734123"),u=l("399242"),s=l("742740"),c=l("465769"),v=l("725887"),f=l("802913"),m=l("558327"),_=l("872136"),h=new _.h({feedDownloadButtonShow:{eventName:"feed_download_button_show",params:{group_id:"",enter_from_merge:"",enter_from:"",follow_status:""}},feedDownloadButtonClick:{eventName:"feed_download_button_click",params:{group_id:"",enter_from_merge:"",enter_from:"",follow_status:"",if_highlight:0}},addToDesktopShow:{eventName:"add_to_desktop_show",params:{enter_from:"",type:"feed_follow_post_button",platform:"client",channel_id:"",ug_channel_id:""}},addToDesktopClick:{eventName:"add_to_desktop_click",params:{enter_from:"",type:"feed_follow_post_button",platform:"client",channel_id:"",ug_channel_id:""}}}),g=l("289228"),p=l("443073"),w=l("717864");let A=u.fp.MidHigh+20;function y(e){let{highlightShow:t,followStatus:l,awemeId:i}=e,{downloadHref:a,downloadAttr:d}=(0,w.o)({channelId:f.g.Notice}),u=(0,o.useCallback)(()=>{h.sendLog("feedDownloadButtonClick",{group_id:i,enter_from:(0,s.yW)(),enter_from_merge:(0,c.vM)(),follow_status:String(l),if_highlight:t?1:0}),h.sendLog("addToDesktopClick",{enter_from:(0,s.yW)(),channel_id:f.g.Notice,type:"feed_follow_post_button",ug_channel_id:v.Le.getConfig(v.gI.WebUgChannelId)||""});let e=document.createElement("a");e.setAttribute("href",a),e.setAttribute("download",d),e.click()},[a,d,i,l,t]);return(0,n.jsx)("div",{className:r()(m.default.container),style:{bottom:A},children:(0,n.jsxs)("div",{className:r()(m.default.button,{[m.default.redColor]:t}),onClick:u,children:[(0,n.jsx)("div",{className:r()(m.default.text),children:"及时接收作品更新提醒"}),(0,n.jsx)("div",{className:r()(m.default.downloadTips),children:"下载电脑客户端"})]})})}let I=e=>{var t;let{player:l,awemeInfo:i,isActive:a}=e,[r,u]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(l){let e=()=>{l.currentTime>=5&&u(!0)};return l.on(d.Events.TIME_UPDATE,e),()=>{l.off(d.Events.TIME_UPDATE,e)}}},[l]),(0,o.useEffect)(()=>{if(a&&i){var e;h.sendLog("feedDownloadButtonShow",{group_id:null==i?void 0:i.awemeId,enter_from:(0,s.yW)(),enter_from_merge:(0,c.vM)(),follow_status:String(null==i?void 0:null===(e=i.authorInfo)||void 0===e?void 0:e.followStatus)}),h.sendLog("addToDesktopShow",{enter_from:(0,s.yW)(),channel_id:f.g.Notice,type:"feed_follow_post_button",ug_channel_id:v.Le.getConfig(v.gI.WebUgChannelId)||""})}},[a,i]),(0,n.jsx)(y,{highlightShow:r,followStatus:null==i?void 0:null===(t=i.authorInfo)||void 0===t?void 0:t.followStatus,awemeId:null==i?void 0:i.awemeId})},L=e=>{let t=(0,p.N)();return(0,n.jsx)(g.k,{componentName:"PostGuideDownload",Slardar:t,children:(0,n.jsx)(I,(0,i._)({},e))})}},579272:function(e,t,l){l.d(t,{s:function(){return m}});var i=l(520739),n=l(563097),o=l(88648),a=l(734123),r=l(441447),d=l(794155),u=l(289228),s=l(335101),c=l(443073),v=l(568201);let f=()=>{let e=(0,s.n)();return(0,o.useEffect)(()=>{if(!e)return()=>{};let t=()=>{let t=(0,d.c)(e);(0,d.Is)(t),(0,d.KK)(t)};t();let l=[v.B.AutoPlaySwitchChange,a.Events.FULLSCREEN_CHANGE,a.Events.VOLUME_CHANGE,a.Events.RATE_CHANGE],i=["visibilitychange"],n=[r.EVENT.pageFullScreen];l.forEach(l=>e.on(l,t)),i.forEach(e=>document.addEventListener(e,t));let o=n.map(e=>r.listen(e,t));return()=>{l.forEach(l=>e.off(l,t)),i.forEach(e=>document.removeEventListener(e,t)),o.forEach(e=>null==e?void 0:e())}},[e]),null},m=e=>{let t=(0,c.N)();return(0,n.jsx)(u.k,{componentName:"RecRawDataCookiePlugin",Slardar:t,children:(0,n.jsx)(f,(0,i._)({},e))})}},794155:function(e,t,l){l.d(t,{Is:function(){return s},KK:function(){return f},Sp:function(){return v},c:function(){return m}}),l(779788);var i=l(987475),n=l(565024),o=l(725887),a=l(737271),r=l(730319),d=l(798644);let u=i.CookieKeys.StreamPlayerStatusParams,s=e=>n.Q.setItem(u,JSON.stringify(e)),c=o.gI.PlayerStatus,v=()=>o.Le.getConfig(c),f=e=>o.Le.setConfig(c,e);function m(e){var t,l,i,n,o,u;let s={};return s.is_auto_play=(null===(i=e.plugins)||void 0===i?void 0:null===(l=i.autoplaysettingplugin)||void 0===l?void 0:null===(t=l.config)||void 0===t?void 0:t.nextAutoPlay)||(null==e?void 0:null===(u=e.plugins)||void 0===u?void 0:null===(o=u.searchautoplaysettingplugin)||void 0===o?void 0:null===(n=o.config)||void 0===n?void 0:n.nextAutoPlay)?1:0,s.is_full_screen=(0,a.r)()?1:0,s.is_full_webscreen=d.s.getIsPageFullscreen()?1:0,s.is_mute=e.muted?1:0,s.is_speed=e.playbackRate,s.is_visible=(0,r.d)()?1:0,s}},493986:function(e,t,l){l.d(t,{c:function(){return i}}),l(874386);let i=new Set},646304:function(e,t,l){l.d(t,{Y:function(){return r}});var i=l(520739);l(779788),l(675373);var n=l(576660),o=l(66863);let{COMMON_SEARCH_PARAMS:a}=n||{};async function r(e){var t;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"recommend",n=await (0,o.v_)("/aweme/v2/video/safety/check/",(0,i._)({},a),{item_ids:JSON.stringify(e),potential_risk_level:0,refer_string:l});return{statusCode:n.status_code,statusMsg:n.status_msg,result:null!==(t=n.result)&&void 0!==t?t:[]}}}}]);