"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["19830"],{213910:function(e,t,l){l.d(t,{b:function(){return s}});var i=l(563097),n=l(88648),o=l(393265),r=l(629582),a=l(637005),u=l(638392),d=l(114682);let s=e=>{let{player:t}=(0,o.n)(),{useNewUserSoundGuide:l,isActive:s=!1,isShowGuide:c}=e,v=n.useRef(!0);return n.useEffect(()=>{if(t){let e=()=>{a.emit(a.EVENT.videoPlay)},i=()=>{var e,i;if(!!t.paused)null!==(i=(e=window).__INVISIBLE_QUERY__)&&void 0!==i||(e.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1,(0,d.MR)(),a.emit(a.EVENT.videoPlayPrevent),v.current&&!l&&setTimeout(()=>{t.muted=!0,t.play(),v.current=!1},10)};return t.on(r.FP.AUTOPLAY_WAS_PREVENTED,i),t.on(r.FP.AUTOPLAY_STARTED,e),()=>{t.off(r.FP.AUTOPLAY_WAS_PREVENTED,i),t.off(r.FP.AUTOPLAY_STARTED,e)}}},[t,l]),l?(0,i.jsx)(u.V8,{player:t,isActive:s,isShowGuide:c}):null}},223148:function(e,t,l){l.d(t,{n:function(){return d}});var i=l("563097"),n=l("88648"),o=l("393265"),r=l("520739"),a=l("878389");let u=(0,n.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,a._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M24.932 16.444c0-4.687-3.89-8.444-8.634-8.444a8.679 8.679 0 0 0-7.207 3.79v-1.558a.99.99 0 0 0-1.98 0v4.038c0 .547.444.99.99.99h4.038a.99.99 0 0 0 0-1.98h-1.646c1.137-1.963 3.304-3.3 5.804-3.3 3.7 0 6.655 2.918 6.655 6.464 0 3.547-2.956 6.465-6.655 6.465-2.963 0-5.459-1.88-6.326-4.453a.99.99 0 0 0-1.876.633c1.138 3.38 4.39 5.8 8.202 5.8 4.746 0 8.635-3.758 8.635-8.445z",fill:"#fff"})}))),d=(0,l("155067").rW)(e=>{let{player:t}=(0,o.n)(),l=n.useCallback(()=>{t.refresh()},[]);return(0,i.jsx)("div",{style:{cursor:"pointer"},onClick:l,className:(null==e?void 0:e.className)||"",children:(0,i.jsx)(u,{})})})},770391:function(e,t,l){l.r(t),l.d(t,{GlobalControlPlugin:function(){return r}});var i=l(88648),n=l(393265),o=l(637005);let r=(0,i.memo)(function(){let{player:e}=(0,n.n)();return(0,i.useEffect)(()=>{let t=o.listen(o.EVENT.livePause,()=>{e.pause()});return()=>{t()}},[]),null});t.default=r},577778:function(e,t,l){l(874386);var i=l(88648);t.Z=e=>{let[t,l]=(0,i.useState)(!1),{isActive:n}=e;return(0,i.useEffect)(()=>{let e=null,t=()=>{e=setTimeout(()=>{l(!0)},2e3)},i=()=>{e&&(clearTimeout(e),l(!1)),t()};if(n)return i(),document.addEventListener("mousemove",i),document.addEventListener("mousedown",i),document.addEventListener("keydown",i),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mousedown",i),document.removeEventListener("keydown",i),e&&clearTimeout(e)}},[n]),{inActive:t}}},414756:function(e,t,l){l.r(t),l.d(t,{default:function(){return f},NewPlayerErrorCover:function(){return _}}),l("874386");var i=l("563097"),n=l("713097"),o=l.n(n),r=l("88648"),a=l("393265"),u=l("520739"),d=l("878389");let s=(0,r.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,d._)((0,u._)({width:56,height:56,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M56 28c0 15.464-12.536 28-28 28S0 43.464 0 28 12.536 0 28 0s28 12.536 28 28zm-33.25-5.95c0 1.74-1.175 3.15-2.625 3.15S17.5 23.79 17.5 22.05s1.175-3.15 2.625-3.15 2.625 1.41 2.625 3.15zm5.478 9.683c-4.014 0-7.623 1.74-10.057 4.5a1.75 1.75 0 1 0 2.625 2.315c1.784-2.023 4.445-3.315 7.432-3.315 2.993 0 5.66 1.298 7.444 3.329a1.75 1.75 0 0 0 2.629-2.31c-2.435-2.771-6.051-4.519-10.073-4.519zm7.607-6.533c1.45 0 2.625-1.41 2.625-3.15s-1.175-3.15-2.625-3.15-2.625 1.41-2.625 3.15 1.175 3.15 2.625 3.15z",fill:"#FFFFFF57",fillOpacity:".15"})}))),c=(0,r.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,d._)((0,u._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M6.255 8a7 7 0 1 1-.746 6.625 1 1 0 1 0-1.854.75A9.003 9.003 0 0 0 21 12 9 9 0 0 0 5 6.343V5a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1h4a1 1 0 0 0 0-2H6.255z",fill:"#FFFFFFE5"})})));var v=l("414626");let _=e=>{let{className:t,onRetry:l,onlyManulRetry:n=!1}=e,{player:u}=(0,a.n)(),[d,_]=r.useState(!1),[f,m]=r.useState(n),g=r.useCallback(()=>{l&&l(),null==u||u.retry()},[]),p=r.useCallback(e=>{m(!0)},[]);return r.useEffect(()=>{!d&&!n&&(u.once("error",p),g(),_(!0))},[d]),r.useEffect(()=>()=>{u.off("error",p)},[]),f?(0,i.jsxs)("div",{className:o()(v.default.errorCover,t),children:[(0,i.jsx)("div",{children:(0,i.jsx)(s,{})}),(0,i.jsx)("div",{className:v.default.text,children:(0,i.jsx)("span",{children:"服务器开小差了，点击刷新重试"})}),(0,i.jsxs)("div",{className:v.default.refresh,onClick:g,children:[(0,i.jsx)("div",{className:v.default.refresh_svg,children:(0,i.jsx)(c,{})}),(0,i.jsx)("span",{className:v.default.refresh_text,children:"刷新"})]})]}):null};var f=_},553446:function(e,t,l){l.r(t),l.d(t,{VolumeMemoryPlugin:function(){return E},VolumeMemoryPluginSimple:function(){return I},getVolumeChangeHandler:function(){return p}});var i=l(88648),n=l(629582),o=l(784492),r=l(468763),a=l(555106),u=l(759797),d=l(637005),s=l(240026),c=l(58655),v=l(393265),_=l(90463),f=l(756919),m=l(114682),g=l(948375);let p=e=>()=>{var t,l;if(0===e.currentTime)return;0===(0,a.$o)(u.storage.LocalStorageKeys.PLAYER_IS_MUTE)&&e.muted&&(0,a.qQ)(u.storage.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,r.w)(e.muted);let i=e.volume,n=(0,r.T1)(),o=(0,r.rC)();(0,m.ni)({before_voice_value:o?0:Math.round((null!=n?n:0)*100),voice_value:Math.round((null!=i?i:0)*100),voice_status:e.muted?0:1,if_browser_limited:null!==(l=null===(t=window.__INVISIBLE_QUERY__)||void 0===t?void 0:t.if_browser_limited)&&void 0!==l?l:0}),0===i?(0,r.w)(!0):(0,r.n$)(Number(null!=i?i:.1)),d.emit(d.EVENT.syncInteraction)};function I(e){let{player:t}=(0,v.n)(),l=(0,i.useMemo)(()=>p(t),[]),o=(0,g.Z)(e=>{var l,i,n,o,a;if("change_muted"===e.action){if(0===t.volume){let e=(0,r.T1)();return t.volume=e,(0,r.w)(!1),(0,m.ni)({before_voice_value:Math.round(100*e),voice_value:0,voice_status:1,if_browser_limited:null!==(n=null===(i=window.__INVISIBLE_QUERY__)||void 0===i?void 0:i.if_browser_limited)&&void 0!==n?n:0}),!1}return setTimeout(()=>{(0,r.w)(t.muted)},50),(0,m.ni)({before_voice_value:0,voice_value:Math.round((null!==(o=t.volume)&&void 0!==o?o:0)*100),voice_status:0,if_browser_limited:null!==(a=null===(l=window.__INVISIBLE_QUERY__)||void 0===l?void 0:l.if_browser_limited)&&void 0!==a?a:0}),!0}});return(0,i.useEffect)(()=>(t.muted=(0,r.rC)(),t.on(n.FP.VOLUMECHANGE,l),null==t||t.on("user_action",o),()=>{t.off(n.FP.VOLUMECHANGE,l),null==t||t.off("user_action",o)}),[]),null}function E(){let{eventStore:{playerEvent:e},linkmicStore:{linkStatus:t},roomStore:{playerCoverText:l}}=(0,c.o)(),{player:d}=(0,v.n)(),{syncVolume:m}=(0,s.T)(),p=(0,i.useCallback)(()=>{var i,n;if(0===d.currentTime||t===_.cK.LINKED||l)return;0===(0,a.$o)(u.storage.LocalStorageKeys.PLAYER_IS_MUTE)&&d.muted&&(0,a.qQ)(u.storage.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,r.w)(d.muted);let o=d.volume,s=(0,r.T1)(),c=(0,r.rC)();null==e||e.volumeChanged({before_voice_value:c?0:Math.round((null!=s?s:0)*100),voice_value:Math.round((null!=o?o:0)*100),voice_status:d.muted?0:1,if_browser_limited:null!==(n=null===(i=window.__INVISIBLE_QUERY__)||void 0===i?void 0:i.if_browser_limited)&&void 0!==n?n:0,if_mini_window:(0,f.OL)()}),0===o?(0,r.w)(!0):(0,r.n$)(Number(null!=o?o:.1))},[t,l]),I=(0,g.Z)(t=>{var l,i,n,o,a;if("change_muted"===t.action){if((null==d?void 0:d.volume)===0){let t=(0,r.T1)();return d.volume=t,(0,r.w)(!1),null==e||e.volumeChanged({before_voice_value:Math.round(100*t),voice_value:0,voice_status:1,if_browser_limited:null!==(n=null===(i=window.__INVISIBLE_QUERY__)||void 0===i?void 0:i.if_browser_limited)&&void 0!==n?n:0}),!1}return setTimeout(()=>{(0,r.w)(null==d?void 0:d.muted)},50),null==e||e.volumeChanged({before_voice_value:0,voice_value:Math.round((null!==(o=null==d?void 0:d.volume)&&void 0!==o?o:0)*100),voice_status:0,if_browser_limited:null!==(a=null===(l=window.__INVISIBLE_QUERY__)||void 0===l?void 0:l.if_browser_limited)&&void 0!==a?a:0}),!0}});return(0,o.Z)(()=>{d.muted=(0,r.rC)()},[p]),(0,i.useEffect)(()=>(null==d||d.on(n.FP.VOLUMECHANGE,p),null==d||d.on("user_action",I),()=>{null==d||d.off(n.FP.VOLUMECHANGE,p),null==d||d.off("user_action",I)}),[p]),null}t.default=E},145736:function(e,t,l){l.r(t),l.d(t,{VolumeWheel:function(){return I},default:function(){return E}}),l("777180"),l("897860"),l("250440");var i=l("563097"),n=l("629582"),o=l("155067"),r=l("844375"),a=l("88648"),u=l("375944"),d=l("782442"),s=l("485019"),c=l("694385"),v=l("520739"),_=l("878389");let f=(0,a.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,_._)((0,v._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4zM18 19a3 3 0 1 0 0-6v6z",fill:"#fff"}),(0,i.jsx)("path",{opacity:".3",d:"M18 23.734l.095-.007A7.75 7.75 0 0 0 18 8.266v2.507a5.25 5.25 0 0 1 0 10.454v2.507z",fill:"#fff"})]}))),m=(0,a.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,_._)((0,v._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4z",fill:"#fff"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.002 17.55l2.499 2.954 1.502-1.316-2.693-3.185 2.694-3.185-1.503-1.316-2.499 2.955-2.5-2.955L17 12.818l2.694 3.185-2.693 3.185 1.502 1.316 2.499-2.955z",fill:"#fff"})]}))),g=(e,t)=>{if(!(null==e?void 0:e.current))return;let l=e.current;if(l.muted){l.muted=!1,l.volume="up"===t?.05:0;return}let i="up"===t?l.volume+.05:l.volume-.05;i=Math.max(i=Math.min(i,1),0),l.volume=Number(i.toFixed(2)),0===i&&(l.muted=!0)},p=(e,t)=>{if(!(null==e?void 0:e.current))return;let l=e.current;if(l.muted){l.muted=!1,l.volume=Math.max(t/100,0);return}let i=l.volume+t/100;i=Math.max(i=Math.min(i,1),0),l.volume=Number(i.toFixed(2)),0===i&&(l.muted=!0)},I=(0,o.nl)(e=>{let{isActive:t,index:l,defaultIcon:o}=e,{playerRef:s,el:v}=(0,a.useContext)(n.ET),_=(0,a.useRef)(null);return(0,a.useEffect)(()=>{var e;if(!t)return;let l=null==v?void 0:v.querySelector(".douyin-player-volume"),i=null==v?void 0:v.querySelector(".douyin-player-volume-slider"),n=e=>{let t=(0,u.Q5)();e.stopPropagation(),e.preventDefault();let l=(t?1:-1)*parseInt(String(e.deltaY/20),10);0!==l&&p(s,l)},o=e=>{let{code:t}=e;if(d.Le.getConfig(d.gI.DisableNextPre)&&["ArrowUp","ArrowDown"].includes(e.code)){e.stopPropagation(),e.preventDefault(),"ArrowUp"===e.code?g(s,"up"):"ArrowDown"===e.code&&g(s,"down");return}let l=e.target,i=null==l?void 0:l.tagName;if("INPUT"!==i&&"TEXTAREA"!==i&&(null==l?void 0:l.contentEditable)!=="true"){if(e.shiftKey&&("Equal"===t||"Minus"===t)){var n,o;null===(n=_.current)||void 0===n||n.focus(),"Equal"===t?g(s,"up"):g(s,"down"),null===(o=_.current)||void 0===o||o.blur()}}},r=()=>{d.Le.setConfig(d.gI.DisableNextPre,!0)},a=()=>{d.Le.setConfig(d.gI.DisableNextPre,!1)},c=e=>{e.stopPropagation()};return null==l||l.addEventListener("wheel",n),null==l||l.addEventListener("mouseover",r),null==l||l.addEventListener("mouseout",a),null===(e=document)||void 0===e||e.addEventListener("keydown",o),null==i||i.addEventListener("pointerdown",c),()=>{var e;null==l||l.removeEventListener("wheel",n),null==l||l.removeEventListener("mouseover",r),null==l||l.removeEventListener("mouseout",a),null===(e=document)||void 0===e||e.removeEventListener("keydown",o),null==i||i.removeEventListener("pointerdown",c)}},[t]),(0,i.jsx)(r.dm,{ref:_,index:l,props:{IconVolume:o?void 0:c.Z,IconVolumeSmall:o?void 0:f,IconVolumeMuted:o?void 0:m,showVolume:!0}})});var E=()=>{let{isLivingPip:e}=(0,s.ds)();return(0,i.jsx)(I,{isActive:!0,position:e?0:1,index:e?2:4})}},26709:function(e,t,l){l.d(t,{X:function(){return T}});var i=l("520739"),n=l("878389");l("874386"),l("250440");var o=l("563097"),r=l("713097"),a=l.n(r),u=l("645260"),d=l.n(u),s=l("96008"),c=l.n(s),v=l("88648"),_=l("154953"),f=l("450402"),m=l("318034"),g=l("401953"),p=l("699235"),I=l("272775"),E=l("926012"),h=l("291575"),y=l("718770"),N=l("211286"),A=l("437998"),P={DEFAULT:0,0:"DEFAULT",GUEST:1,1:"GUEST"},w=e=>{let{type:t=0,isLock:l,cls:i,handleClick:n,joinText:r}=e;return(0,o.jsxs)("div",{onClick:n,className:a()(A.default.joinContainer,i),"data-e2e":"mic_seat",children:[(0,o.jsx)("div",{className:A.default.joinIcon,children:(0,o.jsx)("span",{className:a()(A.default.joinSvg,{[A.default.lockIcon]:l,[A.default.guestLockIcon]:1===t&&l,[A.default.joinGuest]:1===t})})}),(0,o.jsx)("span",{className:a()(A.default.joinText,"joinTextContent"),children:r})]})},b=l("625703"),S=l("578006"),C=l("164416"),x=l("187577"),L=l("207964");let T=e=>{var t,l,r,u;let{user:s,className:A,onJoinRoom:T,disable:D,onUserClick:k,isLock:V,showAnchorLabel:O,playModesPC:R,orderSingInfo:M,setFloatModal:j,avatarBorderColor:G,joinText:U=S.p.JOIN_CHAT,setRankParam:B,setRankListShow:H,teamfightInfo:F,guestBattleInfo:Y,giftLabelBackgroundColor:W,selfUidStr:Z,giftLabelIcon:Q="",giftLabelStyle:z={},allowSendGiftGuest:J=!0,onHover:K,isMvp:q,isRed:X,mvpIcon:$,position:ee,singV3Ab:et="0",animationMap:el,mvpUseridRef:ei,mvpChangeRef:en,audioPower:eo,isCrossLink:er=!1,roomBattleType:ea="pk",dynamic:eu=!1,isAudioStage:ed=!1,giftLabelMerge:es=!1}=e,[ec,ev]=v.useState(!1);v.useRef("");let e_=v.useMemo(()=>(null==s?void 0:s.is_background)===1,[s]),ef=v.useMemo(()=>(null==s?void 0:s.silence_status)!==_.Ai.STATUS_UNSILENCE,[s]),{isGuestBattle:em}=(0,N.Z)({guestBattleInfo:Y}),{giftNum:eg,isGroupFight:ep}=(0,b.Z)({listUser:s,teamfightInfo:F,selfUidStr:Z,guestBattleInfo:Y,isCrossLink:er,roomBattleType:ea}),eI=v.useCallback(e=>{e.talk>0?ev(!0):!e.talk&&ev(!1)},[]),{gameType:eE}=(0,x.zL)(),eh=v.useMemo(()=>{var e,t,l,o,r,a,u;let d=[];return M&&(null==M||null===(e=M.user_microphone_list)||void 0===e||e.forEach(e=>{if(e.is_singing){var t,l,o,r;(null==e?void 0:null===(t=e.microphone_list)||void 0===t?void 0:t[0].title_sponsor)&&(d=[(0,n._)((0,i._)({},null==e?void 0:null===(l=e.microphone_list)||void 0===l?void 0:l[0]),{toUserId:null!==(r=null==e?void 0:null===(o=e.order_user)||void 0===o?void 0:o.id_str)&&void 0!==r?r:""})])}})),Y&&(d=null==Y?void 0:null===(t=Y.results)||void 0===t?void 0:t.filter(e=>{var t,l;return String(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.id_str)===String(null==s?void 0:null===(l=s.user)||void 0===l?void 0:l.id_str)},[])),F&&(eE===C.D$.ROOMBATTLE?null==F||null===(a=F.team_infos)||void 0===a||null===(r=a.filter(e=>(null==e?void 0:e.team_id)==="1"))||void 0===r||null===(o=r[0])||void 0===o||null===(l=o.players)||void 0===l||l.forEach(e=>{var t;(null==e?void 0:e.title_sponsor)&&String(null==e?void 0:e.user_id)===String(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.id_str)&&(d=[e])}):null==F||null===(u=F.team_infos)||void 0===u||u.forEach(e=>{var t;null==e||null===(t=e.players)||void 0===t||t.forEach(e=>{var t;(null==e?void 0:e.title_sponsor)&&String(null==e?void 0:e.user_id)===String(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.id_str)&&(d=[e])})})),d||[]},[Y,F,M]),ey=e=>{null==e||e.stopPropagation(),B({teamfight_id:ep?null==F?void 0:F.teamfight_id_str:null==Y?void 0:Y.battle_id_str,user:null==s?void 0:s.user,isGuestContribution:em}),H(!0)};v.useEffect(()=>s?(null==eo||eo.on(null==s?void 0:s.linkmic_id_str,eI),()=>{ev(!1),null==eo||eo.off(null==s?void 0:s.linkmic_id_str,eI)}):c(),[eI,null==s?void 0:s.linkmic_id_str,eo]);let eN=v.useMemo(()=>{if(!em||!(null==s?void 0:s.user.id_str)||!(null==Y?void 0:Y.battle_id))return"";let e=null==Y?void 0:Y.status,t=null,l=null==el?void 0:el.get(`${null==s?void 0:s.user.id_str}_${null==Y?void 0:Y.battle_id}`);return(null==Y||Y.results.forEach(l=>{var i,n,o;if(String(l.guest_id)===String(null==s?void 0:null===(i=s.user)||void 0===i?void 0:i.id_str)){if([1,4].includes(Number(e))&&(null==l?void 0:l.role)===1)switch(Number(null==l?void 0:null===(o=l.crown_info)||void 0===o?void 0:null===(n=o.cur_grade)||void 0===n?void 0:n.level)){case 1:t="CrystalCrown";break;case 2:t="GemstoneCrown";break;case 3:t="DiamondCrown";break;default:t="Knuckle"}[1,4].includes(Number(e))&&(null==l?void 0:l.role)===2&&(t="HeartBreak"),(null==l?void 0:l.role)===0&&(t=""),2===Number(e)&&(null==l?void 0:l.role)===1&&(t="Victory")}}),l===t)?"":(null==el||el.set(`${null==s?void 0:s.user.id_str}_${null==Y?void 0:Y.battle_id}`,t),t)},[null==Y?void 0:Y.status,null==Y?void 0:Y.results,em,null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.id_str,null==Y?void 0:Y.battle_id]),eA=v.useMemo(()=>{if(!em)return"";let e="";return null==Y||Y.results.forEach(t=>{var l,i,n;if(String(t.guest_id)===String(null==s?void 0:null===(l=s.user)||void 0===l?void 0:l.id_str)){if((null==t?void 0:t.role)===1)switch(Number(null==t?void 0:null===(n=t.crown_info)||void 0===n?void 0:null===(i=n.cur_grade)||void 0===i?void 0:i.level)){case 1:e="CrystalCrown";break;case 2:e="GemstoneCrown";break;case 3:e="DiamondCrown";break;default:e="Knuckle"}(null==t?void 0:t.role)===2&&(e="HeartBreak")}}),e},[s,Y,em]),eP=v.useMemo(()=>(null==R?!!void 0:!!R.includes(h.V0.LinkmicPlayMode_OrderSing))||!1,[R]),ew=v.useMemo(()=>{var e;let t={};return null==M||M.user_microphone_list.forEach(e=>{var l,i,n,o,r;t[null==e?void 0:null===(l=e.order_user)||void 0===l?void 0:l.id_str]={userId:null==e?void 0:null===(i=e.order_user)||void 0===i?void 0:i.id_str,is_singing:null==e?void 0:e.is_singing,currentSingItem:null==M?void 0:M.current_sing_item,golden_microphone_icon:null==M?void 0:M.golden_microphone_icon,live_linkmic_order_sing_micro_opt:null==M?void 0:M.live_linkmic_order_sing_micro_opt,goldenCount:null===(r=e.microphone_list)||void 0===r?void 0:null===(o=r.filter(e=>e.microphone_type===f.W5.GOLDEN_MICROPHONE))||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.micro_phone_num}}),t[null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.id_str]},[M,s]),eb=v.useCallback(e=>{e.stopPropagation(),j(E.uH.ORDER_SING)},[j]),eS=(null===(l=(null!==(u=null==Y?void 0:Y.results)&&void 0!==u?u:[]).filter(e=>{var t,l;return String(e.guest_id)===(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.id_str)||String(e.guest_id_str)===(null==s?void 0:null===(l=s.user)||void 0===l?void 0:l.id_str)}))||void 0===l?void 0:l.length)>0,eC=v.useRef(),ex=(0,L.useInLiveAudioLayoutOptAB)();return s?(0,o.jsxs)("div",{onClick:k,className:a()(y.default.userContainer,A,{[y.default.dynamicAudioItem]:eu&&!ed,[y.default.audioStageUserScale]:eu&&ed,[y.default.infoNoShrink]:ex}),onMouseEnter:e=>null==K?void 0:K(e,eC),ref:eC,"data-e2e":"mic_seat",children:[(0,o.jsx)(g.b,{img:d()(s,"user.avatar_large.url_list[0]",""),isTalking:ec&&!ef,gender:null===(r=s.user)||void 0===r?void 0:r.gender,user:s,className:a()(y.default.avatar,{[y.default.userAdjust]:eu&&ed}),isLeave:e_,borderColor:G,battleIcon:eA,battleAnimation:eN,showAnchorLabel:O&&!eP,isMvp:q,mvpIcon:$,mvpUseridRef:ei,mvpChangeRef:en,titleSponsor:eh}),ed?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(p._,{isMute:ef,noName:!0,className:y.default.userNameRight})}):(0,o.jsxs)(o.Fragment,{children:[eP&&(0,o.jsx)(I._,{className:y.default.micphoneLabel,onClick:eb,isAnchor:O&&!eP,labelInfo:ew,singV3Ab:et,user:s,position:ee,titleSponsor:eh}),es?(0,o.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,o.jsx)("div",{style:{flex:"1 1 0%",minWidth:0},children:(0,o.jsx)(p._,{isMute:ef,className:y.default.userName,userName:d()(s,"user.nickname",""),onClick:ey})}),J&&(0,o.jsx)("div",{style:{flex:"0 0 auto",marginLeft:8},children:(0,o.jsx)(m.X,{giftNum:eg,isJoinGuestBattle:eS,onClick:ey,showGiftIcon:!W,background:W,giftLabelIcon:Q,type:em?m.l.GUEST:m.l.DEFAULT,giftLabelStyle:z,isMvp:q,isRed:X,mvpIcon:$,style:{position:"relative"},guestBattleInfo:Y,user:s})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p._,{isMute:ef,className:y.default.userName,userName:d()(s,"user.nickname",""),onClick:ey}),J&&(0,o.jsx)(m.X,{giftNum:eg,isJoinGuestBattle:eS,onClick:ey,showGiftIcon:!W,background:W,giftLabelIcon:Q,type:em?m.l.GUEST:m.l.DEFAULT,giftLabelStyle:z,isMvp:q,isRed:X,mvpIcon:$,style:{position:"relative"},guestBattleInfo:Y,user:s})]})]})]}):(0,o.jsx)(w,{type:em?P.GUEST:P.DEFAULT,cls:a()(A,{[y.default.dynamicAudioItem]:eu,[y.default.infoNoShrink]:ex}),isLock:V,joinText:U,handleClick:D||V?c():T,"data-e2e":"mic_seat"})}},91518:function(e,t,l){l.d(t,{s:function(){return N}}),l("874386"),l("250440");var i=l("563097"),n=l("713097"),o=l.n(n),r=l("88648"),a=l("629582"),u=l("178849"),d=l("393265"),s=l("926012"),c=l("777185"),v=l("291870"),_=l("788376"),f=l("456147"),m=l("516599"),g=l("58655"),p=l.p+"media/bg.394717bcadc491f0.png",I=l("231414"),E=l("197960");let h={[s.yP.AUDIO_1V8]:80,[s.yP.AUDIO_1V8_STAGE]:80,[s.yP.AUDIO_GRID]:80,[s.yP.VIDEO_1V6]:42.5,[s.yP.VIDEO_DYNAMIC]:63.56,[s.yP.VIDEO_GRID]:62.45,[s.yP.VIDEO_6V6]:61,[s.yP.VIDEO_2V4V4]:50.6},y=16/9,N=e=>{let{isAdmin:t=!1,roomId:l="",layout:n,renderElement:N,className:A,isTheaterOn:P,statusText:w,teamfightInfo:b,onClickStatusBar:S,isPreview:C,incomingPlayer:x=null}=e,{eventStore:L,linkmicStore:T}=(0,g.o)(),{linkmicEvent:D}=L||{},k=r.useRef(),[V,O]=r.useState(y),{isInPunish:R,leftTeamScore:M,rightTeamScore:j}=(0,_.Z)({teamfightInfo:b}),{player:G}=(0,d.n)(),U=x||G,B=r.useCallback(()=>{var e,t;let l=null==U?void 0:null===(e=U.root)||void 0===e?void 0:e.clientWidth,i=null==U?void 0:null===(t=U.root)||void 0===t?void 0:t.clientHeight;return l&&i?l/i:y},[]),H=r.useCallback(()=>{clearTimeout(k.current),k.current=setTimeout(()=>{O(B())},50)},[]);r.useEffect(()=>(null==U||U.on(a.FP.FULLSCREEN_CHANGE,H),()=>{null==U||U.off(a.FP.FULLSCREEN_CHANGE,H)}),[]);let F=r.useCallback(()=>{O(B())},[]);r.useEffect(()=>(window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}),[]),r.useEffect(()=>{H()},[P]);let Y=r.useMemo(()=>`${h[n]*y/V}%`,[V,n]),W=r.useMemo(()=>null==b?void 0:b.status,[b]),Z=r.useCallback(()=>(0,i.jsx)("div",{className:v.default.source,children:(0,i.jsx)(c.Z,{teamFightInfo:b,eggModeInfo:null==T?void 0:T.eggModeInfo,leftPKScore:M,rightPKScore:j,showAroundFaceStatus:R})}),[M,j,R,null==T?void 0:T.eggModeInfo]),Q=W===u.Hj.LinkmicTeamfightStatus_PREPARE&&t,z=()=>(0,i.jsx)("div",{className:v.default.actionBar,onClick:()=>$(),children:"开始团战"}),{hideEgg:J,isMutiEggTimeUseful:K}=(0,E.Z)(),q=r.useMemo(()=>(0,i.jsx)(I.Z,{isVideoGuropFight:!1,isGroupFight:!0,eggModeInfo:null==T?void 0:T.eggModeInfo}),[null==T?void 0:T.eggModeInfo]),X=r.useMemo(()=>{var e;return(0,i.jsxs)("div",{className:v.default.audioGridContainer,style:{width:Y},children:[(0,i.jsx)("div",{className:o()(v.default.mediumAudioItem,v.default.anchorItem),children:N(0)}),(null==T?void 0:null===(e=T.eggModeInfo)||void 0===e?void 0:e.egg_info)&&K&&[u.Hj.LinkmicTeamfightStatus_PLAYING,u.Hj.LinkmicTeamfightStatus_PUNISHING].includes(W)&&q,(0,i.jsxs)("div",{className:v.default.seatsGroupContainer,children:[(0,i.jsxs)("div",{className:v.default.topBar,children:[Z(),Q?z():w&&!C&&(0,i.jsx)("div",{className:v.default.status,onClick:()=>null==S?void 0:S(),children:w})]}),[void 0,void 0].map((e,t)=>{var l;return(0,i.jsxs)("div",{className:v.default.gridsArea,children:[(null==T?void 0:null===(l=T.eggModeInfo)||void 0===l?void 0:l.egg_info)&&K&&[u.Hj.LinkmicTeamfightStatus_PLAYING,u.Hj.LinkmicTeamfightStatus_PUNISHING].includes(W)&&(0,i.jsxs)("div",{className:J?v.default.hide:v.default.show,children:[(0,i.jsx)("div",{className:v.default.eggLeftSide,style:{backgroundImage:`${0===t?"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))":"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}`}}),(0,i.jsx)("div",{className:v.default.eggRightSide,style:{backgroundImage:`${0===t?"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))":"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}`}})]}),(0,i.jsxs)("div",{className:v.default.gridsBox,children:[(0,i.jsx)("div",{className:v.default.grid,children:[void 0,void 0].map((e,l)=>(0,i.jsx)("div",{className:v.default.mediumAudioItem,children:N(4*l+1+2*t)},`${t}_${l}`))}),(0,i.jsx)("div",{className:v.default.grid,children:[void 0,void 0].map((e,l)=>(0,i.jsx)("div",{className:v.default.mediumAudioItem,children:N(4*l+2+2*t)},`${t}_${l}`))})]})]},t)})]})]})},[N,Y,w,Z,W,Q,null==T?void 0:T.eggModeInfo]),$=()=>{null==D||D.liveGroupFightStart(),(0,f.lV)({room_id:l}).then(e=>{var t,l,i,n;(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.prompts)?(m.F.info(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.prompts,null==U?void 0:U.root),null==D||D.liveGroupFightStartSuccess("fail_member_cnt")):null==D||D.liveGroupFightStartSuccess("success")})};return r.useEffect(()=>{null==T||T.setLayoutBackgroundImg(n===s.yP.AUDIO_1V8||n===s.yP.AUDIO_GRID||n===s.yP.AUDIO_1V8_STAGE?p:"")},[n]),(0,i.jsx)("div",{className:o()(v.default.container,A,{[v.default.audioBackground]:[s.yP.AUDIO_GRID,s.yP.AUDIO_1V8_STAGE,s.yP.AUDIO_1V8,s.yP.AUDIO_DOUBLE_C].includes(n)}),children:(n===s.yP.AUDIO_1V8||n===s.yP.AUDIO_GRID||n===s.yP.AUDIO_1V8_STAGE)&&X})}},562923:function(e,t,l){l.d(t,{PY:function(){return w}}),l(874386),l(250440);var i=l(563097),n=l(713097),o=l.n(n),r=l(88648),a=l(629582),u=l(393265),d=l(454194),s=l(926012),c=l(127845),v=l(456147),_=l(83188),f=l(779145),m=l.n(f),g=l(178849),p=l(788376),I=l(777185),E=l(516599),h=l(58655),y=l(231414),N=l(197960);let A={[s.yP.AUDIO_1V8]:50.4,[s.yP.AUDIO_GRID]:42,[s.yP.VIDEO_1V6]:42.5,[s.yP.VIDEO_1V8]:42.5,[s.yP.VIDEO_DYNAMIC]:63.56,[s.yP.VIDEO_GRID]:62.45,[s.yP.VIDEO_6V6]:61,[s.yP.VIDEO_1_V_8]:63.56,[s.yP.VIDEO_1_V_6]:63.56,[s.yP.VIDEO_1_V_3]:63.56,[s.yP.VIDEO_DYNAMIC_FLOAT]:32,[s.yP.VIDEO_T1_V_B8]:43},P=16/9,w=e=>{let{layout:t,renderElement:l,className:n,backgroundImg:f,isTheaterOn:w,micSeats:b,teamfightInfo:S,ext:C={},isAdmin:x=!1,roomId:L,onClickStatusBar:T,isPreview:D=!1,incomingPlayer:k=null}=e,{eventStore:V,linkmicStore:O}=(0,h.o)(),{linkmicEvent:R}=V||{},{isInPunish:M,leftTeamScore:j,rightTeamScore:G,statusTexting:U,redGroupSeats:B}=(0,p.Z)({teamfightInfo:S}),H=r.useRef(),[F,Y]=r.useState(P),{player:W}=(0,u.n)(),Z=k||W,Q=r.useCallback(()=>{var e,t;let l=null==Z?void 0:null===(e=Z.root)||void 0===e?void 0:e.clientWidth,i=null==Z?void 0:null===(t=Z.root)||void 0===t?void 0:t.clientHeight;return l&&i?l/i:P},[]),z=r.useCallback(()=>{clearTimeout(H.current),H.current=setTimeout(()=>{Y(Q())},50)},[]);r.useEffect(()=>(null==Z||Z.on(a.FP.FULLSCREEN_CHANGE,z),()=>{null==Z||Z.off(a.FP.FULLSCREEN_CHANGE,z)}),[]);let J=r.useCallback(()=>{Y(Q())},[]);r.useEffect(()=>(window.addEventListener("resize",J),()=>{window.removeEventListener("resize",J)}),[]),r.useEffect(()=>{z()},[w]);let K=r.useMemo(()=>`${A[t]*P/F}%`,[F,t]),q=r.useMemo(()=>null==S?void 0:S.status,[S]),{hideEgg:X,isMutiEggTimeUseful:$}=(0,N.Z)(),ee=r.useMemo(()=>(0,i.jsx)(y.Z,{isVideoGuropFight:!0,isGroupFight:!0,eggModeInfo:null==O?void 0:O.eggModeInfo}),[null==O?void 0:O.eggModeInfo]);r.useEffect(()=>{q===g.Hj.LinkmicTeamfightStatus_FINISHED&&(null==O||O.setEggModeInfo({}))},[q]);let et=r.useCallback(()=>(0,i.jsx)("div",{className:d.default.sourceBar,children:[g.Hj.LinkmicTeamfightStatus_PLAYING,g.Hj.LinkmicTeamfightStatus_PUNISHING].includes(q)?(0,i.jsx)(I.Z,{teamFightInfo:S,eggModeInfo:null==O?void 0:O.eggModeInfo,leftPKScore:j,rightPKScore:G,showAroundFaceStatus:M}):(0,i.jsx)("div",{className:d.default.emptyBar})}),[j,G,M,K,q]),el=()=>{null==R||R.liveGroupFightStart(),(0,v.lV)({room_id:L}).then(e=>{var t,l,i,n;(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.prompts)?(E.F.info(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.prompts,null==Z?void 0:Z.root),null==R||R.liveGroupFightStartSuccess("fail_member_cnt")):null==R||R.liveGroupFightStartSuccess("success")})},ei=()=>(0,i.jsx)("div",{className:d.default.actionBar,onClick:e=>{el()},children:"开始团战"}),en=q===g.Hj.LinkmicTeamfightStatus_PREPARE&&x,eo=r.useMemo(()=>{var e,t;return(0,i.jsxs)("div",{className:o()(d.default.videoT1B8Container),style:{width:K},children:[(0,i.jsx)("div",{className:o()(d.default.anchor,"__clairvoyance"),children:l(0)}),(null==O?void 0:null===(e=O.eggModeInfo)||void 0===e?void 0:e.egg_info)&&$&&[g.Hj.LinkmicTeamfightStatus_PLAYING,g.Hj.LinkmicTeamfightStatus_PUNISHING].includes(q)&&ee,!D&&(0,i.jsxs)("div",{className:d.default.topBar,children:[et(),en?ei():U&&(0,i.jsx)("div",{className:d.default.status,onClick:e=>{null==T||T(e)},children:U})]}),(0,i.jsxs)("div",{className:d.default.guests,children:[(null==O?void 0:null===(t=O.eggModeInfo)||void 0===t?void 0:t.egg_info)&&$&&[g.Hj.LinkmicTeamfightStatus_PLAYING,g.Hj.LinkmicTeamfightStatus_PUNISHING].includes(q)&&(0,i.jsxs)("div",{className:`${d.default.eggModeAnimate} ${X?d.default.hide:d.default.show}`,children:[(0,i.jsxs)("div",{className:d.default.eggModeAnimateChild,children:[(0,i.jsx)("div",{className:d.default.eggLeftSide,style:{backgroundImage:"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))"}}),(0,i.jsx)("div",{className:d.default.eggRightSide,style:{backgroundImage:"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))"}})]}),(0,i.jsxs)("div",{className:d.default.eggModeAnimateChild,children:[(0,i.jsx)("div",{className:d.default.eggLeftSide,style:{backgroundImage:"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}}),(0,i.jsx)("div",{className:d.default.eggRightSide,style:{backgroundImage:"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}})]})]}),[void 0,void 0].map((e,t)=>(0,i.jsx)("div",{className:d.default.gridRow,children:[void 0,void 0,void 0,void 0].map((e,n)=>{var r,a;let u=n+1+4*t;return(0,i.jsx)("div",{className:o()(d.default.videoItem,"videoItem","__clairvoyance",{[d.default.red]:B.includes(u)&&!(null==b?void 0:null===(r=b[u])||void 0===r?void 0:r.user),[d.default.blue]:!B.includes(u)&&!(null==b?void 0:null===(a=b[u])||void 0===a?void 0:a.user)}),children:l(u)},`${t}_${n}`)})},t))]})]})},[l,K,et,U,ei,b,D,null==O?void 0:O.eggModeInfo]),[er,ea]=r.useState({}),eu=r.useRef(null);r.useEffect(()=>(eu.current=setTimeout(()=>{ea({})},300),()=>{eu.current&&clearTimeout(eu.current)}),[F,t]);let ed=r.useMemo(()=>{try{var e;let t=document.getElementsByClassName("__clairvoyance");return null===(e=m()(t))||void 0===e?void 0:e.map(e=>(0,_._q)(null==Z?void 0:Z.root,e))}catch(e){return[]}},[b,F,t,er]);return(0,i.jsxs)("div",{className:o()(d.default.container,n,{[d.default.audioBackground]:[s.yP.AUDIO_GRID,s.yP.AUDIO_1V8,s.yP.AUDIO_DOUBLE_C].includes(t),[d.default.video6v6Background]:t===s.yP.VIDEO_6V6}),children:[(e=>{if(e===s.yP.VIDEO_T1_V_B8)return eo;return null})(t),t===s.yP.VIDEO_T1_V_B8&&f&&(0,i.jsx)(c.Z,{backgoundImgSrc:f,clairvoyancePaths:ed})]})}},56906:function(e,t,l){l.d(t,{$:function(){return Y},Z:function(){return W}});var i=l("520739");l("874386"),l("250440"),l("429532"),l("675373"),l("819117");var n=l("563097"),o=l("88648"),r=l("629582"),a=l("877639"),u=l.n(a),d=l("146778"),s=l("792907"),c=l("466621"),v=l("26709"),_=l("926012"),f=l("664014"),m=l("312435"),g=l("393265"),p=l("697041"),I=l.p+"media/groupFightBg.394717bcadc491f0.png",E=l("309585"),h=l("14108"),y=l("361993"),N=l("211286"),A=l("91518");l("284961"),l("826893");var P=l("948922"),w=l("645260"),b=l.n(w),S=l("578006");let C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("https")?e:e.replace("http","https")},x=(e,t)=>{let{isGroupFight:l=!1,redGroupSeats:i=[],isGuestBattle:n=!1}=t;return n?"加入作战":l?`加入${i.includes(e)?"红队":"蓝队"}`:S.p.JOIN_CHAT},L=(e,t,l,i)=>{var n,o,r,a,u,d,s,c,v,_,f,m,g;let{isGuestBattle:p=!1}=i,I=p?C(b()(e,"ui_info.score_icon.url_list[0]","")):"",E={},h=null==l?void 0:null===(n=l.user)||void 0===n?void 0:n.id_str,y=null==e?void 0:null===(o=e.results)||void 0===o?void 0:o.filter(e=>String(e.guest_id)===h||String(e.guest_id_str)===h)[0];if(!y||y.role===P.L0.GuestBattlePlayerRoleNone)return{giftIcon:I,giftStyle:E};let N=String(null!==(u=null==y?void 0:null===(a=y.crown_info)||void 0===a?void 0:null===(r=a.cur_grade)||void 0===r?void 0:r.level)&&void 0!==u?u:-1),A=null==y?void 0:y.role;if(E={width:"22px",height:"22px",maxWidth:"22px",maxHeight:"22px",position:"absolute",top:"-2px",left:"-4px"},A===P.L0.GuestBattlePlayerRoleWinner){let e=null!==(c=null==t?void 0:null===(s=t.guest_battle_theme_element)||void 0===s?void 0:null===(d=s.first_config)||void 0===d?void 0:d.grade_configs)&&void 0!==c?c:[];e.length&&(I=C(null===(_=e[N])||void 0===_?void 0:null===(v=_.play_value_icon)||void 0===v?void 0:v.url_list[0]))}else{let e=null==t?void 0:null===(m=t.guest_battle_theme_element)||void 0===m?void 0:null===(f=m.straggler_config)||void 0===f?void 0:f.grade_config;(null==e?void 0:e.play_value_icon)&&(I=C(null==e?void 0:null===(g=e.play_value_icon)||void 0===g?void 0:g.url_list[0]))}return{giftIcon:I,giftStyle:E}};var T=l("456147"),D=l("884866"),k=l("159471"),V=l("562923"),O=l.p+"media/guestBattleBg.90cb9b030e3bf46e.png",R=l("310732"),M=l("62014"),j=l("204503"),G=l("551572"),U=l("622307");let B=(0,h.Pe)(),H=e=>E.Z.get(`${B}/webcast/linkmic_audience/get_play_mode_info/`,{params:e}),F=e=>E.Z.get(`${B}/webcast/dress/list/`,{params:e}),Y=e=>{var t,l;let{anchorId:a,roomId:E,className:h,linkerMap:P={},functionType2:w,onLayoutChange:b,dressListAll:S=[],linkmicVideoEqualLayoutFrameOpt:C="0",setIsPk:B,layout:Y}=e,W=!!(0,U.yk)()||e.disableClairvoyance,{player:Z}=(0,g.n)(),[Q,z]=o.useState(Y),[J,K]=o.useState(c.Fk),[q,X]=o.useState({}),$=o.useRef({}),ee=o.useRef({}),[et,el]=o.useState(!1),ei=o.useRef(void 0);ei.current=Q;let[en,eo]=o.useState(0),er=o.useRef(new M.a),[ea,eu]=o.useState(),[ed,es]=o.useState(),ec=null==ea?void 0:null===(t=ea.data)||void 0===t?void 0:t.teamfight_info,ev=null==ea?void 0:null===(l=ea.data)||void 0===l?void 0:l.guest_battle_info,e_=o.useMemo(()=>{var e,t;return Number.isInteger(null==ed?void 0:null===(e=ed.data)||void 0===e?void 0:e.gift_id)&&Number(null==ed?void 0:null===(t=ed.data)||void 0===t?void 0:t.gift_id)>0},[null==ed?void 0:ed.data]),ef=o.useMemo(()=>void 0!==Q,[Q]);o.useEffect(()=>{E&&ef&&(H({room_id:E,_point:2}).then(e=>{eu(null==e?void 0:e.data)}),(0,T.RO)({room_id:E}).then(e=>{es(null==e?void 0:e.data)}))},[E,ef]),o.useEffect(()=>{let e=null==ev?void 0:ev.dress_id;if(""!==e){let t=null==S?void 0:S.find(t=>(null==t?void 0:t.dress_id)===e);t?X(t):F({dress_id:e}).then(e=>{var t,l,i,n;if(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data){let t=null!==(n=null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:l.dress_list)&&void 0!==n?n:[];t.length&&X(t[0])}})}},[null==ev?void 0:ev.dress_id]),o.useEffect(()=>{P[5]&&[21,22].includes(en)?22===en?z(_.yP.AUDIO_GRID):26===en?z(_.yP.AUDIO_DOUBLE_C):25===en?z(_.yP.MATE_CUSTOM):z(_.yP.AUDIO_1V8):P[16]&&z(_.yP.VIDEO_6V6)},[P,en]);let em=o.useCallback(()=>J,[K,J]),eg=o.useMemo(()=>(0,D.Qx)(J),[J]),ep=o.useCallback(u()(()=>(0,p.m)(E,a).then(e=>{let{data:{data:t,status_code:l}}=e;if(0===l){var i,n,o,r,a,u;let e={},l={};return eo(null==t?void 0:null===(i=t.linker_base_info)||void 0===i?void 0:i.ui_layout),null==t||null===(n=t.user)||void 0===n||n.forEach(t=>{t.linkmic_id_str&&(e[t.linkmic_id_str]=t)}),ei.current===_.yP.VIDEO_6V6&&(null==t||null===(a=t.linker_content_map[null===(u=Object.keys(null==t?void 0:t.linker_content_map))||void 0===u?void 0:u[0]])||void 0===a||null===(r=a.linked_users)||void 0===r||r.map(t=>{t.user_position=t.user_position+_.Lf[Q],t.linkmic_id_str&&(e[t.linkmic_id_str]=t)})),null==t||null===(o=t.locked_positions)||void 0===o||o.forEach(e=>{("number"==typeof e.position||"string"==typeof e.position)&&(l[e.position]=e)}),$.current=Object.assign({},$.current,e),ee.current=l,Promise.resolve()}}),3e3),[E,a,Q]),{isGroupFight:eI,isGroupPlaying:eE,isInPunish:eh,redGroupSeats:ey,statusTexting:eN}=(0,y.Z)({teamfightInfo:ec,linkMicSeats:J}),{isGuestBattle:eA}=(0,N.Z)({guestBattleInfo:ev});o.useEffect(()=>{let e=Object.keys(P);if(!(e.length<=0)&&(1!==e.length||"4"!==e[0]))return ep().then(()=>{let e=(0,i._)({},c.Fk);Object.keys($.current).forEach(t=>{let l=$.current[t];e[l.user_position]={idx:l.user_position,user:l}}),K(e)}).finally(()=>{el(!0)}),()=>{(null==ep?void 0:ep.cancel)&&(null==ep||ep.cancel())}},[]);let eP=o.useCallback(()=>$.current,[]),ew=o.useCallback(()=>ee.current,[]);o.useEffect(()=>{null==b||b(Q)},[Q]),(0,c.wz)({setLayout:z,enable:!0,setSeats:K,getSeats:em,layout:Q,getUsers:eP,getPositions:ew,onUsersUpdate:et&&ep,roomIdStr:E,audioPower:er.current,setIsPk:B});let eb=o.useCallback(()=>{z(void 0)},[]);o.useEffect(()=>{if(Q===_.yP.AUDIO_1V8||Q===_.yP.AUDIO_1V8_STAGE||Q===_.yP.AUDIO_GRID||Q===_.yP.AUDIO_DOUBLE_C||Q===_.yP.VIDEO_1V6||Q===_.yP.VIDEO_1V8||Q===_.yP.VIDEO_2V4V4||Q===_.yP.VIDEO_GRID||Q===_.yP.VIDEO_6V6||Q===_.yP.VIDEO_DYNAMIC||Q===_.yP.VIDEO_DYNAMIC_FLOAT||Q===_.yP.VIDEO_1_V_3||Q===_.yP.VIDEO_1_V_6||Q===_.yP.VIDEO_1_V_8||Q===_.yP.VIDEO_T1_V_B8||Q===_.yP.MATE_CUSTOM){var e;el(!0),(null===(e=Object.keys($.current))||void 0===e?void 0:e.length)===0&&ep().then(()=>{let e=Q===_.yP.MATE_CUSTOM?{}:(0,i._)({},c.Fk);Q===_.yP.AUDIO_DOUBLE_C&&(e[9]={idx:9}),Object.keys($.current).forEach(t=>{let l=$.current[t];e[l.user_position]={idx:l.user_position,user:l}}),K(e)}).finally(()=>{el(!0)})}else el(!1)},[Q]),o.useEffect(()=>(Z.on(r.FP.CHANGE_URL,eb),()=>{Z.off(r.FP.CHANGE_URL,eb)}),[]);let eS=o.useCallback(e=>{var t,l,i,o,r,u,d,c;let f=eg[e];if(Q===_.yP.AUDIO_1V8||Q===_.yP.AUDIO_1V8_STAGE||Q===_.yP.AUDIO_GRID||Q===_.yP.AUDIO_DOUBLE_C){let r=x(e,{isGroupFight:eI,isGuestBattle:eA,redGroupSeats:ey}),{giftIcon:u,giftStyle:d}=L(ev,q,null==f?void 0:f.user,{isGuestBattle:eA});return(0,n.jsx)(v.X,{user:null==f?void 0:f.user,isLock:(null==f?void 0:null===(t=f.info)||void 0===t?void 0:t.status)===s.U.LinkmicPositionStatus_Locked,giftLabelBackgroundColor:[eE,eh].some(Boolean)&&0!==e?ey.includes(e)?"rgba(248, 42, 116, 1)":"rgba(24, 158, 254, 1)":void 0,dynamic:!eI&&(0,G.D)().includes(Number(en)),joinText:r,giftLabelIcon:u,giftLabelStyle:d,setFloatModal:()=>null,showAnchorLabel:(0,D.ic)(eg)&&String(null===(o=eg[e])||void 0===o?void 0:null===(i=o.user)||void 0===i?void 0:null===(l=i.user)||void 0===l?void 0:l.id_str)===String(a),audioPower:er.current})}if(Q===_.yP.VIDEO_1V6||Q===_.yP.VIDEO_1V8||Q===_.yP.VIDEO_2V4V4||Q===_.yP.VIDEO_DYNAMIC||Q===_.yP.VIDEO_GRID||Q===_.yP.VIDEO_6V6||Q===_.yP.VIDEO_DYNAMIC_FLOAT||Q===_.yP.VIDEO_1_V_8||Q===_.yP.VIDEO_1_V_6||Q===_.yP.VIDEO_1_V_3||Q===_.yP.VIDEO_T1_V_B8||Q===_.yP.MATE_CUSTOM)return Q!==_.yP.MATE_CUSTOM||(null==f?void 0:f.user)?(0,n.jsx)(m.W,{idx:e,isLock:(null==f?void 0:null===(r=f.info)||void 0===r?void 0:r.status)===s.U.LinkmicPositionStatus_Locked,user:null==f?void 0:f.user,layout:Q,position:e,isPreview:!0,setFloatModal:()=>null,showAnchorLabel:(0,D.ic)(eg)&&String(null===(c=eg[e])||void 0===c?void 0:null===(d=c.user)||void 0===d?void 0:null===(u=d.user)||void 0===u?void 0:u.id_str)===String(a),joinText:x(e,{isGroupFight:eI,isGuestBattle:eA,redGroupSeats:ey}),audioPower:er.current,style:"1"===C&&(0,G.D)().includes(en)?{border:"2px solid #140731"}:void 0}):null;return null},[Q,eg,ev,q,eI,eA,a,en]),eC=(0,j.R)(J,a,Q),ex=o.useMemo(()=>G.dr.includes(Number(en)),[en]);if(eI)return Q===_.yP.VIDEO_T1_V_B8?(0,n.jsx)(V.PY,{layout:Q,count:Object.keys(J).length,renderElement:eS,teamfightInfo:ec,statusText:eN,micSeats:J,roomId:E,backgroundImg:I,isPreview:!0}):(0,n.jsx)(A.s,{className:h,layout:Q,count:Object.keys(J).length,renderElement:eS,statusText:eN,isPreview:!0});return(0,n.jsx)(n.Fragment,{children:ex?(0,n.jsx)(k.X0,{idPrefix:"preview",className:h,renderElement:eS,layout:en,linkers:eC,incomingPlayer:Z}):(0,n.jsx)(f.S,{className:h,layout:Q,count:Object.keys(J).length,renderElement:eS,isGuestBattle:eA,backgroundImg:eA?O:[_.yP.AUDIO_1V8_STAGE,_.yP.AUDIO_1V8,_.yP.AUDIO_GRID,_.yP.AUDIO_DOUBLE_C].includes(Q)&&e_?d:[_.yP.AUDIO_1V8_STAGE,_.yP.AUDIO_1V8,_.yP.AUDIO_GRID,_.yP.AUDIO_DOUBLE_C].includes(Q)&&!e_?R:null,micSeats:eg,ext:{showVideoDynamicFloatLayoutJoinBtn:!1},linkers:eC,uiLayout:en,linkmicVideoEqualLayoutFrameOpt:C,disableClairvoyance:W})})};var W=Y},697041:function(e,t,l){l.d(t,{Y:function(){return s},m:function(){return c}});var i=l(620923),n=l(14108),o=l(854575),r=l(428775),a=l.n(r);let u=`${(0,n.Pe)()}`,d=a().create({baseURL:u});(0,o.U)(d);let s=async(e,t)=>{let l=d.get("/webcast/distribution/check_user_live_status/",{withCredentials:!0,params:{user_ids:e,aid:6383,distribution_scenes:t,device_platform:"webapp"}});return l.then(l=>{var n,o,r;let{status_code:a,data:u=[]}=(null==l?void 0:l.data)||{},d=null==l?void 0:null===(n=l.headers)||void 0===n?void 0:n["x-tt-logid"];null===(r=(0,i.OK)())||void 0===r||null===(o=r.sendEvent)||void 0===o||o.call(r,{name:"check_live_status_live_success",categories:{status_code:a,data:u,logId:d,userId:e,scene:t},type:"event"})}),l.catch(l=>{var n,o;null===(o=(0,i.OK)())||void 0===o||null===(n=o.sendEvent)||void 0===n||n.call(o,{name:"check_live_status_error",categories:{userId:e,scene:t,err:l},type:"event"})}),l},c=(e,t)=>d.get("/webcast/linkmic_audience/list/v2/",{withCredentials:!0,params:{room_id:e,aid:6383,anchor_id:t,live_id:1,device_platform:"web",language:navigator.language}})},502075:function(e,t,l){l.d(t,{W:function(){return _},Z:function(){return m}});var i=l(520739),n=l(563097),o=l(88648),r=l(176286),a=l(827045),u=l(687761),d=l(393265),s=l(171190),c=l(402971);let v=e=>{let t=e%60,l=Math.floor(e/60);return 0===l?`${t}秒`:0===t?`${l}分钟`:`${l}分钟${t}秒`};var _={IN_LIVING_ROOM:1,1:"IN_LIVING_ROOM",COMMON_SCENE:2,2:"COMMON_SCENE",IN_LIVING_RECOMMEND:3,3:"IN_LIVING_RECOMMEND",LIVING_SEARCH:4,4:"LIVING_SEARCH"};let f={FIRST:"首",STRIGHT:"直"},m=e=>{var t;let{scene:l=1,logParams:_={},isFirstLive:m=!1,onPaidLiveTryWatch:g=()=>{},watchTime:p=180}=e,{player:I}=(0,d.n)(),E=()=>{setTimeout(()=>{null==I||I.pause()},1)};o.useEffect(()=>{null==I||I.pause();let e=I.video.style.display,t=(0,s.K)(I,"xg-controls");return(0,s.K)(I,"xg-enter"),I.video.style.display="none",null==I||I.on("play",E),()=>{try{t(),null==I||I.play(),null==I||I.off("play",E),I.video.style.display=e}catch(e){}}},[I]);let{dispatch:h}=null!==(t=(0,c.useUserInfoContext)())&&void 0!==t?t:{},y=()=>!1,N=()=>{1===l||3===l?(0,a.p)().then(e=>{var t,l;e({headerText:`登录后免费试看${v(p)}`,success:async()=>{!y()&&window.location.reload()},next:`https://${null===(l=window)||void 0===l?void 0:null===(t=l.location)||void 0===t?void 0:t.host}`,enterMethod:"paidlive"})}):(2===l||4===l)&&(0,a.p)().then(e=>{var t,l;e({headerText:`登录后免费试看${v(p)}`,success:async()=>{null==h||h({type:"updateUserInfo"})},next:`https://${null===(l=window)||void 0===l?void 0:null===(t=l.location)||void 0===t?void 0:t.host}`,enterMethod:"paidlive"})});try{null==g||g()}catch(e){}};return o.useEffect(()=>{1===l?(0,u.zq)(1===l?"paidlive_inlive":"paidlive_window"):(0,u.Wr)((0,i._)({},_))},[l]),(0,n.jsxs)("div",{className:r.default.smegmae_contianer,children:[(0,n.jsxs)("div",{className:r.default.smegmae_contianer_title,children:["本",m?f.FIRST:f.STRIGHT,"播为付费",m?f.FIRST:f.STRIGHT,"播"]}),(0,n.jsxs)("div",{className:r.default.smegmae_contianer_desc,children:["购票后可观看整场",m?f.FIRST:f.STRIGHT,"播"]}),(0,n.jsxs)("div",{className:r.default.smegmae_contianer_button,onClick:()=>N(),children:["免费试看",v(p)]})]})}},587687:function(e,t,l){l.r(t),l.d(t,{PaidLivePlugin:function(){return Q},default:function(){return z}});var i=l("520739"),n=l("878389");l("874386"),l("250440");var o=l("563097"),r=l("88648"),a=l("171190");l("819117"),l("675373");var u=l("759797"),d=l("20568"),s=l("637005"),c=l("399796"),v=l("916956"),_=l("393265"),f=l("645260"),m=l.n(f),g=l("877639"),p=l.n(g),I=l("134974"),E=l("456147"),h=l("519055"),y=l("457388");let N=function(e,t,l,o,a,f,g,N,A,P){let w=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,b=(0,r.useRef)(0),S=(0,r.useRef)({}),C=(0,r.useRef)(),x=(0,r.useRef)(),L=(0,r.useRef)({[u.PING_TYPE.TRY_WATCH_LEAVE]:!1}),T=(0,r.useRef)(""),[D,k]=(0,r.useState)(0),[V,O]=(0,r.useState)(A),R=(0,r.useRef)(!1),M=(0,r.useRef)(!1),{player:j}=(0,_.n)(),G=w||j,U=r.useCallback(e=>{let t=m()(e,"data.data.duration",0),l=m()(e,"data.data.delivery",0),r=m()(e,"data.data.ret_type",1),u=m()(e,"data.data.right_type",0);o(e=>(0,n._)((0,i._)({},e),{duration:t,delivery:l,view_right:0!==u?1:0})),a(r)},[o,a]),B=r.useCallback(()=>(null==f?void 0:f.paid_live_type)===d.xc.EQUITABLE_CAMERA_POSITION?{paid_live_type:null==f?void 0:f.paid_live_type,entity_id:l}:{},[f,l]),H=r.useCallback(()=>{Math.floor(A-b.current)>0?k(b.current+1):k(A)},[A]),F=()=>{(null==x?void 0:x.current)&&clearInterval(x.current)};r.useEffect(()=>{b.current=D,l&&M.current&&(S.current[l]=b.current,(0,I.V)(S.current)),O(Math.floor(A-b.current))},[D,A]),r.useEffect(()=>{s.emit(s.EVENT.paidLiveDuration,{last_time:Math.floor(V),ticket_id_str:l})},[V,l]);let Y=r.useCallback(p()(async()=>{if(Math.floor(A-b.current)>0)try{let e=await (0,E.xL)((0,i._)({id:l,id_type:1,ping_type:u.PING_TYPE.TRY_WATCH_START,timestamp:Math.floor(Date.now()/1e3)},B()));y.kg.info("ping 上报试看开始",e),U(e)}catch(e){y.kg.error("ping 上报试看error",e)}C.current&&C.current&&clearInterval(C.current),C.current=setInterval(async()=>{if(Math.floor(A-b.current)>0){let e=await (0,E.xL)((0,i._)({id:l,id_type:1,ping_type:u.PING_TYPE.COMMON_PING,timestamp:Math.floor(Date.now()/1e3)},B()));y.kg.info("ping 上报试看",e),U(e)}},1e4,!0)},3e3),[l,U,A]),W=r.useCallback(()=>{var e;let i=c.Q.getItem({sKey:u.storage.CookieKeys.PaidLiveDuration})||{};S.current=i,k(Math.max(Number(null===(e=S.current)||void 0===e?void 0:e[l])||0,Math.min(t,null==f?void 0:f.max_preview_duration))),P&&requestAnimationFrame(()=>{s.emit(s.EVENT.paidLiveInitTime,{})}),M.current=!0},[l,t]),Z=()=>{if(!h.s)C.current&&clearInterval(C.current)};r.useEffect(()=>{W()},[W]);let Q=r.useCallback(()=>{if(!h.s)x.current&&clearInterval(x.current),Y(),x.current=setInterval(()=>{H()},1e3,!0),R.current=!0},[H,Y]),z=r.useCallback(async()=>{if(!L[u.PING_TYPE.TRY_WATCH_LEAVE]){if(Z(),F(),null==T?void 0:T.current)try{L[u.PING_TYPE.TRY_WATCH_LEAVE]=!0;let e=await (0,E.xL)((0,i._)({id:T.current,id_type:1,ping_type:u.PING_TYPE.TRY_WATCH_LEAVE,timestamp:Math.floor(Date.now()/1e3)},B()));T.current===l&&U(e),y.kg.info("ping 上报离开",e)}catch(e){y.kg.info("ping 上报离开error",e)}}},[U,l]),J=(0,r.useRef)(!0);(0,r.useEffect)(()=>()=>{x.current&&clearInterval(x.current),C.current&&clearInterval(C.current)},[]),(0,v.C)(()=>{if(!!e)return!G.paused&&(Q(),J.current=!1),G&&(null==G||G.on("pause",z)),G&&(null==G||G.on("play",Q)),()=>{G&&(null==G||G.off("pause",z)),G&&(null==G||G.off("play",Q))}},[G,e,g,z,Q]);let K=r.useCallback(async()=>{if(g===u.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&0===N)try{let e=await (0,E.xL)((0,i._)({id:l,id_type:1,ping_type:u.PING_TYPE.PERFORMANCE,timestamp:Math.floor(Date.now()/1e3)},B()));y.kg.info("ping 上报履约",e),U(e)}catch(e){y.kg.info("ping 上报履约error",e)}},[g,N,l,U]);return r.useEffect(()=>{l&&z().finally(()=>{L[u.PING_TYPE.TRY_WATCH_LEAVE]=!1,T.current=l})},[l]),r.useEffect(()=>()=>{z()},[]),r.useEffect(()=>{if(!!e)return!G.paused&&K(),G&&(null==G?void 0:G.on)&&G.on("play",K),()=>{null==G||G.off("play",K)}},[G,K,e]),{lastTime:V}};var A=l("309931"),P=l("939626"),w=l("647677");let b=(0,r.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,n._)((0,i._)({width:8,height:10,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M6.805 1.84A2.19 2.19 0 0 1 5.845.4a1.958 1.958 0 0 1-.04-.4H4.227v6.323A1.327 1.327 0 0 1 2.905 7.6c-.223 0-.432-.055-.614-.155a1.323 1.323 0 0 1-.71-1.172A1.329 1.329 0 0 1 3.3 5.005v-1.61A2.908 2.908 0 0 0 0 6.272c0 .983.49 1.85 1.24 2.378a2.885 2.885 0 0 0 1.665.527 2.91 2.91 0 0 0 2.904-2.904v-3.21c.614.446 1.373.71 2.191.71V2.195c-.44 0-.85-.131-1.195-.354z",fill:"#A6A6A6"})}))),S=e=>{let{display_id:t="",viewType:l}=e,[i,n]=r.useState(!0),[a,d]=r.useState(0),[s,c]=r.useState(0),{player:v}=(0,_.n)(),f=r.useRef();return r.useEffect(()=>(l!==u.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH&&(f.current&&clearInterval(f.current),f.current=setInterval(()=>{n(!1),requestAnimationFrame(()=>{n(!0);let{new_left:e,mew_top:t}=(0,w.h)();d(e),c(t)})},5e3)),()=>{f.current&&clearInterval(f.current)}),[]),(0,o.jsx)(o.Fragment,{children:i&&(0,A.createPortal)((0,o.jsxs)("div",{className:P.default.waterText,style:{left:`${a}%`,top:`${s}%`,opacity:.4},children:[(0,o.jsx)("div",{children:"付费内容请勿录屏"}),(0,o.jsx)("div",{children:"必要时将追究违者法律责任"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(b,{}),(0,o.jsx)("span",{style:{paddingLeft:4},children:t})]})]}),(null==v?void 0:v.root)||document.body)})};var C=l("502075");let x=(e,t,l,o,a)=>(r.useEffect(()=>{if(!!e)return e.on("PaidLiveDataMessage",e=>{e&&Array.isArray(e)&&e.length>0&&e.map(e=>{var r;let d=Number(m()(e,"payload.paid_business_data.ret_type",u.RET_TYPE.TRY_WATCH_ING)),s=Number(m()(e,"payload.paid_business_data.duration",180)),c=Number(m()(e,"payload.paid_business_data.delivery",0)),v=m()(e,"payload.paid_business_data.ticket_id",""),_=m()(e,"payload.paid_business_data.ticket_sku_id",""),f=m()(e,"payload.paid_business_data.entity_rels",{}),g="object"==typeof f?Object.keys(f):[],p=null==t?void 0:null===(r=t.ticket_session)||void 0===r?void 0:r.ticket_session_id_str;g.concat([v,_]).includes(p)&&(l((0,n._)((0,i._)({},t),{duration:s,delivery:c})),o(d)),null==a||a(m()(e,"payload.paid_business_data"))})})},[e,t,l,o]),null);var L=l("651185"),T=l("44905"),D=l("116253"),k=l("388521"),V=l("669768"),O=l("910253"),R=l("461115");let M=(e,t,l,o,a,d,c,v,f,g,p)=>{let{player:I}=(0,_.n)(),h=(0,r.useRef)(e),{abrPts:N}=(0,R.Z)(),A=p||I,{roomStore:P}=g,w=r.useMemo(()=>{var e;return(null==P?void 0:null===(e=P.pollingFrequency)||void 0===e?void 0:e["webcast/room/info_by_scene"])||1e4},[]),b=r.useCallback(()=>{var e,o,r;if(null==g?void 0:null===(o=g.cameraStore)||void 0===o?void 0:null===(e=o.cameraInfo)||void 0===e?void 0:e.isMainCamera){let e=(0,L.a)();(0,E.aL)({room_id:t,scene:"paid_live_change_stream",channel:"channel_pc_web",region:"cn",device_id:null===(r=(0,T.Es)())||void 0===r?void 0:r.user_unique_id,device_type:null==e?void 0:e.device_type,os_version:null==e?void 0:e.os,version_code:null==e?void 0:e.version_code,webcast_sdk_version:2450}).then(e=>{if(e&&200===e.status&&0===e.data.status_code){var t,o;if(l===C.W.COMMON_SCENE||l===C.W.IN_LIVING_RECOMMEND||l===C.W.LIVING_SEARCH){y.kg.info("预览流换流",e);try{let{options:{default_quality:l},stream_data:i}=m()(e,"data.data.stream_url.live_core_sdk_data.pull_data"),n=JSON.parse(i),o=null==n?void 0:n.data,r=null==n?void 0:null===(t=n.common)||void 0===t?void 0:t.session_id,a=(0,k.f)(o[null==l?void 0:l.sdk_key].main.flv);(0,V.GT)(a,{abr_pts:N,sessionId:r}),A.paused?null==A||A.setConfig({url:a}):A.src=a,c(m()(e,"data.data.paid_live_data",{}))}catch(e){y.kg.error("预览流换流 ERROR",e)}}else{y.kg.info("直播间换流",e);try{let{streamStore:t,roomStore:l}=g,r=(0,O.h)({room:m()(e,"data.data",{})});null==t||t.setStreamData(r);let a=m()(e,"data.data.paid_live_data",{});c(a),null==l||l.setRoomInfo((0,n._)((0,i._)({},l.roomInfo),{room:(0,n._)((0,i._)({},null==l?void 0:null===(o=l.roomInfo)||void 0===o?void 0:o.room),{paid_live_data:a})}))}catch(e){y.kg.error("直播间换流 ERROR",e)}}}else y.kg.info("换流失败",e)})}},[t,l,A,N,c]),S=(0,r.useRef)(f);(0,r.useEffect)(()=>{(l===C.W.COMMON_SCENE||l===C.W.LIVING_SEARCH)&&f&&S.current!==f&&b()},[f,l,b]),(0,D.b)(async()=>{e===u.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&h.current!==e&&o>0&&(y.kg.info("试看权限 变为完整观看权限"),await b()),e!==u.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&h.current===u.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&0===o&&(y.kg.info("完整观看权限 变为试看权限"),await b()),h.current=e},[e,o]);let x=r.useRef(),M=r.useRef(d);(0,r.useEffect)(()=>{M.current=d},[d]);let j=r.useCallback(async()=>{let e=1e3*a-Date.now();y.kg.info(`流有效校验，流剩余有效时长，${a-Math.floor(Date.now()/1e3)}`),e<1e3*Number(M.current)&&o&&(y.kg.info("流信息不合法，触发换流"),await b())},[a,b,o]);(0,r.useEffect)(()=>{let e=s.listen(s.EVENT.paidLiveInitTime,()=>j());return()=>{e()}},[j]),(0,r.useEffect)(()=>(x.current&&clearInterval(x.current),e===u.PAID_LIVE_VIEW_TYPE.TRY_WATCH_ING&&o>0&&(x.current=setInterval(async()=>{await j()},w)),()=>{x.current&&clearInterval(x.current)}),[o,e,j,w])};var j=l("687761");let G=e=>{let{scene:t=C.W.IN_LIVING_ROOM,logParams:l={},isActive:o}=e,{player:a}=(0,_.n)();(0,r.useRef)(!1);let u=(0,r.useRef)(0),d=(0,r.useRef)(l);r.useEffect(()=>{d.current=l},[l]);let s=r.useCallback(()=>{u.current=Date.now(),(0,j.U0)((0,i._)({},d.current))},[]),c=(0,r.useRef)(o);(0,r.useEffect)(()=>{if(t!==C.W.IN_LIVING_ROOM)o&&s()},[o]),(0,r.useEffect)(()=>{if(t!==C.W.IN_LIVING_ROOM){if(!o&&o!==c.current){let e=Math.floor((Date.now()-u.current)/1e3);(0,j.dL)((0,n._)((0,i._)({},d.current),{duration:e}))}c.current=o}},[o])};var U=l("649257"),B=l("784492"),H=l("407217"),F=l("725215"),Y=l("58655"),W=l("738612");let Z=(e,t)=>t===u.RET_TYPE.NORMAL_WATCH?u.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH:Number(e)>0?u.PAID_LIVE_VIEW_TYPE.TRY_WATCH_ING:u.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH,Q=(0,F.Pi)(e=>{var t;let{paidLiveData:l,isLogin:s=!1,display_id:c="",scene:v=C.W.COMMON_SCENE,webRid:_="",roomId:f,setPaidLiveData:g,setViewType:p=e=>{},viewType:I,retType:E,setRetType:h,isFirstLive:y=!1,logParams:A={},onPaidLiveTryWatch:P=()=>{},onPaidLiveBuyTicket:w=()=>{},isActive:b=!0,jumpHref:L="",message:T,store:D={},setPaidLiveBurryContrl:k=()=>{}}=e,[V,O]=r.useState(!0),R=Number(m()(l,"max_preview_duration",180)),j=m()(l,"ticket_session.ticket_session_id_str",""),F=Number(m()(l,"duration",0)),Y=Number(m()(l,"delivery",0)),{singletonStore:W,cameraStore:Q,roomStore:z}=D,J=null==Q?void 0:null===(t=Q.cameraInfo)||void 0===t?void 0:t.isMainCamera,K=v===C.W.IN_LIVING_ROOM,q=Number(m()(l,"async_auth_data.keep_alive_time",0)),X=Number(m()(l,"async_auth_data.keep_alive_time_stamp",0)),{lastTime:$}=N(s,F,j,g,h,l,I,Y,R,J);return x(T,l,g,h,e=>{try{let{ticket_id:t,right_type:l,entity_rels:o}=e,{cameraStore:{cameraInfoList:r,setCameraInfoList:a}}=D,u=r.map(e=>{var r,a,u,s,c,v,_,f;if(e.paid_live_type===d.xc.SEPARATE_PAID_LIVE&&(null==e?void 0:null===(a=e.camera_paid_info)||void 0===a?void 0:null===(r=a.paid_live_base_info)||void 0===r?void 0:r.ticket_session_id_str)===t&&(e.camera_paid_info.paid_live_base_info.view_right=l),(e.paid_live_type===d.xc.EQUITABLE_CAMERA_POSITION||e.isMainCamera)&&"object"==typeof o){let t=Object.keys(o);if(e.paid_live_type===d.xc.EQUITABLE_CAMERA_POSITION&&t.includes(null==e?void 0:null===(s=e.camera_paid_info)||void 0===s?void 0:null===(u=s.paid_live_base_info)||void 0===u?void 0:u.ticket_session_id_str)&&(e.camera_paid_info.paid_live_base_info.view_right=l),e.isMainCamera&&t.includes(null==z?void 0:null===(c=z.roomInfo)||void 0===c?void 0:c.roomId)){let e=null==z?void 0:null===(_=z.roomInfo)||void 0===_?void 0:null===(v=_.room)||void 0===v?void 0:v.paid_live_data;null==z||z.setRoomInfo((0,n._)((0,i._)({},z.roomInfo),{room:(0,n._)((0,i._)({},null==z?void 0:null===(f=z.roomInfo)||void 0===f?void 0:f.room),{paid_live_data:(0,n._)((0,i._)({},e),{view_right:l})})}))}}return e});a(u)}catch(e){}}),M(I,f,v,q,X,$,g,h,s,D,null),G({scene:v,logParams:A,isActive:b}),(0,B.Z)(()=>{k(!0),p(Z($,E))},[$,p,E]),r.useEffect(()=>{try{(async()=>{let e=await (0,H.ZP)({service_name:"webcast.douyin.live_pc",key:"paid_live_settings"}),t=m()(e,"water_mark",!0);O(!!t)})()}catch(e){}},[]),r.useEffect(()=>{if(v!==C.W.LIVING_SEARCH&&v!==C.W.IN_LIVING_RECOMMEND){var e,t;I!==u.PAID_LIVE_VIEW_TYPE.NORMAL_WATCH&&I!==u.PAID_LIVE_VIEW_TYPE.BAN?null==W||null===(e=W.setPaidLiveQRCodeVisible)||void 0===e||e.call(W,!0):null==W||null===(t=W.setPaidLiveQRCodeVisible)||void 0===t||t.call(W,!1)}},[v,I]),(0,o.jsx)("div",{style:{pointerEvents:"all"},children:s?(0,o.jsxs)(o.Fragment,{children:[I===u.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH&&(0,o.jsx)(a.V,{scene:v,webRid:_,logParams:A,isFirstLive:y,onPaidLiveBuyTicket:w,jumpHref:L,isActive:b,store:D}),K?(0,o.jsx)(U.y,{paidLiveData:l,visible:null==W?void 0:W.paidLiveQRCodeVisible,onClose:()=>{var e;null==W||null===(e=W.setPaidLiveQRCodeVisible)||void 0===e||e.call(W,!1)}}):null,V&&(0,o.jsx)(S,{display_id:c,viewType:I})]}):(0,o.jsx)(C.Z,{scene:v,logParams:A,isFirstLive:y,onPaidLiveTryWatch:P,watchTime:R})})});var z=(0,F.Pi)(()=>{let e=(0,Y.o)(),{paidLiveStore:{paidLiveData:t,setViewType:l,viewType:i,setPaidLiveData:n,retType:a,setRetType:u,setPaidLiveBurryContrl:d},userStore:{userInfo:s},roomStore:{roomInfo:c},singletonStore:{message:v}}=e,_=m()(c,"room.id_str"),f=r.useMemo(()=>m()(c,"room.episode_extra.mod.episode_stage")===W.jL.FIRST_LIVE,[c]);return(0,o.jsx)(Q,{paidLiveData:t,isLogin:m()(s,"id_str",""),display_id:m()(s,"display_id",""),scene:C.W.IN_LIVING_ROOM,setViewType:l,viewType:i,setPaidLiveData:n,roomId:_,retType:a,setRetType:u,isFirstLive:f,message:v,store:e,setPaidLiveBurryContrl:d})})},171190:function(e,t,l){l.d(t,{K:function(){return p},V:function(){return I}});var i=l(520739);l(874386);var n=l(563097),o=l(88648),r=l(578503),a=l(393265),u=l(407217),d=l(945066),s=l(176638),c=l(502075),v=l(96008),_=l.n(v),f=l(645260),m=l.n(f),g=l(687761);let p=(e,t)=>{let l=e.root.querySelector(t);return l?(l.style.display="none",()=>{l&&(l.style.display="block")}):_()},I=e=>{let{webRid:t="",scene:l=c.W.COMMON_SCENE,logParams:v={},isFirstLive:_=!1,onPaidLiveBuyTicket:f=()=>{},jumpHref:I="",isActive:E=!1,container:h,store:y}=e,{player:N}=(0,a.n)(),A=o.useRef(!1),[P,w]=(0,o.useState)("https://lf-dy-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/h5/vs_paid_live_audience_pc_buy_ticket_h5_douyin/pages/ticket_pc/index.html?ticket_entrance=paidlive_live_tryend_card"),b=()=>{setTimeout(()=>{null==N||N.pause()},1)};o.useEffect(()=>{if(!N)return;null==N||N.pause();let e=N.video.style.opacity,t=p(N,".douyin-player-controls");return N.video.style.opacity=0,null==N||N.on("play",b),()=>{try{t(),null==N||N.play(),null==N||N.off("play",b),N.video.style.opacity=e}catch(e){}}},[N]),(0,o.useEffect)(()=>{try{(async()=>{let e=await (0,u.ZP)({service_name:"webcast.douyin.live_pc",key:"hybrid_schema"}),t=m()(e,"paid_live_ticket_panel","");t&&w(`${t}?ticket_entrance=paidlive_live_tryend_card`)})()}catch(e){}},[]);let S=()=>{try{null==f||f()}catch(e){}if(l===c.W.IN_LIVING_ROOM){var e,i;null==y||null===(i=y.singletonStore)||void 0===i||null===(e=i.setPaidLiveQRCodeVisible)||void 0===e||e.call(i,!0),(0,g.c9)("tryend")}else(0,g.dh)(v),I?window.open((0,d.G7)({if_paid_live_card:"1",ticket_entrance:"paidlive_window_tryend_card",entrance_form:"paidlive_window_tryend_card"},I),(0,s.f)()?"_self":void 0):window.open(`https://live.douyin.com/${t}?if_paid_live_card=1&ticket_entrance=paidlive_window_tryend_card`,(0,s.f)()?"_self":void 0)};return o.useEffect(()=>{l===c.W.IN_LIVING_ROOM&&(0,g.t4)()},[]),o.useEffect(()=>{(l===c.W.COMMON_SCENE||l===c.W.LIVING_SEARCH)&&A.current!==E&&E&&(0,g.B5)((0,i._)({},v))},[E]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:r.default.smegmae_contianer_mask}),(0,n.jsxs)("div",{className:r.default.smegmae_contianer,style:{pointerEvents:"all"},children:[(0,n.jsx)("div",{className:r.default.smegmae_contianer_title,children:"免费试看结束"}),(0,n.jsxs)("div",{className:r.default.smegmae_contianer_desc,children:["购票后可观看整场",_?"首":"直","播"]}),(0,n.jsx)("div",{className:r.default.smegmae_contianer_button,onClick:e=>S(),children:"购票继续看"})]})]})}},666513:function(e,t,l){l.d(t,{M:function(){return a}}),l(874386);var i=l(88648),n=l(759797),o=l(645260),r=l.n(o);let a=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[l,o]=i.useState(n.PAID_LIVE_VIEW_TYPE.BAN),[a,u]=i.useState(e),[d,s]=i.useState(n.RET_TYPE.TRY_WATCH_ING),c=Number(r()(a,"paid_type",0))===n.PAID_LIVE_TYPE.PAID_LIVE;i.useEffect(()=>{c&&s(Number(r()(a,"view_right",0))?n.RET_TYPE.NORMAL_WATCH:n.RET_TYPE.TRY_WATCH_ING)},[a,c]);let v=i.useMemo(()=>c&&(!t||l===n.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH),[l,t,c]),_=i.useMemo(()=>!c||!(!t||l===n.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH),[c,t,l]);return{viewType:l,setViewType:o,retType:d,setRetType:s,paidLiveData:a,setPaidLiveData:u,isPaidLive:c,hideLinkMicPreview:v,showEnter:_}}},172589:function(e,t,l){l.r(t),l.d(t,{default:function(){return y},VipLiveBoundaryPlugin:function(){return h}});var i=l("563097"),n=l("88648"),o=l("755111"),r=l("725215"),a=l("58655"),u=l("240026"),d=l("645260"),s=l.n(d),c=l("358003"),v=l("31243"),_=l("652541"),f=l("299271"),m=l("637005");let g=()=>{let{vipStore:e,roomStore:{roomInfo:t}}=(0,a.o)();(0,n.useEffect)(()=>{let l=()=>{var l,i;let n=null==t?void 0:null===(l=t.anchor)||void 0===l?void 0:l.id_str,o=null==t?void 0:null===(i=t.room)||void 0===i?void 0:i.id_str;if(!!n)(0,v.GT)({room_id:o,anchor_id:n}).then(t=>{var l,i,n;let{data:o}=t;e.setVipEmojiConfig(o.data);let r=null==o?void 0:null===(i=o.data)||void 0===i?void 0:null===(l=i.user_data)||void 0===l?void 0:l.expired_time,a=1e3*r,u=null==o?void 0:null===(n=o.data)||void 0===n?void 0:n.is_member,d=new Date().getTime();e.setIsVip(a>d&&u),e.setVipLiveStatus(r?f.L[(0,_.j$)(r)]:f.L[f.vz.BEFORE]),e.setVipInfoLoaded(!0)})};l();let i=m.listen(m.EVENT.VipRechargeSuccess,()=>{l()});return()=>{null==i||i()}},[t])};var p=l("859231"),I=l("582493"),E=l("655631");let h=(0,r.Pi)(e=>{let{onShowVipLiveBoundary:t,paidLiveData:l,roomId:n,roomStatus:r,messageInstance:a,onBtnClick:u,isInLivingRoom:d,roomInfo:s,customContent:c,abTestData:v}=e;return(0,i.jsx)(o.ZP,{roomId:n,roomStatus:r,messageInstance:a,onBtnClick:u,paidLiveData:l,onShowBoundary:t,isInLivingRoom:d,roomInfo:s,customContent:c,abTestData:v})});var y=(0,r.Pi)(()=>{let{singletonStore:{message:e},paidLiveStore:{paidLiveData:t},roomStore:{roomInfo:l,roomStatus:o,hideBanner:r},vipStore:{setShowVipLiveBoundary:d,setIsShowVipPanel:v,showVipLiveBoundary:_,isShowVipPanel:f},userStore:{headerUserInfo:m},feedStore:{isActive:y},rightPanelStore:{openItem:N}}=(0,a.o)();g();let A=s()(l,"room.id_str"),P=(0,u.T)(),w=()=>!1;return(0,n.useEffect)(()=>{y&&(o!==p.LV.END||_)&&f&&(!r||_)&&N(I.k.Vip)},[y,o,_,f,r,_]),(0,i.jsx)(h,{messageInstance:e,paidLiveData:t,isInLivingRoom:!0,roomInfo:l,roomId:A,abTestData:P,roomStatus:o,onShowVipLiveBoundary:e=>{d(e)},onBtnClick:()=>{if(null==m?void 0:m.isLogin)(0,E.Z)("live");else{var e,t;(0,c.default)({success:()=>{!w()&&window.location.reload()},enterMethod:"",headerText:"登录后查看更多作品",next:`https://${null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.host}`})}}})})},652541:function(e,t,l){l.d(t,{HS:function(){return s},T3:function(){return v},ZK:function(){return _},cI:function(){return u},j$:function(){return d},m1:function(){return f},p8:function(){return c}});var i=l(520739),n=l(878389);l(268917);var o=l(299271);let r=(e,t,l)=>e===o.Nl.FuliType&&t===o.D$.VIRTUAL&&l===o.lW.DONE?o.lW.VIRTUAL_DONE:l||0,a=e=>{if(e.type===o.Nl.CourseType){var t,l;return e.privilege_switch===o.oH.OFF?o.Bn[e.type]:`${null!==(l=null===(t=e.discount_course_info)||void 0===t?void 0:t.free_course_number)&&void 0!==l?l:0}个免费课程`}return null==e?void 0:e.content},u=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(t===o.Nl.LinkmicType)return"";if(t===o.Nl.FuliType||t===o.Nl.LinkmicType)return o.eS[e];if(t===o.Nl.EmojiType)return"去使用";if(t===o.Nl.GroupType)return o.I$[e];if(t===o.Nl.CourseType)return"查看";if(t===o.Nl.Ask){if(l)return"去提问";if(i)return"查看"}return t===o.Nl.ShortVideo&&n?"查看":""},d=e=>{let t=1e3*Number(e),l=t-new Date().getTime();if(0===e)return o.vz.BEFORE;if(l>0&&l<6048e5)return o.vz.AFTER_SEVEN;if(l>0)return o.vz.AFTER;if(l<0&&l>-6048e5)return o.vz.EXPIRED_FEWDAY;else if(l<0)return o.vz.EXPIRED;return o.vz.BEFORE},s=(e,t,l,i)=>!!t&&!!e&&!(e.length<=0)&&!!l&&!!i&&(!!l[e]||!!i[e]),c=(e,t)=>{var l,s,c,v,_,f;if(!e)return[];let m=[],g=e.advanced_privilege||[],p=e.is_member,I=d(null!==(s=e.expired_time)&&void 0!==s?s:0),E=(null!==(c=null===(l=e.short_video_info)||void 0===l?void 0:l.short_video_count)&&void 0!==c?c:0)>0;for(let l=0;l<g.length;l++){let{type:d}=g[l],s=r(d,g[l].bonus_type,g[l].received),c=!0;if(d===o.Nl.Ask){let{answered_ask_num:e=0}=g[l];c=e>0}let I=(0,n._)((0,i._)({},g[l]),{isGradient:!p,btnText:(p||d===o.Nl.CourseType||d===o.Nl.Ask||d===o.Nl.ShortVideo)&&u(s,d,p,c,E),handleClick:function(e,t,l,i){var n,r;let{type:a,status:u,isMember:d}=e;if(a===o.Nl.EmojiType||a===o.Nl.LinkmicType||a===o.Nl.CourseType||a===o.Nl.Ask)return i;let s=(null!==(r=null==t?void 0:null===(n=t.short_video_info)||void 0===n?void 0:n.short_video_count)&&void 0!==r?r:0)>0;return a===o.Nl.ShortVideo,i}({type:null===(v=g[l])||void 0===v?void 0:v.type,bonusType:null===(_=g[l])||void 0===_?void 0:_.bonus_type,status:s,prizeId:null===(f=g[l])||void 0===f?void 0:f.prize_id,item:g[l],isMember:p},e,0,t),content:a(g[l]),privilege_tags:e.privilege_tags});m.push(I)}return m},v=e=>{for(let t=0;t<e.length;t++)if(e[t].type===o.Nl.FuliType)return{fuliStatus:"in_effect",fuliType:e[t].schema_url?"real":"virtual",fuliId:e[t].prize_id};return{fuliStatus:"nonactivated",fuliType:"",fuliId:0}},_=e=>{let t=new Date(e),l=t.getFullYear(),i=t.getMonth()+1<10?`${t.getMonth()+1}`:t.getMonth()+1,n=10>t.getDate()?`${t.getDate()}`:t.getDate();return`${l}-${i}-${n}`},f=e=>{if(1===e.length)return e[0];if(e.length>1){let t=e.find(e=>e.apply_status===o.aJ.ALREADY_IN);if(t)return t;let l=e.find(e=>e.apply_status===o.aJ.JOIN_NOW);if(l)return l;let i=e.find(e=>e.apply_status===o.aJ.APPLYING);if(i)return i;let n=e.find(e=>e.apply_status===o.aJ.APPLY_TO_JOIN||e.apply_status===o.aJ.NOT_APPLY);if(n)return n;let r=e.find(e=>e.apply_status===o.aJ.VIEW_CONDITION);if(r)return r;let a=e.find(e=>e.apply_status===o.aJ.GROUP_IS_FULL);if(a)return a}return e[0]}},683354:function(e,t,l){var i=l(520739),n=l(878389);l(874386);var o=l(88648),r=l(30321),a=l(797973),u=l(754488);let d=(()=>{try{return -1===Number(localStorage.getItem("h265ErrorNum"))}catch(e){return!1}})();t.Z=e=>{let{from:t,player:l,isRoomEnd:s,eventParams:c,isH265:v,isActive:_}=e,f=(0,o.useRef)(!1),m=(0,o.useRef)(0),[g,p]=(0,o.useState)(0),[I,E]=(0,o.useState)(""),[h,y]=(0,o.useState)(0),[N,A]=(0,o.useState)(0),P=(0,o.useRef)(0),w=(0,o.useRef)(0),b=(0,o.useRef)(0),{resetH265ErrorNum:S}=(0,u.Z)({}),C={};C="living"===t||"preview/live"===t?(0,i._)({},null==c?void 0:c.getCommonEventParams(),null==c?void 0:c.getEnterEventParams()):c,!m.current&&(m.current=performance.now());let x=(0,o.useCallback)(()=>{b.current=1},[]),L=(0,a.Z)(()=>{window.collectEvent("player_firstframe",(0,n._)((0,i._)({},C),{start:m.current,loadstart:h,ttfb:N,end:performance.now()})),f.current=!0});(0,o.useEffect)(()=>{_&&(P.current=performance.now())},[_]);let T=(0,o.useMemo)(()=>window.location.href,[]);(0,o.useEffect)(()=>{if(l)return l.once("loadeddata",()=>{"living"===t&&!f.current&&L(),x()}),l.once("canplay",()=>{x()}),l.once("timeupdate",()=>{x()}),l.once("error",e=>{p((null==e?void 0:e.code)||(null==e?void 0:e.errorCode)||((null==e?void 0:e.errorType)==="parse"?31:21)),E(null==e?void 0:e.ex)}),()=>{l.off("loadeddata"),l.off("canplay"),l.off("timeupdate"),l.off("error")}},[l]);let D=(0,o.useCallback)(()=>{var e;let t;return b.current?t=0:s?t=1001:l?!l||(null==l?void 0:null===(e=l.config)||void 0===e?void 0:e.url)?l&&g&&!b.current?t=1004:l&&!b&&(t=1005):t=1003:t=1002,t},[l,s,g]),k=(0,o.useCallback)(e=>{var l,n,o;let r="living"===t?null===(l=window)||void 0===l?void 0:l.playerNewTime:P.current,a={is_stream_received:b.current,is_preview:"sliderCard"===t||"searchPlayer"===t?1:0,error_code:D(),log_type:e,resume_type:"living"===t?"switch_page":"draw",player_error_code:g,player_error_info:I,duration:Math.floor(performance.now()-P.current||(null===(n=window)||void 0===n?void 0:n.playerNewTime)||0),player_elapse:null===(o=window)||void 0===o?void 0:o.playerNewTime,from:t,href:T};if("searchPlayer"!==t||r!==w.current)window.collectEvent("play_leave",(0,i._)({},C,a)),w.current=r},[t,g,I,T]);(0,o.useEffect)(()=>{let e=location.pathname,l=()=>{("living"===t||"living"!==t&&_)&&k(3)};return window.addEventListener("beforeunload",l),()=>{window.removeEventListener("beforeunload",l),(0,r.Nr)(e)&&l()}},[_,t,k]);let V=(0,o.useCallback)(()=>{x(),!N&&A(performance.now())},[N]),O=(0,o.useCallback)(()=>{!h&&y(performance.now())},[h]);return(0,o.useEffect)(()=>{if(l&&!d&&v){let e=()=>{S(),d=!0};return l.on("canplay",e),()=>{l.off("canplay",e)}}},[l,v]),{playerTeaEvtSubmit:k,setLoadStartTime:O,setTtfbTime:V,setStreamReceived:x}}},50536:function(e,t,l){l.d(t,{j:function(){return u}});var i=l(520739),n=l(878389),o=l(88648),r=l(147613),a=l(567754);let u=e=>{let{href:t,isLiving:l,isActive:u,useF:d,onEnterRoom:s,enterLogParams:c,forceEnter:v,isInPWA:_,disabled:f=!1}=e,m=(0,o.useCallback)(e=>{if(!(Array.from(document.querySelectorAll(".modal-video-container")).filter(e=>e.getBoundingClientRect().height>0).length>0)||0!==Array.from(document.querySelectorAll(".modal-video-container .liveSearchPlayer")).filter(e=>e.getBoundingClientRect().height>0).length){if(("F"===e.key||"f"===e.key)&&!e.shiftKey&&d){if(e.stopPropagation(),e.preventDefault(),v){v();return}t&&l&&s({openLiveModal:!0,event:e,callback:()=>{let e="";e=t.indexOf("?")>=0?`${t}&${a.stringify((0,n._)((0,i._)({},c),{action_type:"hot_key"}))}`:`${t}?${a.stringify((0,n._)((0,i._)({},c),{action_type:"hot_key"}))}`,window.open(e,_?"_self":"_blank")}})}}},[t,u,l,s,_,d,c,v]);(0,r.o)(()=>{if(!f)return u&&document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[u,f,m])}},299822:function(e,t,l){l.d(t,{Z:function(){return g}}),l("602157"),l("874386");var i=l("563097"),n=l("713097"),o=l.n(n),r=l("88648"),a=l("651185"),u=l("44905"),d=l("250486"),s=l("689021"),c=l("968305"),v=l("405543"),_=l("432051"),f=l("456147"),m=l("50536"),g=e=>{let{className:t,description:l,enterText:n,href:g,abTestData:p,isInPWA:I,onEnterRoom:E,isLiving:h,isActive:y,enterLogParams:N,useF:A=!0,roomIdStr:P="",scene:w="web_feed",size:b="normal",forceEnter:S,useRedPack:C=!0,disableEnterRoomShotCut:x=!1,isHover:L,setIsHover:T,rawdata:D,isPlayingVideo:k=!1,countDown:V=0}=e,[O,R]=r.useState(!1),[M,j]=r.useState(!1),G=r.useCallback(async()=>{var e,t,l,i,n,o,r,d,s,c;let v=(0,a.a)(),_=await (0,f.aL)({room_id:P,scene:w,channel:"channel_pc_web",region:"cn",device_id:null===(e=(0,u.Es)())||void 0===e?void 0:e.user_unique_id,device_type:null==v?void 0:v.device_type,os_version:null==v?void 0:v.os,version_code:null==v?void 0:v.version_code,webcast_sdk_version:2450});200===Number(_.status)&&(null==_?void 0:null===(t=_.data)||void 0===t?void 0:t.data)&&(R((null==_?void 0:null===(o=_.data)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:null===(i=n.others)||void 0===i?void 0:null===(l=i.web_enter_benefit_point_data)||void 0===l?void 0:l.has_ongoing_lucky_money)||!1),j((null==_?void 0:null===(c=_.data)||void 0===c?void 0:null===(s=c.data)||void 0===s?void 0:null===(d=s.others)||void 0===d?void 0:null===(r=d.web_enter_benefit_point_data)||void 0===r?void 0:r.has_ongoing_lottery)||!1))},[P,w]);(0,m.j)({href:g,isLiving:h,isActive:y,isInPWA:I,onEnterRoom:E,enterLogParams:N,useF:A,forceEnter:S,disabled:x});let U=r.useMemo(()=>!!O||!!M,[O,M]),B=r.useMemo(()=>O?"redPacket":M?"lottery":"",[p,O,M]),H=!d._.isOptmizeInvisibleLive(p)||y;r.useEffect(()=>{y&&G()},[y,G]);let F=r.useMemo(()=>{var e,t,l,i;return(null==p?!!void 0:!!p.douyinShowVrRoom)&&(1===Number(null==D?void 0:null===(e=D.extra)||void 0===e?void 0:e.vr_type)||2===Number(null==D?void 0:null===(t=D.extra)||void 0===t?void 0:t.vr_type)||(null==D?void 0:null===(i=D.pico_info)||void 0===i?void 0:null===(l=i.multi_stream_info)||void 0===l?void 0:l.multi_stream_scene)==="multi_camera")},[D,p]);return(0,i.jsxs)("div",{className:o()(_.default.liveDivideContainer,t,{[_.default.small]:"small"===b}),onMouseEnter:()=>null==T?void 0:T(!0),children:[(0,i.jsx)("div",{className:o()(_.default.liveDivide,_.default.liveDivideAb),children:(0,i.jsx)("div",{className:o()(_.default.textContent,_.default.textContentAb,{[_.default.isHoverd]:L}),children:k?(0,i.jsxs)("div",{className:_.default.textContainer,children:["高光播放中，",V||0,"s后切换为直播"]}):(0,i.jsxs)(i.Fragment,{children:[(!(U&&B)||!C)&&!F&&(0,i.jsx)(s.WaveLineAnimation,{className:H?"":_.default.hidden}),!!B&&U&&C&&!F&&(0,i.jsxs)(i.Fragment,{children:["redPacket"===B&&(0,i.jsx)(c.r,{className:H?"":_.default.hidden}),"lottery"===B&&(0,i.jsx)(v.J,{className:H?"":_.default.hidden})]}),F&&(0,i.jsx)("img",{src:"data:image/png;base64,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",style:{width:32}}),(0,i.jsxs)("div",{className:_.default.textContainer,children:["点击",A&&"或按",A&&(0,i.jsx)("div",{className:_.default.Fkey}),"进入",`${F?"全景":""}直播间`]})]})})}),k?(0,i.jsxs)("div",{className:_.default.description,children:[(0,i.jsx)("div",{className:_.default.line}),!!B&&U&&C&&(0,i.jsxs)(i.Fragment,{children:["redPacket"===B&&(0,i.jsx)(c.r,{className:H?_.default.icon:_.default.hidden}),"lottery"===B&&(0,i.jsx)(v.J,{className:H?_.default.icon:_.default.hidden})]}),"点击",A&&"或按",A&&(0,i.jsx)("div",{className:_.default.Fkey}),"进入直播间",(0,i.jsx)("div",{className:_.default.line})]}):(0,i.jsx)(i.Fragment,{children:l&&(0,i.jsx)("div",{className:_.default.description,children:l})})]})}},488359:function(e,t,l){l.d(t,{j:function(){return g}}),l(874386);var i=l(563097),n=l(713097),o=l.n(n),r=l(88648),a=l(759797),u=l(637005),d=l(411362),s=l(833890),c=l(865856),v=l(738612),_=l(645260),f=l.n(_);let m=e=>{let t=String(Math.floor(100+Math.floor(e%60))).slice(1),l=String(100+Math.floor(e/60)).slice(1);return`${l}:${t}`},g=e=>{var t;let{count:l,className:n,title:_,showTitle:g,program:p,paidLiveData:I,isLogin:E=!1,viewType:h,showCount:y=!0,appointment:N}=e,[A,P]=r.useState(0),w=r.useCallback(()=>(0,i.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.95765 2.59839C6.95765 3.66536 6.06542 4.53306 4.96128 4.54561H4.91349C3.80935 4.53306 2.91711 3.66536 2.91711 2.59839V1.94879C2.91711 0.872405 3.82209 0 4.93738 0C6.05268 0 6.95765 0.872405 6.95765 1.94879V2.59839ZM1.45988 6.17671C2.29926 5.77687 3.98475 5.55579 4.93675 5.55579C5.89025 5.55579 7.57874 5.77687 8.41962 6.17985C8.90764 6.45268 9.25 7.06419 9.25 7.7792V8.19036C9.25 8.72034 8.9692 9.16565 8.5833 9.30834C7.65982 9.57176 5.92479 9.71288 4.93825 9.71288C3.95021 9.71288 2.21367 9.56863 1.2887 9.30677C0.905796 9.16252 0.625 8.71877 0.625 8.18879V7.77763C0.625 7.06106 0.968862 6.44797 1.45988 6.17671Z",fill:"white",fillOpacity:"0.9"})}),[]),b=Number(f()(I,"paid_type",0))===a.PAID_LIVE_TYPE.PAID_LIVE,S=Number(f()(I,"view_right",0)),C=f()(I,"ticket_session.ticket_session_id_str","");r.useEffect(()=>{let e=u.listen(u.EVENT.paidLiveDuration,e=>{b&&(null==e?void 0:e.ticket_id_str)&&e.ticket_id_str===C&&P(null==e?void 0:e.last_time)});return()=>e()},[C,b]);let x=r.useCallback(()=>{var e,t,l,n;if(b){if(E&&h===a.PAID_LIVE_VIEW_TYPE.TRY_WATCH_ING)return(0,i.jsx)(d.jR,{isFirstLive:(null==p?void 0:null===(e=p.mod)||void 0===e?void 0:e.episode_stage)===v.jL.FIRST_LIVE})}else return(null==p?void 0:null===(t=p.mod)||void 0===t?void 0:t.episode_stage)===v.jL.FIRST_LIVE?(0,i.jsx)(d.Sx,{className:c.default.liveTag,episodeStage:null==p?void 0:null===(l=p.mod)||void 0===l?void 0:l.episode_stage}):(0,i.jsx)(d.z,{className:c.default.liveTag,episodeStage:null==p?void 0:null===(n=p.mod)||void 0===n?void 0:n.episode_stage})},[b,null==p?void 0:null===(t=p.mod)||void 0===t?void 0:t.episode_stage,E,h]),L=r.useMemo(()=>b&&!S&&A>0&&E,[b,S,A,E]);return(0,i.jsxs)("div",{className:o()(c.default.liveUserCount,n),children:[y&&x(),L&&(0,i.jsxs)("div",{className:c.default.countDown,children:["试看中 ",m(A)]}),!b&&l&&y&&(0,i.jsx)(s.A,{className:c.default.userCount,count:l,renderSVG:w}),y&&_&&g?(0,i.jsx)("span",{className:c.default.title,children:_}):!!N&&(0,i.jsx)("span",{className:c.default.title}),N]})}},833890:function(e,t,l){l.d(t,{A:function(){return u}});var i=l(563097),n=l(309244),o=l(713097),r=l.n(o);l(88648);var a=l(372025);let u=e=>{let{count:t,className:l,renderSVG:o}=e;return(0,i.jsxs)("span",{className:r()(a.default.userCount,l),children:[o?o():(0,i.jsx)(n.Z,{}),(0,i.jsx)("span",{className:a.default.count,children:t||"0"})]})}},461115:function(e,t){t.Z=()=>({abrPts:"-800",adaptiveConfig:{hurryEndMs:1800,hurryStartMs:2500,hurrySpeed:1.1,thresholdDown:!0}})},681456:function(e,t,l){l.d(t,{f:function(){return r}}),l(209955);var i=l(88648),n=l(795478),o=l(64814);function r(e){let t=(0,i.useContext)(n.qd);if(void 0===t)throw Error("roomStore must be used within Provider");return(0,o.oR)(t,e)}},129527:function(e,t,l){l.d(t,{L:function(){return u}});var i=l(520739),n=l(993287),o=l(945066),r=l(176638),a=l(88648);let u=e=>{let{onEnterRoom:t,enterLogParams:l={},href:u,propsOnLoginSuccess:d,adData:s,isReuseBasicPlayer:c=!1}=e,v=a.useMemo(()=>{let e=s?(0,n.e1)({rawAdData:s}):{};return(0,o.G7)((0,i._)({open_promotion_list:"1",enter_method_temai:"click_live_cart_tag"},l,e),u)},[u,l,s]),_=a.useMemo(()=>{let e=s?(0,n.e1)({rawAdData:s}):{};return(0,o.G7)((0,i._)({open_promotion_list:"1",open_promotion_detail:"1",enter_method_temai:"click_live_popup_card"},e,l),u)},[u,l,s]),f=a.useCallback(e=>{let{scene:o}=e||{};null==d||d();let a=s?(0,n.e1)({rawAdData:s}):{};null==t||t({openLiveModal:!0,onEnterParams:"cart"===o?(0,i._)({open_promotion_list:"1",open_promotion_detail:"0",enter_method_temai:"click_live_cart_tag"},l,a):(0,i._)({open_promotion_list:"1",open_promotion_detail:"1",enter_method_temai:"click_live_popup_card"},a,l)}),!c&&("cart"===o?window.open(v,(0,r.f)()?"_self":"_blank"):"pop"===o&&window.open(_,(0,r.f)()?"_self":"_blank"))},[d,t,v,_,c,l,s]),m=a.useCallback(()=>{let e=s?(0,n.e1)({rawAdData:s}):{};null==t||t({openLiveModal:!0,onEnterParams:(0,i._)({open_promotion_list:"1",open_promotion_detail:"0",enter_method_temai:"click_live_cart_tag"},l,e)}),!c&&window.open(v,(0,r.f)()?"_self":"_blank")},[v,t,c,l,s]);return{onShopLoginSuccess:f,onCartClick:m,onPromotionPopClick:a.useCallback(()=>{let e=s?(0,n.e1)({rawAdData:s}):{};null==t||t({openLiveModal:!0,onEnterParams:(0,i._)({open_promotion_list:"1",open_promotion_detail:"1",enter_method_temai:"click_live_popup_card"},e,l)}),!c&&window.open(_,(0,r.f)()?"_self":"_blank")},[_,t,c,l,s])}}},910485:function(e,t,l){l.d(t,{q:function(){return o}}),l(779788);var i=l(916956),n=l(407217);function o(e){let{message:t,socketData:l}=e;(0,i.C)(()=>{var e,i,o;let r="websocketkey20230220",a=[];try{a=JSON.parse(null!==(i=null===(e=localStorage)||void 0===e?void 0:e.getItem(r))&&void 0!==i?i:"[]")}catch(e){}if(!!t)if(l)null==t||t.setWebsocketKey(l),null===(o=localStorage)||void 0===o||o.setItem(r,JSON.stringify(l));else{let e=function(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,n.ZP)({service_name:"webcast.douyin.live_pc",key:"message_websocket_params"}).then(e=>{var l;null==t||t.setWebsocketKey(e),null===(l=localStorage)||void 0===l||l.setItem(r,JSON.stringify(e))}).catch(i=>{l>1?e(l-1):null==t||t.setWebsocketKey(a)})};e(2)}},[t])}},910253:function(e,t,l){l.d(t,{h:function(){return r}});var i=l(645260),n=l.n(i);let o=(e,t)=>{var l;if(!(null==e?void 0:null===(l=e.room)||void 0===l?void 0:l.stream_url)&&!t)return{};let i=(null==t?void 0:t.pull_datas)||e.room.stream_url.pull_datas||{},n=Object.keys(i)[0];return i[n]},r=e=>{var t;let l=n()(e,"room.stream_url"),i=(null===(t=n()(e,"web_stream_url",null))||void 0===t?void 0:t.live_core_sdk_data)?n()(e,"web_stream_url"):l,r=n()(i,"live_core_sdk_data.pull_data",{}),a=n()(l,"live_core_sdk_data.pull_data",{}),u=o(e),d=o(e,i),s=(null==r?void 0:r.stream_data)?JSON.parse(r.stream_data):null,c=(null==a?void 0:a.stream_data)?JSON.parse(a.stream_data):null,v=(null==u?void 0:u.stream_data)?JSON.parse(u.stream_data):null,_=(null==d?void 0:d.stream_data)?JSON.parse(d.stream_data):null;return{H265_streamData:{options:n()(r,"options",null),common:n()(s,"common",null),stream:n()(s,"data",null)},H264_streamData:{options:n()(a,"options",null),common:n()(c,"common",null),stream:n()(c,"data",null)},UGC_streamData:{options:n()(u,"options",null),common:n()(v,"common",null),stream:n()(v,"data",null)},H265_UGC_streamData:{options:n()(d,"options",null),common:n()(_,"common",null),stream:n()(_,"data",null)}}}},468763:function(e,t,l){l.d(t,{Sv:function(){return s},T1:function(){return c},n$:function(){return v},rC:function(){return _},w:function(){return f}});var i=l(520739),n=l(878389);l(927234);var o=l(529211),r=l(306537),a=l(399796),u=l(35730),d=l(519055);function s(){var e,t;if(d.s)return 0;let l=localStorage.getItem((0,r.DS)()?o.YN:o.xQ);if(!!(l=null!==(t=null===(e=(a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{}).volume)||void 0===e?void 0:e.toString())&&void 0!==t?t:l))return Number(l)}function c(){var e;return null!==(e=s())&&void 0!==e?e:.6}function v(e){let t=a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{};return a.Q.setItem(u.CookieKeys.VolumeInfo,(0,n._)((0,i._)({},t),{volume:e})),localStorage.setItem((0,r.DS)()?o.YN:o.xQ,e.toString())}function _(){var e;if(d.s)return!1;let t="1"===localStorage.getItem((0,r.DS)()?o.FR:o.mI);return t=null!==(e=(a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{}).isMute)&&void 0!==e?e:t}function f(e){let t=a.Q.getItem({sKey:u.CookieKeys.VolumeInfo})||{};return a.Q.setItem(u.CookieKeys.VolumeInfo,(0,n._)((0,i._)({},t),{isMute:e,isUserMute:e})),localStorage.setItem((0,r.DS)()?o.FR:o.mI,e?"1":"0")}},459049:function(e,t,l){l.d(t,{h:function(){return r}});var i=l(14108),n=l(567754);let o=`${(0,i.Pe)()}`,r=(e,t)=>`${o}/${e}${t?"?":""}${(0,n.stringify)(t)}`},694385:function(e,t,l){var i=l(520739),n=l(878389),o=l(563097),r=l(88648);let a=(0,r.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,n._)((0,i._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4zM18 19a3 3 0 1 0 0-6v6z",fill:"#fff"}),(0,o.jsx)("path",{d:"M18 23.734l.095-.007A7.75 7.75 0 0 0 18 8.266v2.507a5.25 5.25 0 0 1 0 10.454v2.507z",fill:"#fff"})]})));t.Z=a}}]);