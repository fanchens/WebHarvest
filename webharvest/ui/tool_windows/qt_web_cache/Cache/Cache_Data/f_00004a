"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["5405"],{750733:function(e,i,t){let l,n,o;t.d(i,{t:function(){return ei}});var r=t("520739"),a=t("878389"),d=t("368200");t("874386"),t("950331"),t("268917");var u=t("563097"),s=t("88648"),v=t("713097"),c=t.n(v),h=t("782442"),f=t("463295");t("429532");var p=t("352982"),m=t.n(p),g=t("948375");t("250440");var _={horizontal:0,0:"horizontal",vertical:1,1:"vertical",unknow:2,2:"unknow"};let y=e=>"string"==typeof e?e:`${e}px`,w=(e,i,t,l)=>{e.style.transform=`translate3d(${[i,t,l].map(e=>y(e)).join(",")})`};function I(){let e=this.el.offsetWidth||this.elWidth,i=this.el.offsetHeight||this.elHeight;this.elWidth=e,this.elHeight=i,this.touchData.containerWidth=e+(this.direction===_.horizontal?this.spaceBetween:0),this.touchData.containerHeight=i+(this.direction===_.vertical?this.spaceBetween:0),this.el.childNodes.forEach(t=>{Array.from(t.classList).includes("dySwiperSlide")&&(t.style[this.direction===_.vertical?"height":"width"]=`${this.direction===_.vertical?i:e}px`,t.style[this.direction===_.vertical?"marginBottom":"marginRight"]=`${this.spaceBetween}px`)});let t=this.activeIndex,l=this.loop?t+1:t,n=-(this.touchData.containerWidth*l),o=-(this.touchData.containerHeight*l);this.touchData.x=this.direction===_.horizontal?n:0,this.touchData.y=this.direction===_.vertical?o:0,this.transitionCallback&&(this.transitionCallback(),this.transitionCallback=null),w(this.el,this.touchData.x,this.touchData.y,0)}var C=t("877639"),P=t.n(C),x=t("161045");if("object"==typeof performance&&"function"==typeof performance.now)l=()=>performance.now();else{let e=Date,i=e.now();l=()=>e.now()-i}let b=["INPUT","SELECT","OPTION","TEXTAREA","BUTTON","VIDEO","LABEL"],E=e=>{var i,t;return null==e?void 0:null===(t=e.target)||void 0===t?void 0:null===(i=t.closest)||void 0===i?void 0:i.call(t,"#pc-editor-container")},T=e=>{var i,t,l,n;let o=null==e?void 0:null===(t=e.target)||void 0===t?void 0:null===(i=t.closest)||void 0===i?void 0:i.call(t,".douyin-player-volume-slider");return(null==e?void 0:null===(n=e.target)||void 0===n?void 0:null===(l=n.closest)||void 0===l?void 0:l.call(n,".douyin-player-progress"))||o},D=e=>{var i,t;return null==e?void 0:null===(t=e.target)||void 0===t?void 0:null===(i=t.closest)||void 0===i?void 0:i.call(t,".soda-side-card")};function S(e){var i,t;if(!(this.isDisabled()||T(e)))this.eventEmitter.emit("touchStart"),this.touchData.isTouchDown=!0,this.touchData.touchStartX="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,this.touchData.touchStartY="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,this.touchData.startX=this.touchData.x,this.touchData.startY=this.touchData.y,this.touchData.lastDetectTime=l(),!(b.includes(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.nodeName)||(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.isContentEditable)||E(e)||D(e))&&e.preventDefault()}function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return this.touchData[this.direction===_.horizontal?e:i]}t("527785");let R=[],L=(e,i)=>(R.push([e,i]),R.splice(0,R.findIndex(i=>e-i[0]<=300)),R.reduce((e,i)=>e+i[1],0)/R.length),A=(e,i)=>Math.min(e,Math.abs(i))===e?(i>=0?1:-1)*e:i;function N(){return(null===this||void 0===this?void 0:this.data)&&(null===this||void 0===this?void 0:this.activeIndex)&&!this.data[this.activeIndex-1]?-this.touchData.containerHeight*this.activeIndex:0}function M(){return-(this.data.length-1)*this.touchData[this.direction===_.horizontal?"containerWidth":"containerHeight"]}function j(e,i){var t,l;this.touchData.x=this.direction===_.horizontal?this.touchData.startX+A(this.touchData.containerWidth,e):0,this.touchData.y=this.direction===_.vertical?this.touchData.startY+A(this.touchData.containerHeight,i):0;let n=N.call(this);k.call(this)>n?this.touchData[this.direction===_.horizontal?"x":"y"]=n-1+(-n+k.call(this,"startX","startY")+(this.direction===_.horizontal?e:i))**(null!==(t=this.resistanceRatio)&&void 0!==t?t:.7):k.call(this)<M.call(this)&&(this.touchData[this.direction===_.horizontal?"x":"y"]=M.call(this)+1-(M.call(this)-k.call(this,"startX","startY")-(this.direction===_.horizontal?e:i))**(null!==(l=this.resistanceRatio)&&void 0!==l?l:.7))}function B(e){if(!this.isDisabled()){if(this.touchData.isTouchDown){e.cancelable&&e.preventDefault();let i="touchmove"===e.type&&e.targetTouches&&(e.targetTouches[0]||e.changedTouches[0]),t="touchmove"===e.type?i.pageX:e.pageX,n="touchmove"===e.type?i.pageY:e.pageY,o=(t-this.touchData.touchStartX)*this.touchRatio,r=(n-this.touchData.touchStartY)*this.touchRatio;if(Math.max(Math.abs(o),Math.abs(r))>=30&&this.touchData.userIntendDirection===_.unknow&&(this.touchData.userIntendDirection=Math.max(Math.abs(o),Math.abs(r))===Math.abs(o)?_.horizontal:_.vertical),this.touchData.userIntendDirection===this.direction){let e=l(),i=this.direction===_.horizontal?this.touchData.x:this.touchData.y;j.call(this,o,r),this.touchData.gestureSwipeSpeed=L(e,Math.floor((this.touchData[this.direction===_.horizontal?"x":"y"]-i)/((e-this.touchData.lastDetectTime)/1e3))),this.touchData.lastDetectTime=e,w(this.el,this.touchData.x,this.touchData.y,"0"),this.eventEmitter.emit("touchMove"),this.touchData.isTouchMove=!0,this.transitionCallback&&(this.transitionCallback(),this.transitionCallback=null)}}}}let U=(e,i)=>{e.style.transitionDuration="string"!=typeof i?`${i}ms`:i};function Y(e,i,t,l,n){this.touchData.isTouchDown=!1,this.touchData.isTouchMove=!1,this.touchData.userIntendDirection=_.unknow,0<=e&&this.data.length;let o=this.loop?e+1:e,r=-(this.touchData.containerWidth*o),a=-(this.touchData.containerHeight*o);if(this.direction===_.horizontal?this.touchData.x===r:this.touchData.y===a)return!l&&(this.activeIndex=e,this.updateCallback(e,{from:t})),!1;let d=null!=i?i:this.speed;if(U(this.el,d),this.touchData.x=this.direction===_.horizontal?r:0,this.touchData.y=this.direction===_.vertical?a:0,w(this.el,this.touchData.x,this.touchData.y,0),!l&&(this.activeIndex=e,this.updateCallback(e,{from:t})),0!==d)return this.touchData.animating=!0,this.eventEmitter.emit("transitionStart"),this.transitionCallback=()=>{this.touchData.animating=!1,this.eventEmitter.emit("transitionEnd"),U(this.el,0),null==n||n(),this.el.removeEventListener("transitionend",this.transitionCallback),this.el.removeEventListener("webkitTransitionEnd",this.transitionCallback)},this.el.addEventListener("transitionend",this.transitionCallback),this.el.addEventListener("webkitTransitionEnd",this.transitionCallback),!0;this.touchData.animating=!1}function V(){Y.call(this,this.activeIndex,250)}function F(){return Math.abs(k.call(this)-k.call(this,"startX","startY"))>=k.call(this,"containerWidth","containerHeight")/2}function O(e){return e-this.touchData.lastDetectTime>=100}function $(e){let i=F.call(this),t=Math.abs(this.touchData.gestureSwipeSpeed)>=50,l=O.call(this,e),n=0===this.activeIndex&&k.call(this)>0||this.activeIndex===this.data.length-1&&k.call(this)<M.call(this),o=k.call(this)-k.call(this,"startX","startY")<0==this.touchData.gestureSwipeSpeed<0||0===this.touchData.gestureSwipeSpeed;return(i||t&&!l)&&!n&&o}function z(){let e=k.call(this)-k.call(this,"startX","startY")<0?1:-1,i=this.activeIndex+e;return this.data[i]?i:this.activeIndex}function K(e){if(!this.isDisabled()){if(this.touchData.isTouchDown&&this.touchData.userIntendDirection===this.direction){this.eventEmitter.emit("touchEnd");let e=l();$.call(this,e)?Y.call(this,z.call(this),250,"drag"):V.call(this)}this.touchData.isTouchDown=!1,this.touchData.isTouchMove=!1,this.touchData.userIntendDirection=_.unknow}}var W=t("375944");function G(){return!n&&(n=function(){let e=(0,W.O)();return{pointerEvents:!!window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0,observer:"MutationObserver"in window||"WebkitMutationObserver"in window,smoothScroll:document.documentElement&&"scrollBehavior"in document.documentElement.style,touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||e),passiveListener:function(){let e=!1;try{let i=Object.defineProperty({},"passive",{get(){e=!0}});window.addEventListener("testPassiveListener",null,i)}catch(e){}return e}(),gestures:"ongesturestart"in window}}()),n}t("110006"),t("826893");let X={start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},J={start:"pointerdown",move:"pointermove",end:"pointerup"};function Q(e){this.touchData.animating&&(e.stopPropagation(),e.stopImmediatePropagation())}let Z=(e,i)=>{let t=G(),l=(!o&&(o=function(){let e=G(),{platform:i}=window.navigator,t=window.navigator.userAgent,l={ios:!1,android:!1},n=window.screen.width,o=window.screen.height,r=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),d=t.match(/(iPod)(.*OS\s([\d_]+))?/),u=!a&&t.match(/(iPhone\sOS|iOS)\s([\d_]+)/),s="MacIntel"===i;return!a&&s&&e.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${n}x${o}`)>=0&&(!(a=t.match(/(Version)\/([\d.]+)/))&&(a=[0,1,"13_0_0"]),s=!1),r&&"Win32"!==i&&(l.os="android",l.android=!0),(a||u||d)&&(l.os="ios",l.ios=!0),l}()),o),n=[S,B,K,P()(I,50,{leading:!0,trailing:!0})].map(e=>e.bind(i)),r=Q.bind(i);if(!t.touch&&t.pointerEvents){e.addEventListener(J.start,n[0],!1),document.addEventListener(J.move,n[1],!1),document.addEventListener(J.end,n[2],!1),e.addEventListener("click",r,!0);let i=x.Z.bind(e,n[3]);return()=>{e.removeEventListener(J.start,n[0],!1),document.removeEventListener(J.move,n[1],!1),document.removeEventListener(J.end,n[2],!1),e.removeEventListener("click",r,!0),i&&i()}}{let i="touchstart"===X.start&&!!t.passiveListener&&{passive:!0,capture:!1};t.touch&&(e.addEventListener(X.start,n[0],i),e.addEventListener(X.move,n[1],!!t.passiveListener&&{passive:!1,capture:!1}),e.addEventListener(X.end,n[2],i),e.addEventListener(X.cancel,n[2],i)),(!l.ios&&!l.android||!t.touch&&l.ios)&&(e.addEventListener("mousedown",n[0],!1),document.addEventListener("mousemove",n[1],!1),document.addEventListener("mouseup",n[2],!1));let o=x.Z.bind(e,n[3]);return e.addEventListener("click",r,!0),()=>{t.touch&&(e.removeEventListener(X.start,n[0],i),e.removeEventListener(X.move,n[1],!1),e.removeEventListener(X.end,n[2],i),e.removeEventListener(X.cancel,n[2],i)),(!l.ios&&!l.android||!t.touch&&l.ios)&&(e.removeEventListener("mousedown",n[0],!1),document.removeEventListener("mousemove",n[1],!1),document.removeEventListener("mouseup",n[2],!1)),o&&o(),e.removeEventListener("click",r,!0)}}},H=e=>{let{spaceBetween:i,speed:t,resistanceRatio:l,direction:n,touchRatio:o,onActiveIndexChange:r,onSwiper:a,initIndex:d,data:u,loop:v,isDisabled:c,orderOptimize:h}=e,f=(0,s.useMemo)(()=>new(m()),[]),p=(0,s.useRef)(null),y=(0,s.useRef)({}),w=(0,s.useRef)(-1),[C,P]=(0,s.useState)(d),x=(0,g.Z)((e,i)=>{let{from:t=""}=i;C!==e&&(h||null==r||r(e),P(e),f.emit("slideChange",{from:t}),f.emit("activeIndexChange",{index:e}),h&&(null==r||r(e)))});return y.current=Object.assign(y.current,{data:u,activeIndex:C,speed:t,resistanceRatio:l,spaceBetween:i,slides:u,loop:v,direction:n,touchRatio:o}),(0,s.useEffect)(()=>{var e;let t=n===_.horizontal,l=n===_.vertical,o={isTouchDown:!1,isTouchMove:!1,animating:!1,x:0,y:0,startX:0,startY:0,touchStartX:0,touchStartY:0,gestureSwipeSpeed:0,userIntendDirection:_.unknow,containerWidth:p.current.offsetWidth+(t?i:0),containerHeight:p.current.offsetHeight+(l?i:0)};y.current=Object.assign(y.current,{el:p.current,updateCallback:x,eventEmitter:f,touchData:o,on:f.on.bind(f),once:f.once.bind(f),emit:f.emit.bind(f),off:f.off.bind(f),slideTo:Y.bind(y.current),slideToSync:e=>{w.current=e,x(e,{from:""})},update:()=>null,isDisabled:c,slideNext:()=>{var e;if(c())return;let i=y.current;if(i.touchData.animating&&document&&!document.hidden)return;let t=i.activeIndex+1;t<(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.length)?i.slideTo(t):i.loop&&i.slideTo(t,i.speed,void 0,!0,()=>{i.slideTo(0,0)})},slidePrev:()=>{var e;if(c())return;let i=y.current;if(i.touchData.animating&&document&&!document.hidden)return;let t=i.activeIndex-1;if(t>=0&&(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e[t])){i.slideTo(t);return}-1===t&&i.loop&&i.slideTo(t,i.speed,void 0,!0,()=>{i.slideTo(i.data.length-1,0)})}});let r=c()?()=>{}:Z(p.current,y.current);return null==a||a(y.current),null===(e=y.current)||void 0===e||e.slideTo(C,0),()=>{r()}},[]),(0,s.useEffect)(()=>{-1!==w.current&&y.current.slideTo(w.current,0)},[u]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{I.call(y.current)});return()=>{clearTimeout(e)}},[i,u]),{activeIndex:C,swiperContainerRef:p,dySwiperStatusRef:y}},q=e=>{let{dySwiperStatusRef:i,data:t}=e;(0,s.useEffect)(()=>{var e;(null===(e=i.current)||void 0===e?void 0:e.activeIndex)>(null==t?void 0:t.length)-1&&(null==t?void 0:t.length)>0&&Y.call(i.current,(null==t?void 0:t.length)-1,0)},[t])};t("675373");var ee=t("217281");let ei=(0,s.forwardRef)((e,i)=>{var t;let{direction:l,children:n,className:o,data:v,spaceBetween:p=0,style:m,speed:g,isDisabled:y,resistanceRatio:w,onSwiper:I,slideKey:C,onActiveIndexChange:P,touchRatio:x=1,initIndex:b=0,loop:E=!1,isVideoSupportMP4:T=!0}=e,D=(0,d._)(e,["direction","children","className","data","spaceBetween","style","speed","isDisabled","resistanceRatio","onSwiper","slideKey","onActiveIndexChange","touchRatio","initIndex","loop","isVideoSupportMP4"]),[S,k]=function(e){let i=[],t={"wrapper-start":[],"wrapper-end":[],"wrapper-right":[]};return s.Children.toArray(e).forEach(e=>{if(e.type&&e.type.displayName===ee.o.displayName)i.push(e);else if(e.props&&e.props.slot&&t[e.props.slot])t[e.props.slot].push(e);else if(e.props&&e.props.children){let l=function e(i){let t=[];return s.Children.toArray(i).forEach(i=>{i.type&&i.type.displayName===ee.o.displayName?t.push(i):i.props&&i.props.children&&e(i.props.children).forEach(e=>t.push(e))}),t}(e.props.children);l.length>0?l.forEach(e=>i.push(e)):t["wrapper-end"].push(e)}else t["wrapper-end"].push(e)}),[i,t]}(n),R=S[0],{activeIndex:L,dySwiperStatusRef:A,swiperContainerRef:N}=H({data:v,initIndex:b,spaceBetween:p,speed:g,resistanceRatio:w,touchRatio:x,direction:l,onActiveIndexChange:P,onSwiper:I,loop:E,isDisabled:()=>(null==y?void 0:y())||!T,orderOptimize:(null===(t=h.Le.getConfig(h.gI.AbtestData))||void 0===t?void 0:t.firstFrameOrder)===1}),M=(0,s.useMemo)(()=>{if(!R)return null;let e=v.map((e,i)=>s.cloneElement(R,{activeIndex:L,currentIndex:i,slideData:e,key:null==C?void 0:C(e,i)}));if(E&&v.length>1){let i=v[0],t=v[v.length-1],l=v.length,n=s.cloneElement(R,{activeIndex:L,currentIndex:-1,slideData:t,key:null==C?void 0:C(t,-1)}),o=s.cloneElement(R,{activeIndex:L,currentIndex:l,slideData:i,key:null==C?void 0:C(t,l)});e.unshift(n),e.push(o)}return e},[R,E,v,L]);return(0,s.useImperativeHandle)(i,()=>A.current,[]),q({dySwiperStatusRef:A,data:v}),(0,u.jsxs)("div",(0,a._)((0,r._)({className:c()(f.default.container,o),style:m},D),{children:[(0,u.jsxs)("div",{ref:N,className:c()(f.default.wrapper,{[f.default.vertical]:l===_.vertical}),children:[k["wrapper-start"],M,k["wrapper-end"]]}),k["wrapper-right"]]}))})},217281:function(e,i,t){t.d(i,{o:function(){return v}});var l=t(520739),n=t(878389),o=t(368200);t(874386);var r=t(563097),a=t(88648),d=t(713097),u=t.n(d),s=t(275986);let v=(0,a.memo)(e=>{let{activeIndex:i,currentIndex:t,children:a,slideData:d,style:v,className:c}=e,h=(0,o._)(e,["activeIndex","currentIndex","children","slideData","style","className"]);return(0,r.jsx)("div",(0,n._)((0,l._)({style:v,className:u()(s.default.container,"dySwiperSlide",c)},h),{children:"function"==typeof a?a({activeIndex:i,currentIndex:t,slideData:d}):a}))});v.displayName="SwiperSlide"},81357:function(e,i,t){let l;t.d(i,{f:function(){return j}});var n,o,r,a=t("520739");t("874386"),t("429532"),t("250440");var d=t("563097"),u=t("352982"),s=t.n(u),v=t("88648"),c=t("734123"),h=t.n(c),f=t("713097"),p=t.n(f),m=t("445678"),g=t("720359"),_=t("746864"),y=t("79307"),w=t("782442"),I=t("658016"),C=t("77726"),P=t("375944"),x=t("911364"),b=t("15334"),E=t("35730"),T=t("782563"),D=t("726406"),S=t("555106"),k=t("702726");let R=!1;if(!R){R=!0;let e=0;try{e=(null===(n=window)||void 0===n?void 0:n.MediaSource)&&(null===(r=window)||void 0===r?void 0:null===(o=r.MediaSource)||void 0===o?void 0:o.isTypeSupported)?1:0}catch(e){}if((0,T.DT)())k.logInstance.sendLog("hardParseSupported",{is_supported_hevc1:(0,D._u)()?1:0,is_supported_264:(0,D.b4)()?1:0,is_enable_mse:e});else try{h().probeConfigSupported({type:"file",video:{contentType:'video/mp4;codecs="hev1.1.6.L120.90"',width:1920,height:1080,bitrate:2e6,framerate:30}}).then(i=>{let t=(null==i?void 0:i.powerEfficient)?1:0;(0,S.qQ)(E.LocalStorageKeys.PowerEfficient,t),k.logInstance.sendLog("hardParseSupported",{is_supported_hevc1:h().isHevcSupported()?1:0,powerEfficient:t,smooth:(null==i?void 0:i.smooth)?1:0,supported:(null==i?void 0:i.supported)?1:0,is_enable_mse:e})})}catch(e){}}var L=t("692876"),A=t("597321");t("275377");var N=t("385976");let M=()=>{var e;if((null===(e=w.Le.getConfig(w.gI.AbtestData))||void 0===e?void 0:e.useCache)===1&&void 0!==l)return l;let i=(0,m.getSelectorsByUserAgent)((0,I.i)()),{isMobile:t}=i,n=i.isIOS&&i.isTablet;return l=t||n,t||n},j=(0,v.forwardRef)(function(e,i){let{isPrev:t,isActive:l,isNext:n,className:o,style:r,isMobileSite:u,children:f,xgplayerConfig:m,isInitPlayer:I,onReady:E,onClick:T,slardarInstance:D,id:S,playerDOMRef:k,reuseConfig:R={},setContainerPlayer:j,abtestData:B,scene:U,reuseBigCardQuickPlayer:Y}=e,[V,F]=(0,v.useState)(null),O=k||(0,v.useRef)(null),$=(0,g.d)(U);(0,g.d)(Y);let z=(0,v.useRef)();!z.current&&(z.current=new(s())),(0,v.useEffect)(()=>{if(I){var e,i,t,l,n,o,r,d;let s,v;let f=M()&&!u,p=O.current;(null===(e=(0,C.bE)("new_player"))||void 0===e?void 0:e.length)<1&&(0,C.B1)({tag:"new_player"});let g=null==m?void 0:m.awemeInfo;(null==g?void 0:g.awemeType)===_.e.Note&&Object.assign(m,{startTime:Math.max(m.startTime||0,(null==g?void 0:null===(n=g.imageAlbumMusicInfo)||void 0===n?void 0:n.beginTime)/1e3||0)}),(0,P.O)()&&Object.assign(m,{domEventType:"compatible"}),z.current.emit(L.V.PlayerBeforeCreate,s);let{scene:I,reuseId:x,keepPlayer:b}=R||{};[y.lT.Preview,y.lT.Modal].includes($.current)&&x&&(v=N.YY.getReusePlayer(R,m,p,$.current));let T=null===(i=window.__QUICK_PLAYER)||void 0===i?void 0:i.player,D=T&&[y.lT.Recommend,y.lT.Modal].includes($.current)&&(null===(l=window.__QUICK_PLAYER)||void 0===l?void 0:null===(t=l.awemeInfo)||void 0===t?void 0:t.awemeId)===(null==g?void 0:g.awemeId);D?((s=T).isQuickPlayer=1,null==E||E(s),p.firstChild?p.insertBefore(s.root,p.firstChild):p.appendChild(null==s?void 0:s.root),null===(r=window.__QUICK_PLAYER)||void 0===r||null===(o=r.destroyQuickPlayerDom)||void 0===o||o.call(r)):v?(s=v).reuse=1:s=new(h())((0,a._)({el:p,width:"100%",height:"100%",closeFocusVideoFocus:!0},m)),f&&s&&(s.removeClass("xgplayer-mobile"),s.addClass("xgplayer-pc")),z.current.emit(L.V.PlayerCreated,s),s.dyLogStat=s.dyLogStat||{},F(s),(null==B?void 0:B.slideOptimize)&&(null==j||j(s));let S=()=>{null==E||E(s)};if(null==s||s.on(c.Events.READY,S),b&&(null==g?void 0:g.awemeId)){let e=null!==(d=w.Le.getConfig(w.gI.keepPlayersInfo))&&void 0!==d?d:new Map,i=`${I}-${g.awemeId}`;if(!e.has(i)){let t=(0,a._)({destroyFn:()=>{var e,i;let t=null!==(i=w.Le.getConfig(w.gI.JingxuanCardProgress))&&void 0!==i?i:{};t[g.awemeId]=s.currentTime,w.Le.setConfig(w.gI.JingxuanCardProgress,t),null==s||s.off(c.Events.READY,S),null==s||s.emit(A.B.BeforeDestroy),null==s||null===(e=s.destroy)||void 0===e||e.call(s),s.dyLogStat=null},awemeId:g.awemeId,player:s},R);e.set(i,t),w.Le.setConfig(w.gI.keepPlayersInfo,e)}}return()=>{var e,i,t;if(b&&(null==g?void 0:g.awemeId)){let i=null!==(e=w.Le.getConfig(w.gI.JingxuanCardProgress))&&void 0!==e?e:{};i[g.awemeId]=s.currentTime,w.Le.setConfig(w.gI.JingxuanCardProgress,i)}null==s||s.off(c.Events.READY,S),null==s||s.emit(A.B.BeforeDestroy),F(null),(null==B?void 0:B.slideOptimize)&&(null==j||j(null)),D?(b||null==T||null===(i=T.destroy)||void 0===i||i.call(T),delete window.__QUICK_PLAYER):v?b||N.YY.recyclePlayer(I,x,null==s?void 0:s.playerId):(null==s||null===(t=s.destroy)||void 0===t||t.call(s),s.dyLogStat=null)}}},[I]),(0,v.useImperativeHandle)(i,()=>({getPlayer:()=>V,player:V,getPlayerRoot:()=>O.current,root:O.current}),[V]);let K=(0,v.useMemo)(()=>({player:V,slardarInstance:D,contextEvent:z.current}),[V]);return(0,d.jsx)("div",{onClick:T,className:p()(x.default.xgplayerContainer,"basePlayerContainer",o),style:r,id:S,ref:O,children:(0,d.jsx)(b.E.Provider,{value:K,children:f})})})},692876:function(e,i,t){t.d(i,{V:function(){return l}});var l={PlayerCreated:"PlayerCreated",PlayerBeforeCreate:"PlayerBeforeCreate"}},597321:function(e,i,t){t.d(i,{B:function(){return l}});var l={danmakuSettingChange:"danmakuSettingChange",danmakuInputFocus:"danmakuInputFocus",Ended:"ended",MiniWinChange:"miniWinChange",PlayRatioChange:"playRatioChange",UpdateCommentCount:"updateCommentCount",Blur:"blur",VolumeUp:"upVolume",VolumeDown:"downVolume",NextAutoplayChange:"nextAutoplayChange",BeforePlaySwitchPrev:"playSwitchPrevBefore",AfterPlaySwitchNext:"playSwitchNextBefore",KeyPlaySwitchPrev:"keyPlaySwitchPrev",KeyPlaySwitchNext:"keyPlaySwitchNext",Waiting:"waiting",ManualChangeMiniState:"manual_change_min_state",Star:"onStar",ShowComment:"showComment",Collect:"onCollect",ShowShareCode:"showShareCode",Dislike:"onDislike",Avatar:"onAvatar",Follow:"onFollow",FakeScreen:"onFakeScreen",SwitchFullScreen:"switch_fullscreen",FakeScreenChange:"fakeScreenChange",PlayRatioPanelShow:"playRatioPanelShow",LightBottomControls:"lightBottomControls",ResolutionChange:"resolutionChange",PlayResolutionClick:"playResolutionClick",PlayResolutionEnter:"playResolutionEnter",VolumeChange:"volumechange",UpdateImmersiveSwitch:"updateImmersiveSwitch",ImmersiveSwitchChange:"immersiveSwitchChange",UpdateAutoPlaySwitch:"updateAutoPlay",AutoPlaySwitchChange:"autoPlaySwitchChange",CustomShortCut:"customShortCut",ChangePlayRate:"changePlayRate",TimeUpdate:"timeupdate",ShowAdDetail:"showAdDetail",AdLike:"adverLike",AdDislike:"adverDislike",AdReport:"adverReport",AdThrow:"adverThrow",AdIntroduce:"adverIntroduce",Play:"play",Replay:"replay",Error:"error",ChangeDanmaku:"changeDanmaku",UpdateRadio:"UpdateRadio",UpdateClarity:"UpdateClarity",UpdateAutoPlay:"UpdateAutoPlay",BeforeDestroy:"beforeDestroy",DyUserSeek:"dyUserSeek",UpdateDebugInfo:"updateDebugInfo",RegisterMissingSrPlugin:"registerMissingSrPlugin",DanmakuCloseAll:"danmakuCloseAll",DanmakuON:"danmakuON"}},948750:function(e,i,t){t.d(i,{l:function(){return o}});var l=t(88648),n=t(15334);let o=()=>{let{contextEvent:e}=(0,l.useContext)(n.E);return e}},385976:function(e,i,t){t.d(i,{YY:function(){return v}});var l=t(134761),n=t(520739),o=t(734123),r=t.n(o),a=t(79307),d=t(475343),u=t(356650),s=t(782442);let v=new class e{getReusePlayer(e,i,t,l){try{var o,s,v,c,h,f,p,m,g,_,y,w,I;let{scene:C,reuseId:P,autoCreate:x,keepPlayer:b}=e||{},E=null==i?void 0:i.awemeInfo;if(!C||!P||!(null==E?void 0:E.awemeId)||P!==(null==E?void 0:E.awemeId)||(0,u.GP)(E))return null;let T=null===(s=this.reusePlayers)||void 0===s?void 0:null===(o=s[C])||void 0===o?void 0:o[P];if(T&&this.checkPlayerReuseAble(C,P))return t.firstChild?t.insertBefore(T.root,t.firstChild):t.appendChild(null==T?void 0:T.root),T;if(x){let e;let o=null===(v=window.__JX_BIG_CARD_QUICK_PLAYER)||void 0===v?void 0:v.player;if(l===a.lT.Preview&&b&&o&&(null===(c=window.__JX_BIG_CARD_QUICK_PLAYER)||void 0===c?void 0:c.mountType)==="preview"&&(null===(h=window.__JX_BIG_CARD_QUICK_PLAYER)||void 0===h?void 0:h.awemeInfo)&&(null===(p=window.__JX_BIG_CARD_QUICK_PLAYER)||void 0===p?void 0:null===(f=p.awemeInfo)||void 0===f?void 0:f.awemeId)===(null==E?void 0:E.awemeId))e=o,t.firstChild?t.insertBefore(e.root,t.firstChild):t.appendChild(null==e?void 0:e.root),null===(m=(g=window).removeBigCardQuickPlayerCrossVolume)||void 0===m||m.call(g),null===(y=window.__JX_BIG_CARD_QUICK_PLAYER)||void 0===y||null===(_=y.destroyQuickPlayerDom)||void 0===_||_.call(y),null===(w=window.__JX_BIG_CARD_QUICK_PLAYER)||void 0===w||delete w.player,null===(I=window.__JX_BIG_CARD_QUICK_PLAYER)||void 0===I||delete I.awemeInfo;else{b&&C===d.v.Discover&&l===a.lT.Preview&&(window.bigCardQuickPlayerReuseFail=!0);let o=document.createElement("div");t.appendChild(o),e=new(r())((0,n._)({el:o,width:"100%",height:"100%",closeFocusVideoFocus:!0},i))}return!this.reusePlayers[C]&&(this.reusePlayers[C]={}),this.reusePlayers[C][P]=e,e}return null}catch(e){return null}}setPlayerReuseAble(e,i){var t,l,n;(null===(l=this.reusePlayers)||void 0===l?void 0:null===(t=l[e])||void 0===t?void 0:t[i])&&(!(null===(n=this.playerReuseable)||void 0===n?void 0:n[e])&&(this.playerReuseable[e]={}),this.playerReuseable[e][i]=!0)}setReusePlayer(e,i,t){var l,n,o;!(null===(n=this.reusePlayers)||void 0===n?void 0:null===(l=n[e])||void 0===l?void 0:l[i])&&(!this.reusePlayers&&(this.reusePlayers={}),!(null===(o=this.reusePlayers)||void 0===o?void 0:o[e])&&(this.reusePlayers[e]={}),this.reusePlayers[e][i]=t)}checkPlayerReuseAble(e,i){var t,l;return(null===(l=this.playerReuseable)||void 0===l?void 0:null===(t=l[e])||void 0===t?void 0:t[i])||!1}checkIsReusePlayer(e,i,t){var l,n;let o=null===this||void 0===this?void 0:null===(n=this.reusePlayers)||void 0===n?void 0:null===(l=n[e])||void 0===l?void 0:l[i];return!!(t&&o&&(null==t?void 0:t.playerId)===(null==o?void 0:o.playerId))}checkIsReuseWithId(e,i){var t,l;return!!(null===this||void 0===this?void 0:null===(l=this.reusePlayers)||void 0===l?void 0:null===(t=l[e])||void 0===t?void 0:t[i])}recyclePlayer(e,i,t){var l,n,o,r,a,d,u,s,v;!this.checkPlayerReuseAble(e,i)&&t&&t===(null===(o=this.reusePlayers)||void 0===o?void 0:null===(n=o[e])||void 0===n?void 0:null===(l=n[i])||void 0===l?void 0:l.playerId)&&(null===(u=this.reusePlayers)||void 0===u||null===(d=u[e])||void 0===d||null===(a=d[i])||void 0===a||null===(r=a.destroy)||void 0===r||r.call(a),null===(v=this.reusePlayers)||void 0===v||null===(s=v[e])||void 0===s||delete s[i])}clearAllReusePlayer(){let e=s.Le.getConfig(s.gI.keepPlayersInfo);for(let a in this.reusePlayers){var i,t,l,n,o,r;for(let d in null===(i=this.reusePlayers)||void 0===i?void 0:i[a]){if(!(e&&(null==e?void 0:null===(t=e.get)||void 0===t?void 0:t.call(e,`${a}-${d}`))))null===(r=this.reusePlayers)||void 0===r||null===(o=r[a])||void 0===o||null===(n=o[d])||void 0===n||null===(l=n.destroy)||void 0===l||l.call(n)}}this.reusePlayers={},this.playerReuseable={}}constructor(){(0,l._)(this,"reusePlayers",{}),(0,l._)(this,"playerReuseable",{})}}},475343:function(e,i,t){t.d(i,{v:function(){return l}});var l={Discover:"discover",User:"user"}},803620:function(e,i,t){t.d(i,{Z:function(){return Q}});var l=t(520739),n=t(878389);t(179133),t(826893),t(250440);var o=t(88648),r=t(128231),a=t.n(r),d=t(567754),u=t(734123),s=t(870105),v=t(79307),c=t(136808),h=t(35730),f=t(256277),p=t(891655),m=t(782442),g=t(150566),_=t(352165),y=t(79982),w=t(32167),I=t(122391),C=t(367366),P=t(399796),x=t(349998),b=t(330746),E=t(217177),T=t(488656),D=t(272978),S=t(362501),k=t(353994),R=t(816299),L=t(637005),A=t(30321),N=t(363706),M=t(734017),j=t(683062),B=t(709409),U=t(552562),Y=t(631493),V=t(320544),F=t(322519),O=t(383212),$=t(77651),z=t(23847),K=t(764942),W=t(597803),G=t(736713),X=t(226355);let J=(e,i)=>{let t=(0,z.I)();if(t.playtime.used=!0,t.playtime.data){let e=t.playtime.data;return t.playtime.data=null,e}return e?e:i.paused?0:Date.now()};function Q(e){let{player:i,awemeInfo:t,isActive:r}=e,{getLogInfo:z,getSpecialParams:Q}=e,Z=(0,o.useRef)(0),H=(0,o.useRef)(!0);H.current=(0,s.U)(),(0,o.useEffect)(()=>{if(i&&r){var e,o,s,q,ee,ei,et,el;let r=0,en=0,eo=J(Z.current,i);(null==i?void 0:i.isQuickPlayer)&&(null===(ee=window.__QUICK_PLAYER)||void 0===ee?void 0:ee.playerStartTime)&&(eo=null===(ei=window.__QUICK_PLAYER)||void 0===ei?void 0:ei.playerStartTime,null===(et=window.__QUICK_PLAYER)||void 0===et||delete et.playerStartTime),window.__JX_BIG_CARD_QUICK_PLAYER_START_TIME&&(eo=window.__JX_BIG_CARD_QUICK_PLAYER_START_TIME,delete window.__JX_BIG_CARD_QUICK_PLAYER_START_TIME);let er=0,ea=0,ed=0,eu=!1,es=!1,ev=!1,{vtype:ec}=i,eh="init",ef="init",ep=(null===(e=m.Le.getConfig(m.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)||Y.s.getPlayerScene(null==i?void 0:i.playerId)===v.lT.Modal,em=null!==(el=null===(o=window)||void 0===o?void 0:o.ROUTE_PARAMS)&&void 0!==el?el:(0,d.parse)(null===(q=window)||void 0===q?void 0:null===(s=q.location)||void 0===s?void 0:s.search),eg=(0,M.zD)()||(null==em?void 0:em.tab_name)||(0,g.Rs)("tab_name")||"",e_={startTime:0,acc:0},ey=e=>{if(eo=Date.now(),es=!1,ep&&!(null==i?void 0:i.paused)&&(eu=!1),!!(null==i?void 0:i.video))en=i.currentTime,ec=i.vtype,eh="string"==typeof e?e:"play"},ew=()=>{ep&&(eu=!1),ea=1},eI=(e,o)=>{var a,d,u,s,v,A,N,M,J,Z,H,q,ee,ei,et,el,eu,es,ev,ep,em,ey,ew,eI,eC,eP,ex,eb,eE,eT,eD,eS,ek;let{author_id:eR,group_id:eL,playlet_id:eA,log_pb:eN,isFromNextAutoPlay:eM,vduration:ej,extraParams:eB,pic_cnt:eU,aweme_type:eY,isMini:eV,trending_topic:eF,first_tag_name:eO,top:e$,is_click_cover:ez,is_pure:eK,is_insert_wallpaper:eW,is_landscape:eG,bitRate:eX,latest_group_id:eJ,if_first_big_card:eQ,is_first_large_card_outflow:eZ,sub_tab_name:eH,filter_name:eq}=z(),e0=Q(),e1=Date.now()-eo,e2=i.cumulateTime-er;if(m.Le.getConfig(m.gI.IsSearchOuterAsync)){m.Le.setConfig(m.gI.IsSearchOuterAsync,!1);return}if(!eo||!i||!eL||Date.now()-ed<100||e1<100)return;let e3=0;((0,g.Rs)("modeFrom")===c.MODE_FROM||(0,g.Rs)("modeFrom")===c.MODE_FROM_SEARCH)&&(e3=1);let e7=(0,g.Rs)("if_from_widget"),e5=r>0?eo-r:0;r=0;let{isH265:e8}=(0,V.Z)({awemeInfo:t,player:i}),e4=(null==i?void 0:null===(a=i.curDefinition)||void 0===a?void 0:a.bitrate)||eX||0,e6=(null===(d=i.curDefinition)||void 0===d?void 0:d.realBitrate)||0,e9=(0,_.e)(e1/1e3*e6),ie=(null==i?void 0:null===(v=i.plugins)||void 0===v?void 0:null===(s=v.autoplaysettingplugin)||void 0===s?void 0:null===(u=s.config)||void 0===u?void 0:u.nextAutoPlay)||(null==i?void 0:null===(M=i.plugins)||void 0===M?void 0:null===(N=M.searchautoplaysettingplugin)||void 0===N?void 0:null===(A=N.config)||void 0===A?void 0:A.nextAutoPlay),ii=String(void 0===ie?null!=eM?eM:0:ie),{memory:it={},battery:il}=(0,y.J)()||{};e_.startTime&&(e_.acc+=Date.now()-e_.startTime,e_.startTime=0);let io=(null===(J=window.EXPOSE_DATA)||void 0===J?void 0:J.landingPage)==="discover",ir=(null===(Z=window.EXPOSE_DATA)||void 0===Z?void 0:Z.landingPage)==="follow",ia=io&&(null===(H=window.EXPOSE_DATA)||void 0===H?void 0:H.landingMode)!==2&&(null===(q=window.EXPOSE_DATA)||void 0===q?void 0:q.landingMode)!==3,id=null!==(eT=null!==(eE=(0,g.Rs)("enter_method"))&&void 0!==eE?eE:io||ir?"default_landing":void 0)&&void 0!==eT?eT:"other";j.Z.sendLog("playTime",(0,n._)((0,l._)((0,n._)((0,l._)((0,n._)((0,l._)((0,n._)((0,l._)((0,n._)((0,l._)((0,n._)((0,l._)({is_click_cover:ez,is_insert_wallpaper:eW,is_visible:String(e?1:0),duration:e1,duration_moving:e2,duration_waiting:e_.acc,report_reason:o,duration_error:e5,play_time:eo,from_percent:1e3*en/ej,to_percent:(null==i?void 0:i.currentTime)*1e3/ej,percentage:(null==i?void 0:i.currentTime)*1e3/ej,play_start_time:Math.floor(en||0),play_end_time:Math.floor((null==i?void 0:i.currentTime)||0),is_auto_play:ii,urlParamList:["trending_topic","previous_page"],enter_method:id,tab_name:eg,author_id:eR,enter_from:(0,w.mo)(),enter_from_merge:(0,I.z)(""),group_id:eL,playlet_id:eA,log_pb:eN,video_detail_enter_from:(0,I.z)("web_link"),is_highlight_show:(0,W.Z)({awemeInfo:t})?1:0,speed:String(null==i?void 0:i.playbackRate),is_loop:String(ea),is_full_screen:(0,C.r)()?"1":"0",is_full_webscreen:Y.s.getIsPageFullscreen()?"1":"0",is_author_card_expand:(null===(ee=m.Le.getConfig(m.gI.IsCollapseAuthorCard))||void 0===ee?void 0:ee.isCollapseAuthorCard)?0:1,from_follow_list:(null===(ei=m.Le.getConfig(m.gI.FromFollowList))||void 0===ei?void 0:ei.tag)?"1":"0",from_push:P.Q.getItem({sKey:h.CookieKeys.FromClientPush})?1:0,is_mute:(null==i?void 0:i.muted)?"1":"0"},(0,x.t)()),{mute_type:null===(et=m.Le.getConfig(m.gI.ForceMuted))||void 0===et?void 0:et.currentMuteType,from_academy:e3,pic_cnt:eU,aweme_type:eY,trending_topic:eF,first_tag_name:eO,top:e$,is_pure:eK,is_from_ad:(0,f.Jt)(t)?1:0,is_bytevc1:e8,browser_height:(0,b.P6)(),browser_width:(0,b.wi)(),browser_ratio:(0,b.P6)()/(0,b.wi)()}),(0,E.v)(t)),{is_landscape:eG,stage:`${eh}-${ef}`}),(0,F.Z)(),eB,e0.playTime||{}),{is_force:(null===(el=m.Le.getConfig(m.gI.ForceMuted))||void 0===el?void 0:el.currentMuteType)==="browser"?"1":"0",video_time:(0,T.n)(null==t?void 0:null===(eu=t.video)||void 0===eu?void 0:eu.duration),auto_play_mode:null===(es=m.Le.getConfig(m.gI.InnerAutoPlay))||void 0===es?void 0:es.mode,seo_vids:D.t("seo_vids")||"",video_play_method:null!==(eD=m.Le.getConfig(m.gI.VideoPlayMethod))&&void 0!==eD?eD:"auto",if_invisible:(0,S.Vr)()?"1":"0",is_small_window:(0,K.f)()?"1":"0",small_window_scene:(0,K.f)()?X.h.getState().smallWindowScene:"",is_top:(0,S.k)()?"1":"0",url_source:null!==(eS=null==t?void 0:null===(ev=t.continationInfo)||void 0===ev?void 0:ev.urlSource)&&void 0!==eS?eS:["recommend","personal_homepage"].includes((0,w.vM)())?P.Q.getItem({sKey:h.CookieKeys.UrlSourceForBrowserPlugin}):"",play_order:(0,O.G)(),play_size:e9,video_bitrate:e4,audio_bitrate:(null===(em=i.curDefinition)||void 0===em?void 0:null===(ep=em.audioDefinition)||void 0===ep?void 0:ep.bitrate)||0,real_bitrate:e6,latest_group_id:eJ,vduration:ej,vtype:ec}),(null==i?void 0:null===(eI=i.plugins)||void 0===eI?void 0:null===(ew=eI.srplugin)||void 0===ew?void 0:null===(ey=ew.getStat)||void 0===ey?void 0:ey.call(ew))||{}),{video_quality:null==i?void 0:null===(eC=i.curDefinition)||void 0===eC?void 0:eC.qualityType,gear_name:null==i?void 0:null===(eP=i.curDefinition)||void 0===eP?void 0:eP.gearName,sr_sharpness_strength:(null==i?void 0:null===(ex=i.curDefinition)||void 0===ex?void 0:ex.srSharpnessStrength)||-1,if_continued_play:m.Le.getConfig(m.gI.PlayRecord)?(0,B.v)(t.awemeId)?1:0:"",rate:m.Le.getConfig(m.gI.PlayRecord)?(null==i?void 0:i.currentTime)/(null==i?void 0:i.duration):""}),(0,$.m)({player:i}),(0,$.B)({player:i}),(0,p.K)(t)),{if_from_widget:e7?1:0,from_click_group_id:null!==(ek=null==t?void 0:t.insertId)&&void 0!==ek?ek:"",column_type:(null==eB?void 0:eB.column_type)||(null==eB?void 0:null===(eb=eB.search_params)||void 0===eb?void 0:eb.column_type),memory_js_heap_size_limit:it.jsHeapSizeLimit,memory_used_js_heap_size:it.usedJSHeapSize,memory_total_js_heap_size:it.totalJSHeapSize,memory_free_js_heap_size:it.freeJSHeapSize,memory_free_level:it.freeLevel,memory_use_level:it.usedLevel,battery_charging:null==il?void 0:il.charging,battery_level:null==il?void 0:il.level,if_first_big_card:eQ,is_ai_note:(0,G.Z)({awemeInfo:t})?1:0,sidebar_status:(0,k.GE)()}),(0,R.Wc)()),{is_recommend:"default_landing"===id?Number(ia):void 0,is_selected_label:(null==t?void 0:t.weeklyRecommend)?1:0,is_first_large_card_outflow:eZ,sub_tab_name:eH,filter_name:eq}),!1),i.playTime=((null==i?void 0:i.playTime)||0)+e1,eo=Date.now(),ed=Date.now(),er=i.cumulateTime,ec=i.vtype,eh="reported",(0,U.y)(i,ea,t),e_.acc=0,"discover"===(0,w.mo)()&&L.emit(L.EVENT.selectDuration,{duration:e1})},eC=a()(()=>{if(!ev&&(null==i?!void 0:!i.paused))ef="seeking",eI("visible"===document.visibilityState,"seeking")},500,{leading:!0,trailing:!1}),eP=a()(()=>{ey("seeked"),ev=!1},500,{leading:!1,trailing:!0}),ex=e=>{ef=e,eI("visible"===document.visibilityState,e),ey(e)},eb=()=>{if(ep&&(eu=!0),!H.current&&!(0,A.Nr)(location.pathname)){es=!0;return}ex("pause"),es=!0},eE=()=>{ep&&!eu&&ex("destroy")},eT=e=>{i.video&&!(null==i?void 0:i.paused)&&(ef="changetab",eI(e,"page_visibility_change"),ey("changetab"))},eD=()=>{if(!es&&!i.isSeeking)ex("degrade")},eS=()=>{if(!i.paused)ex("changeurl"),ev=!0},ek=()=>{r=Date.now()},eR=()=>{if(!i.isSeeking&&!i.paused)e_.startTime=Date.now()},eL=()=>{e_.startTime&&(e_.acc+=Date.now()-e_.startTime,e_.startTime=0)};return i.on("error",ek),i.on("seeked",eP),i.on("play",ey),i.on("replay",ew),i.on("seeking",eC),i.on("pause",eb),i.on("degrade",eD),i.on("urlchange",eS),(0,N.vP)(eT),i.once("destroy",eE),i.on(u.Events.WAITING,eR),i.on(u.Events.PLAYING,eL),i.on(u.Events.TIME_UPDATE,eL),()=>{i.off("error",ek),i.off("seeked",eP),i.off("seeking",eC),i.off("play",ey),i.off("replay",ew),i.off("pause",eb),i.off("destroy",eE),i.off("degrade",eD),i.off("urlchange",eS),i.off(u.Events.WAITING,eR),i.off(u.Events.PLAYING,eL),i.off(u.Events.TIME_UPDATE,eL),!es&&ex("unmount"),(0,N.xC)(eT),Z.current=0}}},[t,i,r]),(0,o.useEffect)(()=>{if(i){let e=()=>{i.errored=0,!Z.current&&(Z.current=Date.now())};return i.on(u.Events.PLAY,e),()=>{i.off(u.Events.PLAY,e)}}},[i])}},598434:function(e,i,t){var l=t(520739),n=t(555106),o=t(32167),r=t(782563),a=t(35730);i.Z=e=>{try{var i,t,d,u,s,v,c,h,f,p,m,g,_,y,w,I,C,P;let x=(0,n.$o)(a.LocalStorageKeys.IsSupportHevc);return(0,l._)({enter_from:(0,o.mo)(),internet_speed_dl:null===(t=navigator)||void 0===t?void 0:null===(i=t.connection)||void 0===i?void 0:i.downlink,cpu_core:null===(d=navigator)||void 0===d?void 0:d.hardwareConcurrency,memory_size:(0,r.Bl)(),UA_info:null===(u=navigator)||void 0===u?void 0:u.userAgent,webdriver:navigator&&navigator.webdriver?1:0,is_long_not_use_refresh_vid:!!(null==e?void 0:null===(s=e.config)||void 0===s?void 0:s.notUseRefreshVid),preplay_stat:(null==e?void 0:e.preplayStat)?1:0,prepause_stat:(null==e?void 0:e.prepauseStat)?1:0,player_start_time:(null==e?void 0:null===(v=e.config)||void 0===v?void 0:v.startTime)||0,video_codec:null==e?void 0:null===(c=e.mediaCodec)||void 0===c?void 0:c.videoCodec,audio_codec:null==e?void 0:null===(h=e.mediaCodec)||void 0===h?void 0:h.audioCodec,is_player_v2:0,player_id:null==e?void 0:e.playerId,chosenType:null==e?void 0:null===(f=e.curDefinition)||void 0===f?void 0:f.chosenType,chosenReason:null==e?void 0:null===(p=e.curDefinition)||void 0===p?void 0:p.chosenReason,audio_quality:(null==e?void 0:null===(g=e.curDefinition)||void 0===g?void 0:null===(m=g.audioDefinition)||void 0===m?void 0:m.audioQuality)||0,danmaku_getbounding_counts:(null==e?void 0:e.danmakuGetBoundingCounts)||0,danmu_el_create_counts:(null==e?void 0:e.danmuElCreateCounts)||0,danmaku_readdata_times:(null==e?void 0:null===(_=e.danmaku)||void 0===_?void 0:_.readDataTimes)>0?(null==e?void 0:null===(y=e.danmaku)||void 0===y?void 0:y.readDataTimes)-(null==e?void 0:e.firstframe):-1,danmaku_attach_times:(null==e?void 0:null===(w=e.danmaku)||void 0===w?void 0:w.attachTimes)>0?(null==e?void 0:null===(I=e.danmaku)||void 0===I?void 0:I.attachTimes)-(null==e?void 0:e.firstframe):-1,danmaku_startmove_times:(null==e?void 0:null===(C=e.danmaku)||void 0===C?void 0:C.startMoveTimes)>0?(null==e?void 0:null===(P=e.danmaku)||void 0===P?void 0:P.startMoveTimes)-(null==e?void 0:e.firstframe):-1},x||{})}catch(e){return{}}}},322519:function(e,i,t){var l=t(804487);i.Z=()=>{var e,i,t;return{gpu_vendor:null===(e=(0,l.$)())||void 0===e?void 0:e.vendor,gpu_score:null===(i=(0,l.$)())||void 0===i?void 0:i.score,gpu_info:null===(t=(0,l.$)())||void 0===t?void 0:t.info}}},77651:function(e,i,t){t.d(i,{B:function(){return u},m:function(){return d}});var l=t(520739),n=t(35730),o=t(782563),r=t(555106),a=t(782442);let d=e=>{var i,t;let{player:l}=e,n=null==l?void 0:null===(t=l.definitionList)||void 0===t?void 0:null===(i=t.find)||void 0===i?void 0:i.call(t,e=>{var i;return(null==e?void 0:e.definition)===(null==l?void 0:null===(i=l.curDefinition)||void 0===i?void 0:i.orgDefinition)});if(l.orgDefinition=n,!n)return{};let{bitrate:o,definition:r,gearName:a,qualityType:d,size:u}=n;return{video_bitrate_origin:o,gear_name_origin:a,video_quality_origin:d,video_size_origin:u,definition_origin:r}},u=e=>{let{player:i}=e;try{var t,d,u,s,v,c,h,f,p,m,g,_,y,w;if(!(0,o.DT)())return(0,l._)({is_super_resolution:(null===(v=i.plugins)||void 0===v?void 0:null===(s=v.srplugin)||void 0===s?void 0:null===(u=s.getStat)||void 0===u?void 0:null===(d=u.call(s))||void 0===d?void 0:d.usingSR)?1:0,is_sr:(null===(p=i.plugins)||void 0===p?void 0:null===(f=p.srplugin)||void 0===f?void 0:null===(h=f.getStat)||void 0===h?void 0:null===(c=h.call(f))||void 0===c?void 0:c.usingSR)?1:0,is_sr_dowgrade_permanently:null!==(y=(0,r.$o)(n.LocalStorageKeys.srDegradePermanently))&&void 0!==y?y:0,is_sr_dowgrade_once:null!==(w=a.Le.getConfig(a.gI.SrDegrade))&&void 0!==w?w:0},(null==i?void 0:null===(_=i.plugins)||void 0===_?void 0:null===(g=_.srplugin)||void 0===g?void 0:null===(m=g.getStat)||void 0===m?void 0:m.call(g))||{});if(i.video&&(null===(t=window.TTCommon)||void 0===t?void 0:t.executeWithElement)){let e=JSON.parse(window.TTCommon.executeWithElement(i.video,"getSrCurrentInfo",""))||{};return(0,l._)({is_super_resolution:((null==e?void 0:e.sr_enable)!==3||(null==e?void 0:e.sr_local_error)!==0)&&((null==e?void 0:e.sr_local_error)||!((null==e?void 0:e.proc_avg)>0))?0:1,is_sr_called:(null==i?void 0:i.sr)?1:0,is_need_sr:(null==i?void 0:i.claritySr)?1:0,is_sr_canceled:i.cancelSR?1:0},e)}}catch(e){}return{is_super_resolution:0}}},320544:function(e,i,t){t.d(i,{Z:function(){return n}});var l=t(460302);function n(e){var i;let{awemeInfo:t,player:n}=e,o=(0,l.U)({awemeInfo:t,player:n});return{isH265:o,codecFormat:2===o?"bytevc2":1===o?"bytevc":"h264",videoFormat:null!==(i=null==n?void 0:n.playerType)&&void 0!==i?i:"mp4"}}},597803:function(e,i,t){t.d(i,{Z:function(){return n}});var l=t(782442);function n(e){var i;let{awemeInfo:t}=e,{douyinPCHighlight:n,selectAnchorExpandedContent:o}=t||{},{firstText:r,version:a}=n||{};return!!(null===(i=l.Le.getConfig(l.gI.AbtestData))||void 0===i?void 0:i.aiEntry)&&!!((r&&a?1:0)||(o?1:0))}},736713:function(e,i,t){t.d(i,{Z:function(){return n}});var l=t(782442);function n(e){var i,t;let{awemeInfo:n}=e,o=(null==n?void 0:n.douyinPcVideoExtra)||{},r=!!(null==o?void 0:o.aiNote)&&!(null===(i=l.Le.getConfig(l.gI.AbtestData))||void 0===i?void 0:i.aiNoteV2),a=!!(null==o?void 0:o.aiNoteV2)&&(null===(t=l.Le.getConfig(l.gI.AbtestData))||void 0===t?void 0:t.aiNoteV2)>0;return r||a}},552562:function(e,i,t){t.d(i,{y:function(){return a}}),t(250440);var l=t(782442),n=t(637005),o=t(831202),r=t(474160);let a=(e,i,t)=>{try{var a,d,u,s;if(!t||!e)return;let{list:o="",store:v}=null!==(d=l.Le.getConfig(l.gI.WatchLater))&&void 0!==d?d:{};if(!(t.watchLaterInfo||o.includes(t.awemeId)))return;let c=Math.floor((null!==(u=null==e?void 0:e.currentTime)&&void 0!==u?u:0)*1e3),h=null!==(s=null==t?void 0:null===(a=t.playProgress)||void 0===a?void 0:a.watch_times)&&void 0!==s?s:0,f=i||(null==e?void 0:e.ended),p=h||f?Math.max(h,1):0;if((0,r.ih)({actionType:2,itemToPlayinfo:{[t.awemeId]:{play_duration:Math.floor((null==e?void 0:e.currentTime)*1e3),loop_status:p}}}),!v||"object"!=typeof v)return;v[t.awemeId]={progress:c,loop:p},n.emit(n.EVENT.WatchLaterProgressChange)}catch(e){o.oe.event.info({name:o.Mo.PlayTimeBack,report:{code:null==e?void 0:e.code,message:null==e?void 0:e.message}})}}},470293:function(e,i,t){t.d(i,{O:function(){return v}}),t(874386);var l=t(948375),n=t(734123),o=t(88648),r=t(877639),a=t.n(r),d=t(597321),u=t(860684),s=t(356650);let v=e=>{var i,t,r,v;let{awemeInfo:c,isActive:h}=e,[f,p]=(0,o.useState)((null==c?void 0:null===(t=c.chargeInfo)||void 0===t?void 0:null===(i=t.preview_config)||void 0===i?void 0:i.is_preview)?null==c?void 0:null===(v=c.chargeInfo)||void 0===v?void 0:null===(r=v.preview_config)||void 0===r?void 0:r.end_time:0),[m,g]=(0,o.useState)(!1),_=(0,u.n)(),y=(0,l.Z)(()=>{var e,i,t,l;let n=null==c?void 0:null===(i=c.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.end_time,o=(null==c?void 0:null===(l=c.chargeInfo)||void 0===l?void 0:null===(t=l.preview_config)||void 0===t?void 0:t.start_time)||0,r=Math.ceil((null==_?void 0:_.currentTime)*1e3);n>=r&&o<=r?(p(n-r),g(!1)):g(!0)}),w=(0,l.Z)(()=>{var e,i,t,l;let n=null==c?void 0:null===(i=c.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.end_time,o=(null==c?void 0:null===(l=c.chargeInfo)||void 0===l?void 0:null===(t=l.preview_config)||void 0===t?void 0:t.start_time)||0,r=Math.ceil((null==_?void 0:_.currentTime)*1e3);n>=r&&o<=r?(p(n-r),g(!1)):g(!0)}),I=(0,l.Z)(()=>{var e,i,t,l;g(!1),p((null==c?void 0:null===(i=c.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.is_preview)?null==c?void 0:null===(l=c.chargeInfo)||void 0===l?void 0:null===(t=l.preview_config)||void 0===t?void 0:t.end_time:0)}),C=a()(y,200),P=(0,l.Z)(()=>{var e,i,t,l,o;(null==c?void 0:null===(i=c.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.is_preview)&&h&&(null==_||null===(t=_.on)||void 0===t||t.call(_,d.B.TimeUpdate,C),null==_||null===(l=_.on)||void 0===l||l.call(_,n.Events.SEEKING,w),null==_||null===(o=_.on)||void 0===o||o.call(_,d.B.Replay,I))}),x=(0,l.Z)(()=>{var e,i,t;null==_||null===(e=_.off)||void 0===e||e.call(_,d.B.TimeUpdate,C),null==_||null===(i=_.off)||void 0===i||i.call(_,n.Events.SEEKING,w),null==_||null===(t=_.off)||void 0===t||t.call(_,d.B.Replay,I)});return(0,o.useEffect)(()=>(P(),()=>{x()}),[null==c?void 0:c.awemeId,h,_]),(0,o.useEffect)(()=>{let e=()=>{if((0,s.zJ)(c)){var e;null==_||null===(e=_.replay)||void 0===e||e.call(_)}};if(_)return _.on("ended",e),()=>{_.off("ended",e)}},[c,_]),{previewTime:f,isPreivewFinish:m}}},554288:function(e,i,t){t.d(i,{A:function(){return ed}});var l=t("520739");t("874386"),t("250440");var n=t("563097"),o=t("88648"),r=t("713097"),a=t.n(r),d=t("549519"),u=t("734123"),s=t("784492"),v=t("702726"),c=t("150566"),h=t("55426"),f=t("637005"),p=t("658065"),m=t("896682"),g=t("14108"),_=t("176638"),y=t("359118"),w=t("878389");let I=(0,o.forwardRef)((e,i)=>(0,n.jsx)("svg",(0,w._)((0,l._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,n.jsx)("path",{d:"M4.22 1.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 1 1-1.06-1.06L7.94 6 4.22 2.28a.75.75 0 0 1 0-1.06z",fill:"#FD9"})})));var C=t("470293"),P=t("747909"),x=t("489650");let b=(0,o.forwardRef)((e,i)=>(0,n.jsx)("svg",(0,w._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.284 11.223a.75.75 0 1 0-1.06 1.06l3.719 3.72-3.72 3.72a.75.75 0 0 0 1.061 1.06l3.72-3.72 3.718 3.72a.75.75 0 0 0 1.061-1.06l-3.719-3.72 3.72-3.72a.75.75 0 1 0-1.061-1.06l-3.72 3.72-3.719-3.72z",fill:"#fff",fillOpacity:".34"})})));var E=t("473677"),T=t("881155");let D=e=>{var i,t,r,a,d,u,s,h,f;let{awemeInfo:g,onBuy:_,onClose:y,logParams:I}=e,C=g.entertainmentProductInfo,D=(0,o.useMemo)(()=>{var e,i,t,l,n,o,r;return{enter_from:(0,c.Rs)("enter_from"),module:decodeURIComponent((0,c.Rs)("module")||""),enter_from_merge:(0,p.yW)(),previous_page:(0,c.Rs)("previous_page"),group_id:null==g?void 0:g.awemeId,author_id:null==g?void 0:null===(e=g.authorInfo)||void 0===e?void 0:e.uid,ce_content_id:(null==g?void 0:null===(i=g.seriesInfo)||void 0===i?void 0:i.seriesId)||(null==g?void 0:null===(t=g.mixInfo)||void 0===t?void 0:t.mixId)||"",ce_content_type:(0,m.a)(g),ce_item_id:String((null==g?void 0:null===(l=g.seriesInfo)||void 0===l?void 0:l.currentEpisode)||(null==g?void 0:null===(n=g.mixInfo)||void 0===n?void 0:n.currentEpisode)),is_trailer:(null==g?void 0:null===(r=g.chargeInfo)||void 0===r?void 0:null===(o=r.preview_config)||void 0===o?void 0:o.is_preview)?1:0,button_type:""}},[g]);(0,o.useEffect)(()=>{v.logInstance.sendLog("pcBuyCompleteContentShow",(0,w._)((0,l._)({},D),{from_group_id:null==I?void 0:I.from_group_id}))},[]);let S=(0,T.$m)(g);return(0,n.jsxs)("div",{className:x.default.container,onClick:_,children:[(0,n.jsx)(E.Z,{src:b,width:32,height:32,viewBox:"0 0 32 32",className:x.default.close,onClick:e=>{e.stopPropagation(),null==y||y()}}),(0,n.jsxs)("div",{className:x.default.mainLine,children:[(0,n.jsx)("img",{src:null==C?void 0:null===(t=C.cover_url)||void 0===t?void 0:null===(i=t.url_list)||void 0===i?void 0:i[0],className:x.default.cover}),"primary"===S&&(0,n.jsx)("div",{className:x.default.tag,children:"付费"}),"subscribe"===S&&(0,n.jsx)("div",{className:x.default.tag,children:"专属会员"}),(0,n.jsxs)("div",{className:x.default.infoBox,children:[(0,n.jsxs)("div",{className:x.default.title,children:[(0,n.jsx)("img",{src:null==C?void 0:null===(a=C.icon)||void 0===a?void 0:null===(r=a.url_list)||void 0===r?void 0:r[0],className:x.default.icon}),(0,n.jsx)("span",{className:x.default.titleText,children:C.title})]}),(0,n.jsx)("div",{className:x.default.subTitle,children:C.sub_title}),!!(null==C?void 0:null===(d=C.price_info)||void 0===d?void 0:d.current_price)&&(0,n.jsxs)("div",{className:x.default.price,children:[(0,n.jsx)("span",{className:x.default.priceNum,children:null==C?void 0:null===(u=C.price_info)||void 0===u?void 0:u.current_price}),null==C?void 0:null===(s=C.price_info)||void 0===s?void 0:s.currency_name,null==C?void 0:null===(h=C.price_info)||void 0===h?void 0:h.start_hint]})]})]}),(0,n.jsx)(P.Button,{className:x.default.buyButton,theme:"solid",children:(0,n.jsx)("span",{children:null==C?void 0:null===(f=C.button_info)||void 0===f?void 0:f.text_without_price})})]})};t("413806"),t("826893"),t("779788");var S=t("567754"),k=t("608166"),R=t("697239"),L=t("168998"),A=t("831202"),N=t("32167"),M=t("760537");let j=(0,o.forwardRef)((e,i)=>(0,n.jsx)("svg",(0,w._)((0,l._)({width:28,height:28,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,n.jsx)("path",{d:"M19.59 9.59a.833.833 0 1 0-1.18-1.18L14 12.822l-4.41-4.41a.833.833 0 0 0-1.18 1.178L12.822 14l-4.41 4.41a.833.833 0 1 0 1.178 1.18L14 15.177l4.41 4.411a.833.833 0 1 0 1.18-1.178L15.177 14l4.411-4.41z",fill:"#161823"})}))),B=(0,o.forwardRef)((e,i)=>(0,n.jsxs)("svg",(0,w._)((0,l._)({width:50,height:50,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,n.jsxs)("g",{filter:"url(#ic_tick-circle_svg__filter0_d_747_17320)",shapeRendering:"crispEdges",children:[(0,n.jsx)("path",{d:"M25.001 44.992c11 0 20-9 20-20s-9-20-20-20-20 9-20 20 9 20 20 20z",fill:"#fff"}),(0,n.jsx)("path",{d:"M25.001 45.492c11.276 0 20.5-9.224 20.5-20.5s-9.224-20.5-20.5-20.5-20.5 9.224-20.5 20.5 9.224 20.5 20.5 20.5z",stroke:"#000",strokeOpacity:".1",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,n.jsx)("path",{d:"M30.303 30.303a7.5 7.5 0 1 1 0-10.607c.691.691 2.197 2.387 2.197 2.387",stroke:"#333",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M32.5 18.333v3.75h-3.75",stroke:"#333",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("defs",{children:(0,n.jsxs)("filter",{id:"ic_tick-circle_svg__filter0_d_747_17320",x:".001",y:"-.008",width:50,height:50,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:2}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_747_17320"}),(0,n.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_747_17320",result:"shape"})]})})]})));var U=t("301061");let Y=e=>{let{awemeInfo:i,onClose:t,onPaySuccess:r,onPayTimeout:d,logParams:u}=e,[s,h]=(0,o.useState)(""),f=(0,o.useRef)(),g=(0,o.useRef)(0),_=(0,o.useRef)(!1),[y,I]=(0,o.useState)(void 0),[C,P]=(0,o.useState)(!1),x=(0,o.useCallback)(async()=>{var e,t,n,o,r,a,d;if(I(void 0),h(""),"subscribe"===(0,T.$m)(i)){k.toDataURL(`sslocal://aweme/detail/${i.awemeId}?refer=click_group_top_function&chat_type=group&enter_from=douyin_pc`).then(e=>{h(e),I(!1)}).catch(e=>{I(!0)});return}let[u,s="{}"]=null==i?void 0:null===(n=i.entertainmentProductInfo)||void 0===n?void 0:null===(t=n.buy_schema)||void 0===t?void 0:null===(e=t.split)||void 0===e?void 0:e.call(t,"?"),v=S.parse(s),c=null==i?void 0:null===(o=i.seriesInfo)||void 0===o?void 0:o.seriesId,f=null==i?void 0:null===(r=i.mixInfo)||void 0===r?void 0:r.mixId,m=await (0,L.kH)({shareScene:c||f?"aweme_pc_video_pay":"aweme_pc_video_pay_new",jsonParams:JSON.stringify((0,w._)((0,l._)({},v),{origin_appid:"6383",schema_type:"1",use_new_api:"1",mix_short_name:encodeURIComponent((null==s?void 0:s.mix_short_name)||"")}))});(null==m?void 0:m.statusCode)===0?(h(null==m?void 0:null===(a=m.data)||void 0===a?void 0:a.url),I(!1)):(A.oe.event.error({name:A.Mo.PaidVideoQRCodeError,report:{enterFrom:(0,N.mo)(),enterFromMerge:(0,p.yW)(),itemId:null==i?void 0:i.awemeId,buySchema:null==i?void 0:null===(d=i.entertainmentProductInfo)||void 0===d?void 0:d.buy_schema,logId:null==m?void 0:m.logId}}),I(!0))},[i]);(0,o.useEffect)(()=>{x()},[i]);let b=(0,o.useMemo)(()=>{var e,t,l,n,o,r,a;return{enter_from:(0,c.Rs)("enter_from"),module:decodeURIComponent((0,c.Rs)("module")||""),enter_from_merge:(0,p.yW)(),previous_page:(0,c.Rs)("previous_page"),group_id:null==i?void 0:i.awemeId,author_id:null==i?void 0:null===(e=i.authorInfo)||void 0===e?void 0:e.uid,ce_content_id:(null==i?void 0:null===(t=i.seriesInfo)||void 0===t?void 0:t.seriesId)||(null==i?void 0:null===(l=i.mixInfo)||void 0===l?void 0:l.mixId)||"",ce_content_type:(0,m.a)(i),ce_item_id:String((null==i?void 0:null===(n=i.seriesInfo)||void 0===n?void 0:n.currentEpisode)||(null==i?void 0:null===(o=i.mixInfo)||void 0===o?void 0:o.currentEpisode)),is_trailer:(null==i?void 0:null===(a=i.chargeInfo)||void 0===a?void 0:null===(r=a.preview_config)||void 0===r?void 0:r.is_preview)?1:0,from_group_id:null==u?void 0:u.from_group_id}},[u,i]);(0,o.useEffect)(()=>{v.logInstance.sendLog("pcPaymentPopupShow",(0,l._)({button_type:"scan"},b))},[]),(0,o.useEffect)(()=>{C&&v.logInstance.sendLog("pcPaymentPopupShow",(0,w._)((0,l._)({},b),{button_type:"refresh"}))},[C]);let D=(0,o.useCallback)(async()=>{var e,t;if(_.current)return;_.current=!0;let l=await (0,R.fetchUserRight)({itemList:[{itemId:null===(e=i.entertainmentProductInfo)||void 0===e?void 0:e.product_id_str,itemSku:null===(t=i.entertainmentProductInfo)||void 0===t?void 0:t.sku_id_str,itemIdType:1}],bizSceneType:2});0===l.statusCode&&l.userRightDetailList.find(e=>{var t,l;return e.itemId===(null===(t=i.entertainmentProductInfo)||void 0===t?void 0:t.product_id_str)&&e.itemSku===(null===(l=i.entertainmentProductInfo)||void 0===l?void 0:l.sku_id_str)})&&(null==r||r()),_.current=!1},[i,r,d]);return(0,o.useEffect)(()=>(!C&&(f.current=setInterval(()=>{g.current+=1,D(),g.current>=600&&(null==d||d(),P(!0),clearInterval(f.current),f.current=null)},1e3)),()=>{clearInterval(f.current),f.current=null}),[d,C]),(0,n.jsxs)("div",{className:M.default.container,children:[(0,n.jsxs)("div",{className:M.default.title,children:[(0,n.jsx)("span",{children:"抖音App扫码购买"}),(0,n.jsx)(E.Z,{src:j,width:28,height:28,viewBox:"0 0 28 28",onClick:e=>{e.stopPropagation(),g.current=0,null==t||t()}})]}),(0,n.jsxs)("div",{className:M.default.box,children:[void 0===y&&!s&&(0,n.jsx)(U.gb,{}),y&&(0,n.jsxs)("div",{className:a()(M.default.timeoutMask,M.default.smallBtnGrayContainer),onClick:async()=>{await x()},children:[(0,n.jsx)("div",{className:M.default.mask}),(0,n.jsxs)("div",{className:M.default.timeoutBox,children:[(0,n.jsx)(E.Z,{src:B,width:50,height:50,viewBox:"0 0 50 50"}),(0,n.jsx)("div",{className:M.default.mainTitle,children:"抖音码获取失败"}),(0,n.jsx)("div",{children:"点击刷新"})]})]}),s&&(0,n.jsx)("img",{src:s,style:"subscribe"===(0,T.$m)(i)?{borderRadius:16}:{},onError:()=>{I(!0)},onLoad:()=>{I(!1)}}),C&&(0,n.jsxs)("div",{className:a()(M.default.timeoutMask,M.default.smallBtnGrayContainer),onClick:async()=>{v.logInstance.sendLog("pcPaymentPopupClick",(0,w._)((0,l._)({},b),{button_type:"refresh"})),P(!1),g.current=0,await x()},children:[(0,n.jsx)("div",{className:M.default.mask}),(0,n.jsxs)("div",{className:M.default.timeoutBox,children:[(0,n.jsx)(E.Z,{src:B,width:50,height:50,viewBox:"0 0 50 50"}),(0,n.jsx)("div",{className:M.default.mainTitle,children:"二维码已过期"}),(0,n.jsx)("div",{children:"点击刷新"})]})]})]})]})};var V=t("984462");let F=(0,o.forwardRef)((e,i)=>(0,n.jsxs)("svg",(0,w._)((0,l._)({width:40,height:40,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 40c11.046 0 20-8.954 20-20S31.046 0 20 0 0 8.954 0 20s8.954 20 20 20z",fill:"#13C15A"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.344 14.509c.801.801.801 2.1 0 2.901l-8.65 8.651-1.097 1.096a2.735 2.735 0 0 1-3.868 0l-5.707-5.706a2.051 2.051 0 0 1 0-2.902l.13-.129a2.052 2.052 0 0 1 2.9 0l4.61 4.61 8.652-8.65a2.051 2.051 0 0 1 2.9 0l.13.129z",fill:"#fff"})]}))),O=e=>{let{awemeInfo:i,logParams:t}=e,[l,r]=(0,o.useState)(3),a=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e,l,n,o,r,a,d;v.logInstance.sendLog("pcPaymentStatus",{module:decodeURIComponent((0,c.Rs)("module")||""),enter_from_merge:(0,p.yW)(),previous_page:(0,c.Rs)("previous_page"),group_id:null==i?void 0:i.awemeId,author_id:null==i?void 0:null===(e=i.authorInfo)||void 0===e?void 0:e.uid,ce_content_id:(null==i?void 0:null===(l=i.seriesInfo)||void 0===l?void 0:l.seriesId)||(null==i?void 0:null===(n=i.mixInfo)||void 0===n?void 0:n.mixId)||"",ce_content_type:(0,m.a)(i),ce_item_id:String((null==i?void 0:null===(o=i.seriesInfo)||void 0===o?void 0:o.currentEpisode)||(null==i?void 0:null===(r=i.mixInfo)||void 0===r?void 0:r.currentEpisode)),is_trailer:(null==i?void 0:null===(d=i.chargeInfo)||void 0===d?void 0:null===(a=d.preview_config)||void 0===a?void 0:a.is_preview)?1:0,from_group_id:null==t?void 0:t.from_group_id})},[]),(0,o.useEffect)(()=>(clearInterval(a.current),r(3),a.current=setInterval(()=>{r(e=>(e<=1&&(clearInterval(a.current),window.location.reload()),e-.2))},200),()=>{clearInterval(a.current)}),[i]),(0,n.jsxs)("div",{className:V.default.container,children:[(0,n.jsx)("div",{className:V.default.title}),(0,n.jsx)(E.Z,{src:F,width:40,height:40,viewBox:"0 0 40 40"}),(0,n.jsx)("div",{className:V.default.buyResult,children:"购买成功"}),(0,n.jsxs)("div",{className:V.default.money,children:["剩余",Math.floor(l),"秒后，自动刷新页面"]}),(0,n.jsx)("div",{className:V.default.subTitle,children:(0,n.jsx)("span",{className:V.default.subTitme,children:"已购内容订单可在【抖音APP-我的-我的订单】中查看"})})]})};var $=t("948375"),z=t("598053"),K=t("480596"),W=t("597321"),G=t("860684");let X=e=>{let{awemeInfo:i,isActive:t}=e,l=(0,o.useRef)(3e3),n=(0,G.n)();(0,o.useEffect)(()=>{(async()=>{let e=await z.get({key:K.TccKey.SeriesConfig,defaultValue:K.TCC_DEFAULT_VALUE_MAP.get(K.TccKey.SeriesConfig)});l.currentTime=(null==e?void 0:e.paidRightTime)||3e3})()},[]);let r=(0,$.Z)(e=>{var t,n,o;let{currentTime:r}=e||{},a=Math.round(1e3*r),u=(null==i?void 0:null===(t=i.video)||void 0===t?void 0:t.duration)<36e4;(u||!u&&a>l.currentTime)&&((0,L.SK)({itemId:i.awemeId,skuId:null===(n=i.entertainmentProductInfo)||void 0===n?void 0:n.sku_id_str,spuId:null===(o=i.entertainmentProductInfo)||void 0===o?void 0:o.product_id_str,bizType:4}),d())}),a=(0,$.Z)(()=>{var e,t;let l=null==i?void 0:i.chargeInfo,o=null==i?void 0:null===(e=i.chargeInfo)||void 0===e?void 0:e.preview_config;(null==l?void 0:l.has_paid)&&(null==l?void 0:l.is_charge_content)&&!(null==o?void 0:o.is_preview)&&(null==n||null===(t=n.on)||void 0===t||t.call(n,W.B.TimeUpdate,r))}),d=(0,$.Z)(()=>{var e;null==n||null===(e=n.off)||void 0===e||e.call(n,W.B.TimeUpdate,r)});(0,o.useEffect)(()=>{if(t)return a(),()=>{d()}},[null==i?void 0:i.awemeId,t,n])};var J=t("642448"),Q=t("147613"),Z=t("44905"),H=t("746025"),q=t("35730"),ee=t("205457"),ei=t("170939");let et=e=>{let{iframeRef:i,onClose:t}=e,l=e=>{var t,l;if((null==e?void 0:e.source)!==(null==i?void 0:null===(t=i.current)||void 0===t?void 0:t.contentWindow)||(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.type)!=="call_JSB")return;let{methodName:o,params:r=[],callbackID:a}=e.data,[d,u]=r;n(d,u,e=>{var t,l;null==i||null===(l=i.current)||void 0===l||null===(t=l.contentWindow)||void 0===t||t.postMessage({type:"executeCallback",callbackID:a,params:e,methodName:o},"*")})};(0,o.useEffect)(()=>(window.addEventListener("message",l),()=>{window.removeEventListener("message",l)}),[i]);let n=async(e,i,l)=>{if("close"===e){null==t||t();return}if(window.innerJSB&&window.innerJSB[e]){let t=await window.innerJSB[e](void 0,i),r={code:t.code};if("fetch"===e){var n,o;r.raw=null==t?void 0:null===(o=t.data)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.raw}"publishEvent"===e&&((0,J.publishEvent)(i.eventName,i.params),(0,J.broadcastEvent)(i.eventName,i.params)),l(r)}}},el=e=>{let{awemeInfo:i,onClose:t,userInfo:l}=e,{info:r}=l||{},{uid:a,secUid:d}=r||{},u=(0,o.useRef)(null),s=(0,o.useRef)(null),[v,c]=(0,o.useState)(()=>{var e,t,l,n,o;let r=`author_id=${null==i?void 0:null===(e=i.authorInfo)||void 0===e?void 0:e.uid}&spu_id=${null==i?void 0:null===(t=i.mixInfo)||void 0===t?void 0:t.mixId}&user_id=${a}&request_page=vipvideo_try&short_currency_name=钻`,d=`https://lf-webcast-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/lynx/vip_user_core_rl3_douyin/web/pages/vip_paid_video_rl3/template.js?${encodeURIComponent(r)}`,u={aid:"6383",appName:"douyin_pc",appVersion:null!==(n=window.version)&&void 0!==n?n:"unknown",appLang:null!==(o=navigator.language)&&void 0!==o?o:"unknown",deviceId:null===(l=(0,Z.Es)())||void 0===l?void 0:l.user_unique_id,channel:"douyin_pc",appTheme:(0,H.Dr)(cookies.getItem({sKey:q.CookieKeys.Theme})),updateVersionCode:"0.0.1"};return`sslocal://lynxview?url=${encodeURIComponent(d)}&global_props=${JSON.stringify(u)}`}),[h,p]=(0,o.useState)("");return(0,Q.o)(()=>f.listen(f.EVENT.xOpen,e=>{var i,t;let{_ctx:l,_params:n}=e;if((null==l?void 0:l.containerID)&&(null==l?void 0:l.containerID)===(null===(i=u.current)||void 0===i?void 0:i.containerID)&&n.schema){let e={user_id:null!=a?a:"",sec_user_id:null!=d?d:"",user_unique_id:null===(t=(0,Z.Es)())||void 0===t?void 0:t.user_unique_id},i=S.stringify(e);p(`${n.schema}&__isDouyinPC=true&${i}`)}}),[]),(0,Q.o)(()=>f.listen(f.EVENT.xClose,e=>{var i;let{_ctx:l}=e;(null==l?void 0:l.containerID)===(null===(i=u.current)||void 0===i?void 0:i.containerID)&&(null==t||t())}),[t]),(0,Q.o)(()=>{let e;let i=f.listen(f.EVENT.JoinVip,i=>{var t;let{_ctx:l}=i;(null==l?void 0:l.containerID)===(null===(t=u.current)||void 0===t?void 0:t.containerID)&&(e=setTimeout(()=>{window.location.reload()},1e3))});return()=>{null==i||i(),e&&clearTimeout(e)}},[]),et({iframeRef:s,onClose:()=>{p("")}}),(0,n.jsx)(ee.k,{componentName:"PayWebView",children:(0,n.jsxs)("div",{className:ei.default.container,children:[(0,n.jsx)(J.kh,{ref:u,nameSpace:J.lS.host,url:v,style:{width:"100%",height:"100%",border:"none"}}),h&&(0,n.jsx)("iframe",{className:ei.default.h5Iframe,src:h,ref:s,allow:"*"},h)]},v)})};var en=t("358003"),eo=t("906499"),er=t("356650");t("93075"),t("268917");let ea=e=>{let{awemeInfo:i}=e;(0,o.useEffect)(()=>{var e,t,l,n,o,r,a,d,u,s,v,c,h,f,m,g,_,y,w,I,C,P,x,b,E,D,S,k,R;if(!i)return;let L=(null==i?void 0:null===(l=i.video)||void 0===l?void 0:null===(t=l.bitRateList)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.format)==="mp4"&&!(null==i?void 0:null===(r=i.video)||void 0===r?void 0:null===(o=r.bitRateList)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.playerAccessKey);(null==i?void 0:null===(a=i.chargeInfo)||void 0===a?void 0:a.is_charge_content)&&(null==i?void 0:null===(d=i.chargeInfo)||void 0===d?void 0:d.has_paid)&&!L&&A.oe.event.error({name:A.Mo.PaidVideoNoPlayerAccessKey,report:{enterFromMerge:(0,p.yW)(),enterFrom:(0,N.mo)(),itemId:null==i?void 0:i.awemeId,logId:null==i?void 0:i.logPb,contentId:(null==i?void 0:null===(y=i.seriesInfo)||void 0===y?void 0:y.seriesId)||(null==i?void 0:null===(w=i.mixInfo)||void 0===w?void 0:w.mixId)||""}}),(null==i?void 0:null===(u=i.chargeInfo)||void 0===u?void 0:u.is_charge_content)&&(null==i?void 0:null===(s=i.chargeInfo)||void 0===s?void 0:s.has_paid)&&(null==i?void 0:null===(c=i.chargeInfo)||void 0===c?void 0:null===(v=c.preview_config)||void 0===v?void 0:v.is_preview)&&"limited"!==(0,T.$m)(i)&&A.oe.event.error({name:A.Mo.PaidVideoPreview,report:{enterFromMerge:(0,p.yW)(),enterFrom:(0,N.mo)(),itemId:null==i?void 0:i.awemeId,logId:null==i?void 0:i.logPb,contentId:(null==i?void 0:null===(I=i.seriesInfo)||void 0===I?void 0:I.seriesId)||(null==i?void 0:null===(C=i.mixInfo)||void 0===C?void 0:C.mixId)||""}}),(null==i?void 0:null===(h=i.chargeInfo)||void 0===h?void 0:h.is_charge_content)&&!(null==i?void 0:null===(f=i.chargeInfo)||void 0===f?void 0:f.has_paid)&&!(null==i?void 0:null===(g=i.chargeInfo)||void 0===g?void 0:null===(m=g.preview_config)||void 0===m?void 0:m.is_preview)&&"limited"!==(0,T.$m)(i)&&!(0,er.GP)(i)&&A.oe.event.error({name:A.Mo.PaidVideoNoPayCanView,report:{enterFromMerge:(0,p.yW)(),enterFrom:(0,N.mo)(),itemId:null==i?void 0:i.awemeId,logId:null==i?void 0:i.logPb,contentId:(null==i?void 0:null===(P=i.seriesInfo)||void 0===P?void 0:P.seriesId)||(null==i?void 0:null===(x=i.mixInfo)||void 0===x?void 0:x.mixId)||""}});let M=i.entertainmentProductInfo;if(M&&(null==i?void 0:null===(_=i.chargeInfo)||void 0===_?void 0:_.is_charge_content)){let e=[],t=[];!(null==M?void 0:null===(E=M.cover_url)||void 0===E?void 0:null===(b=E.url_list)||void 0===b?void 0:b[0])&&t.push("cover"),!(null==M?void 0:M.title)&&t.push("title"),!(null==M?void 0:M.sub_title)&&t.push("sub_title"),!(null==M?void 0:null===(D=M.button_info)||void 0===D?void 0:D.text_without_price)&&t.push("text_without_price"),!(null==M?void 0:M.buy_schema)&&t.push("buy_schema"),!(null==i?void 0:null===(S=i.chargeInfo)||void 0===S?void 0:S.preview_config)&&e.push("preview_config"),e.length>0&&A.oe.event.error({name:A.Mo.PaidVideoNoCardInfo,report:{enterFromMerge:(0,p.yW)(),enterFrom:(0,N.mo)(),itemId:null==i?void 0:i.awemeId,lessInfo:e,type:"tag",logId:null==i?void 0:i.logPb,contentId:(null==i?void 0:null===(k=i.seriesInfo)||void 0===k?void 0:k.seriesId)||(null==i?void 0:null===(R=i.mixInfo)||void 0===R?void 0:R.mixId)||""}}),t.length>0&&A.oe.event.error({name:A.Mo.PaidVideoNoCardInfo,report:{enterFromMerge:(0,p.yW)(),enterFrom:(0,N.mo)(),itemId:null==i?void 0:i.awemeId,lessInfo:t,type:"card",logId:null==i?void 0:i.logPb}})}},[i])},ed=e=>{var i,t,r,w,P;let{className:x,awemeInfo:b,isActive:S,isDetail:k=!1,needSpace:R=!1,abTestData:L,userInfo:A,isShowBuy:N=!0,isMini:M=!1,isShowLimited:j=!1,logParams:B}=e,U=(0,er.GP)(b),V=(null==A?void 0:null===(i=A.info)||void 0===i?void 0:i.uid)===(null==b?void 0:null===(t=b.authorInfo)||void 0===t?void 0:t.uid),F=(0,T.$m)(b),$="subscribe"===F,z="1"===(0,c.Rs)("open_member_card"),[K,W]=(0,o.useState)(!1),[J,Q]=(0,o.useState)(!1),[Z,H]=(0,o.useState)(!(k&&(U||z&&$))),{previewTime:q,isPreivewFinish:ee}=(0,C.O)({awemeInfo:b,isActive:S});X({awemeInfo:b,isActive:S});let ei=(0,G.n)(),et=(0,h.$y)(q);ea({awemeInfo:b}),(0,o.useEffect)(()=>{ee?(["primary","subscribe"].includes(F)&&f.emit(f.EVENT.ShowPreviewPaidMask,{isShow:!0,awemeId:null==b?void 0:b.awemeId,playerId:null==ei?void 0:ei.playerId}),k&&"limited"!==F&&H(!1)):!U&&f.emit(f.EVENT.ShowPreviewPaidMask,{isShow:!1,awemeId:null==b?void 0:b.awemeId,playerId:null==ei?void 0:ei.playerId})},[ee,k]);let ed=(0,o.useMemo)(()=>{var e,i,t,l,n,o,r;return{enter_from:(0,c.Rs)("enter_from"),module:decodeURIComponent((0,c.Rs)("module")||""),enter_from_merge:(0,p.yW)(),previous_page:(0,c.Rs)("previous_page"),group_id:null==b?void 0:b.awemeId,from_group_id:null==B?void 0:B.from_group_id,author_id:null==b?void 0:null===(e=b.authorInfo)||void 0===e?void 0:e.uid,ce_content_id:(null==b?void 0:null===(i=b.seriesInfo)||void 0===i?void 0:i.seriesId)||(null==b?void 0:null===(t=b.mixInfo)||void 0===t?void 0:t.mixId)||"",ce_content_type:(0,m.a)(b),ce_item_id:String((null==b?void 0:null===(l=b.seriesInfo)||void 0===l?void 0:l.currentEpisode)||(null==b?void 0:null===(n=b.mixInfo)||void 0===n?void 0:n.currentEpisode)),is_trailer:(null==b?void 0:null===(r=b.chargeInfo)||void 0===r?void 0:null===(o=r.preview_config)||void 0===o?void 0:o.is_preview)?1:0,button_type:""}},[b,B]),eu=(0,o.useCallback)(()=>{if(v.logInstance.sendLog("pcBuyCompleteContentClick",(0,l._)({},ed)),k){if(null==A?void 0:A.isLogin)W(!0);else{var e,i;(0,en.default)({success:async()=>{var e,i;null===(i=window)||void 0===i||null===(e=i.location)||void 0===e||e.reload()},enterMethod:"paid_video",headerText:"登录后即可购买",next:`https://${null===(i=window)||void 0===i?void 0:null===(e=i.location)||void 0===e?void 0:e.host}`})}}},[k,A,ed]),es=(0,o.useCallback)(()=>{k&&W(!1)},[k]),ev=(0,o.useCallback)(()=>{Q(!0),W(!1)},[]),ec=(0,o.useCallback)(()=>{H(!0)},[]),eh=(0,o.useCallback)(()=>{H(!0)},[]);(0,o.useEffect)(()=>{var e,i,t,l,n,o,r,a;let d=null==b?void 0:null===(i=b.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.is_preview,s=null==b?void 0:null===(l=b.chargeInfo)||void 0===l?void 0:null===(t=l.preview_config)||void 0===t?void 0:t.end_time,v=null==b?void 0:null===(o=b.chargeInfo)||void 0===o?void 0:null===(n=o.preview_config)||void 0===n?void 0:n.start_time;if(d&&!(null==b?void 0:null===(r=b.chargeInfo)||void 0===r?void 0:r.has_paid)&&"limited"!==F&&ei){let e=()=>{var e,i,t,l,n,o,r,a,d,u,c,h,f,p;v>0&&(null==ei||null===(t=ei.plugins)||void 0===t||null===(i=t.progresspreview)||void 0===i||null===(e=i.createDot)||void 0===e||e.call(i,{id:`${null==b?void 0:b.awemeId}${v}`,time:v/1e3,stylePreferred:!0,style:{height:"4px",width:"4px",backgroundColor:"#fd9",top:"-1px",minWidth:"4px"}}),(null==b?void 0:null===(n=b.chargeInfo)||void 0===n?void 0:null===(l=n.preview_config)||void 0===l?void 0:l.start_time)>0&&(null==ei||null===(a=ei.seek)||void 0===a||a.call(ei,(null==b?void 0:null===(r=b.chargeInfo)||void 0===r?void 0:null===(o=r.preview_config)||void 0===o?void 0:o.start_time)/1e3))),s>0&&(null==ei||null===(c=ei.plugins)||void 0===c||null===(u=c.progresspreview)||void 0===u||null===(d=u.createDot)||void 0===d||d.call(u,{id:`${null==b?void 0:b.awemeId}${s}`,time:s/1e3,stylePreferred:!0,style:{height:"4px",width:"4px",backgroundColor:"#fd9",top:"-1px",minWidth:"4px"}}),null==ei||null===(p=ei.plugins)||void 0===p||null===(f=p.progress)||void 0===f||null===(h=f.updateConfig)||void 0===h||h.call(f,{previewPaidTime:s,showPaidDot:!0}))};return null==ei||null===(a=ei.once)||void 0===a||a.call(ei,u.Events.DURATION_CHANGE,e),()=>{if(ei){var i,t,l,n,o,r,a;null==ei||null===(l=ei.plugins)||void 0===l||null===(t=l.progresspreview)||void 0===t||null===(i=t.deleteAllDots)||void 0===i||i.call(t),null==ei||null===(r=ei.plugins)||void 0===r||null===(o=r.progress)||void 0===o||null===(n=o.updateConfig)||void 0===n||n.call(o,{showPreview:!1}),null==ei||null===(a=ei.off)||void 0===a||a.call(ei,u.Events.DURATION_CHANGE,e)}}}},[b,ei]),(0,s.Z)(()=>{W(!1),Q(!1),H(!(k&&U)),!U&&f.emit(f.EVENT.ShowPreviewPaidMask,{isShow:!1,awemeId:null==b?void 0:b.awemeId,playerId:null==ei?void 0:ei.playerId})},[null==b?void 0:b.awemeId]);let ef=!(null==b?void 0:null===(r=b.chargeInfo)||void 0===r?void 0:r.is_charge_content)||M||V;return((0,o.useEffect)(()=>{Z&&!ef&&S&&v.logInstance.sendLog("pcPaidLogoShow",(0,l._)({},ed))},[Z,S]),(0,o.useEffect)(()=>{var e,i;ee&&(null==b?void 0:null===(i=b.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.is_preview)&&v.logInstance.sendLog("pcTrailEndShow",(0,l._)({},ed))},[ee]),ef)?null:(null==b?void 0:null===(w=b.chargeInfo)||void 0===w?void 0:w.has_paid)?(0,n.jsx)("div",{className:a()(y.default.outerContainer,x,{[y.default.noVideoInfoSpace]:R}),children:(0,n.jsx)("div",{className:a()(y.default.container),children:(0,n.jsx)("div",{className:y.default.innerContainer,children:(0,n.jsx)("span",{className:a()(y.default.payed),children:(null==b?void 0:null===(P=b.chargeInfo)||void 0===P?void 0:P.has_right_text)||"已付费"})})})}):(0,n.jsxs)("div",{className:a()(y.default.outerContainer,x,{[y.default.noVideoInfoSpace]:R}),children:[!J&&!K&&Z&&(0,n.jsx)("div",{className:a()(y.default.container),onClick:()=>{if(v.logInstance.sendLog("pcPaidLogoClick",(0,l._)({},ed)),!!N)if(k){if(null==A?void 0:A.isLogin)H(!1);else{var e,i;(0,en.default)({success:async()=>{var e,i;null===(i=window)||void 0===i||null===(e=i.location)||void 0===e||e.reload()},enterMethod:"paid_video",headerText:"登录后即可购买",next:`https://${null===(i=window)||void 0===i?void 0:null===(e=i.location)||void 0===e?void 0:e.host}`})}}else{f.emit(f.EVENT.videoPause,"PaidVideoPay");let e=k?"":`current_video_time=${Math.ceil(null==ei?void 0:ei.currentTime)}${$&&(null==L?void 0:L.useNewPayInfoCard)?"&open_member_card=1":""}`,i=(0,g.JF)(null==b?void 0:b.awemeId,e);window.open(i,(0,_.f)()?"_self":"_blank","noopener")}},children:(0,n.jsxs)("div",{className:y.default.innerContainer,children:["primary"===F&&(0,n.jsx)("span",{className:a()(y.default.pay,{[y.default.allBorder]:U&&!N}),children:"付费"}),"subscribe"===F&&(0,n.jsx)("span",{className:a()(y.default.pay,{[y.default.allBorder]:U&&!N}),children:"专属会员"}),"limited"===F&&j&&(0,n.jsx)("span",{className:a()(y.default.pay,y.default.limited,y.default.allBorder),children:"限免"}),!U&&["primary","subscribe"].includes(F)&&(0,n.jsx)("span",{className:y.default.countdown,children:ee?"试看结束":`试看${et}`}),N&&["primary","subscribe"].includes(F)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:y.default.divider}),(0,n.jsx)(eo.a,{href:(0,g.JF)(null==b?void 0:b.awemeId),target:"_blank",className:y.default.buy,onClick:e=>{e.preventDefault()},children:"购买"}),(0,n.jsx)(E.Z,{src:I,viewBox:"0 0 12 12",width:12,height:12,className:y.default.arrow})]})]})}),!J&&!K&&!Z&&($&&(null==L?void 0:L.useNewPayInfoCard)?(0,n.jsx)(d.NoSSR,{children:(0,n.jsx)(el,{awemeInfo:b,onClose:eh,logParams:B,userInfo:A})}):(0,n.jsx)(D,{awemeInfo:b,onBuy:eu,onClose:ec,logParams:B})),!J&&K&&(0,n.jsx)(Y,{awemeInfo:b,onClose:es,onPaySuccess:ev,logParams:B}),J&&(0,n.jsx)(O,{awemeInfo:b,logParams:B})]})}},158073:function(e,i,t){t.d(i,{v:function(){return h}}),t(874386),t(455663);var l=t(563097),n=t(88648),o=t(713097),r=t.n(o),a=t(734123),d=t(827480),u=t(637005),s=t(330746),v=t(549154),c=t(860684);let h=e=>{let{info:i,activeIndex:t,currentIndex:o,albumMusic:h,isInPreview:f,inSearch:p,isOneLive:m}=e,g=(0,n.useRef)(),_=(0,c.n)(),[y,w]=(0,n.useState)(!1),I=(0,n.useRef)(!1),C=(0,n.useMemo)(()=>{let e=i.video.bitRateList.find(e=>0===e.isH265);return e&&e.playAddr?e.playAddr.map(e=>({src:(0,d.preProcessUrl)(e.src).url})).concat({src:e.playApi}):[]},[i.video]);return((0,n.useEffect)(()=>{if(_){if(t===o){if(!_.paused){var e;null===(e=g.current)||void 0===e||e.play()}}else g.current&&(g.current.paused||g.current.pause(),g.current.currentTime=0)}},[_,t,o]),(0,n.useEffect)(()=>{if(_&&t===o){let e=()=>{var e;if(!(_.currentTime<=.5)||!I.current)h.beginTime,null===(e=g.current)||void 0===e||e.play()};return _.on("play",e),()=>{_.off("play",e)}}},[_,t,o]),(0,n.useEffect)(()=>{if(_){let e=()=>{var e;if(!(_.currentTime<=.5)&&!(_.duration-_.currentTime<=.5)&&(!(h.beginTime>1e3)||!(_.currentTime-h.beginTime/1e3<=.5)&&!(h.endTime/1e3-_.currentTime<=.5)))null===(e=g.current)||void 0===e||e.pause()};return _.on("pause",e),()=>{_.off("pause",e)}}},[_]),(0,n.useEffect)(()=>{if(_){let e=()=>{I.current=!0};return _.on("ended",e),()=>{_.off("ended",e)}}},[_]),(0,n.useEffect)(()=>{if(_&&t===o){let e=u.listen(u.EVENT.notevideo,e=>{let{type:i,index:l,playerId:n}=e;g.current&&"replay"===i&&n===_.playerId&&l===t&&g.current.play()});return()=>e()}},[_,t,o]),(0,n.useEffect)(()=>{if(_){let e=u.listen(u.EVENT.notevideo,e=>{"onelive_start"===e.type&&w(!0),"onelive_end"===e.type&&w(!1)});return()=>e()}},[_]),(0,n.useEffect)(()=>{t!==o&&w(!1)},[t,o]),(0,n.useEffect)(()=>{if(_&&t===o&&g.current){.01===_.volume?g.current.volume=parseFloat(_.config.volume_raw)||0:g.current.volume=_.volume,g.current.muted=_.muted;let e=e=>{if(!0!==e.isInternalOp).01===_.volume?g.current.volume=parseFloat(_.config.volume_raw)||0:g.current.volume=_.volume,g.current.muted=_.muted};return null==_||_.on(a.Events.VOLUME_CHANGE,e),()=>{null==_||_.off(a.Events.VOLUME_CHANGE,e)}}},[_,t,o]),o-t>1||o-t<-1)?null:(0,l.jsx)("div",{className:r()(v.default.container,{[v.default.withoutProgress]:m,[v.default.inSearch]:p,[v.default.isInPreview]:f,[v.default.livePhoto]:5===i.clipType,[v.default.isInLive]:y}),children:(0,l.jsx)("video",{className:v.default.video,muted:!0,playsInline:!0,"x5-playsinline":!0,"webkit-playsinline":!0,autoPlay:!1,onPlay:()=>{u.emit(u.EVENT.notevideo,{type:"start",playerId:null==_?void 0:_.playerId,index:o}),!m&&setTimeout(()=>{w(!0)})},onEnded:()=>{u.emit(u.EVENT.notevideo,{type:"end",playerId:null==_?void 0:_.playerId,index:o}),!m&&setTimeout(()=>{w(!1)})},onTimeUpdate:()=>{var e,i;u.emit(u.EVENT.notevideo,{type:"timeupdate",playerId:null==_?void 0:_.playerId,data:(null===(e=g.current)||void 0===e?void 0:e.currentTime)*1e3,index:o}),(0,s.G6)()&&(null==_?void 0:_.paused)&&(null===(i=g.current)||void 0===i||i.pause())},ref:g,children:C.map((e,i)=>(0,l.jsx)("source",{src:e.src},i))})})}},548988:function(e,i,t){t.d(i,{X:function(){return g}});var l=t(520739),n=t(88648),o=t(645260),r=t.n(o),a=t(613063),d=t.n(a),u=t(506467),s=t(860684),v=t(680475),c=t(288386);let{ArrowLeft:h,ArrowRight:f,A:p,D:m}=u.bf,g=e=>{let i=(0,s.n)(),{preClick:t,nextClick:o,disableShortCut:a=!1,active:u=!0}=e;return(0,n.useEffect)(()=>{if(!!u){if(i){if(a)return(0,v.K)(i);let e={left:{keyCode:h.keyCode,action:t,disable:!1,noBodyTarget:!1},right:{keyCode:f.keyCode,action:o,disable:!1,noBodyTarget:!1},leftA:{keyCode:p.keyCode,action:t,disable:!1,noBodyTarget:!1},rightD:{keyCode:m.keyCode,action:o,disable:!1,noBodyTarget:!1}},n={left:r()(i,"plugins.keyboard.keyCodeMap.left"),right:r()(i,"plugins.keyboard.keyCodeMap.right"),leftA:r()(i,"plugins.keyboard.keyCodeMap.leftA"),rightD:r()(i,"plugins.keyboard.keyCodeMap.rightD")};return d()(i,"plugins.keyboard.keyCodeMap",(0,l._)({},r()(i,"plugins.keyboard.keyCodeMap")||{},e)),()=>{i.plugins.keyboard&&((0,c.v)({currentCodeMap:i.plugins.keyboard.keyCodeMap,additionalCodeMap:e}),d()(i,"plugins.keyboard.keyCodeMap",(0,l._)({},r()(i,"plugins.keyboard.keyCodeMap")||{},n)))}}}},[i,t,o,a,u]),null}},709409:function(e,i,t){t.d(i,{t:function(){return s},v:function(){return u}}),t(874386);var l=t(88648),n=t(746864),o=t(782442);let r=(e,i)=>(null==i?void 0:i.awemeType)!==n.e.Note&&(null==e?void 0:e.duration)>60&&(null==e?void 0:e.currentTime)>30&&(null==e?void 0:e.duration)-(null==e?void 0:e.currentTime)>=10,a=e=>{let{awemeId:i,time:t,maxLength:l,scene:n}=e,r={awemeId:i,time:t,recordTime:Date.now(),scene:n},a=(o.Le.getConfig(o.gI.PlayRecord)||[]).filter(e=>e.scene===n&&e.awemeId!==i);if(a.length>=l){let e=[...a.slice(1),r];o.Le.setConfig(o.gI.PlayRecord,e)}else{let e=[...a,r];o.Le.setConfig(o.gI.PlayRecord,e)}},d=e=>{let i=(o.Le.getConfig(o.gI.PlayRecord)||[]).filter(i=>i.awemeId!==e);o.Le.setConfig(o.gI.PlayRecord,i)},u=e=>{if("undefined"==typeof location)return 0;let i=(o.Le.getConfig(o.gI.PlayRecord)||[]).filter(i=>i.awemeId===e&&i.scene===location.pathname&&i.recordTime+864e5>Date.now());return i.length>0?i[0].time:0},s=e=>{let{awemeInfo:i,player:t,isActive:n,from:s}=e,v=(0,l.useRef)(n),c=(0,l.useRef)(i.awemeId),h=(0,l.useRef)(i),f=(0,l.useRef)(t),p=(0,l.useRef)(n),m=(0,l.useRef)("");return h.current=i,f.current=t,p.current=n,(0,l.useEffect)(()=>{m.current=location.pathname},[]),(0,l.useEffect)(()=>{o.Le.getConfig(o.gI.PlayRecord)||o.Le.setConfig(o.gI.PlayRecord,[])},[]),(0,l.useEffect)(()=>{var e,l,r,a;let d=u(i.awemeId);(null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.startTime)&&(null==t?void 0:null===(l=t.plugins)||void 0===l?void 0:l.xgVodLogger)&&(t.plugins.xgVodLogger.start_time=d),t&&n&&d&&!t.config.startTime&&(!(null===(r=o.Le.getConfig(o.gI.AbtestData))||void 0===r?void 0:r.seekOpt)&&t.seek(d),t.config.startTime=d,(null===(a=t.plugins)||void 0===a?void 0:a.xgVodLogger)&&(t.plugins.xgVodLogger.start_time=d))},[i,t,n]),(0,l.useEffect)(()=>{let e=n!==v.current&&!n,l=n===v.current&&n&&i.awemeId!==c.current;(e||l)&&(r(t,i)?(a({awemeId:c.current,time:null==t?void 0:t.currentTime,maxLength:15,scene:m.current}),t.isPlaying=!1):u(null==i?void 0:i.awemeId)&&(null==t?void 0:t.currentTime)!==0&&d(c.current)),c.current=i.awemeId,v.current=n},[n,i,t]),(0,l.useEffect)(()=>{let e=()=>{let e=h.current,l=f.current,n=p.current||"searchPlayer"===s&&v.current;if(!!e&&!!l&&!!n)r(l,e)?(a({awemeId:e.awemeId,time:null==l?void 0:l.currentTime,maxLength:15,scene:m.current}),l.isPlaying=!1):u(null==i?void 0:i.awemeId)&&(null==t?void 0:t.currentTime)!==0&&d(c.current)};return null==t||t.on("destroy",e),()=>{null==t||t.off("destroy",e)}},[t,s]),null}},680475:function(e,i,t){t.d(i,{K:function(){return l}});function l(e){var i,t;if(null==e?void 0:null===(t=e.plugins)||void 0===t?void 0:null===(i=t.keyboard)||void 0===i?void 0:i.keyCodeMap){let i=e.plugins.keyboard.keyCodeMap||{},t={};return Object.keys(i).forEach(e=>{i[e]&&(t[e]=i[e].disable,i[e].disable=!0)}),()=>{var i,l;let n=(null==e?void 0:null===(l=e.plugins)||void 0===l?void 0:null===(i=l.keyboard)||void 0===i?void 0:i.keyCodeMap)||{};n&&Object.keys(n).forEach(e=>{n[e]&&(n[e].disable=t[e])})}}}},23847:function(e,i,t){t.d(i,{I:function(){return a}});var l=t("907831"),n=t.n(l);let o={disable:!1,used:!1,player:null,firstFrame:{used:!1,data:null,perfTime:0},autoplayStarted:{used:!1,data:null,perfTime:0},loadstart:{used:!1,data:null,perfTime:0},loadeddata:{used:!1,data:null,perfTime:0},playtime:{used:!1,data:null,perfTime:0},playfinish:{used:!1,data:null},prfFirstFeedShow:{used:!1,data:null},prfFirstFrameStart:{used:!1,data:null}},r=n()(o),a=()=>(!window.__INLINE_PLAYER_DATA__&&(window.__INLINE_PLAYER_DATA__=o),window.__INLINE_PLAYER_DATA__.disable)?r:window.__INLINE_PLAYER_DATA__},64902:function(e,i,t){t.d(i,{c:function(){return g},d:function(){return _}}),t(250440),t(179133),t(826893);var l=t(613063),n=t.n(l),o=t(567754),r=t(498871),a=t(957201),d=t(35730),u=t(79307),s=t(820303),v=t(782442),c=t(744121),h=t(631493),f=t(385976);let p=e=>{let{player:i,state:t}=e;n()(i,"config.autoplay",t),n()(i,"autoplay",t),n()(i,"preloadActive",t),(0,c.wS)(i.playerId,t)},m=e=>{var i,t,l,n,o,d;let{player:u,gearType:s,config:v,awemeInfo:c}=e;u.config.userSelectDefinition=s,u.config.definition=null==v?void 0:v.definition,u.config.DASHPlugin=null==v?void 0:v.DASHPlugin;try{(null==v?void 0:null===(l=v.plugins)||void 0===l?void 0:l.includes(r.default))?(u.unRegisterPlugin(a.default.pluginName,!0),!(null==u?void 0:null===(o=u.plugins)||void 0===o?void 0:o.dashplugin)&&u.registerPlugin(r.default)):(null==v?void 0:null===(n=v.plugins)||void 0===n?void 0:n.includes(a.default))?(u.unRegisterPlugin(r.default.pluginName,!0),!(null==u?void 0:null===(d=u.plugins)||void 0===d?void 0:d.mp4encryptplayer)&&u.registerPlugin(a.default)):(u.unRegisterPlugin(r.default.pluginName,!0),u.unRegisterPlugin(a.default.pluginName,!0))}catch(e){}null===(t=u.getPlugin)||void 0===t||null===(i=t.call(u,"PlayClaritySettingPlugin"))||void 0===i||i.updateConfig({awemeInfo:c})},g=e=>{let{player:i}=e;p({player:i,state:!1}),i.pause(),i.pauseType="notActive"},_=e=>{var i,t,l,n,r;let{player:a,config:c,awemeInfo:g,prePlay:_,index:y,reuseConfig:w}=e;p({player:a,state:!0});let I=null===(i=(0,s.G)(d.SessionStorageKeys.manualSwitch))||void 0===i?void 0:i.gearType,C=e=>{var i,t,l;let n=h.s.getPlayerScene(a.playerId)===u.lT.Modal||(null==a?void 0:null===(i=a.config)||void 0===i?void 0:i.isModal),r=h.s.getPlayersByScene(u.lT.Modal).length>0,d=!!(null===(t=(0,o.parse)(location.search))||void 0===t?void 0:t.webRid);if(0===y&&(!n&&r||d)){a.blockPlayType=`modal_isModalRes_${n}_hasModal_${r}_hasModalLive_${d}`;return}v.Le.setConfig(v.gI.StartPlayTime,Date.now()),null==a||null===(l=a[e])||void 0===l||l.call(a,null),"start"===e&&a.play(),a.blockPlayType=`noMethod_${e}`,_&&(a.preplay=1,a.preplayStat=1)};if(a.isPlaying||a.currentTime>0){a.config.userSelectDefinition!==I&&m({player:a,gearType:I,config:c,awemeInfo:g});let e=(null===(t=window.__QUICK_PLAYER)||void 0===t?void 0:t.playerId)&&window.__QUICK_PLAYER.playerId===(null==a?void 0:a.playerId),{scene:i,reuseId:o}=w||{};e||i&&o&&(null===f.YY||void 0===f.YY?void 0:null===(l=f.YY.checkIsReusePlayer)||void 0===l?void 0:l.call(f.YY,i,o,a))?a.play():null===(n=a.resetState)||void 0===n||n.call(a),a.isPlaying=!1,C("start")}else a.config.userSelectDefinition!==I?(m({player:a,gearType:I,config:c,awemeInfo:g}),null===(r=a.resetState)||void 0===r||r.call(a),a.isPlaying=!1,C("start")):(C("play"),a.emit("immediatePlay"))}},288386:function(e,i,t){t.d(i,{v:function(){return l}});let l=e=>{let{currentCodeMap:i,additionalCodeMap:t}=e;Object.keys(t).map(e=>{delete i[e]})}},482869:function(e,i,t){t.d(i,{Y:function(){return a}});var l=t(520739),n=t(88648),o=t(261234),r=t(762641);let a=e=>{let{awemeInfo:i,abtestData:t}=e;return(0,n.useCallback)(()=>{var e,n,a;let{control:d,nextBufferMin:u,nextStartPos:s,nextStartBuffer:v,scale:c,scaleAd:h}=null!==(a=null==t?void 0:t.nextBufferConfig)&&void 0!==a?a:{},f={control:d,nextBufferMin:u,nextStartPos:s,nextStartBuffer:v,scale:(null==i?void 0:i.isAds)&&h?h:c};null===(n=o.ZP.instManager)||void 0===n||null===(e=n.updateStrategyConfig)||void 0===e||e.call(n,r.l,(0,l._)({},f||{}))},[i,t])}},891655:function(e,i,t){t.d(i,{K:function(){return l}});let l=e=>{let i={};if(null==e?void 0:e.chargeInfo){var t,l,n,o,r;switch(i.is_charge=e.chargeInfo.is_charge_content?1:0,i.purchase_status=e.chargeInfo.has_paid?1:0,i.is_trailer=Number(((null===(t=e.chargeInfo.preview_config)||void 0===t?void 0:t.end_time)||0)>((null===(l=e.chargeInfo.preview_config)||void 0===l?void 0:l.start_time)||0)),i.spu_type="long_video",null===(r=e.lvideoBrief)||void 0===r?void 0:null===(o=r.albumInfo)||void 0===o?void 0:null===(n=o.typeList)||void 0===n?void 0:n[0]){case 1:i.lv_type="movie";break;case 2:i.lv_type="tv";break;case 3:i.lv_type="comic";break;case 4:i.lv_type="variety";break;case 5:i.lv_type="documentary";break;case 13:i.lv_type="children"}}return i}}}]);