"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["20486"],{161106:function(e,t){t.Z={privilegeSelectPopContainer:"E1YjKUD5",tabList:"yJGdEMqo",tabItem:"qqeAjM98",active:"bJ6xwKHg",lock:"rqkCmjVY",grey:"Co8KcbOn",dropdownWrap:"SCshWvv3",selectList:"o63UZH3H"}},103423:function(e,t){t.Z={liveShare:"ELbpDhJS",isInClient:"xK7xQKxV",container:"ZVzzBcU5",shareCode:"kSHH4CK4",failed:"lupPuoGm",defaultContainer:"d6bGezXa",crossContainer:"_hk5K8vP",columnContainer:"H2nt6J5u",disabledContent:"gaIZW0jh",shareToastWrap:"VDCN6go2",hidden:"z5yOmzoj"}},560923:function(e,t,i){let n;i.r(t),i.d(t,{default:function(){return lO}});var o,r,l={};i.r(l),i.d(l,{AdaptedBySEIPlugin:function(){return ot},AdminPrivilegePlugin:function(){return oS},AudioRoomPlugin:function(){return oy},CancelMutePlugin:function(){return n$},ChangeDynamicBg:function(){return o$},DanmaSetting:function(){return nN},DanmakuNewPlugin:function(){return nT},DetailContextMenuPlugin:function(){return o1},DoubleScreenPlugin:function(){return o5},EffectPlugin:function(){return nS},EffectSwitchPlugin:function(){return nI},FoldChatRoomCommentPlugin:function(){return nc},GiftEffectPlugin:function(){return ny},GiftMenuPlugin:function(){return rr},GiftTrayPlugin:function(){return nb},GlobalControlPlugin:function(){return nJ},GroupFightPlugin:function(){return oD},GroupLive:function(){return oW},GroupLivePlugin:function(){return o6},GuestBattlePlugin:function(){return oG},HintContainerPlugin:function(){return nF},InPicturePlugin:function(){return nl},LeadingLoginPlugin:function(){return oh},LinkMicApplyPlugin:function(){return oJ},LinkMicDynamicPlugin:function(){return oT},LinkMicLayoutPlugin:function(){return og},LinkMicPlayModeLimitPlugin:function(){return ob},LiveFromAppTips:function(){return o7},LiveLike:function(){return nk},LiveReserveCard:function(){return oY},NewPlayerErrorCover:function(){return on},OrderSingPlugin:function(){return oM},PKSEIPlugin:function(){return n9},PKViewPlugin:function(){return or},PaidLivePlugin:function(){return o_},PausePop:function(){return oX},PicturePlugin:function(){return nu},PlayerEndCover:function(){return n6},PlayerLoggerPlugin:function(){return n1},PlayerTeaLogPlugin:function(){return n5},QualitySwitchNewPlugin:function(){return nA},RTCLayerPlugin:function(){return oN},RefreshPlugin:function(){return nO.Z},RotatePlugin:function(){return n_},ServiceCenterPlugin:function(){return rt},ShortTouchPlugin:function(){return oa},TheaterPlugin:function(){return nn},ToolBarPlugin:function(){return nX},TopEffectPlugin:function(){return oA},TripleScreenPlugin:function(){return nh},UgcAvatar:function(){return oB},UpdateFunctionTypePlugin:function(){return ok},VideoRoomPlugin:function(){return oI},VipLiveBoundaryPlugin:function(){return oc},VipViewPlugin:function(){return ou},VolumeMemoryPlugin:function(){return ng},VolumeWheelPlugin:function(){return n7},VrPlugin:function(){return rn},WaterMark:function(){return o9}});var a={};i.r(a),i.d(a,{AudioCheatTips:function(){return rO},AutoRunModal:function(){return rx},ChatRoom:function(){return rd},LandPageContainer:function(){return rf},LiveShare:function(){return rI},LiveTDK:function(){return rR},LivingPlayer:function(){return ra},OperatingBar:function(){return ry},ProgrammeWrapper:function(){return rb},RightPanelContainer:function(){return rm},RoomInfoBar:function(){return rv},RoomLogic:function(){return ie}}),i("179133"),i("826893"),i("874386"),i("250440");var s=i("563097"),u=i("88648"),d=i("567754"),c=i("909543"),m=i("553542"),_=i("207964"),v=i("155953"),h=i("407217"),f=i("725650"),g=i("850159"),p=i("249239"),I=i("715464"),E=i("741835"),y=i("357923"),P=i("637901"),b=i("151961"),L=i("381219"),S=i("44905"),C=i("561550"),N=i("572076"),w=i("520739");i("413806");var T=i("435326"),R=i("529211"),k=i("32369"),x=i("916956"),A=i("527459"),O=i("107456"),M=i("213080"),F=i("979261"),D=i("422742"),j=i("180431"),G=i("903868"),U=i("31940");i("954372");var V=i("212415"),K=i("399796"),Y=i("35730"),Z=function(){(0,u.useEffect)(()=>{if(/iframe/.test(window.location.pathname)){let e=/^http(s)?:\/\/(.*?)\//.exec(document.referrer)||[];window.LiveSlardar&&window.LiveSlardar("sendEvent",{name:"iframe_top_domain_event",metrics:{count:1},categories:{topDomain:e[2]}})}K.Q.setItem(Y.CookieKeys.LiveUseVVC,(0,V.ue)()?"true":"false",1/0,"/")},[])},B=i("205457"),H=i("878389"),W=i("713097"),Q=i.n(W),$={app:"rIvabFtl",main:"wcXMy5k3",scroll:"N7XZk46N",detailScroll:"N4NS9EoK",loadingStyle:"w3UDn0RD",xiguaPadding:"QdMXnPs9",xiguaNormal:"ne8wyn1N",error:"TGBGB9ZS"};function q(e){let{children:t}=e;return(0,s.jsx)("div",{style:{background:"transparent"},className:Q()("app-container",$.app,{}),children:(0,s.jsx)("main",{className:Q()($.main,"live-main"),children:t})})}var J=i("58655"),z=i("421442"),X=i("61812"),ee=i("128231"),et=i.n(ee);let ei=(e,t)=>!!(t&&-1!==[z.LIVE_XIGUA_DOMAIN].indexOf(t)&&[T.m.HOME].some(t=>!!(0,A.m)(t,e)));var en=i("25928"),eo=i("637005"),er=i("725215");(0,er.Pi)(function(e){let{domain:t,pathname:i,children:n,isDetail:o}=e,r=(0,J.o)(),{forceTheme:l,hideErrorStyle:a,showFooter:u}=r.layoutStore;return(0,s.jsxs)("div",{className:Q()($.scroll,l,{[$.detailScroll]:o}),id:X.IS,ref:e=>t===z.LIVE_XIGUA_DOMAIN&&eo.emit(eo.EVENT.globalScrollEl,e),onScroll:et()(e=>{var t,i,n,o;(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.scrollTop)!==void 0&&eo.emit(eo.EVENT.tabContainerScroll,{tab:"live",scrollTop:null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.scrollTop}),(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.scrollTop)>200&&(null==r||null===(o=r.appStore)||void 0===o||o.setHomeNeedIntial(!0))},20),children:[(0,s.jsx)("div",{className:Q()({[$.xiguaNormal]:t===z.LIVE_XIGUA_DOMAIN&&!ei(i,t),[$.xiguaPadding]:ei(i,t),[$.error]:a,[$.loadingStyle]:o}),children:n}),u&&(0,s.jsx)(en.$,{})]})});let el=(0,er.Pi)(function(e){let{children:t}=e,{pathname:i}=(0,c.a)(),n=i.includes("/live/"),o=n?Q()($.scroll,{[$.detailScroll]:!0}):"";return(0,s.jsx)("div",{className:o,id:X.IS,style:n?{}:{display:"contents"},children:t})});var ea=i("134761"),es=i("519055"),eu=i("479638"),ed=i("104013");class ec extends eu.Z{constructor(){super(),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{userInfo:ed.observable,setUserInfo:ed.action,headerUserInfo:ed.observable,setHeaderUserInfo:ed.action,odin:ed.observable,setOdin:ed.action,userHandlerPause:ed.observable,setPlayerUserHandlePause:ed.action})}),(0,ea._)(this,"userInfo",{}),(0,ea._)(this,"headerUserInfo",{isLogin:void 0,isSpider:!1,info:{},webcastInfo:{},statusCode:0}),(0,ea._)(this,"odin",{}),(0,ea._)(this,"userHandlerPause",!1),(0,ea._)(this,"setPlayerUserHandlePause",e=>{this.userHandlerPause=e}),(0,ea._)(this,"setUserInfo",e=>this.userInfo=e),(0,ea._)(this,"setHeaderUserInfo",e=>this.headerUserInfo=e),(0,ea._)(this,"setOdin",e=>this.odin=e);this.makeObservable()}}i("927234"),i("268917");var em=i("859231"),e_=i("645260"),ev=i.n(e_),eh=i("613063"),ef=i.n(eh),eg=i("330746"),ep=i("156674"),eI=i("716551");class eE extends eu.Z{get isDanmakuFeatureOn(){return!this.isMedia&&this.LandscapeChat!==em.xW.OFF||this.isDanmakuFeatureOnControl}get isSpringSkin(){var e,t;return!!(null===(t=this.store)||void 0===t?void 0:null===(e=t.layoutStore)||void 0===e?void 0:e.resource)}get hideBanner(){return[eI.kx.KICK_OUT,eI.kx.LIVE_FINISH].includes(this.playerCoverText)}get isFixedChat(){var e,t,i;return(null===(i=this.roomInfo)||void 0===i?void 0:null===(t=i.room)||void 0===t?void 0:null===(e=t.room_auth)||void 0===e?void 0:e.FixedChat)===1}get roomStatus(){var e,t;return null===(t=this.roomInfo)||void 0===t?void 0:null===(e=t.room)||void 0===e?void 0:e.status}get roomId(){var e;return null===(e=this.roomInfo)||void 0===e?void 0:e.roomId}get live_room_mode(){var e,t;return null===(t=this.roomInfo)||void 0===t?void 0:null===(e=t.room)||void 0===e?void 0:e.live_room_mode}get isAppOnly(){var e,t,i;return this.roomInfo.enter_mode===em.gE.APP||(null===(t=this.store)||void 0===t?void 0:null===(e=t.linkmicStore)||void 0===e?void 0:e.isPlayModeNotSupport)||this.inRoomOnAppView&&(null===(i=this.roomInfo.room)||void 0===i?void 0:i.status)!==em.LV.END}get LandscapeChat(){var e,t;return null===(t=this.roomInfo.room)||void 0===t?void 0:null===(e=t.room_auth)||void 0===e?void 0:e.LandscapeChat}get coverUrl(){var e,t,i,n;return null===(n=this.roomInfo)||void 0===n?void 0:null===(i=n.room)||void 0===i?void 0:null===(t=i.cover)||void 0===t?void 0:null===(e=t.url_list)||void 0===e?void 0:e[0]}get isMedia(){var e,t;return(null===(t=this.roomInfo)||void 0===t?void 0:null===(e=t.room)||void 0===e?void 0:e.live_room_mode)===em.ke.MEDIA}get isDoubleScreen(){return this.isPullDataExsit&&!(0,eg.G6)()||this.isUgcLive}get isPullDataExsit(){var e,t,i,n,o,r,l;return!!(Object.values((null===(t=this.roomInfo)||void 0===t?void 0:null===(e=t.web_stream_url)||void 0===e?void 0:e.pull_datas)||{}).length>0)&&!!(Object.values((null===(o=this.roomInfo)||void 0===o?void 0:null===(n=o.room)||void 0===n?void 0:null===(i=n.stream_url)||void 0===i?void 0:i.pull_datas)||{}).length>0)&&Object.values(null===(l=this.roomInfo)||void 0===l?void 0:null===(r=l.web_stream_url)||void 0===r?void 0:r.pull_datas).every(e=>{var t,i;return(null==e?void 0:null===(t=e.extension)||void 0===t?void 0:t.camera_clip)&&(null==e?void 0:null===(i=e.extension)||void 0===i?void 0:i.game_clip)||(0,ep.V)(null==e?void 0:e.extension)})}get hasProgramme(){return this.enableProgramme&&this.abProgramme}get isAnchorBan(){return 2===ev()(this.roomInfo,"room.others.mosaic_version",0)&&0!==ev()(this.roomInfo,"room.mosaic_status",0)||this.imAnchorBan}get longtouchShow(){var e;let t=ev()(this.roomInfo,"room.live_room_mode"),i=Number(null===(e=this.roomInfo.room)||void 0===e?void 0:e.status_str)===em.LV.END;return t===em.ke.MEDIA?2!==ev()(this.roomInfo,"room.room_auth.LongTouch",0):this.longtouchShowTcc&&!i}constructor(e){var t,i,n;super(),t=this,(0,ea._)(this,"roomInfo",{}),(0,ea._)(this,"emojiList",[]),(0,ea._)(this,"emojiReflex",{}),(0,ea._)(this,"liveStatus",em.zZ.NORMAL),(0,ea._)(this,"likeStatus",{}),(0,ea._)(this,"followInfo",{}),(0,ea._)(this,"isUgcLive",!1),(0,ea._)(this,"isGameHiddle",!1),(0,ea._)(this,"forceEnableH265",!1),(0,ea._)(this,"hasAppointment",!1),(0,ea._)(this,"enableProgramme",!1),(0,ea._)(this,"abProgramme",!1),(0,ea._)(this,"notSupportReason",em.Ly.UNKNOWN),(0,ea._)(this,"pausePop",!1),(0,ea._)(this,"longtouchList",(null===(n=this.store)||void 0===n||null===(i=n.feedStore)||void 0===i||i.isActive,[])),(0,ea._)(this,"longtouchShowTcc",!1),(0,ea._)(this,"isAsianGames",!1),(0,ea._)(this,"usePageUrlBannerId",[]),(0,ea._)(this,"relevantRooms",[]),(0,ea._)(this,"danmakuQueue",[]),(0,ea._)(this,"danmakuQueueLength",0),(0,ea._)(this,"danmakuSwitch",!0),(0,ea._)(this,"isFocus",!1),(0,ea._)(this,"imAnchorBan",!1),(0,ea._)(this,"isOlympicGame",!1),(0,ea._)(this,"isEnableOlympic4k",!1),(0,ea._)(this,"foldChatroom",!1),(0,ea._)(this,"activityEmojiGroup",[]),(0,ea._)(this,"foreign_user",void 0),(0,ea._)(this,"store",void 0),(0,ea._)(this,"inRoomOnAppView",!1),(0,ea._)(this,"isVerified",!1),(0,ea._)(this,"isPlayer",!0),(0,ea._)(this,"playerCoverText",""),(0,ea._)(this,"refreshPlayer",!1),(0,ea._)(this,"recommendOnEndRoom",[]),(0,ea._)(this,"isPip",!1),(0,ea._)(this,"isDanmakuFeatureOnControl",!0),(0,ea._)(this,"isShowRefreshPage",!1),(0,ea._)(this,"disableLiveRecommendOnEnd",!1),(0,ea._)(this,"isDoubleLike",!1),(0,ea._)(this,"pollingFrequency",{}),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{roomInfo:ed.observable,emojiList:ed.observable,emojiReflex:ed.observable,liveStatus:ed.observable,likeStatus:ed.observable,followInfo:ed.observable,setRoomInfo:ed.action,setFollowStatus:ed.action,setEmojiList:ed.action,setEmojiReflex:ed.action,setRoomUserStats:ed.action,setRoomStatus:ed.action,setLiveStatus:ed.action,setFollowInfo:ed.action,isUgcLive:ed.observable,isGameHiddle:ed.observable,pausePop:ed.observable,setUgcLive:ed.action,setGameHiddle:ed.action,setPausePop:ed.action,hasAppointment:ed.observable,enableProgramme:ed.observable,abProgramme:ed.observable,hasProgramme:ed.computed,isAnchorBan:ed.computed,forceEnableH265:ed.observable,notSupportReason:ed.observable,longtouchShow:ed.computed,longtouchList:ed.observable,setLongtouchList:ed.action,setNotSupportReason:ed.action,longtouchShowTcc:ed.observable,setLongtouchShowTcc:ed.action,usePageUrlBannerId:ed.observable,setUsePageUrlBannerId:ed.action,isAsianGames:ed.observable,setIsAsianGames:ed.action,relevantRooms:ed.observable,danmakuQueue:ed.observable,setDanmakuQueue:ed.action,danmakuQueueLength:ed.observable,danmakuSwitch:ed.observable,setDanmakuSwitch:ed.action,foldChatroom:ed.observable,setFoldChatroom:ed.action,isFocus:ed.observable,setIsFocus:ed.action,imAnchorBan:ed.observable,setImAnchorBan:ed.action,isOlympicGame:ed.observable,setIsOlympicGame:ed.action,isEnableOlympic4k:ed.observable,setIsEnableOlympic4k:ed.action,activityEmojiGroup:ed.observable,setActivityEmojiGroup:ed.action,setActivityEmojiGroupForce:ed.action,setForeignUser:ed.action,foreign_user:ed.observable,isPullDataExsit:ed.computed,isDoubleScreen:ed.computed,isMedia:ed.computed,LandscapeChat:ed.computed,isAppOnly:ed.computed,inRoomOnAppView:ed.observable,setInRoomOnAppView:ed.action,live_room_mode:ed.computed,roomId:ed.computed,roomStatus:ed.computed,isVerified:ed.observable,setIsVerified:ed.action,isPlayer:ed.observable,setIsPlayer:ed.action,isFixedChat:ed.computed,playerCoverText:ed.observable,setPlayerCoverText:ed.action,refreshPlayer:ed.observable,setRefreshPlayer:ed.action,recommendOnEndRoom:ed.observable,setRecommendOnEndRoom:ed.action,hideBanner:ed.computed,isPip:ed.observable,setIsPip:ed.action,isDanmakuFeatureOn:ed.computed,setIsDanmakuFeatureOn:ed.action,isDanmakuFeatureOnControl:ed.observable,isShowRefreshPage:ed.observable,setIsShowRefreshPage:ed.action,disableLiveRecommendOnEnd:ed.observable,setDisableLiveRecommendOnEnd:ed.action,isDoubleLike:ed.observable,setIsDoubleLike:ed.action,pollingFrequency:ed.observable,setPollingFrequency:ed.action})}),(0,ea._)(this,"setIsDoubleLike",e=>{this.isDoubleLike=e}),(0,ea._)(this,"setDisableLiveRecommendOnEnd",e=>{this.disableLiveRecommendOnEnd=e}),(0,ea._)(this,"setIsShowRefreshPage",e=>{this.isShowRefreshPage=e}),(0,ea._)(this,"setIsPip",e=>{this.isPip=e}),(0,ea._)(this,"setIsDanmakuFeatureOn",e=>{this.isDanmakuFeatureOnControl=e}),(0,ea._)(this,"setRecommendOnEndRoom",e=>{this.recommendOnEndRoom=e}),(0,ea._)(this,"setRefreshPlayer",e=>{this.refreshPlayer=e}),(0,ea._)(this,"setPlayerCoverText",e=>{this.playerCoverText=e}),(0,ea._)(this,"setIsPlayer",e=>{this.isPlayer=e}),(0,ea._)(this,"setIsVerified",e=>{this.isVerified=e}),(0,ea._)(this,"setInRoomOnAppView",e=>{this.inRoomOnAppView=e}),(0,ea._)(this,"setUgcLive",e=>{this.isUgcLive=e}),(0,ea._)(this,"setGameHiddle",e=>{this.isGameHiddle=e}),(0,ea._)(this,"setNotSupportReason",e=>{this.notSupportReason=e}),(0,ea._)(this,"setPausePop",e=>{this.pausePop=e}),(0,ea._)(this,"setRoomInfo",e=>this.roomInfo=e),(0,ea._)(this,"setEmojiList",e=>this.emojiList=e),(0,ea._)(this,"setEmojiReflex",e=>this.emojiReflex=e),(0,ea._)(this,"setFollowStatus",e=>ef()(this.roomInfo,"anchor.follow_info.follow_status",e)),(0,ea._)(this,"setRoomUserStats",e=>ef()(this.roomInfo,"room.room_view_stats",e)),(0,ea._)(this,"setRoomStatus",e=>{ef()(this.roomInfo,"room.status",e),ef()(this.roomInfo,"room.status_str",e.toString())}),(0,ea._)(this,"setLiveStatus",e=>this.liveStatus=e),(0,ea._)(this,"setLikeStatus",e=>this.likeStatus=e),(0,ea._)(this,"setFollowInfo",(e,t)=>{this.followInfo[e]=t}),(0,ea._)(this,"setRoomCommentaryRoomInfo",e=>{ef()(this.roomInfo,"room.commentary_room_info",e)}),(0,ea._)(this,"setAppointment",function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.hasAppointment=e}),(0,ea._)(this,"setLongtouchList",e=>{var t,i;(null===(i=this.store)||void 0===i?void 0:null===(t=i.feedStore)||void 0===t?void 0:t.isActive)&&(this.longtouchList=e)}),(0,ea._)(this,"setLongtouchShowTcc",e=>{this.longtouchShowTcc=e}),(0,ea._)(this,"setUsePageUrlBannerId",e=>{this.usePageUrlBannerId=e}),(0,ea._)(this,"setRelativeRooms",e=>{this.relevantRooms=e}),(0,ea._)(this,"setIsAsianGames",e=>{this.isAsianGames=e}),(0,ea._)(this,"setDanmakuQueue",(e,t)=>{t?this.danmakuQueue.push(e):this.danmakuQueue=e,this.danmakuQueueLength=this.danmakuQueue.length}),(0,ea._)(this,"setDanmakuSwitch",e=>{this.danmakuSwitch=e}),(0,ea._)(this,"reset",()=>{var e,t;this.roomInfo={},this.emojiList=[],this.emojiReflex={},this.liveStatus=em.zZ.NORMAL,this.likeStatus={},this.followInfo={},this.isUgcLive=!1,this.isGameHiddle=!1,this.forceEnableH265=!1,this.hasAppointment=!1,this.enableProgramme=!1,this.abProgramme=!1,this.notSupportReason=em.Ly.UNKNOWN,this.pausePop=!1,this.longtouchList=(null===(t=this.store)||void 0===t||null===(e=t.feedStore)||void 0===e||e.isActive,[]),this.longtouchShowTcc=!1,this.isAsianGames=!1,this.usePageUrlBannerId=[],this.relevantRooms=[],this.danmakuQueue=[],this.danmakuQueueLength=0,this.danmakuSwitch=!0,this.imAnchorBan=!1}),(0,ea._)(this,"setFoldChatroom",e=>{this.foldChatroom=e}),(0,ea._)(this,"setIsFocus",e=>{this.isFocus=e}),(0,ea._)(this,"setImAnchorBan",e=>{this.imAnchorBan=e}),(0,ea._)(this,"setIsOlympicGame",e=>{this.isOlympicGame=e}),(0,ea._)(this,"setIsEnableOlympic4k",e=>{this.isEnableOlympic4k=e}),(0,ea._)(this,"setActivityEmojiGroup",e=>{let t=null,i=new Date().getTime()/1e3;if(e.forEach(e=>{Number(e.start_time)<i&&Number(e.end_time)>i&&(t?Number(null==e?void 0:e.start_time)>Number(null==t?void 0:t.start_time)&&(t=e):t=e)}),!t){this.activityEmojiGroup=[];return}this.activityEmojiGroup=[t]}),(0,ea._)(this,"setActivityEmojiGroupForce",e=>{this.activityEmojiGroup=e}),(0,ea._)(this,"setForeignUser",e=>this.foreign_user=e),(0,ea._)(this,"setPollingFrequency",e=>{this.pollingFrequency=e});this.makeObservable(),this.store=e}}var ey=i("589375");class eP extends eu.Z{constructor(){super(),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{selectedRoom:ed.observable,setSelectedRoom:ed.action,recommendCategoryData:ed.observable,setRecommendCategoryData:ed.action,isShowCategoryGameMenu:ed.observable,setIsShowCategoryGameMenu:ed.action,isSaveCategoryGameMenu:ed.observable,setIsSaveCategoryGameMenu:ed.action,isReadyHide:ed.observable,setIsReadyHide:ed.action})}),(0,ea._)(this,"selectedRoom",null),(0,ea._)(this,"recommendCategoryData",[]),(0,ea._)(this,"isShowCategoryGameMenu",!1),(0,ea._)(this,"isSaveCategoryGameMenu",!1),(0,ea._)(this,"isReadyHide",!1),(0,ea._)(this,"setSelectedRoom",e=>this.selectedRoom=e),(0,ea._)(this,"setRecommendCategoryData",e=>this.recommendCategoryData=e),(0,ea._)(this,"setIsShowCategoryGameMenu",e=>{this.isShowCategoryGameMenu=e}),(0,ea._)(this,"setIsSaveCategoryGameMenu",e=>{this.isSaveCategoryGameMenu=e}),(0,ea._)(this,"setIsReadyHide",e=>{this.isReadyHide=e});this.makeObservable()}}var eb=i("90463");i("429532"),i("779788");var eL=i("230501"),eS=i("972926"),eC=i("31243");let eN=[eL.kQ.GIFT,eL.kQ.FANS,eL.kQ.LEVEL,eL.kQ.ACTION_1,eL.kQ.ACTION_2,eL.kQ.ACTIVITY_1,eL.kQ.ACTIVITY_2,eL.kQ.PROP,eL.kQ.CURATED,eL.kQ.OLD_CARATED,,];class ew extends eu.Z{get supportedGiftPages(){return this.giftPages.filter(e=>e.display&&eN.includes(e.pageType)).map(e=>(0,H._)((0,w._)({},e),{giftList:(0,eS.fc)(e.giftList)}))}get giftList(){return(0,eS.pL)(this.giftPages,[],eL.dq.NORMAL,1,!1)}get giftStatus(){return this.giftSwitchStatus&&this.giftAuthStatus&&this.giftTccStatus}get openWanxiang(){return 1===this.wanxiangGiftSwitch}constructor(){super(),(0,ea._)(this,"giftMessages",[]),(0,ea._)(this,"giftPages",[]),(0,ea._)(this,"effectList",[]),(0,ea._)(this,"balance",0),(0,ea._)(this,"targetGiftPrice",0),(0,ea._)(this,"targetGiftId",0),(0,ea._)(this,"effectSwitchStatus",!0),(0,ea._)(this,"giftSwitchStatus",!0),(0,ea._)(this,"giftAuthStatus",!1),(0,ea._)(this,"giftTccStatus",!1),(0,ea._)(this,"isGiftPanelVisible",!1),(0,ea._)(this,"isGiftPanelVisibleNew",!1),(0,ea._)(this,"giftPanelSwitchStatus",eL.nN.NO_CONTROL),(0,ea._)(this,"giftPanelShowFrom",""),(0,ea._)(this,"giftExtraInfo",{}),(0,ea._)(this,"hoverGiftWhiteList",[]),(0,ea._)(this,"hoverGiftWhiteListV2",[]),(0,ea._)(this,"diyPluginIdWhiteList",[]),(0,ea._)(this,"giftBuffIdWhiteList",[]),(0,ea._)(this,"diyCardNameWhiteList",[]),(0,ea._)(this,"handleRecharge",void 0),(0,ea._)(this,"showBuffCard",!0),(0,ea._)(this,"wanxiangGiftSwitch",0),(0,ea._)(this,"forceShowBuffList",[]),(0,ea._)(this,"starGuardEffectWhiteList",[]),(0,ea._)(this,"currentPageType",eL.Tj.GIFT),(0,ea._)(this,"paygrade",void 0),(0,ea._)(this,"currentHoverGift",void 0),(0,ea._)(this,"maxGiftTrayCount",Number.MAX_SAFE_INTEGER),(0,ea._)(this,"giftBgEffectMap",{}),(0,ea._)(this,"giftTrayConfig",{}),(0,ea._)(this,"giftComboHint",null),(0,ea._)(this,"giftSkinCache",void 0),(0,ea._)(this,"giftShortcutKey",!1),(0,ea._)(this,"isFirstGiftShortcutKey",!1),(0,ea._)(this,"giftLayer",0),(0,ea._)(this,"hasGiftConfirm",!1),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{diyPluginIdWhiteList:ed.observable,diyCardNameWhiteList:ed.observable,hoverGiftWhiteList:ed.observable,hoverGiftWhiteListV2:ed.observable,giftBuffIdWhiteList:ed.observable,giftMessages:ed.observable,giftPages:ed.observable,effectList:ed.observable,balance:ed.observable,targetGiftPrice:ed.observable,targetGiftId:ed.observable,effectSwitchStatus:ed.observable,giftSwitchStatus:ed.observable,giftAuthStatus:ed.observable,giftTccStatus:ed.observable,isGiftPanelVisible:ed.observable,giftPanelSwitchStatus:ed.observable,giftPanelShowFrom:ed.observable,giftExtraInfo:ed.observable,giftBgEffectMap:ed.observable,handleRecharge:ed.observable,showBuffCard:ed.observable,wanxiangGiftSwitch:ed.observable,starGuardEffectWhiteList:ed.observable,maxGiftTrayCount:ed.observable,giftTrayConfig:ed.observable,supportedGiftPages:ed.computed,giftList:ed.computed,giftStatus:ed.computed,setGiftMessages:ed.action,setGiftPages:ed.action,setEffectList:ed.action,setBalance:ed.action,setGiftTrayConfig:ed.action,setTargetGiftPrice:ed.action,setTargetGiftId:ed.action,setEffectSwitchStatus:ed.action,setGiftSwitchStatus:ed.action,setGiftAuthStatus:ed.action,setGiftTccStatus:ed.action,setIsGiftPanelVisible:ed.action,setIsGiftPanelVisibleNew:ed.action,setGiftPanelSwitchStatus:ed.action,setGiftPanelShowFrom:ed.action,setGiftExtra:ed.action,setHoverGiftWhiteList:ed.action,setDiyPluginIdWhiteList:ed.action,setGiftBuffIdWhiteList:ed.action,setDiyCardNameWhiteList:ed.action,setHandleRecharge:ed.action,setShowBuffCard:ed.action,setHoverGiftWhiteListV2:ed.action,setGiftBgEffectMap:ed.action,setWanxiangGiftSwitch:ed.action,openWanxiang:ed.computed,setStarGuardEffectWhiteList:ed.action,currentPageType:ed.observable,setCurrentPageType:ed.action,paygrade:ed.observable,setPaygrade:ed.action,currentHoverGift:ed.observable,setCurrentHoverGift:ed.action,setMaxGiftTrayCount:ed.action,giftShortcutKey:ed.observable,setGiftShortcutKey:ed.action,isFirstGiftShortcutKey:ed.observable,setIsFirstGiftShortcutKey:ed.action,setGiftComboHint:ed.action,giftSkinCache:ed.observable,setGiftSkinCache:ed.action,giftLayer:ed.observable,setGiftLayer:ed.action,hasGiftConfirm:ed.observable,setHasGiftConfirm:ed.action})}),(0,ea._)(this,"setGiftExtra",(e,t)=>this.giftExtraInfo=Object.assign({},this.giftExtraInfo,{[e]:t})),(0,ea._)(this,"setGiftMessages",e=>this.giftMessages=e),(0,ea._)(this,"setGiftPages",e=>this.giftPages=e),(0,ea._)(this,"setEffectList",e=>this.effectList=e),(0,ea._)(this,"setBalance",e=>this.balance=e),(0,ea._)(this,"setTargetGiftPrice",e=>this.targetGiftPrice=e),(0,ea._)(this,"setTargetGiftId",e=>this.targetGiftId=e),(0,ea._)(this,"setEffectSwitchStatus",e=>this.effectSwitchStatus=e),(0,ea._)(this,"setGiftSwitchStatus",e=>this.giftSwitchStatus=e),(0,ea._)(this,"setGiftAuthStatus",e=>{this.giftAuthStatus=e}),(0,ea._)(this,"setGiftBgEffectMap",e=>{this.giftBgEffectMap=e}),(0,ea._)(this,"setGiftTccStatus",e=>this.giftTccStatus=e),(0,ea._)(this,"setGiftPanelSwitchStatus",e=>this.giftPanelSwitchStatus=e),(0,ea._)(this,"setGiftPanelShowFrom",e=>this.giftPanelShowFrom=e),(0,ea._)(this,"setHoverGiftWhiteList",e=>this.hoverGiftWhiteList=e),(0,ea._)(this,"setHoverGiftWhiteListV2",e=>this.hoverGiftWhiteListV2=e),(0,ea._)(this,"setDiyPluginIdWhiteList",e=>this.diyPluginIdWhiteList=e),(0,ea._)(this,"setGiftBuffIdWhiteList",e=>this.giftBuffIdWhiteList=e),(0,ea._)(this,"setDiyCardNameWhiteList",e=>this.diyCardNameWhiteList=e),(0,ea._)(this,"setHandleRecharge",e=>this.handleRecharge=e),(0,ea._)(this,"setShowBuffCard",e=>this.showBuffCard=e),(0,ea._)(this,"setWanxiangGiftSwitch",e=>this.wanxiangGiftSwitch=e),(0,ea._)(this,"setIsGiftPanelVisible",e=>this.isGiftPanelVisible=e),(0,ea._)(this,"setIsGiftPanelVisibleNew",e=>this.isGiftPanelVisibleNew=e),(0,ea._)(this,"setForceShowBuffList",e=>this.forceShowBuffList=e),(0,ea._)(this,"setStarGuardEffectWhiteList",e=>this.starGuardEffectWhiteList=e),(0,ea._)(this,"setCurrentPageType",e=>this.currentPageType=e),(0,ea._)(this,"setPaygrade",async e=>{var t,i,n,o,r,l,a,s;let u=null===(n=this.store)||void 0===n?void 0:null===(i=n.roomStore)||void 0===i?void 0:null===(t=i.roomInfo)||void 0===t?void 0:t.roomId,d=null===(a=this.store)||void 0===a?void 0:null===(l=a.roomStore)||void 0===l?void 0:null===(r=l.roomInfo)||void 0===r?void 0:null===(o=r.anchor)||void 0===o?void 0:o.id_str;if(!u||!d)return;let c=await (0,eC.HF)({room_id:u,anchor_id:d,request_from:e});c.data&&200===c.status&&(this.paygrade=null==c?void 0:null===(s=c.data)||void 0===s?void 0:s.data)}),(0,ea._)(this,"setCurrentHoverGift",e=>{this.currentHoverGift=e}),(0,ea._)(this,"setMaxGiftTrayCount",e=>this.maxGiftTrayCount=e),(0,ea._)(this,"scrollGiftList",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new CustomEvent("scrollGiftList",{detail:e});document.dispatchEvent(t)}),(0,ea._)(this,"setGiftComboHint",e=>{this.giftComboHint=e}),(0,ea._)(this,"setGiftSkinCache",e=>{this.giftSkinCache=e}),(0,ea._)(this,"setGiftShortcutKey",e=>{try{localStorage.setItem(eL.vp,JSON.stringify(e))}catch(e){}this.giftShortcutKey=e}),(0,ea._)(this,"setIsFirstGiftShortcutKey",e=>{try{localStorage.setItem(eL.iR,JSON.stringify(e))}catch(e){}this.isFirstGiftShortcutKey=e}),(0,ea._)(this,"setGiftLayer",e=>{this.giftLayer=e}),(0,ea._)(this,"setGiftTrayConfig",e=>{this.giftTrayConfig=e}),(0,ea._)(this,"setHasGiftConfirm",e=>{this.hasGiftConfirm=e});this.makeObservable()}}var eT=i("914561"),eR=i("41356");class ek extends eu.Z{get pkStatus(){let e=!!this.pkAppData.ver;return!!this.pkTccStatus&&e}get pkTeamCount(){let e="";if(!this.pkStatus||this.pkStatus&&!this.isInPK&&!this.isInPunish)return e;let t=ev()(this.pkListData,"battle_stats.multi_pk_team",[]),i=1===ev()(this.pkListData,"battle_stats.battle_settings.battle_config_setting.team_mode",0);if(this.pkAppData.ver===eR.TG.DOUBLE)e="1v1";else if(i&&t[1]&&t[2])e=`${t[1].multi_anchor_list.length}v${t[2].multi_anchor_list.length}`;else if(this.pkStatus){var n,o;e=`${null===(o=this.pkAppData)||void 0===o?void 0:null===(n=o.grids)||void 0===n?void 0:n.length}vs`}return e}constructor(){var e;super(),e=this,(0,ea._)(this,"pkAppData",{}),(0,ea._)(this,"pkTccStatus",!1),(0,ea._)(this,"pkEggData",null),(0,ea._)(this,"isInPK",!1),(0,ea._)(this,"isInPunish",!1),(0,ea._)(this,"transformToPK",!1),(0,ea._)(this,"pkPlayMode",""),(0,ea._)(this,"pkListData",{}),(0,ea._)(this,"pkStatusData",{}),(0,ea._)(this,"pkCountDown",0),(0,ea._)(this,"usePkEgg",!1),(0,ea._)(this,"isDoubleView",!1),(0,ea._)(this,"showPKScoreBar",!1),(0,ea._)(this,"showPKContributorsTop",!1),(0,ea._)(this,"pkId",""),(0,ea._)(this,"isVote",!1),(0,ea._)(this,"pkUserIdList",[]),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{pkAppData:ed.observable,pkTccStatus:ed.observable,pkStatus:ed.computed,setPKAppData:ed.action,setPKTccStatus:ed.action,setPkEggData:ed.action,pkEggData:ed.observable,pkCountDown:ed.observable,pkListData:ed.observable,pkStatusData:ed.observable,setPkListData:ed.action,setPkStatusData:ed.action,setPkCountDown:ed.action,setUsePkEgg:ed.action,usePkEgg:ed.observable,isDoubleView:ed.observable,setIsDoubleView:ed.action,setShowPKScoreBar:ed.action,showPKScoreBar:ed.observable,showPKContributorsTop:ed.observable,setShowPKContributorsTop:ed.action,pkId:ed.observable,setPkId:ed.action,isVote:ed.observable,setIsVote:ed.action,isInPK:ed.observable,isInPunish:ed.observable,transformToPK:ed.observable,pkPlayMode:ed.observable,pkTeamCount:ed.computed,setTransformToPK:ed.action,setIsInPK:ed.action,setIsInPunish:ed.action,pkUserIdList:ed.observable,setPkUserIdList:ed.action,setPkPlayMode:ed.action})}),(0,ea._)(this,"setPKAppData",e=>this.pkAppData=e),(0,ea._)(this,"setPKTccStatus",e=>this.pkTccStatus=e),(0,ea._)(this,"setPkEggData",e=>{this.pkEggData=e}),(0,ea._)(this,"setPkCountDown",e=>this.pkCountDown=e),(0,ea._)(this,"setUsePkEgg",e=>this.usePkEgg=e),(0,ea._)(this,"setIsDoubleView",e=>this.isDoubleView=e),(0,ea._)(this,"setShowPKScoreBar",e=>this.showPKScoreBar=e),(0,ea._)(this,"setShowPKContributorsTop",e=>this.showPKContributorsTop=e),(0,ea._)(this,"setPkId",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.pkId=t}),(0,ea._)(this,"setIsVote",e=>this.isVote=e),(0,ea._)(this,"setIsInPK",e=>this.isInPK=e),(0,ea._)(this,"setPkUserIdList",e=>this.pkUserIdList=e),(0,ea._)(this,"setIsInPunish",e=>{this.isInPK=e}),(0,ea._)(this,"setTransformToPK",e=>this.transformToPK=e),(0,ea._)(this,"setPkPlayMode",e=>this.pkPlayMode=eR.gL[e]),(0,ea._)(this,"setPkListData",e=>this.pkListData=e),(0,ea._)(this,"setPkStatusData",e=>this.pkStatusData=e);this.makeObservable()}}class ex extends eu.Z{get audiencePanelStatus(){return this.audienceTccStatus}get audienceStatus(){return this.audienceSwitchStatus&&this.audienceAuthStatus}constructor(){super(),(0,ea._)(this,"audienceSwitchStatus",!0),(0,ea._)(this,"audienceAuthStatus",!1),(0,ea._)(this,"audienceTccStatus",!1),(0,ea._)(this,"audienceSelectTab",30),(0,ea._)(this,"showEntrance",!1),(0,ea._)(this,"onlineScore1000Num",0),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{audienceSwitchStatus:ed.observable,audienceAuthStatus:ed.observable,audienceTccStatus:ed.observable,audienceSelectTab:ed.observable,showEntrance:ed.observable,onlineScore1000Num:ed.observable,audiencePanelStatus:ed.computed,audienceStatus:ed.computed,setAudienceSwitchStatus:ed.action,setAudienceAuthStatus:ed.action,setAudienceTccStatus:ed.action,setAudienceSelectTab:ed.action,setShowEntrance:ed.action,setOnlineScore1000Num:ed.action})}),(0,ea._)(this,"setAudienceSelectTab",e=>this.audienceSelectTab=e),(0,ea._)(this,"setShowEntrance",e=>this.showEntrance=e),(0,ea._)(this,"setOnlineScore1000Num",e=>this.onlineScore1000Num=e),(0,ea._)(this,"setAudienceSwitchStatus",e=>this.audienceSwitchStatus=e),(0,ea._)(this,"setAudienceAuthStatus",e=>this.audienceAuthStatus=e),(0,ea._)(this,"setAudienceTccStatus",e=>this.audienceTccStatus=e);this.makeObservable()}}class eA extends eu.Z{makeObservable(){(0,ed.makeObservable)(this,{fansClubTccStatus:ed.observable,fansClubAuthStatus:ed.observable,fansClubShowStatus:ed.observable,fansClubJoinStatus:ed.observable,fansClubAutoLightStatus:ed.observable,fansClubButtonShowStatus:ed.observable,fansClubData:ed.observable,hasFetchDataStatus:ed.observable,fansClubEntranceBounceStatus:ed.observable,fansclubGuardianStatus:ed.observable,guardianExpireTime:ed.observable,fansClubStatus:ed.computed,setFansClubAuthStatus:ed.action,setFansClubTccStatus:ed.action,setFansClubShowStatus:ed.action,setFansClubJoinStatus:ed.action,setFansClubAutoLightStatus:ed.action,setFansClubData:ed.action,setHasFetchDataStatus:ed.action,setFansClubEntranceBounceStatus:ed.action,setFansClubGuardianStatus:ed.action,setFansClubButtonShowStatus:ed.action,setGuardianExpireTime:ed.action})}get fansClubStatus(){return this.fansClubTccStatus&&this.fansClubAuthStatus}constructor(){super(),(0,ea._)(this,"fansClubAuthStatus",!1),(0,ea._)(this,"fansClubTccStatus",!1),(0,ea._)(this,"fansClubButtonShowStatus",!1),(0,ea._)(this,"fansClubShowStatus",{isShow:!1,source:""}),(0,ea._)(this,"fansClubJoinStatus",!1),(0,ea._)(this,"fansClubAutoLightStatus",!1),(0,ea._)(this,"fansClubData",{}),(0,ea._)(this,"hasFetchDataStatus",!1),(0,ea._)(this,"fansClubEntranceBounceStatus",!1),(0,ea._)(this,"fansclubGuardianStatus",0),(0,ea._)(this,"guardianExpireTime",0),(0,ea._)(this,"setFansClubAuthStatus",e=>this.fansClubAuthStatus=e),(0,ea._)(this,"setFansClubTccStatus",e=>this.fansClubTccStatus=e),(0,ea._)(this,"setFansClubShowStatus",e=>this.fansClubShowStatus=e),(0,ea._)(this,"setFansClubButtonShowStatus",e=>this.fansClubButtonShowStatus=e),(0,ea._)(this,"setFansClubJoinStatus",e=>this.fansClubJoinStatus=e),(0,ea._)(this,"setFansClubAutoLightStatus",e=>this.fansClubAutoLightStatus=e),(0,ea._)(this,"setFansClubData",e=>this.fansClubData=e),(0,ea._)(this,"setHasFetchDataStatus",e=>this.hasFetchDataStatus=e),(0,ea._)(this,"setFansClubEntranceBounceStatus",e=>this.fansClubEntranceBounceStatus=e),(0,ea._)(this,"setFansClubGuardianStatus",e=>this.fansclubGuardianStatus=e),(0,ea._)(this,"setGuardianExpireTime",e=>this.guardianExpireTime=e);this.makeObservable()}}var eO=i("293560");class eM extends eu.Z{constructor(){super(),(0,ea._)(this,"leadingData",{}),(0,ea._)(this,"streamData",{}),(0,ea._)(this,"leadingShow",!1),(0,ea._)(this,"localQuality",void 0),(0,ea._)(this,"singleControlTime",0),(0,ea._)(this,"singleControlMaxShowTime",0),(0,ea._)(this,"renderTime",0),(0,ea._)(this,"isUseVVC",!1),(0,ea._)(this,"isH265",!1),(0,ea._)(this,"isH265Error",!1),(0,ea._)(this,"videoInit",!1),(0,ea._)(this,"disabledH265",!1),(0,ea._)(this,"streamInfoFromLiving",{}),(0,ea._)(this,"currentQuality",void 0),(0,ea._)(this,"watchingFinished",!0),(0,ea._)(this,"lowH265",!1),(0,ea._)(this,"useBackUp",!1),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{leadingData:ed.observable,streamData:ed.observable,leadingShow:ed.observable,localQuality:ed.observable,renderTime:ed.observable,setLeadingData:ed.action,setStreamData:ed.action,setLeadingShow:ed.action,setLocalQuality:ed.action,setRenderTime:ed.action,singleControlTime:ed.observable,singleControlMaxShowTime:ed.observable,setSingleControlMaxShowTime:ed.action,setSingleControlTime:ed.action,isUseVVC:ed.observable,isH265:ed.observable,setIsH265:ed.action,isH265Error:ed.observable,setIsH265Error:ed.action,videoInit:ed.observable,setVideoInit:ed.action,setIsUseVVC:ed.action,disabledH265:ed.observable,setDisabledH265:ed.action,streamInfoFromLiving:ed.observable,setStreamInfoFromLiving:ed.action,currentQuality:ed.observable,setCurrentQuality:ed.action,watchingFinished:ed.observable,setWatchingFinished:ed.action,setLowH265:ed.action,lowH265:ed.observable,useBackUp:ed.observable,setUseBackUp:ed.action})}),(0,ea._)(this,"setLowH265",e=>{this.lowH265=e}),(0,ea._)(this,"setWatchingFinished",e=>{this.watchingFinished=e}),(0,ea._)(this,"setCurrentQuality",e=>{this.currentQuality=e}),(0,ea._)(this,"setStreamInfoFromLiving",(e,t)=>{"string"==typeof e?this.streamInfoFromLiving[e]=t:"object"==typeof e&&(this.streamInfoFromLiving=e)}),(0,ea._)(this,"setDisabledH265",e=>{this.disabledH265=e}),(0,ea._)(this,"reset",()=>{this.leadingData={},this.streamData={},this.leadingShow=!1,this.localQuality=void 0,this.singleControlTime=0,this.singleControlMaxShowTime=0,this.renderTime=0,this.isUseVVC=!1}),(0,ea._)(this,"setIsUseVVC",e=>{this.isUseVVC=e}),(0,ea._)(this,"setVideoInit",e=>{this.videoInit=e}),(0,ea._)(this,"setLeadingData",e=>{this.leadingData=e}),(0,ea._)(this,"setStreamData",e=>{this.streamData=e}),(0,ea._)(this,"setLeadingShow",e=>{this.leadingShow=e}),(0,ea._)(this,"setLocalQuality",e=>{this.localQuality=e}),(0,ea._)(this,"setRenderTime",e=>{this.renderTime=e}),(0,ea._)(this,"setSingleControlMaxShowTime",e=>{this.singleControlMaxShowTime=e}),(0,ea._)(this,"setSingleControlTime",e=>{this.singleControlTime=e}),(0,ea._)(this,"setIsH265",e=>{this.isH265=e}),(0,ea._)(this,"setIsH265Error",e=>{this.isH265Error=e}),(0,ea._)(this,"setUseBackUp",e=>{this.useBackUp=e});this.makeObservable()}}class eF extends eu.Z{constructor(){super(),(0,ea._)(this,"isShowHourRankList",!1),(0,ea._)(this,"openType",0),(0,ea._)(this,"isFirstLoad",!0),(0,ea._)(this,"chatRoomOpenType",12),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{isShowHourRankList:ed.observable,openType:ed.observable,setIsShowHourRankList:ed.action,chatRoomOpenType:ed.observable,setOpenType:ed.action,setChatRoomOpenType:ed.action})}),(0,ea._)(this,"setOpenType",e=>this.openType=e),(0,ea._)(this,"setIsShowHourRankList",e=>this.isShowHourRankList=e),(0,ea._)(this,"setIsFirstLoad",e=>this.isFirstLoad=e),(0,ea._)(this,"setChatRoomOpenType",e=>this.chatRoomOpenType=e);this.makeObservable()}}class eD extends eu.Z{setIsActive(e){this.isActive=e}constructor(){super(),(0,ea._)(this,"isActive",!0),(0,ea._)(this,"hasPre",!1),(0,ea._)(this,"hasNext",!1),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{isActive:ed.observable,hasPre:ed.observable,hasNext:ed.observable,setIsActive:ed.action})});this.makeObservable()}}var ej=i("114217"),eG=i("782563"),eU=i("457388"),eV=i("889503"),eK=i("669768"),eY=i("907831"),eZ=i.n(eY),eB=i("831202");class eH{initBrowser(){this.browser.SPIDER_DETECT=(0,eG._Q)(),this.browser.BROWSER_NOT_SUPPORTED=!(0,eK.VU)()}initRoom(e,t,i){this.room[e]={roomId:e,currentStreamUrl:t,roomFromServer:eZ()(i)}}init(e,t,i){!this.initBrowserInstance&&(this.initBrowser(),this.initBrowserInstance=!0),!this.room[e]&&this.initRoom(e,t,i)}resetReason(e){e.NETWORK_LOW=!1,e.NETWORK_SERVICE=!1,e.NOT_CATCH_ERROR=!1,e.PLAY_RUNTIME_ERROR=!1,e.USER_PAUSED=!1}resetWaiting(e){e.waitingStartTime=-1,e.waitingFirstStartTime=0,e.waitingTime=0,e.waitingNumber=0,e.waiting=!1}resetRetryCount(e){e.retryCount=0,e.retryTime=0,e.retryRuntimeErrorCount=0}resetRoomObj(e){e.pauseTime=0,e.switchTime=0,e.switchUrlCount=0,this.resetWaiting(e),this.resetReason(e),this.resetRetryCount(e),this.errorReport=!1}resetPlayer(){this.player=null}setCurrentRoom(e,t){var i,n;let o=null==e?void 0:null===(i=e.room)||void 0===i?void 0:i.id_str;if(this.currentRoomId!==o&&""!==this.currentRoomId){let e=this.room[this.currentRoomId];e.waitingTime=0,e.waitingNumber=0,e.waitingStartTime=-1}this.currentRoomId=o,this.init(null==e?void 0:null===(n=e.room)||void 0===n?void 0:n.id_str,t,e)}urlIsSame(e,t){let i=null==e?void 0:e.split("?")[0];return i===(null==t?void 0:t.split("?")[0])}setBusinessChangeUrl(e){this.businessChangeUrl=e}setPlayer(e){!this.player&&e&&(this.player=e)}handleWaiting(e){let t=this.room[e];if(t){var i;t.waitingNumber=(null!==(i=t.waitingNumber)&&void 0!==i?i:0)+1,t.waitingStartTime=Date.now(),t.waiting=!0,1===t.waitingNumber&&(t.waitingFirstStartTime=Date.now())}}handlePlaying(e){let t=this.room[e];if(null==t?void 0:t.waiting){var i,n;t.waiting=!1,t.waitingTime=(null!==(i=t.waitingTime)&&void 0!==i?i:0)+Date.now()-(null!==(n=t.waitingStartTime)&&void 0!==n?n:Date.now())}}handleEnded(e){var t,i,n,o,r,l;let a=this.room[e];(null===(o=this.player)||void 0===o?void 0:null===(n=o.plugins)||void 0===n?void 0:null===(i=n.flvlive)||void 0===i?void 0:null===(t=i.endedStatus)||void 0===t?void 0:t.status)==="nobuffer"?(null===(l=navigator)||void 0===l?void 0:l.onLine)?a.NETWORK_LOW=!0:this.browser.NETWORK_OFFLINE=!0:!(null===(r=navigator)||void 0===r?void 0:r.onLine)&&(this.browser.NETWORK_OFFLINE=!0)}handleError(e,t){var i;let n=this.room[e];(null==t?void 0:null===(i=t.code)||void 0===i?void 0:i.toString().indexOf("5"))!==-1||21===t.code||4===t.code||3===t.errorCode||4===t.errorCode||999===t.code?n.NETWORK_SERVICE=!0:404===t.code||403===t.code||401===t.code||407===t.code||31===t.code?n.PLAY_RUNTIME_ERROR=!0:999===t.code||1===t.errorCode||2===t.errorCode?n.NETWORK_LOW=!0:n.NOT_CATCH_ERROR=!0,n.pauseTime=Date.now(),n.err=t}handlePause(e){let t=this.room[e];t&&(t.pauseTime=Date.now())}handlePlay(e){let t=this.room[e];this.globalUserPause=!1,t&&this.resetRoomObj(t)}getQualityUrl(e){var t,i,n,o,r;let l=null!==(r=e.roomFromServer)&&void 0!==r?r:{},a=(null==l?void 0:null===(i=l.room)||void 0===i?void 0:null===(t=i.stream_url)||void 0===t?void 0:t.flv_pull_url)||{},s=(null==l?void 0:null===(o=l.room)||void 0===o?void 0:null===(n=o.stream_url)||void 0===n?void 0:n.hls_pull_url_map)||{},u=(0,eG.tq)()?s:a,d="";return u.SD1?d=u.SD1:u.SD2?d=u.SD2:u.HD1?d=u.HD1:u.FULL_HD1&&(d=u.FULL_HD1),(0,eV.uC)(d)}changeUrl(e){if(this.currentRoomId!==e.roomId)return;let t=this.getQualityUrl(e);if(this.player&&(0,eK.sw)(t)&&!this.urlIsSame(t,this.player.config.url))this.autoChangeUrl?this.player.src=t:this.businessChangeUrl&&this.businessChangeUrl();else if(this.autoChangeUrl){var i;null===(i=this.player)||void 0===i||i.retry()}}startHeartDetect(){if(!this.timer)this.timer=setInterval(()=>{var e,t,i,n,o,r,l,a,s,u,d;let{player:c}=this,m=null!==(t=this.room[this.currentRoomId])&&void 0!==t?t:{};if(!c||!(null==c?void 0:c.hasStart))return;let _=this.browser;if(!_.BROWSER_NOT_SUPPORTED&&!_.SPIDER_DETECT&&!!(null===(e=navigator)||void 0===e?void 0:e.onLine)&&!m.ANCHOR_END&&!m.ANCHOR_LEAVE&&!m.USER_PAUSED&&!this.globalUserPause){if(!c.paused){let e=null!==(i=null==m?void 0:m.waitingNumber)&&void 0!==i?i:0,t=null!==(n=null==m?void 0:m.waitingTime)&&void 0!==n?n:0,l=null!==(o=null==m?void 0:m.waitingStartTime)&&void 0!==o?o:-1,a=null!==(r=null==m?void 0:m.waitingFirstStartTime)&&void 0!==r?r:-1;Date.now()-a>=5e3&&(null==m?void 0:m.waiting)&&((Date.now()-l+t>=3e3||e>=3)&&this.changeUrl(m),(null==m?void 0:m.waiting)?(m.waitingStartTime=Date.now(),m.waitingFirstStartTime=Date.now(),m.waitingNumber=1,m.waitingTime=0):this.resetWaiting(m));return}if(null==m?void 0:m.PLAY_RUNTIME_ERROR){let e=null!==(l=null==m?void 0:m.retryCount)&&void 0!==l?l:0,t=null!==(a=null==m?void 0:m.retryTime)&&void 0!==a?a:Date.now();e<0&&Date.now()-t>=3e4?(null==c||c.retry(),m.retryCount=e+1,m.retryTime=Date.now()):e>=0&&!this.errorReport&&(eU.kg.event(`[${eU.Tn.Error}]${eB.Mo.LiveBasicPlayerError}`,(0,H._)((0,w._)({},null==m?void 0:m.err),{is_client:(0,eG.DT)(),type:"living"})),this.errorReport=!0);return}if(m.NETWORK_SERVICE||m.NOT_CATCH_ERROR){let e=null!==(s=null==m?void 0:m.retryRuntimeErrorCount)&&void 0!==s?s:0;e<1?(null==c||c.retry(),m.retryRuntimeErrorCount=e+1):e>=3&&!this.errorReport&&(eU.kg.event(`[${eU.Tn.Error}]${eB.Mo.LiveBasicPlayerError}`,(0,H._)((0,w._)({},null==m?void 0:m.err),{is_client:(0,eG.DT)(),type:"living"})),this.errorReport=!0);return}if(m.NETWORK_LOW){let e=null!==(u=null==m?void 0:m.switchUrlCount)&&void 0!==u?u:0,t=null!==(d=null==m?void 0:m.switchTime)&&void 0!==d?d:Date.now();if(e<3&&Date.now()-t>=3e4){m.switchUrlCount=e+1,m.switchTime=0,this.changeUrl(m);return}}if(this.browser.NETWORK_OFFLINE){c.retry(),this.browser.NETWORK_OFFLINE=!1;return}}},1e3)}stopHeartDetect(){this.timer&&clearInterval(this.timer),this.timer=null}setRoomStopReason(e,t,i){let n=this.room[e];n&&(n[t]=i)}getRoomInfo(e){return this.room[e]}setGlobalUserPause(e){this.globalUserPause=e}setUrlAutoChange(e){this.autoChangeUrl=e}constructor(){(0,ea._)(this,"browser",void 0),(0,ea._)(this,"room",{}),(0,ea._)(this,"initBrowserInstance",!1),(0,ea._)(this,"currentRoomId",""),(0,ea._)(this,"player",void 0),(0,ea._)(this,"timer",void 0),(0,ea._)(this,"globalUserPause",!1),(0,ea._)(this,"autoChangeUrl",!0),(0,ea._)(this,"businessChangeUrl",void 0),(0,ea._)(this,"errorReport",!1),(0,ea._)(this,"reset",()=>{this.browser={SPIDER_DETECT:!1,BROWSER_NOT_SUPPORTED:!1,NETWORK_OFFLINE:!1},this.room={},this.initBrowserInstance=!1,this.currentRoomId="",this.player=null,clearInterval(this.timer),this.timer=null,this.globalUserPause=!1,this.autoChangeUrl=!0,this.businessChangeUrl=""}),this.browser={SPIDER_DETECT:!1,BROWSER_NOT_SUPPORTED:!1,NETWORK_OFFLINE:!1},this.room={},this.startHeartDetect=this.startHeartDetect.bind(this),this.stopHeartDetect=this.stopHeartDetect.bind(this)}}class eW extends eu.Z{makeObservable(){(0,ed.makeObservable)(this,{message:ed.observable,setMessage:ed.action,container:ed.observable,setContainer:ed.action,liveContainer:ed.observable,setLiveContainer:ed.action,playerHandler:ed.observable,setPlayerHandler:ed.action,audioPower:ed.observable,setAudioPower:ed.action,player:ed.observable,setPlayer:ed.action,paidLiveQRCodeVisible:ed.observable,setPaidLiveQRCodeVisible:ed.action,aiolinkHub:ed.observable,setAiolinkHub:ed.action})}constructor(){super(),(0,ea._)(this,"message",es.s?null:new ej.v0C),(0,ea._)(this,"container",null),(0,ea._)(this,"liveContainer",null),(0,ea._)(this,"playerHandler",es.s?null:new eH),(0,ea._)(this,"audioPower",null),(0,ea._)(this,"player",null),(0,ea._)(this,"paidLiveQRCodeVisible",!1),(0,ea._)(this,"aiolinkHub",null),(0,ea._)(this,"setLiveContainer",e=>{this.liveContainer=e}),(0,ea._)(this,"setContainer",e=>{this.container=e}),(0,ea._)(this,"setMessage",e=>{this.message=e}),(0,ea._)(this,"setPlayerHandler",e=>{this.playerHandler=e}),(0,ea._)(this,"setPlayer",e=>{this.player=e}),(0,ea._)(this,"setAudioPower",e=>{this.audioPower=e}),(0,ea._)(this,"reset",()=>{this.playerHandler=null,this.container=null,this.audioPower=null,this.message=null,this.player=null,this.liveContainer=null,this.aiolinkHub=null}),(0,ea._)(this,"setPaidLiveQRCodeVisible",e=>{this.paidLiveQRCodeVisible=e}),(0,ea._)(this,"setAiolinkHub",e=>{this.aiolinkHub=e});this.makeObservable()}}class eQ extends eu.Z{setContainerList(e){this.containerList=e}setLongtouchList(e){this.longtouchList=e}setCommonList(e){this.commonList=e}constructor(){super(),(0,ea._)(this,"containerList",new Map),(0,ea._)(this,"longtouchList",new Map),(0,ea._)(this,"commonList",new Map),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{containerList:ed.observable,setContainerList:ed.action,longtouchList:ed.observable,setLongtouchList:ed.action,commonList:ed.observable,setCommonList:ed.action})}),(0,ea._)(this,"reset",()=>{this.containerList=new Map,this.longtouchList=new Map,this.store=null});this.makeObservable()}}var e$=i("500007");class eq extends eu.Z{constructor(){super(),(0,ea._)(this,"cameraInfo",{}),(0,ea._)(this,"mainCameraInfo",{}),(0,ea._)(this,"cameraInfoList",[]),(0,ea._)(this,"multiCameraLogParams",{}),(0,ea._)(this,"switchCameraNumber",0),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{cameraInfo:ed.observable,mainCameraInfo:ed.observable,cameraInfoList:ed.observable,setCameraInfo:ed.action,setMainCameraInfo:ed.action,setCameraInfoList:ed.action,setMultiCameraLogParams:ed.action,multiCameraLogParams:ed.observable,switchCameraNumber:ed.observable,setSwitchCameraNumber:ed.action})}),(0,ea._)(this,"setSwitchCameraNumber",e=>{this.switchCameraNumber=e}),(0,ea._)(this,"setMultiCameraLogParams",e=>{this.multiCameraLogParams=e}),(0,ea._)(this,"reset",()=>{this.cameraInfo={},this.mainCameraInfo={},this.cameraInfoList=[]}),(0,ea._)(this,"setCameraInfo",e=>{"function"==typeof e?this.cameraInfo=e(this.cameraInfo):this.cameraInfo=e}),(0,ea._)(this,"setMainCameraInfo",e=>{"function"==typeof e?this.mainCameraInfo=e(this.mainCameraInfo):this.mainCameraInfo=e}),(0,ea._)(this,"setCameraInfoList",e=>{"function"==typeof e?this.cameraInfoList=e(this.cameraInfoList):this.cameraInfoList=e});this.makeObservable()}}var eJ=i("130502");class ez extends eu.Z{constructor(){super(),(0,ea._)(this,"participatedLotterys",[]),(0,ea._)(this,"landingPageType","userMain"),(0,ea._)(this,"currentLottery",{}),(0,ea._)(this,"leftTimeFromShortTouch",0),(0,ea._)(this,"candidateState",0),(0,ea._)(this,"isFirstLoad",!0),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{landingPageType:ed.observable,participatedLotterys:ed.observable,currentLottery:ed.observable,leftTimeFromShortTouch:ed.observable,candidateState:ed.observable,isFirstLoad:ed.observable,setIsFirstLoad:ed.action})}),(0,ea._)(this,"setParticipatedLotterys",e=>this.participatedLotterys=e),(0,ea._)(this,"setLandingPageType",e=>this.landingPageType=e),(0,ea._)(this,"setCurrentLottery",e=>this.currentLottery=e),(0,ea._)(this,"setLeftTimeFromShortTouch",e=>this.leftTimeFromShortTouch=e),(0,ea._)(this,"setCandidateStat",e=>this.candidateState=e),(0,ea._)(this,"setIsFirstLoad",e=>this.isFirstLoad=e);this.makeObservable()}}class eX extends eu.Z{constructor(){super(),(0,ea._)(this,"rechargeAuthStatus",!1),(0,ea._)(this,"showGiftRechargeContainer",!1),(0,ea._)(this,"remoteRechargeContainerRendered",!1),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{rechargeAuthStatus:ed.observable,setRechargeAuthStatus:ed.action,showGiftRechargeContainer:ed.observable,setShowGiftRechargeContainer:ed.action,remoteRechargeContainerRendered:ed.observable,setRemoteRechargeContainerRendered:ed.action})}),(0,ea._)(this,"setRechargeAuthStatus",e=>this.rechargeAuthStatus=e),(0,ea._)(this,"setShowGiftRechargeContainer",e=>this.showGiftRechargeContainer=e),(0,ea._)(this,"setRemoteRechargeContainerRendered",e=>this.remoteRechargeContainerRendered=e);this.makeObservable()}}let e0=["wish_list","revenue_gift_exhibition","fansclub"];class e1 extends eu.Z{constructor(){var e;super(),e=this,(0,ea._)(this,"JSBInstance",null),(0,ea._)(this,"bannerList",[]),(0,ea._)(this,"currentLandPage",[]),(0,ea._)(this,"messageListenList",[]),(0,ea._)(this,"bannerKeys",{}),(0,ea._)(this,"tccRedirect",[]),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{JSBInstance:ed.observable,bannerList:ed.observable,currentLandPage:ed.observable,setJSBInstance:ed.action,setBannerList:ed.action,setCurrentLandPage:ed.action,setMessageListenList:ed.action,messageListenList:ed.observable,bannerKeys:ed.observable,setBannerKeys:ed.action,tccRedirect:ed.observable,setTccRedirect:ed.action})}),(0,ea._)(this,"setJSBInstance",e=>{this.JSBInstance=e}),(0,ea._)(this,"setBannerList",e=>{this.bannerList=e}),(0,ea._)(this,"setCurrentLandPage",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(!(t.length>0)||i||n)e.currentLandPage=t;else{let i=t[t.length-1],n=e0.find(e=>i.indexOf(e)>=0);if(n){let i=t.filter(e=>e.indexOf(n)>=0);e.currentLandPage=i}else{let i=t.filter(e=>e0.every(t=>0>e.indexOf(t)));e.currentLandPage=i}}}),(0,ea._)(this,"closeLandPage",e=>{let t=this.currentLandPage.findIndex(t=>t.indexOf(e)>=0);if(t>=0){let e=[...this.currentLandPage];e.splice(t,1),this.currentLandPage=e}}),(0,ea._)(this,"_getGoldActLandUrl",e=>{let{giftId:t,anchorId:i,secAnchorId:n,userId:o,secUserId:r,roomId:l}=e,a=(0,H._)((0,w._)({request_page:"gift_banner"},t?{gift_id:t}:{}),{anchor_id:i,sec_anchor_id:n,user_id:o,sec_user_id:r,room_id:l,__isDouyinPC:"true"}),s=Object.keys(a).map(e=>`${e}=${a[e]}`).join("&");return"https://lf-webcast-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/h5/classic_gifts_position_douyin/pages/main/index.html?"+s}),(0,ea._)(this,"setMessageListenList",e=>{this.messageListenList=e}),(0,ea._)(this,"setBannerKeys",(e,t)=>{this.bannerKeys[e]=t}),(0,ea._)(this,"setTccRedirect",e=>{this.tccRedirect=e});this.makeObservable()}}class e2 extends eu.Z{constructor(){super(),(0,ea._)(this,"isFirstLoad",!0),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{isFirstLoad:ed.observable,setIsFirstLoad:ed.action})}),(0,ea._)(this,"setIsFirstLoad",e=>this.isFirstLoad=e);this.makeObservable()}}class e5 extends eu.Z{constructor(){super(),(0,ea._)(this,"cartVisible",!1),(0,ea._)(this,"showAgreement",!1),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{showAgreement:ed.observable,cartVisible:ed.observable,setCartVisible:ed.action,setShowAgreement:ed.action})}),(0,ea._)(this,"setCartVisible",e=>this.cartVisible=e),(0,ea._)(this,"setShowAgreement",e=>this.showAgreement=e);this.makeObservable()}}class e3 extends eu.Z{setShowShare(e){this.showShare=e}setLeft(e){this.left=e}setTop(e){this.top=e}setHeight(e){this.height=e}setShareFrom(e){this.shareFrom=e}constructor(){super(),(0,ea._)(this,"showShare",!1),(0,ea._)(this,"left",void 0),(0,ea._)(this,"top",void 0),(0,ea._)(this,"height",void 0),(0,ea._)(this,"shareFrom","lottery"),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{showShare:ed.observable,left:ed.observable,top:ed.observable,height:ed.observable,shareFrom:ed.observable,setShowShare:ed.action,setLeft:ed.action,setTop:ed.action,setHeight:ed.action,setShareFrom:ed.action})});this.makeObservable()}}class e6 extends eu.Z{setVipEmojiConfig(e){this.vipEmojiConfig=e}constructor(){super(),(0,ea._)(this,"isVip",!1),(0,ea._)(this,"isShowVipPanel",!1),(0,ea._)(this,"vipEmojiConfig",null),(0,ea._)(this,"emojiPanelRef",null),(0,ea._)(this,"vipLiveStatus",""),(0,ea._)(this,"vipInfoLoaded",!1),(0,ea._)(this,"vipSource","icon"),(0,ea._)(this,"showVipLiveBoundary",!1),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{isShowVipPanel:ed.observable,vipEmojiConfig:ed.observable,setIsShowVipPanel:ed.action,setVipEmojiConfig:ed.action,emojiPanelRef:ed.observable,isVip:ed.observable,setIsVip:ed.action,vipLiveStatus:ed.observable,setVipLiveStatus:ed.action,vipInfoLoaded:ed.observable,setVipInfoLoaded:ed.action,vipSource:ed.observable,showVipLiveBoundary:ed.observable,setShowVipLiveBoundary:ed.action})}),(0,ea._)(this,"setShowVipLiveBoundary",e=>{this.showVipLiveBoundary=e}),(0,ea._)(this,"setIsShowVipPanel",e=>{let{isShow:t,source:i}=e;this.isShowVipPanel=t,i&&t&&(this.vipSource=i)}),(0,ea._)(this,"setIsVip",e=>this.isVip=e),(0,ea._)(this,"setEmojiPanelRef",e=>{this.emojiPanelRef=e}),(0,ea._)(this,"setVipLiveStatus",e=>this.vipLiveStatus=e),(0,ea._)(this,"setVipInfoLoaded",e=>this.vipInfoLoaded=e);this.makeObservable()}}var e8=i("707375");e8.a4.SUPPORT,e8.a4.LIGHT_GIFT;var e7={FANS_CLUB:"FANS_CLUB",GIFT_EXHIBITION:"GIFT_EXHIBITION",WISH_LIST:"WISH_LIST"};class e4 extends eu.Z{makeObservable(){(0,ed.makeObservable)(this,{giftExhibitionGuideStatus:ed.observable,wishListGuideStatus:ed.observable,leftGiftGuideShowType:ed.computed,rightGiftGuideShowType:ed.computed,setGiftExhibitionGuideStatus:ed.action,setWishListGuideStatus:ed.action})}get leftGiftGuideShowType(){return e7.FANS_CLUB}get rightGiftGuideShowType(){return this.giftExhibitionGuideStatus?e7.GIFT_EXHIBITION:e7.WISH_LIST}constructor(){super(),(0,ea._)(this,"giftExhibitionGuideStatus",!1),(0,ea._)(this,"wishListGuideStatus",!1),(0,ea._)(this,"setGiftExhibitionGuideStatus",e=>this.giftExhibitionGuideStatus=e),(0,ea._)(this,"setWishListGuideStatus",e=>this.wishListGuideStatus=e);this.makeObservable()}}class e9 extends eu.Z{makeObservable(){(0,ed.makeObservable)(this,{errorPrompts:ed.observable,logId:ed.observable,status_code:ed.observable,error:ed.observable,errorPageMessage:ed.observable,iframeConf:ed.observable,messageFrom:ed.observable,isSpider:ed.observable,defaultMoreLeague:ed.observable,defaultMatchStatsDetail:ed.observable,defaultTagMatchInfo:ed.observable,setDetailExtra:ed.action,reset:ed.action,inRoomError:ed.observable,setInRoomError:ed.action,setIframeConf:ed.action})}constructor(){super(),(0,ea._)(this,"errorPrompts",""),(0,ea._)(this,"logId",""),(0,ea._)(this,"status_code",""),(0,ea._)(this,"error",void 0),(0,ea._)(this,"errorPageMessage",!1),(0,ea._)(this,"iframeConf",{}),(0,ea._)(this,"messageFrom",""),(0,ea._)(this,"isSpider",!1),(0,ea._)(this,"defaultMoreLeague",[]),(0,ea._)(this,"defaultMatchStatsDetail",{}),(0,ea._)(this,"defaultTagMatchInfo",""),(0,ea._)(this,"inRoomError",void 0),(0,ea._)(this,"setIframeConf",e=>{this.iframeConf=e}),(0,ea._)(this,"setInRoomError",e=>{this.inRoomError=e}),(0,ea._)(this,"setDetailExtra",e=>{Object.keys(e).forEach(t=>{this[t]=e[t]})}),(0,ea._)(this,"reset",()=>{this.errorPrompts="",this.logId="",this.status_code="",this.error=void 0,this.errorPageMessage=!1,this.iframeConf={},this.messageFrom="",this.isSpider=!1,this.defaultMoreLeague=[],this.defaultMatchStatsDetail={},this.defaultTagMatchInfo=""});this.makeObservable()}}var te=i("582493"),tt=i("725896");class ti extends eu.Z{get isPanelShow(){return this.renderItemList.length>0}get isFramePanelShow(){return this.frameRenderItemList.length>0}get playerMargin(){return this.renderItemList.length>0&&this.frameRenderItemList.length<=0?this.width+8:this.renderItemList.length<=0&&this.frameRenderItemList.length>0?this.frameWidth+8:this.renderItemList.length>0&&this.frameRenderItemList.length>0?Math.max(this.width,this.frameWidth)+8:0}get infoBarMargin(){return this.frameRenderItemList.length>0?this.frameWidth+10:10}constructor(e){super(),(0,ea._)(this,"itemList",[]),(0,ea._)(this,"renderItemList",[]),(0,ea._)(this,"rootEl",null),(0,ea._)(this,"frameRootEl",null),(0,ea._)(this,"width",375),(0,ea._)(this,"frameWidth",0),(0,ea._)(this,"frameItemList",[]),(0,ea._)(this,"frameRenderItemList",[]),(0,ea._)(this,"eventBus",void 0),(0,ea._)(this,"itemClassName",void 0),(0,ea._)(this,"frameItemClassName",void 0),(0,ea._)(this,"operatingBarPluginIsShow",void 0),(0,ea._)(this,"actStore",void 0),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{frameItemClassName:ed.observable,itemClassName:ed.observable,itemList:ed.observable,renderItemList:ed.observable,rootEl:ed.observable,frameRootEl:ed.observable,width:ed.observable,frameItemList:ed.observable,frameRenderItemList:ed.observable,closePanel:ed.action,closeFramePanel:ed.action,isPanelShow:ed.computed,isFramePanelShow:ed.computed,closeItem:ed.action,closeFrameItem:ed.action,registerItem:ed.action,registerFrameItem:ed.action,unRegisterItem:ed.action,unRegisterFrameItem:ed.action,playerMargin:ed.computed,isItemShow:ed.action,isFrameItemShow:ed.action,setRootEl:ed.action,setFrameRootEl:ed.action,setItemClassName:ed.action,setFrameItemClassName:ed.action,frameWidth:ed.observable,setFrameWidth:ed.action,infoBarMargin:ed.computed,operatingBarPluginIsShow:ed.observable,setOperatingBarPluginIsShow:ed.action})}),(0,ea._)(this,"setOperatingBarPluginIsShow",e=>{this.operatingBarPluginIsShow=e}),(0,ea._)(this,"setFrameWidth",e=>{this.frameWidth=e}),(0,ea._)(this,"itemIndex",e=>this.renderItemList.findIndex(t=>t.itemKey===e)),(0,ea._)(this,"frameItemIndex",e=>this.frameRenderItemList.findIndex(t=>t.itemKey===e)),(0,ea._)(this,"setItemClassName",e=>{this.itemClassName=e}),(0,ea._)(this,"setFrameItemClassName",e=>{this.frameItemClassName=e}),(0,ea._)(this,"setRootEl",e=>{this.rootEl=e}),(0,ea._)(this,"setFrameRootEl",e=>{this.frameRootEl=e}),(0,ea._)(this,"closePanel",()=>{this.renderItemList.forEach(e=>e.onClose&&e.onClose()),this.renderItemList=[]}),(0,ea._)(this,"closeFramePanel",()=>{this.frameRenderItemList.forEach(e=>e.onClose&&e.onClose()),this.frameRenderItemList=[]}),(0,ea._)(this,"isItemShow",e=>this.renderItemList.findIndex(t=>t.itemKey===e)>=0),(0,ea._)(this,"isFrameItemShow",e=>this.frameRenderItemList.findIndex(t=>t.itemKey===e)>=0),(0,ea._)(this,"closeItem",e=>{if(!this.renderItemList)return;let t=this.renderItemList.findIndex(t=>t.itemKey===e);t>=0&&(this.renderItemList.splice(t,1),this.renderItemList=[...this.renderItemList])}),(0,ea._)(this,"closeFrameItem",e=>{let t=this.frameRenderItemList.findIndex(t=>t.itemKey===e);t>=0&&(this.frameRenderItemList.splice(t,1),this.frameRenderItemList=[...this.frameRenderItemList])}),(0,ea._)(this,"registerItem",e=>{e.group=e.group||e.itemKey;let t=this.itemList.findIndex(t=>t.itemKey===e.itemKey);t<0?this.itemList.push(e):this.itemList[t]=e,this.itemList=[...this.itemList]}),(0,ea._)(this,"registerFrameItem",e=>{e.group=e.group||e.itemKey;let t=this.frameItemList.findIndex(t=>t.itemKey===e.itemKey);t<0?this.frameItemList.push(e):this.frameItemList[t]=e,this.frameItemList=[...this.frameItemList]}),(0,ea._)(this,"unRegisterItem",e=>{let t=this.itemList.findIndex(t=>t.itemKey===e);t>=0&&(this.itemList.splice(t,1),this.itemList=[...this.itemList]),this.closeItem(e)}),(0,ea._)(this,"unRegisterFrameItem",e=>{let t=this.frameItemList.findIndex(t=>t.itemKey===e);t>=0&&(this.frameItemList.splice(t,1),this.frameItemList=[...this.frameItemList]),this.closeFrameItem(e)}),(0,ea._)(this,"openItem",e=>{let t=this.itemList.find(t=>t.itemKey===e);if(t&&t.group!==te.k.ACTIndicatorGroup){var i;null===(i=this.actStore)||void 0===i||i.setCurrentLandPage([])}if(!t)return;if(0===this.renderItemList.length){this.renderItemList=[t];return}if(this.renderItemList[0].group!==t.group){let e=this.renderItemList;this.renderItemList=[t],null==e||e.forEach(e=>e.onClose&&e.onClose());return}let n=this.renderItemList.findIndex(e=>e.itemKey===t.itemKey);if(n<0){this.renderItemList=[...this.renderItemList,t];return}if(n===this.renderItemList.length-1){let e=this.renderItemList[n];this.renderItemList.splice(n,1),this.renderItemList=[...this.renderItemList],e.onClose&&e.onClose();return}this.renderItemList.splice(n,1),this.renderItemList=[...this.renderItemList,t]}),(0,ea._)(this,"openFrameItem",e=>{let t=this.frameItemList.find(t=>t.itemKey===e);if(!t)return;if(0===this.frameRenderItemList.length){this.frameRenderItemList=[t];return}if(this.frameRenderItemList[0].group!==t.group){let e=this.frameRenderItemList;this.frameRenderItemList=[t],null==e||e.forEach(e=>e.onClose&&e.onClose());return}let i=this.frameRenderItemList.findIndex(e=>e.itemKey===t.itemKey);if(i<0){this.frameRenderItemList=[...this.frameRenderItemList,t];return}if(0===i){let e=this.frameRenderItemList[i];this.frameRenderItemList.splice(i,1),this.frameRenderItemList=[...this.frameRenderItemList],e.onClose&&e.onClose();return}this.frameRenderItemList.splice(i,1),this.frameRenderItemList=[...this.frameRenderItemList,t]}),this.eventBus=new tt.N,this.actStore=e;this.makeObservable()}}var tn=i("738612"),to=i("213987");class tr extends eu.Z{get screenMode(){return this.isFullScreen?tn.wq.FULL_SCREEN:this.isTheaterOn?tn.wq.THEATER:tn.wq.NORMAL}constructor(){super(),(0,ea._)(this,"isTheaterOn",!1),(0,ea._)(this,"isFullScreen",!1),(0,ea._)(this,"isPause",!1),(0,ea._)(this,"playerInstance",null),(0,ea._)(this,"playerLoggerInstance",null),(0,ea._)(this,"isPlayed",!1),(0,ea._)(this,"loggerOptions",{}),(0,ea._)(this,"isPlay",0),(0,ea._)(this,"isLoadedData",!1),(0,ea._)(this,"fullscreenTarget",null),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{isTheaterOn:ed.observable,isFullScreen:ed.observable,isPause:ed.observable,playerInstance:ed.observable,playerLoggerInstance:ed.observable,setPlayerInstance:ed.action,setPlayerLoggerInstance:ed.action,setIsTheaterOn:ed.action,setIsFullScreen:ed.action,setIsPause:ed.action,setIsPlayed:ed.action,isPlayed:ed.observable,screenMode:ed.computed,loggerOptions:ed.observable,setLoggerOptions:ed.action,isPlay:ed.observable,setIsPlay:ed.action,isLoadedData:ed.observable,setIsLoadedData:ed.action,fullscreenTarget:ed.observable,setFullScreenTarget:ed.action})}),(0,ea._)(this,"setFullScreenTarget",e=>{this.fullscreenTarget=e}),(0,ea._)(this,"setIsLoadedData",e=>{this.isLoadedData=e}),(0,ea._)(this,"setIsPlay",e=>{this.isPlay=e}),(0,ea._)(this,"setLoggerOptions",e=>{this.loggerOptions=e}),(0,ea._)(this,"setIsPlayed",e=>{this.isPlayed=e}),(0,ea._)(this,"setPlayerInstance",e=>{this.playerInstance=e}),(0,ea._)(this,"setPlayerLoggerInstance",e=>{this.playerLoggerInstance=e}),(0,ea._)(this,"setIsTheaterOn",e=>{this.isTheaterOn=e}),(0,ea._)(this,"setIsFullScreen",e=>{this.isFullScreen=e}),(0,ea._)(this,"setIsPause",e=>{this.isPause=e});this.makeObservable(),(0,ed.reaction)(()=>this.isTheaterOn,(e,t)=>{t&&!e&&((0,to.q)("ISLAND_SYNC_HEADER"),(0,to.q)("ISLAND_LAYOUT_NAVIGATION"))})}}class tl extends eu.Z{constructor(){super(),(0,ea._)(this,"showChat",!1),(0,ea._)(this,"isDanmakuFeatureOn",!0),(0,ea._)(this,"onSend",{current:()=>{}}),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{showChat:ed.observable,setShowChat:ed.action,isDanmakuFeatureOn:ed.observable,setIsDanmakuFeatureOn:ed.action})}),(0,ea._)(this,"setIsDanmakuFeatureOn",e=>{this.isDanmakuFeatureOn=e}),(0,ea._)(this,"setShowChat",e=>{this.showChat=e}),(0,ea._)(this,"setOnSend",e=>{this.onSend.current=e});this.makeObservable()}}class ta extends eu.Z{get isUseMutiCamera(){return!!this.isMutiVr&&this.isInVrView}get isMutiVr(){var e,t,i,n,o,r,l,a,s,u;return 0===Number(null===(n=this.store)||void 0===n?void 0:null===(i=n.roomStore)||void 0===i?void 0:null===(t=i.roomInfo)||void 0===t?void 0:null===(e=t.roomExtra)||void 0===e?void 0:e.vr_type)&&(null===(u=this.store)||void 0===u?void 0:null===(s=u.roomStore)||void 0===s?void 0:null===(a=s.roomInfo)||void 0===a?void 0:null===(l=a.room)||void 0===l?void 0:null===(r=l.pico_info)||void 0===r?void 0:null===(o=r.multi_stream_info)||void 0===o?void 0:o.multi_stream_scene)==="multi_camera"}get isVrLive(){var e,t,i,n;let o=Number(null===(n=this.store)||void 0===n?void 0:null===(i=n.roomStore)||void 0===i?void 0:null===(t=i.roomInfo)||void 0===t?void 0:null===(e=t.roomExtra)||void 0===e?void 0:e.vr_type);return 1===o||2===o||this.isMutiVr}get vr_type(){var e,t,i,n;let o=Number(null===(n=this.store)||void 0===n?void 0:null===(i=n.roomStore)||void 0===i?void 0:null===(t=i.roomInfo)||void 0===t?void 0:null===(e=t.roomExtra)||void 0===e?void 0:e.vr_type);return isNaN(o)?0:o}get is_vr_machine(){return this.isVrLive?this.isMutiVr?this.isInVrView?1:0:1:0}get is_host_camera(){return this.isMutiVr?this.isInVrView?0:1:1}get is_multi_camera_mode_on(){return this.isMutiVr?1:0}get is_original_vr(){return this.isMutiVr?0:1}get gyroscope_state(){return this.isStableView?"off":"on"}get anchorClientInfo(){var e,t,i,n,o,r,l;let a=null===(l=this.store)||void 0===l?void 0:null===(r=l.roomStore)||void 0===r?void 0:null===(o=r.roomInfo)||void 0===o?void 0:null===(n=o.room)||void 0===n?void 0:null===(i=n.stream_url)||void 0===i?void 0:null===(t=i.extra)||void 0===t?void 0:null===(e=t.anchor_client_info)||void 0===e?void 0:e.custom_info;try{let e=JSON.parse(a);return{projectionType:(null==e?void 0:e.projection_model)||"ERP",three180:null==e||!e.viewing_angle||180===Number(null==e?void 0:e.viewing_angle)}}catch(e){return{projectionType:"ERP",three180:!0}}}getCommonEventParams(){return{is_original_vr:this.is_original_vr,is_multi_camera_mode_on:this.is_multi_camera_mode_on,is_host_camera:this.is_host_camera,is_vr_machine:this.is_vr_machine,vr_type:this.vr_type}}constructor(e){super(),(0,ea._)(this,"isStableView",!1),(0,ea._)(this,"isImmersive",!1),(0,ea._)(this,"isInVrView",!1),(0,ea._)(this,"store",void 0),(0,ea._)(this,"vrRotate",0),(0,ea._)(this,"resetView",0),(0,ea._)(this,"makeObservable",()=>{(0,ed.makeObservable)(this,{isVrLive:ed.computed,isStableView:ed.observable,setIsStableView:ed.action,isImmersive:ed.observable,setIsImmersive:ed.action,isInVrView:ed.observable,setIsInVrView:ed.action,isMutiVr:ed.computed,vr_type:ed.computed,is_vr_machine:ed.computed,is_host_camera:ed.computed,is_multi_camera_mode_on:ed.computed,is_original_vr:ed.computed,vrRotate:ed.observable,resetView:ed.observable,setVrRotate:ed.action})}),(0,ea._)(this,"setResetView",()=>{this.resetView=this.resetView+1}),(0,ea._)(this,"setVrRotate",e=>{this.vrRotate=e}),(0,ea._)(this,"setIsInVrView",e=>{this.isInVrView=e}),(0,ea._)(this,"setIsImmersive",e=>{this.isImmersive=e}),(0,ea._)(this,"setIsStableView",e=>{this.isStableView=e});this.makeObservable(),this.store=e}}(0,er.DT)(es.s);let ts=["appStore","userStore","homeStore","roomStore","layoutStore","streamStore","cameraStore","paidLiveStore","detailExtra"];class tu{constructor(){(0,ea._)(this,"appStore",new ey.Z),(0,ea._)(this,"userStore",new ec),(0,ea._)(this,"homeStore",new eP),(0,ea._)(this,"roomStore",new eE(this)),(0,ea._)(this,"linkmicStore",new eb.ZP(this)),(0,ea._)(this,"giftStore",new ew),(0,ea._)(this,"propStore",new eT.Z),(0,ea._)(this,"pkStore",new ek),(0,ea._)(this,"audienceStore",new ex),(0,ea._)(this,"fansClubStore",new eA),(0,ea._)(this,"layoutStore",new eO.Z),(0,ea._)(this,"streamStore",new eM),(0,ea._)(this,"cameraStore",new eq),(0,ea._)(this,"hourRankListStore",new eF),(0,ea._)(this,"feedStore",new eD),(0,ea._)(this,"singletonStore",new eW),(0,ea._)(this,"hybridStore",new eQ),(0,ea._)(this,"eventStore",new e$.Z(this)),(0,ea._)(this,"paidLiveStore",new eJ.ZP),(0,ea._)(this,"lotteryStore",new ez),(0,ea._)(this,"rechargeStore",new eX),(0,ea._)(this,"ecomStore",new e5),(0,ea._)(this,"activityIndicatorStore",new e1),(0,ea._)(this,"redpacketStore",new e2),(0,ea._)(this,"shareStore",new e3),(0,ea._)(this,"vipStore",new e6),(0,ea._)(this,"giftGuideStore",new e4),(0,ea._)(this,"detailExtra",new e9),(0,ea._)(this,"rightPanelStore",new ti(this.activityIndicatorStore)),(0,ea._)(this,"playerStore",new tr),(0,ea._)(this,"chatStore",new tl),(0,ea._)(this,"vrStore",new ta(this)),(0,ea._)(this,"hydrate",e=>{ts.forEach(t=>{this[t].hydrate(e[t])})}),(0,ea._)(this,"reset",e=>{var t,i;Object.entries(this).filter(e=>{let[t]=e;return/Store$/.test(t)}).filter(t=>{let[i]=t;return!Array.isArray(e)||e.indexOf(i)>=0}).forEach(e=>{let[t,i]=e;(null==i?void 0:i.reset)&&(null==i||i.reset()),(null==i?void 0:i.resetStore)&&(null==i||i.resetStore())}),(null===(t=this.detailExtra)||void 0===t?void 0:t.reset)&&(null===(i=this.detailExtra)||void 0===i||i.reset())})}}var td=i("705686"),tc=i("910485"),tm=function(e){let{websocketKey:t}=e,{singletonStore:{message:i}}=(0,J.o)();return(0,x.C)(()=>{if(t)null==i||i.setWebsocketKey(t);else{let e=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"message_websocket_params"}).then(e=>{null==i||i.setWebsocketKey(e)}).catch(i=>{t>1&&e(t-1)})};e(2)}},[]),(0,tc.q)({message:i,socketData:t}),(0,s.jsx)(s.Fragment,{})},t_=i("620923"),tv=i("714492"),th=i("821025");i("981168");var tf=i("854038");let tg=u.createContext({}),tp=e=>(0,s.jsx)(tg.Provider,{value:e.value,children:e.children}),tI=()=>u.useContext(tg),tE=(e,t)=>(tf.Z.setLayout({name:e,id:e}),(0,u.memo)(i=>{let{className:n="",style:o={},children:r}=i,l=tf.Z.getComponent(e),a=tI(),d=l.filter(e=>e.location===tf.h.Before).sort((e,t)=>e.index-t.index),c=l.filter(e=>e.location===tf.h.After).sort((e,t)=>e.index-t.index),m=(0,u.useRef)(null);return u.useEffect(()=>{let e=m.current;return()=>{try{null==e||e.remove()}catch(e){}}},[]),(0,s.jsxs)("div",{className:n,style:(0,H._)((0,w._)({},o),{zIndex:t}),ref:m,id:e,children:[d.map(e=>(0,s.jsx)(u.Fragment,{children:(0,s.jsx)(e.Component,(0,w._)({},a))},e.id)),r,c.map(e=>(0,s.jsx)(u.Fragment,{children:(0,s.jsx)(e.Component,(0,w._)({},a))},e.id))]})})),ty=tE(th.t.ContainerBackgroundLayout,th.W.ContainerBackgroundLayout),tP=tE(th.t.LeftBackgroundLayout,th.W.LeftBackgroundLayout),tb=tE(th.t.HeaderLayout,th.W.HeaderLayout),tL=tE(th.t.HeaderLeftLayout,th.W.HeaderLeftLayout),tS=tE(th.t.HeaderRightLayout,th.W.HeaderRightLayout),tC=tE(th.t.PlayerLayout,th.W.PlayerLayout),tN=tE(th.t.BottomLayout,th.W.BottomLayout),tw=tE(th.t.RightPanelLayout,th.W.RightPanelLayout),tT=tE(th.t.RightBackgroundLayout,th.W.RightBackgroundLayout);var tR={root:"xX64ssyI",enlargeDynamicBackground:"zVq63nJQ",left:"wr2z1_Yc",chatroomPanelContainer:"p2xWIp7e",isClient:"bGsQ7hZ_",fullScreen:"S4P53YuT",container:"kVZKWoWC",containerOpt:"OmJSZtrz",right:"NOn14SxG",fold:"T_WBX51p",header:"C3EJnNR_",playerContainer:"sts39Cmk",isImmersive:"qAoSseHO"},tk=i("123881");let tx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i="";for(let n=0;n<e;n++)i+=t.charAt(Math.floor(Math.random()*t.length));return i};var tA=i("259898"),tO=i("81947");i("675373");var tM=i("861519"),tF=i("443737"),tD=i("338426");let tj=(0,tF.n)((0,tD.ZP)(()=>i.e("10371").then(i.bind(i,918246)),{ssr:!1}),{name:tO.l.EnterAndLeave,renderWhen:tM._.LivingInit}),tG=(0,tF.n)((0,tD.ZP)(()=>i.e("96605").then(i.bind(i,415922)),{ssr:!1}),{name:tO.l.ForceLoginRecorder,renderWhen:tM._.FirstFrame});var tU=(0,tF.n)((0,tD.ZP)(()=>i.e("78939").then(i.bind(i,937942)),{ssr:!1}),{name:tO.l.StreamCompute,renderWhen:tM._.LivingInit}),tV=i("164371"),tK=()=>{let{giftStore:{setGiftTccStatus:e,setHoverGiftWhiteList:t,setDiyPluginIdWhiteList:i,setGiftBuffIdWhiteList:n,setDiyCardNameWhiteList:o,setHoverGiftWhiteListV2:r,setWanxiangGiftSwitch:l,setForceShowBuffList:a,setStarGuardEffectWhiteList:s,setMaxGiftTrayCount:d,setGiftBgEffectMap:c,setGiftTrayConfig:m},audienceStore:{setAudienceTccStatus:_},pkStore:{setPKTccStatus:v},fansClubStore:{setFansClubTccStatus:f},linkmicStore:{setChoosePeopleShowTCC:g},feedStore:{isActive:p},roomStore:{setLongtouchShowTcc:I,setUsePageUrlBannerId:E,setPollingFrequency:y}}=(0,J.o)(),P=(0,tV.kF)();(0,u.useEffect)(()=>{try{(async()=>{let u=await (0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"gift_config"}),_=(null==P?void 0:P.XTTENV)?u.ppe_pc_live_backup:u,v=ev()(_,"gift_status",!1),f=ev()(_,"hover_gift_white_list",[]),g=ev()(_,"hover_gift_white_list_v2",[]),p=ev()(_,"diy_plugin_id_white_list",[]),I=ev()(_,"gift_buff_id_white_list",[]),E=ev()(_,"diy_card_name_white_list",[]),y=ev()(_,"wanxiang_gift_switch",0),b=ev()(_,"force_show_buff_list",[]),L=ev()(_,"gift_bg_effect_map",{}),S=ev()(_,"gift_tray_config",{}),C=ev()(_,"star_guard_effect_white_list",[]),N=ev()(_,"gift_tray_max_count",Number.MAX_SAFE_INTEGER);t(f),r(g),i(p),o(E),n(I),l(y),a(b),s(C),d(N),e(v),c(L),m(S)})()}catch(e){}},[p]),(0,u.useEffect)(()=>{try{(async()=>{let e=await (0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"pk_config"}),t=ev()(e,"pk_status",!1);v(t)})()}catch(e){}},[p]),(0,u.useEffect)(()=>{try{(async()=>{let e=await (0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"audience_config"}),t=ev()(e,"audience_status",!1);_(t)})()}catch(e){}},[p]),(0,u.useEffect)(()=>{try{(async()=>{let e=await (0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"fans_club_config"}),t=ev()(e,"fans_status",!1);f(t)})()}catch(e){}},[p]),(0,u.useEffect)(()=>{try{(async()=>{let e=await (0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"choose_peoples_info"}),t=ev()(e,"choose_people_show",!1);g(t)})()}catch(e){}},[p]),(0,u.useEffect)(()=>{try{(async()=>{let e=await (0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"banner"});I(ev()(e,"long_touch.long_touch_show",!1)),E(ev()(e,"long_touch.use_page_url_banner_id",[]))})()}catch(e){}},[p]),(0,u.useEffect)(()=>{try{(async()=>{let e=await (0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"polling_frequency"});y(e)})()}catch(e){}},[p])},tY=i("456147"),tZ=i("126036"),tB=i("83188"),tH=i("114682"),tW=i("291575"),tQ=i("192109"),t$=i("551572"),tq=()=>{let{linkmicStore:{setPlayModes:e,setImLinkMicLayout:t,setUiLayout:i,setFunctionType2:n,linkRoomType:o,setIsPlayModeNotSupport:r,layoutConfig:l,setLayoutConfig:a},singletonStore:{message:s},roomStore:{roomInfo:d,setNotSupportReason:c},userStore:{userInfo:m}}=(0,J.o)();(0,u.useEffect)(()=>{let o=ev()(d,"room.linker_detail.linker_play_modes",[]),r=ev()(d,"room.linker_detail.linker_ui_layout");e(o),i(r),(0,t$.D)().includes(Number(r))?t((0,tB.M2)(r)):(0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"linkmic_layout_config"}).then(e=>{e&&(a(e),t((0,tB.M2)(r,e)))}),n(ev()(d,"room.linker_detail.function_type"))},[d,t,n,e]);let _=(0,u.useCallback)((e,t,i)=>{(null==m?void 0:m.isReady)&&(0,tH.Qz)({anchor_id:ev()(d,"anchor.id_str",""),room_id:null==d?void 0:d.roomId,user_id:null==m?void 0:m.id_str,scene:e,playmode:t,ui_layout:i})},[d,m]);(0,u.useEffect)(()=>{if(!o)return null==s?void 0:s.on("LinkMicMethod",e=>{e.forEach(e=>{let{method:n,payload:o}=e;if(!n||!o)return;let a=Number(o.message_type);if("WebcastLinkMicMethod"===n&&a===tQ.iM.TYPE_TURNON){let{ui_layout:e}=o;i(e);let n=(0,tB.M2)(e,l);n&&t(n)}if(a===tQ.iM.TYPE_TURNON){let{scene:e,play_modes:t=[],ui_layout:i}=o;if(e){let n=Number(e);(n===tW.xs.Scene_KTV||n===tW.xs.Scene_VideoKTV)&&(r(!0),_(n,t,i),c(em.Ly.MULTI_KTV))}}})})},[o,l,t,r,c])},tJ=e=>{let{roomStore:{roomInfo:t},cameraStore:{cameraInfo:i},singletonStore:{message:n},feedStore:{isActive:o}}=(0,J.o)(),{roomId:r=""}=t,{groupId:l,cameraId:a}=i||{},s=(0,u.useRef)({}),d=(0,u.useRef)(e);d.current=e;let c=(0,u.useCallback)(()=>{if(!s.current[r]&&!!o){if(!r){n.stop(),eU.kg.info("stop by nil roomId");return}if(d.current){null==n||n.stop();return}n.start((0,w._)({room_id:r},a&&{sub_room_id:a},l&&{group_id:l})),s.current[r]=!0}},[r,l,a,n,o]);return(0,u.useEffect)(()=>{if(o){var e,t;let i=0;(null===(e=navigator)||void 0===e?void 0:e.hardwareConcurrency)<=4&&(null===(t=navigator)||void 0===t?void 0:t.deviceMemory)<=2&&(i=9500);let o=s.current;return setTimeout(()=>{r&&c()},i),()=>{r&&(null==n||n.stop(),o[r]=!1)}}},[r,l,a,c,e,n,o]),(0,u.useEffect)(()=>{if(!!r){if(d.current){null==n||n.stop();return}s.current[r]&&(null==n||n.pause(),s.current[r]=!1)}},[r,l,a,n]),c},tz=i("770989"),tX=i("255751"),t0=i("530223"),t1=i("159581"),t2=i("63746");let t5=(0,tF.n)(()=>{let{linkmicStore:{dressListAll:e,setDressListAll:t},roomStore:{roomInfo:i}}=(0,J.o)();return(0,u.useEffect)(()=>{let n=[em.ke.MEDIA,em.ke.VS],o=ev()(i,"room.live_room_mode","");(e||(null==e?void 0:e.length)===0)&&!n.includes(o)&&(null==i?void 0:i.roomId)&&(0,tY.VT)({}).then(e=>{let{data:{status_code:i,data:n}}=e;0===i&&(null==n?void 0:n.dress_list)&&t(null==n?void 0:n.dress_list)})},[i]),null},{name:tO.l.GetDressList,renderWhen:tM._.FirstFrame,taskPriority:"background"});var t3=(0,er.Pi)(()=>{var e;let{roomStore:{roomInfo:t,live_room_mode:i,setIsVerified:n,isAppOnly:o,isMedia:r,LandscapeChat:l,setDisableLiveRecommendOnEnd:a,setIsDanmakuFeatureOn:d},linkmicStore:{setLiveRoomMode:m},userStore:{userInfo:_},rechargeStore:{setRechargeAuthStatus:v},fansClubStore:{setFansClubAuthStatus:f},giftStore:{setGiftAuthStatus:g,setHandleRecharge:p},singletonStore:{playerHandler:I},streamStore:{streamInfoFromLiving:E},playerStore:{isLoadedData:y}}=(0,J.o)(),P=ev()(t,"room.status"),{url:b}=E;(0,u.useEffect)(()=>{d(!r&&l!==em.xW.OFF)},[r,l]),tK(),tq();let L=tJ(o),S=(0,u.useCallback)(()=>n(!0),[]);(0,tZ.ZP)({apis:tZ.w5.IM_API,roomId:null!==(e=t.roomId)&&void 0!==e?e:"",saveVerify:S});let{handleRecharge:C}=(0,tX.Z)({isInit:!0,processAfterFirstFrame:!0}),w=(0,c.a)(),T=(0,u.useMemo)(()=>/iframe/.test(w.pathname),[w]);(0,u.useEffect)(()=>{let e=ev()(t,"room.room_auth.Gift");!T&&t.roomId&&g(e)},[t,T]),(0,u.useEffect)(()=>{if(m(i),i===em.ke.MEDIA)return(0,t2.DP)(!0),()=>{(0,t2.DP)(!1)}},[i,m]),(0,u.useEffect)(()=>{y&&L()},[L,y]),(0,u.useEffect)(()=>{o&&(null==_?void 0:_.isReady)&&(0,tH.Qz)({anchor_id:ev()(t,"anchor.id_str",""),room_id:(null==t?void 0:t.roomId)||"",user_id:(null==_?void 0:_.id_str)||"",enter_mode:null==t?void 0:t.enter_mode,scene:Number(Object.keys(ev()(t,"room.linker_map",{}))),playmode:ev()(t,"room.linker_detail.linker_play_modes",[]),ui_layout:ev()(t,"room.linker_detail.linker_ui_layout")})},[o,t,_]),(0,u.useEffect)(()=>{try{(async()=>{var e;let t=await N.invoke("GET_IS_MAS"),i=await (null===(e=tz.a.canUseIap)||void 0===e?void 0:e.call(tz.a)),n=ev()(t,"data");!(n&&!i)&&v(!0)})()}catch(e){v(!0)}},[]),(0,u.useEffect)(()=>{if(null==t?void 0:t.roomId){let e=ev()(t,"room.live_room_mode",""),i=!0;(e===em.ke.MEDIA||e===em.ke.VS)&&(i=!1),f(i)}},[t]);let[R,k]=(0,u.useState)();(0,u.useEffect)(()=>{(0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"liveShareWhiteList"}).then(e=>{k(e)})},[]);let x=(0,t0.k)(),A=(0,u.useMemo)(()=>{let e=null;if(R&&(e=R[null==x?void 0:x.XTTENV]?R[null==x?void 0:x.XTTENV]:R),!e)return!1;let{whiteList:i=[]}=e;return i.some(e=>String(e)===String(ev()(t,"anchor.id_str"))||String(e)===String(t.roomId)||String(e)===String(t.web_rid))},[R,t,x]);return(0,u.useEffect)(()=>{a(A)},[A]),(0,u.useEffect)(()=>((null==t?void 0:t.web_rid)&&b&&(null==I||I.setCurrentRoom(t,b),null==I||I.startHeartDetect()),()=>{null==I||I.stopHeartDetect()}),[t,b]),(0,u.useEffect)(()=>{p(C)},[C]),(0,u.useEffect)(()=>{if(!!(null==t?void 0:t.roomId))return(0,t1.ov)(null==t?void 0:t.roomId)},[null==t?void 0:t.roomId]),(0,u.useEffect)(()=>{P===em.LV.END&&((0,to.q)("ISLAND_SYNC_HEADER"),(0,to.q)("ISLAND_LAYOUT_NAVIGATION"))},[P]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(t5,{})})}),t6=(0,tF.n)((0,tD.ZP)(()=>i.e("86354").then(i.bind(i,805834)),{ssr:!1}),{name:tO.l.RoomMessageConsume,renderWhen:tM._.LivingInit}),t8=(0,tF.n)((0,tD.ZP)(()=>i.e("15403").then(i.bind(i,466328)),{ssr:!1}),{name:tO.l.StreamCompute,renderWhen:tM._.LivingInit}),t7=(0,tF.n)((0,tD.ZP)(()=>i.e("2091").then(i.bind(i,476839)),{ssr:!1}),{name:tO.l.RoomEvent,renderWhen:tM._.LivingInit}),t4=(0,tF.n)((0,tD.ZP)(()=>i.e("10371").then(i.bind(i,597938)),{ssr:!1}),{name:tO.l.PlayerControl,renderWhen:tM._.FirstFrame,taskPriority:"user-blocking"});let t9=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tj,{}),(0,s.jsx)(tG,{}),(0,s.jsx)(tU,{}),(0,s.jsx)(t3,{}),(0,s.jsx)(t6,{}),(0,s.jsx)(t8,{}),(0,s.jsx)(t7,{}),(0,s.jsx)(t4,{})]});var ie=(0,tA.OV)({Component:t9,layoutName:th.t.PlayerLayout,ComponentName:tO.l.RoomLogic,index:0}),it=i("581708"),ii=i("629582"),io=i("468763"),ir=i("312065");let il=tE(th.t.LinkMicBackgroundLayout,th.W.LinkMicBackgroundLayout),ia=tE(th.t.LinkMicLayout,th.W.LinkMicLayout),is=tE(th.t.PlayerControlLayout,th.W.PlayerControlLayout),iu=tE(th.t.LinkMicAnimationLayout,th.W.LinkMicAnimationLayout),id=tE(th.t.LikeLayout,th.W.LikeLayout),ic=tE(th.t.GiftEffectLayout,th.W.GiftEffectLayout),im=tE(th.t.GiftTrayLayout,th.W.GiftTrayLayout),i_=tE(th.t.GiftMenuLayout,th.W.GiftMenuLayout),iv=tE(th.t.DanmakuLayout,th.W.DanmakuLayout),ih=tE(th.t.TipsLayout,th.W.TipsLayout),ig=tE(th.t.EcmoCardLayout,th.W.EcmoCardLayout),ip=tE(th.t.ShortTouchLayout,th.W.ShortTouchLayout),iI=tE(th.t.ServiceCenterLayout,th.W.ServiceCenterLayout),iE=tE(th.t.WaterMarkLayout,th.W.WaterMarkLayout);var iy=i("464170"),iP=i("918056"),ib={livingPlayer:"MR5iyRn7",hideLoadingAndControl:"KnGa6bTq",appOnly:"j54OJYbU",layoutCommon:"O9ENko9T",layoutLike:"HWXkuQI4",basicPlayerPip:"ujvi6Ali",isImmersive:"Lq7W1XKA"},iL=i("999108"),iS=i("26896"),iC=i("554425"),iN=i("786807"),iw=i("240026"),iT=i("735503");let iR=()=>{let e=u.useMemo(eG.tq,[]),{streamStore:t,roomStore:i}=(0,J.o)(),n=(0,iw.T)(),{disabledH265:o,setStreamInfoFromLiving:r,setWatchingFinished:l}=t||{},{isPullDataExsit:a}=i||{},{stream:s,common:d,options:c}=(0,iC.kA)({disabledH265:o||e,doubleScreenAB:!0,isPullDataExsit:a}),m=(0,iT.dM)(c),{openIntercepted:_,interceptedQuality:v,openTryWatching:h,qualities:f,startQuality:g,bitrate:p}=(0,iN.Z)({stream:s,defaultQuality:m}),I=(0,iT.AH)(),E=u.useMemo(()=>ev()(d,"secret_key",""),[d]),{url:y,lowUrl:P,backupUrl:b,H264Url:L}=(0,iC.le)({stream:s,startQuality:g}),S=(0,u.useMemo)(()=>{let e=[];try{e=Object.keys(s||{}).filter(e=>"ao"!==e).map(e=>{let t;try{t=JSON.parse(s[e].main.sdk_params)}catch(e){t={resolution:"0x0"}}return{quality:e,resolution:t.resolution,url:(0,eV.uC)(s[e].main.flv)}})}catch(t){e=[]}let t={resolutions:e,dividing:I,useArea:(null==n?void 0:n.liveUseArea)===1,useScore:I>0,useLongFirstframe:(null==n?void 0:n.liveUseFirstFrame)===1};return(0,H._)((0,w._)({},t),{switchUrl:y,lowUrl:P})},[s,n]);return(0,u.useEffect)(()=>{h&&l(!1)},[h]),(0,u.useEffect)(()=>{r({stream:s,common:d,options:c,openIntercepted:_,interceptedQuality:v,openTryWatching:h,qualities:f,startQuality:g,bitrate:p,secret_key:E,dividing:I,resolutionsel:S,url:y,lowUrl:P})},[s,d,c,_,v,h,f,g,p,E,I,S,y,P]),{stream:s,common:d,options:c,openIntercepted:_,interceptedQuality:v,openTryWatching:h,qualities:f,startQuality:g,bitrate:p,secret_key:E,dividing:I,resolutionsel:S,url:y,lowUrl:P,backupUrl:b,H264Url:L}};var ik=i("756919"),ix=i("485019"),iA=i("886251"),iO=i("729532"),iM=i("889743"),iF=i("604348"),iD=i("32639"),ij=i("948375");let iG=()=>{setTimeout(()=>{eo.emit(eo.EVENT.initImSDK)},100),setTimeout(()=>{eo.emit(eo.EVENT.initNoticeSDK)},500)},iU=e=>{null===iM.sA||void 0===iM.sA||iM.sA.liveUrlLoadEnd(e),eo.emit(eo.EVENT.afterVideoPlayed),iG()};var iV=i("392323"),iK=i("683354"),iY=i("740531"),iZ=i("160046");let iB=()=>{let{userStore:{setPlayerUserHandlePause:e},playerStore:{playerInstance:t,setIsPlay:i,isPlay:n,setIsPlayed:o,setIsLoadedData:r,isFullScreen:l,setIsFullScreen:a,setIsTheaterOn:s,isTheaterOn:d,playerLoggerInstance:c},singletonStore:{playerHandler:m},roomStore:{roomInfo:v,roomStatus:h,setFoldChatroom:f,setIsShowRefreshPage:g},streamStore:{streamInfoFromLiving:p,isH265:I,setIsH265Error:E,setVideoInit:y,lowH265:P,setUseBackUp:b,isH265Error:L,useBackUp:S},eventStore:{tabEvent:C,basicEvent:N}}=(0,J.o)(),w=(0,iw.T)(),T=u.useRef(0),R=ev()(v,"room.id_str"),{url:k}=p,x=u.useCallback(()=>(null==m||m.setCurrentRoom(v,k),null==m||m.setUrlAutoChange(!1),t&&(null==m||m.setPlayer(t)),h!==em.LV.END&&h!==em.LV.PAUSE&&!0),[v,k,h,t,m]),A=(0,u.useRef)(0),O=(0,u.useRef)(!1),[M,F]=(0,u.useState)(!1),D=u.useCallback(()=>{A.current&&Date.now()-A.current>200&&A.current&&O.current&&eU.ZP.event(`[${eB.Tn.Error}]${eB.Mo.LiveBasicPlayerWaiting}`,{room_id:ev()(v,"roomId"),url:k,room_status:h,is_client:(0,eG.DT)(),type:"living"})},[v,h,k]),{setLoadStartTime:j,setTtfbTime:G,setStreamReceived:U}=(0,iK.Z)({from:"living",player:t,isRoomEnd:h===em.LV.END,eventParams:N,isH265:I}),V=(0,ij.Z)(e=>{G(e)}),K=(0,ij.Z)(()=>{j(),iO.z.markOnce("living_player_load_start")}),Y=(0,ij.Z)(e=>{iU(e),U(),"number"!=typeof e&&(e=void 0),iO.z.markOnce("living_player_loaded_data"),(0,iY.j)({roomId:R,type:"first_frame",duration:e}),r(!0),O.current=!1}),Z=(0,ij.Z)(()=>{if(g(!1),T.current=0,x()){let e=ev()(v,"roomId");null==m||m.handlePlaying(e),D()}}),B=(0,ij.Z)(()=>{if(x()){let e=ev()(v,"roomId");null==m||m.handleWaiting(e),!O.current&&(A.current=Date.now(),O.current=!0)}}),H=(0,ij.Z)(()=>{if(e(!0),o(!0),y&&y(!0),i(n+1),(0,iV.yr)({isLive:1}),M?null==C||C.liveStartEvent({event_page:"live_detail",if_mini_window:(0,ik.OL)()}):F(!0),x()){let e=ev()(v,"roomId");null==m||m.handlePlay(e)}}),W=(0,ij.Z)(()=>{if(e(!1),A.current=0,null==C||C.livePauseEvent({event_page:"live_detail",if_mini_window:(0,ik.OL)()}),x()){let e=ev()(v,"roomId");null==m||m.handlePause(e)}}),Q=(0,ij.Z)(e=>{!e&&iF.oh&&eo.emit(eo.EVENT.exitClientFullscreen),!l&&s(!1),a(e)}),$=()=>{try{if(location.pathname.indexOf("root/live")>=0)return"root_live";if(location.pathname.indexOf("follow/live")>=0)return"follow_live";if(location.pathname.indexOf("follow")>=0)return"follow";if(location.search.indexOf("recommend=1")>=0)return"recommend";if("www.douyin.com"===location.host)return"main";if("live.douyin.com"===location.host)return"live";return"other"}catch(e){return"error"}},q=e=>{try{return JSON.stringify(e)}catch(e){return"err"}},z=(0,ij.Z)(e=>{if(iU(),x()){var i;let n=(null==e?void 0:null===(i=e.player)||void 0===i?void 0:i.src)||(null==t?void 0:t.src);if(!n)return;let o=ev()(v,"roomId");if(I||P&&((null==n?void 0:n.includes("ld5"))||(null==n?void 0:n.includes("sd5")))&&!L){E(!0),null==c||c.updateExt({h265_degrade:1}),setTimeout(()=>{var i,n,o,r,l;null==t||t.retry(),null===eU.ZP||void 0===eU.ZP||null===(l=eU.ZP.event)||void 0===l||l.call(eU.ZP,"player_relegate_url",{room_id:ev()(v,"roomId"),url:null==t?void 0:null===(o=t.plugins)||void 0===o?void 0:null===(n=o.flvlive)||void 0===n?void 0:null===(i=n.loader)||void 0===i?void 0:i.finnalUrl,is_client:(0,eG.DT)(),host:null===(r=location)||void 0===r?void 0:r.host,pathType:(()=>{try{if(location.pathname.indexOf("root/live")>=0)return"root_live";if(location.pathname.indexOf("follow/live")>=0)return"follow_live";if(location.pathname.indexOf("follow")>=0)return"follow";if(location.search.indexOf("recommend=1")>=0)return"recommend";if("www.douyin.com"===location.host)return"main";if("live.douyin.com"===location.host)return"live";return"other"}catch(e){return"error"}})(),isNewProject:1,code:(null==e?void 0:e.httpCode)||(null==e?void 0:e.code),info:null==e?void 0:e.message,detail:(()=>{try{return JSON.stringify(e)}catch(e){return"err"}})()})},1e3);return}S?g(!0):b(!0);null==m||m.handleError(o,e)}}),{errorHandle:X}=(0,iZ.o)({playerInstance:t,playerLoggerInstance:c,streamInfo:{isH265:I,isH265Error:L,setIsH265Error:E,playerUrl:k,useBackUp:S,setUseBackUp:b},isRoomError:x,onH265Degrade:e=>{setTimeout(()=>{var i,n,o,r,l;null===eU.ZP||void 0===eU.ZP||null===(l=eU.ZP.event)||void 0===l||l.call(eU.ZP,"player_relegate_url",{room_id:ev()(v,"roomId"),url:null==t?void 0:null===(o=t.plugins)||void 0===o?void 0:null===(n=o.flvlive)||void 0===n?void 0:null===(i=n.loader)||void 0===i?void 0:i.finnalUrl,is_client:(0,eG.DT)(),host:null===(r=location)||void 0===r?void 0:r.host,pathType:$(),isNewProject:1,code:(null==e?void 0:e.httpCode)||(null==e?void 0:e.code),info:null==e?void 0:e.message,detail:q(e)})},1e3)},onUnablePlay:()=>{g(!0)},onError:e=>{null==iU||iU(),null==m||m.handleError(R,e)},disable:!(0,_.getInNewProjectPreviewABWithoutStoreCheck)(w)}),ee=(0,ij.Z)(()=>{if(T.current>1){null==g||g(!0);return}if(h===em.LV.LIVING&&(0,_.getInLiveOOMFixAB)()&&T.current<=1){T.current=T.current+1,null==t||t.retry();return}if(h===em.LV.LIVING){null==t||t.retry();return}if(x()){let e=ev()(v,"roomId");null==m||m.handleEnded(e)}}),et=(0,u.useMemo)(()=>({[ii.FP.PLAY]:H,[ii.FP.PAUSE]:W,[ii.FP.FULLSCREEN_CHANGE]:Q,[ii.FP.ERROR]:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,_.getInNewProjectPreviewABWithoutStoreCheck)(w)?X(...t):z(...t)},[ii.FP.ENDED]:ee,[ii.FP.WAITING]:B,[ii.FP.PLAYING]:Z,[ii.FP.LOADEDDATA]:Y,[ii.FP.LOADSTART]:K,[ii.FP.TTFB]:V}),[H,W,Q,X,z,ee,Z,B,Y,K,V]);(0,u.useEffect)(()=>{if((0,iF.oh)()&&t){let{fullscreenTarget:e}=t.config.baseConfig,i=eo.listen(eo.EVENT.ControlLiveFullscreenByClient,i=>{let{isFull:n}=i;n?((0,iD.a)(),(0,iF.GP)(()=>{null==t||t.getFullscreen(e)})):null==t||t.exitFullscreen()});return t.on(ii.FP.FULLSCREEN_CHANGE,e=>{eo.emit(eo.EVENT.ControlLiveFullscreenByClient,{isFull:e})}),()=>{null==i||i()}}},[t]),(0,u.useEffect)(()=>(!l&&!d&&f(!1),l||d?document.body.classList.add("xgplayer-fullscreen-parent"):document.body.classList.remove("xgplayer-fullscreen-parent"),()=>{document.body.classList.remove("xgplayer-fullscreen-parent")}),[l,d]);let ei=u.useRef(!0);return(0,u.useEffect)(()=>{var e,i;x()&&k&&(null==t?void 0:null===(e=t._core)||void 0===e?void 0:e._errorInfo)&&ei.current&&I&&(ei.current=!1,z(null==t?void 0:null===(i=t._core)||void 0===i?void 0:i._errorInfo))},[x,k,t,I]),et};var iH=i("296013"),iW=i("403300");let iQ=(0,u.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,H._)((0,w._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h13a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2h-13zm10 11h-1.501v2H20.5a1 1 0 0 0 1-1v-2.5h-2V19zm-7 0v-1.5h-2V20a1 1 0 0 0 1 1h2.499v-2H12.5zm0-6h1.499v-2H11.5a1 1 0 0 0-1 1v2.5h2V13zm7 0h-1.501v-2H20.5a1 1 0 0 1 1 1v2.5h-2V13z",fill:"#fff"})})));var i$=i("172624"),iq=i("811796"),iJ=i("155067"),iz=i("623926"),iX=i("30321");let i0=()=>{var e,t;let i=(0,c.a)(),n=(0,iX.Nr)(i.pathname),o=null===v.Z||void 0===v.Z?void 0:null===(e=v.Z.getPlayerInstance)||void 0===e?void 0:e.call(v.Z),r=null===v.Z||void 0===v.Z?void 0:null===(t=v.Z.getLoggerInstance)||void 0===t?void 0:t.call(v.Z);return{reusePlayer:!!(n&&o&&r),playerInstance:o,loggerInstance:r}};var i1=i("393265"),i2=i("797973");let i5=()=>{let{player:e}=(0,i1.n)(),{playerStore:{isTheaterOn:t,isFullScreen:i}}=(0,J.o)(),n=(0,u.useRef)(!1),o=(0,i2.Z)(t=>{var i,n,o,r;let{isLock:l}=t,a=null===(r=document)||void 0===r?void 0:null===(o=r.activeElement)||void 0===o?void 0:null===(n=o.classList)||void 0===n?void 0:null===(i=n.contains)||void 0===i?void 0:i.call(n,eI.nk);if(!!l||!a)null==e||e.focus({isLock:l})});return(0,u.useEffect)(()=>{let t=()=>{n.current=!0,o({isLock:!0})};null==e||e.on(ii.FP.PAUSE,t);let i=()=>{n.current=!1,o({isLock:!1})};return null==e||e.on(ii.FP.PLAY,i),()=>{null==e||e.off(ii.FP.PLAY,t),null==e||e.off("play",i)}},[e]),(0,u.useEffect)(()=>{if(e){var t;let i=null==e?void 0:null===(t=e.root)||void 0===t?void 0:t.querySelector(".douyin-player-controls");if(i){let e=()=>{if(!n.current)o({isLock:!0})},t=()=>{if(!n.current)o({isLock:!1})};return i.addEventListener("mouseenter",e),i.addEventListener("mouseleave",t),()=>{i.removeEventListener("mouseenter",e),i.removeEventListener("mouseleave",t)}}}},[e]),(0,u.useEffect)(()=>{if((0,eg.G6)()&&(i||t)){let e=document.querySelector("#douyin-right-container");if(e)return e.style.paddingTop="0px",()=>{e.style.paddingTop="var(--header-height)"}}},[i,t]),(0,u.useEffect)(()=>{o({isLock:!1}),setTimeout(()=>{try{var t;null===(t=e.root)||void 0===t||t.classList.add("douyin-player-controls-autohide")}catch(e){}},100)},[i,i,e]),null};var i3=i("489231"),i6=i("655631"),i8=i("77711"),i7=i("622307"),i4=i("636032"),i9=(0,er.Pi)(e=>{var t,i,n,o;let{detailPage:r}=e,l=(0,J.o)(),{userStore:{userInfo:a,odin:d,headerUserInfo:m},playerStore:{setPlayerInstance:v,setPlayerLoggerInstance:h,setIsFullScreen:f,isFullScreen:g,setLoggerOptions:p,loggerOptions:I,playerInstance:E,setFullScreenTarget:y,playerLoggerInstance:P,setIsTheaterOn:b},activityIndicatorStore:{setJSBInstance:L},singletonStore:{message:S,setPlayer:C,setLiveContainer:N},rightPanelStore:{playerMargin:T},roomStore:{isDoubleScreen:R,setIsFocus:k,isAppOnly:x,roomInfo:A,playerCoverText:O,coverUrl:M},streamStore:{streamInfoFromLiving:{secret_key:F,bitrate:D},streamData:j},paidLiveStore:{isPaidLive:U},linkmicStore:{linkRoomType:V,functionType2:K},vipStore:{setIsShowVipPanel:Y,vipInfoLoaded:Z},vrStore:{isImmersive:B}}=l,W=(0,i4.$s)(e=>{let{setFullscreen:t}=e;return{setFullscreen:t}}),{cityName:$}=(0,G.Iq)(e=>{let{cityName:t}=e;return{cityName:t}}),{url:q,backupUrl:z,H264Url:X,lowUrl:ee,common:et,startQuality:ei}=iR(),en=(0,u.useMemo)(()=>{},[a.id_str,null==d?void 0:d.user_unique_id]),eo=es.s?void 0:document.body,er=(0,c.a)(),el=(0,u.useMemo)(()=>{(0,iX.Nr)(er.pathname);let e={url:q,_freezeUrl:R||U||(()=>{try{if("undefined"!=typeof window&&window.__cdn_degrade__)return window.__cdn_degrade__=!1,!0}catch(e){return!1}})()?q:"",autoplay:!0,volume:(0,io.T1)(),muted:(0,io.rC)(),fullscreenTarget:eo,worker:{recylable:!1},disconnectTime:5};return F&&(e.decryption={entry:"https://unpkg.byted-static.com/byted/webplayer-extensions/0.0.3/dist/live-decrytion.js",keyStr:F}),en&&(e.volumeWaterMark=en),e},[q,eo,F,en,R,U]);(0,u.useEffect)(()=>{let e=["/root/live","follow/live"].some(e=>er.pathname.includes(e));if((0,iX.Nr)(er.pathname)&&e)return()=>{null==W||W.setFullscreen(!1)}},[er.pathname]);let ea=iB(),eu=(0,u.useMemo)(()=>({controls:{autoHide:!0},CompatibilityFullscreenPlugin:{keyboardCode:"KeyH",position:"top-right",IconExitFullscreen:iW.Z,IconFullscreen:iQ}}),[]),ed=(0,iq.d)(),ec=(0,u.useMemo)(()=>{var e,t,i,n,o,l;let{nickname:a,avatar_thumb:s,id_str:u}=(null==A?void 0:A.anchor)||{},d=(null==A?void 0:null===(t=A.room)||void 0===t?void 0:null===(e=t.linker_detail)||void 0===e?void 0:e.linker_ui_layout)||0,c=null==A?void 0:null===(i=A.web_stream_url)||void 0===i?void 0:i.pull_datas,m=null==ed?void 0:null===(o=ed.request)||void 0===o?void 0:null===(n=o.header)||void 0===n?void 0:n["user-agent"];return{inlinePlayer:r&&q&&!(m?/Safari/.test(m)&&!/Chrome/.test(m):(0,eg.G6)()),isDoubleScreen:R,meta:(()=>{if(c&&Object.keys(c).length>0){var e,t,i,n,o;let r=c[Object.keys(c)[0]];if((null==r?void 0:null===(e=r.extension)||void 0===e?void 0:e.camera_clip)&&(null==r?void 0:null===(t=r.extension)||void 0===t?void 0:t.game_clip)&&(null==r?void 0:null===(i=r.extension)||void 0===i?void 0:i.camera_hidden)===0){let e=(null==r?void 0:null===(n=r.extension)||void 0===n?void 0:n.game_clip)||{},t=(null==r?void 0:null===(o=r.extension)||void 0===o?void 0:o.camera_clip)||{};return{mainPointers:[e.x,e.y,e.w,e.h],miniPointers:[t.x,t.y,t.w,t.h],displayMode:0}}}})(),anchorInfo:{nickname:a,avatar:null==s?void 0:null===(l=s.url_list)||void 0===l?void 0:l[0],id_str:u},roomInfo:{roomId:null==A?void 0:A.roomId,linkerUiLayout:d},inlineEnterOptInfo:{backupUrl:z,H264Url:X,lowUrl:ee}}},[R,A,r,q,z,X,ee]),em=!!(O&&!(O===eI.kx.ANCHOR_BAN&&V)),e_=(0,u.useMemo)(()=>{var e,t,i,n,o,r,l;return(0,H._)((0,w._)({user_id:a.id_str,device_id:null!==(l=null==d?void 0:d.user_unique_id)&&void 0!==l?l:"",scene:ir.C.liveDetail,live_type:ev()(A,"room.live_room_mode",""),definition:ei,is_game:ev()(A,"room.game_data.game_tag_info.is_game",2),is_live_end:em?1:0,is_shopping:!!(null===(t=ev()(A,"room.toolbar_data"))||void 0===t?void 0:null===(e=t.entrance_list)||void 0===e?void 0:e.find(e=>e.component_type===i3.Ls.Cart))},(null===(i=ev()(j,"H265_streamData",void 0))||void 0===i?void 0:i.stream)?{}:{h265_miss:1}),{url:el.url,title:null==A?void 0:null===(n=A.room)||void 0===n?void 0:n.title,baseConfigUrl:(null==E?void 0:null===(r=E.config)||void 0===r?void 0:null===(o=r.baseConfig)||void 0===o?void 0:o.url)||"",originUrl:q||""})},[a.id_str,null==d?void 0:d.user_unique_id,null==A?void 0:null===(t=A.room)||void 0===t?void 0:t.live_room_mode,ei,O,V,em,j,el.url,null==A?void 0:null===(i=A.room)||void 0===i?void 0:i.title,null==E?void 0:null===(o=E.config)||void 0===o?void 0:null===(n=o.baseConfig)||void 0===n?void 0:n.url,q]);(0,u.useEffect)(()=>{p(e_)},[e_]);let eh=(0,tk.bU)(),{reusePlayer:ef,playerInstance:ep,loggerInstance:eE}=i0();(0,u.useEffect)(()=>{let e=new iy.Z(l);Object.freeze(e),L(e),e._fetchSetting(),window.__JSB__=e,window.__landPage_jsb__=e,window.__MESSAGE_INSTANCE__=S,window.__INDICATOR_UTIL__=iP.Qg},[l]),(0,u.useEffect)(()=>{i$.T.reset(),N(new i$.T(l))},[l]),(0,u.useEffect)(()=>{y(eo)},[eo]),(0,u.useEffect)(()=>{var e;(0,iz.X)()&&Z&&(null==m?void 0:m.isLogin)&&(null==A?void 0:null===(e=A.room)||void 0===e?void 0:e.id_str)&&(0,i6.Z)("live")},[Z,null==m?void 0:m.isLogin,A]),(0,u.useEffect)(()=>{x&&((0,to.q)("ISLAND_SYNC_HEADER"),(0,to.q)("ISLAND_LAYOUT_NAVIGATION"),b(!1))},[x]);let ey=(0,_.useInLivePlayerDegradeAB)(),eP=(0,i7.X3)();return x?(0,s.jsx)(iH.Z,{avatar:ev()(A.anchor,"avatar_thumb.url_list[0]",""),qrcode:A.qrcode_url,className:ib.appOnly}):(0,s.jsxs)("div",{className:Q()(ib.livingPlayer,"__livingPlayer__",{[ib.hideLoadingAndControl]:!q,[ib.isImmersive]:B},eP),style:{marginRight:T},id:iA.f+((null==E?void 0:E.playerId)||""),children:[(0,s.jsx)(iL.TY,{className:ib.basicPlayerPip,pipAnchorId:ik.MA.BasicPlayer,placeholder:(0,s.jsx)(iS.InPicturePlaceholder,{}),children:(0,s.jsxs)(it.N,{disableLogger:em,onReady:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];iO.z.markOnce("living_player_ready"),null===iM.sA||void 0===iM.sA||iM.sA.livePlayerInitEnd(...t)},onBeforePlayerInit:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];iO.z.markOnce("living_player_before_player_init"),null===iM.sA||void 0===iM.sA||iM.sA.livePlayerInitStart(...t)},baseConfig:el,pluginsConfig:eu,sessionId:null==et?void 0:et.session_id,secretKey:F,bitrate:D,isPaidLive:U,logOptions:e_,poster:ey?M:void 0,onFocus:()=>{k(!0)},onBlur:()=>{k(!1)},onLoadedData:e=>{ea.loadeddata(e),null==eh||eh.emit(tM._.FirstFrame)},onError:ea[ii.FP.ERROR],onTTFB:ea[ii.FP.TTFB],onLoadStart:ea[ii.FP.LOADSTART],onWaiting:ea[ii.FP.WAITING],onPlaying:ea[ii.FP.PLAYING],onPlay:ea[ii.FP.PLAY],onPause:ea[ii.FP.PAUSE],onEnd:ea[ii.FP.ENDED],onFullScreenChange:ea[ii.FP.FULLSCREEN_CHANGE],ref:e=>{if(!!(null==e?void 0:e.player))(null==e?void 0:e.player)&&(null==e?void 0:e.player)!==E&&(v(null==e?void 0:e.player),C(null==e?void 0:e.player)),(null==e?void 0:e.logger)&&(null==e?void 0:e.logger)!==P&&h(null==e?void 0:e.logger)},playerAction:ec,disableDynamicBg:"audio"===V&&"audio_audience"!==K,reusePlayer:ef,playerInstance:ep,loggerInstance:eE,role:"consumer",scene:"LivingPlayer",children:[(0,s.jsx)(il,{className:ib.layoutCommon}),(0,s.jsx)(ia,{className:ib.layoutCommon}),(0,s.jsx)(is,{className:ib.layoutCommon}),(0,s.jsx)(iu,{className:ib.layoutCommon}),(0,s.jsx)(id,{className:Q()(ib.layoutCommon,ib.layoutLike)}),(0,s.jsx)(ic,{className:ib.layoutCommon}),(0,s.jsx)(im,{className:ib.layoutCommon}),(0,s.jsx)(i_,{className:ib.layoutCommon}),(0,s.jsx)(iv,{className:ib.layoutCommon}),(0,s.jsx)(ih,{className:Q()(ib.layoutCommon)}),(0,s.jsx)(ig,{className:ib.layoutCommon}),(0,s.jsx)(ip,{className:ib.layoutCommon}),(0,s.jsx)(iI,{className:ib.layoutCommon}),(0,s.jsx)(iJ.xr,{ref:e=>{e&&E&&e!==(null==E?void 0:E._pipRef)&&(E._pipRef=e)}}),(0,s.jsx)(iE,{className:ib.layoutCommon}),(0,s.jsx)(i5,{}),(0,s.jsx)("div",{id:`gift_effect_bg_${null==A?void 0:A.roomId}`,style:{position:"absolute",left:0,bottom:"-4px",width:"100%",height:"auto",background:"transparent",pointerEvents:"none",zIndex:-1,opacity:"0.5"}}),(0,s.jsx)(i8.h,{source:"LivingPlayer"})]})}),(0,s.jsx)(ix.GZ,{isDoubleScreen:R})]})}),ne=i("62783"),nt=i("346398");let ni=(0,tF.n)((0,tD.ZP)(()=>i.e("88424").then(i.bind(i,476534)),{ssr:!1}),{name:tO.l.TheaterPlugin,renderWhen:tM._.FirstFrame,taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.TheaterPlugin,condition:e=>{let{pipContext:t}=e;return!0},Component:ni,index:0});var nn=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.TheaterPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.TheaterPlugin,index:0}),no=i("702281");let nr=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,26896)),{ssr:!1}),{name:tO.l.INPICTURE_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.INPICTURE_PLUGIN,condition:()=>!0,Component:nr,index:0});var nl=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.INPICTURE_PLUGIN}),layoutName:th.t.LinkMicAnimationLayout,ComponentName:tO.l.INPICTURE_PLUGIN,index:0}),na=i("388862");let ns=(0,tF.n)((0,tD.ZP)(()=>i.e("11049").then(i.bind(i,84666)),{ssr:!1}),{name:tO.l.PIP_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.PIP_PLUGIN,condition:e=>{let{store:t,pipContext:i}=e,{feedStore:{isActive:n},roomStore:{roomStatus:o,playerCoverText:r},linkmicStore:{linkRoomType:l}}=t||{},{isLivingPip:a,isNewLivingPipEnabled:s}=i;return n&&o!==em.LV.END&&"audio"!==l&&!r&&((0,eG.DT)()?s:s||(0,na.Kv)())&&!a},Component:ns,index:0});var nu=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.PIP_PLUGIN}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.PIP_PLUGIN,index:0});let nd=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,660989)),{ssr:!1}),{name:tO.l.FOLD_CHAT_ROOM_COMMENT_PLUGIN,renderWhen:tM._.FirstFrame,taskPriority:"background"});(0,ne.GI)({name:tO.l.FOLD_CHAT_ROOM_COMMENT_PLUGIN,condition:e=>{let{pipContext:t,store:i}=e,{roomStore:{foldChatroom:n,isFixedChat:o,roomStatus:r},playerStore:{isFullScreen:l,isTheaterOn:a}}=i;return(l||a)&&n&&!o&&!(null==t?void 0:t.isLivingPip)&&r!==em.LV.END},Component:nd,index:0});var nc=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.FOLD_CHAT_ROOM_COMMENT_PLUGIN}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.FOLD_CHAT_ROOM_COMMENT_PLUGIN,index:0});let nm=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("66135"),i.e("23881")]).then(i.bind(i,388171)),{ssr:!1}),{name:tO.l.ROTATE_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.ROTATE_PLUGIN,condition:e=>{var t,i,n;let{store:o}=e,r=!0;try{!CSS.supports("rotate","none")&&(null==o?void 0:null===(n=o.roomStore)||void 0===n?void 0:n.isDoubleScreen)&&(r=!1)}catch(e){}return(null==o?void 0:null===(t=o.feedStore)||void 0===t?void 0:t.isActive)&&r&&!(null==o?void 0:null===(i=o.vrStore)||void 0===i?void 0:i.isInVrView)},Component:nm,index:0});var n_=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.ROTATE_PLUGIN}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.ROTATE_PLUGIN,index:0});let nv=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("66135"),i.e("3047")]).then(i.bind(i,801486)),{ssr:!1}),{name:tO.l.TRIPLE_SCREEN_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.TRIPLE_SCREEN_PLUGIN,condition:e=>{let{store:t,pipContext:i}=e,{roomStore:{isDoubleScreen:n,roomInfo:o},pkStore:{pkStatus:r},paidLiveStore:{isPaidLive:l},linkmicStore:{linkRoomTypeHooks:a},feedStore:{isActive:s},playerStore:{playerInstance:u},ecomStore:{cartVisible:d},vrStore:{isVrLive:c}}=t,m=ev()(o,"room.status"),_=null==i?void 0:i.isLivingPip,v=Object.keys(ev()(o,"room.linker_map")||{}).length>=1;if(!(null==o?void 0:o.room)||!(null==o?void 0:o.roomId))return!1;if(!(s&&m!==em.LV.END&&!r&&!n&&!l&&!_&&!a&&!v&&!d&&!c))try{null==u||u.updateConfig({pluginsConfig:{tripleVideo:{enable:!1}}})}catch(e){}return s&&m!==em.LV.END&&!r&&!n&&!l&&!_&&!a&&!v&&!d&&!c},Component:nv,index:0});var nh=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.TRIPLE_SCREEN_PLUGIN}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.TRIPLE_SCREEN_PLUGIN,index:0});let nf=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,553446)),{ssr:!1}),{name:tO.l.VolumeMemoryPlugin,renderWhen:tM._.LivingInit});var ng=(0,tA.OV)({Component:nf,layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.VolumeMemoryPlugin,index:0});let np=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("26835"),i.e("48539")]).then(i.bind(i,76492)),{ssr:!1}),{name:tO.l.EFFECT_SWITCH_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.EFFECT_SWITCH_PLUGIN,condition:e=>{let{pipContext:t,store:i}=e,{feedStore:{isActive:n},giftStore:{giftStatus:o}}=i;return!(null==t?void 0:t.isLivingPip)&&n&&o},Component:np,index:0});var nI=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.EFFECT_SWITCH_PLUGIN}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.EFFECT_SWITCH_PLUGIN,index:0});let nE=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("26835"),i.e("72650")]).then(i.bind(i,75949)),{ssr:!1}),{name:tO.l.GIFT_EFFECT_PLUGIN,renderWhen:tM._.LivingInit,taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.GIFT_EFFECT_PLUGIN,condition:e=>{let{store:t}=e,{feedStore:{isActive:i}}=t;return i},Component:nE,index:0});var ny=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.GIFT_EFFECT_PLUGIN}),layoutName:th.t.GiftEffectLayout,ComponentName:tO.l.GIFT_EFFECT_PLUGIN,index:0});let nP=(0,tF.n)((0,tD.ZP)(()=>i.e("50008").then(i.bind(i,103708)),{ssr:!1}),{name:tO.l.GIFT_TRAY_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.GIFT_TRAY_PLUGIN,condition:e=>{let{store:t}=e,{feedStore:{isActive:i}}=t;return i},Component:nP,index:0});var nb=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.GIFT_TRAY_PLUGIN}),layoutName:th.t.GiftTrayLayout,ComponentName:tO.l.GIFT_TRAY_PLUGIN,index:0});let nL=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("26835"),i.e("48539")]).then(i.bind(i,440697)),{ssr:!1}),{name:tO.l.EFFECT_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.EFFECT_PLUGIN,condition:e=>{let{store:t}=e,{feedStore:{isActive:i}}=t;return i},Component:nL,index:0});var nS=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.EFFECT_PLUGIN}),layoutName:th.t.GiftEffectLayout,ComponentName:tO.l.EFFECT_PLUGIN,index:0});let nC=(0,tF.n)((0,tD.ZP)(()=>i.e("25986").then(i.bind(i,81827)),{ssr:!1}),{name:tO.l.DANMAKU_SETTINGS,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.DANMAKU_SETTINGS,condition:e=>{let{pipContext:t,store:i}=e,{roomStore:{isDanmakuFeatureOn:n}}=i;return!(null==t?void 0:t.isLivingPip)&&n},Component:nC,index:0});var nN=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.DANMAKU_SETTINGS}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.DANMAKU_SETTINGS,index:0});let nw=(0,tF.n)((0,tD.ZP)(()=>i.e("55756").then(i.bind(i,650772)),{ssr:!1}),{name:tO.l.DANMAKU_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.DANMAKU_PLUGIN,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},vrStore:{isImmersive:n}}=t;return i&&!n},Component:nw,index:0});var nT=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.DANMAKU_PLUGIN}),layoutName:th.t.DanmakuLayout,ComponentName:tO.l.DANMAKU_PLUGIN,index:0});let nR=(0,tF.n)((0,tD.ZP)(()=>i.e("44143").then(i.bind(i,337889)),{ssr:!1}),{name:tO.l.Live_Like,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"user-blocking"});(0,ne.GI)({name:tO.l.Live_Like,condition:e=>{let{store:t,pipContext:i}=e,{feedStore:{isActive:n}}=t;return n&&!(null==i?void 0:i.isLivingPip)},Component:nR,index:0});var nk=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.Live_Like}),layoutName:th.t.LikeLayout,ComponentName:tO.l.Live_Like,index:0});let nx=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("66135"),i.e("21692"),i.e("54691")]).then(i.bind(i,153387)),{ssr:!1}),{name:tO.l.QUALITY_SWITCH,renderWhen:tM._.LivingInit});(0,ne.GI)({name:tO.l.QUALITY_SWITCH,condition:()=>!0,Component:nx,index:0});var nA=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.QUALITY_SWITCH}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.QUALITY_SWITCH,index:0}),nO=i("605125");let nM=(0,tF.n)((0,tD.ZP)(()=>i.e("98058").then(i.bind(i,643187)),{ssr:!1}),{name:tO.l.HintContainerPlugin,renderWhen:tM._.FirstFrame,taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.HintContainerPlugin,condition:e=>{var t;let{store:i}=e;return null==i?void 0:null===(t=i.feedStore)||void 0===t?void 0:t.isActive},Component:nM,index:0});var nF=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.HintContainerPlugin}),layoutName:th.t.TipsLayout,ComponentName:tO.l.HintContainerPlugin,index:0}),nD=i("554933"),nj=i("924123"),nG={autoplayPreventTip:"iSPyC4ya",text:"lGZRzfyd",limitText:"azdmS8VV",openText:"Snxin9P4",key:"CMsHKKFk",closeIcon:"ds5PfrsO",maskContainer:"GVA4okPw",maskMain:"dFvPrq8b",maskHeader:"_6GPzCR8",maskTitle:"OTPhpkbv",maskClose:"RS_C3_wf",maskContent:"Ij9m5vOW",maskText:"UqWiFkiE",maskConfirm:"i9OmRW9F"};let nU=(0,u.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,H._)((0,w._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M24.601 24.6a1.362 1.362 0 0 1-1.927 0L18.5 20.427l-4.174 4.175a1.362 1.362 0 1 1-1.927-1.927l4.174-4.174-4.174-4.175a1.362 1.362 0 0 1 1.927-1.926l4.174 4.174 4.174-4.174a1.362 1.362 0 0 1 1.927 1.926L20.427 18.5l4.174 4.174a1.362 1.362 0 0 1 0 1.927z",fill:"#fff",fillOpacity:".8"})})));var nV=i("473677"),nK=i("394561");let nY=e=>{let{className:t,onClose:i,onOpen:n,preventModalVisible:o,onModalVisibleChange:r}=e,[l,a]=(0,u.useState)(!1),d=()=>{a(!1),null==r||r(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:Q()(nG.autoplayPreventTip,t),children:[(0,s.jsx)("span",{className:nG.text,children:""}),(0,s.jsx)("span",{className:nG.limitText,onClick:()=>{a(!0),null==r||r(!0)},children:""}),(0,s.jsx)("span",{className:nG.text,children:","}),(0,s.jsx)("span",{className:nG.key,children:"P"}),(0,s.jsx)("span",{className:nG.text,children:""}),(0,s.jsx)("span",{className:nG.openText,onClick:n,children:""}),(0,s.jsx)(nV.Z,{className:nG.closeIcon,height:36,width:36,src:nU,onClick:i})]}),(void 0===o?l:o)&&(0,s.jsx)(nj.h,{children:(0,s.jsx)(nK.T6,{className:nG.maskContainer,children:(0,s.jsxs)("div",{className:nG.maskMain,children:[(0,s.jsxs)("div",{className:nG.maskHeader,children:[(0,s.jsx)("div",{className:nG.maskTitle,children:""}),(0,s.jsx)(nV.Z,{className:nG.maskClose,width:36,height:36,src:nU,onClick:d})]}),(0,s.jsxs)("div",{className:nG.maskContent,children:[(0,s.jsx)("div",{className:nG.maskText,children:""}),(0,s.jsx)("div",{className:nG.maskConfirm,onClick:d,children:""})]})]})})})]})};var nZ="zHAnOnkV";let nB=e=>{let{playerInstance:t}=e,{eventStore:{playerEvent:i}}=(0,J.o)(),[n,o]=(0,u.useState)(!1),[r,l]=(0,u.useState)(!1),a=(0,u.useRef)(!1);(0,u.useEffect)(()=>()=>{a.current=!0},[]);let d=u.useRef(!0),c=(0,ij.Z)(()=>{var e,n;null!==(n=(e=window).__INVISIBLE_QUERY__)&&void 0!==n||(e.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1;null==i||i.volumeBrowserLimitedMute(),d.current&&(setTimeout(()=>{if(!!t.paused)t.muted=!0,t.play(),setTimeout(()=>{(0,io.w)(!1),t.once(ii.FP.VOLUMECHANGE,()=>{!a.current&&l(!1)})})},0),d.current=!1,l(!0),null==i||i.volumeBrowserLimitedToastShow())});(0,u.useEffect)(()=>{if(!!t)return t.on(ii.FP.AUTOPLAY_WAS_PREVENTED,c),()=>{null==t||t.off(ii.FP.AUTOPLAY_WAS_PREVENTED,c)}},[t]),(0,u.useEffect)(()=>{if(!t)return;let e=e=>{var i,n;if(!t)return;let o=null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.tagName;if("INPUT"!==o&&"TEXTAREA"!==o&&(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.contentEditable)!=="true")(null==e?void 0:e.code)==="KeyP"&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&(t.muted=!t.muted)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]);let m=(0,ij.Z)(()=>{null==i||i.volumeBrowserLimitedClickOpen(),t&&(t.muted?t.muted=!1:t.volume=.5,t.emit("volumechange")),l(!1)}),_=(0,u.useCallback)(()=>{null==i||i.volumeBrowserLimitedClickClose(),l(!1)},[]);return(0,s.jsx)(nD.l,{showHint:r,priority:2,duration:30,delay:0,onClose:()=>{l(!1)},children:(0,s.jsx)(nY,{className:nZ,onClose:_,onModalVisibleChange:o,onOpen:m,preventModalVisible:n})})};var nH=(0,er.Pi)(e=>{let{player:t}=(0,i1.n)();return(0,s.jsx)(nB,(0,H._)((0,w._)({},e),{playerInstance:t}))}),nW=(0,er.Pi)(e=>(0,s.jsx)(nH,(0,w._)({},e)));let nQ=(0,tF.n)(nW,{name:tO.l.CancelMutePlugin,renderWhen:tM._.LivingInit});(0,ne.GI)({name:tO.l.CancelMutePlugin,condition:e=>{let{pipContext:t}=e;return!(null==t?void 0:t.isLivingPip)},Component:nQ,index:0});var n$=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.CancelMutePlugin}),layoutName:th.t.TipsLayout,ComponentName:tO.l.CancelMutePlugin,index:0});let nq=(0,tF.n)((0,tD.ZP)(()=>i.e("22299").then(i.bind(i,770391)),{ssr:!1}),{name:tO.l.GlobalControlPlugin,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.GlobalControlPlugin,condition:e=>{var t;let{store:i}=e;return null==i?void 0:null===(t=i.feedStore)||void 0===t?void 0:t.isActive},Component:nq,index:0});var nJ=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.GlobalControlPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.GlobalControlPlugin,index:0});let nz=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("3556"),i.e("85279"),i.e("66660")]).then(i.bind(i,492520)),{ssr:!1}),{name:tO.l.TOOL_BAR_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.TOOL_BAR_PLUGIN,condition:e=>{let{store:t}=e,{roomStore:{roomStatus:i,playerCoverText:n},vrStore:{isImmersive:o}}=t;return i!==em.LV.END&&n!==eI.kx.KICK_OUT&&!o},Component:nz,index:0});var nX=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.TOOL_BAR_PLUGIN}),layoutName:th.t.EcmoCardLayout,ComponentName:tO.l.TOOL_BAR_PLUGIN,index:0});let n0=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,880060)),{ssr:!1}),{name:tO.l.PlayerLoggerPlugin,renderWhen:tM._.LivingInit});(0,ne.GI)({name:tO.l.PlayerLoggerPlugin,condition:()=>!0,Component:n0,index:0});var n1=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.PlayerLoggerPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.PlayerLoggerPlugin,index:0});let n2=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,937788)),{ssr:!1}),{name:tO.l.PlayerTeaLogPlugin,renderWhen:tM._.FirstFrame,taskPriority:"background"});(0,ne.GI)({name:tO.l.PlayerTeaLogPlugin,condition:e=>{var t;let{store:i}=e;return null==i?void 0:null===(t=i.feedStore)||void 0===t?void 0:t.isActive},Component:n2,index:0});var n5=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.PlayerTeaLogPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.PlayerTeaLogPlugin,index:0});let n3=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,200224)),{ssr:!1}),{name:tO.l.PlayerEndCover,renderWhen:tM._.FirstFrame,taskPriority:"background"});(0,ne.GI)({name:tO.l.PlayerEndCover,condition:e=>{let{store:t}=e,{roomStore:{playerCoverText:i},linkmicStore:{linkRoomType:n}}=t;return!!(i&&!(i===eI.kx.ANCHOR_BAN&&n))},Component:n3,index:0});var n6=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.PlayerEndCover}),layoutName:th.t.TipsLayout,ComponentName:tO.l.PlayerEndCover,index:0});let n8=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,145736)),{ssr:!1}),{name:tO.l.VolumeWheelPlugin,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.VolumeWheelPlugin,condition:()=>!0,Component:n8,index:0});var n7=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.VolumeWheelPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.VolumeWheelPlugin,index:0});let n4=(0,tF.n)((0,tD.ZP)(()=>i.e("18419").then(i.bind(i,793866)),{ssr:!1}),{name:tO.l.PKSEIPlugin,renderWhen:tM._.LivingInit});(0,ne.GI)({name:tO.l.PKSEIPlugin,condition:e=>{var t;let{store:i}=e;return null==i?void 0:null===(t=i.feedStore)||void 0===t?void 0:t.isActive},Component:n4,index:0});var n9=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.PKSEIPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.PKSEIPlugin,index:0});let oe=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,651019)),{ssr:!1}),{name:tO.l.AdaptedBySEIPlugin,renderWhen:tM._.LivingInit});(0,ne.GI)({name:tO.l.AdaptedBySEIPlugin,condition:e=>{let{pipContext:t}=e;return!0},Component:oe,index:0});var ot=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.AdaptedBySEIPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.AdaptedBySEIPlugin,index:0});let oi=(0,tF.n)((0,tD.ZP)(()=>i.e("624").then(i.bind(i,414756)),{ssr:!1}),{name:tO.l.NewPlayerErrorCover,renderWhen:no.d.afterComponent(tO.l.ChatRoom)});(0,ne.GI)({name:tO.l.NewPlayerErrorCover,condition:e=>{var t;let{store:i}=e;return null==i?void 0:null===(t=i.roomStore)||void 0===t?void 0:t.isShowRefreshPage},Component:oi,index:0});var on=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.NewPlayerErrorCover}),layoutName:th.t.TipsLayout,ComponentName:tO.l.NewPlayerErrorCover,index:0});let oo=(0,tF.n)((0,tD.ZP)(()=>i.e("67393").then(i.bind(i,287828)),{ssr:!1}),{name:tO.l.PK_VIEW_PLUGIN,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.PK_VIEW_PLUGIN,condition:e=>{var t,i;let{store:n}=e;return(null==n?void 0:null===(t=n.pkStore)||void 0===t?void 0:t.pkStatus)&&(null==n?void 0:null===(i=n.feedStore)||void 0===i?void 0:i.isActive)},Component:oo,index:0});var or=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.PK_VIEW_PLUGIN}),layoutName:th.t.LinkMicLayout,ComponentName:tO.l.PK_VIEW_PLUGIN,index:0});let ol=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("74792"),i.e("3805")]).then(i.bind(i,195813)),{ssr:!1}),{name:tO.l.SHORT_CUT,renderWhen:tM._.FirstFrame,taskPriority:"user-blocking"});(0,ne.GI)({name:tO.l.SHORT_CUT,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},roomStore:{hideBanner:n,roomInfo:o},vrStore:{isImmersive:r}}=t;return i&&!n&&(null==o?void 0:o.roomId)&&!r},Component:ol,index:0});var oa=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.SHORT_CUT}),layoutName:th.t.ShortTouchLayout,ComponentName:tO.l.SHORT_CUT,index:0});let os=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("66135"),i.e("28251"),i.e("99965"),i.e("30574")]).then(i.bind(i,6467)),{ssr:!1}),{name:tO.l.VIP_VIEW_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.VIP_VIEW_PLUGIN,condition:e=>{var t;let{store:i}=e;return null==i?void 0:null===(t=i.feedStore)||void 0===t?void 0:t.isActive},Component:os,index:0});var ou=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.VIP_VIEW_PLUGIN}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.VIP_VIEW_PLUGIN,index:0});let od=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("66135"),i.e("7680")]).then(i.bind(i,172589)),{ssr:!1}),{name:tO.l.VIP_LIVE_BOUNDARY,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.VIP_LIVE_BOUNDARY,condition:()=>!0,Component:od,index:0});var oc=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.VIP_LIVE_BOUNDARY}),layoutName:th.t.TipsLayout,ComponentName:tO.l.VIP_LIVE_BOUNDARY,index:0});let om=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("66135"),i.e("56362")]).then(i.bind(i,587687)),{ssr:!1}),{name:tO.l.PaidLivePlugin,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.PaidLivePlugin,condition:e=>{let{store:t}=e,{paidLiveStore:{isPaidLive:i},roomStore:{roomStatus:n,playerCoverText:o}}=t;return i&&n!==em.LV.END&&o!==eI.kx.ANCHOR_BAN&&o!==eI.kx.KICK_OUT},Component:om,index:0});var o_=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.PaidLivePlugin}),layoutName:th.t.TipsLayout,ComponentName:tO.l.PaidLivePlugin,index:0});let ov=(0,tF.n)((0,tD.ZP)(()=>i.e("32284").then(i.bind(i,582695)),{ssr:!1}),{name:tO.l.LeadingLoginPlugin,renderWhen:tM._.FirstFrame,taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.LeadingLoginPlugin,condition:()=>!0,Component:ov,index:0});var oh=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LeadingLoginPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.LeadingLoginPlugin,index:0});let of=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("66135"),i.e("79373"),i.e("53051")]).then(i.bind(i,616406)),{ssr:!1}),{name:tO.l.LinkMicLayoutPlugin,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.LinkMicLayoutPlugin,condition:e=>{let{store:t}=e,{linkmicStore:{useNewLinkMicRender:i,linkRoomTypeHooks:n},feedStore:{isActive:o}}=t;return o&&(i||"audio"===n||"video"===n)},Component:of,index:0});var og=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LinkMicLayoutPlugin}),layoutName:th.t.LinkMicLayout,ComponentName:tO.l.LinkMicLayoutPlugin,index:0});let op=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("28251"),i.e("76746"),i.e("79373"),i.e("81527"),i.e("99965"),i.e("52734"),i.e("74953"),i.e("39700"),i.e("71540"),i.e("64551")]).then(i.bind(i,578939)),{ssr:!1}),{name:tO.l.VIDEO_ROOM_PLUGIN,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.VIDEO_ROOM_PLUGIN,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},linkmicStore:{useNewLinkMicRender:n,linkRoomType:o}}=t;return i&&!n&&"video"===o},Component:op,index:0});var oI=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.VIDEO_ROOM_PLUGIN}),layoutName:th.t.LinkMicLayout,ComponentName:tO.l.VIDEO_ROOM_PLUGIN,index:0});let oE=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("74792"),i.e("28251"),i.e("76746"),i.e("79373"),i.e("81527"),i.e("99965"),i.e("52734"),i.e("74953"),i.e("39700"),i.e("71540"),i.e("81387")]).then(i.bind(i,822745)),{ssr:!1}),{name:tO.l.AUDIO_ROOM_PLUGIN,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.AUDIO_ROOM_PLUGIN,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},linkmicStore:{useNewLinkMicRender:n,linkRoomType:o}}=t;return i&&!n&&"audio"===o},Component:oE,index:0});var oy=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.AUDIO_ROOM_PLUGIN}),layoutName:th.t.LinkMicLayout,ComponentName:tO.l.AUDIO_ROOM_PLUGIN,index:0});let oP=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,143625)),{ssr:!1}),{name:tO.l.LinkMicPlayModeLimitPlugin,renderWhen:tM._.FirstFrame,taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.LinkMicPlayModeLimitPlugin,condition:()=>!0,Component:oP,index:0});var ob=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LinkMicPlayModeLimitPlugin}),layoutName:th.t.TipsLayout,ComponentName:tO.l.LinkMicPlayModeLimitPlugin,index:0});let oL=(0,tF.n)((0,tD.ZP)(()=>i.e("64995").then(i.bind(i,789054)),{ssr:!1}),{name:tO.l.ADMIN_PRIVILEGE_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.ADMIN_PRIVILEGE_PLUGIN,condition:e=>{let{store:t}=e,{feedStore:{isActive:i}}=t;return i},Component:oL,index:0});var oS=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.ADMIN_PRIVILEGE_PLUGIN}),layoutName:th.t.LinkMicLayout,ComponentName:tO.l.ADMIN_PRIVILEGE_PLUGIN,index:0});let oC=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("3556"),i.e("76746"),i.e("56689"),i.e("47842"),i.e("47735"),i.e("86617"),i.e("52734"),i.e("25413")]).then(i.bind(i,727118)),{ssr:!1}),{name:tO.l.RTC_LAYER_PLUGIN,renderWhen:tM._.FirstFrame,taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.RTC_LAYER_PLUGIN,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},linkmicStore:{linkRoomType:n},roomStore:{roomStatus:o,playerCoverText:r}}=t;return!!(i&&n&&o!==em.LV.END&&[eI.kx.NONE,eI.kx.ANCHOR_BAN].includes(r))},Component:oC,index:0});var oN=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.RTC_LAYER_PLUGIN}),layoutName:th.t.LinkMicLayout,ComponentName:tO.l.RTC_LAYER_PLUGIN,index:0});let ow=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("76746"),i.e("52734"),i.e("39700"),i.e("35473")]).then(i.bind(i,131830)),{ssr:!1}),{name:tO.l.LINK_MIC_DYNAMIC_CONFIG,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.LINK_MIC_DYNAMIC_CONFIG,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},linkmicStore:{useNewLinkMicRender:n}}=t;return!!(i&&n)},Component:ow,index:0});var oT=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LINK_MIC_DYNAMIC_CONFIG}),layoutName:th.t.LinkMicLayout,ComponentName:tO.l.LINK_MIC_DYNAMIC_CONFIG,index:0});let oR=(0,tF.n)((0,tD.ZP)(()=>i.e("64914").then(i.bind(i,657024)),{ssr:!1}),{name:tO.l.UpdateFunctionTypePlugin,renderWhen:tM._.FirstFrame,taskPriority:"background"});(0,ne.GI)({name:tO.l.UpdateFunctionTypePlugin,condition:e=>{let{store:t}=e,{feedStore:{isActive:i}}=t;return i},Component:oR,index:0});var ok=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.UpdateFunctionTypePlugin}),layoutName:th.t.LinkMicLayout,ComponentName:tO.l.UpdateFunctionTypePlugin,index:0});let ox=(0,tF.n)((0,tD.ZP)(()=>i.e("71361").then(i.bind(i,859058)),{ssr:!1}),{name:tO.l.TopEffectPlugin,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.TopEffectPlugin,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},roomStore:{roomStatus:n}}=t;return i&&n!==em.LV.END},Component:ox,index:0});var oA=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.TopEffectPlugin}),layoutName:th.t.GiftTrayLayout,ComponentName:tO.l.TopEffectPlugin,index:0});let oO=(0,tF.n)((0,tD.ZP)(()=>i.e("15463").then(i.bind(i,986670)),{ssr:!1}),{name:tO.l.OrderSingPlugin,renderWhen:tM._.FirstFrame,taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.OrderSingPlugin,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},linkmicStore:{orderSingInfo:n}}=t;return i&&!!n},Component:oO,index:0});var oM=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.OrderSingPlugin}),layoutName:th.t.LinkMicAnimationLayout,ComponentName:tO.l.OrderSingPlugin,index:0});let oF=(0,tF.n)((0,tD.ZP)(()=>i.e("1977").then(i.bind(i,130309)),{ssr:!1}),{name:tO.l.GroupFightPlugin,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.GroupFightPlugin,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},linkmicStore:{isGroupFight:n}}=t;return i&&n},Component:oF,index:0});var oD=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.GroupFightPlugin}),layoutName:th.t.LinkMicAnimationLayout,ComponentName:tO.l.GroupFightPlugin,index:0});let oj=(0,tF.n)((0,tD.ZP)(()=>i.e("62099").then(i.bind(i,256701)),{ssr:!1}),{name:tO.l.GuestBattlePlugin,renderWhen:tM._.FirstFrame,taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.GuestBattlePlugin,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},linkmicStore:{isGuestBattle:n}}=t;return i&&n},Component:oj,index:0});var oG=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.GuestBattlePlugin}),layoutName:th.t.LinkMicAnimationLayout,ComponentName:tO.l.GuestBattlePlugin,index:0});let oU=(0,tF.n)((0,tD.ZP)(()=>i.e("46668").then(i.bind(i,850071)),{ssr:!1}),{name:tO.l.LiveReserveCard,renderWhen:tM._.LivingInit,taskPriority:"background"}),oV=(0,er.Pi)(e=>{let{singletonStore:{message:t}}=(0,J.o)(),[i,n]=u.useState(""),[o,r]=u.useState(""),[l,a]=u.useState(""),[d,c]=u.useState(!1);(0,u.useEffect)(()=>null==t?void 0:t.wrds.on("RoomDataSyncMessage","",e=>{var t,i,o,l,s,u,d,m;let _=null==e?void 0:null===(i=e.payload)||void 0===i?void 0:null===(t=i.payload)||void 0===t?void 0:t.highlight_items;if(null==_?void 0:null===(o=_[0])||void 0===o?void 0:o.appointment_data){let e=null==_?void 0:null===(l=_[0])||void 0===l?void 0:l.appointment_data;n(null!==(u=null==e?void 0:e.appointment_id)&&void 0!==u?u:""),r(null!==(d=null==e?void 0:e.date_text)&&void 0!==d?d:""),a(null!==(m=null==e?void 0:e.time_text)&&void 0!==m?m:""),c((null==e?void 0:null===(s=e.scheduled_weekdays)||void 0===s?void 0:s.length)>0)}else(null==_?void 0:_.length)===0&&n("")}),[t]);let m=(0,H._)((0,w._)({},e),{appointmentId:i,dateText:o,timeText:l,isCycle:d});return(0,s.jsx)(oU,(0,w._)({},m))});var oK=(0,er.Pi)(()=>{let{roomStore:{liveStatus:e},userStore:{userInfo:t},playerStore:{isFullScreen:i,isTheaterOn:n}}=(0,J.o)(),{isLivingPip:o}=(0,ix.ds)();return(0,s.jsx)(oV,{isNormalScreen:!(i&&!n),uid:ev()(t,"id_str",""),isPip:o})});(0,ne.GI)({name:tO.l.LiveReserveCard,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},roomStore:{hideBanner:n}}=t;return i&&!n},Component:oK,index:0});var oY=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LiveReserveCard}),layoutName:th.t.ShortTouchLayout,ComponentName:tO.l.LiveReserveCard,index:0});let oZ=(0,tF.n)((0,tD.ZP)(()=>i.e("46701").then(i.bind(i,700804)),{ssr:!1}),{name:tO.l.UgcAvatar,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.UgcAvatar,condition:e=>{let{pipContext:t}=e;return!(null==t?void 0:t.isLivingPip)},Component:oZ,index:0});var oB=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.UgcAvatar}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.UgcAvatar,index:0});let oH=(0,tF.n)((0,tD.ZP)(()=>i.e("41299").then(i.bind(i,250620)),{ssr:!1}),{name:tO.l.GroupLive,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.GroupLive,condition:()=>!0,Component:oH,index:0});var oW=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.GroupLive}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.GroupLive,index:0});let oQ=(0,tF.n)((0,tD.ZP)(()=>i.e("58992").then(i.bind(i,476524)),{ssr:!1}),{name:tO.l.ChangeDynamicBg,renderWhen:tM._.LivingInit});(0,ne.GI)({name:tO.l.ChangeDynamicBg,condition:()=>!0,Component:oQ,index:0});var o$=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.ChangeDynamicBg}),layoutName:th.t.ContainerBackgroundLayout,ComponentName:tO.l.ChangeDynamicBg,index:0});let oq=(0,tF.n)((0,tD.ZP)(()=>i.e("46722").then(i.bind(i,439784)),{ssr:!1}),{name:tO.l.LinkMicApplyPlugin,renderWhen:tM._.FirstFrame,taskPriority:"background"});(0,ne.GI)({name:tO.l.LinkMicApplyPlugin,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},linkmicStore:{linkRoomType:n},roomStore:{roomStatus:o}}=t;return!!(i&&n&&o!==em.LV.END)},Component:oq,index:0});var oJ=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LinkMicApplyPlugin}),layoutName:th.t.LinkMicLayout,ComponentName:tO.l.LinkMicApplyPlugin,index:0});let oz=(0,tF.n)((0,tD.ZP)(()=>i.e("5393").then(i.bind(i,747253)),{ssr:!1}),{name:tO.l.PausePop,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.PausePop,condition:e=>{let{store:t}=e,{roomStore:{roomStatus:i},paidLiveStore:{isPaidLive:n},linkmicStore:{linkStatus:o}}=t;return!!(i!==em.LV.END&&!n&&o!==em.cK.LINKED)},Component:oz,index:0});var oX=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.PausePop}),layoutName:th.t.TipsLayout,ComponentName:tO.l.PausePop,index:0});let o0=(0,tF.n)((0,tD.ZP)(()=>i.e("58983").then(i.bind(i,304489)),{ssr:!1}),{name:tO.l.DetailContextMenuPlugin,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.DetailContextMenuPlugin,condition:e=>{var t;let{store:i}=e;return null==i?void 0:null===(t=i.feedStore)||void 0===t?void 0:t.isActive},Component:o0,index:0});var o1=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.DetailContextMenuPlugin}),layoutName:th.t.TipsLayout,ComponentName:tO.l.DetailContextMenuPlugin,index:0});let o2=(0,tF.n)((0,tD.ZP)(()=>i.e("22670").then(i.bind(i,374848)),{ssr:!1}),{name:tO.l.DoubleScreenPlugin,renderWhen:tM._.LivingInit});(0,ne.GI)({name:tO.l.DoubleScreenPlugin,condition:e=>{let{store:t,pipContext:i}=e,{roomStore:{isDoubleScreen:n}}=t;return n&&!i.isLivingPip},Component:o2,index:0});var o5=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.DoubleScreenPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.DoubleScreenPlugin,index:0});let o3=(0,tF.n)((0,tD.ZP)(()=>i.e("9613").then(i.bind(i,616395)),{ssr:!1}),{name:tO.l.GROUP_LIVE_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom)});(0,ne.GI)({name:tO.l.GROUP_LIVE_PLUGIN,condition:e=>{let{store:t,pipContext:i}=e,{feedStore:{isActive:n},linkmicStore:{isGroupLive:o}}=t,{isLivingPip:r}=i;return!r&&n&&o},Component:o3,index:0});var o6=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.GROUP_LIVE_PLUGIN}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.GROUP_LIVE_PLUGIN,index:0});let o8=(0,tF.n)((0,tD.ZP)(()=>i.e("67337").then(i.bind(i,114072)),{ssr:!1}),{name:tO.l.LiveFromAppTips,renderWhen:no.d.after(tM._.FirstFrame),taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.LiveFromAppTips,condition:()=>!0,Component:o8,index:0});var o7=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LiveFromAppTips}),layoutName:th.t.TipsLayout,ComponentName:tO.l.LiveFromAppTips,index:0});let o4=(0,tF.n)((0,tD.ZP)(()=>i.e("98716").then(i.bind(i,835760)),{ssr:!1}),{name:tO.l.WaterMark,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.WaterMark,condition:e=>{let{store:t,pipContext:i}=e,{feedStore:{isActive:n}}=t;return n},Component:o4,index:0});var o9=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.WaterMark}),layoutName:th.t.WaterMarkLayout,ComponentName:tO.l.WaterMark,index:0});let re=(0,tF.n)((0,tD.ZP)(()=>i.e("8562").then(i.bind(i,693857)),{ssr:!1}),{name:tO.l.SERVICE_CENTER_PLUGIN,renderWhen:tM._.FirstFrame,taskPriority:"background"});(0,ne.GI)({name:tO.l.SERVICE_CENTER_PLUGIN,condition:e=>{let{store:t,abTestData:i}=e,{feedStore:{isActive:n},roomStore:{hideBanner:o,roomInfo:r},userStore:{userInfo:l}}=t;return n&&!o&&(null==r?void 0:r.room)&&l},Component:re,index:0});var rt=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.SERVICE_CENTER_PLUGIN}),layoutName:th.t.ServiceCenterLayout,ComponentName:tO.l.SERVICE_CENTER_PLUGIN,index:0});let ri=(0,tF.n)((0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,908790)),{ssr:!1}),{name:tO.l.VrPlugin,renderWhen:tM._.LivingInit});(0,ne.GI)({name:tO.l.VrPlugin,condition:e=>{let{pipContext:t,store:i}=e;return!0},Component:ri,index:0});var rn=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.VrPlugin}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.VrPlugin,index:0});let ro=(0,tF.n)((0,tD.ZP)(()=>i.e("81913").then(i.bind(i,844613)),{ssr:!1}),{name:tO.l.Gift_MENU_PLUGIN,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"user-visible"});(0,ne.GI)({name:tO.l.Gift_MENU_PLUGIN,condition:e=>{let{store:t,abTestData:i}=e,{feedStore:{isActive:n}}=t;return n&&(null==i?void 0:i.giftMenu)},Component:ro,index:0});var rr=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.Gift_MENU_PLUGIN}),layoutName:th.t.GiftMenuLayout,ComponentName:tO.l.Gift_MENU_PLUGIN,index:0});o=0;let rl=(0,tF.n)(i9,{name:tO.l.LIVING_PLAYER,renderWhen:tM._.LivingInit});var ra=(0,tA.OV)({Component:rl,layoutName:th.t.PlayerLayout,ComponentName:tO.l.LIVING_PLAYER,index:1}),rs=i("769125");let ru=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("56177"),i.e("75404")]).then(i.bind(i,592300)),{ssr:!1}),{name:tO.l.ChatRoom,renderWhen:tM._.FirstFrame,fallback:(0,s.jsx)("div",{className:Q()(rs.Z.comment,rs.Z.commentOpt),children:(0,s.jsx)("div",{className:rs.Z.commentInput})})});(0,ne.GI)({name:tO.l.ChatRoom,condition:e=>{let{store:t}=e,{roomStore:{roomInfo:i},vrStore:{isImmersive:n}}=t;return ev()(i,"web_rid")&&!n},Component:ru,index:0});var rd=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.ChatRoom}),layoutName:th.t.RightBackgroundLayout,ComponentName:tO.l.RoomLogic,index:0});let rc=(0,tF.n)((0,tD.ZP)(()=>i.e("92053").then(i.bind(i,401767)),{ssr:!1}),{name:tO.l.RightPanelContainer,renderWhen:no.d.afterComponent(tO.l.ChatRoom)});var rm=(0,tA.OV)({Component:rc,layoutName:th.t.RightPanelLayout,ComponentName:tO.l.RightPanelContainer,index:1});let r_=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("56177"),i.e("23426")]).then(i.bind(i,95822)),{ssr:!1}),{name:tO.l.RoomInfoBar,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.RoomInfoBar,condition:e=>{let{store:t}=e,{layoutStore:{immersive:i},vrStore:{isImmersive:n}}=t;return!i&&!n},Component:r_,index:0});var rv=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.RoomInfoBar}),layoutName:th.t.HeaderLayout,ComponentName:tO.l.RoomInfoBar,index:0});let rh=(0,tF.n)((0,tD.ZP)(()=>i.e("63199").then(i.bind(i,65284)),{ssr:!1}),{name:tO.l.LandPageContainer,renderWhen:tM._.FirstFrame,taskPriority:"background"});(0,ne.GI)({name:tO.l.LandPageContainer,condition:e=>{let{store:t}=e,{roomStore:{roomStatus:i,hideBanner:n},vipStore:{showVipLiveBoundary:o}}=t;return(i!==em.LV.END||o)&&(!n||o)},Component:rh,index:0});var rf=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LandPageContainer}),layoutName:th.t.RightPanelLayout,ComponentName:tO.l.LandPageContainer,index:0}),rg=i("85895");let rp=(0,tF.n)(rg.Z,{name:tO.l.LiveShare,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.LiveShare,condition:e=>{let{store:t}=e,{roomStore:{roomStatus:i},feedStore:{isActive:n}}=t;return n&&i!==em.LV.END},Component:rp,index:0});var rI=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LiveShare}),layoutName:th.t.LeftBackgroundLayout,ComponentName:tO.l.LiveShare,index:0});let rE=(0,tF.n)((0,tD.ZP)(()=>Promise.all([i.e("76746"),i.e("84425"),i.e("52734"),i.e("91039")]).then(i.bind(i,64617)),{ssr:!1}),{name:tO.l.OperatingBar,renderWhen:tM._.FirstFrame});(0,ne.GI)({name:tO.l.OperatingBar,condition:e=>{let{store:t}=e,{feedStore:{isActive:i},roomStore:{inRoomOnAppView:n},vipStore:{showVipLiveBoundary:o},vrStore:{isImmersive:r}}=t;return i&&!n&&!o&&!r},Component:rE,index:0});var ry=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.OperatingBar}),layoutName:th.t.BottomLayout,ComponentName:tO.l.OperatingBar,index:1});let rP=(0,tF.n)((0,tD.ZP)(()=>i.e("41306").then(i.bind(i,874781)),{ssr:!1}),{name:tO.l.ProgrammeWrapper,renderWhen:no.d.afterComponent(tO.l.ChatRoom)});(0,ne.GI)({name:tO.l.ProgrammeWrapper,condition:()=>!0,Component:rP,index:0});var rb=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.ProgrammeWrapper}),layoutName:th.t.ContainerBackgroundLayout,ComponentName:tO.l.ProgrammeWrapper,index:0});i("602157");var rL=i("746025"),rS=i("14108"),rC=i("429719");function rN(e){let{title:t="",description:i,keywords:n}=e,o=(0,c.a)(),[r,l]=u.useState(!1);u.useEffect(()=>{(0,eg.GP)()&&l(!0)},[]);let a=u.useMemo(()=>(0,rL.Dr)(K.Q.getItem({sKey:Y.CookieKeys.Theme})),[]);return(0,s.jsxs)(rC.Head,{children:[(0,s.jsx)("title",{children:t}),(0,s.jsx)("meta",{name:"description",content:i}),(0,s.jsx)("meta",{name:"keywords",content:n}),(0,s.jsx)("link",{rel:"canonical",href:`${(0,rS.Pe)()}${"/live"===o.pathname?"":o.pathname}`}),(0,s.jsx)("meta",{name:"theme-color",content:`${"light"===a?"#ffffff":"#161823"}`}),!r&&(0,s.jsx)("link",{rel:"manifest",href:"https://lf9-static.bytednsdoc.com/obj/eden-cn/nupthpqups/manifest.json"})]})}var rw=(0,er.Pi)(e=>{let{roomStore:{roomInfo:t}}=(0,J.o)(),i=(0,u.useMemo)(()=>ev()(t,"anchor.nickname",""),[t]);return(0,s.jsx)(rN,{title:`${i} - `,description:`${i}${i} - `,keywords:`${i},${i}},${i},${i},${i},${i},,`})});let rT=(0,tF.n)(rw,{name:tO.l.LiveTDK,renderWhen:tM._.LivingInit});(0,ne.GI)({name:tO.l.LiveTDK,condition:()=>!0,Component:rT,index:0});var rR=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.LiveTDK}),layoutName:th.t.ContainerBackgroundLayout,ComponentName:tO.l.LiveTDK,index:0});let rk=(0,tF.n)((0,tD.ZP)(()=>i.e("34162").then(i.bind(i,834084)),{ssr:!1}),{name:tO.l.AutoRunModal,renderWhen:no.d.afterComponent(tO.l.ChatRoom),taskPriority:"background"});(0,ne.GI)({name:tO.l.AutoRunModal,condition:()=>!0,Component:rk,index:0});var rx=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.AutoRunModal}),layoutName:th.t.ContainerBackgroundLayout,ComponentName:tO.l.AutoRunModal,index:0});let rA=(0,tF.n)((0,tD.ZP)(()=>i.e("17282").then(i.bind(i,417048)),{ssr:!1}),{name:tO.l.AudioCheatTips,renderWhen:tM._.FirstFrame,taskPriority:"background"});(0,ne.GI)({name:tO.l.AudioCheatTips,condition:()=>!0,Component:rA,index:0});var rO=(0,tA.OV)({Component:()=>(0,s.jsx)(nt.Z,{name:tO.l.AudioCheatTips}),layoutName:th.t.PlayerControlLayout,ComponentName:tO.l.AudioCheatTips,index:0}),rM=i("716304"),rF=(0,er.Pi)(e=>{let{context:t,children:i}=e;return(0,s.jsx)(rM.T,{context:t,children:i})}),rD=i("516599"),rj=i("451047"),rG=i("926012"),rU=i("686374");i("209955");var rV=i("902845");let rK=e=>{let{type:t=rV.NI.emptyList}=e;return u.useEffect(()=>{eo.emit(eo.EVENT.livePlayerEndCoverShow,{filter_detail:t})},[]),(0,s.jsx)(rV.jj,(0,w._)({type:t,className:`live-room-error ${t}`,secondaryButtonTitle:rV.NI.serverError===t?"":void 0},e))};var rY=i("950022"),rZ={iframePlayer:"MVRx33oq",isMobile:"At4hKOru",hideFullScreen:"UCBLAG1c",liveTitlePlugin:"K_nS_sZi",liveTitlePluginContainer:"GVk0rG7_",liveCommentPlugin:"ZWA1w9nr",iframePlayerDefault:"MPESKh3I"},rB=i("301061"),rH=i("101966"),rW=i("200224"),rQ=i("880060"),r$=i("651019"),rq=i("819972"),rJ=i("660989"),rz=i("309244"),rX="zmNdaKsN",r0="sbv2eU0T";let r1=e=>{let{count:t,className:i,renderSVG:n}=e;return(0,s.jsxs)("span",{className:Q()(rX,i),children:[n?n():(0,s.jsx)(rz.Z,{}),(0,s.jsx)("span",{className:r0,children:t||"0"})]})};var r2={liveTitle:"LgHq3PbL",text:"zV4wzltK",userCount:"zBxhJBXm"},r5=i("309931"),r3=(0,er.Pi)(e=>{let{userCount:t="",title:i="",showUserCount:n=!1,className:o}=e,{player:r}=(0,i1.n)(),l=u.useMemo(()=>{var e;return null==r?void 0:null===(e=r.root)||void 0===e?void 0:e.querySelector(".douyin-player-top-bar")},[r]);return l?(0,r5.createPortal)((0,s.jsxs)("div",{className:Q()(r2.liveTitle,o),children:[(0,s.jsx)("span",{className:r2.text,children:i}),n&&(0,s.jsx)(r1,{className:r2.userCount,count:t})]}),l):null}),r6=i("937788"),r8=i("927928"),r7=i("149620"),r4=i("49693"),r9=i("852349"),le=i("759797"),lt=i("448715"),li=i("632168");let ln=(0,tD.ZP)(()=>Promise.resolve().then(i.bind(i,689021)),{ssr:!1});var lo=(0,iJ.rW)(function(e){let{webRid:t,roomTeaLogParams:i,onClick:n,scene:o,program:r,className:l,isPaidLive:a,viewType:d,isLogin:c,full:m}=e,[_,v]=(0,u.useState)({}),f=(0,u.useMemo)(()=>{var e,i;return _&&_[t]&&o&&(null===(i=_[t])||void 0===i?void 0:null===(e=i.scopes)||void 0===e?void 0:e.indexOf(o))>-1?_[t]:null},[t,o,_]),g=u.useMemo(()=>!(a&&(d===le.PAID_LIVE_VIEW_TYPE.TRT_WATCH_FINISH||!c)),[a,d,c]);if((0,u.useEffect)(()=>{(async()=>{v(await (0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"entrance"}))})()},[o,t]),g){var p;return(0,s.jsx)(lt.G,{href:(null==f?void 0:f.url)||(0,r9.X)(`/${t}`),target:(null==f?void 0:f.html_target)||"_blank",passParams:i,onClick:n,className:m?li.Z.full:"","data-e2e":"live-enter-room",children:(0,s.jsxs)("div",{className:Q()([li.Z.enterRoom,l,li.Z.loaded]),children:[(0,s.jsx)(ln,{className:li.Z.enterRoomIcon}),(0,s.jsx)("span",{children:(null==r?void 0:null===(p=r.mod)||void 0===p?void 0:p.episode_stage)===tn.jL.FIRST_LIVE?"":(null==f?void 0:f.enter_text)||""})]})})}return null}),lr=i("616406"),ll=i("143625"),la=i("63002"),ls=i("553446"),lu=i("153387"),ld=i("145736");let lc=(0,tD.ZP)(()=>Promise.all([i.e("23145"),i.e("21248"),i.e("11073"),i.e("76746"),i.e("52734"),i.e("95542")]).then(i.bind(i,185298)),{ssr:!1}),lm=(0,tD.ZP)(()=>Promise.all([i.e("74792"),i.e("28251"),i.e("76746"),i.e("79373"),i.e("81527"),i.e("99965"),i.e("52734"),i.e("74953"),i.e("39700"),i.e("71540"),i.e("81387")]).then(i.bind(i,822745)),{ssr:!1}),l_=(0,tD.ZP)(()=>Promise.all([i.e("28251"),i.e("76746"),i.e("79373"),i.e("81527"),i.e("99965"),i.e("52734"),i.e("74953"),i.e("39700"),i.e("71540"),i.e("64551")]).then(i.bind(i,578939)),{ssr:!1});var lv=(0,er.Pi)(e=>{var t,i,n,o,r,l,a,c,m,_,v;let{onPlay:f,onSend:g,isPause:p,refreshPlayer:I,anchorSecUserId:E}=e,y=u.useRef(!0),{userStore:{userInfo:P,odin:b,setPlayerUserHandlePause:L},roomStore:{roomInfo:S,playerCoverText:C,isVerified:N},linkmicStore:{linkRoomType:T,linkRoomTypeHooks:R,linkStatus:k},eventStore:{playerEvent:x,basicEvent:A},detailExtra:{iframeConf:O,setIframeConf:M},playerStore:{playerInstance:F,playerLoggerInstance:D,setPlayerInstance:j,setPlayerLoggerInstance:G},singletonStore:{setPlayer:U}}=(0,J.o)(),V=(0,r4.Z)(),K=ev()(S,"room.status"),Y=(0,u.useRef)(),[Z,B]=(0,u.useState)(!1),H=u.useMemo(()=>{if(O){let e=Date.now(),{start:t,end:i}=O;if(t&&i&&e>=t&&e<=i)return!0}return!1},[O]),W=u.useMemo(()=>ev()(S,"room.stream_url.live_core_sdk_data.pull_data.options.qualities",[]).map(e=>e.sdk_key),[S]),$=u.useMemo(()=>JSON.parse(ev()(S,"room.stream_url.live_core_sdk_data.pull_data.stream_data","null")),[S]),q=u.useMemo(()=>(null==O?void 0:O.resolution)||ev()(S,"room.stream_url.live_core_sdk_data.pull_data.options.default_quality.sdk_key",""),[O,S]),z=(0,u.useMemo)(()=>{if($&&q){var e;let t=(null==$?void 0:null===(e=$.data[q])||void 0===e?void 0:e.main)||{};return(0,eG.tq)()?(0,eV.uC)(t.hls||""):(0,eV.uC)(t.flv||"")}return""},[$,q]);(0,u.useEffect)(()=>{if(!y.current&&(null==P?void 0:P.isReady)){var e,t;null==x||x.livePlayEvent({anchor_id:ev()(S,"anchor.id_str",""),room_id:S.roomId||"",muted:Y.current.getPlayer().muted,stream_type:V,enter_method_temai:null===(t=window)||void 0===t?void 0:null===(e=t.__INVISIBLE_QUERY__)||void 0===e?void 0:e.enter_method_temai}),y.current=!0}},[S,P,V,y]),(0,u.useEffect)(()=>(window.__IFRAME_PLAYER__=Y.current,document.body.style.overflowX="hidden",()=>{document.body.style.overflowX="auto"}),[]);let X=(0,u.useMemo)(()=>({enter_from_merge:"web_iframe"}),[]),ee=u.useRef(!es.s&&(0,io.rC)());u.useEffect(()=>{var e,t,i,n,o,r,l,a,s;let u=null===(e=Y.current)||void 0===e?void 0:e.getPlayer();if(!!u)k===eb.cK.LINKED?(ee.current=u.muted,u.muted=!0,null===(i=u.plugins)||void 0===i||null===(t=i.play)||void 0===t||t.hide(),null===(o=u.plugins)||void 0===o||null===(n=o.volume)||void 0===n||n.hide()):k===eb.cK.NOT_LINK&&(u.muted=ee.current,null===(l=u.plugins)||void 0===l||null===(r=l.play)||void 0===r||r.show(),null===(s=u.plugins)||void 0===s||null===(a=s.volume)||void 0===a||a.show())},[k]);let et=(0,la.Z)(),{url:ei}=iR(),en=(0,u.useMemo)(()=>({url:z||ei,autoplay:!0,volume:(0,io.T1)(),muted:!1,decryption:null,coreType:(0,eG.tq)()?ii.GI:(0,ii.Eo)()?"mediastream":ii.ry}),[ei,z]),eo=(0,u.useMemo)(()=>{if("undefined"!=typeof window){let e=d.parse(window.location.search);return(null==e?void 0:e.disableFullscreen)==="true"}return!1},[]);return(0,u.useEffect)(()=>{S.web_rid&&(0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"iframe_conf"}).then(e=>{M(e[String(S.web_rid)])})},[S]),(0,u.useEffect)(()=>{var e,t,i,n;let o=null===(t=Y.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);o&&(0,eG.tq)()&&(null==o||null===(i=o.setAttribute)||void 0===i||i.call(o,"playsinline",!0),null==o||null===(n=o.setAttribute)||void 0===n||n.call(o,"webkit-playsinline",!0))},[null===(i=Y.current)||void 0===i?void 0:null===(t=i.getPlayer)||void 0===t?void 0:t.call(i)]),(0,u.useEffect)(()=>{var e,t,i,n,o,r,l,a;let s=null===(t=Y.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);(0,eG.tq)()&&(null==s?void 0:s.root)&&(null==s||null===(o=s.root)||void 0===o||null===(n=o.classList)||void 0===n||null===(i=n.add)||void 0===i||i.call(n,rZ.isMobile)),eo&&(null==s?void 0:s.root)&&(null==s||null===(a=s.root)||void 0===a||null===(l=a.classList)||void 0===l||null===(r=l.add)||void 0===r||r.call(l,rZ.hideFullScreen))},[(0,eG.tq)(),eo]),(0,s.jsxs)("div",{onClick:()=>{var e,t;null===(t=Y.current)||void 0===t||null===(e=t.getPlayer())||void 0===e||e.focus({})},children:[(0,s.jsx)(t9,{}),H?(0,s.jsxs)(it.N,{className:Q()(rZ.iframePlayer,"iframe-player",{[rZ.hideFullScreen]:eo,[rZ.isMobile]:(0,eG.tq)()}),volume:(0,io.T1)(),disabledLogger:!!(C&&!(C===eI.kx.ANCHOR_BAN&&T)),url:z,closeVideoClick:!0,ref:e=>{if(Y.current={getPlayer:()=>e.player},(null==e?void 0:e.player)&&(null==e?void 0:e.player)!==F){var t;j(null==e?void 0:e.player),U(null==e?void 0:e.player),null==e||null===(t=e.player)||void 0===t||t.on("error",e=>{})}(null==e?void 0:e.logger)&&(null==e?void 0:e.logger)!==D&&G(null==e?void 0:e.logger)},onFullScreen:e=>{B(e)},icons:{loadingIcon:(0,r7.renderToString)((0,s.jsx)(rB.gb,{className:"live-player-loading",text:""}))},onUserAction:e=>{"switch_play_pause"===e.action&&L(!e.paused)},loggerOptions:{user_id:null==P?void 0:P.id_str,device_id:b.user_unique_id,scene:ir.C.iframe},baseConfig:en,scene:"IframePlayer",children:["audio"===T&&K!==em.LV.END&&(0,s.jsx)(rq.k,{componentName:tO.l.AUDIO_ROOM_PLUGIN,children:(0,s.jsx)(lm,{isVerifyed:N})}),"video"===T&&K!==em.LV.END&&(0,s.jsx)(rq.k,{componentName:tO.l.VIDEO_ROOM_PLUGIN,children:(0,s.jsx)(l_,{})}),("audio"===R||"video"===R)&&(0,s.jsx)(lr.LinkMicLayoutPlugin,{isVerifyed:N}),C&&(0,s.jsx)(rW.PlayerEndCover,{cover:ev()(S.anchor,"avatar_thumb.url_list[0]",""),anchorSecUserId:E,children:C}),(0,s.jsx)(rQ.PlayerLoggerPlugin,{ext:(0,w._)({_is_new_version:null!==(v=null===(n=window)||void 0===n?void 0:n.isNewVersionFirstOpen)&&void 0!==v?v:"",enter_from_merge:null==A?void 0:null===(o=A.getEnterEventParams())||void 0===o?void 0:o.enter_from_merge,enter_method:null==A?void 0:null===(r=A.getEnterEventParams())||void 0===r?void 0:r.enter_method,is_preview:1},et)}),(0,s.jsx)(nW,{}),(0,s.jsx)(ls.VolumeMemoryPlugin,{}),(0,s.jsx)(r6.default,{}),(0,s.jsx)(ll.LinkMicPlayModeLimitPlugin,{isVerifyed:N}),(0,s.jsx)(r8.RefreshPluginWrap,{position:0,index:1,props:{}}),(0,s.jsx)(rq.k,{componentName:tO.l.TITLE_PLUGIN,children:(0,s.jsx)(r3,{containerClassName:rZ.liveTitlePlugin,className:rZ.liveTitlePluginContainer,position:"rootTop",title:null===(l=S.room)||void 0===l?void 0:l.title,userCount:(0,rH.jQ)(S.room)})}),(0,s.jsx)(r$.AdaptedBySEIPlugin,{}),(null==O?void 0:null===(a=O.plugins)||void 0===a?void 0:a.includes("danmaku"))&&(0,s.jsx)(rq.k,{componentName:tO.l.DANMAKU_PLUGIN,children:(0,s.jsx)(lc,{on:!0,feature:!0})}),(null==O?void 0:null===(c=O.plugins)||void 0===c?void 0:c.includes("enter"))&&(0,s.jsx)(lo,{props:{webRid:S.web_rid,roomTeaLogParams:X},webRid:S.web_rid,roomTeaLogParams:X}),(null==O?void 0:null===(m=O.plugins)||void 0===m?void 0:m.includes("comment"))&&(0,s.jsx)(rq.k,{componentName:tO.l.COMMENT_PLUGIN,children:(0,s.jsx)(rJ.FoldChatRoomCommentPlugin,{position:0,props:{containerClassName:rZ.liveCommentPlugin,isLogin:null==P?void 0:P.id_str,onSend:g,isIframe:!0},containerClassName:rZ.liveCommentPlugin,isLogin:null==P?void 0:P.id_str,onSend:g,isIframe:!0})}),(0,s.jsx)(ld.default,{}),(null==O?void 0:null===(_=O.plugins)||void 0===_?void 0:_.includes("bitrate"))&&$&&q&&(0,s.jsx)(rq.k,{componentName:tO.l.QUALITY_SWITCH_PLUGIN,children:(0,s.jsx)(lu.default,{props:{defaultQuality:q,streamData:$,qualityList:W,screenMode:Z?tn.wq.FULL_SCREEN:tn.wq.NORMAL},defaultQuality:q,streamData:$,index:8,qualityList:W,screenMode:Z?tn.wq.FULL_SCREEN:tn.wq.NORMAL,url:z,position:1})}),(0,s.jsx)(i8.h,{source:"IframePlayer"})]}):(0,s.jsx)("div",{className:rZ.iframePlayerDefault,children:""})]})}),lh=i("951026");let lf=(0,tD.ZP)(()=>i.e("82199").then(i.bind(i,791998)),{ssr:!1});r=0;let lg=(0,er.Pi)(e=>{var t;let i=(0,u.useMemo)(()=>tx(),[]),n=(0,iw.T)(),o=(0,J.o)(),{roomStore:{foldChatroom:r,roomInfo:l,roomStatus:a,isPlayer:d},playerStore:{isFullScreen:c,isTheaterOn:m,setIsTheaterOn:_},pkStore:{pkStatus:v},linkmicStore:{linkRoomType:h,linkMicLayout:f},detailExtra:{inRoomError:g,status_code:p},vrStore:{isImmersive:I}}=o,E=(0,ix.ds)(),y=(0,u.useMemo)(()=>({abTestData:n,store:o,pipContext:E}),[n,o,E]);(0,i6.R)();let P=(0,u.useMemo)(()=>(null==l?!void 0:!l.room)||a===em.LV.END||(null==l?!void 0:!l.web_stream_url)||!l.web_rid||!!c||1===ev()(l,"room.stream_url.stream_orientation")&&!v&&"audio"!==h&&"video"!==h,[l,h,v,c,m,a]),{enlargeDynamicBg:b,enlargePadding:L}=(0,rU.K)(),S="4003073"===p,C="4003222"===p,N="4003233"===p,[w,T]=u.useState(!1);(0,u.useEffect)(()=>{if(!C&&!N||!w&&N)return;(0,iX.Nr)(location.pathname)&&(history.back(),rD.F.info(""));let e=setTimeout(()=>{window.history.length>1&&document.referrer&&document.referrer.includes("douyin.com")||(0,iX.Nr)(location.pathname)?history.back():document.referrer.includes("live.douyin.com")?window.open("https://live.douyin.com/","_self"):document.referrer.includes("www.douyin.com")?window.open("https://www.douyin.com/?recommend=1","_self"):window.open("https://live.douyin.com/","_self")},3e3);return()=>{clearTimeout(e)}},[C,w,N]);let R=g&&"4003099"!==p||!d||S||C||N;(0,u.useEffect)(()=>{R&&((0,to.q)("ISLAND_SYNC_HEADER"),(0,to.q)("ISLAND_LAYOUT_NAVIGATION"),_(!1))},[R]);let k=(0,lh.y)(R);return R?(0,s.jsxs)(s.Fragment,{children:[k,N&&(0,s.jsx)(lf,{setMaxMemberError:T,webRid:null==l?void 0:l.web_rid}),(0,s.jsx)(rK,{type:"serverError",title:C?"":S?"":"",primaryButtonTitle:S||C?"":"",primaryButtonAction:()=>{var e,t;null===(t=window)||void 0===t||null===(e=t.location)||void 0===e||e.reload()}})]}):l?(0,s.jsx)(rF,{context:y,children:(0,s.jsx)(tk.Gw,{uuid:i,children:(0,s.jsx)(tp,{value:{detailPage:e.detailPage},children:(0,s.jsxs)(i7.tA,{children:[(0,s.jsx)(iY.EA,{roomId:null!==(t=l.roomId)&&void 0!==t?t:""}),(0,s.jsx)("div",{className:Q()(tR.root,{__playerIsFull:!0,[tR.fullScreen]:c||m,[tR.fold]:r,__roomInfoBarInner:P,__roomInfoBarOuter:!P&&!I,__isAudioRoom:"audio"===h&&f!==rG.yP.MATE_CUSTOM,__isVideoRoom:"video"===h,__hasOptionBar:!0,[tR.enlargeDynamicBackground]:b,[tR.enlargePadding]:L,[tR.isClient]:(0,eG.DT)(),[tR.isImmersive]:I}),"data-e2e":"living-container",children:(0,s.jsxs)(ty,{className:Q()(tR.container,tR.containerOpt),children:[(0,s.jsxs)(tP,{className:tR.left,children:[(0,s.jsxs)(tb,{className:tR.header,children:[(0,s.jsx)(tL,{}),(0,s.jsx)(tS,{})]}),(0,s.jsx)(rY.zS,{children:(0,s.jsx)(tC,{className:tR.playerContainer})}),(0,s.jsx)(tN,{className:tR.bottom}),(0,s.jsx)(tw,{})]}),(0,s.jsx)(tT,{className:tR.right})]})})]})})})}):null});function lp(e){let t=(0,c.a)(),i=(0,u.useMemo)(()=>/iframe/.test(t.pathname),[t]);return(0,s.jsx)(rj.vD,{children:i?(0,s.jsx)(lv,{}):(0,s.jsx)(lg,(0,w._)({},e))})}var lI=i("569673"),lE=i("277395"),ly=i("402971"),lP=i("327306");let{user:lb,ABtestContext:lL}=td,lS=()=>{let[e,t]=(0,u.useState)([]);return(0,u.useEffect)(()=>{(0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"message_websocket_params"}).then(e=>{t(e)})},[]),(0,s.jsx)(tm,{websocketKey:e})};function lC(){let e=(0,J.o)(),t=(0,S.Es)();(0,u.useEffect)(()=>{var i;null==e||null===(i=e.userStore)||void 0===i||i.setOdin(t)},[t]);let{userInfo:i}=(0,ly.useUserInfoContext)();return(0,u.useEffect)(()=>{var e;let t=null==i?void 0:null===(e=i.info)||void 0===e?void 0:e.uid;t&&(0,t_.oG)(t)},[i]),(0,s.jsx)(s.Fragment,{})}function lN(){let{webrid:e}=(0,m.U)();(0,lP._)();let t={};return"object"==typeof window&&(t=(0,d.parse)(window.location.search)),(0,lI.w)({webRid:e,query:t}),!function(){let e=(0,c.a)(),t=e=>{let{referrer:t}=document;-1>=t.indexOf("douyin.com")?(e.enter_from_merge="link_share",e.enter_method="direct_open"):e.enter_from_merge="page_refresh"};(0,x.C)(()=>{var i;if(!T._.find(t=>(0,A.m)(t,e.pathname)))return;let n={};try{let e=sessionStorage.getItem(R.UY);e?!(null==(n=JSON.parse(null!=e?e:"{}"))?void 0:n.enter_from_merge)&&t(n):t(n)}catch(e){eU.kg.error("",e)}window.__INVISIBLE_QUERY__=(0,w._)({},null!==(i=window.__INVISIBLE_QUERY__)&&void 0!==i?i:{},n);let{remainQuery:o,remainQueryString:r}=(0,tv.It)(e.search.split("?")[1]);window.history.replaceState({},"",e.pathname+r)},[])}(),(0,s.jsx)(lp,{})}let lw=()=>{let e=(0,u.useMemo)(()=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){let e=new tu;return!es.s&&(window.__STORE__=e),e}let i=null!=n?n:new tu;return(Object.keys(e).length&&i.hydrate(e),es.s)?i:(window.__STORE__=i,!n&&(n=i),i)})({},!0),[]),t=(0,u.useRef)(e);return(0,u.useEffect)(()=>{let e=t.current;return()=>{setTimeout(()=>{try{var t,i,n;null==e||null===(t=e.singletonStore.message)||void 0===t||t.stop(),null==e||null===(i=e.singletonStore.message)||void 0===i||i.destroy(),null==e||null===(n=e.reset)||void 0===n||n.call(e),Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(i=>{e[t][i]=null}),e[t]=null})}catch(e){}},1e3)}},[]),(0,u.useEffect)(()=>()=>{(0,iM.pk)(),(0,lE.Ue)()},[]),(0,u.useEffect)(()=>{try{iM.sA.liveAppRenderStart()}catch(e){}},[]),(0,s.jsx)(q,{children:(0,s.jsx)(el,{children:(0,s.jsxs)(J.x.Provider,{value:e,children:[(0,s.jsx)(lC,{}),(0,s.jsx)(lS,{}),(0,s.jsx)(lN,{})]})})})};var lT=e=>{let t=(0,u.useMemo)(()=>{if(!es.s)return(0,t_.OK)()},[]);return(0,s.jsx)(rq.k,(0,H._)((0,w._)({},e),{componentName:"SpaLiving",_slardarInstance:t,children:(0,s.jsx)(lw,(0,w._)({},e))}))};function lR(){let e=(0,g.Z)(),t=(0,S.Es)();(0,u.useEffect)(()=>{var i;null==e||null===(i=e.userStore)||void 0===i||i.setOdin(t)},[t]),(0,u.useEffect)(()=>{if(!!(0,C.sF)())N.asyncCall(N.AsyncCallMethod.XRequestFullScreen)},[]);let{userInfo:i}=(0,ly.useUserInfoContext)();return(0,u.useEffect)(()=>{var e;let t=null==i?void 0:null===(e=i.info)||void 0===e?void 0:e.uid;t&&(0,p.oG)(t)},[i]),(0,s.jsx)(s.Fragment,{})}function lk(){let{webrid:e}=(0,m.U)();(0,lP._)();let t={};return"object"==typeof window&&(t=(0,d.parse)(window.location.search)),(0,j.Z)({webRid:e,query:t}),Z(),!function(){let e=(0,c.a)(),t=e=>{let{referrer:t}=document;-1>=t.indexOf("douyin.com")?(e.enter_from_merge="link_share",e.enter_method="direct_open"):e.enter_from_merge="page_refresh"};(0,x.C)(()=>{var i;if(!T._.find(t=>(0,A.m)(t,e.pathname)))return;let n={};try{let e=sessionStorage.getItem(R.UY);e?!(null==(n=JSON.parse(null!=e?e:"{}"))?void 0:n.enter_from_merge)&&t(n):t(n)}catch(e){k.kg.error("",e)}let o=(0,w._)({},null!==(i=window.__INVISIBLE_QUERY__)&&void 0!==i?i:{},n);window.__INVISIBLE_QUERY__=o;let{remainQuery:r,remainQueryString:l}=(0,O.It)(e.search.split("?")[1]);window.history.replaceState({},"",e.pathname+l),(o.enter_from_on_cellphone||o.enter_method_on_cellphone)&&(o.enter_from_merge="live_continue",o.enter_method=o.enter_method_on_cellphone,window.__INVISIBLE_QUERY__=o)},[])}(),(0,s.jsx)(D.C,{preview:{}})}(0,f.jq)(),(0,y.zA)(),(0,p.XM)();let lx=()=>{let[e,t]=(0,u.useState)([]);return(0,u.useEffect)(()=>{(0,h.ZP)({service_name:"webcast.douyin.live_pc",key:"message_websocket_params"}).then(e=>{t(e)})},[]),(0,s.jsx)(M.Z,{websocketKey:e})},lA=()=>{let{webrid:e}=(0,m.U)();(0,u.useEffect)(()=>{var e,t;if(null===I.sA||void 0===I.sA||I.sA.liveAppRenderStart(),"live.douyin.com"!==window.location.host&&(null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.search.includes("r_player=1"))){let e=performance.now()-window.ENTER_ROOM_BY_REUSE_PLAYER;null===I.sA||void 0===I.sA||I.sA.liveUrlLoadEnd(e),window.ENTER_ROOM_BY_REUSE_PLAYER=0,window.PLAYING_START_BY_REUSE_PLAYER=Date.now()}return()=>{(0,I.pk)(),(0,E.Ue)()}},[]);let t=(0,c.a)(),i=(0,u.useMemo)(()=>(0,P.M)({},!0),[]),n=(0,u.useRef)(i),o=(0,lP._)()||{},r=(0,u.useRef)(!1),{followListRoomData:l}=(0,G.Iq)(e=>{let{followListRoomData:t}=e;return{followListRoomData:t}});if((null==o?void 0:o.liveInnerFeed)&&!r.current){var a,d,_;(null==t?void 0:null===(a=t.pathname)||void 0===a?void 0:a.search("/follow/live"))!==-1&&(null==i||null===(_=i.feedStore)||void 0===_||_.addFeedList(null==l?void 0:null===(d=l.filter(e=>null==e?void 0:e.roomId))||void 0===d?void 0:d.map(e=>{var t;let{__fakeAwemeInfo:{authorInfo:i},webRid:n,roomId:o}=e;return{room:null==i?void 0:i.roomData,web_stream_url:null==i?void 0:null===(t=i.roomData)||void 0===t?void 0:t.additional_stream_url,web_rid:n,roomId:o}})),r.current=!0)}return(0,u.useEffect)(()=>{let e=n.current;return()=>{1!==Number(o.liveInnerFeed)&&2!==Number(o.liveInnerFeed)&&setTimeout(()=>{try{var t,i,n;null==e||null===(t=e.singletonStore.message)||void 0===t||t.stop(),null==e||null===(i=e.singletonStore.message)||void 0===i||i.destroy(),null==e||null===(n=e.reset)||void 0===n||n.call(e),Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(i=>{e[t][i]=null}),e[t]=null})}catch(e){}},1e3)}},[]),(0,s.jsx)(L.n,{children:(0,s.jsx)(b.r,{children:(0,s.jsxs)(F.x.Provider,{value:i,children:[(0,s.jsx)(lR,{}),(0,s.jsx)(lx,{}),(0,s.jsx)(lk,{})]})})})};var lO=()=>{var e;let t=(0,U.j)();null===v.Z||void 0===v.Z||null===(e=v.Z.recordEnterEndTimeStamp)||void 0===e||e.call(v.Z);let i=(0,c.a)(),n=u.useMemo(()=>null==i?void 0:i.search.includes("use_new_preview=true"),[i]);return(0,s.jsx)(B.k,{componentName:"LivePage",children:(0,_.getInNewProjectPreviewABWithoutStoreCheck)(t)||n?(0,s.jsx)(lT,{}):(0,s.jsx)(lA,{})})}},39974:function(e,t,i){i.d(t,{W:function(){return r}});var n=i(63746),o=i(138871);let r=e=>{let{room_id_str:t,content:i,episode_id:r,stage:l,team_id:a,camera_id:s,type:u,emoji_id:d,rtf_content:c,paste_edit_method:m}=e,_=(()=>{try{if(r&&l)return(0,o.stringify)({episode_id:BigInt(r),stage:l});return}catch(e){return}})();return n.ZP.get("/webcast/room/chat/",{params:{room_id:t,content:i,type:u||0,episode_info_str:_,flow_time:_&&Date.now(),team_id:a,camera_id:s,emoji_id:d,rtf_content:c,paste_edit_method:m}})}},109270:function(e,t,i){i.d(t,{Ew:function(){return l},Zj:function(){return o},nr:function(){return r}});var n=i(63746);let o=(0,n.eH)({url:"/webcast/privilege/screen_chat/tab/",method:"post"}),r=(0,n.eH)({url:"/webcast/privilege/screen_chat/send/",method:"post"}),l=(0,n.eH)({url:"/webcast/screen_chat/",method:"post"})},523237:function(e,t,i){i.d(t,{Z:function(){return a}});var n=i("563097");i("88648");var o="KkFN8Skm",r=i("713097"),l=i.n(r),a=e=>{let{val:t,className:i,style:r}=e;return(0,n.jsx)("div",{style:r,className:l()(o,{[null!=i?i:""]:i}),children:t})}},819972:function(e,t,i){i.d(t,{k:function(){return u}});var n=i(563097),o=i(88648),r=i(222406),l=i(620923),a=i(519055);let s=function(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"component",r=arguments.length>5?arguments[5]:void 0;null==n||n(e,t),"module"===o&&(null==r||r("report",{ev_type:"blank_screen",payload:{timestamp:Date.now(),score:0,error:{type:"js_error",message:e.message}}})),null==r||r("sendEvent",{name:"live_component_error_boundary",categories:{componentName:i,message:e.message,stack:e.stack,componentStack:t,isNewProject:!0},type:"event"})},u=e=>{let{onError:t,beforeCapture:i,fallback:u,children:d,type:c="component",componentName:m,_slardarInstance:_}=e,v=(0,o.useMemo)(()=>{if(!a.s)return _||(0,l.OK)()},[_]),h=o.useCallback((e,i)=>{s(e,i,m,t,c,v)},[c,t,m,v]);return(0,n.jsx)(r.SV,{onError:h,beforeCapture:i,fallback:u,Slardar:v,children:d})}},498547:function(e,t,i){i.d(t,{w:function(){return a}});var n=i(520739),o=i(878389),r=i(368200),l=i(563097);function a(e){var{imageData:t={},style:i={}}=e,a=(0,r._)(e,["imageData","style"]);let{url_list:s,width:u,height:d}=t,c=null==s?void 0:s[0];return c?(0,l.jsx)("img",(0,o._)((0,n._)({},a),{src:c,style:(0,o._)((0,n._)({},i),{width:u||void 0,height:d||void 0})})):null}i(88648)},185750:function(e,t,i){let n;i.d(t,{K:function(){return _}});var o=i("563097"),r=i("88648"),l=i("747909"),a=i("713097"),s=i.n(a),u=i("780654"),d=i("75137"),c={switch:"tMqkS46E",checked:"_Ioc3QzW"};let m=(n=0,()=>{let e=Date.now();return!(e-n<100)&&(n=e,!0)});function _(e){let{className:t=""}=e,{showPanel:i,toggleShowPanel:n,enable:a,loading:_}=(0,u.B3)(e=>({showPanel:e.showPanel,toggleShowPanel:e.toggleShowPanel,enable:e.enable,loading:e.loading})),v=(0,d.$)();return((0,r.useEffect)(()=>{a&&m()&&v("livesdk_danmu_button_show")},[a]),a)?(0,o.jsx)(l.Switch,{size:"large",loading:_,checked:i,onChange:()=>{let e=!i;n(e),!e&&v("livesdk_danmu_collection_icon_click")},className:s()(c.switch,i&&c.checked,t)}):null}},541248:function(e,t,i){i.d(t,{J:function(){return d},_:function(){return u}});var n=i(563097);i(88648);var o=i(780654),r=i(713097),l=i.n(r),a=i(161106);let s=()=>{let e=(0,o.B3)(e=>e.scene);return`${e}-PrivilegeSelectPopContainer`},u=()=>{let e=s();return()=>"undefined"!=typeof document&&(document.getElementById(e)||document.fullscreenElement||document.body)};function d(e){let{zIndex:t}=e,i=s(),r=(0,o.B3)(e=>e.showPanel);return(0,n.jsx)("div",{id:i,style:{zIndex:t},className:l()(a.Z.privilegeSelectPopContainer,r&&a.Z.showPanel,"privilege-select-pop-container")})}},946374:function(e,t,i){i.d(t,{NL:function(){return p},pM:function(){return g}});var n=i(563097),o=i(88648),r=i(966563),l=i(747909),a=i(713097),s=i.n(a),u=i(780654),d=i(498547),c=i(516599),m=i(277303),_=i(541248),v=i(161106),h=i(75137);function f(e){var t,i,r;let{width:l}=e,a=null!==(t=(0,u.B3)(e=>e.tabItems))&&void 0!==t?t:[],_=null!==(i=(0,u.B3)(e=>e.setStoragedStyle))&&void 0!==i?i:[],f=null!==(r=(0,u.B3)(e=>e.selectedStyle))&&void 0!==r?r:[],g=(0,h.$)();(0,o.useEffect)(()=>{g("livesdk_danmu_tab_show")},[]);let p=e=>{if(g("livesdk_danmu_tab_click",{click_results:e.toast?"fail":"success",danmu_level:e.style,results_reason:e.toast}),e.toast){c.F.info(e.toast);return}_(e.style)},I=e=>e.style===f;return(0,n.jsx)("div",{className:v.Z.tabList,style:{width:l},children:a.map(e=>(0,n.jsx)("div",{onClick:()=>p(e),className:s()(v.Z.tabItem,(0,m.as)(e)&&v.Z.lock,(0,m._y)(e)&&v.Z.grey,I(e)&&v.Z.active),children:(0,n.jsx)(d.w,{imageData:e.img_v2})},e.style))})}function g(e){let{children:t,getChildrenElement:i}=e,o=(0,u.B3)(e=>e.showPanel),{width:a,height:s}=(0,r.Z)(()=>i())||{},d=(0,_._)();return(0,n.jsx)(l.Dropdown,{rePosKey:`${a}-${s}`,position:"top",trigger:"custom",visible:o,autoAdjustOverflow:!1,getPopupContainer:d,className:v.Z.dropdownWrap,content:(0,n.jsx)(f,{width:a}),children:t})}function p(){return(0,u.B3)(e=>e.showPanel)?(0,n.jsx)("div",{className:v.Z.selectList,children:(0,n.jsx)(f,{})}):null}},101428:function(e,t,i){i.d(t,{o:function(){return _}}),i("110006"),i("826893");var n=i("563097");i("88648");var o=i("277733"),r=i("277303"),l="fn173YRd",a="JJ9f53Hq",s="Mnck4HYZ",u=i("453971"),d=i("747909"),c=i("516599");let m=(()=>{let e="screen_chat_ignore_send_confirm";return{get:()=>"true"===localStorage.getItem(e),set(t){localStorage.setItem(e,t?"true":"false")}}})(),_=async(e,t)=>{var i;if(!e)return!0;if((null!==(i=t.emojiCount)&&void 0!==i?i:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{let t=e.match(/\[.*?\]/g);return t?t.length:0}catch(e){return 0}}(t.text))>3)return c.F.info("3"),!1;let{diamond_count:_,style:v}=e;if(m.get()||!v||(0,r.BC)(v)||!_)return!0;let h=function(e){switch(e){case o.Qz.Base:return"";case o.Qz.Advanced:return"";case o.Qz.Supreme:return"";default:return""}}(v),f=!1,g=await (0,u.S)({title:"",footerFill:!0,content:(0,n.jsxs)("div",{className:l,children:[(0,n.jsxs)("p",{className:a,children:["",h,"",_,""]}),(0,n.jsx)(d.Checkbox,{className:s,"aria-label":"screen_chat_send_confirm",onChange:e=>{f=!!e.target.checked},children:""})]}),width:300});return g&&m.set(f),g}},780654:function(e,t,i){i.d(t,{B3:function(){return y},MW:function(){return S},ke:function(){return L},xo:function(){return b}});var n=i(520739),o=i(878389),r=i(368200);i(874386),i(981168);var l=i(563097),a=i(88648),s=i(668974),u=i(191769),d=i(639307),c=i(797973),m=i(911349),_=i(70360),v=i(109270),h=i(620923),f=i(96008),g=i.n(f),p=i(277303),I=i(516599);let{Context:E,useCtxSelector:y}=(0,s.q)({showPanel:!1,tabItems:[],enable:!1,toggleShowPanel:g(),setStoragedStyle:g(),scene:"chatroom",roomId:"",anchorId:"",userId:"",liveStatus:"normal",loading:!1});function P(e){let{children:t,isAdmin:i}=e,s=(0,r._)(e,["children","isAdmin"]),{roomId:f,anchorId:g}=s,[y,P]=(0,u.Z)(`selected_privilege_danmaku_style_${g}`,{listenStorageChange:!0}),[b,L]=(0,a.useState)(void 0!==y),{data:S,run:C,loading:N}=(0,d.Z)(v.Zj,{manual:!0,debounceWait:1e3,debounceLeading:!0,debounceTrailing:!0,onFinally(t,i){if((null==i?void 0:i.status_code)!==0){var r;let l=null==i?void 0:null===(r=i.data)||void 0===r?void 0:r.prompts;l&&I.F.info(l),(0,h.OK)().sendEvent({name:"getPrivilegeScreenChatTabApiError",categories:(0,n._)((0,o._)((0,n._)({},t,i),{toast:l}),e)})}}}),w=(0,a.useMemo)(()=>{var e;return(null==S?void 0:null===(e=S.data)||void 0===e?void 0:e.item)||[]},[S]),T=N&&0===w.length,R=(0,a.useMemo)(()=>w.filter(e=>(0,p.iC)(e)),[w]),k=R.length<=0,x=(0,a.useMemo)(()=>{var e;let t=[...R];return t.find(e=>e.style===y)?y:(t.sort((e,t)=>Number(t.diamond_count)-Number(e.diamond_count)),null===(e=t[0])||void 0===e?void 0:e.style)},[y,R]),A=(0,c.Z)(()=>{f&&g&&C({room_id:f,anchor_id:g,send_admin_tab:i})});(0,m.Z)(()=>{b&&A()}),(0,_.Z)(()=>{b&&A()},[i]);let O=b&&w.length>0,M=(0,c.Z)(e=>{L(e),e&&A(),!e&&P(void 0)});return(0,l.jsx)(E.Provider,{value:(0,n._)({showPanel:O,tabItems:w,toggleShowPanel:M,enable:!0,selectedStyle:x,setStoragedStyle:P,loading:T,disabled:k},s),children:t})}function b(e){let{anchorId:t,hasDanmuAuth:i,children:o}=e;return i?(0,l.jsx)(P,(0,n._)({},e),t):(0,l.jsx)(l.Fragment,{children:o})}function L(){return y(e=>{let{tabItems:t,selectedStyle:i,showPanel:n,enable:o}=e;if(!!n&&!!o)return t.find(e=>(0,p.iC)(e)&&e.style===i)})}function S(){var e;return null===(e=L())||void 0===e?void 0:e.comment_toast}},75137:function(e,t,i){i.d(t,{$:function(){return u}});var n=i(520739),o=i(595814),r=i.n(o),l=i(780654),a=i(150566),s=i(658065);let u=()=>{let e=(0,l.B3)(e=>r()(e,["roomId","anchorId","userId","privilegeLevel","liveStatus"])),t=()=>({enter_method:(0,a.Rs)("enter_method"),action_type:"click",anchor_id:e.anchorId,room_id:e.roomId,privilege_level:e.privilegeLevel,live_status:e.liveStatus,request_id:(0,a.Rs)("request_id"),user_id:e.userId,enter_from_merge:(0,a.Rs)("enter_from_merge")||(0,s.yW)()});return(e,i)=>{var o;null===(o=window)||void 0===o||o.collectEvent(e,(0,n._)({},t(),i))}}},905925:function(e,t,i){i.d(t,{j:function(){return s}});var n=i(520739),o=i(563097);i(88648);var r=i(780654),l=i(58655),a=i(859231);function s(e){var t,i,s,u;let{roomStore:{roomInfo:d,liveStatus:c},userStore:{userInfo:m}}=(0,l.o)(),_=null==m?void 0:m.id_str,v=null==d?void 0:d.room,h=null==m?void 0:null===(t=m.user_attr)||void 0===t?void 0:t.is_admin,f=null==v?void 0:null===(i=v.room_auth)||void 0===i?void 0:i.Danmaku,g=null==m?void 0:null===(s=m.pay_grade)||void 0===s?void 0:s.level;return(0,o.jsx)(r.xo,(0,n._)({roomId:null==d?void 0:d.roomId,anchorId:null==d?void 0:null===(u=d.anchor)||void 0===u?void 0:u.id_str,hasDanmuAuth:f,isAdmin:h,liveStatus:a.EY[c]||"normal",privilegeLevel:g,userId:_},e))}},665859:function(e,t,i){i.d(t,{l:function(){return m}});var n=i("520739"),o=i("878389"),r=i("563097"),l=i("88648"),a=i("272353"),s={icon:"EjH5NcSF"},u=i("713097"),d=i.n(u);let c={0:{key:"unknow_value",render:()=>null},1:{key:"string_value",render(e,t){if(e&&"string"!=typeof e){var i,l,s;t=(0,o._)((0,n._)({},t),{color:(0,a.HW)(null==e?void 0:null===(i=e.format)||void 0===i?void 0:i.font_color),fontSize:null==e?void 0:null===(l=e.format)||void 0===l?void 0:l.font_size,fontWeight:(null==e?void 0:null===(s=e.format)||void 0===s?void 0:s.font_type)?500:400}),e=null==e?void 0:e.string_value}return e?(0,r.jsx)("span",{style:t,children:e}):null}},11:{key:"user_value",render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,{user:n,left_additional_content:o="",right_additional_content:l="",self_show_real_name:a}=e;if(!n)return null;let s=n.nickname;return(0,r.jsx)("span",{className:"hts-live-text-user",style:t,onClick:null==i?void 0:i.onClick,children:`${o}${s}${l}`})}},12:{key:"gift_value",render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{name_ref:t}=e,i=null==t?void 0:t.default_pattern;return i?(0,r.jsx)("span",{children:i}):null}},13:{key:"heart_value",render(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],null}},14:{key:"pattern_ref_value",render(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],null}},15:{key:"image_value",render(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,{image:a}=t,u=null==a?void 0:null===(e=a.url_list)||void 0===e?void 0:e[0],c=(0,o._)((0,n._)({},i),{height:null==a?void 0:a.height,width:null==a?void 0:a.width});return u?(0,r.jsx)("img",{className:d()(s.icon,"hts-live-text-img"),style:c,src:u,onClick:null==l?void 0:l.onClick}):null}},2:{key:"image_value",render(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,{image:l}=t,a=null==l?void 0:null===(e=l.url_list)||void 0===e?void 0:e[0],u=(0,o._)((0,n._)({},i),{height:null==l?void 0:l.height,width:null==l?void 0:l.width});return a?(0,r.jsx)("img",{className:d()(s.icon,"hts-live-text-img"),style:u,src:a}):null}}};function m(e){let{text:t,customRenderPiece:i,onPieceClick:n}=e,{pieces:o=[]}=t;return(0,r.jsx)(r.Fragment,{children:o.map((e,t)=>{let{type:o,format:s}=e,{color:u,use_remote_clor:d,weight:m,font_size:_,italic:v}=s||{},h=null==i?void 0:i(e);if(h)return h;let f=c[o];if(!f)return null;let{key:g,render:p}=f,I=e[g],E={fontSize:_||14,fontWeight:m,color:d&&u?(0,a.HW)(u):void 0,fontStyle:v?"italic":void 0};return(0,r.jsx)(l.Fragment,{children:p(I,E,{onClick:t=>{null==n||n({event:t,piece:e})}})},`${g}-${t}`)})})}},26896:function(e,t,i){i.r(t),i.d(t,{InPicturePlaceholder:function(){return E},default:function(){return y},InPicturePlugin:function(){return I}}),i("874386");var n=i("563097"),o=i("88648"),r=i("629582"),l=i("782563"),a=i("388862"),s=i("32167"),u="AdBbB2h2",d="Xv69Fl1I",c="aa4MHXlo",m="z0hqdMFg",_={smallWindowExit:{eventName:"small_window_exit",params:{enter_from:"",action:"",action_type:"",stream_type:""}}},v=i("393265"),h=i("58655"),f=i("485019"),g=i("544933");let p=e=>{let{onClick:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:u}),(0,n.jsxs)("div",{className:d,children:[(0,n.jsx)("div",{className:c,children:""}),(0,n.jsx)("div",{className:m,onClick:t,children:""})]})]})},I=e=>{let{isActive:t,playerRef:i,handelIsInPic:u}=e,[d,c]=(0,o.useState)(!1),{player:m}=(0,v.n)(),h=(0,o.useRef)(new g.h(_));return(0,o.useEffect)(()=>{let e;let i=null==m?void 0:m.video;if(i&&t&&m){let t=()=>{var t,i,n;!(0,l.DT)()&&(0,a.DJ)()&&((null==m?void 0:null===(t=m.video)||void 0===t?void 0:t.readyState)>2||m.currentTime)&&!(null==m?void 0:m.isInPicture)&&(null==m||null===(n=m.video)||void 0===n||null===(i=n.requestPictureInPicture)||void 0===i||i.call(n).then(()=>{c(!0),m.isInPicture=!0,clearTimeout(e)}).catch(e=>{m.isInPicture=!0,c(!1)}))};e=setTimeout(t,0),null==m||m.on(r.FP.LOADED_DATA,t);let n=()=>{c(!0)},o=()=>{c(!1)};return i.addEventListener("enterpictureinpicture",n),i.addEventListener("leavepictureinpicture",o),()=>{i.removeEventListener("leavepictureinpicture",o),i.removeEventListener("enterpictureinpicture",n),null==m||m.off(r.FP.LOADED_DATA,t),m.isInPicture=!1,clearTimeout(e)}}},[t,m]),(0,o.useEffect)(()=>{u&&u(d)},[d]),(0,o.useEffect)(()=>{var e,t},[!1,!1,d]),d?(0,n.jsx)(p,{onClick:e=>{if(e.stopPropagation(),(0,a.DJ)()){var t,i;null===(t=(i=document).exitPictureInPicture)||void 0===t||t.call(i)}c(!1),h.current.sendLog("smallWindowExit",{enter_from:(0,s.vM)()})}}):null},E=()=>{let{isLivingPip:e,closeLivingPip:t}=(0,f.ds)(),{eventStore:{playerEvent:i}}=(0,h.o)();return e?(0,n.jsx)(p,{onClick:()=>{t(),i.livesdkMiniWindowExit({click_position:"web_icon_exit"})}}):null};var y=()=>{let{feedStore:{isActive:e},roomStore:{setIsPip:t}}=(0,h.o)();return(0,n.jsx)(I,{isActive:e,handelIsInPic:t})}},453971:function(e,t,i){i.d(t,{S:function(){return u}});var n=i("520739"),o=i("368200");i("675373");var r=i("747909"),l=i("713097"),a=i.n(l),s="UX6Kbyjl";function u(e){let{title:t,className:i}=e,l=(0,o._)(e,["title","className"]);return new Promise(i=>{r.Modal.confirm((0,n._)({className:a()("noSemiGlobal","semi-always-dark",s,e.className),width:400,centered:!0,mask:!1,icon:null,title:t,okText:"",cancelText:"",preventScroll:!0,onOk:()=>{i(!0)},onCancel:()=>{i(!1)},closeOnEsc:!0,getPopupContainer:()=>document.fullscreenElement||document.body,zIndex:1e5},l))})}},581409:function(e,t,i){i.d(t,{Z:function(){return u}});var n=i("563097");i("88648");var o="cMpsmvn_",r="HP4k8iEk",l=i("523237"),a=i("713097"),s=i.n(a),u=e=>{let{info:t,btn:i,keyClassName:a}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:o,children:t}),(0,n.jsx)(l.Z,{className:s()(r,a),val:i})]})}},211058:function(e,t,i){i.d(t,{Z:function(){return a}});var n=i("563097");i("88648");var o={tooltips:"Z4vrjOCq",popup:"E6ZfKYFn",top:"z0pfNfh4",bottom:"X4pMIbr2",left:"F3OmQzm6",right:"y1ZNHl5U"},r=i("713097"),l=i.n(r);function a(e){let{content:t,children:i,position:r="top",className:a,tooltipStyle:s={}}=e;return(0,n.jsxs)("div",{className:o.tooltips,children:[(0,n.jsx)("div",{className:l()(o.popup,o[r],a),style:s,children:t}),i]})}},903880:function(e,t,i){i.d(t,{S:function(){return P}});var n=i("520739"),o=i("878389"),r=i("368200");i("675373"),i("874386");var l=i("563097"),a=i("88648"),s=i("411415"),u=i("338426"),d=i("315985"),c=i("817938"),m=i("155845"),_=i("81947"),v=i("819972"),h=i("713097"),f=i.n(h),g=i("780654"),p=i("185750"),I={commentEditorWrap:"_JaLZP3V",focus:"jMp9QX7x",focusOrNoEmpty:"WpjpX0o_",danmakuSwitch:"mtIBQnaR",commentEditor:"FhIBByiy"};let E=(0,u.ZP)(()=>Promise.all([i.e("22556"),i.e("23145"),i.e("21248"),i.e("11073"),i.e("8734")]).then(i.bind(i,919452)),{ssr:!1});function y(e){let t=(0,a.useRef)(null),[i,u]=(0,a.useState)(!1);(0,d.Z)(()=>u(!1),t);let{maxLength:_,placeholder:v,disabled:h,className:y,onSend:P}=e,b=(0,r._)(e,["maxLength","placeholder","disabled","className","onSend"]),{enablePrivilegeDanmu:L,showPrivilegePanel:S}=(0,g.B3)(e=>({enablePrivilegeDanmu:e.enable,showPrivilegePanel:e.showPanel})),C=(0,s._i)(e=>e.editor),N=(0,s._i)(e=>e.isEmpty),w=(0,c.Z)(null==C?void 0:C.getRootContainer());(0,m.Z)("enter",e=>{e.preventDefault(),w&&(null==P||P())},{exactMatch:!0,useCapture:!0});let T=(0,g.MW)()||v;return(0,l.jsxs)("div",(0,o._)((0,n._)({},b),{className:f()(y,I.commentEditorWrap,w&&I.focus,(i||w||!N||S)&&I.focusOrNoEmpty),onClick:()=>{u(!0),null==C||C.focus()},"data-e2e":"live-chatting",ref:t,children:[L&&(0,l.jsx)(p.K,{className:I.danmakuSwitch}),(0,l.jsx)(E,{editable:!h,placeholder:T,maxLength:S?15:_,className:I.commentEditor})]}))}let P=(0,a.memo)(e=>(0,l.jsx)(v.k,{componentName:_.l.COMMENT_EDITOR,children:(0,l.jsx)(y,(0,n._)({},e))}))},254626:function(e,t,i){i.d(t,{a:function(){return o},w:function(){return n}});let n="INSERT_AT_USER_COMMAND",o="INSERT_EMOJI_COMMAND"},822942:function(e,t,i){i.d(t,{O:function(){return o},s:function(){return n}});let n="live_at_user",o="live_emoji"},411415:function(e,t,i){i.d(t,{_i:function(){return b},tz:function(){return P}}),i(874386);var n=i(563097),o=i(158041),r=i(668974),l=i(88648),a=i(116876),s=i(254626),u=i(379928),d=i(797973),c=i(96008),m=i.n(c),_=i(315437),v=i(469063),h=i(10455),f=i(516599),g=i(453971),p=i(58655),I=i(664590);let E="non_paste",y=(0,o.kr)({editor:null,insertAtUser:m(),insertEmoji:()=>!1,setEditor:m(),getTextInfo:()=>({plainText:"",rtfElements:[]}),isEmpty:!0,setIsEmpty:m(),markPaste:m(),markPasteEdit:m(),getPasteEditMethod:()=>E,resetPasteEditMethod:m()}),P=(0,l.memo)(e=>{let{children:t}=e,[i,o]=(0,l.useState)(null),[r,c]=(0,l.useState)(!1),m=(0,l.useRef)(E),P=(0,l.useRef)(!1),{roomStore:{foldChatroom:b,setFoldChatroom:L}}=(0,p.o)(),S=(0,I.o)(),C=(0,u.Z)(async e=>{let{userInfo:t,triggerType:n}=e;if("number"==typeof(null==t?void 0:t.uid)&&(t.uid=String(t.uid)),!i)return;let o=(0,a.X9)(i.getContent()),r=()=>{b&&L(!1)},l=()=>{i.execCommand(s.w,t),S("livesdk_at_reply",{trigger_type:n,to_user_id:null==t?void 0:t.uid})},u=o&&(null==o?void 0:o.uid)===(null==t?void 0:t.uid)&&(null==o?void 0:o.webcastUid)===(null==t?void 0:t.webcastUid);if(o){if(u)r(),i.focus();else{if(!await (0,g.S)({title:"",width:600}))return;r(),i.reset(),l()}}else r(),l()},{leading:!0}).run,N=(0,d.Z)(e=>{let{emojiInfo:t,limitCount:n=3,onlyLimitActivity:o}=e;return!!i&&((t.isActivity||!o)&&(0,h.jj)({deltaSet:i.getContent(),onlyActivity:o}).length>=n?(f.F.info(`${n}${o?"":""}`),!1):(i.execCommand(s.a,t),!0))}),w=(0,d.Z)(()=>{if(!i)return{plainText:"",rtfElements:[]};let{plainText:e,rtfElements:t}=(0,_.$U)(i);return{plainText:e,rtfElements:t}}),T=(0,d.Z)(()=>{m.current=E,P.current=!1}),R=(0,d.Z)(()=>{m.current="pure_paste",P.current=!1}),k=(0,d.Z)(()=>{if("pure_paste"===m.current){if(P.current){m.current="edit_with_paste";return}P.current=!0}}),x=(0,d.Z)(()=>m.current);(0,v.n)(i?C:void 0);let A=(0,l.useMemo)(()=>({editor:i,setEditor:o,insertAtUser:C,getTextInfo:w,insertEmoji:N,isEmpty:r,setIsEmpty:c,markPaste:R,markPasteEdit:k,getPasteEditMethod:x,resetPasteEditMethod:T}),[i,o,C,w,N,r,c,R,k,x,T]);return(0,n.jsx)(y.Provider,{value:A,children:t})}),b=(0,r.Z)(y)},116876:function(e,t,i){i.d(t,{HV:function(){return a},Rs:function(){return u},X9:function(){return s},o7:function(){return l}}),i(284961),i(826893),i(268917);var n=i(866152),o=i(11622),r=i(822942);let l=e=>{var t;return null==e?void 0:null===(t=e.attributes)||void 0===t?void 0:t[r.s]},a=e=>{try{var t;return JSON.parse((null==e?void 0:null===(t=e.attributes)||void 0===t?void 0:t[r.s])||"")}catch(e){return null}},s=e=>{try{let t=null;if(e.forEach(e=>{if(!t)t=e.ops.find(e=>l(e))||null}),t)return a(t);return null}catch(e){return null}},u=e=>{try{e.forEach((t,i)=>{if(t.zoneType!==n.Ak.Content)return;let r=t.ops.filter(e=>!l(e));e.replace(i,new o.I({zoneId:i,ops:r}))})}catch(e){}return e}},10455:function(e,t,i){i.d(t,{Wi:function(){return r},_$:function(){return l},bn:function(){return s},jj:function(){return a}}),i(268917),i(874386);var n=i(822942);let o=e=>{var t;return null==e?void 0:null===(t=e.attributes)||void 0===t?void 0:t[n.O]},r=e=>{try{var t;return JSON.parse((null==e?void 0:null===(t=e.attributes)||void 0===t?void 0:t[n.O])||"")}catch(e){return null}},l=e=>{var t;return o(e)&&!!(null===(t=r(e))||void 0===t?void 0:t.isActivity)},a=e=>{let{deltaSet:t,onlyActivity:i}=e,n=[];try{return t.forEach(e=>{let t=e.ops.filter(i?l:o);n.push(...t)}),n}catch(e){return n}},s=e=>{var t,i;let{editor:n,onlyActivity:o}=e;return null===(t=a({deltaSet:null==n?void 0:null===(i=n.getContent)||void 0===i?void 0:i.call(n),onlyActivity:o}))||void 0===t?void 0:t.length}},469063:function(e,t,i){i.d(t,{n:function(){return u}});var n=i(520739),o=i(878389),r=i(51162),l=i(797973),a=i(88648);let s=(()=>{let e=null,t=null,i=()=>e=null;return{get:()=>e,clear:i,set:n=>{e=n,t&&clearTimeout(t),t=setTimeout(()=>{i()},1e4)}}})();function u(e){let t=(0,l.Z)(t=>{s.clear(),null==e||e(t)}),i=(0,r.Z)("AT_USER_BUS_EVENT",t),u=(0,l.Z)(e=>(s.set(e),i.trigger(e)));return(0,a.useEffect)(()=>{let i=s.get();i&&e&&(t(i),s.clear())},[e]),(0,o._)((0,n._)({},i),{trigger:u})}},315437:function(e,t,i){i.d(t,{$U:function(){return a}});var n=i(520739);i(268917),i(284961),i(826893),i(874386),i(779788);var o=i(116876),r=i(10455);let l=e=>{let t=[];try{for(let o of e.getContentState().getZoneState("0"))for(let r of o.hasLineMarker()?o.getOps().slice(1):o.getOps()){var i;let o={text:r.insert,attributes:(0,n._)({},r.attributes)};e.pluginManager.call("editorCollectText",o),t.push({text:null===(i=o.text)||void 0===i?void 0:i.replace(/\n/g,""),attributes:o.attributes})}}catch(e){}return t},a=e=>{let t=0,i="",n=[];try{l(e).forEach(e=>{let{text:l}=e,a=(0,o.o7)(e);if(a){let i=(0,o.HV)(e);(null==i?void 0:i.uid)&&n.push({type:2,value:JSON.stringify({uid:i.uid,webcast_uid:i.webcastUid}),start:t,length:l.length})}if((0,r._$)(e)){let i=(0,r.Wi)(e);(null==i?void 0:i.emojiId)&&n.push({type:1,value:null==i?void 0:i.emojiId,start:t,length:l.length})}t+=l.length,i+=l,a&&(t+=1,i=`${i} `)})}catch(e){}return{plainText:i.trim(),rtfElements:n}}},660989:function(e,t,i){i.r(t),i.d(t,{FoldChatRoomCommentPlugin:function(){return j},default:function(){return G}}),i("874386"),i("954372"),i("826893"),i("284961");var n=i("563097"),o=i("827045"),r=i("306537"),l=i("393265"),a=i("155067"),s=i("360709");let u=e=>{let t=0;if(document.selection){e.focus();let i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||0===e.selectionStart)&&(t="backward"===e.selectionDirection?e.selectionStart||0:e.selectionEnd||0);return t},d=(e,t)=>{if(null!==e){if(e.createTextRange){let i=e.createTextRange();i.move("character",t),i.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()}};var c=i("88648"),m={comment:"PgVT8Ztc",comment_input:"tiACYL3k",danmuSwitch:"LCz9svpA",text:"RwmH74lR",fixed_text:"YDHlZrcb",emoji_icon:"MTqhrWD0",fixed_chat:"otdxvxjC",no_login:"bZHW1Zsl",login:"DuGKGgUg"},_=i("713097"),v=i.n(_),h=i("58655"),f=i("520739"),g=i("878389");let p=(0,c.forwardRef)((e,t)=>(0,n.jsxs)("svg",(0,g._)((0,f._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,n.jsx)("path",{d:"M8 8c0 1.105-.672 2-1.5 2S5 9.105 5 8s.672-2 1.5-2S8 6.895 8 8zM13.5 10c.828 0 1.5-.895 1.5-2s-.672-2-1.5-2-1.5.895-1.5 2 .672 2 1.5 2zM10 14.53c-1.657 0-3-.96-3-2.143 0-1.183 6-1.183 6 0 0 1.184-1.343 2.143-3 2.143z",fill:"#fff",fillOpacity:".5"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10s4.477 10 10 10 10-4.477 10-10S15.523 0 10 0zM2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0z",fill:"#fff",fillOpacity:".5"})]})));var I=i("612362"),E=i("629582"),y=i("725215"),P=i("650055"),b=i("516599"),L=i("780654"),S=i("101428"),C=i("541248"),N=i("946374"),w=i("185750"),T=i("905925"),R=i("254575"),k=i("797973"),x=i("821897"),A=i("207964"),O=i("240026"),M=i("716551");let F=()=>!1,D=(0,y.Pi)(e=>{var t,i,a;let{onSend:_,isLogin:f,isIframe:g,activity:E}=e,{roomStore:{emojiList:y,roomInfo:T,activityEmojiGroup:D},eventStore:{chatEvent:j}}=(0,h.o)(),G=c.useRef(null),[U,V]=c.useState(""),K=c.useRef(!1),Y=c.useRef(null),{player:Z}=(0,l.n)(),[B,H]=c.useState(!1),W=c.useRef(32),Q=c.useRef(null),$=(0,L.ke)(),q=$?15:50,[J,z]=c.useState(!1),X=c.useRef(),ee=c.useRef("click"),{liveJuneOptimize:et}=(0,O.T)(),ei=c.useMemo(()=>1===et,[et]),en=c.useCallback(e=>{let{value:t}=e.target;V(t)},[]);c.useEffect(()=>{(null==U?void 0:U.length)>q&&V(U.slice(0,q))},[q]),c.useEffect(()=>{if(ei&&!J){let e=e=>{"Enter"===e.key&&!e.shiftKey&&(clearTimeout(X.current),e.preventDefault(),null==Z||Z.focus({isLock:!0}),X.current=setTimeout(()=>{Y.current.focus(),ee.current="hotkey"},1e3))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),clearTimeout(X.current)}}},[Y,J,ei,Z]);let eo=()=>{g?(0,r.dn)({headerText:""}):(0,o.p)().then(e=>{var t,i;E&&Z.exitFullscreen(),e({headerText:"",success:()=>{!F()&&window.location.reload()},next:`https://${null===(i=window)||void 0===i?void 0:null===(t=i.location)||void 0===t?void 0:t.host}`})})},er=(0,R.Z)((0,k.Z)(async()=>{if(!f){Z.exitFullscreen(),eo();return}let e=U&&""!==U.trim();if(!!e&&!!_&&(!$||!!await (0,S.o)($,{text:U})))e&&_(U,(0,P.BQ)(U,D[0]),$,ee.current),V("")})),el=c.useCallback(()=>{K.current=!0},[]),ea=c.useCallback(()=>{K.current=!1},[]),es=c.useCallback(()=>{null==Z||Z.focus({isLock:!0}),z(!0)},[]),eu=c.useCallback(()=>{null==Z||Z.focus({isLock:!1}),z(!1),ee.current="click"},[]),ed=c.useCallback(e=>{if(H(!1),Y.current.focus(),q&&(U+e.display_name).length>q)return;if(e.isEmojiGroup&&(0,P.yO)(U,D[0]).length>=3){b.F.info("");return}let t=u(Y.current);Y.current.value=U.substring(0,t)+e.display_name+U.substring(t),V(Y.current.value),d(Y.current,t+e.display_name.length)},[U,q]),ec=c.useCallback(e=>{let t=/\[[^\[\]\n]*?]$/,i=u(Y.current),n=U.substring(0,i),o=n.lastIndexOf("["),r=n.lastIndexOf("]"),l=U.substring(i,U.length),a=o>r&&-1!==l.indexOf("]"),s=t.test(n)||a;if(-1!==l.indexOf("]")&&"]"!==U[i-1]&&(i=l.indexOf("]")+i+1),"Backspace"===e.key&&s){e.preventDefault(),e.stopPropagation();let n=U.substring(0,i).replace(t,"");Y.current.value=n+U.substring(i),V(Y.current.value),d(Y.current,n.length)}else"Enter"===e.key&&!K.current&&(e.preventDefault(),er())},[U,Y.current]),em=(0,L.MW)()||ei?"(enter)":"";(0,x.Z)(()=>{let e=Y.current;if(!!e)e.style.height="1em",e.style.height=`${e.scrollHeight}px`},[U,em],{wait:200});c.useEffect(()=>{var e},[!1,!1]);let e_=(0,A.useGetLoginLimitAB)();return f?(0,n.jsxs)("div",{className:v()(m.comment,{[m.activity]:E}),onKeyDown:e=>e.stopPropagation(),style:{marginLeft:void 0},children:[(0,n.jsx)(C.J,{zIndex:1}),(0,n.jsx)(N.pM,{getChildrenElement:()=>G.current,children:(0,n.jsxs)("div",{className:m.comment_input,ref:G,children:[(0,n.jsx)(w.K,{className:m.danmuSwitch}),(0,n.jsx)("textarea",{className:v()(m.text,M.nk),ref:Y,maxLength:q,style:{lineHeight:"24px"},value:U,rows:1,onChange:en,placeholder:em,onFocus:es,onBlur:eu,onKeyDown:ec,onCompositionStart:el,onCompositionEnd:ea}),(0,n.jsx)(p,{className:m.emoji_icon,onClick:e=>{var t;H(e=>!e),null==e||e.stopPropagation(),null==Q||null===(t=Q.current)||void 0===t||t.toggle()}}),(null==T?void 0:null===(a=T.room)||void 0===a?void 0:null===(i=a.owner)||void 0===i?void 0:null===(t=i.subscribe)||void 0===t?void 0:t.open)===1?(0,n.jsx)(I._,{ref:Q,emojiList:y,onEmojiClick:ed,emojiTea:j}):B?(0,n.jsx)(s.Z,{className:v()("webcast-chatroom___emoji-panel",{hidden_emoji:!B}),style:{bottom:W.current?`${W.current+10}px`:`${52}px`},emojiList:y,showEmoji:B,onEmojiClick:ed,setShowEmoji:H,emojiTea:j}):null]})})]}):e_?(0,n.jsxs)("div",{className:m.no_login,children:[(0,n.jsx)("span",{className:m.login,onClick:eo,children:""}),""]}):(0,n.jsxs)("div",{className:m.no_login,children:["",(0,n.jsx)("span",{className:m.login,onClick:eo,children:""}),""]})}),j=(0,a.rW)(D);var G=(0,y.Pi)(()=>{let{userStore:{userInfo:e},chatStore:{onSend:t},roomStore:{isFixedChat:i}}=(0,h.o)(),o=c.useMemo(()=>({isLogin:!!(null==e?void 0:e.id_str),onSend:null==t?void 0:t.current,isFixedChat:i}),[e.id_str,t,i]);return(0,n.jsx)(T.j,{scene:"chatroom",children:(0,n.jsx)(j,{props:o,position:E.PZ.CONTROL_LEFT})})})},85895:function(e,t,i){i.d(t,{s:function(){return w}});var n=i(520739),o=i(368200);i(675373),i(874386);var r=i(563097),l=i(88648),a=i(338426),s=i(103423),u=i(713097),d=i.n(u),c=i(58655),m=i(393265),_=i(725215),v=i(725896),h=i(782563),f=i(654575),g=i(309931);let p=(0,a.ZP)(()=>Promise.all([i.e("74792"),i.e("66135"),i.e("5498"),i.e("21189"),i.e("12563"),i.e("96919"),i.e("20844"),i.e("14243"),i.e("69775")]).then(i.bind(i,878183)),{ssr:!1}),I=new v.N,E="__Live_Share_Mouse_Enter",y="__Live_Share_Mouse_Leave",P="__Live_Share_Choose_Friend",b="__Live_Share_Share_To_Friend",L="__Live_Share_Share_Success",S="__Live_Share_Outer_Click",C="__Live_Share_Outer_Failed",N="__Live_Share_Close",w=e=>{var t,i,o,r,l,a,s;let{onMouseEnter:u,onMouseLeave:d,onChooseFriend:c,onShareToFriend:m,onShareSuccess:_,onOuterClick:v,onShareFailed:h,onShareClose:g,store:p,shareFrom:w}=e,T=e=>function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];null==e||e(...i)},R={[S]:T(v),[E]:T(u),[y]:T(d),[P]:T(c),[b]:T(m),[L]:T(_),[C]:T(h),[N]:T(g)};return Object.keys(R).forEach(e=>{I.on(e,R[e])}),null==p||null===(t=p.shareStore)||void 0===t||t.setShowShare(!0),null==p||p.shareStore.setShareFrom(w||"lottery"),"share_icon"===w&&window.collectEvent("livesdk_share_icon_click",(0,n._)({room_id:null==p?void 0:null===(o=p.roomStore)||void 0===o?void 0:null===(i=o.roomInfo)||void 0===i?void 0:i.roomId,anchor_id:null==p?void 0:null===(s=p.roomStore)||void 0===s?void 0:null===(a=s.roomInfo)||void 0===a?void 0:null===(l=a.room)||void 0===l?void 0:null===(r=l.owner)||void 0===r?void 0:r.id_str},(0,f.Nu)())),()=>{var e;null==p||null===(e=p.shareStore)||void 0===e||e.setShowShare(!1),Object.keys(R).forEach(e=>{I.off(e,R[e])})}};t.Z=(0,_.Pi)(e=>{let{className:t=""}=e,i=(0,o._)(e,["className"]),{player:a}=(0,m.n)(),{shareStore:u,roomStore:_}=(0,c.o)(),v=(0,l.useRef)(null),w=e=>function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];I.emit(e,...i)};return(0,l.useEffect)(()=>{let e=e=>{let t=e.target.parentNode;for(;t;){if(t===v.current)return;t=t.parentNode}I.emit(S,e)};return document.body.addEventListener("click",e),()=>{document.body.removeEventListener("click",e)}},[]),(0,l.useEffect)(()=>{if(u.showShare&&(null==_?void 0:_.roomInfo)){var e,t,i,o;window.collectEvent("livesdk_share_card_show",(0,n._)({share_from:null==u?void 0:u.shareFrom,room_id:null==_?void 0:null===(e=_.roomInfo)||void 0===e?void 0:e.roomId,anchor_id:null==_?void 0:null===(o=_.roomInfo)||void 0===o?void 0:null===(i=o.room)||void 0===i?void 0:null===(t=i.owner)||void 0===t?void 0:t.id_str},(0,f.Nu)()))}},[u.shareFrom,u.showShare]),g.createPortal((0,r.jsx)("div",{className:d()(s.Z.liveShare,t,{[s.Z.isInClient]:(0,h.DT)()}),ref:v,style:{left:u.left,top:u.top,display:u.showShare?"block":"none"},children:(0,r.jsx)(p,(0,n._)({player:a,shareeListHeight:u.height,onMouseEnter:w(E),onMouseLeave:w(y),handleChooseFriend:w(P),handleShareToFriend:w(b),handleShareSuccess:w(L),handleShareError:w(C),handleShareClose:w(N),shareFrom:null==u?void 0:u.shareFrom,hidden:!u.showShare},i))}),document.body)},{forwardRef:!1})},937788:function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var n=i(88648),o=i(393265),r=i(58655),l=i(629582);function a(e){let{eventStore:{playerEvent:t}}=(0,r.o)(),{player:i}=(0,o.n)(),a=(0,n.useCallback)(i=>{switch(i.action){case"switch_danmu":null==t||t.liveDanmakuBtnClickEvent(!i.isOpen,e.logObj);break;case"switch_play_pause":null==t||t.livePlayBtnClickEvent(!i.paused,e.logObj);break;case"switch_fullscreen":null==t||t.liveFullScreenBtnEvent(i.fullscreen,e.logObj)}},[e.logObj]);return(0,n.useEffect)(()=>(null==i||i.on(l.FP.USER_ACTION,a),()=>{null==i||i.off(l.FP.USER_ACTION,a)}),[a]),null}},867386:function(e,t,i){i.d(t,{X7:function(){return n},xU:function(){return o}});let n={auto:"",origin:"",fhd:"1440P",uhd:"",hd:"",sd:"",ld:""},o={uhd:"4K",hd:"1080P",sd:"720P",ld:"480P"}},153387:function(e,t,i){i.r(t),i.d(t,{QualitySwitchPluginWrapper:function(){return eu},default:function(){return ed}}),i("874386"),i("250440");var n=i("563097"),o=i("88648"),r=i("713097"),l=i.n(r),a=i("520739");i("882732"),i("544943"),i("413806"),i("826893");var s=i("738612"),u=i("889503"),d=i("620923"),c=i("457388"),m=i("108374"),_=i("134761"),v=i("516599"),h="FhJtsotO";class f{}(0,_._)(f,"info",e=>{let t=document.querySelector(".__livingPlayer__");if(!t)return;let i={className:h,root:t};"string"==typeof e?i.text=e:i=(0,a._)({},i,e),v.F.info(i)});var g=i("669768"),p=i("58655"),I={origin:"origin"},E=i("461115"),y=i("754488"),P=i("831202"),b=i("782563"),L=i("629582"),S=i("987189");i("927234"),i("268917");var C=i("207964"),N=i("797973"),w=i("983096"),T=i("232600"),R=i("727233");let k=(e,t)=>{try{if(!t)return e;let i=new URL(e),{searchParams:n}=i;return n.set("abr_pts",String(t)),null==i?void 0:i.toString()}catch(e){}return e},x=(e,t)=>{if(!e||!t)return!1;let i=new URL(e),n=new URL(t);return i.pathname===n.pathname},A=e=>{let{eventStore:{playerEvent:t},streamStore:{setIsH265Error:i,useBackUp:n},roomStore:{setIsShowRefreshPage:r}}=(0,p.o)(),{stream:l,quality:_,onSwitch:v,isUse:h,sessionId:A,player:O,screenMode:M,qualityList:F,isActivity:D,setNoStream:j,showRefreshPage:G,roomId:U}=e,{ishNewH265:V,addH265ErrorNum:K}=(0,y.Z)({quality:_}),Y=o.useRef(_),Z=o.useRef(!1),B=o.useRef(!1),[H,W]=o.useState(!1),Q=o.useRef(null),{abrPts:$}=(0,E.Z)(),q=o.useRef(!1),J=o.useRef({}),z=async e=>{if(J[e])return J[e];try{let t=await (0,m.Zb)(e,1);return J[e]=t,t}catch(t){return e}},X=o.useRef(()=>{}),ee=o.useRef(),{getShouldDisableManualHandler:et,preIsAbrQualityRef:ei,getBeforeDefinition:en}=(0,S.T)({playerEvent:t,quality:_,screenMode:M,preQuality:Y,enable:h}),eo=function(e){let t=(0,C.useInLivePlayerSeamlessSwitchAB)(),i=(0,o.useRef)([]),n=(0,N.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i.current.forEach(e=>e()),i.current=e});return(0,w.Z)(()=>n([])),(0,N.Z)(i=>{var o;let{url:r}=i;if(!e||!r)return;let l=[];if(!t||"function"!=typeof e.seamlessSwitch||e.paused||(null===(o=e.baseConfig)||void 0===o?void 0:o.coreType)!=="mediastream"||(0,T.aN)(r)!==(0,T.aN)(e.src)?1:0)e.src=r;else l.push(e.once(L.FP.KEYFRAME,t=>{if("number"!=typeof(null==t?void 0:t.pts)){e.src=r;return}let i=k(r,Number(t.pts));l.push(e.once(L.FP.SWITCH_ERROR,t=>{if((0,R.WH)("useSwitchPlayerUrlFn_switch_error",{message:null==t?void 0:t.message,stack:null==t?void 0:t.stack,url:null==t?void 0:t.url,finnalUrl:i}),(0,T.$R)((null==t?void 0:t.url)||"",i)){e.src=i;return}})),e.seamlessSwitch(i)}));n(l)})}(O),er=(e,t,i)=>{if(e){let n=(0,u.uC)(e.flv||"");(0,g.sw)(n)&&(O.src=n,O.retry()),O._isBack=!0,v(!1),t&&O.off(L.FP.CANPLAY,t),i&&O.on(L.FP.ERROR,i);return}},el=async()=>{var n,o;if(et()){q.current=!0;return}if(!U||!h)return;let r=l[_];if(!r)return;if(!q.current){q.current=!0;return}let{main:m,backup:p}=r;x(m.flv,ee.current);let E=await z(m.flv),y=(0,g.GT)((0,u.uC)(E),{abr_pts:$}),S=e=>{},C=()=>{if(W(!0),O.off(L.FP.CANPLAY,C),clearTimeout(null==Q?void 0:Q.current),_!==Y.current){let i=s.j9.UP;F.indexOf(_)>F.indexOf(Y.current)&&(i=s.j9.DOWN),null==t||t.liveBitRateSwitchSuccessEvent((0,a._)({before_definition:en(),now_definition:s.Kt[_],definition_automatic_type:i,screen_model:M,change_mode:s.r6.MANUAL,definition_set_type:"manual"},e.logObj||{})),ei.current=!1,Y.current=_}v(!1),G&&G(!1);try{Q.current=setTimeout(()=>{var e,t,i,n;let o=null==O?void 0:null===(i=O.plugins)||void 0===i?void 0:null===(t=i.flvlive)||void 0===t?void 0:null===(e=t.loader)||void 0===e?void 0:e.finnalUrl;if(!o)return;let r=null==o?void 0:null===(n=o.indexOf)||void 0===n?void 0:n.call(o,".flv"),l="number"==typeof Number(o[r-1])?null==o?void 0:o.substring(r-3,r-1):null==o?void 0:o.substring(r-2),a="origin"!==_||-1===o.indexOf("or")&&-1===F.indexOf(l)||-1!==o.indexOf("or");(_!==I.origin&&-1===o.indexOf(_)||!a)&&c.kg.event(`[${P.Tn.Error}]${P.Mo.LivePlayerQualityError}`,{url:o,is_client:(0,b.DT)(),quality:_}),Z.current=!0},Z.current?0:5e3)}catch(e){}},N=()=>{if(O._isBack){j&&j(!0),v(!1),O.off(L.FP.CANPLAY,C);return}};S=e=>{var t;O.isBack&&N(),V()&&(i(!0),K()),er(p,C,N),c.kg.event(`[${P.Tn.Error}]${P.Mo.LiveSwitchFailed}`,{statusCode:null==e?void 0:e.code,errorType:null==e?void 0:e.errorType,message:null==e?void 0:e.ex,is_client:(0,b.DT)(),quality:_}),O.off(L.FP.CANPLAY,C),f.info(""),G&&G(!0);let n=(0,d.OK)();null==n||null===(t=n.sendEvent)||void 0===t||t.call(n,{name:"webcast_quality_switch_failed",categories:{code:(null==e?void 0:e.code)||-1,errorType:(null==e?void 0:e.errorType)||"unknown",message:null==e?void 0:e.ex,url:y,quality:_}})},O&&(null==O?void 0:O.once)&&O.once(L.FP.CANPLAY,C),O&&(null==O?void 0:O.once)&&O.once(L.FP.ERROR,S);let w=null==O?void 0:null===(o=O.config)||void 0===o?void 0:null===(n=o.baseConfig)||void 0===n?void 0:n.url;if(!w||(null==w?void 0:w.indexOf(y))>-1&&!D)return;let T=null==y?void 0:y.split("?")[1],R=null==w?void 0:w.split("?")[1],k=new URL(w),A=new URL(y);k.pathname!==A.pathname?eo({player:O,url:y}):k.pathname===A.pathname&&((null==T?void 0:T.indexOf("only_audio=1"))>-1||(null==R?void 0:R.indexOf("only_audio=1"))>-1)&&eo({player:O,url:y}),X.current=()=>{O&&(null==O?void 0:O.off)&&O.off("canplay",C),O&&(null==O?void 0:O.off)&&O.off("error",S),v(!1),clearTimeout(null==Q?void 0:Q.current)}};o.useEffect(()=>{var e,t;el();let i=null!==(t=null==l?void 0:null===(e=l[_])||void 0===e?void 0:e.backup)&&void 0!==t?t:null;return n&&!B.current&&(i?er(i):r(!0),B.current=!0),()=>{var e;null==X||null===(e=X.current)||void 0===e||e.call(X)}},[O,_,h,l,v,G,U,n])},O={auto:"",origin:"",uhd:"",hd:"",sd:"",ld:""},M=e=>{let{eventStore:{playerEvent:t}}=(0,p.o)(),{stream:i,quality:n,onSwitch:r,isUse:l,qualityList:a,player:d,screenMode:c}=e,m=o.useRef(n),{getShouldDisableManualHandler:_,preIsAbrQualityRef:v,getBeforeDefinition:h}=(0,S.T)({playerEvent:t,quality:n,screenMode:c,preQuality:m,enable:l});o.useEffect(()=>{var e,o,g;if(!l||_())return;let p=i[n];if(!p)return;let{main:I}=p,E=(0,u.uC)(I.hls||"");if((null===(o=d.config.url)||void 0===o?void 0:null===(e=o.indexOf)||void 0===e?void 0:e.call(o,E))>-1)return;let y=()=>{},P=()=>{if(d.off("error",y),n!==m.current){let e=s.j9.UP;a.indexOf(n)>a.indexOf(m.current)&&(e=s.j9.DOWN),null==t||t.liveBitRateSwitchSuccessEvent({before_definition:h(),now_definition:s.Kt[n],definition_automatic_type:e,screen_model:c,change_mode:s.r6.MANUAL,definition_set_type:"manual"}),v.current=!1}(null==d?void 0:d.paused)&&d.play(),d.config.url=E,r(!1)};return y=()=>{d.off("canplay",P),f.info(""),r(!1)},d.once("canplay",P),d.once("error",y),f.info(`${O[n]}`),d.src=E,r(!0),null===(g=d.video)||void 0===g||g.load(),()=>{d.off("canplay",P),d.off("error",y)}},[d,n,l,i,r])};var F=i("674996"),D=i("637005"),j=i("382069"),G=i("155067"),U=i("725215"),V=i("867386"),K=i("645260"),Y=i.n(K),Z=i("287844"),B=i("827045");let H={uhd:{high:"4K",low:"4K"},hd:"1080P",sd:"720P",ld:"480P"};Object.keys(H);var W=i("185492");let Q={uhd:"4K ",hd:"1080P",sd:"720P",ld:"480P"};var $=i("696438"),q={container:"elRUuzsS",toolbar:"PI6ImCXQ",menu:"if7C8ipZ",tags:"L5MQ4Qvg",tips:"yaQJImEq",label:"DS6IBtKl",goDownload:"xyK16f29",text:"IUilDqvc",picked:"h5ykWpRZ",show:"M2TwwxDB",hidden:"N9ADC7YB"},J=i("514119"),z=i("990366"),X=i("747409"),ee=i("208837");let et=()=>((0,o.useEffect)(()=>{window.collectEvent("add_to_desktop_show",{type:"4k",channel_id:Z.g.Lv4k,enter_from:"live_detail"})},[]),(0,n.jsxs)("span",{children:["",(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5005 0.499939L4.50052 5.17743L2.17907 3.03518L1.5009 3.77008L4.66145 6.68667L5.00054 6.99958L5.33963 6.68667L8.50018 3.77008L7.82201 3.03518L5.50052 5.17747L5.5005 0.499939H4.5005ZM1.5 9.5H8.5V8.5H1.5V9.5Z",fill:"white"})})]})),ei="abr_auto",en=e=>e===ei,eo=(0,U.Pi)(e=>{let{qualityList:t=[],quality:i="",interceptedQuality:r="",openIntercepted:a=!1,player:u,qualityHandler:d={},openTryWatching:c=!1,screenMode:m="",streamOptions:_={},streamInfo:h}=e,{userStore:{userInfo:f},streamStore:{leadingData:g,setLocalQuality:I},eventStore:{playerEvent:E},roomStore:{isAsianGames:y},playerStore:{playerLoggerInstance:P}}=(0,p.o)(),L=(0,T.iC)(h),{abrEnable:S,isAbrOpen:C,setIsAbrOpen:N,abrQuality:w}=(0,z.K6)(e=>({abrEnable:e.enable,isAbrOpen:e.isAbrOpen,setIsAbrOpen:e.setIsAbrOpen,abrQuality:e.abrQuality})),k=Y()(g,"items.label_lead.lead_content.label",""),{enableOlympic4k:x,openOrDownloadClient:A}=(0,W.M)(),O=(0,o.useMemo)(()=>t.filter(e=>!x||!!Q[e]).reverse(),[t,x]),M=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];d&&(null==d?void 0:d.setCurrentQuality)&&(null==d||d.setCurrentQuality(e),y&&I(e),null==E||E.liveBitRateSwitchEvent({before_definition:`${t?"auto_":""}${s.Kt[i]}`,select_definition:s.Kt[e],screen_model:m}))},D=(0,o.useMemo)(()=>new Set(O.filter(e=>(!a||!r||!(J.p[r]<=J.p[e]))&&(!x||!!(0,b.DT)()||"uhd"!==e)&&!0)),[O,a,r,x]);(0,$.Z)(()=>{let e=(0,b.DT)();x&&(!Q[i]||"uhd"===i&&!e)&&M(O.find(e=>D.has(e)))},[x,O,i,null==d?void 0:d.setCurrentQuality,D]);let{itemRef:j,panelRef:G,show:U}=(0,ee.h)(u);(0,o.useEffect)(()=>{var e;if(!!U)E.liveSdkDefinitionPanelShow({definition:(C?"auto_":"")+s.Kt[i],definition_set_type:C?"auto":"manual"}),(0,R.WH)("QualitySwitchContainer_showSelector",{quality:i,originUrlRealQuality:L,qualityList:O,willMergeQuality:(null==O?void 0:null===(e=O.includes)||void 0===e?void 0:e.call(O,"origin"))&&(null==O?void 0:O.includes(L))})},[U]);let K=(e,t)=>{if(en(e)){let e=V.X7[w||i];return`${e&&C?`(${e})`:""}`}if(x)return Q[e];if(y&&_){if("uhd"!==e)return H[e];{var n,o,r,l;let i=null==_?void 0:null===(r=_.qualities)||void 0===r?void 0:null===(o=r.find)||void 0===o?void 0:null===(n=o.call(r,t=>(null==t?void 0:t.sdk_key)===e))||void 0===n?void 0:n.fps,a=null===(l=H.uhd)||void 0===l?void 0:l[i>25?"high":"low"];return`${a}${t?"":""}`}}else return L===e?V.X7.origin:V.X7[e]},Z=()=>!1,eo=e=>e===i||"origin"===e&&L===i,er=(0,o.useCallback)((e,t)=>{try{let n=eo(e);if(t&&n&&(null==E||E.liveBitRateSwitchEvent({before_definition:`auto_${s.Kt[i]}`,select_definition:s.Kt[i],screen_model:m})),c&&!n){X.t4.set(e),M(e,t),v.F.info(`${K(e)}`,u.root),null==P||P.updateExt({definition:e});return}if(e&&a&&r&&J.p[r]<=J.p[e]){null==u||u.exitFullscreen(),(0,B.p)().then(t=>{var i,n;t({success:()=>{X.t4.set(e),(0,F.QX)(e),!Z()&&window.location.reload()},next:`https://${null===(n=window)||void 0===n?void 0:null===(i=n.location)||void 0===i?void 0:i.host}`,headerText:"",enterMethod:"hd_live",clarity:e})});return}if(!n){X.t4.set(e),M(e,t),v.F.info(`${K(e)}`,u.root),null==P||P.updateExt({definition:e});return}}catch(e){}},[r,i,O,a,d,f.id_str]),[el,ea]=(0,o.useState)(""),es=e=>{let t=el===e,o=eo(e),r=o&&!C||t;if(en(e))return{labelJSX:null,clickHandler:()=>{if(!C)N(!0),null==E||E.liveBitRateSwitchEvent({before_definition:`${C?"auto_":""}${s.Kt[i]}`,select_definition:`auto_${s.Kt[i]}`,screen_model:m})},isActiveItem:C||t};if(!(0,b.DT)()&&x&&(0,W.K)(e))return{labelJSX:(0,n.jsx)("div",{className:l()(q.label,t&&q.goDownload),children:t?(0,n.jsx)(et,{}):""}),clickHandler:A,isActiveItem:r};let a=!D.has(e);return{labelJSX:a?(0,n.jsx)("div",{className:q.label,style:{visibility:t?"visible":"hidden"},children:k}):null,clickHandler:()=>{if(!!C||!o)a||N(!1),er(e,C)},isActiveItem:r}},eu=(0,o.useMemo)(()=>{let e=new Set(O);return(L&&"origin"!==L&&e.has("origin")&&e.has(L)&&e.delete(L),S)?[ei,...e]:[...e]},[S,C,O,L]);return(0,n.jsx)("div",{className:q.container,children:(0,n.jsxs)("div",{className:q.toolbar,children:[(0,n.jsx)("div",{ref:j,className:q.quality,"data-e2e":"quality",children:C?"":K(i,!0)}),(0,n.jsx)("div",{className:l()(q.menu,U?q.show:q.hidden),ref:G,children:(0,n.jsx)("div",{className:q.tags_container,"data-e2e":"quality-selector",children:eu.map(e=>{let{labelJSX:t,clickHandler:i,isActiveItem:o}=es(e);return(0,n.jsx)("div",{className:q.tags,onMouseEnter:()=>ea(e),onMouseLeave:()=>ea(""),onClick:i,children:(0,n.jsxs)("div",{className:q.tips,style:{color:o?"#FFFFFF":"#FFFFFF99",background:o?"#f2f2f414":""},children:[(0,n.jsx)("div",{className:q.text,style:{color:o?"#FFFFFF":"#FFFFFF99"},children:K(e,!0)}),t]},e)},e)})})})]})})});var er=i("393265"),el=i("859231"),ea=i("685231");let es=o.forwardRef((e,t)=>{let{streamData:i,defaultQuality:r,qualityList:a,player:s,sessionId:u,screenMode:d,roomId:c="",isAsianGames:m,isActivity:_,setNoStream:v,showRefreshPage:h}=e,{streamStore:{setCurrentQuality:f,currentQuality:g}}=(0,p.o)(),[I,E]=o.useState(r),[y,P]=o.useState(!1),b=o.useRef(r),L=o.useCallback(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||e!==I)e&&a.includes(e)&&(E(e),requestAnimationFrame(()=>{D.emit(D.EVENT.syncLiveMemoryState,{clarity:e}),D.emit(D.EVENT.syncInteraction)}),(0,R.WH)("QualitySwitchPlugin_handleQuality",{quality:e,passive:t}),!t&&(0,F.QX)(e))},[a,I]);o.useEffect(()=>{let e=D.listen(D.EVENT.syncLiveMemoryState,e=>{(null==e?void 0:e.clarity)&&L(e.clarity,null==e?void 0:e.clarityPassive)});return()=>e()},[L]),o.useImperativeHandle(t,()=>({getCurrentQuality:()=>b.current,setCurrentQuality:(e,t)=>{L(e,t)},getCurrentQualityList:()=>a})),o.useEffect(()=>{var e;b.current=I;let t=new CustomEvent("webcast_qualityEvent",{detail:{roomId:c,isLive:1,quality:I}});null===(e=document)||void 0===e||e.dispatchEvent(t)},[I]),o.useEffect(()=>{D.emit(D.EVENT.syncLiveMemoryState,{clarity:g,clarityPassive:!!(0,C.getAbrQualityAB)()||void 0})},[g]),o.useEffect(()=>{f(r)},[r]);let S=(0,ea.wi)();return A({stream:i,quality:I,onSwitch:P,isUse:!S,sessionId:u,player:s,screenMode:d,qualityList:a,setNoStream:v,isActivity:_,showRefreshPage:h,roomId:c}),M({stream:i,quality:I,onSwitch:P,isUse:S,qualityList:a,player:s,screenMode:d}),(0,n.jsx)("div",{"data-wide":!0,className:l()(j.Z.container,"QualitySwitchNewPlugin",{[j.Z.isAsianGames]:m}),children:o.Children.map(e.children,e=>o.isValidElement(e)?o.cloneElement(e,{quality:I,qualityList:a}):null)})});es.displayName="QualitySwitchPlugin";let eu=(0,U.Pi)((0,G.rW)(es));var ed=(0,U.Pi)(e=>{var t;let{streamStore:{streamInfoFromLiving:i,setCurrentQuality:r,watchingFinished:l,currentQuality:a},playerStore:{screenMode:s},roomStore:{roomInfo:u,isAsianGames:d,roomStatus:c,setIsShowRefreshPage:m},userStore:{userInfo:_},linkmicStore:{linkStatus:v}}=(0,p.o)(),{stream:h,startQuality:f,qualities:g,common:I,url:E,options:y,openIntercepted:P,interceptedQuality:b,openTryWatching:L}=i||{},{player:S}=(0,er.n)(),C=Y()(u,"room.id_str"),N=o.useMemo(()=>({streamData:h,defaultQuality:e.defaultQuality||f,qualityList:g,sessionId:null==I?void 0:I.session_id,screenMode:s,url:e.url||E,roomId:C,player:S,isAsianGames:d,showRefreshPage:m,containerClassName:"QualitySwitchPluginContainer"}),[h,f,g,I,E,C,S,d,s]),w=o.useMemo(()=>({setCurrentQuality:r}),[]),R=o.useMemo(()=>({options:y,stream:h}),[y,h]),k=(0,X.j_)([null==y?void 0:null===(t=y.default_quality)||void 0===t?void 0:t.sdk_key,(0,T.Hs)(P?b:void 0)]);return v!==el.cK.LINKED&&c!==el.LV.END&&Object.keys(h||{}).length&&f?(0,n.jsx)(z.T,{maxAbrQuality:k,qualities:g,streamInfo:R,setQuality:r,disableChange:L&&!l,children:(0,n.jsx)(eu,{index:9,props:N,children:(0,n.jsx)(eo,{qualityHandler:w,player:S,openIntercepted:P,interceptedQuality:b,openTryWatching:L&&!l,screenMode:s,watchingFinished:l,streamOptions:y,isLogin:null==_?void 0:_.id_str,streamInfo:R})})}):null})},987189:function(e,t,i){i.d(t,{T:function(){return u}});var n=i(520739),o=i(88648),r=i(990366),l=i(232600),a=i(738612),s=i(797973);let u=e=>{let{preQuality:t,quality:i,playerEvent:u,screenMode:d,enable:c}=e,m=(0,r.K6)(e=>e.getIsAbrOpen),_=(0,r.K6)(e=>e.getShouldDisableManualHandler),v=(0,r.K6)(e=>e.isAbrOpen),h=o.useRef(!1);(0,o.useEffect)(()=>{if(v){h.current=!0;return}},[v]);let f=(0,s.Z)(()=>`${h.current?"auto_":""}${a.Kt[t.current]}`);return(0,o.useEffect)(()=>{let o=t.current;if(c&&m()&&o!==i){null==u||u.liveBitRateSwitchSuccessEvent((0,n._)({before_definition:f(),now_definition:`auto_${a.Kt[i]}`,definition_automatic_type:(0,l.gW)(o,i)?"up":"down",definition_set_type:"auto",screen_model:d,change_mode:a.r6.AUTO},e.logObj||{})),t.current=i;return}},[i]),{getIsAbrOpen:m,getShouldDisableManualHandler:_,preIsAbrQualityRef:h,getBeforeDefinition:f}}},927928:function(e,t,i){i.r(t),i.d(t,{RefreshPlugin:function(){return E},default:function(){return P},RefreshPluginWrap:function(){return y}});var n=i("563097"),o=i("520739"),r=i("878389"),l=i("88648");let a=(0,l.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,r._)((0,o._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M24.932 16.444c0-4.687-3.89-8.444-8.634-8.444a8.679 8.679 0 0 0-7.207 3.79v-1.558a.99.99 0 0 0-1.98 0v4.038c0 .547.444.99.99.99h4.038a.99.99 0 0 0 0-1.98h-1.646c1.137-1.963 3.304-3.3 5.804-3.3 3.7 0 6.655 2.918 6.655 6.464 0 3.547-2.956 6.465-6.655 6.465-2.963 0-5.459-1.88-6.326-4.453a.99.99 0 0 0-1.876.633c1.138 3.38 4.39 5.8 8.202 5.8 4.746 0 8.635-3.758 8.635-8.445z",fill:"#fff"})})));var s=i("716551"),u=i("393265"),d=i("155067"),c=i("629582"),m=i("211058"),_=i("58655"),v=i("581409"),h=i("128231"),f=i.n(h),g=i("725215"),p=i("859231"),I=i("485019");function E(e){let{eventStore:{playerEvent:t}}=(0,_.o)(),{player:i}=(0,u.n)(),{playerCoverText:o}=e,r=f()(()=>{window.location.reload()},200),{Icon:d}=e,c=(0,l.useCallback)(()=>{var n;if(o&&o===s.kx.KICK_OUT){r();return}null==i||i.emit(s.Cw.REFRESH),null==i||i.retry(),null==t||null===(n=t.liveRefreshBtnClickEvent)||void 0===n||n.call(t,e.logObj)},[t,o,i]),h=()=>!1;return(0,l.useEffect)(()=>{let e=e=>{var t,i;if(h())return;let n=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.tagName;if("INPUT"!==n&&"TEXTAREA"!==n&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.contentEditable)!=="true")(null==e?void 0:e.code)==="KeyR"&&!(e.shiftKey||e.metaKey||e.ctrlKey)&&c()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[c,!1,!1,h]),(0,n.jsx)(m.Z,{content:(0,n.jsx)(v.Z,{btn:"R",info:""}),children:(0,n.jsx)("div",{onClick:c,style:{position:"relative",bottom:-1},children:d?(0,n.jsx)(d,{}):(0,n.jsx)(a,{})})})}let y=(0,g.Pi)((0,d.rW)(E));var P=(0,g.Pi)(()=>{let{roomStore:{playerCoverText:e,roomStatus:t},linkmicStore:{linkStatus:i}}=(0,_.o)(),{isLivingPip:o}=(0,I.ds)();return o||i===p.cK.LINKED||t===p.LV.END?null:(0,n.jsx)(y,{props:{playerCoverText:e},position:c.PZ.CONTROL_LEFT,index:1})})},553446:function(e,t,i){i.r(t),i.d(t,{VolumeMemoryPlugin:function(){return I},VolumeMemoryPluginSimple:function(){return p},getVolumeChangeHandler:function(){return g}});var n=i(88648),o=i(629582),r=i(784492),l=i(468763),a=i(555106),s=i(759797),u=i(637005),d=i(240026),c=i(58655),m=i(393265),_=i(90463),v=i(756919),h=i(114682),f=i(948375);let g=e=>()=>{var t,i;if(0===e.currentTime)return;0===(0,a.$o)(s.storage.LocalStorageKeys.PLAYER_IS_MUTE)&&e.muted&&(0,a.qQ)(s.storage.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,l.w)(e.muted);let n=e.volume,o=(0,l.T1)(),r=(0,l.rC)();(0,h.ni)({before_voice_value:r?0:Math.round((null!=o?o:0)*100),voice_value:Math.round((null!=n?n:0)*100),voice_status:e.muted?0:1,if_browser_limited:null!==(i=null===(t=window.__INVISIBLE_QUERY__)||void 0===t?void 0:t.if_browser_limited)&&void 0!==i?i:0}),0===n?(0,l.w)(!0):(0,l.n$)(Number(null!=n?n:.1)),u.emit(u.EVENT.syncInteraction)};function p(e){let{player:t}=(0,m.n)(),i=(0,n.useMemo)(()=>g(t),[]),r=(0,f.Z)(e=>{var i,n,o,r,a;if("change_muted"===e.action){if(0===t.volume){let e=(0,l.T1)();return t.volume=e,(0,l.w)(!1),(0,h.ni)({before_voice_value:Math.round(100*e),voice_value:0,voice_status:1,if_browser_limited:null!==(o=null===(n=window.__INVISIBLE_QUERY__)||void 0===n?void 0:n.if_browser_limited)&&void 0!==o?o:0}),!1}return setTimeout(()=>{(0,l.w)(t.muted)},50),(0,h.ni)({before_voice_value:0,voice_value:Math.round((null!==(r=t.volume)&&void 0!==r?r:0)*100),voice_status:0,if_browser_limited:null!==(a=null===(i=window.__INVISIBLE_QUERY__)||void 0===i?void 0:i.if_browser_limited)&&void 0!==a?a:0}),!0}});return(0,n.useEffect)(()=>(t.muted=(0,l.rC)(),t.on(o.FP.VOLUMECHANGE,i),null==t||t.on("user_action",r),()=>{t.off(o.FP.VOLUMECHANGE,i),null==t||t.off("user_action",r)}),[]),null}function I(){let{eventStore:{playerEvent:e},linkmicStore:{linkStatus:t},roomStore:{playerCoverText:i}}=(0,c.o)(),{player:u}=(0,m.n)(),{syncVolume:h}=(0,d.T)(),g=(0,n.useCallback)(()=>{var n,o;if(0===u.currentTime||t===_.cK.LINKED||i)return;0===(0,a.$o)(s.storage.LocalStorageKeys.PLAYER_IS_MUTE)&&u.muted&&(0,a.qQ)(s.storage.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,l.w)(u.muted);let r=u.volume,d=(0,l.T1)(),c=(0,l.rC)();null==e||e.volumeChanged({before_voice_value:c?0:Math.round((null!=d?d:0)*100),voice_value:Math.round((null!=r?r:0)*100),voice_status:u.muted?0:1,if_browser_limited:null!==(o=null===(n=window.__INVISIBLE_QUERY__)||void 0===n?void 0:n.if_browser_limited)&&void 0!==o?o:0,if_mini_window:(0,v.OL)()}),0===r?(0,l.w)(!0):(0,l.n$)(Number(null!=r?r:.1))},[t,i]),p=(0,f.Z)(t=>{var i,n,o,r,a;if("change_muted"===t.action){if((null==u?void 0:u.volume)===0){let t=(0,l.T1)();return u.volume=t,(0,l.w)(!1),null==e||e.volumeChanged({before_voice_value:Math.round(100*t),voice_value:0,voice_status:1,if_browser_limited:null!==(o=null===(n=window.__INVISIBLE_QUERY__)||void 0===n?void 0:n.if_browser_limited)&&void 0!==o?o:0}),!1}return setTimeout(()=>{(0,l.w)(null==u?void 0:u.muted)},50),null==e||e.volumeChanged({before_voice_value:0,voice_value:Math.round((null!==(r=null==u?void 0:u.volume)&&void 0!==r?r:0)*100),voice_status:0,if_browser_limited:null!==(a=null===(i=window.__INVISIBLE_QUERY__)||void 0===i?void 0:i.if_browser_limited)&&void 0!==a?a:0}),!0}});return(0,r.Z)(()=>{u.muted=(0,l.rC)()},[g]),(0,n.useEffect)(()=>(null==u||u.on(o.FP.VOLUMECHANGE,g),null==u||u.on("user_action",p),()=>{null==u||u.off(o.FP.VOLUMECHANGE,g),null==u||u.off("user_action",p)}),[g]),null}t.default=I},145736:function(e,t,i){i.r(t),i.d(t,{VolumeWheel:function(){return p},default:function(){return I}}),i("777180"),i("897860"),i("250440");var n=i("563097"),o=i("629582"),r=i("155067"),l=i("844375"),a=i("88648"),s=i("375944"),u=i("782442"),d=i("485019"),c=i("694385"),m=i("520739"),_=i("878389");let v=(0,a.forwardRef)((e,t)=>(0,n.jsxs)("svg",(0,_._)((0,m._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,n.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4zM18 19a3 3 0 1 0 0-6v6z",fill:"#fff"}),(0,n.jsx)("path",{opacity:".3",d:"M18 23.734l.095-.007A7.75 7.75 0 0 0 18 8.266v2.507a5.25 5.25 0 0 1 0 10.454v2.507z",fill:"#fff"})]}))),h=(0,a.forwardRef)((e,t)=>(0,n.jsxs)("svg",(0,_._)((0,m._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,n.jsx)("path",{d:"M7 14a2 2 0 0 1 2-2h1l4.36-3.633a1 1 0 0 1 1.64.768v13.73a1 1 0 0 1-1.64.768L10 20H9a2 2 0 0 1-2-2v-4z",fill:"#fff"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.002 17.55l2.499 2.954 1.502-1.316-2.693-3.185 2.694-3.185-1.503-1.316-2.499 2.955-2.5-2.955L17 12.818l2.694 3.185-2.693 3.185 1.502 1.316 2.499-2.955z",fill:"#fff"})]}))),f=(e,t)=>{if(!(null==e?void 0:e.current))return;let i=e.current;if(i.muted){i.muted=!1,i.volume="up"===t?.05:0;return}let n="up"===t?i.volume+.05:i.volume-.05;n=Math.max(n=Math.min(n,1),0),i.volume=Number(n.toFixed(2)),0===n&&(i.muted=!0)},g=(e,t)=>{if(!(null==e?void 0:e.current))return;let i=e.current;if(i.muted){i.muted=!1,i.volume=Math.max(t/100,0);return}let n=i.volume+t/100;n=Math.max(n=Math.min(n,1),0),i.volume=Number(n.toFixed(2)),0===n&&(i.muted=!0)},p=(0,r.nl)(e=>{let{isActive:t,index:i,defaultIcon:r}=e,{playerRef:d,el:m}=(0,a.useContext)(o.ET),_=(0,a.useRef)(null);return(0,a.useEffect)(()=>{var e;if(!t)return;let i=null==m?void 0:m.querySelector(".douyin-player-volume"),n=null==m?void 0:m.querySelector(".douyin-player-volume-slider"),o=e=>{let t=(0,s.Q5)();e.stopPropagation(),e.preventDefault();let i=(t?1:-1)*parseInt(String(e.deltaY/20),10);0!==i&&g(d,i)},r=e=>{let{code:t}=e;if(u.Le.getConfig(u.gI.DisableNextPre)&&["ArrowUp","ArrowDown"].includes(e.code)){e.stopPropagation(),e.preventDefault(),"ArrowUp"===e.code?f(d,"up"):"ArrowDown"===e.code&&f(d,"down");return}let i=e.target,n=null==i?void 0:i.tagName;if("INPUT"!==n&&"TEXTAREA"!==n&&(null==i?void 0:i.contentEditable)!=="true"){if(e.shiftKey&&("Equal"===t||"Minus"===t)){var o,r;null===(o=_.current)||void 0===o||o.focus(),"Equal"===t?f(d,"up"):f(d,"down"),null===(r=_.current)||void 0===r||r.blur()}}},l=()=>{u.Le.setConfig(u.gI.DisableNextPre,!0)},a=()=>{u.Le.setConfig(u.gI.DisableNextPre,!1)},c=e=>{e.stopPropagation()};return null==i||i.addEventListener("wheel",o),null==i||i.addEventListener("mouseover",l),null==i||i.addEventListener("mouseout",a),null===(e=document)||void 0===e||e.addEventListener("keydown",r),null==n||n.addEventListener("pointerdown",c),()=>{var e;null==i||i.removeEventListener("wheel",o),null==i||i.removeEventListener("mouseover",l),null==i||i.removeEventListener("mouseout",a),null===(e=document)||void 0===e||e.removeEventListener("keydown",r),null==n||n.removeEventListener("pointerdown",c)}},[t]),(0,n.jsx)(l.dm,{ref:_,index:i,props:{IconVolume:r?void 0:c.Z,IconVolumeSmall:r?void 0:v,IconVolumeMuted:r?void 0:h,showVolume:!0}})});var I=()=>{let{isLivingPip:e}=(0,d.ds)();return(0,n.jsx)(p,{isActive:!0,position:e?0:1,index:e?2:4})}},296013:function(e,t,i){i.d(t,{Z:function(){return P},F:function(){return y}});var n=i("563097"),o=i("88648"),r="JLqHnzHG",l="fElrJFEA",a="JwQhs9jY",s="HGRdqyVW",u="J5f5nA69",d="WdeRd8G1",c=i("58655"),m=i("645260"),_=i.n(m),v=i("725215"),h=i("520739"),f=i("878389");let g=(0,o.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,f._)((0,h._)({width:26,height:26,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M3.373 20.11v-2.502h-1.75v2.502a4.265 4.265 0 0 0 4.266 4.266h2.502v-1.75H5.89a2.519 2.519 0 0 1-2.516-2.516zM20.11 1.624h-2.502v1.75h2.502a2.519 2.519 0 0 1 2.516 2.516v2.5h1.75v-2.5a4.265 4.265 0 0 0-4.266-4.266zM3.373 5.89A2.518 2.518 0 0 1 5.89 3.374h2.502v-1.75H5.89A4.265 4.265 0 0 0 1.623 5.89v2.5h1.75v-2.5zm19.253 14.22a2.519 2.519 0 0 1-2.516 2.516h-2.502v1.75h2.502a4.265 4.265 0 0 0 4.266-4.266v-2.502h-1.75v2.502zM1.623 12.134h22.753v1.731H1.623v-1.732z",fill:"#fff"})})));var p=i("713097"),I=i.n(p);let E=o.createRef(),y=()=>E;var P=(0,v.Pi)(function(e){let{className:t,qrcode:i,avatar:m}=e,{roomStore:{notSupportReason:v,roomInfo:h},eventStore:{playerEvent:f}}=(0,c.o)(),p=_()(h,"web_rid");return(0,o.useEffect)(()=>{if(p){var e;null==f||null===(e=f.liveAppOnlyEvent)||void 0===e||e.call(f,v)}},[v,p]),(0,n.jsx)("div",{className:I()(r,t),style:{backgroundImage:`url("${m}")`},ref:E,children:(0,n.jsxs)("div",{className:l,children:[(0,n.jsx)("p",{className:s,children:""}),(0,n.jsx)("p",{className:s,children:""}),(0,n.jsxs)("p",{className:u,children:[(0,n.jsx)(g,{className:d}),""]}),(0,n.jsx)("img",{className:a,src:i,alt:""})]})})})},616406:function(e,t,i){i.r(t),i.d(t,{getEnlargeShowTypeParams:function(){return E},default:function(){return P},getFunctionType:function(){return p},LinkMicLayoutPlugin:function(){return y},getLayoutParams:function(){return I}}),i("250440");var n=i("563097"),o=i("725215"),r=i("834870"),l=i("88648"),a=i("58655"),s=i("788376"),u=()=>{let{linkmicStore:{linkMicSeats:e,choosePeopleArr:t,setChoosePeopleArr:i,setChoosePeopleAll:n,choosePanelVisible:o,isCrossLink:r},roomStore:{roomInfo:u}}=(0,a.o)(),{isRoomBattle:d}=(0,s.Z)();(0,l.useEffect)(()=>{var o,l,a,s,c,m,_,v,h;if(!(null==e?void 0:null===(o=e[0])||void 0===o?void 0:o.user))return;let f=null==u?void 0:null===(l=u.anchor)||void 0===l?void 0:l.id_str;if(t&&(null==t?void 0:t.length)!==0){let n={};d||r?Object.keys(e).forEach(t=>{t<=5&&(n[t]=e[t])}):n=e;let o=Object.values(n).map(e=>{var t,i;return null==e?void 0:null===(i=e.user)||void 0===i?void 0:null===(t=i.user)||void 0===t?void 0:t.id_str}),l=null==t?void 0:t.filter(e=>o.includes(e));l.length!==t.length&&i((null==l?void 0:l.length)>0?l:[f])}else{let t=[];try{t=JSON.parse(null!==(h=localStorage.getItem(`linkmic-last-choose-people-${null==u?void 0:u.roomId}`))&&void 0!==h?h:"[]")}catch(e){}i(t.length>0?t:(null==e?void 0:null===(c=e[0])||void 0===c?void 0:null===(s=c.user)||void 0===s?void 0:null===(a=s.user)||void 0===a?void 0:a.id_str)?[null==e?void 0:null===(v=e[0])||void 0===v?void 0:null===(_=v.user)||void 0===_?void 0:null===(m=_.user)||void 0===m?void 0:m.id_str]:[]);let o=localStorage.getItem(`linkmic-last-choose-people-all-${null==u?void 0:u.roomId}`);n(void 0!==o&&"true"===o)}},[e,t,r,u,i,n])},d=i("926012"),c=i("779145"),m=i.n(c),_=i("645260"),v=i.n(_),h=i("884866"),f=i("62014"),g=i("738612");let p=function(e,t){let i="party";return(e===d.yP.AUDIO_1V8||e===d.yP.AUDIO_DOUBLE_C||e===d.yP.VIDEO_1V6||e===d.yP.VIDEO_DYNAMIC_FLOAT)&&(i="radio"),e===d.yP.MATE_CUSTOM&&(i="audio_audience"),"new_audience"===t&&(i="new_audience"),i},I=(e,t)=>t?e===d.yP.AUDIO_DOUBLE_C?"seat_enlarge_double":"seat_enlarge":[d.yP.VIDEO_DYNAMIC,d.yP.VIDEO_DYNAMIC_FLOAT,d.yP.VIDEO_1_V_3,d.yP.VIDEO_1_V_6].includes(e)?"seat_fit":"normal",E=(e,t)=>e===d.yP.AUDIO_DOUBLE_C&&26===t?"stable_double":g.i7[e]||"",y=(0,o.Pi)(e=>{let{isVerifyed:t}=e,{linkmicStore:{linkRoomType:i,linkMicLayout:n,linkMicSeats:o,functionType2:s,openUiLayout:d},userStore:{userInfo:c},eventStore:{linkmicEvent:_},singletonStore:{setAudioPower:g}}=(0,a.o)();(0,l.useEffect)(()=>{g(new f.a)},[]),(0,r.Z)({isVerifyed:t}),u();let y=l.useRef(""),P=l.useRef(""),b=l.useRef(n),L=l.useRef(s),S=l.useRef(!1),C=l.useMemo(()=>0!==m()(o).filter(e=>!!(null==e?void 0:e.user)).length,[o]),N=l.useMemo(()=>i&&o&&Object.values(o).some(e=>v()(e,"user.user.id_str","")===v()(c,"id_str","")),[i,o,c]);return l.useEffect(()=>{if(!!C)p(n,s)!==L.current&&void 0!==n?(S.current&&(null==_||_.liveVoiceRoomLayoutWatchDuration(y.current,L.current,b.current),null==_||_.liveAudienceRoomLayoutShow(n),null==_||_.liveLinkMicRoomShowEvent(n),null==_||_.liveLinkMicDurationEvent(b.current,void 0,L.current)),N&&(null==_||_.liveLeaveLinkMicEvent(void 0,void 0,void 0,p(b.current)),null==_||_.liveConnectLinkMicEvent(0,0))):I(n,(0,h.ic)(o))!==y.current?S.current&&(null==_||_.liveVoiceRoomLayoutWatchDuration(y.current,p(n,s),b.current),null==_||_.liveAudienceRoomLayoutShow(n)):E(n,d)!==P.current&&S.current&&(null==_||_.liveVoiceRoomLayoutWatchDuration(y.current,p(n,s),b.current),null==_||_.liveAudienceRoomLayoutShow(n)),!S.current&&(void 0!==n||"new_audience"===s)&&(null==_||_.liveAudienceRoomLayoutShow(n,p(n,s)),null==_||_.liveLinkMicRoomShowEvent(n),S.current=!0),L.current=p(n,s),b.current=n,P.current=E(n,d),y.current=I(n,(0,h.ic)(o))},[n,s,C,p(n,s),N,I(n,(0,h.ic)(o)),E(n,d),(0,h.ic)(o),o,d]),null});var P=(0,o.Pi)(()=>{let{roomStore:{isVerified:e}}=(0,a.o)();return(0,n.jsx)(y,{isVerifyed:e})})},143625:function(e,t,i){i.r(t),i.d(t,{LinkMicPlayModeLimitPlugin:function(){return P}}),i(250440);var n=i(779773),o=i(393265),r=i(629582),l=i(859231),a=i(457388),s=i(114682),u=i(831202),d=i(782563),c=i(407217),m=i(645260),_=i.n(m),v=i(96008),h=i.n(v),f=i(88648),g=i(104013),p=i(58655),I=i(291575),E=i(164371),y=i(725215);let P=e=>{let{isVerifyed:t}=e,{roomStore:{roomInfo:i,setNotSupportReason:m},linkmicStore:{setIsPlayModeNotSupport:v,imLinkMicLayout:y,uiLayout:P,setAsrSubtitle:b},singletonStore:{message:L},userStore:{userInfo:S},eventStore:{linkmicEvent:C}}=(0,p.o)(),{player:N}=(0,o.n)(),w=(0,E.kF)(),T=f.useCallback(()=>{a.kg.info("",(0,g.toJS)(i)),v(!0),m(l.Ly.MULTI_CONSUMER_LINE)},[v,i]),R=(0,f.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_()(i,"room.linker_detail.linker_ui_layout");(null==S?void 0:S.isReady)&&((0,s.Qz)({anchor_id:_()(i,"anchor.id_str",""),room_id:null==i?void 0:i.roomId,user_id:null==S?void 0:S.id_str,scene:Number(Object.keys(_()(i,"room.linker_map",{}))),playmode:_()(i,"room.linker_detail.linker_play_modes",[]),ui_layout:e}),a.kg.event(`[${u.Tn.Error}]${u.Mo.LiveNotSupportError}`,{room_id:null==i?void 0:i.roomId,user_id:null==S?void 0:S.id_str,scene:Number(Object.keys(_()(i,"room.linker_map",{}))),playmode:_()(i,"room.linker_detail.linker_play_modes",[]),ui_layout:e,is_client:(0,d.DT)()}))},[i,S]);f.useEffect(()=>{let e=_()(i,"room.linker_detail.linker_ui_layout"),t=Number(Object.keys(_()(i,"room.linker_map",{}))),n=_()(i,"room.linker_detail.linker_play_modes",[]);(e||t||(null==n?void 0:n.length)>0)&&a.kg.event("linkmic_user_page_view",{room_id:null==i?void 0:i.roomId,user_id:null==S?void 0:S.id_str,scene:t,playmode:n,ui_layout:e,is_client:(0,d.DT)()})},[i,S]),f.useEffect(()=>{(async()=>{let e=_()(i,"room.linker_detail.linker_ui_layout"),t=await (0,c.ZP)({service_name:"webcast.douyin.live_pc",key:"linkmic_not_support_uilayout"}),{uilayout:n}=t[null==w?void 0:w.XTTENV]?t[null==w?void 0:w.XTTENV]:t,o=e=>{if(n&&(null==n?void 0:n.includes(e)))return R(e),!0};[e,P].some(e=>o(e))&&T()})()},[i,P]);let k=_()(i,"room.live_room_mode"),x=f.useCallback(e=>{if(100===e.code)try{var t,o,r;let a=new TextDecoder().decode(e.content),s=(0,n.KR)(a);if(void 0===y&&s&&s.ktv_sei&&(null==s?void 0:null===(t=s.ktv_sei)||void 0===t?void 0:t.scene)>0&&(null==s?void 0:null===(o=s.ktv_sei)||void 0===o?void 0:o.scene)!==3&&T(),s&&s.app_data)h()();else if(null==s?void 0:null===(r=s.source)||void 0===r?void 0:r.includes("TTLiveSDK")){let e=_()(i,"room.basis.is_customize_audio_room",!1);k===l.ke.AUDIO&&!e&&T()}}catch(e){}},[T,y,k,i]);return f.useEffect(()=>(null==N||N.on(r.FP.SEI,x),()=>{null==N||N.off(r.FP.SEI,x)}),[N,x]),f.useEffect(()=>{let e=_()(i,"room.linker_map",{}),t=_()(i,"room.linker_detail.linker_play_modes",[]),n=!1;(e[I.xs.Scene_AudioChatRoom]||e[I.xs.Scene_VideoChatRoom]||e[I.xs.Scene_VideoEqualRoom])&&t.forEach(e=>{e===I.V0.LinkmicPlayMode_Teamfight&&(R(),n=!0)}),e[I.xs.Scene_AudioChatRoom]&&(t.includes(I.V0.LinkmicPlayMode_Teamfight)||t.includes(I.V0.LinkmicPlayMode_AudioChat_3x3_N_EMPTY))&&(n=!1),t.forEach(e=>{e===I.V0.LinkmicPlayMode_KTVSingingChallenge&&(R(),n=!0)}),(t.includes(I.V0.LinkmicPlayMode_Teamfight)||t.includes(I.V0.LinkmicPlayMode_AudioChat_3x3_N_EMPTY))&&(n=!1),n&&T()},[T,i]),f.useEffect(()=>null==L?void 0:L.on("KtvChallengeConfigMessage",e=>{e.forEach(e=>{let{method:t,payload:i}=e;if(!!t&&!!i)"WebcastKtvChallengeConfigMessage"===t&&(null==i?void 0:i.switch_status)==="1"&&T()})}),[T,L]),null};t.default=(0,y.Pi)(P)},83188:function(e,t,i){i.d(t,{M2:function(){return l},_q:function(){return s},dE:function(){return a}}),i(250440);var n=i(408487),o=i(926012),r=i(207964);let l=(e,t)=>{if([void 0,null,""].includes(e))return;let i=Number(e);if(t){let e=t.find(e=>i===e.id);if(e)return e.value}switch(i){case n.V_.LINKMICUILAYOUT_VIDEOCHAT_DYNAMICLAYOUT1V6:return o.yP.VIDEO_DYNAMIC_FLOAT;case n.V_.LINKMICUILAYOUT_VIDEOCHAT_ENLARGEGUEST1V6:case n.V_.LINKMICUILAYOUT_VIDEOCHATFLOATWINDOWLAYOUT:return o.yP.VIDEO_1V6;case n.V_.LINKMICUILAYOUT_VIDEOEQUAL_3X3:return o.yP.VIDEO_GRID;case n.V_.LINKMICUILAYOUT_VIDEOEQUALDYNAMICLAYOUT:return o.yP.VIDEO_DYNAMIC;case n.V_.LINKMICUILAYOUT_CROSSROOMLINKMIC_6V6:return o.yP.VIDEO_6V6;case n.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8:return o.yP.AUDIO_1V8;case n.V_.LINKMICUILAYOUT_AUDIOCHAT_3X3:return o.yP.AUDIO_GRID;case n.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V3:return o.yP.VIDEO_1_V_3;case n.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V6:return o.yP.VIDEO_1_V_6;case n.V_.LINKMICUILAYOUT_VIDEOEQUAL_LEFT1V8:return o.yP.VIDEO_1_V_8;case n.V_.LINKMICUILAYOUT_VIDEOEQUAL_TOP1V8:return o.yP.VIDEO_T1_V_B8;case n.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8_STAGE:return o.yP.AUDIO_1V8_STAGE;case n.V_.LINKMICUILAYOUT_VIDEOEQUAL_DYNAMICLAYOUT1V8FIX:return o.yP.VIDEO_1V8;case n.V_.LINKMICUILAYOUT_VIDEO_2V4V4:return o.yP.VIDEO_2V4V4;case n.V_.LINKMICUILAYOUT_LIVE_PARTNER_DYNAMIC:return o.yP.MATE_CUSTOM;case n.V_.LINKMICUILAYOUT_AUDIOCHAT_TOP2V4V4:return o.yP.AUDIO_DOUBLE_C;case n.V_.LINKMICUILAYOUT_AUDIOCHAT_1V8_ENLARGE_STAGE:if((0,r.getInLiveAudioLayoutOptAB)())return o.yP.AUDIO_1V8_STAGE;return o.yP.AUDIO_1V8;default:return}},a=e=>"new_audience"===e,s=(e,t)=>{if([e,t].some(e=>!e))return{top:0,left:0,right:0,bottom:0};let i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=n.top-i.top,r=n.left-i.left,l=r+t.clientWidth,a=o+t.clientHeight;return{top:o,left:r,right:l,bottom:a}}},428873:function(e,t,i){i(874386),i(250440);var n=i(456147),o=i(291575),r=i(645260),l=i.n(r),a=i(88648),s=i(58655);t.Z=()=>{let{roomStore:{roomInfo:e},linkmicStore:{playModes:t}}=(0,s.o)(),i=l()(e,"roomId",""),r=a.useRef(!1),[u,d]=a.useState(),c=a.useMemo(()=>null==t?void 0:t.some(e=>[o.V0.LinkmicPlayMode_GuestBattle,o.V0.LinkmicPlayMode_Teamfight,o.V0.LinkmicPlayMode_RoomBattle,o.V0.LinkmicPlayMode_AudioChat_1_PLUS_8].includes(e)),[]);return a.useEffect(()=>{!r.current&&c&&(0,n.y_)({room_id:i,_point:1,use_play_mode_info:!0}).then(e=>{d(null==e?void 0:e.data),r.current=!0})},[c,i]),u}},154183:function(e,t,i){i.d(t,{SX:function(){return l},dY:function(){return o},oQ:function(){return r}});var n=i(383058);let o=e=>`sslocal://webcast_webview?url=https%3A%2F%2Flf-webcast-gr-sourcecdn.bytegecko.com%2Fobj%2Fbyte-gurd-source-gr%2Fwebcast%2Fmono%2Fh5%2Frevenue_gift_exhibition_hall_h5_douyin%2Fpages%2Fgift_list%2Findex.html%3Fprofile_user_id%3D${e}%26showPcClose%3Dtrue`,r=(e,t)=>{let i="";return i=t?encodeURIComponent(`${t}?profile_user_id=${e}`):encodeURIComponent(`${n.w.Exhibition}&profile_user_id=${e}`),`sslocal://lynxview?url=${i}&type=popup&gravity=bottom&height_percent=75&web_bg_color=ff060a19&radius=23&radius_bottom_right=0&radius_bottom_left=0&enable_preload=all&add_safe_area_height=0&use_wk_falcon=2`},l=()=>`sslocal://lynxview?url=${encodeURIComponent(n.w.Exhibition)}&type=popup&gravity=bottom&height_percent=75&web_bg_color=ff060a19&radius=23&radius_bottom_right=0&radius_bottom_left=0&enable_preload=all&add_safe_area_height=0&use_wk_falcon=2`},255751:function(e,t,i){var n=i(520739),o=i(878389),r=i(368200);i(675373),i(779788),i(250440),i(981168);var l=i(88648),a=i(645260),s=i.n(a),u=i(367366),d=i(53038),c=i(658065),m=i(782442),_=i(770989),v=i(702726),h=i(746025),f=i(399796),g=i(35730),p=i(874204),I=i(516599),E=i(637005),y=i(831202),P=i(782563),b=i(555106),L=i(759797),S=i(36322),C=i(393265),N=i(611243),w=i(357923),T=i(457388),R=i(371816),k=i(145918),x=i(230501),A=i(236734),O=i(58655),M=i(488209),F=i(756919),D=i(797973),j=i(494930),G=i(257309);let U=()=>{if(!(0,u.r)())return Array.from(document.querySelectorAll(".giftRechargeContaner")).find(e=>e.getBoundingClientRect().x>0)};t.Z=e=>{let{isInit:t=!1,processAfterFirstFrame:i=!1}=e||{},{userStore:{userInfo:a},roomStore:{roomInfo:u},linkmicStore:{choosePeopleArr:V,useChoosePeopleFunc:K,eggModeInfo:Y},giftStore:{giftStatus:Z,giftList:B,effectList:H,balance:W,giftPanelShowFrom:Q,setGiftComboHint:$,setGiftMessages:q,setGiftPages:J,setEffectList:z,setBalance:X,setGiftExtra:ee,setGiftLayer:et,setPaygrade:ei},rechargeStore:{rechargeAuthStatus:en},eventStore:{giftEvent:eo,slardarEvent:er}}=(0,O.o)(),{name:el}=(0,S.V)(),{showRecharge:ea,hideRecharge:es,updateRecharge:eu,hideOtherRecharge:ed}=(0,N.y)({container:U}),{showRecharge:ec,hideRecharge:em}=(0,j.C)(),e_=(0,l.useRef)(!0),{player:ev}=(0,C.n)(),eh=s()(a,"id_str",""),ef=!!eh,eg=s()(u,"roomId",""),ep=s()(u,"anchor.sec_uid",""),eI=s()(u,"anchor.id_str",""),eE=(null==V?void 0:V[0])||"",ey=s()(u,"room.episode_extra"),eP=s()(ey,"episode_id_str",0)||0,eb=s()(ey,"mod.episode_stage"),eL=s()(x.$F,eb,x.dq.NORMAL),eS=s()(u,"room.others.group_live_data.is_group_live",0),{rechargeConfig:eC}=(0,d.K)(),eN=(0,l.useCallback)(async function(){var e,t,i,r,l,a;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:d="recharge",balance:y=0,amount:P=0,sendGiftParams:b}=s,L={enter_from_merge:(0,c.yW)(),show_reason:null!==(l=x.St[d])&&void 0!==l?l:"other",live_window_type:null!==(a=null===(e=m.Le.getConfig(m.gI.LiveWindowStatus))||void 0===e?void 0:e.type)&&void 0!==a?a:"no_live_window",if_live_play:1,room_id:eg,anchor_id:eI,follow_status:(0,k.qZ)(null==u?void 0:null===(i=u.anchor)||void 0===i?void 0:null===(t=i.follow_info)||void 0===t?void 0:t.follow_status)?1:0},S=B.find(e=>e.id===(null==b?void 0:b.gift_id));null==ed||ed();let C=await (null===(r=_.a.getIAPRechargeParams)||void 0===r?void 0:r.call(_.a)),N=e=>{v.logInstance.sendLog("livesdkRechargeShowDuration",(0,o._)((0,n._)({},L),{charge_reason:d,duration:(null==e?void 0:e.duration)||0,if_recharge_success:(null==e?void 0:e.isSuccess)?1:0}))},w=(0,h.Dr)(f.Q.getItem({sKey:g.CookieKeys.Theme}));(0,p.jo)()?ec({showOfficialEntrance:!1,onShow:()=>{v.logInstance.sendLog("livesdkRechargeShowByContainer",(0,o._)((0,n._)({},L),{load_type:"vmok",charge_reason:d}))},container:U(),requestPublicParams:C,type:d,title:G.B[d],needRechargePrice:y,giftPrice:P,additionalLogParams:L,onClose:N,theme:w,autoNextType:b?"gift":void 0,onAutoNextChange:e=>{b&&(e_.current=e,v.logInstance.sendLog("rechargeSendGiftClick",(0,o._)((0,n._)({},L),{status:e?"on":"off"})))},autoSendGiftParams:{giftImg:null==S?void 0:S.icon,giftName:null==S?void 0:S.name,balance:y,isEnoughMoney:!0},showRechargeResult:!1,onRechargeSuccess:e=>{let{newBalance:t=0}=e;em(),eO(),v.logInstance.sendLog("livesdkRechargeSuccessByContainer",(0,o._)((0,n._)({},L),{load_type:"vmok",charge_reason:d})),e_.current&&b&&t>=P?eM((0,o._)((0,n._)({},b),{isAutoNext:!0})):I.F.info("")},onCombosItemClick:e=>{let{type:t,combo:i={}}=e||{};b&&"manual"===t&&E.emit(E.EVENT.updateRechargeAutoNext,{isEnoughMoney:Number(i.diamond_count)>=y,balance:y,giftImg:null==S?void 0:S.icon,giftName:null==S?void 0:S.name})}}):ea({requestPublicParams:C,type:d,balance:y,amount:P,additionalLogParams:L,onClose:N,theme:w,onAutoNextChange:e=>{b&&v.logInstance.sendLog("rechargeSendGiftClick",(0,o._)((0,n._)({},L),{status:e?"on":"off"}))},autoNext:!0,autoNextHtml:b?(0,M.w)({giftImg:null==S?void 0:S.icon,giftName:null==S?void 0:S.name,balance:y,coinName:(null==eC?void 0:eC.name)||"",isEnoughMoney:!0}):void 0,onCombosItemClick:e=>{let{type:t,combo:i={}}=e||{};b&&"manual"===t&&eu({autoNextHtml:(0,M.w)({giftImg:null==S?void 0:S.icon,giftName:null==S?void 0:S.name,balance:y,coinName:(null==eC?void 0:eC.name)||"",isEnoughMoney:Number(i.diamond_count)>=y})})},showRechargeResult:!1,onSuccess:e=>{let{autoNext:t,balance:i=0}=e;es(),eO(),t&&b&&i>=P?eM((0,o._)((0,n._)({},b),{isAutoNext:!0})):I.F.info("")}}),(0,R.rp)(ev)},[ev,ea,eI,eg,u,eC,B,ec,em]),ew=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A.JL((0,n._)({from_room_id:eg,to_room_id:eg,from_anchor_id:eI,to_user_id:eE||eI,gift_ids:null==e?void 0:e.gift_id},e)).then(t=>{let{data:i,logId:n}=t;if(0!==s()(i,"status_code"))return T.kg.error("",i,n),Promise.reject(i);{let t=s()(i,"data.gift_extra",[]);return t.length>0&&ee(Number(null==e?void 0:e.gift_id),t),Promise.resolve(t)}})},[eg,eI,ee,eE]),eT=(0,l.useCallback)(e=>A.Hv((0,n._)({},e)).then(e=>{let{data:t,logId:i}=e;if(0!==s()(t,"status_code"))return T.kg.error("",t,i),Promise.reject(t);{let e=s()(t,"data.gift_layer",0);return et(e),Promise.resolve(e)}}),[]),eR=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A.JL((0,n._)({from_room_id:eg,to_room_id:eg,from_anchor_id:eI,to_user_id:eI,gift_ids:null==e?void 0:e.gift_id},e)).then(e=>{let{data:t,logId:i}=e;return 0===s()(t,"status_code")?Promise.resolve(s()(t,"data.gift_extra",[])):(T.kg.error("",t,i),Promise.reject(t))})},[eg,eI,ee]),ek=(0,D.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A.Xq((0,n._)({room_id:eg,to_room_id:eg,sec_anchor_id:ep,sec_to_user_id:ep,gift_scene:eL,to_episode_id:eP,fetch_giftlist_from:3},e)).then(async e=>{var t,i;let{data:n,logId:o}=e,r=s()(n,"status_code"),l=(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.pages)||[];return 0===r?(J((0,R.Zk)({rawGiftPages:l,giftScene:eL})),await (0,w.v2)(),J((0,R.BU)(l)),Promise.resolve(n)):(I.F.info(s()(n,"data.prompts","")),T.ZN.error(y.Mo.LiveGiftListError,{content:{statusCode:r,message:(null==n?void 0:null===(i=n.data)||void 0===i?void 0:i.prompts)||"",logId:null!=o?o:"",is_client:(0,P.DT)(),data:n}}),Promise.reject(n))})}),ex=(0,l.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i&&await (0,w.v2)(),A.ao((0,n._)({is_living:!1,download_assets_from:3},e)).then(e=>{var t;let{data:i,logId:n}=e,o=s()(i,"status_code");if(0===o){let e=s()(i,"data.assets",[]);return z((0,R.Js)(e)),Promise.resolve(i)}return I.F.info(s()(i,"data.prompts","")),T.ZN.error(y.Mo.LiveGiftEffectError,{content:{statusCode:o,message:(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.prompts)||"",logId:null!=n?n:"",is_client:(0,P.DT)(),data:i}}),Promise.reject(i)})},[z]),eA=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A.ao((0,n._)({is_living:!1,download_assets_from:3},e)).then(e=>{var t;let{data:i,logId:n}=e,o=s()(i,"status_code");if(0===o){let e=s()(i,"data.assets",[]);return Promise.resolve((0,R.Js)(e)[0])}return T.ZN.error(y.Mo.LiveSingleEffectError,{content:{statusCode:o,message:(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.prompts)||"",logId:null!=n?n:"",is_client:(0,P.DT)(),data:i}}),Promise.reject()})},[]),eO=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ef?A.sb((0,n._)({},e)).then(e=>{let{data:t,logId:i}=e,o=s()(t,"status_code");return 0===o?(X(s()(t,"data.diamond",0)),Promise.resolve(t)):(T.kg.event(`[${y.Tn.Error}]${y.Mo.LiveBalanceError}`,(0,n._)({statusCode:o,logId:null!=i?i:"",is_client:(0,P.DT)()},t)),I.F.info(s()(t,"data.prompts",`${el}`)),T.kg.error(`${el}`,t,i),Promise.reject(t))}):0},[ef,el,X]),eM=(0,l.useCallback)(async function(){var e,t,i,o,l,u,d,c,m,_,v;let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!ef)return await (0,R.m8)("","live_gift"),(0,R.rp)(ev),Promise.reject();if(!Z)return I.F.info(""),(0,R.rp)(ev),Promise.reject();if(eh===eI)return I.F.info(""),(0,R.rp)(ev),Promise.reject();let{isToAnchor:g,giftSource:p,pageType:S,isAutoNext:C,isFromContainer:N=0}=h,w=(0,r._)(h,["isToAnchor","giftSource","pageType","isAutoNext","isFromContainer"]);if(null==er||null===(e=er.sendGiftApiEvent)||void 0===e||e.call(er,{params:h}),K&&!g){let{count:e,price:t}=h;if(t*e*(null!==(u=null==V?void 0:V.length)&&void 0!==u?u:0)>x.sF)return I.F.info(""),h.count>1&&(null==eo||null===(d=eo.liveGiftGroupClick)||void 0===d||d.call(eo,{peopleCount:null!==(c=null==V?void 0:V.length)&&void 0!==c?c:1,giftId:null==h?void 0:h.gift_id,pageType:S,result:"fail"})),Promise.reject()}let O="request_song_list"===p?[]:K&&!g&&null!==(m=null==V?void 0:V.map(e=>e))&&void 0!==m?m:[eI];return eg?A.hF((0,n._)({room_id:eg,to_room_id:eg,to_user_id:K&&!g&&(null==O?void 0:O.length)===1?null==O?void 0:O[0]:eI,to_user_ids:K&&!g&&(null==O?void 0:O.length)!==1?JSON.stringify(O):"",room_anchor_id:eI,to_episode_id:eP,send_type:4,send_scene:eS?128:K&&!g?2:1,gift_source:0,buff_level:0,tags_extra:JSON.stringify({gift_source:p,enter_from_merge:null!==(_=null===(i=window)||void 0===i?void 0:null===(t=i.__INVISIBLE_QUERY__)||void 0===t?void 0:t.enter_from_merge)&&void 0!==_?_:"",enter_method:null!==(v=null===(l=window)||void 0===l?void 0:null===(o=l.__INVISIBLE_QUERY__)||void 0===o?void 0:o.enter_method)&&void 0!==v?v:""})},w)).then(async e=>{var t,i,o,r,l,u,d,c,m,_,v,g,A;let M;let{data:D,logId:j}=e,G=s()(D,"status_code"),U=h.price*h.count;null==er||null===(t=er.sendGiftApiCbEvent)||void 0===t||t.call(er,{params:h,data:D}),h.count>1&&(null==eo||null===(i=eo.liveGiftGroupClick)||void 0===i||i.call(eo,{peopleCount:null!==(o=null==V?void 0:V.length)&&void 0!==o?o:1,giftId:s()(D,"data.gift_id"),pageType:S,result:0===G?"success":"fail"}));try{let e=s()(D,"data.diy_item_info","[]");e&&(M=JSON.parse(e))}catch(e){}if(0===G){let e=(0,R.mL)(s()(D,"data"),B,H,a,M,s()(w,"count"));(null==D?void 0:null===(r=D.data)||void 0===r?void 0:r.combo_hint)&&(null==D?void 0:null===(l=D.data)||void 0===l?void 0:l.gift_id)&&$({[D.data.gift_id]:{comboHint:null==D?void 0:null===(m=D.data)||void 0===m?void 0:m.combo_hint,curCount:null==D?void 0:null===(_=D.data)||void 0===_?void 0:_.combo_count}}),ei(2);let t=null===(u=null!==(v=null==Y?void 0:null===(c=Y.egg_info)||void 0===c?void 0:null===(d=c.teamfight_egg_info)||void 0===d?void 0:d.team_egg_map)&&void 0!==v?v:{})||void 0===u?void 0:u[`${eg}`];(0,b.qQ)(L.storage.LocalStorageKeys.SendGiftTime,new Date().getTime()),q(e),eO(),O.forEach(e=>{var i,o,r,l,a,u,d,c;null==eo||null===(l=eo.liveGiftSendEvent)||void 0===l||l.call(eo,(0,n._)({gift_id:s()(D,"data.gift_id"),combo_cnt:s()(D,"data.combo_count"),group_cnt:s()(D,"data.group_count"),gift_source:p,money_per_unit:s()(D,"data.gift_struct.diamond_count"),gift_cnt:h.count,money:h.count*s()(D,"data.gift_struct.diamond_count"),is_fans_club_gift:(0,k.dU)(s()(D,"data.gift_id"))?"1":"0",to_user_id:String(e),full_seats_cnt:O.length,is_from_container:N,gift_show_from:Q,if_gold_series:(null==h?void 0:h.buff_level)>0||(null==h?void 0:h.plugin_id)?1:0,customize:(null==h?void 0:h.buff_level)>0||(null==h?void 0:h.plugin_id)?2:0,price:h.originPrice,customize_price:h.price-h.originPrice,pageType:S,tab_name:x.BS[S]||S,if_mini_window:(0,F.OL)(),mission_period:(null==t?void 0:t.status)?[2,3,4,5].includes(null==t?void 0:t.status)?"challenge":(null==t?void 0:t.status)===6?"buff":"":"",mission_id:null!==(a=null==t?void 0:t.egg_id)&&void 0!==a?a:"",mission_type:(null==t?void 0:t.egg_type)?(null==t?void 0:t.egg_type)===1?"moneymission":"cntmission":"",mission_target:null!==(u=null==t?void 0:null===(i=t.task_info)||void 0===i?void 0:i.target_score)&&void 0!==u?u:"",mission_time:null!==(d=null==t?void 0:null===(o=t.task_info)||void 0===o?void 0:o.task_duration)&&void 0!==d?d:"",mission_start_from_pkend:null!==(c=null==t?void 0:null===(r=t.task_info)||void 0===r?void 0:r.task_begin_relative_battle_end_time)&&void 0!==c?c:"",gift_position:null==h?void 0:h.sort,combo_position:null==h?void 0:h.combo_position,is_hotkey:null==h?void 0:h.is_hotkey},S===x.kQ.GIFT&&h.sortType?{order_type:h.sortType}:{}))}),C&&E.emit(E.EVENT.RechargeAutoSuccess,{giftId:s()(D,"data.gift_id")}),eo.liveConsumeEvent({statusCode:G,amount:U,is_client:(0,P.DT)(),type:"gift_send"})}else 20003===G?await (0,R.m8)("","live_gift"):40001===G?f&&(en?(I.F.info(`${el}`),eN({type:"balance",balance:U-W,amount:U,sendGiftParams:h})):I.F.info(`${el}`)):42201===G?I.F.info("app"):42202===G?I.F.info("app"):(I.F.info(s()(D,"data.prompts","")),T.ZN.fatal(y.Mo.LiveSendGiftError,{content:{statusCode:G,message:(null==D?void 0:null===(g=D.data)||void 0===g?void 0:g.prompts)||"",logId:null!=j?j:"",is_client:(0,P.DT)(),data:D}}));return 0===G?Promise.resolve(D):(T.ZN.error(y.Mo.LiveGiftSendCodeNotZero,{content:{statusCode:G,message:(null==D?void 0:null===(A=D.data)||void 0===A?void 0:A.prompts)||"",logId:null!=j?j:"",is_client:(0,P.DT)(),data:D}}),(0,R.rp)(ev),Promise.reject(D))}):Promise.reject()},[ef,Z,a,eg,eP,B,H,W,ev,eO,q,eN,V,Q,K,eI,eo,er,el,en,eh,ei]),eF=t&&Z;(0,l.useEffect)(()=>{eF&&(ek(),ex())},[eF]);let eD=t&&ef;return(0,l.useEffect)(()=>{eD&&eO()},[eD]),{getGifts:ek,getEffects:ex,getSingleEffect:eA,getBalance:eO,sendGift:eM,handleRecharge:eN,giftScene:eL,getGiftExtra:ew,getMultiGiftExtra:eR,getGiftLayer:eT}}},160046:function(e,t,i){i.d(t,{o:function(){return d}});var n=i(948375),o=i(88648),r=i(629582),l=i(457388),a=i(727233),s=i(232600),u=i(207964);let d=e=>{let{playerInstance:t,playerLoggerInstance:i,streamInfo:d,isRoomError:c,onH265Degrade:m,onUnablePlay:_,onPlayerDegrade:v,onRetryEnd:h,onError:f,disable:g}=e,{isH265:p,isH265Error:I,setIsH265Error:E,playerUrl:y,useBackUp:P,setUseBackUp:b}=d,L=o.useRef(2),S=(0,n.Z)((e,t)=>{l.ZP.event("playerDegradeMethod",{method:"265Degrade",code:e.code,isH265:p,isFlvPlayer:t}),E(!0),null==i||i.updateExt({h265_degrade:1}),m(e)}),C=(0,n.Z)((e,t,i)=>{var n;l.ZP.event("playerDegradeMethod",{method:"retry",code:e.code,isH265:p,isFlvPlayer:i}),L.current--,null==t||null===(n=t.retry)||void 0===n||n.call(t),null==h||h()}),N=(0,n.Z)((e,t,i)=>{var n;l.ZP.event("playerDegradeMethod",{method:"playerDegrade",code:e.code,isH265:p,isFlvPlayer:i}),null==t||null===(n=t._changeCore)||void 0===n||n.call(t,r.ry,{}),null==v||v()}),w=(0,n.Z)((e,t)=>{l.ZP.event("playerDegradeMethod",{method:"unablePlay",code:e.code,isH265:p,isFlvPlayer:t}),null==_||_()}),T=(0,n.Z)((e,t)=>{l.ZP.event("playerDegradeMethod",{method:"backup",code:e.code,isH265:p,isFlvPlayer:t}),null==b||b(!0)}),R=(0,n.Z)((e,t,i)=>{((0,u.getUseNew265Logic)()?(0,s.aN)(null==t?void 0:t.src):p)?S(e,i):P?w(e,i):T(e,i)}),k=(0,n.Z)((e,t,i)=>{i?R(e,t,i):N(e,t,i)}),x=(0,n.Z)((e,t,i)=>{var n;if(null==t?void 0:null===(n=t.error)||void 0===n?void 0:n.code){k(e,t,i);return}L.current>0?C(e,t,i):P?w(e,i):T(e,i)}),A=[{codes:[1e3,1001,2100,2101,3100],method:(e,t,i)=>{x(e,t,i)}},{codes:[3e3],method:(e,t,i)=>{R(e,t,i)}},{codes:[3001,3002,3003,3004,3005,3006,4e3,5e3,5001,5002,5003,5004,6001],method:(e,t,i)=>{k(e,t,i)}}],O=(0,n.Z)(e=>{try{if(null==c?void 0:c()){var i,n,o;let l=t;!l&&(0,u.getInLiveSearchRefactorAB)()&&(l=null==e?void 0:e.player);let s=(null==e?void 0:null===(i=e.player)||void 0===i?void 0:i.src)||(null==t?void 0:t.src);if(!y&&s&&(0,a.WH)("streamPlayerUrl_not_equal_playerUrl",{streamPlayerUrl:y,playerUrl:s}),!s)return;let{code:d}=e||{},c=(0,u.getUseNewDegradeLogic)()?(null==l?void 0:null===(n=l.baseConfig)||void 0===n?void 0:n.coreType)===r.ry:!!(null==l?void 0:null===(o=l.error)||void 0===o?void 0:o.code),m=String(d),_=A.find(e=>e.codes.some(e=>String(e)===m));((null==_?void 0:_.method)||k)(e,l,c),null==f||f(e)}}catch(e){}}),M=(0,n.Z)(()=>{L.current=2});return o.useEffect(()=>{if(!g&&t)return null==t||t.on(null===r.FP||void 0===r.FP?void 0:r.FP.ERROR,O),null==t||t.on(null===r.FP||void 0===r.FP?void 0:r.FP.CANPLAY,M),()=>{null==t||t.off(null===r.FP||void 0===r.FP?void 0:r.FP.ERROR,O),null==t||t.off(null===r.FP||void 0===r.FP?void 0:r.FP.CANPLAY,M)}},[t,g]),{errorHandle:O}}},683354:function(e,t,i){var n=i(520739),o=i(878389);i(874386);var r=i(88648),l=i(30321),a=i(797973),s=i(754488);let u=(()=>{try{return -1===Number(localStorage.getItem("h265ErrorNum"))}catch(e){return!1}})();t.Z=e=>{let{from:t,player:i,isRoomEnd:d,eventParams:c,isH265:m,isActive:_}=e,v=(0,r.useRef)(!1),h=(0,r.useRef)(0),[f,g]=(0,r.useState)(0),[p,I]=(0,r.useState)(""),[E,y]=(0,r.useState)(0),[P,b]=(0,r.useState)(0),L=(0,r.useRef)(0),S=(0,r.useRef)(0),C=(0,r.useRef)(0),{resetH265ErrorNum:N}=(0,s.Z)({}),w={};w="living"===t||"preview/live"===t?(0,n._)({},null==c?void 0:c.getCommonEventParams(),null==c?void 0:c.getEnterEventParams()):c,!h.current&&(h.current=performance.now());let T=(0,r.useCallback)(()=>{C.current=1},[]),R=(0,a.Z)(()=>{window.collectEvent("player_firstframe",(0,o._)((0,n._)({},w),{start:h.current,loadstart:E,ttfb:P,end:performance.now()})),v.current=!0});(0,r.useEffect)(()=>{_&&(L.current=performance.now())},[_]);let k=(0,r.useMemo)(()=>window.location.href,[]);(0,r.useEffect)(()=>{if(i)return i.once("loadeddata",()=>{"living"===t&&!v.current&&R(),T()}),i.once("canplay",()=>{T()}),i.once("timeupdate",()=>{T()}),i.once("error",e=>{g((null==e?void 0:e.code)||(null==e?void 0:e.errorCode)||((null==e?void 0:e.errorType)==="parse"?31:21)),I(null==e?void 0:e.ex)}),()=>{i.off("loadeddata"),i.off("canplay"),i.off("timeupdate"),i.off("error")}},[i]);let x=(0,r.useCallback)(()=>{var e;let t;return C.current?t=0:d?t=1001:i?!i||(null==i?void 0:null===(e=i.config)||void 0===e?void 0:e.url)?i&&f&&!C.current?t=1004:i&&!C&&(t=1005):t=1003:t=1002,t},[i,d,f]),A=(0,r.useCallback)(e=>{var i,o,r;let l="living"===t?null===(i=window)||void 0===i?void 0:i.playerNewTime:L.current,a={is_stream_received:C.current,is_preview:"sliderCard"===t||"searchPlayer"===t?1:0,error_code:x(),log_type:e,resume_type:"living"===t?"switch_page":"draw",player_error_code:f,player_error_info:p,duration:Math.floor(performance.now()-L.current||(null===(o=window)||void 0===o?void 0:o.playerNewTime)||0),player_elapse:null===(r=window)||void 0===r?void 0:r.playerNewTime,from:t,href:k};if("searchPlayer"!==t||l!==S.current)window.collectEvent("play_leave",(0,n._)({},w,a)),S.current=l},[t,f,p,k]);(0,r.useEffect)(()=>{let e=location.pathname,i=()=>{("living"===t||"living"!==t&&_)&&A(3)};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i),(0,l.Nr)(e)&&i()}},[_,t,A]);let O=(0,r.useCallback)(()=>{T(),!P&&b(performance.now())},[P]),M=(0,r.useCallback)(()=>{!E&&y(performance.now())},[E]);return(0,r.useEffect)(()=>{if(i&&!u&&m){let e=()=>{N(),u=!0};return i.on("canplay",e),()=>{i.off("canplay",e)}}},[i,m]),{playerTeaEvtSubmit:A,setLoadStartTime:M,setTtfbTime:O,setStreamReceived:T}}},81947:function(e,t,i){i.d(t,{l:function(){return n}});var n={TRIPLE_SCREEN_PLUGIN:"triple_screen_plugin",ROTATE_PLUGIN:"rotate_plugin",GLOBAL_APP:"global_app",GIFT_BAR:"gift_bar",GIFT_BAR_MINI:"gift_bar_mini",HEADER:"header",NAVIGATION:"navigation",SIDEBAR:"siderbar",CATEGORY_TAB:"category_tab",TAB:"tab",TITLE_PLUGIN:"title_plugin",FOLLOW_PLUGIN:"follow_plugin",COMMENT_PLUGIN:"comment_plugin",GIFT_SWITCH_PLUGIN:"gift_switch_plugin",GIFT_BAR_PLUGIN:"gift_bar_plugin",EFFECT_SWITCH_PLUGIN:"effect_switch_plugin",GIFT_TRAY_PLUGIN:"gift_tray_plugin",GIFT_EFFECT_PLUGIN:"gift_effect_plugin",FANS_CLUB_PLUGIN:"fans_club_plugin",EXHIBITION_VIEW_PLUGIN:"exhibition_view_plugin",VIP_VIEW_PLUGIN:"vip_view_plugin",EFFECT_PLUGIN:"effect_plugin",HOUR_RANK_LIST_VIEW_PLUGIN:"hour_rank_list_view_plugin",TOOL_BAR_PLUGIN:"tool_bar_plugin",QUALITY_SWITCH_PLUGIN:"quality_switch_plugin",DANMAKU_PLUGIN:"danmaku_plugin",AUDIO_ROOM_PLUGIN:"audio_room_plugin",VIDEO_ROOM_PLUGIN:"video_room_plugin",RTC_LAYER_PLUGIN:"rtc_layer_plugin",PK_VIEW_PLUGIN:"pk_view_plugin",PIP_PLUGIN:"pip_plugin",INPICTURE_PLUGIN:"inpicture_plugin",ADMIN_PRIVILEGE_PLUGIN:"admin_privilege_plugin",LIVING_PLAYER:"living_plyaer",IFRAME_PLAYER:"iframe_player",GIFT_ITEM:"gift_item",GIFT_PANEL:"gift_panel",LIVE_CATEGORY:"live_category",LIVE_CARD:"live_card",RANK_LIST:"rank_list",ORDER_SING_LIST:"order_sing_list",ORDER_SING_RULE:"order_sing_rule",PROMOTION_POP:"promotion_pop",PROMOTION_LIST_WRAPPER:"promotion_list_wrapper",FANS_CLUB_POPUP:"fans_club_popup",USER_POPUP:"user_popup",CHAT_ROOM_PANEL:"chat_room_panel",AUDIENCE_PANEL:"audience_panel",FIXED_CHAT:"fixed_chat",LIVE_CAROUSEL:"live_carousel",LIVE_COVER:"live_cover",LIVE_FULLPLAYER_QULIATY:"live_fullplayer_quality",Live_Like:"live_like",Live_Flutter_Like:"live_flutter_like",DANMAKU_SETTINGS:"danmaku_settings",VIP_LIVE_BOUNDARY:"vip_live_boundary",FOLD_CHAT_ROOM_COMMENT_PLUGIN:"fold_chat_room_comment_plugin",LIVING_PIP_WINDOW:"living-pip-window",SHORT_CUT:"short_cut",SERVICE_CENTER_PLUGIN:"service_center_plugin",QUALITY_SWITCH:"quality_switch",LivePreviewEnterRoom:"LivePreviewEnterRoom",LiveUserProfile:"live_user_profile",LOTTERY_COMPONENT:"lottery_componet",LOTTERY_COMPONENT_PLUGIN:"lottery_componet_plugin",LINK_MIC_DYNAMIC_CONFIG:"link_mic_dynamic_config",LIVE_RESERVE_CARD:"live_reserve_card",StreamCompute:"StreamCompute",RoomLogic:"RoomLogic",EnterAndLeave:"EnterAndLeave",ForceLoginRecorder:"ForceLoginRecorder",ChatRoom:"ChatRoom",Tracking:"Tracking",RoomInit:"RoomInit",RoomMessageConsume:"RoomMessageConsume",StatusHandler:"StatusHandler",RoomEvent:"RoomEvent",RightPanelContainer:"RightPanelContainer",RoomInfoBar:"RoomInfoBar",LandPageContainer:"LandPageContainer",LiveShare:"LiveShare",OperatingBar:"OperatingBar",TheaterPlugin:"TheaterPlugin",KeyBindPlugin:"KeyBindPlugin",VolumeMemoryPlugin:"VolumeMemoryPlugin",RefreshPlugin:"RefreshPlugin",HintContainerPlugin:"HintContainerPlugin",CancelMutePlugin:"CancelMutePlugin",GlobalControlPlugin:"GlobalControlPlugin",PlayerLoggerPlugin:"PlayerLoggerPlugin",PlayerTeaLogPlugin:"PlayerTeaLogPlugin",PlayerEndCover:"PlayerEndCover",VolumeWheelPlugin:"VolumeWheelPlugin",AdaptedBySEIPlugin:"AdaptedBySEIPlugin",PKSEIPlugin:"PKSEIPlugin",NewPlayerErrorCover:"NewPlayerErrorCover",PaidLivePlugin:"PaidLivePlugin",LeadingLoginPlugin:"LeadingLoginPlugin",LinkMicLayoutPlugin:"LinkMicLayoutPlugin",LinkMicPlayModeLimitPlugin:"LinkMicPlayModeLimitPlugin",UpdateFunctionTypePlugin:"UpdateFunctionTypePlugin",TopEffectPlugin:"TopEffectPlugin",OrderSingPlugin:"OrderSingPlugin",GroupFightPlugin:"GroupFightPlugin",GuestBattlePlugin:"GuestBattlePlugin",LiveReserveCard:"LiveReserveCard",PlayerControl:"PlayerControl",UgcAvatar:"UgcAvatar",PlayerEventConsume:"PlayerEventConsume",GroupLive:"GroupLive",ChangeDynamicBg:"ChangeDynamicBg",LinkMicApplyPlugin:"LinkMicApplyPlugin",ORDER_SING_SELECT_GUEST:"order_sing_select_guest",PausePop:"PausePop",DetailContextMenuPlugin:"DetailContextMenuPlugin",DoubleScreenPlugin:"DoubleScreenPlugin",ProgrammeWrapper:"ProgrammeWrapper",LiveTDK:"LiveTDK",AutoRunModal:"AutoRunModal",AudioCheatTips:"AudioCheatTips",GetDressList:"GetDressList",GROUP_LIVE_PLUGIN:"group_live_plugin",LiveFromAppTips:"LiveFromAppTips",COMMENT_EDITOR:"comment_editor",WaterMark:"WaterMark",LIVE_CARD_IN_MIX_PLAYER:"live_card_in_mix_player",VrPlugin:"VrPlugin",Gift_MENU_PLUGIN:"GiftMenu",LIVE_CHANNEL_BANNER_ROOMS:"LIVE_CHANNEL_BANNER_ROOMS",LIVE_CHANNEL_BANNER:"LIVE_CHANNEL_BANNER"}},441466:function(e,t,i){i.d(t,{AY:function(){return a},HI:function(){return s},NY:function(){return l},WK:function(){return r},kc:function(){return n},t0:function(){return o}});var n={WEBCAST_CHAT_MESSAGE:"WebcastChatMessage",WEBCAST_GIFT_MESSAGE:"WebcastGiftMessage"};let o=12e3,r=[{desc:"",value:.1,key:1,log:.1},{desc:"",value:.2,key:5,log:.2},{desc:"25%",value:.25,key:2,log:.4},{desc:"50%",value:.5,key:3,log:.5},{desc:"80%",value:.8,key:4,log:.8}],l=[{desc:"",value:16,width:`${16}px`,key:5,log:-1},{desc:"",value:20,width:"20px",key:1,log:0},{desc:"",value:24,width:`${22}px`,key:2,log:1},{desc:"",value:28,width:`${26}px`,key:3,log:2},{desc:"",value:32,width:`${30}px`,key:4,log:3}],a=[{desc:"",value:1.5*o,key:1,log:0},{desc:"",value:1.2*o,key:2,log:1},{desc:"",value:.9*o,key:3,log:2}],s={opacity:80,area:3,fontSize:1,speed:1,giftOn:!0,packageOn:!0}},861519:function(e,t,i){i.d(t,{_:function(){return n}});var n={LivingInit:"LivingInit",FirstFrame:"FirstFrame",DoubleScreenLoaded:"DoubleScreenLoaded"}},886251:function(e,t,i){i.d(t,{f:function(){return n}});let n="living_player_container"},383058:function(e,t,i){i.d(t,{w:function(){return n}});var n={StarfansUser:"sslocal://lynxview?url=https%3A%2F%2Flf-webcast-gr-sourcecdn.bytegecko.com%2Fobj%2Fbyte-gurd-source-gr%2Fwebcast%2Fmono%2Flynx_pc%2Fstarfans_lynx_pc%2Fpages%2Fstarfans_user.js&type=popup_pia_=1&gravity=bottom&height_percent=73&rate_height=600&horizontal_width=375&use_pia=1&enable_preload=main",Exhibition:"https://lf-webcast-gr-sourcecdn.bytegecko.com/obj/byte-gurd-source-gr/webcast/mono/lynx/revenue_gift_exhibition_hall_lynx3_douyin_rspeedy/pages/gift_list_rspeedy.json?_pia_=1&web_bg_color=ff060a19&sponsor_status=normal_sponsor&showPcClose=true"}},312065:function(e,t,i){i.d(t,{C:function(){return n}});var n={iframe:"iframe",liveCard:"live_card",liveSmallCard:"live_small_card",liveCarousel:"live_carousel",liveDetail:"live_detail",mediaDetail:"live_media_detail",smallWindow:"live_small_window",liveCollege:"live_college",liveSearch:"live_search",liveSlider:"live_slider",liveFeedFull:"live_feed_full",liveModal:"live_modal"}},346398:function(e,t,i){var n=i(563097),o=i(88648),r=i(716304),l=i(725215),a=i(401624);t.Z=(0,o.memo)((0,l.Pi)(e=>{let{children:t,name:i}=e,l=(0,o.useContext)(r.h),s=a.Z.getIocItem(l,i);return s?(0,n.jsx)(s.Component,{children:t}):null}))},716304:function(e,t,i){i.d(t,{T:function(){return r},h:function(){return o}});var n=i(563097);let o=i(88648).createContext([]),r=e=>{let{children:t,context:i}=e;return(0,n.jsx)(o.Provider,{value:i,children:t})}},62783:function(e,t,i){i.d(t,{GI:function(){return o}});var n=i(401624);let o=n.Z.defineIoc.bind(n.Z)},401624:function(e,t,i){var n=i(134761);i(268917),i(527785),i(981168);var o=i(104013);t.Z=new class e{defineIoc(e){!this.iocList.find(t=>t.name===e.name&&t.index===e.index)&&this.iocList.push(e)}getIocList(e){return Object.values(this.iocList.filter(t=>t.condition(e)).reduce((e,t)=>((!e[t.name]||e[t.name].index<t.index)&&(e[t.name]=t),e),{}))}getIocItem(e,t){return this.iocList.filter(e=>e.name===t).filter(t=>t.condition(e)).sort((e,t)=>t-e)[0]}constructor(){(0,n._)(this,"iocList",[]),(0,n._)(this,"context",{}),(0,o.makeAutoObservable)(this)}}},259898:function(e,t,i){i.d(t,{OV:function(){return o},hx:function(){return r}});var n=i(854038);let o=n.Z.defineLayoutItem.bind(n.Z),r=n.Z},443737:function(e,t,i){i.d(t,{n:function(){return f}});var n=i("520739"),o=i("563097"),r=i("88648"),l=i("819972");i("874386");var a=i("123881"),s=i("861519"),u=i("879550"),d=i("668899"),c=i("727233");let m=e=>{let t=(0,a.bU)(),{renderWhen:i,timeout:n,componentName:o,taskPriority:l}=e,m=r.useMemo(()=>i.indexOf(s._.LivingInit)>=0,[i]),[_,v]=r.useState(m),h=r.useRef();return(0,r.useEffect)(()=>{if(t&&!m){let e=t.onImmediately(i,()=>{let e=()=>{v(!0),clearTimeout(h.current)},t=(0,d.iD)(),r=(0,d.Ee)(o)||l||"immediate";(0,c.qu)(`
          [useRenderWhen]:, 
          useScheduler: ${t},
          componentName: ${o},
          taskPriority: ${r}, 
          timeout: ${n}, 
          renderWhen: ${i}
        `),t&&("user-blocking"===r||"user-visible"===r||"background"===r)?u.p.postTask({task:e,priority:r}):e()});return h.current=window.setTimeout(()=>{v(!0),null==e||e()},n),()=>{null==e||e(),clearTimeout(h.current)}}},[t,i,n,m]),(0,r.useEffect)(()=>{if(t&&!m){let e=t.onForceMountComponent(o,()=>{v(!0),clearTimeout(h.current)}),i=t.onForceUnmountComponent(o,()=>{v(!1),clearTimeout(h.current)});return()=>{null==e||e(),null==i||i()}}},[t,o,m]),_};var _=i("620923"),v=i("519055"),h=i("725215");function f(e,t){let{ErrorBoundary:i=l.k,name:s,fallback:u=(0,o.jsx)(o.Fragment,{}),renderWhen:c,timeout:f}=t;function g(t){let i=(0,a.bU)();return(0,r.useEffect)(()=>{null==i||i.emitComponentAfter(s,{})},[i]),(0,o.jsx)(e,(0,n._)({},t))}return(0,h.Pi)(function(e){let t=m({renderWhen:(0,d.VZ)(s)||c,timeout:f||(0,d.UX)()||3e3,componentName:s}),l=(0,a.bU)();(0,r.useMemo)(()=>{t&&(null==l||l.emitComponentBefore(s,{}))},[t,l]);let h=(0,r.useMemo)(()=>{if(!v.s)return(0,_.OK)()},[]);return t?(0,o.jsx)(i,{componentName:s,_slardarInstance:h,children:(0,o.jsx)(g,(0,n._)({},e))}):u},{forwardRef:!1})}},123881:function(e,t,i){i.d(t,{Gw:function(){return a},bU:function(){return s}});var n=i(563097),o=i(88648),r=i(702281);let l=o.createContext(null),a=e=>{let{children:t,uuid:i}=e,a=(0,o.useMemo)(()=>new r.d(i),[i]),s=(0,o.useRef)(a);return s.current=a,(0,o.useEffect)(()=>()=>{var e;null==s||null===(e=s.current)||void 0===e||e.destroy()},[]),(0,n.jsx)(l.Provider,{value:a,children:t})},s=()=>o.useContext(l)},702281:function(e,t,i){i.d(t,{d:function(){return r}});var n=i(134761);i(874386);var o=i(970106);class r{static after(e){return"__after__"+e}static before(e){return"__before__"+e}static unmountComponent(e){return"__unmountComponent__"+e}static beforeFn(e){return"__beforeFn__"+e}static afterFn(e){return"__afterFn__"+e}static beforeComponent(e){return"__beforeComponent__"+e}static afterComponent(e){return"__afterComponent__"+e}static forceUnmountComponent(e){return"__forceUnmountComponent__"+e}static forceMountComponent(e){return"__forceMountComponent__"+e}on(e,t){return this.eventBus.on(e,t),()=>this.eventBus.off(e,t)}onImmediately(e,t){return this.emitedEvents.has(e)?(t(),()=>{}):(this.on(e,t),()=>this.eventBus.off(e,t))}off(e,t){this.eventBus.off(e,t)}emit(e,t){this.eventBus.emit(e,t)}onComponentBefore(e,t){return this.eventBus.on(r.beforeComponent(e),t),()=>this.eventBus.off(r.beforeComponent(e),t)}onComponentAfter(e,t){return this.eventBus.on(r.afterComponent(e),t),()=>this.eventBus.off(r.afterComponent(e),t)}onFnBefore(e,t){return this.eventBus.on(r.beforeFn(e),t),()=>this.eventBus.off(r.beforeFn(e),t)}onFnAfter(e,t){return this.eventBus.on(r.afterFn(e),t),()=>this.eventBus.off(r.afterFn(e),t)}emitComponentBefore(e,t){this.eventBus.emit(r.beforeComponent(e),t)}emitComponentAfter(e,t){this.eventBus.emit(r.afterComponent(e),t)}emitFnBefore(e,t){this.eventBus.emit(r.beforeFn(e),t)}emitFnAfter(e,t){this.eventBus.emit(r.afterFn(e),t)}emitUnmountComponent(e,t){this.eventBus.emit(r.unmountComponent(e),t)}onUnmountComponent(e,t){return this.eventBus.on(r.unmountComponent(e),t),()=>this.eventBus.off(r.unmountComponent(e),t)}onForceUnmountComponent(e,t){return this.eventBus.on(r.forceUnmountComponent(e),t),()=>this.eventBus.off(r.forceUnmountComponent(e),t)}onForceMountComponent(e,t){return this.eventBus.on(r.forceMountComponent(e),t),()=>this.eventBus.off(r.forceMountComponent(e),t)}dispatchForceUnmountComponent(e){this.eventBus.emit(r.forceUnmountComponent(e),{})}dispatchForceMountComponent(e){this.eventBus.emit(r.forceMountComponent(e),{})}get id(){return this._id}destroy(){try{this.eventBus.all.clear()}catch(e){}}constructor(e){var t=this;(0,n._)(this,"eventBus",(0,o.Z)()),(0,n._)(this,"_id",void 0),(0,n._)(this,"emitedEvents",new Set),this._id=e;let i=this.eventBus.emit.bind(this.eventBus);this.eventBus.emit=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];t.emitedEvents.add(n[0]),i(...n)}}}},298604:function(e,t,i){i.d(t,{V:function(){return r}});var n=i(134761),o=i(520739);class r{constructor(e){(0,n._)(this,"store",null),(0,n._)(this,"livesdkSubTabShow",e=>{let{eventStore:{basicEvent:t}}=this.store;window.collectEvent("livesdk_sub_tab_show",(0,o._)({},e,t.getCommonEventParams(),t.getPlayerCommonEventParams(),t.getEnterEventParams(),t.getRecommendParams()))}),(0,n._)(this,"livesdkSearchBarClick",e=>{let{eventStore:{basicEvent:t}}=this.store;window.collectEvent("livesdk_search_bar_click",(0,o._)({},e,t.getCommonEventParams(),t.getPlayerCommonEventParams(),t.getEnterEventParams(),t.getRecommendParams()))}),(0,n._)(this,"livesdkSearchResultWordsClick",e=>{let{eventStore:{basicEvent:t}}=this.store;window.collectEvent("livesdk_search_result_words_click",(0,o._)({},e,t.getCommonEventParams(),t.getPlayerCommonEventParams(),t.getEnterEventParams(),t.getRecommendParams()))}),(0,n._)(this,"livesdkSearchResultDeleteClick",e=>{let{eventStore:{basicEvent:t}}=this.store;window.collectEvent("livesdk_search_result_delete",(0,o._)({},e,t.getCommonEventParams(),t.getPlayerCommonEventParams(),t.getEnterEventParams(),t.getRecommendParams()))}),this.store=e}}},317326:function(e,t,i){i.d(t,{r:function(){return r}});var n=i(134761),o=i(520739);class r{constructor(e){var t=this;(0,n._)(this,"store",null),(0,n._)(this,"liveOperationBannerShowEvent",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{eventStore:{basicEvent:i}}=t.store;window.collectEvent("livesdk_pc_first_page_banner_show",(0,o._)({},i.getCommonEventParams(),i.getEnterEventParams(),e))}),(0,n._)(this,"liveOperationBannerClickEvent",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{eventStore:{basicEvent:i}}=t.store;window.collectEvent("livesdk_pc_first_page_banner_click",(0,o._)({},i.getCommonEventParams(),i.getEnterEventParams(),e))}),(0,n._)(this,"liveChannelGuessCategoryClickEvent",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{eventStore:{basicEvent:i}}=t.store;window.collectEvent("livesdk_pc_guessyoulike_click",(0,o._)({},i.getCommonEventParams(),i.getEnterEventParams(),e))}),this.store=e}}},293560:function(e,t,i){i.d(t,{Z:function(){return m},p:function(){return c}});var n=i(134761),o=i(435326),r=i(479638),l=i(470955),a=i.n(l),s=i(527459),u=i(421442),d=i(104013),c={AUTO:0,0:"AUTO",ENABLE:1,1:"ENABLE",DISABLE:-1,"-1":"DISABLE"};class m extends r.Z{get isSpringSkin(){return!!this.resource}get isLiveDetail(){return!!(0,s.m)(o.m.LIVING,this.pathname)||!!(0,s.m)(o.m.DOUYIN_LIVING,this.pathname)}get isXiguaDomain(){return -1!==[u.LIVE_XIGUA_DOMAIN,u.XIGUA_DOMAIN].indexOf(this.domain)}get navigationCurrent(){return this.isLiveDetail?"":this.navigationSelected}get showNavigation(){let e=this.shouldShowModule(this.hardNavigation);return void 0!==e?e:(!this.domain||!this.isXiguaDomain)&&(!!(0,s.m)(o.m.HOT_LIVE,this.pathname)||!(this.isClient&&(0,s.m)(o.m.LIVING,this.pathname)||this.isClient&&(0,s.m)(o.m.DOUYIN_LIVING,this.pathname))&&[o.m.CATEGORY_NEW,o.m.CATEGORY,o.m.HOT_LIVE,o.m.HOME,o.m.LIVING,o.m.DOUYIN_LIVING].some(e=>!!(0,s.m)(e,this.pathname)))}get hideNavigation(){return!this.showNavigation}get showCategoryTab(){let e=this.shouldShowModule(this.hardCategoryTab);return void 0!==e?e:(!this.domain||!this.isXiguaDomain)&&![o.m.LIVING_COMMENT].some(e=>!!(0,s.m)(e,this.pathname))}get hideCategoryTab(){return!this.showCategoryTab}get showHeader(){let e=this.shouldShowModule(this.hardHeader);return void 0!==e?e:(!this.domain||!this.isXiguaDomain)&&![o.m.IFRAME,o.m.VIDEO_DOMAIN_IFRAME,o.m.LIVING_COMMENT].some(e=>!!(0,s.m)(e,this.pathname))||this.hidehead}get hideHeader(){return!this.showHeader}get showFooter(){let e=this.shouldShowModule(this.hardFooter);return void 0!==e?e:![o.m.LIVING_COMMENT,o.m.LIVING,o.m.DOUYIN_LIVING,o.m.DOUYIN_RECOMMEND_LIVING,o.m.DOUYIN_FOLLOW_LIVING,o.m.IFRAME].some(e=>!!(0,s.m)(e,this.pathname))}get hideFooter(){return!this.showFooter}get xiguaHeader(){return this.domain&&-1!==[u.LIVE_XIGUA_DOMAIN].indexOf(this.domain)}get showSideBar(){let e=this.shouldShowModule(this.hardSideBar);return void 0!==e?e:![o.m.IFRAME,o.m.VIDEO_DOMAIN_IFRAME,o.m.LIVING_COMMENT].some(e=>!!(0,s.m)(e,this.pathname))}get hideSideBar(){return!this.showSideBar}get showErrorStyle(){let e=this.shouldShowModule(this.hardSideBar);return void 0!==e?e:![o.m.ERROR].some(e=>!!(0,s.m)(e,this.pathname))}get hideErrorStyle(){return!this.showErrorStyle}shouldShowModule(e){return 1===e||-1!==e&&void 0}setHeaderOpacity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.transparentHeader=e}setHardCategoryTab(e){this.hardCategoryTab=e}setHardHeader(e){this.hardHeader=e}setHardNavigation(e){this.hardNavigation=e}setHardSideBar(e){this.hardSideBar=e}constructor(){var e;super(),e=this,(0,n._)(this,"disableUnLoginFilter",!1),(0,n._)(this,"rawThemeConfig",{}),(0,n._)(this,"domain","live.douyin.com"),(0,n._)(this,"pathname",""),(0,n._)(this,"isClient",!1),(0,n._)(this,"navigationSelected","live"),(0,n._)(this,"hidehead",!1),(0,n._)(this,"forceTheme",void 0),(0,n._)(this,"hardNavigation",0),(0,n._)(this,"hardCategoryTab",0),(0,n._)(this,"hardHeader",0),(0,n._)(this,"hardFooter",0),(0,n._)(this,"hardSideBar",0),(0,n._)(this,"hardErrorStyle",0),(0,n._)(this,"transparentHeader",!1),(0,n._)(this,"specialBanner",!1),(0,n._)(this,"hasRelevantRoom",!0),(0,n._)(this,"immersive",!1),(0,n._)(this,"programmeFill",void 0),(0,n._)(this,"resource",void 0),(0,n._)(this,"playerMargin",0),(0,n._)(this,"reset",()=>{this.disableUnLoginFilter=!1,this.rawThemeConfig={},this.domain="live.douyin.com",this.pathname="",this.isClient=!1,this.navigationSelected="live",this.hidehead=!1,this.forceTheme=void 0,this.hardNavigation=0,this.hardCategoryTab=0,this.hardHeader=0,this.hardFooter=0,this.hardSideBar=0,this.hardErrorStyle=0,this.transparentHeader=!1,this.specialBanner=!1,this.hasRelevantRoom=!0,this.immersive=!1,this.programmeFill=void 0,this.resource=void 0,this.playerMargin=0}),(0,n._)(this,"makeObservable",()=>{(0,d.makeObservable)(this,{disableUnLoginFilter:d.observable,rawThemeConfig:d.observable,domain:d.observable,pathname:d.observable,isClient:d.observable,navigationSelected:d.observable,hidehead:d.observable,forceTheme:d.observable,hardNavigation:d.observable,hardCategoryTab:d.observable,hardHeader:d.observable,hardFooter:d.observable,hardSideBar:d.observable,hardErrorStyle:d.observable,transparentHeader:d.observable,specialBanner:d.observable,hasRelevantRoom:d.observable,programmeFill:d.observable,immersive:d.observable,resource:d.observable,playerMargin:d.observable,setHint:d.action,setModule:d.action,navigationCurrent:d.computed,showNavigation:d.computed,showCategoryTab:d.computed,showHeader:d.computed,showFooter:d.computed,showSideBar:d.computed,showErrorStyle:d.computed,hideNavigation:d.computed,hideCategoryTab:d.computed,hideHeader:d.computed,hideFooter:d.computed,hideSideBar:d.computed,hideErrorStyle:d.computed,xiguaHeader:d.computed,isLiveDetail:d.computed,setHardCategoryTab:d.action,isSpringSkin:d.computed})}),(0,n._)(this,"setModule",function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e[`hard${a()(t)}`]=i}),(0,n._)(this,"setHint",function(t,i){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;e.domain=t,e.pathname=i,e.isClient=n,e.hidehead=!!o}),(0,n._)(this,"setImmersive",e=>{this.immersive=e}),(0,n._)(this,"setSpecialBanner",e=>{this.specialBanner=e}),(0,n._)(this,"setResource",e=>{this.resource=e}),(0,n._)(this,"setForceTheme",e=>{this.forceTheme=e});this.makeObservable()}}},277733:function(e,t,i){i.d(t,{Qz:function(){return n}});var n={Admin:0,0:"Admin",Base:1,1:"Base",Advanced:2,2:"Advanced",Supreme:3,3:"Supreme"}},613136:function(e,t,i){i.d(t,{W6:function(){return n}});var n={TPYE_LINKER_UNKNOWN:0,0:"TPYE_LINKER_UNKNOWN",TYPE_LINKER_CREATE:1,1:"TYPE_LINKER_CREATE",TYPE_LINKER_CLOSE:2,2:"TYPE_LINKER_CLOSE",TYPE_LINKER_INVITE:3,3:"TYPE_LINKER_INVITE",TYPE_LINKER_APPLY:4,4:"TYPE_LINKER_APPLY",TYPE_LINKER_REPLY:5,5:"TYPE_LINKER_REPLY",TPYE_LINKER_ENTER:6,6:"TPYE_LINKER_ENTER",TPYE_LINKER_LEAVE:7,7:"TPYE_LINKER_LEAVE",TYPE_LINKER_PERMIT:8,8:"TYPE_LINKER_PERMIT",TPYE_LINKER_CANCEL_INVITE:9,9:"TPYE_LINKER_CANCEL_INVITE",TYPE_LINKER_WAITING_LIST_CHANGE:10,10:"TYPE_LINKER_WAITING_LIST_CHANGE",TYPE_LINKER_LINKED_LIST_CHANGE:11,11:"TYPE_LINKER_LINKED_LIST_CHANGE",TYPE_LINKER_UPDATE_USER:12,12:"TYPE_LINKER_UPDATE_USER",TPYE_LINKER_KICK_OUT:13,13:"TPYE_LINKER_KICK_OUT",TPYE_LINKER_CANCEL_APPLY:14,14:"TPYE_LINKER_CANCEL_APPLY",TYPE_LINKER_BAN:15,15:"TYPE_LINKER_BAN",TYPE_LINKER_DISPATCH_ITEM:16,16:"TYPE_LINKER_DISPATCH_ITEM",TYPE_LINKER_VIOLATION_REMINDER:17,17:"TYPE_LINKER_VIOLATION_REMINDER",TYPE_LINKER_UPDATE_LINK_TYPE_APPLY:18,18:"TYPE_LINKER_UPDATE_LINK_TYPE_APPLY",TYPE_LINKER_UPDATE_LINK_TYPE_REPLY:19,19:"TYPE_LINKER_UPDATE_LINK_TYPE_REPLY",TYPE_LINKER_AVATAR_AUDIT:20,20:"TYPE_LINKER_AVATAR_AUDIT",TYPE_APPlY_EXPIRED:22,22:"TYPE_APPlY_EXPIRED",TYPE_APPLY_STRONG_REMINDER:23,23:"TYPE_APPLY_STRONG_REMINDER",TYPE_ANCHOR_STREAM_SWITCH:24,24:"TYPE_ANCHOR_STREAM_SWITCH",TYPE_LINKER_CLICK_SCREEN:25,25:"TYPE_LINKER_CLICK_SCREEN",TYPE_LINKER_LOCK_POSITION:26,26:"TYPE_LINKER_LOCK_POSITION",TYPE_LINKER_FOLLOW_STRONG_GUIDE:27,27:"TYPE_LINKER_FOLLOW_STRONG_GUIDE",TYPE_LINKER_SHARE_VIDEO_IM:28,28:"TYPE_LINKER_SHARE_VIDEO_IM",TYPE_GUEST_INVITE:29,29:"TYPE_GUEST_INVITE",TYPE_GUEST_EXIT_CAST_SCREEN:30,30:"TYPE_GUEST_EXIT_CAST_SCREEN",TYPE_LINKER_SWITCH_SCENE:31,31:"TYPE_LINKER_SWITCH_SCENE",TYPE_LINK_PHASEINFO:32,32:"TYPE_LINK_PHASEINFO",TYPE_LINKER_CHANGE_PLAY_MODE:33,33:"TYPE_LINKER_CHANGE_PLAY_MODE",TYPE_LOW_BALANCE_FOR_PAID_LINKMIC:34,34:"TYPE_LOW_BALANCE_FOR_PAID_LINKMIC",TYPE_DEGRADE_ALERT:35,35:"TYPE_DEGRADE_ALERT",TYPE_ENLARGE_GUEST_INVITE:36,36:"TYPE_ENLARGE_GUEST_INVITE",TYPE_ENLARGE_GUEST_REPLY:37,37:"TYPE_ENLARGE_GUEST_REPLY",TYPE_ENLARGE_GUEST_APPLY:38,38:"TYPE_ENLARGE_GUEST_APPLY",TYPE_LINK_PREPARE_APPLY:39,39:"TYPE_LINK_PREPARE_APPLY",TYPE_LINK_CANCEL_PREPARE_APPLY:40,40:"TYPE_LINK_CANCEL_PREPARE_APPLY",TYPE_LINKER_CROSS_ROOM_UPDATE:41,41:"TYPE_LINKER_CROSS_ROOM_UPDATE",TYPE_LINKER_CHANGE_MULTI_PK_TEAM_INFO:42,42:"TYPE_LINKER_CHANGE_MULTI_PK_TEAM_INFO",TYPE_CROSS_ROOM_LINK_INVITE:43,43:"TYPE_CROSS_ROOM_LINK_INVITE",TYPE_CROSS_ROOM_LINK_REPLY:44,44:"TYPE_CROSS_ROOM_LINK_REPLY",TYPE_CROSS_ROOM_LINK_CANCEL_INVITE:45,45:"TYPE_CROSS_ROOM_LINK_CANCEL_INVITE",TYPE_LINK_RESUME_AUDIENCE:46,46:"TYPE_LINK_RESUME_AUDIENCE",TYPE_LINK_BATTLE_CONNECT:47,47:"TYPE_LINK_BATTLE_CONNECT",TYPE_RESUME_APPLY:48,48:"TYPE_RESUME_APPLY",TYPE_CROSS_ROOM_RTC_INFO:49,49:"TYPE_CROSS_ROOM_RTC_INFO",TYPE_ANCHOR_UPDATE_LINKMIC_CONFIG:50,50:"TYPE_ANCHOR_UPDATE_LINKMIC_CONFIG",TYPE_ANCHOR_UPDATE_LAYOUT:51,51:"TYPE_ANCHOR_UPDATE_LAYOUT",TYPE_APPLY_RANK_CHANGE:52,52:"TYPE_APPLY_RANK_CHANGE",TYPE_CHANGE_MEDIA_INFO:53,53:"TYPE_CHANGE_MEDIA_INFO",TYPE_LINKER_UILAYOUT_CHANGE:54,54:"TYPE_LINKER_UILAYOUT_CHANGE",TYPE_UPDATE_WAITING_USER_OFFSET:55,55:"TYPE_UPDATE_WAITING_USER_OFFSET",TYPE_REMOVE_WAITING_USER:56,56:"TYPE_REMOVE_WAITING_USER",TYPE_LINKER_PREPARE_INVITE:57,57:"TYPE_LINKER_PREPARE_INVITE",TYPE_LINKER_PREPARE_REPLY:58,58:"TYPE_LINKER_PREPARE_REPLY",TYPE_LINKER_CONFIRM_UNSILENCE:59,59:"TYPE_LINKER_CONFIRM_UNSILENCE",TYPE_LINKER_SWITCH_CHANNEL_INVITE:60,60:"TYPE_LINKER_SWITCH_CHANNEL_INVITE",TYPE_LINKER_SWITCH_CHANNEL_REPLY:61,61:"TYPE_LINKER_SWITCH_CHANNEL_REPLY",TYPE_LINKER_SWITCH_CHANNEL_CANCEL:62,62:"TYPE_LINKER_SWITCH_CHANNEL_CANCEL",TYPE_AUDIO_AVATAR_NOTICE:63,63:"TYPE_AUDIO_AVATAR_NOTICE",TYPE_RTC_ACTION:64,64:"TYPE_RTC_ACTION",TYPE_LINKER_CROSS_LINK_INFO_UPDATE:65,65:"TYPE_LINKER_CROSS_LINK_INFO_UPDATE",TYPE_LINKER_CROSS_LINK_FINISH:66,66:"TYPE_LINKER_CROSS_LINK_FINISH",TYPE_INIT_CHAT_ROOM:67,67:"TYPE_INIT_CHAT_ROOM",TYPE_LINKER_AUDIENCE_WAITING_LIST_CHANGE:68,68:"TYPE_LINKER_AUDIENCE_WAITING_LIST_CHANGE",TYPE_LINKER_UPDATE_LINK_TYPE_FORCE_OPEN_CAMERA:69,69:"TYPE_LINKER_UPDATE_LINK_TYPE_FORCE_OPEN_CAMERA",TYPE_LINKER_ENLARGE_UPDATE:70,70:"TYPE_LINKER_ENLARGE_UPDATE",TPYE_LINKER_SYS_KICK_OUT:101,101:"TPYE_LINKER_SYS_KICK_OUT",TPYE_LINKER_SYNC_WRDS:1e4,1e4:"TPYE_LINKER_SYNC_WRDS",TYPE_LINKER_POS_ATTR:10001,10001:"TYPE_LINKER_POS_ATTR",TYPE_RTS_UPDATE_STATUS:10002,10002:"TYPE_RTS_UPDATE_STATUS"}},192109:function(e,t,i){i.d(t,{iM:function(){return n}});var n={TYPE_NONE:0,0:"TYPE_NONE",TYPE_TURNON:1,1:"TYPE_TURNON",TYPE_PERMIT:2,2:"TYPE_PERMIT",TYPE_KICKOUTED:3,3:"TYPE_KICKOUTED",TYPE_FINISH:4,4:"TYPE_FINISH",TYPE_WAITING_LIST_CHANGED:5,5:"TYPE_WAITING_LIST_CHANGED",TYPE_LINKED_LIST_CHANGED:6,6:"TYPE_LINKED_LIST_CHANGED",TYPE_ALL_LIST_CHANGED:7,7:"TYPE_ALL_LIST_CHANGED",TYPE_FAN_TICKET_CHANGED:8,8:"TYPE_FAN_TICKET_CHANGED",TYPE_RANKING_UPDATE:9,9:"TYPE_RANKING_UPDATE",TYPE_SILENCE:10,10:"TYPE_SILENCE",TYPE_UNSILENCE:11,11:"TYPE_UNSILENCE",TYPE_INVITE:12,12:"TYPE_INVITE",TYPE_REPLY:13,13:"TYPE_REPLY",TYPE_AUTO_JOIN:14,14:"TYPE_AUTO_JOIN",TYPE_AGREE_ADMIN_FIRST_INVITE:15,15:"TYPE_AGREE_ADMIN_FIRST_INVITE",TYPE_SILENCE_PASSIVE:16,16:"TYPE_SILENCE_PASSIVE",TYPE_SWITCH_SCENE:17,17:"TYPE_SWITCH_SCENE",TYPE_JOIN_GAME_BARRAGE_RTC:18,18:"TYPE_JOIN_GAME_BARRAGE_RTC",TYPE_LEAVE_GAME_BARRAGE_RTC:19,19:"TYPE_LEAVE_GAME_BARRAGE_RTC",TYPE_BATTLE_DATA:202,202:"TYPE_BATTLE_DATA"}},508789:function(e,t,i){i.d(t,{ZP:function(){return n}});var n={TPYE_MESSAGE_UNKNOWN:0,0:"TPYE_MESSAGE_UNKNOWN",TYPE_MESSAGE_CREATE:1,1:"TYPE_MESSAGE_CREATE",TYPE_MESSAGE_FINISH:2,2:"TYPE_MESSAGE_FINISH",TYPE_MESSAGE_SING_ACTION_TOAST:3,3:"TYPE_MESSAGE_SING_ACTION_TOAST",TYPE_MESSAGE_SING_ACTION:4,4:"TYPE_MESSAGE_SING_ACTION",TYPE_MESSAGE_MV_ACTION:5,5:"TYPE_MESSAGE_MV_ACTION",TYPE_MESSAGE_AI_LYRICS:6,6:"TYPE_MESSAGE_AI_LYRICS"}},862349:function(e,t,i){i.d(t,{Dk:function(){return s},L6:function(){return _},gf:function(){return c},nE:function(){return u},o9:function(){return d}});var n=i(520739),o=i(878389);i(779788),i(874386);var r=i(441466),l=i(637005),a=i(88648);let s=(e,t,i,a)=>{if(i&&a){let r=JSON.parse(window.localStorage.getItem("DanmaSetting_GiftAndPackage")),l=(null==r?void 0:r[`${a}_${i}`])||{};r?window.localStorage.setItem("DanmaSetting_GiftAndPackage",JSON.stringify((0,o._)((0,n._)({},r),{[`${a}_${i}`]:(0,o._)((0,n._)({},l),{expired:Date.now()+864e5,[e]:t})}))):window.localStorage.setItem("DanmaSetting_GiftAndPackage",JSON.stringify({[`${a}_${i}`]:{expired:Date.now()+864e5,giftOn:"giftOn"!==e||t,packageOn:"packageOn"!==e||t}}))}else{let i=JSON.parse(window.localStorage.getItem("danmakuConfig"));i?window.localStorage.setItem("danmakuConfig",JSON.stringify((0,o._)((0,n._)({},i),{[e]:t}))):window.localStorage.setItem("danmakuConfig",JSON.stringify((0,o._)((0,n._)({},r.HI),{[e]:t}))),l.emit("liveDanmakuSettingChange")}},u=(e,t,i,n)=>{if(t&&i){var o;let l=n?`${i}`:`${i}_${t}`,a=null===(o=JSON.parse(window.localStorage.getItem("DanmaSetting_GiftAndPackage")))||void 0===o?void 0:o[l];return a&&(null==a?void 0:a.expired)>Date.now()?(null==a?void 0:a[e])!==void 0?null==a?void 0:a[e]:r.HI[e]:r.HI[e]}{let t=JSON.parse(window.localStorage.getItem("danmakuConfig"));return t?Number(null==t?void 0:t[e]):r.HI[e]}},d=()=>{try{return!window.localStorage.getItem("isDanmaHint")}catch(e){return!0}},c=()=>{try{window.localStorage.setItem("isDanmaHint","1")}catch(e){}},m=()=>{var e,t,i,o,l,a,s,u;let d=r.HI;try{d=JSON.parse(localStorage.getItem("danmakuConfig"))||r.HI}catch(e){}let c=null!==(o=d.area)&&void 0!==o?o:r.HI.area,m=(0,n._)({start:.01,end:null===(e=r.WK[null!=c?c:r.HI.fontSize])||void 0===e?void 0:e.value},1===c||0===c?{lines:c+1}:{}),_=(null!==(l=d.opacity)&&void 0!==l?l:100)/100,v=null===(t=r.NY[null!==(a=d.fontSize)&&void 0!==a?a:r.HI.fontSize])||void 0===t?void 0:t.value,h=null===(i=r.AY[null!==(s=d.speed)&&void 0!==s?s:r.HI.speed])||void 0===i?void 0:i.value,f=null!==(u=m.lines)&&void 0!==u?u:1/0,g=m.end;return m.end,{area:m,opacity:_,fontSize:v,speed:h,maxLineCount:f,maxHeightRate:g}},_=()=>{let[e,t]=(0,a.useState)(()=>m());return(0,a.useEffect)(()=>l.listen("liveDanmakuSettingChange",()=>{t(m())}),[]),e}},156674:function(e,t,i){i.d(t,{V:function(){return o}});var n=i(942541);let o=e=>{if(null==e?void 0:e.multi_view_data){let{displays:t=[]}="string"==typeof e.multi_view_data?JSON.parse(e.multi_view_data):e.multi_view_data;if(t.some(e=>e.display_id===n.m))return!0}return!1}},530223:function(e,t,i){i.d(t,{k:function(){return r}});var n=i(88648);let o=(0,n.createContext)({XTTENV:""}),r=()=>(0,n.useContext)(o)},461115:function(e,t){t.Z=()=>({abrPts:"-800",adaptiveConfig:{hurryEndMs:1800,hurryStartMs:2500,hurrySpeed:1.1,thresholdDown:!0}})},664590:function(e,t,i){i.d(t,{o:function(){return a}});var n=i(520739),o=i(658065),r=i(150566),l=i(58655);function a(){let e=(0,l.o)(),t=()=>{var t,i,n;let{linkmicStore:l,roomStore:a}=e||{},s=(null==l?void 0:l.linkRoomType)==="audio"?"voice_live":"";return{anchor_id:null==a?void 0:null===(t=a.roomInfo)||void 0===t?void 0:t.roomId,room_id:null==a?void 0:null===(n=a.roomInfo)||void 0===n?void 0:null===(i=n.anchor)||void 0===i?void 0:i.id_str,enter_from_merge:(0,o.yW)(),enter_method:(0,r.Rs)("enter_method"),request_id:(0,r.Rs)("request_id"),action_type:"click",liveType:s}};return(e,i)=>{var o,r;null===(o=(r=window).collectEvent)||void 0===o||o.call(r,e,(0,n._)({},t(),i))}}},569673:function(e,t,i){i.d(t,{Y:function(){return N},w:function(){return w}});var n=i("520739"),o=i("878389");i("675373"),i("874386"),i("250440");var r=i("88648"),l=i("645260"),a=i.n(l),s=i("399796"),u=i("759797"),d=i("770989"),c=i("910253"),m=i("408218"),_=i("101966"),v=i("831048"),h=i("293560");i("413806"),i("826893"),i("284961"),i("429532"),i("338172"),i("882732"),i("544943"),i("779788");var f=i("567754"),g=i("377092"),p=i("400985"),I=i("519055");let E=e=>e.split("?")[0].replace(/\//g,"_"),y=(e,t)=>{let i=(0,f.parse)(t.split("?")[1]),o=t.split("?")[0],r=(0,n._)({aid:6383,device_platform:"web"},i);!I.s&&Object.assign(r,(0,g.f)());let l=(0,f.stringify)(r);return o.startsWith("http")?`${o}?${l}`:I.s&&!p.r8?`consul:${e}${o}?${l}`:`${(0,p.ZP)().API_DOMAIN+o}?${l}`},P={"Content-type":"application/x-www-form-urlencoded"},b=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"webcast.web.api",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=y(r,t);if(null==e||e.logger.info("request path:",a),!e)return window.fetch(a,(0,o._)((0,n._)({credentials:"same-origin"},i),{headers:(0,n._)({},P,i.headers)}));{var s,u,d,c,m,_;let r=(0,n._)((0,o._)((0,n._)({handleMethod:E(t)},i),{metrics:e.metrics,headers:(0,n._)((0,o._)((0,n._)({},null!==(s=e.app.config.fetch.headers)&&void 0!==s?s:{}),{Cookie:e.headers.cookie,"user-agent":e.headers["user-agent"],"x-use-ppe":null!==(u=e.headers["x-use-ppe"])&&void 0!==u?u:"","x-use-boe":null!==(d=e.headers["x-use-boe"])&&void 0!==d?d:"","x-tt-env":null!==(c=e.headers["x-tt-env"])&&void 0!==c?c:"","X-Real-IP":e.headers["x-real-ip"],"X-Forwarded-For":e.header["x-forwarded-for"]}),P,i.headers)}),null!=l?l:{});e.headers["x-tt-stress"]&&(r.headers["x-tt-stress"]=e.headers["x-tt-stress"]);try{e.measureTime("fetch");let t=await e.fetch(a,r);return e.measureTimeEnd("fetch",{url:new URL(a).pathname,status:t.status,retry:0,error:0}),t}catch(i){null===(_=e.metrics)||void 0===_||null===(m=_.emitCounter)||void 0===m||m.call(_,"isomorphic_request.retry",1,e.app.config.psm,{url:a});let t=await e.fetch(a,r).catch(t=>{throw e.measureTimeEnd("fetch",{url:new URL(a).pathname,status:-1,retry:1,error:1}),t});return e.measureTimeEnd("fetch",{url:new URL(a).pathname,status:t.status,retry:1,error:0}),t}}};async function L(e,t,i){var n,o,r,l,a,s,u,d;let c=await b(i,`/webcast/web/conf/skin/?${(0,f.stringify)({room_id:e,anchor_id:t})}`,{method:"GET"}),m=c.headers.get("x-tt-logid");if(200!==c.status)return null==i||null===(n=i.logger)||void 0===n||n.error("[getTheme] not 200",m),null==i||null===(r=i.metrics)||void 0===r||null===(o=r.emitCounter)||void 0===o||o.call(r,"get_theme_error",1,""),{};let{data:_={}}=null!==(l=await c.json())&&void 0!==l?l:{};try{return JSON.parse(null==_?void 0:null===(a=_.skin)||void 0===a?void 0:a.conf)}catch(e){return null==i||null===(s=i.logger)||void 0===s||s.error("[getTheme]",e,m),null==i||null===(d=i.metrics)||void 0===d||null===(u=d.emitCounter)||void 0===u||u.call(d,"parse_theme_error",1,""),{}}}var S=i("58655"),C=i("457388");let N=async function(){let{webRid:e,isPreEnterRoom:t,store:i,query:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{webRid:"",isPreEnterRoom:!1,store:{},query:{}},l=async()=>{var i,n,o,r,l,s,u;let d,c,m,h;null===C.kg||void 0===C.kg||null===(i=C.kg.info)||void 0===i||i.call(C.kg,"");let f=[],g=window.liveDetailDataAPI;g instanceof Promise?(delete window.liveDetailDataAPI,f=await g):f=await (0,v.Y)({webRid:e,isPreEnterRoom:t}),null===C.kg||void 0===C.kg||null===(n=C.kg.info)||void 0===n||n.call(C.kg,"");let[p,I,E,y,P=[],b=[]]=f,{roomInfo:S,relevantRooms:N,logId:w}=p,T=null==S?void 0:S.roomId,R=null==S?void 0:null===(o=S.anchor)||void 0===o?void 0:o.id_str,k=(null==S?void 0:null===(s=S.room)||void 0===s?void 0:null===(l=s.others)||void 0===l?void 0:null===(r=l.web_skin)||void 0===r?void 0:r.enable_skin)?await L(T,R):void 0;p.relevantRooms=N.map(e=>(0,_.bj)(e,w));let x=a()(S,"room.episode_extra.season_id_str"),A=null==b?void 0:b.includes(x);return(u=h||(h={}))[u.TRYWATCH_LEAD=3]="TRYWATCH_LEAD",{rawRes:p,iframeConf:I,linkmicHeartConfig:E,qualitySettings:y,clatity_guide:3,themeConfig:k,isSpider:!1,isAsianGames:!1,isOlympicGame:A,defaultMoreLeague:d,defaultMatchStatsDetail:c,defaultTagMatchInfo:m}};try{var d,f,g,p,I,E,y,P,b,S,N,w,T,R,k,x,A,O,M,F,D,j,G,U,V,K,Y,Z,B,H,W,Q,$,q,J,z,X,ee,et,ei,en,eo,er,el,ea,es,eu,ed;let t;let{rawRes:_,iframeConf:v,linkmicHeartConfig:L,qualitySettings:C,clatity_guide:ec,themeConfig:em,isAsianGames:e_,isOlympicGame:ev,defaultMoreLeague:eh,defaultMatchStatsDetail:ef,defaultTagMatchInfo:eg}=await l(),{roomInfo:ep,error:eI,status_code:eE,errorPageMessage:ey,logId:eP,errorPrompts:eb,relevantRooms:eL,isUseVVC:eS}=_,eC={Digg:null==ep?void 0:null===(f=ep.room)||void 0===f?void 0:null===(d=f.room_auth)||void 0===d?void 0:d.Digg,SpecialStyle:null==ep?void 0:null===(p=ep.room)||void 0===p?void 0:null===(g=p.room_auth)||void 0===g?void 0:g.SpecialStyle};if(null==i||null===(E=i.roomStore)||void 0===E||null===(I=E.setIsAsianGames)||void 0===I||I.call(E,e_),null==i||null===(P=i.roomStore)||void 0===P||null===(y=P.setIsOlympicGame)||void 0===y||y.call(P,ev),i.roomStore&&a()(ep,"room.others.programme.enable_programme",!1)&&(i.roomStore.enableProgramme=!0),(null==ep?void 0:null===(N=ep.room)||void 0===N?void 0:null===(S=N.others)||void 0===S?void 0:null===(b=S.web_skin)||void 0===b?void 0:b.enable_skin)&&em){i.layoutStore.rawThemeConfig=em;let{force_enable_h265:e,hideCategory:t,showNavigation:n,hideFooter:o,forceTheme:r,immersive:l,banner:a,programme:s,appointment:u,transparentHeader:d,resource:c,navigationSelected:m,hideRelevantRoom:_,programmeFill:v,disableUnLoginFilter:f,playerMargin:g}=em;f&&i.layoutStore&&(i.layoutStore.disableUnLoginFilter=!0),e&&i.roomStore&&(i.roomStore.forceEnableH265=!0),void 0!==m&&i.layoutStore&&(i.layoutStore.navigationSelected=m),s&&i.roomStore&&(i.roomStore.abProgramme=!0),_&&i.layoutStore&&(i.layoutStore.hasRelevantRoom=!1),v&&i.layoutStore&&(i.layoutStore.programmeFill=v),g&&i.layoutStore&&(i.layoutStore.playerMargin=g),u&&(null===(X=i.roomStore)||void 0===X||X.setAppointment(!0)),t&&(null===(ee=i.layoutStore)||void 0===ee||ee.setModule("categoryTab",h.p.DISABLE)),n&&(null===(et=i.layoutStore)||void 0===et||et.setModule("navigation",h.p.ENABLE)),o&&(null===(ei=i.layoutStore)||void 0===ei||ei.setModule("footer",h.p.DISABLE)),r&&(null===(en=i.layoutStore)||void 0===en||en.setForceTheme(r)),d&&(null===(eo=i.layoutStore)||void 0===eo||eo.setHeaderOpacity(d)),l&&(null===(er=i.layoutStore)||void 0===er||er.setImmersive(!0)),a&&(null===(el=i.layoutStore)||void 0===el||el.setSpecialBanner(a)),c&&(null===(ea=i.layoutStore)||void 0===ea||ea.setResource(c))}null===(w=i.appStore)||void 0===w||w.setIsOpenLongTask(!0),null===(T=i.appStore)||void 0===T||T.setLinkMicHeartConfig(L),null===(R=i.roomStore)||void 0===R||R.setRoomInfo(ep),null===(A=i.roomStore)||void 0===A||A.setUgcLive(null==ep?void 0:null===(x=ep.room)||void 0===x?void 0:null===(k=x.scene_type_info)||void 0===k?void 0:k.commentary_type),null===(F=i.roomStore)||void 0===F||F.setGameHiddle(null===(M=(0,m.MP)(ep))||void 0===M?void 0:null===(O=M.extension)||void 0===O?void 0:O.game_hidden),null===(D=i.roomStore)||void 0===D||D.setLikeStatus(eC),null===(G=i.paidLiveStore)||void 0===G||G.setPaidLiveData(null==ep?void 0:null===(j=ep.room)||void 0===j?void 0:j.paid_live_data),null===(U=i.roomStore)||void 0===U||U.setRelativeRooms(eL);let eN=r.message_from||"live",ew=a()(_,"loginLead",{}),{singleControlTime:eT,singleControlMaxShowTime:eR}=C,ek=s.Q.getItem({sKey:u.storage.CookieKeys.WebcastLocalQuality}),ex=s.Q.getItem({sKey:u.storage.CookieKeys.WebcastLeadingLastShowTime}),eA=s.Q.getItem({sKey:u.storage.CookieKeys.WebcastLeadingTotalShowTimes});null===(V=i.streamStore)||void 0===V||V.setLeadingData((0,o._)((0,n._)({},ew),{clatity_guide:ec,last_show_time:ex,total_show_times:eA})),null===(K=i.streamStore)||void 0===K||K.setLocalQuality(ek),null===(Y=i.streamStore)||void 0===Y||Y.setRenderTime(Date.now()),null===(Z=i.streamStore)||void 0===Z||Z.setSingleControlTime(Number(eT)),null===(B=i.streamStore)||void 0===B||B.setSingleControlMaxShowTime(Number(eR));let{mainCameraInfo:eO,cameraInfoList:eM}=(0,m.EE)(ep);null===(H=i.cameraStore)||void 0===H||H.setMainCameraInfo(eO),null===(W=i.cameraStore)||void 0===W||W.setCameraInfoList(eM);let eF=null==r?void 0:r.camera_id,eD=null==eM?void 0:null===(Q=eM.find)||void 0===Q?void 0:Q.call(eM,e=>(null==e?void 0:e.cameraId)===eF);if(!eD||(null==eD?void 0:eD.isMainCamera))t=(0,c.h)(ep),null===(ed=i.cameraStore)||void 0===ed||ed.setCameraInfo(eO);else{let e=(0,o._)((0,n._)({},ep),{room:(0,o._)((0,n._)({},ep.room),{stream_url:null==eD?void 0:eD.h264Stream,title:null==eD?void 0:eD.title}),web_stream_url:null==eD?void 0:eD.h265Stream});t=(0,c.h)(e),null===(es=i.roomStore)||void 0===es||es.setRoomInfo(e),null===(eu=i.cameraStore)||void 0===eu||eu.setCameraInfo(eD)}null===($=i.streamStore)||void 0===$||$.setStreamData(t);let ej=null==t?void 0:null===(z=t.H265_streamData)||void 0===z?void 0:null===(J=z.options)||void 0===J?void 0:null===(q=J.qualities)||void 0===q?void 0:q.some(e=>"bytevc2"===e.v_codec);i.streamStore.isUseVVC=eS&&ej;let eG={errorPrompts:eb,logId:eP,status_code:eE,error:eI,errorPageMessage:ey,iframeConf:v[e],messageFrom:eN,isSpider:!1,defaultMoreLeague:eh,defaultMatchStatsDetail:ef,defaultTagMatchInfo:eg};i.detailExtra.setDetailExtra(eG)}catch(e){}},w=e=>{var t;let{webRid:i,query:n,isPreEnterRoom:o}=e,l=d.a.useClientDetect(),a=(0,S.o)();null==a||null===(t=a.layoutStore)||void 0===t||t.setHint(location.hostname,location.pathname,l,!!n.hidehead),a.layoutStore.setHardCategoryTab(h.p.DISABLE),(0,r.useEffect)(()=>{N({webRid:i,query:n,isPreEnterRoom:o,store:a})},[])}},185492:function(e,t,i){i.d(t,{K:function(){return d},M:function(){return c}});var n=i(58655),o=i(88648),r=i(733507),l=i(287844),a=i(782442),s=i(770989),u=i(797973);function d(e){return"uhd"===e}function c(){let{triggerDownloadClient:e}=(0,r.o)({channelId:l.g.Lv4k}),{roomStore:{isOlympicGame:t,setIsEnableOlympic4k:i}}=(0,n.o)(),d=(0,u.Z)(async()=>{try{window.collectEvent("add_to_desktop_click",{type:"4k",channel_id:l.g.Lv4k,enter_from:"live_detail",ug_channel_id:a.Le.getConfig(a.gI.WebUgChannelId)||""}),await s.a.openClient()}catch(t){e()}});return(0,o.useEffect)(()=>{i(t)},[t]),{enableOlympic4k:t,rediectDownload:t,openOrDownloadClient:d}}},49693:function(e,t,i){var n=i(738612),o=i(519055),r=i(859231),l=i(58655),a=i(88648),s=i(645260),u=i.n(s);t.Z=()=>{let{roomStore:{roomInfo:e}}=(0,l.o)();return(0,a.useMemo)(()=>{var t,i;return o.s?"":(null===(i=window)||void 0===i?void 0:null===(t=i.__INVISIBLE_QUERY__)||void 0===t?void 0:t.enter_from_merge)==="web_share_link"&&e.enter_mode===r.gE.APP?n.R5.QRCODE:n.FO[u()(e,"room.stream_url.stream_orientation")]||""},[e])}},126036:function(e,t,i){i.d(t,{w5:function(){return s}});var n=i(520739),o=i(88648),r=i(58655),l=i(827045),a=i(303253),s={IM_API:"im/fetch",ENTER_API:"web/enter"};t.ZP=e=>{let{apis:t,roomId:i,cameraGroupId:s,cameraId:u,headers:d,saveVerify:c,isSavePlayer:m}=e,_=(0,o.useRef)(!1),{singletonStore:{message:v},feedStore:{isActive:h}}=(0,r.o)();(0,o.useEffect)(()=>{if(!i||!v||!h)return;let e=()=>{(0,l.p)().then(t=>{var i,n;t({success:()=>{_.current=!0,window.location.reload()},next:`https://${null===(n=window)||void 0===n?void 0:null===(i=n.location)||void 0===i?void 0:i.host}`,onClose:()=>{!_.current&&setTimeout(()=>{e()},2e3)}})})},o=()=>{v.start((0,n._)({room_id:i},u&&{sub_room_id:u},s&&{group_id:s})),null==m||m(!0),null==c||c()},r=(e,t)=>(null==e?void 0:e["Whale-Decision"])==="anonymous"||(null==e?void 0:e["whale-decision"])==="anonymous"||(null==t?void 0:t["Whale-Decision"])==="anonymous"||(null==t?void 0:t["whale-decision"])==="anonymous",f=null;return f=setInterval(()=>{var i;let{fetchHeader:n,pushHeader:l}=null!==(i=null==v?void 0:v.getimHeader())&&void 0!==i?i:{};if(n&&n["x-tt-logid"])switch(t){case"web/enter":d?(clearInterval(f),d["x-vc-bdturing-parameters"]?(null==m||m(!1),null==v||v.pause(),(0,a.PW)(d,o)):d["whale-decision"]&&(null==m||m(!1),null==v||v.stop(),e())):clearInterval(f);break;case"im/fetch":n&&n["x-vc-bdturing-parameters"]?(clearInterval(f),v.pause(),(0,a.PW)(n,o)):r(n,l)&&(clearInterval(f),v.pause(),e())}},1e3),()=>{f&&clearInterval(f)}},[i,d,v,h])}},164371:function(e,t,i){i.d(t,{kF:function(){return r}});var n=i(88648);let o=(0,n.createContext)({XTTENV:""}),r=()=>(0,n.useContext)(o)},686374:function(e,t,i){i.d(t,{K:function(){return l}});var n=i(823685),o=i(240026);let r=(e,t)=>{try{var i;let n=(0,o.T)();if(t)return t(null==n?void 0:n[e]);return null!==(i=null==n?void 0:n[e])&&void 0!==i?i:void 0}catch(e){return}},l=()=>r("enlargeDynamicBackground",e=>{let t=!1,i=!1;switch(e){case n.EnlargeDynamicBgVersion.V1:t=!0;break;case n.EnlargeDynamicBgVersion.V2:i=!0;break;case n.EnlargeDynamicBgVersion.V3:t=!0,i=!0}return{enlargeDynamicBg:t,enlargePadding:i}})},910485:function(e,t,i){i.d(t,{q:function(){return r}}),i(779788);var n=i(916956),o=i(407217);function r(e){let{message:t,socketData:i}=e;(0,n.C)(()=>{var e,n,r;let l="websocketkey20230220",a=[];try{a=JSON.parse(null!==(n=null===(e=localStorage)||void 0===e?void 0:e.getItem(l))&&void 0!==n?n:"[]")}catch(e){}if(!!t)if(i)null==t||t.setWebsocketKey(i),null===(r=localStorage)||void 0===r||r.setItem(l,JSON.stringify(i));else{let e=function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,o.ZP)({service_name:"webcast.douyin.live_pc",key:"message_websocket_params"}).then(e=>{var i;null==t||t.setWebsocketKey(e),null===(i=localStorage)||void 0===i||i.setItem(l,JSON.stringify(e))}).catch(n=>{i>1?e(i-1):null==t||t.setWebsocketKey(a)})};e(2)}},[t])}},912835:function(e,t,i){i.d(t,{C:function(){return l},D:function(){return a}}),i(874386),i(675373);var n=i(620923),o=i(56702),r=i(419631);let l=i.n(r)()(async()=>{try{return o.CpO.instance}catch(t){var e;null===(e=(0,n.OK)())||void 0===e||e.sendEvent({name:"import_static_idl_error",categories:{error:t}})}}),a=async function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let n=await l();return null==n?void 0:n.decode(...t)}},114217:function(e,t,i){i.d(t,{v0C:function(){return f}});var n=i(134761),o=i(520739),r=i(878389);i(413806),i(826893),i(284961),i(927234),i(874386);var l=i(44905),a=i(519055),s=i(400985),u=i(620923),d=i(661898),c=i(785632),m=i(455239),_=i(119159),v=i(912835),h=i(207964);i(56702);class f extends d.TQ{setImRequestPath(e){this.polling.props.im_path=e}setWebsocketKey(e){this.polling.props.websocket_key=e}setInsertKey(e,t){this.insertData={insert_task_id:e,live_reason:t}}getimReponseHeader(){return this.headers.fetchHeader}getCursor(){var e;return null===this||void 0===this?void 0:null===(e=this.cursor)||void 0===e?void 0:e._first_cursor}getPolling(){return this.polling}getDecoder(){return null===this||void 0===this?void 0:this.decoder}getimPushResponseHeader(){return this.headers.pushHeader}getimHeader(){return this.headers}subscribe(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.C7.ASYNC;if(i===_.C7.ASYNC){let i=e.split(",").map(e=>this.on(e.replace(c.nl,""),t));return()=>{i.forEach(e=>e())}}let n=e=>t([e]);this.cachedHandler.set(t,n);let o=e.split(",").map(e=>this.syncOn(e.replace(c.nl,""),n));return()=>{this.cachedHandler.delete(t),o.forEach(e=>e())}}unsubscribe(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.C7.ASYNC;if(i===_.C7.ASYNC){e.split(",").forEach(e=>this.off(e.replace(c.nl,""),t));return}let n=this.cachedHandler.get(t);this.cachedHandler.delete(t),e.split(",").forEach(e=>this.syncOff(e.replace(c.nl,""),n))}start(e){var t,i,n,r,l,s,d,m;arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{this.systemEmitter.on("header",(e,t)=>{if("http"===e&&!this.headers.fetchHeader){this.headers.fetchHeader=t;return}if("socket"===e){this.headers.pushHeader=t;return}});let u="15";if(!a.s){let e=(null===(s=window)||void 0===s?void 0:null===(l=s.__STORE__)||void 0===l?void 0:null===(r=l.roomStore)||void 0===r?void 0:null===(n=r.roomInfo)||void 0===n?void 0:null===(i=n.room)||void 0===i?void 0:null===(t=i.room_auth)||void 0===t?void 0:t.FirstFeedHistChat)||0;2===e&&(u="0")}"string"==typeof e?super.start({room_id:e,identity:c.nN.Audience,need_persist_msg_count:u,insert_task_id:this.insertData.insert_task_id,live_reason:this.insertData.live_reason}):super.start((0,o._)({identity:c.nN.Audience,need_persist_msg_count:u,insert_task_id:this.insertData.insert_task_id,live_reason:this.insertData.live_reason},e))}catch(e){try{(0,u.OK)().report({ev_type:"custom",payload:{name:"im-sdk-error",categories:{message:null==e?void 0:e.message,stack:null==e?void 0:null===(m=e.stack)||void 0===m?void 0:null===(d=m.toString)||void 0===d?void 0:d.call(m)},level:"warn",type:"log"}})}catch(e){}}}queuePush(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(e=>this.mock(e.method,e))}constructor(){var e;super(v.C,{host:(0,s.iE)().API_DOMAIN,aid:"6383",live_id:1,app_name:"douyin_web",did_rule:3,endpoint:"live_pc",support_wrds:1,user_unique_id:null===(e=(0,l.Es)())||void 0===e?void 0:e.user_unique_id,im_path:"/webcast/im/fetch/",websocket_key:[]},[],{emitter:new m.Q,get backdropWhenHidden(){if("undefined"==typeof window||(0,h.getInLiveMsgFetchOpt)())return[];return["ChatMessage","GiftMessage","LikeMessage"]},wrdsV1:["WebcastPaidLiveTypeModifyMessage"]}),(0,n._)(this,"headers",{}),(0,n._)(this,"insertData",{insert_task_id:"",live_reason:""}),(0,n._)(this,"cachedHandler",new Map);let t=(0,r._)((0,o._)({},this.wrds),{subscribe:(e,t)=>{let i=e.split(",").map(i=>this.wrds.on("RoomDataSyncMessage",e,t,"v1"));return()=>{i.forEach(e=>e())}},unsubscribe:(e,t)=>{e.split(",").forEach(e=>{this.wrds.off("RoomDataSyncMessage",e,t)})}});this.wrds=t,!a.s&&(window.__use_isaac_sdk=!0),this.systemEmitter.on("downgrade",e=>{var t,i,n,o,r,l;this.downgrade(e),(0,u.OK)().report({ev_type:"custom",payload:{name:"im-sdk-downgrade",metrics:{downgrade:1},categories:{type:scope,userId:null===(n=window.INITIAL_STATE)||void 0===n?void 0:null===(i=n.userStore)||void 0===i?void 0:null===(t=i.userInfo)||void 0===t?void 0:t.id_str,roomId:null===(l=window.INITIAL_STATE)||void 0===l?void 0:null===(r=l.roomStore)||void 0===r?void 0:null===(o=r.roomInfo)||void 0===o?void 0:o.roomId},type:"event"}})}),this.systemEmitter.on("error",(e,t)=>{var i,n,o,r,l,a;(0,u.OK)().report({ev_type:"custom",payload:{name:"im-sdk-error",metrics:{[e]:1},categories:{type:e,userId:null===(o=window.INITIAL_STATE)||void 0===o?void 0:null===(n=o.userStore)||void 0===n?void 0:null===(i=n.userInfo)||void 0===i?void 0:i.id_str,roomId:null===(a=window.INITIAL_STATE)||void 0===a?void 0:null===(l=a.roomStore)||void 0===l?void 0:null===(r=l.roomInfo)||void 0===r?void 0:r.roomId},content:`${t}`,level:"warn",type:"log"}})})}}},910253:function(e,t,i){i.d(t,{h:function(){return l}});var n=i(645260),o=i.n(n);let r=(e,t)=>{var i;if(!(null==e?void 0:null===(i=e.room)||void 0===i?void 0:i.stream_url)&&!t)return{};let n=(null==t?void 0:t.pull_datas)||e.room.stream_url.pull_datas||{},o=Object.keys(n)[0];return n[o]},l=e=>{var t;let i=o()(e,"room.stream_url"),n=(null===(t=o()(e,"web_stream_url",null))||void 0===t?void 0:t.live_core_sdk_data)?o()(e,"web_stream_url"):i,l=o()(n,"live_core_sdk_data.pull_data",{}),a=o()(i,"live_core_sdk_data.pull_data",{}),s=r(e),u=r(e,n),d=(null==l?void 0:l.stream_data)?JSON.parse(l.stream_data):null,c=(null==a?void 0:a.stream_data)?JSON.parse(a.stream_data):null,m=(null==s?void 0:s.stream_data)?JSON.parse(s.stream_data):null,_=(null==u?void 0:u.stream_data)?JSON.parse(u.stream_data):null;return{H265_streamData:{options:o()(l,"options",null),common:o()(d,"common",null),stream:o()(d,"data",null)},H264_streamData:{options:o()(a,"options",null),common:o()(c,"common",null),stream:o()(c,"data",null)},UGC_streamData:{options:o()(s,"options",null),common:o()(m,"common",null),stream:o()(m,"data",null)},H265_UGC_streamData:{options:o()(u,"options",null),common:o()(_,"common",null),stream:o()(_,"data",null)}}}},468763:function(e,t,i){i.d(t,{Sv:function(){return d},T1:function(){return c},n$:function(){return m},rC:function(){return _},w:function(){return v}});var n=i(520739),o=i(878389);i(927234);var r=i(529211),l=i(306537),a=i(399796),s=i(35730),u=i(519055);function d(){var e,t;if(u.s)return 0;let i=localStorage.getItem((0,l.DS)()?r.YN:r.xQ);if(!!(i=null!==(t=null===(e=(a.Q.getItem({sKey:s.CookieKeys.VolumeInfo})||{}).volume)||void 0===e?void 0:e.toString())&&void 0!==t?t:i))return Number(i)}function c(){var e;return null!==(e=d())&&void 0!==e?e:.6}function m(e){let t=a.Q.getItem({sKey:s.CookieKeys.VolumeInfo})||{};return a.Q.setItem(s.CookieKeys.VolumeInfo,(0,o._)((0,n._)({},t),{volume:e})),localStorage.setItem((0,l.DS)()?r.YN:r.xQ,e.toString())}function _(){var e;if(u.s)return!1;let t="1"===localStorage.getItem((0,l.DS)()?r.FR:r.mI);return t=null!==(e=(a.Q.getItem({sKey:s.CookieKeys.VolumeInfo})||{}).isMute)&&void 0!==e?e:t}function v(e){let t=a.Q.getItem({sKey:s.CookieKeys.VolumeInfo})||{};return a.Q.setItem(s.CookieKeys.VolumeInfo,(0,o._)((0,n._)({},t),{isMute:e,isUserMute:e})),localStorage.setItem((0,l.DS)()?r.FR:r.mI,e?"1":"0")}},388521:function(e,t,i){i.d(t,{f:function(){return n}}),i(284961),i(826893);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/^http:\/\//i,"https://")}},714492:function(e,t,i){i.d(t,{Bo:function(){return m},It:function(){return v}});var n=i(520739),o=i(878389);i(527785),i(927234),i(954372),i(826893),i(779788);var r=i(529211),l=i(567754),a=i(620923),s=i(30321),u=i(399796),d=i(35730);let c=["enter_from_merge","enter_method","ug_source","material_group_id","resource_space_id",/^_transparent_/,"web_live_page","web_live_tab","web_live_tab_2","web_live_tab_3","more_detail","game_name","title_type","cover_type","is_recommend","stream_type","room_id","evening_type","search_params","action_type","previous_page","request_id","live_type","function_type","seat_fit_status","insert_task_id","live_reason","aspect_ratio","from_landscape_tab","group_id","is_livehead_preview_mini_window_show","enter_method_temai","show_rank","show_cnt","cid","msToken","if_paid_live_card","entrance_form","ticket_entrance","if_qianchuan_ad","ad_type","live_ad_creative_id","live_ad_id","X-Bogus","ad_log_extra","if_browser_limited","open_promotion_list","open_promotion_detail","message_from","video_id","mini_window_show_type","search_tab","live_position","url_source","xigua_webid","push_id","otherParams","enter_method_on_cellphone","enter_from_on_cellphone","is_replaced_live","preview_type","web_card_rank","show_type"],m=()=>{let{group_id:e=""}=window.__INVISIBLE_QUERY__||{};return e},_=()=>{let e=(0,s.Nr)(location.pathname);window.addEventListener("beforeunload",()=>{try{if(e){var t;u.Q.setItem(d.CookieKeys.LiveInvisibleQuery,(0,l.stringify)(null===(t=window)||void 0===t?void 0:t.__INVISIBLE_QUERY__),60)}}catch(e){}})},v=e=>{try{let t=(0,l.parse)(e);try{let e=u.Q.getItem({sKey:d.CookieKeys.LiveInvisibleQuery});e&&(window.__INVISIBLE_QUERY__=(0,l.parse)(e),u.Q.removeItem(d.CookieKeys.LiveInvisibleQuery)),_()}catch(e){}let i=Object.keys(t).reduce((e,i)=>{if(c.some(e=>("[object RegExp]"===Object.prototype.toString.call(e)&&e.test(i)||"[object String]"===Object.prototype.toString.call(e)&&e===i)&&void 0!==t[i])){if("string"==typeof t[i])window.__INVISIBLE_QUERY__[i]=t[i];else if("object"==typeof t[i]){var r;(null===(r=t[i])||void 0===r?void 0:r.length)>0&&(window.__INVISIBLE_QUERY__[i]=t[i][t[i].length-1])}return e}return(0,o._)((0,n._)({},e),{[i]:t[i]})},{});sessionStorage.setItem(r.UY,JSON.stringify(window.__INVISIBLE_QUERY__));let a=Object.keys(i).length?`?${(0,l.stringify)(i)}`:"";return{remainQuery:i,remainQueryString:a}}catch(n){var t,i;return null===(i=(0,a.OK)())||void 0===i||null===(t=i.sendEvent)||void 0===t||t.call(i,{name:"filterAndUpdateInvisibleQuery_error",categories:{error:n,queryString:e},type:"event"}),{remainQuery:{},remainQueryString:""}}}},739041:function(e,t,i){i.d(t,{l:function(){return m}});var n=i("520739"),o=i("878389"),r=i("563097"),l=i("88648"),a=i("315765"),s={icon:"RSiknfLP"},u=i("713097"),d=i.n(u);let c={0:{key:"unknow_value",render:()=>null},1:{key:"string_value",render(e,t){if(e&&"string"!=typeof e){var i,l,s;t=(0,o._)((0,n._)({},t),{color:(0,a.H)(null==e?void 0:null===(i=e.format)||void 0===i?void 0:i.font_color),fontSize:null==e?void 0:null===(l=e.format)||void 0===l?void 0:l.font_size,fontWeight:(null==e?void 0:null===(s=e.format)||void 0===s?void 0:s.font_type)?500:400}),e=null==e?void 0:e.string_value}return e?(0,r.jsx)("span",{style:t,children:e}):null}},11:{key:"user_value",render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,{user:n,left_additional_content:o="",right_additional_content:l="",self_show_real_name:a}=e;if(!n)return null;let s=n.nickname;return(0,r.jsx)("span",{className:"hts-live-text-user",style:t,onClick:null==i?void 0:i.onClick,children:`${o}${s}${l}`})}},12:{key:"gift_value",render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{name_ref:t}=e,i=null==t?void 0:t.default_pattern;return i?(0,r.jsx)("span",{children:i}):null}},13:{key:"heart_value",render(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],null}},14:{key:"pattern_ref_value",render(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],null}},15:{key:"image_value",render(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,{image:a}=t,u=null==a?void 0:null===(e=a.url_list)||void 0===e?void 0:e[0],c=(0,o._)((0,n._)({},i),{height:null==a?void 0:a.height,width:null==a?void 0:a.width});return u?(0,r.jsx)("img",{className:d()(s.icon,"hts-live-text-img"),style:c,src:u,onClick:null==l?void 0:l.onClick}):null}},2:{key:"image_value",render(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,{image:l}=t,a=null==l?void 0:null===(e=l.url_list)||void 0===e?void 0:e[0],u=(0,o._)((0,n._)({},i),{height:null==l?void 0:l.height,width:null==l?void 0:l.width});return a?(0,r.jsx)("img",{className:d()(s.icon,"hts-live-text-img"),style:u,src:a}):null}}};function m(e){let{text:t,customRenderPiece:i,onPieceClick:n}=e,{pieces:o=[]}=t;return(0,r.jsx)(r.Fragment,{children:o.map((e,t)=>{let{type:o,format:s}=e,{color:u,use_remote_clor:d,weight:m,font_size:_,italic:v}=s||{},h=null==i?void 0:i(e);if(h)return h;let f=c[o];if(!f)return null;let{key:g,render:p}=f,I=e[g],E={fontSize:_||14,fontWeight:m,color:d&&u?(0,a.H)(u):void 0,fontStyle:v?"italic":void 0};return(0,r.jsx)(l.Fragment,{children:p(I,E,{onClick:t=>{null==n||n({event:t,piece:e})}})},`${g}-${t}`)})})}},632841:function(e,t,i){i.d(t,{S:function(){return P}});var n=i("520739"),o=i("878389"),r=i("368200");i("675373"),i("874386");var l=i("563097"),a=i("88648"),s=i("148933"),u=i("338426"),d=i("315985"),c=i("817938"),m=i("155845"),_=i("895338"),v=i("637407"),h=i("713097"),f=i.n(h),g={commentEditorWrap:"GD0HXVAI",focus:"hfNEFzJm",focusOrNoEmpty:"FUS9TvJk",danmakuSwitch:"M7sGLJbI",commentEditor:"z5vPqdzf"},p=i("780654"),I=i("185750");let E=(0,u.ZP)(()=>Promise.all([i.e("22556"),i.e("23145"),i.e("21248"),i.e("11073"),i.e("8734")]).then(i.bind(i,336307)),{ssr:!1});function y(e){let t=(0,a.useRef)(null),[i,u]=(0,a.useState)(!1);(0,d.Z)(()=>u(!1),t);let{maxLength:_,placeholder:v,disabled:h,className:y,onSend:P}=e,b=(0,r._)(e,["maxLength","placeholder","disabled","className","onSend"]),{enablePrivilegeDanmu:L,showPrivilegePanel:S}=(0,p.B3)(e=>({enablePrivilegeDanmu:e.enable,showPrivilegePanel:e.showPanel})),C=(0,s._i)(e=>e.editor),N=(0,s._i)(e=>e.isEmpty),w=(0,c.Z)(null==C?void 0:C.getRootContainer());(0,m.Z)("enter",e=>{e.preventDefault(),w&&(null==P||P())},{exactMatch:!0,useCapture:!0});let T=(0,p.MW)()||v;return(0,l.jsxs)("div",(0,o._)((0,n._)({},b),{className:f()(y,g.commentEditorWrap,w&&g.focus,(i||w||!N||S)&&g.focusOrNoEmpty),onClick:()=>{u(!0),null==C||C.focus()},"data-e2e":"live-chatting",ref:t,children:[L&&(0,l.jsx)(I.K,{className:g.danmakuSwitch}),(0,l.jsx)(E,{editable:!h,placeholder:T,maxLength:S?15:_,className:g.commentEditor})]}))}let P=(0,a.memo)(e=>(0,l.jsx)(_.k2,{componentName:v.l.COMMENT_EDITOR,children:(0,l.jsx)(y,(0,n._)({},e))}))},54372:function(e,t,i){i.d(t,{a:function(){return o},w:function(){return n}});let n="INSERT_AT_USER_COMMAND",o="INSERT_EMOJI_COMMAND"},941509:function(e,t,i){i.d(t,{O:function(){return o},s:function(){return n}});let n="live_at_user",o="live_emoji"},148933:function(e,t,i){i.d(t,{tz:function(){return N},_i:function(){return w}}),i("874386");var n=i("563097"),o=i("158041"),r=i("668974"),l=i("88648"),a=i("116876"),s=i("54372"),u=i("379928"),d=i("797973"),c=i("96008"),m=i.n(c),_=i("315437"),v=i("469063"),h=i("358427"),f=i("516599"),g=i("520739"),p=i("368200");i("675373");var I=i("747909"),E=i("713097"),y=i.n(E),P="ZEuP5hVH",b=i("850159"),L=i("62589");let S="non_paste",C=(0,o.kr)({editor:null,insertAtUser:m(),insertEmoji:()=>!1,setEditor:m(),getTextInfo:()=>({plainText:"",rtfElements:[]}),isEmpty:!0,setIsEmpty:m(),markPaste:m(),markPasteEdit:m(),getPasteEditMethod:()=>S,resetPasteEditMethod:m()}),N=(0,l.memo)(e=>{let{children:t}=e,[i,o]=(0,l.useState)(null),[r,c]=(0,l.useState)(!1),m=(0,l.useRef)(S),E=(0,l.useRef)(!1),{roomStore:{foldChatroom:N,setFoldChatroom:w}}=(0,b.Z)(),T=(0,L.o)(),R=(0,u.Z)(async e=>{let{userInfo:t,triggerType:n}=e;if("number"==typeof(null==t?void 0:t.uid)&&(t.uid=String(t.uid)),!i)return;let o=(0,a.X9)(i.getContent()),r=()=>{N&&w(!1)},l=()=>{i.execCommand(s.w,t),T("livesdk_at_reply",{trigger_type:n,to_user_id:null==t?void 0:t.uid})},u=o&&(null==o?void 0:o.uid)===(null==t?void 0:t.uid)&&(null==o?void 0:o.webcastUid)===(null==t?void 0:t.webcastUid);if(o){if(u)r(),i.focus();else{if(!await function(e){let{title:t,className:i}=e,n=(0,p._)(e,["title","className"]);return new Promise(i=>{I.Modal.confirm((0,g._)({className:y()("noSemiGlobal","semi-always-dark",P,e.className),width:400,centered:!0,mask:!1,icon:null,title:t,okText:"",cancelText:"",onOk:()=>{i(!0)},onCancel:()=>{i(!1)},closeOnEsc:!0,getPopupContainer:()=>document.fullscreenElement||document.body,zIndex:1e5},n))})}({title:"",width:600}))return;r(),i.reset(),l()}}else r(),l()},{leading:!0}).run,k=(0,d.Z)(e=>{let{emojiInfo:t,limitCount:n=3,onlyLimitActivity:o=!1}=e;return!!i&&((t.isActivity||!o)&&(0,h.jj)({deltaSet:i.getContent(),onlyActivity:o}).length>=n?(f.F.info(`${n}${o?"":""}`),!1):(i.execCommand(s.a,t),!0))}),x=(0,d.Z)(()=>{if(!i)return{plainText:"",rtfElements:[]};let{plainText:e,rtfElements:t}=(0,_.$U)(i);return{plainText:e,rtfElements:t}}),A=(0,d.Z)(()=>{m.current=S,E.current=!1}),O=(0,d.Z)(()=>{m.current="pure_paste",E.current=!1}),M=(0,d.Z)(()=>{if("pure_paste"===m.current){if(E.current){m.current="edit_with_paste";return}E.current=!0}}),F=(0,d.Z)(()=>m.current);(0,v.n)(i?R:void 0);let D=(0,l.useMemo)(()=>({editor:i,setEditor:o,insertAtUser:R,getTextInfo:x,insertEmoji:k,isEmpty:r,setIsEmpty:c,markPaste:O,markPasteEdit:M,getPasteEditMethod:F,resetPasteEditMethod:A}),[i,o,R,x,k,r,c,O,M,F,A]);return(0,n.jsx)(C.Provider,{value:D,children:t})}),w=(0,r.Z)(C)},358427:function(e,t,i){i.d(t,{Wi:function(){return r},jj:function(){return a}}),i(268917),i(874386);var n=i(941509);let o=e=>{var t;return null==e?void 0:null===(t=e.attributes)||void 0===t?void 0:t[n.O]},r=e=>{try{var t;return JSON.parse((null==e?void 0:null===(t=e.attributes)||void 0===t?void 0:t[n.O])||"")}catch(e){return null}},l=e=>{var t;return o(e)&&!!(null===(t=r(e))||void 0===t?void 0:t.isActivity)},a=e=>{let{deltaSet:t,onlyActivity:i}=e,n=[];try{return t.forEach(e=>{let t=e.ops.filter(i?l:o);n.push(...t)}),n}catch(e){return n}}},62589:function(e,t,i){i.d(t,{o:function(){return a}});var n=i(520739),o=i(658065),r=i(150566),l=i(850159);function a(){let e=(0,l.Z)(),t=()=>{var t,i,n;let{linkmicStore:l,roomStore:a}=e||{},s=(null==l?void 0:l.linkRoomType)==="audio"?"voice_live":"";return{anchor_id:null==a?void 0:null===(t=a.roomInfo)||void 0===t?void 0:t.roomId,room_id:null==a?void 0:null===(n=a.roomInfo)||void 0===n?void 0:null===(i=n.anchor)||void 0===i?void 0:i.id_str,enter_from_merge:(0,o.yW)(),enter_method:(0,r.Rs)("enter_method"),request_id:(0,r.Rs)("request_id"),action_type:"click",liveType:s}};return(e,i)=>{var o,r;null===(o=(r=window).collectEvent)||void 0===o||o.call(r,e,(0,n._)({},t(),i))}}},107456:function(e,t,i){i.d(t,{Bo:function(){return c},It:function(){return m}});var n=i(520739),o=i(878389);i(527785),i(927234),i(954372),i(826893),i(779788);var r=i(529211),l=i(567754),a=i(249239),s=i(399796),u=i(35730);let d=["enter_from_merge","enter_method","ug_source","material_group_id","resource_space_id",/^_transparent_/,"web_live_page","web_live_tab","web_live_tab_2","web_live_tab_3","more_detail","game_name","title_type","cover_type","is_recommend","stream_type","room_id","evening_type","search_params","action_type","previous_page","request_id","live_type","function_type","seat_fit_status","insert_task_id","live_reason","aspect_ratio","from_landscape_tab","group_id","is_livehead_preview_mini_window_show","enter_method_temai","show_rank","show_cnt","cid","msToken","if_paid_live_card","entrance_form","ticket_entrance","if_qianchuan_ad","ad_type","live_ad_creative_id","live_ad_id","X-Bogus","ad_log_extra","if_browser_limited","open_promotion_list","open_promotion_detail","message_from","video_id","mini_window_show_type","search_tab","live_position","url_source","xigua_webid","push_id","otherParams","enter_from_on_cellphone","enter_method_on_cellphone","is_replaced_live","preview_type","web_card_rank","show_type"],c=()=>{let{group_id:e=""}=window.__INVISIBLE_QUERY__||{};return e},m=e=>{try{let t=(0,l.parse)(e);try{let e=s.Q.getItem({sKey:u.CookieKeys.LiveInvisibleQuery});e&&(window.__INVISIBLE_QUERY__=(0,l.parse)(e))}catch(e){}let i=Object.keys(t).reduce((e,i)=>{if(d.some(e=>("[object RegExp]"===Object.prototype.toString.call(e)&&e.test(i)||"[object String]"===Object.prototype.toString.call(e)&&e===i)&&void 0!==t[i])){if("string"==typeof t[i])window.__INVISIBLE_QUERY__[i]=t[i];else if("object"==typeof t[i]){var r;(null===(r=t[i])||void 0===r?void 0:r.length)>0&&(window.__INVISIBLE_QUERY__[i]=t[i][t[i].length-1])}return e}return(0,o._)((0,n._)({},e),{[i]:t[i]})},{});sessionStorage.setItem(r.UY,JSON.stringify(window.__INVISIBLE_QUERY__));let a=Object.keys(i).length?`?${(0,l.stringify)(i)}`:"";return{remainQuery:i,remainQueryString:a}}catch(n){var t,i;return null===(i=(0,a.OK)())||void 0===i||null===(t=i.sendEvent)||void 0===t||t.call(i,{name:"filterAndUpdateInvisibleQuery_error",categories:{error:n,queryString:e},type:"event"}),{remainQuery:{},remainQueryString:""}}}},235755:function(e,t,i){i.d(t,{IT:function(){return o},hp:function(){return n},ie:function(){return r},nz:function(){return l}}),i(927234),i(527785),i(675373),i(874386),i(352982),i(309931);async function n(e){var t;let{pipId:i,width:n,height:o}=e,r=await documentPictureInPicture.requestWindow({width:n,height:o});return r.name=i,t=r,Array.from(document.styleSheets).forEach(e=>{try{let i=Array.from(e.cssRules).map(e=>e.cssText).join(""),n=document.createElement("style");n.textContent=i,t.document.head.appendChild(n)}catch(n){let i=document.createElement("link");if(null===e.href)return;i.rel="stylesheet",i.type=e.type,i.media=e.media.toString(),i.href=e.href,t.document.head.appendChild(i)}}),!function(e){let t=new MutationObserver(t=>{try{let i=t.reduce((e,t)=>"childList"!==t.type?e:e.concat(Array.from(t.addedNodes).filter(e=>e instanceof HTMLLinkElement||e instanceof HTMLStyleElement)),[]);if(0===i.length)return;let n=document.createDocumentFragment();i.forEach(e=>n.appendChild(e.cloneNode())),e.document.head.appendChild(n)}catch(e){}});t.observe(document.head,{attributes:!1,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!1}),e.addEventListener("pagehide",()=>{t.disconnect()})}(r),r}let o=e=>{var t,i;return"undefined"!=typeof window&&(null===(i=window.documentPictureInPicture)||void 0===i?void 0:null===(t=i.window)||void 0===t?void 0:t.name)===e};function r(){if("undefined"==typeof document)return;let e=document.createElement("div");return e.classList.add("pip-anchor"),e}function l(){try{let{innerHeight:e,outerHeight:t}=documentPictureInPicture.window;return t-e>4}catch(e){return!1}}},53038:function(e,t,i){i.d(t,{K:function(){return a}}),i(874386);var n=i(88648),o=i(480596),r=i(598053),l=i(782442);let a=()=>{var e;let[t,i]=(0,n.useState)((null===(e=l.Le.getConfig(l.gI.TccData))||void 0===e?void 0:e[o.TccKey.PcRechargeConfig])||o.TCC_DEFAULT_VALUE_MAP.get(o.TccKey.PcRechargeConfig));return(0,n.useEffect)(()=>{let e=!1;return(async()=>{let t=await r.get({key:o.TccKey.PcRechargeConfig,defaultValue:o.TCC_DEFAULT_VALUE_MAP.get(o.TccKey.PcRechargeConfig)});!e&&i(t)})(),()=>{e=!0}},[]),{rechargeConfig:t}}},271994:function(e,t,i){i.d(t,{K:function(){return I}});var n=i(64957),o=i(367366),r=i(508828),l=i(616520),a=i(637005),s=i(782442),u=i(782563),d=i(35730),c=i(399796),m=i(186083),_=i(32639),v=i(358003);let h={live:"force_login_live",directVideo:"force_login_direct_video",video:"force_login_video"};function f(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.CookieKeys.RecordForceLogin,o={timestamp:Date.now(),force_login_video:0,force_login_live:0,force_login_direct_video:0};o[e]++;try{let r=c.Q.getItem({sKey:i});if(!r)return c.Q.setItem(i,o),o;return(!t&&!(0,n.KC)(r.timestamp)||t&&!(0,n.fu)(r.timestamp))&&(r.force_login_video=0,r.force_login_live=0,r.force_login_direct_video=0,r.timestamp=Date.now()),r[e]++,c.Q.setItem(i,r),r}catch(e){return c.Q.setItem(i,o),o}}function g(e){let{scene:t,forceLoginCallback:i,enterMethod:n,teaEvtParams:s}=e;(0,o.r)()&&(0,r._)(),(0,l.aI)()&&(0,_.a)(),(0,v.default)({headerText:"live"===t?"":"",enterMethod:n||("live"===t?"force_login_live":"force_login"),showClose:!1,showFeedback:!0,teaEvtParams:s,success:()=>{window.location.reload()}}),clearTimeout(p),p=setTimeout(()=>{("directVideo"===t||"video"===t)&&a.emit(a.EVENT.videoPause,"recordForceLogin"),i&&(null==i||i())},300)}let p="",I=e=>{var t,i;let{scene:n="video",isLogin:o=!0,location:r,forceLoginCallback:l}=e||{},{isLogin:a=o}=s.Le.getConfig(s.gI.AnnieXUserInfo)||{};!function(e){var t,i;let n=(null===(i=s.Le.getConfig(s.gI.AbtestData))||void 0===i?void 0:null===(t=i.forceLoginSelect)||void 0===t?void 0:t.v3)||0,o="medium"===m.s.getState().userRiskLevel;if(!n||e||(0,u.tq)()||!o)return;let r=f("force_login_video",!1,d.CookieKeys.RecordForceLoginSelect);(null==r?void 0:r.force_login_video)>=n&&g({scene:"video",enterMethod:"force_login_medium_user",teaEvtParams:{risk_reason:m.s.getState().userRiskReason}})}(a);let c=(null===(t=s.Le.getConfig(s.gI.AbtestData))||void 0===t?void 0:t.forceLoginHourly)||0,_=(null===(i=s.Le.getConfig(s.gI.AbtestData))||void 0===i?void 0:i.forceLoginDaily)||0||c;if(!_)return;let{cityName:v}=m.s.getState(),p=(r?null==_?void 0:_[r]:null==_?void 0:_[v])||(null==_?void 0:_.default),I=h[n],E=null==p?void 0:p[I];if(a||!E||(0,u.tq)())return;let y=f(I,!!c);(null==y?void 0:y[I])>=E&&g({scene:n,forceLoginCallback:l})}},392323:function(e,t,i){i.d(t,{$I:function(){return s},Fp:function(){return u},yr:function(){return a}}),i(250440),i(874386);var n=i(88648),o=i(782442),r=i(658065),l=i(84235);let a=e=>{try{if(performance.getEntriesByName("recommend_mounted").length>0){var t,i,n,a;performance.mark("recommend_video_play"),performance.measure("recommendMountedToPlay","recommend_mounted","recommend_video_play");let s=null===(t=performance.getEntriesByName("recommendMountedToPlay")[0])||void 0===t?void 0:t.duration,u=null!==(i=o.Le.getConfig(o.gI.PageEntered))&&void 0!==i?i:[],d=!u.includes(location.pathname);d&&o.Le.setConfig(o.gI.PageEntered,[...u,location.pathname]),!isNaN(s)&&l.i.sendLog("recommendFirstVideoPlay",{cost:Math.floor(s),from_cache:null!==(n=null==e?void 0:e.fromCache)&&void 0!==n?n:0,is_first:d?1:0,path:location.pathname,enter_from:(0,r.yW)(),is_live:null!==(a=null==e?void 0:e.isLive)&&void 0!==a?a:0}),performance.clearMarks("recommend_mounted"),performance.clearMarks("recommend_video_play"),performance.clearMeasures("recommendMountedToPlay")}}catch(e){}},s=e=>{(0,n.useEffect)(()=>(performance.mark("multi_page_mounted"),()=>{performance.getEntriesByName("multi_page_mounted").length>0&&performance.clearMarks("multi_page_mounted")}),[e])},u=()=>{try{if(performance.getEntriesByName("multi_page_mounted").length>0){var e;performance.mark("page_available"),performance.measure("mountedToAvailable","multi_page_mounted","page_available");let t=null===(e=performance.getEntriesByName("mountedToAvailable")[0])||void 0===e?void 0:e.duration;!isNaN(t)&&l.i.sendLog("pageMountedToAvailable",{cost:Math.floor(t),path:location.pathname}),performance.clearMarks("multi_page_mounted"),performance.clearMarks("page_available"),performance.clearMeasures("mountedToAvailable")}}catch(e){}}},474932:function(e,t,i){i.d(t,{m:function(){return s},w:function(){return a}});var n=i(520739);i(675373);var o=i(496349),r=i(231755);let{COMMON_SEARCH_PARAMS:l}=o||{};async function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=await (0,r.v_)("/aweme/v1/web/commit/dislike/item/",(0,n._)({aweme_id:e},l),{aweme_id:e}),i=t.status_code;return{statusCode:i,errMsg:0===i||t.status_msg?t.status_msg:""}}async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=await (0,r.v_)("/aweme/v1/web/dislike/dimension/update/",(0,n._)({aweme_id:e,block_type:2},l),{aweme_id:e}),i=t.status_code;return{statusCode:i,errMsg:0===i||t.status_msg?t.status_msg:""}}},576669:function(e,t,i){i.d(t,{FF:function(){return p},HN:function(){return I},Lz:function(){return C},MQ:function(){return L},Zl:function(){return S},iv:function(){return y},nQ:function(){return E},vf:function(){return b}});var n=i(520739),o=i(878389);i(779788),i(675373);var r=i(746864),l=i(14108),a=i(658065),s=i(496349),u=i(349135),d=i(231755);let{COMMON_SEARCH_PARAMS:c,CHANNEL_PC_WEB:m}=s||{};function _(e){let{aweme_list:t,has_more:i,item_id_to_episode:n,status_code:o,cursor:r,log_pb:l}=e,a={};try{a=JSON.parse(n)}catch(e){}return{logPb:l&&JSON.stringify(l),itemIdToEpisode:a,statusCode:o||0,hasMore:i,cursor:r,data:(0,u.TN)({awemeList:t||[],logPb:l&&JSON.stringify(l)})||[]}}function v(e){let{aweme_list:t,has_more:i,status_code:n,max_cursor:o,log_pb:r}=e;return{logPb:r&&JSON.stringify(r),statusCode:n||0,hasMore:i,cursor:o,data:(0,u.TN)({awemeList:t||[],logPb:r&&JSON.stringify(r)})||[]}}function h(e){let{mix_infos:t,has_more:i,status_code:n,cursor:o,total:r,log_pb:l}=e;return{statusCode:n,hasMore:i,cursor:o,total:r,logPb:l&&JSON.stringify(l),data:(0,u.NR)(t||[])}}function f(e){let{extra:t,logId:i,log_pb:n,status_code:o,status_msg:r}=e,l="";try{l=JSON.stringify(n)}catch(e){}return{extra:t,logId:i,logPb:l,statusCode:o,statusMsg:r}}function g(e){let{extra:t,logId:i,log_pb:n,status_code:o,status_msg:r}=e,l="";try{l=JSON.stringify(n)}catch(e){}return{extra:t,logId:i,logPb:l,statusCode:o,statusMsg:r}}async function p(e){let{mixId:t,cursor:i,count:r=12,mixScene:l}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=await (0,d.U2)("/aweme/v1/web/mix/aweme/",(0,o._)((0,n._)({},c),{mix_id:t,cursor:Math.max(i,0),count:r,mix_scene:l}),{errorTags:{mixId:t}},void 0,a,{}),m=(0,u.RL)(s,_);return(null==m?void 0:m.data)&&m.data.forEach(e=>{e.logPb=m.logPb}),m}async function I(e){let{uid:t,cursor:i=0,count:r=12,listScene:l}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=await (0,d.U2)("/aweme/v1/web/mix/list/",(0,o._)((0,n._)({},c),{sec_user_id:t,req_from:m,cursor:i,count:r,list_scene:l}),{errorTags:{uid:t}},void 0,a,{});return(0,u.RL)(s,h)}function E(e,t,i){var n,o,s,u;let{currentEpisode:d}=(null==i?void 0:null===(n=i.seriesInfo)||void 0===n?void 0:n.seriesId)?null==i?void 0:i.seriesInfo:(null==i?void 0:i.mixInfo)||{},{data:c,currentEpisode:m}=(null==i?void 0:null===(o=i.seriesInfo)||void 0===o?void 0:o.seriesId)?t:e||{};if(m!==d)return!1;if(null==c?void 0:c.length){for(let e=0;e<c.length;e++)if((null===(s=c[e])||void 0===s?void 0:s.mixInfo.currentEpisode)===m&&(null==c?void 0:null===(u=c[e+1])||void 0===u?void 0:u.awemeId)){let t=null==c?void 0:c[e+1];return{awemeId:null==t?void 0:t.awemeId,url:(null==t?void 0:t.awemeType)===r.e.Note?(0,l.Wr)(null==t?void 0:t.awemeId,`previous_page=${(0,a.yW)()||""}`):(0,l.$N)(null==t?void 0:t.awemeId,`previous_page=${(0,a.yW)()||""}`),img:null==t?void 0:t.video.cover,desc:`${null==t?void 0:t.mixInfo.currentEpisode} | ${null==t?void 0:t.desc}`}}}return!1}async function y(e){let{mixId:t,totalEpisode:i,currentEpisode:n,count:o}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=Math.max(Math.min(n-1,i-o),0),{statusCode:a,data:s,hasMore:u,cursor:d,logPb:c}=await p({mixId:t,cursor:l,count:o},r);return{mixId:t,statusCode:a,data:s,currentEpisode:n,hasMore:u,cursor:0===a?d:l,logPb:c}}function P(e){let{mix_info:t,status_code:i,log_pb:n}=e;return{mixInfo:(0,u.BH)(t),statusCode:i,logPb:n}}async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{mixId:i}=e,r=await (0,d.U2)("/aweme/v1/web/mix/detail/",(0,o._)((0,n._)({},c),{mix_id:i,req_from:m}),{},void 0,t,{});return(0,u.RL)(r,P)}async function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{mixId:i,action:r}=e,l=await (0,d.U2)("/aweme/v1/web/mix/collect/",(0,o._)((0,n._)({},c),{mix_id:i,action:r}),{},void 0,t,{});return(0,u.RL)(l,f)}async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{mixId:i,episode:r,awemeId:l,scene:a}=e,s=await (0,d.U2)("/aweme/v1/web/mix/watch/record/",(0,o._)((0,n._)({},c),{mix_id:i,episode:r,item_id:l,scene:a}),{},void 0,t,{});return(0,u.RL)(s,g)}async function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{albumId:i,cursor:r,count:l=12,pullType:a=2}=e,s=await (0,d.U2)("/aweme/v1/web/minor/album/items/",(0,o._)((0,n._)({},c),{album_id:i,count:l,pull_type:a,cursor:r}),{},void 0,t,{});return(0,u.RL)(s,v)}},405039:function(e,t,i){i.d(t,{T:function(){return u},a:function(){return s}});var n=i(520739),o=i(878389);i(675373);var r=i(496349),l=i(231755);let{COMMON_SEARCH_PARAMS:a}=r||{},s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return await (0,l.v_)("/aweme/v1/web/familiar/recommend/submit",(0,o._)((0,n._)({},a),{app_name:"douyin_web",device_platform:""}),{type:2,item_id:e,source:0,is_friend_recommend:t},{})},u=async e=>await (0,l.v_)("/aweme/v1/web/familiar/recommend/cancel",(0,o._)((0,n._)({},a),{app_name:"douyin_web",device_platform:""}),{type:2,item_id:e,source:0},{})},366334:function(e,t,i){i.d(t,{A4:function(){return S},DS:function(){return b},Id:function(){return y},NN:function(){return m},Rh:function(){return h},XL:function(){return E},bV:function(){return C},fd:function(){return g},v6:function(){return _}});var n=i(520739),o=i(878389);i(779788),i(675373);var r=i(496349),l=i(493523),a=i(349135),s=i(231755),u=i(237156);let{COMMON_SEARCH_PARAMS:d}=r||{};function c(e){let{aweme_list:t=[],status_code:i,log_pb:n,position:o,is_force_insert:r=!1}=e;return{statusCode:i,position:o,isForceInsert:r,hasMore:!0,awemeList:(0,a.TN)({awemeList:t||[],logPb:n&&JSON.stringify(n)}),logPb:n&&JSON.stringify(n)}}async function m(){let{tagId:e="",count:t=10,refreshIndex:i=1,globalwid:r="",pullType:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,m=await (0,s.U2)("/aweme/v1/web/tab/feed/",(0,o._)((0,n._)({},d),{tag_id:e,count:t,refresh_index:i,video_type_select:1,globalwid:r,pull_type:l}),{errorTags:{tagId:e}},void 0,u,{});return(0,a.RL)(m,c)}async function _(e){let{count:t=10,refreshIndex:i=1,scene:r="recommend"}=e||{},l=await (0,s.v_)("/aweme/v2/web/tab_listen/feed/",(0,o._)((0,n._)({},d),{count:t,pull_type:2,refresh_index:i,web_listen_feed_scene:r}),{},void 0,null);return(0,a.RL)(l,c)}function v(e){let{status_code:t,log_pb:i,ch_info:n}=e;return{statusCode:t,info:(0,a.P$)(n),logPb:i&&JSON.stringify(i)}}async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{chId:i,queryType:r=0}=e,l=await (0,s.U2)("/aweme/v1/web/challenge/detail/",(0,o._)((0,n._)({},d),{ch_id:i,query_type:r}),{},void 0,t,{});return(0,a.RL)(l,v)}function f(e){let{aweme_list:t=[],status_code:i,log_pb:n,has_more:o,cursor:r}=e;return{statusCode:i,awemeList:(0,a.TN)({awemeList:t||[],logPb:n&&JSON.stringify(n)}),logPb:n&&JSON.stringify(n),hasMore:o,cursor:r}}async function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{chId:i,hashtagName:r,queryType:l=0,sortType:c=u.H.Comprehensive,count:m,cursor:_,isCommerce:v=!1}=e,h=await (0,s.U2)(v?"/aweme/v1/web/commerce/challenge/aweme/":"/aweme/v1/web/challenge/aweme/",(0,o._)((0,n._)({},d),{ch_id:i,hashtag_name:r,query_type:l,sort_type:v?0:c,offset:_,cursor:_,count:m}),{},void 0,t,{});return(0,a.RL)(h,f)}function p(e){let{music_info:t,status_code:i,log_pb:n}=e;return{statusCode:i,musicInfo:(0,a.o0)(t),logPb:n&&JSON.stringify(n)}}function I(e){let{music_info:t,status_code:i,log_pb:n,msg:o,res_list:r,extra:l}=e,a="";try{a=JSON.stringify(n)}catch(e){}return{musicInfo:t,statusCode:i,logPb:a,msg:o,resList:r,extra:l}}async function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{musicId:i,scene:r=1}=e,l=await (0,s.U2)("/aweme/v1/web/music/detail/",(0,o._)((0,n._)({},d),{music_id:i,scene:r}),{},void 0,t,{});return(0,a.RL)(l,p)}async function y(e){let{musicId:t,action:i}=e,o=await (0,s.v_)("/aweme/v1/web/music/collect/",(0,n._)({},d),{music_id:t,type:i,action:i},void 0,null);return(0,a.RL)(o,I)}function P(e){let{aweme_list:t=[],status_code:i,log_pb:n,has_more:o,cursor:r}=e;return{statusCode:i,awemeList:(0,a.TN)({awemeList:t||[],logPb:n&&JSON.stringify(n)}),logPb:n&&JSON.stringify(n),hasMore:o,cursor:r}}async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{musicId:i,count:r=10,cursor:l}=e,u=await (0,s.U2)("/aweme/v1/web/music/aweme/",(0,o._)((0,n._)({},d),{count:r,cursor:l,music_id:i}),{},void 0,t,{});return(0,a.RL)(u,P)}function L(e){let{extra:t,cursor:i,status_code:n,has_more:o,challenge_list:r=[],qs:l,is_match:s,keyword_disabled:u}=e;return{statusCode:n,hasMore:o,challengeList:(null==r?void 0:r.map(e=>(0,a.P$)(null==e?void 0:e.challenge_info)))||[],qs:l,isMatch:s,cursor:i,keywordDisabled:u,extra:{now:null==t?void 0:t.now,logid:null==t?void 0:t.logid}}}async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{keyword:i,count:r=10,cursor:l}=e,u=await (0,s.U2)("/aweme/v1/web/challenge/search/",(0,o._)((0,n._)({},d),{count:r,cursor:l,keyword:i}),{},void 0,t,{});return(0,a.RL)(u,L)}async function C(){let{scene:e=l.t.PcOftenWatch,ids:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],0===t.filter(e=>e).length)return;let i=await (0,s.v_)("/aweme/v1/web/write/impression/",(0,n._)({},d),{scene:e,ids:t.join(" ")});return(0,a.RL)(i,c)}},360709:function(e,t,i){i.d(t,{Z:function(){return c}}),i("874386");var n=i("563097"),o=i("88648"),r=i("713097"),l=i.n(r),a=i("397365"),s=i("650055"),u=i("308650"),d=i("423937"),c=function(e){let{className:t,onEmojiClick:i,style:r,emojiList:c,showEmoji:m,emojiTea:_,setShowEmoji:v}=e,{list:h}=(0,o.useContext)(a.Z),{roomStore:{activityEmojiGroup:f}}=(0,d.oR)(),[g,p]=o.useState([]),I=(null==h?void 0:h.length)>0?h:c,E=(0,o.useRef)(null),[y,P]=o.useState(!1);o.useEffect(()=>{if(m){var e,t;null==_||_.livesdkEmojiShow({tab_title:null==f?void 0:null===(t=f[0])||void 0===t?void 0:null===(e=t.emoji_group)||void 0===e?void 0:e.name}),window.__act_message_source__=""}p((0,s.PA)(I))},[I,m,f]);let b=(0,o.useCallback)(function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];n&&(null==_||_.livesdkEmojiClick({emoji_name:e.display_name,tab:t})),null==i||i(e)},[i]),L=(0,o.useCallback)(e=>{var t,i;(null==E?void 0:E.current)&&!(null==E?void 0:null===(i=E.current)||void 0===i?void 0:null===(t=i.contains)||void 0===t?void 0:t.call(i,null==e?void 0:e.target))&&y&&(null==v||v(!1))},[y]);(0,o.useEffect)(()=>(document.addEventListener("click",L),!y&&P(!0),()=>{document.removeEventListener("click",L)}),[y,P,L]);let S=(0,o.useRef)(null);return(0,o.useEffect)(()=>{S.current&&S.current.addEventListener("wheel",e=>{e.stopPropagation()})},[]),(0,n.jsx)("div",{className:l()("emoji-panel",t),style:r,onClick:e=>e.stopPropagation(),ref:E,children:(0,n.jsxs)("div",{className:"emoji-panel-list",onWheel:e=>{e.stopPropagation()},ref:S,children:[(null==g?void 0:g.length)>0&&(0,n.jsxs)("div",{className:"emoji-panel__common",children:[(0,n.jsx)("h3",{children:""}),(0,n.jsx)("div",{className:"emoji-panel__common-use-list",children:null==g?void 0:g.map(e=>(0,n.jsx)("img",{onClick:()=>i&&b(e,"quick"),src:e.url,className:l()("emoji-panel__common-img")}))})]}),(0,n.jsx)(u.Z,{onClick:e=>i&&b(e,"all",!1),emojiTea:_}),(0,n.jsxs)("div",{className:"emoji-panel__all",children:[(null==g?void 0:g.length)>0&&(0,n.jsx)("h3",{children:""}),(0,n.jsx)("div",{className:"emoji-panel__all-list",children:null==I?void 0:I.map(e=>(0,n.jsx)("img",{onClick:()=>i&&b(e,"all"),src:e.url,className:l()("emoji-panel__all-img")}))})]})]})})}},308650:function(e,t,i){var n=i(563097);i(88648);var o=i(61850),r=i(423937),l=i(516599);t.Z=(0,o.Pi)(e=>{let{onClick:t,emojiTea:i}=e,{roomStore:{activityEmojiGroup:o}}=(0,r.oR)();return o&&0!==o.length?(0,n.jsx)("div",{children:o.map(e=>(0,n.jsxs)("div",{className:"emoji-panel__common",children:[(0,n.jsx)("h3",{children:e.emoji_group.name}),(0,n.jsx)("div",{className:"emoji-panel__common_group_list",children:e.emoji_group.emoji_list.map(o=>(0,n.jsx)("div",{className:"img-item-wrap",children:(0,n.jsx)("img",{className:"img-item",src:o.emoji.url_list[0],onClick:()=>{var n,r,a;if(null==i||i.livesdkEmojiClick({tab_title:null==e?void 0:null===(n=e.emoji_group)||void 0===n?void 0:n.name,emoji_type:"tab_activity",emoji_name:`[${e.emoji_group.name}_${o.name}]`}),Number(e.end_time)<new Date().getTime()/1e3){l.F.info("");return}t&&t({display_name:`[${e.emoji_group.name}_${o.name}]`,emojiId:null==o?void 0:o.id_str,isEmojiGroup:!0,url:null==o?void 0:null===(a=o.emoji)||void 0===a?void 0:null===(r=a.url_list)||void 0===r?void 0:r[0]})}})},o.name))})]},e.emoji_group.name))}):null})},612362:function(e,t,i){i.d(t,{_:function(){return T}});var n=i("520739"),o=i("878389");i("874386");var r=i("563097"),l=i("88648"),a=i("713097"),s=i.n(a),u=e=>{let{items:t,defaultActiveKey:i,activeKey:n}=e,[o,a]=(0,l.useState)(i);return(0,l.useEffect)(()=>{a(n)},[n]),(0,r.jsxs)("div",{className:"tabs-wrapper",children:[(0,r.jsx)("div",{className:"tabs-nav-list-wrapper",children:null==t?void 0:t.map(e=>(0,r.jsx)("div",{onClick:t=>{t.stopPropagation(),a(e.key)},className:s()("tabs-nav-list-item",e.key===o?"active":""),children:e.label},e.key))}),(0,r.jsx)("div",{className:"tabs-nav-panel-list-wrapper",children:null==t?void 0:t.map(e=>(0,r.jsx)("div",{className:s()("tabs-nav-panel-item",e.key===o?"active":"inActive"),children:e.children},e.key))})]})};let d=(0,l.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,o._)((0,n._)({width:19,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{d:"M9.5 5.124v-.001m0 0a4.098 4.098 0 0 0-3.067-1.41c-2.1 0-3.75 1.634-3.75 3.714 0 2.547 2.307 4.623 5.802 7.77l.027.025.574.513a.618.618 0 0 0 .412.158M9.5 5.123h-.002m.002 0a4.098 4.098 0 0 1 3.066-1.41c2.1 0 3.75 1.634 3.75 3.714 0 2.547-2.306 4.623-5.802 7.77l-.027.025-.574.513a.618.618 0 0 1-.415.158m0 0h.003M7.02 7.431l2.48 3.718 2.478-3.718",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})));var c=i("423937"),m=i("39974"),_=i("859231"),v=i("388193"),h=i("516599"),f=i("33664");let g=(0,l.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,o._)((0,n._)({xmlns:"http://www.w3.org/2000/svg",width:7,height:9,fill:"none",ref:t},e),{children:(0,r.jsx)("path",{d:"M1.574 3.585v-.81a2.025 2.025 0 1 1 4.05 0v.81h.405a.81.81 0 0 1 .81.81V8.04a.81.81 0 0 1-.81.81H1.17a.81.81 0 0 1-.81-.81V4.395a.81.81 0 0 1 .81-.81h.405zm3.24-.81a1.215 1.215 0 1 0-2.43 0v.81h2.43v-.81z",fill:"currentColor"})})));var p=i("645260"),I=i.n(p),E=i("877639"),y=i.n(E),P=i("811167");let b=e=>{var t,i,n;let{}=e,{vipStore:{vipEmojiConfig:o,setIsShowVipPanel:a,isVip:s},vipStore:u,roomStore:{roomInfo:d},singletonStore:{message:g}}=(0,c.oR)(),p=(0,l.useRef)(null),E=(0,l.useCallback)(()=>{document.dispatchEvent(new MouseEvent("click"))},[]),y=async e=>{E();let{data:t}=await (0,m.W)({room_id_str:null==d?void 0:d.roomId,episode_id:I()(d,"room.episode_extra.episode_id_str"),stage:I()(d,"room.episode_extra.mod.episode_stage"),type:3,emoji_id:e,content:""});switch(t.status_code){case _.Ze.SUCCESS:null==g||g.queuePush((0,v.Wd)(t.data));break;case _.Ze.MUTE:h.F.info(t.data.prompts||"");break;case _.Ze.WORD_LIMITED:h.F.info(t.data.prompts||"");break;default:h.F.info(t.data.prompts||"")}},b=(0,l.useRef)();return l.useEffect(()=>{if(b.current){let e=e=>{var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e)};return b.current.addEventListener("wheel",e),()=>{var t,i;null===(i=b.current)||void 0===i||null===(t=i.removeEventListener)||void 0===t||t.call(i,"wheel",e)}}},[]),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"vip-emoji-panel-wrapper",ref:p,children:[s?null:(0,r.jsxs)("div",{className:"vip-emoji-subscribe",children:[(0,r.jsx)("span",{children:""}),(0,r.jsx)(f.zx,{size:"small",onClick:()=>{E(),(0,P.Z)("subscribe_emoji_panel")},style:{height:"24px",fontSize:"12px",padding:"0 8px",margin:"0",minWidth:"auto"},children:null==u?void 0:null===(i=u.vipEmojiConfig)||void 0===i?void 0:null===(t=i.emoji_tab_info)||void 0===t?void 0:t.btn_text})]}),(0,r.jsx)("div",{className:"vip-emoji-item-list-wrapper",ref:b,children:null==o?void 0:null===(n=o.emoji_list)||void 0===n?void 0:n.map((e,t)=>(0,r.jsx)(l.Fragment,{children:(0,r.jsx)(L,{locked:!s,config:e,containerRef:p,onSendEmoji:y})},t))})]})})},L=e=>{var t,i;let{locked:n,config:o,containerRef:l,onSendEmoji:a}=e,u=(e,t)=>{if(n)return e.stopPropagation(),h.F.info({text:"",className:"emoji-panel__emoji-toast"},l,2e3);null==a||a(t)};return(0,r.jsxs)("div",{className:s()("vip-emoji-item",n?"disabled":""),onClick:y()(e=>u(e,o.id),2e3),children:[n?(0,r.jsx)(g,{className:"vip-emoji-icon-block"}):null,(0,r.jsx)("img",{src:null==o?void 0:null===(i=o.img)||void 0===i?void 0:null===(t=i.url_list)||void 0===t?void 0:t[0],alt:null==o?void 0:o.text})]})};var S=i("397365"),C=i("650055"),N=i("308650"),w=function(e){let{className:t,style:i,emojiList:n,emojiTea:o,onEmojiClick:a}=e,{list:u}=(0,l.useContext)(S.Z),[d,c]=l.useState([]),m=(null==u?void 0:u.length)>0?u:n,_=(0,l.useRef)(null);l.useEffect(()=>{c((0,C.PA)(m))},[m]);let v=(0,l.useCallback)((e,t)=>{null==o||o.livesdkEmojiClick({emoji_name:e.display_name,tab:t}),null==a||a(e)},[a]),h=(0,l.useRef)();return(0,l.useEffect)(()=>{h.current&&h.current.addEventListener("wheel",e=>{e.stopPropagation()})},[]),(0,r.jsx)("div",{className:s()("emoji-panel-normal-wrapper",t),style:i,ref:_,children:(0,r.jsxs)("div",{className:"emoji-panel-list",onWheel:e=>{e.stopPropagation()},ref:h,children:[(null==d?void 0:d.length)>0&&(0,r.jsxs)("div",{className:"emoji-panel__common",children:[(0,r.jsx)("h3",{children:""}),(0,r.jsx)("div",{className:"emoji-panel__common-use-list",children:null==d?void 0:d.map(e=>(0,r.jsx)("img",{onClick:()=>v(e,"quick"),src:e.url,className:s()("emoji-panel__common-img")},e.url))})]}),(0,r.jsx)(N.Z,{onClick:e=>a&&v(e,"all"),emojiTea:o}),(0,r.jsxs)("div",{className:"emoji-panel__all",children:[(null==d?void 0:d.length)>0&&(0,r.jsx)("h3",{children:""}),(0,r.jsx)("div",{className:"emoji-panel__all-list",children:null==m?void 0:m.map(e=>(0,r.jsx)("img",{onClick:()=>v(e,"all"),src:e.url,className:s()("emoji-panel__all-img")},e.url))})]})]})})};let T=l.memo(l.forwardRef((e,t)=>{let{wrapStyle:i,style:a,emojiList:m,onEmojiClick:_,emojiTea:v}=e,[h,f]=(0,l.useState)(!1),[g,p]=(0,l.useState)("emoji"),I=(0,l.useCallback)(()=>{f(!1)},[]);(0,l.useEffect)(()=>(document.addEventListener("click",I),()=>{document.removeEventListener("click",I)}),[]),(0,l.useImperativeHandle)(t,()=>({show:e=>{f(!0),e&&p(e)},hide:()=>{f(!1)},toggle:()=>{f(!h)}}));let{isInPreview:E}=(0,c.DQ)();return(0,r.jsx)("div",{ref:t,className:s()("emoji-panel-wrapper",h?"":"invisible",{isInPreview:E}),onClick:e=>{e.stopPropagation()},style:i,children:(0,r.jsx)("div",{style:(0,o._)((0,n._)({},a),{height:"100%"}),children:(0,r.jsx)(u,{defaultActiveKey:"emoji",activeKey:g,items:[{label:"",key:"emoji",children:(0,r.jsx)(w,{emojiList:m,onEmojiClick:_,emojiTea:v})},{label:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(d,{style:{marginRight:"4px"}}),""]}),key:"vipEmoji",children:(0,r.jsx)(b,{})}]})})})}))},397365:function(e,t,i){i.d(t,{u:function(){return r}});var n=i(88648);let o=n.createContext({display:!1,input:!1,map:{},list:[],icon:"",showEmoji:!1,setShowEmoji:()=>{}}),r=()=>n.useContext(o);t.Z=o},650055:function(e,t,i){i.d(t,{BQ:function(){return m},M9:function(){return l},PA:function(){return d},p3:function(){return a},qA:function(){return u},yO:function(){return c}}),i(927234),i(268917),i(874386),i(413806),i(826893),i(981168),i(779788);var n=i(193533),o=i.n(n);i(645260);var r=i(311474);function l(e){return e?"string"==typeof e?e:"number"==typeof e?`${e}`:o().fromBits(e.low,e.high,e.unsigned).toString():""}i(88648);let a=e=>{var t,i;return l((null==e?void 0:null===(i=e.payload)||void 0===i?void 0:null===(t=i.common)||void 0===t?void 0:t.msg_id)||(0,r.Z)())},s=e=>!isNaN(Number(e)),u=e=>Object.keys(e).filter(e=>!s(e)).map(t=>e[t]),d=e=>{let t={};try{var i;t=JSON.parse(null!==(i=window.localStorage.getItem("commonEmoji"))&&void 0!==i?i:"")}catch(e){t={}}let n=Object.keys(t),o=[];return n.length>0&&n.forEach((t,i)=>{if(i<6){var n;let i=null==e?void 0:null===(n=e.filter(e=>(null==e?void 0:e.display_name)===t))||void 0===n?void 0:n[0];i&&o.push(i)}}),o},c=(e,t)=>{let i=e.split(/(\[.*?])/),n=[];return t?(i.forEach(e=>{var i;null==t||null===(i=t.emoji_group)||void 0===i||i.emoji_list.forEach(i=>{var o;e===`[${null==t?void 0:null===(o=t.emoji_group)||void 0===o?void 0:o.name}_${null==i?void 0:i.name}]`&&n.push(i)})}),n):n},m=(e,t)=>{if(0===c(e,t).length||!t)return"";try{var i;let n=[];return null==t||null===(i=t.emoji_group)||void 0===i||i.emoji_list.forEach(i=>{var o;let r=`[${null==t?void 0:null===(o=t.emoji_group)||void 0===o?void 0:o.name}_${null==i?void 0:i.name}]`,l=0,a=0;for(let t=0;t<e.length;t++){let o=e[t];"["===o&&(l=t),"]"===o&&(a=t,e.slice(l,a+1)===r&&n.push({type:1,value:i.id,start:l,length:r.length}))}}),n.sort((e,t)=>e.start-t.start),JSON.stringify(n)}catch(e){return""}}}}]);