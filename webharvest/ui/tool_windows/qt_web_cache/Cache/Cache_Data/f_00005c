"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["80070"],{60441:function(e,i,l){l.d(i,{Hh:function(){return a},vE:function(){return r},xB:function(){return o}}),l(602157),l(250440);var t=l(105600);let n=(e,i)=>{var l;return null==e?void 0:null===(l=e.trim())||void 0===l?void 0:l.slice(0,i)},o=e=>{let i,l;let{desc:o,nickname:r,createTimeStr:a,likeCount:d,textExtra:s=[],ocrContent:u}=e,c=s.filter(e=>e.type===t.TextType.HashTag).map(e=>e.hashtagName).join(","),v=`${r}在抖音记录美好生活${a} - 抖音`,m=`${r}于${a}发布在抖音，已经收获了${d}个喜欢，来抖音，记录美好生活！`,_="抖音,抖音短视频,抖音官网";return o?(i=`${n(o,200)} - 抖音`,l=`${n(o,120)} - ${m}`):(i=u.length<30?v:`${n(u,30)} - 抖音`,l=u.length<30?m:`${n(u,120)} - ${m}`),{title:i,description:l,keywords:c?`${c},${_}`:_}},r=e=>{let{desc:i="",nickname:l,createTimeStr:r,likeCount:a,keyword:d="",source:s=0,ocrContent:u,keywordList:c=[]}=e,v=`${l}于${r}发布在抖音，已经收获了${a}个喜欢，来抖音，记录美好生活！`,{title:m,description:_,keywords:f}=o(e);return t.HOT_KEYWORD_TYPE_LIST.includes(s)?(m=i.includes(d)?m:`${d}-${i}-抖音`,f=`${d},抖音`):(m=`${d}-抖音`,f=`${c.slice(0,3).join(",")},抖音`),{title:m,description:_=`${d}${n(u,120)} - ${v}`,keywords:f}},a=e=>{let{desc:i,nickname:l,createTimeStr:t,likeCount:r,ocrContent:a=""}=e,d=`${l}于${t}发布在抖音，已经收获了${r}个喜欢，来抖音，记录美好生活！`,{description:s,keywords:u}=o(e),c=a.length<30?`${i} - ${l} - 抖音`:`${n(a,30)} - 抖音`;return{title:c,description:a.length<30?s:`${n(a,120)} - ${d}`,keywords:u}}},295471:function(e,i,l){l.d(i,{l:function(){return x}});var t=l("520739"),n=l("878389");l("927234"),l("874386");var o=l("563097"),r=l("88648"),a=l("713097"),d=l.n(a),s=l("456128"),u=l("658065"),c=l("32167"),v=l("637005"),m=l("649368");let _=(0,r.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,n._)((0,t._)({width:8,height:8,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,o.jsx)("path",{opacity:".7",d:"M.455 6.435a.78.78 0 0 0 1.103 1.103l2.434-2.435 2.435 2.435A.78.78 0 0 0 7.53 6.435L5.095 4 7.53 1.566A.78.78 0 0 0 6.427.463L3.992 2.897 1.558.463A.78.78 0 0 0 .455 1.566L2.889 4 .455 6.435z",fill:"#fff"})})));var f={cardAd:"auIPeWle",cover:"BPfFVE0r",douyinIcon:"Zf1aLzBu",coverContent:"v3mtt6oK",coverImg:"iTTEOGZL",info:"XqUInXNy",title:"vwDdvG9C",actions:"h1vWzGpx",link:"hPAqs8Ha",button:"A3iwm53Y",secondary:"o4kMRWJb",tertiary:"NQ7omhr0",adTag:"dTOXLecF",withBackground:"JrsPxN_j"},g=l("544933");let h={enter_from_merge:"",enter_from:"",sub_tab_name:"",source_id:"",card_type:"not_fixed_card",card_rank:"",is_card_mark:0,button_num:0};var p={firstButton:"first_button",secondButton:"second_button",clickCaption:"click_caption",otherLocation:"other_location"};let w=new g.h({feedAdCardShow:{eventName:"feed_ad_card_show",params:(0,t._)({},h)},feedAdCardClick:{eventName:"feed_ad_card_click",params:(0,n._)((0,t._)({},h),{click_location:""})},feedAdCardClose:{eventName:"feed_ad_card_close",params:(0,t._)({},h)}});var C=l("88961");let x=e=>{let{cardAd:i,cardStyle:l,onClose:a,onShow:g,logParams:h,enterMethod:x}=e,{id:I,order:b,permanent:y,postUrl:L,title:j,showAdTag:k}=i||{},T=(0,r.useMemo)(()=>(null==i?void 0:i.actions)?"link"===i.actions[0].type?[i.actions[0]]:i.actions.filter(e=>!!(null==e?void 0:e.text)&&(!!e.is_open_JX_modal||!!(null==e?void 0:e.link)))||[]:[],[null==i?void 0:i.actions]),E=()=>({enter_from_merge:(0,u.yW)(),enter_from:(0,c.vM)(),sub_tab_name:(null==h?void 0:h.sub_tab_name)||"",source_id:I.toString(),card_type:y?"fixed_card":"not_fixed_card",card_rank:b.toString(),is_card_mark:k?1:0,button_num:T.length}),[S,N]=function(e){let[i,l]=(0,C.Z)(),t=(0,r.useRef)(!1);return!t.current&&l&&(e&&e(),t.current=!0),[i,l]}(()=>{null==g||g(i),w.sendLog("feedAdCardShow",(0,t._)({},E()))}),P=()=>{null==a||a(i),w.sendLog("feedAdCardClose",(0,t._)({},E()))},R=(e,i)=>{let{link:l}=e||{};if(null==e?void 0:e.is_open_JX_modal){w.sendLog("feedAdCardClick",(0,n._)((0,t._)({},E()),{click_location:i})),v.emit(v.EVENT.OpenJXModal,{source:x});return}if(!!l)window.open(l,"_blank","noopener"),w.sendLog("feedAdCardClick",(0,n._)((0,t._)({},E()),{click_location:i}))};return(0,r.useEffect)(()=>v.listen(v.EVENT.RefreshFeedList,()=>{N&&w.sendLog("feedAdCardShow",(0,t._)({},E()))}),[N]),(0,o.jsxs)("div",{className:d()(f.cardAd,{[f.withBackground]:"with-background"===l}),onClick:e=>{e.stopPropagation(),R(T[0],p.otherLocation)},ref:S,children:[(0,o.jsx)("div",{className:f.cover,children:(0,o.jsx)(s.Q,{imgClass:f.coverImg,className:f.coverContent,src:L,iconWidth:24,iconHeight:28,showImageInSSR:!1,imageReady:!0,skeletonClass:f.douyinIcon})}),(0,o.jsxs)("div",{className:f.info,children:[(0,o.jsx)("div",{className:f.title,onClick:e=>{e.stopPropagation(),R(T[0],p.clickCaption)},children:j}),(0,o.jsx)("div",{className:f.actions,children:T.map((e,i)=>(0,o.jsxs)("span",{className:d()({[f.link]:"link"===e.type,[f.button]:"button"===e.type,[f.secondary]:"button"===e.type&&0===i,[f.tertiary]:"button"===e.type&&1===i}),onClick:l=>{l.stopPropagation(),R(e,0===i?p.firstButton:p.secondButton)},children:[e.text,(0,o.jsx)(m.Z,{})]},i))})]}),k&&(0,o.jsxs)("div",{className:f.adTag,children:[(0,o.jsx)("span",{children:"广告"}),(0,o.jsx)("span",{onClick:e=>{e.stopPropagation(),P()},children:(0,o.jsx)(_,{})})]})]})}},792060:function(e,i,l){var t=l(563097);l(88648);var n=l(501981),o=l(700662);i.Z=e=>{let{children:i,mobileUrl:l,applicableDevice:r}=e,a=(0,n.Yr)();return(0,t.jsx)(o.$,{mobileUrl:l,nonce:a,applicableDevice:r,children:i})}},291628:function(e,i,l){var t=l(563097);l(88648);var n=l(439837),o=l.n(n),r=l(792060);i.Z=e=>{let{videoDetail:i,mobileUrl:l,children:n}=e,{desc:a,authorInfo:d,createTime:s=Date.now()/1e3,video:u,awemeId:c}=i||{},{nickname:v=""}=d||{},{cover:m}=u||{},_=o()(1e3*s).format("YYYYMMDD")||"",f=`${v}在抖音记录美好生活${_}`;return a&&(f=a.slice(0,35)),i?(0,t.jsxs)(r.Z,{mobileUrl:l,children:[n,(0,t.jsx)("meta",{name:"lark:url:enable",content:u?"true":"false"}),(0,t.jsx)("meta",{name:"lark:url:video_icon_url",content:"https://lf1-cdn-tos.bytegoofy.com/goofy/ies/douyin_web/public/favicon.ico"}),(0,t.jsx)("meta",{name:"lark:url:video_title",content:f}),(0,t.jsx)("meta",{name:"lark:url:video_cover_image_url",content:m}),(0,t.jsx)("meta",{name:"lark:url:video_iframe_url",content:`https://www.douyin.com/light/${c}`}),(0,t.jsx)("meta",{name:"lark:url:video_brand_name",content:"抖音"})]}):(0,t.jsx)(r.Z,{mobileUrl:l,children:n})}},936681:function(e,i,l){l.d(i,{R:function(){return m}}),l("874386"),l("250440");var t=l("563097");l("88648");var n=l("713097"),o=l.n(n),r=l("55426"),a=l("421885"),d=l("956428"),s=l("180962"),u=l("555679"),c={tagContainer:"MuOMBG7w",tagText:"j0NhDonV",yellow:"cnXJYqGj",green:"XyANTGWL",recommended:"HiCadb44"};a.Z,d.Z,s.Z,u.Z;let v=new Map([["follow",{text:"你的关注"}],["recommended",{text:"为你推荐"}],["collect",{text:"收藏"}],["digg",{text:"点赞"}],["comment",{text:"评论"}]]),m=e=>{let{count:i,type:l,className:n,abTestData:a}=e,d=v.get("recommended"===l?"recommended":"follow");return(0,t.jsx)(t.Fragment,{children:d&&(0,t.jsx)("span",{className:o()(c.tagContainer,n,{[c.yellow]:"collect"===l,[c.green]:"comment"===l,[c.green]:"follow"===l,[c.recommended]:"recommended"===l}),children:(0,t.jsx)("span",{className:o()(c.tagText),children:`${["follow","recommended"].includes(l)?"":(0,r.qe)(i||0)}${d.text}`})})})}},325430:function(e,i,l){l.d(i,{Z:function(){return eO}});var t=l("520739"),n=l("878389");l("675373"),l("602157"),l("874386"),l("698295"),l("630833");var o=l("563097"),r=l("88648"),a=l("713097"),d=l.n(a),s=l("222406"),u=l("465571"),c=l("338426"),v=l("149250"),m=l("948375"),_=l("567754"),f=l("410665"),g=l("702726"),h=l("234048"),p=l("597334"),w=l("105600"),C=l("598467"),x=l("828564"),I=l("417069"),b=l("901414"),y=l("473677"),L=l("906499"),j=l("128505"),k=l("903868"),T=l("317914"),E=l("782442"),S=l("55426"),N=l("32167"),P=l("637005"),R=l("577786"),A=l("658065"),D=l("807939"),M=l("702063"),O=l("330746"),V=l("782563"),B=l("273329"),F={more:"okbbldWm",videoCard:"Ety_VxKJ",cardInfo:"aQ9_t9OG",bgChange:"Ggrj06si",videoImg:"Lcu93pLN",imgAspectRatio:"tIDxbbb0",hover:"MXa_Fvst",hotMask:"ZNnEuoIx",hotBottomInfo:"DzD5gTdY",hotCount:"PI_YRTgM",hotText:"_FSjEjz0",hotDuration:"bDPIenef",coverBg:"yCZK873D",coverMask:"HS_xtX97",cardInfoContainer:"eHJ6sWzB",transparent:"N6iRTJrK",decs:"bWzvoR9D",userText:"cFBFnzvk",userTextContent:"v2EXCtbT",userName:"i1udsuGn",text:"H0ZV35Qb",marginRight:"kGiKw5ui",highlightTag:"fNbKQpbC",highlightTagWithoutMarginRight:"L9x6LbYL",divider:"TGGwK4S0",interactiveBox:"uvLZJzu_",contents:"uvbktBRs",icon:"os6QELZF",barContainer:"jOEMaHXF",barIcon:"t3FiK6uZ",barText:"JrUsR5HS",barDivide:"fbxmM1V3",barDesc:"JoNaf7Md",createTime:"RIr_dcq4",hasMarginRight:"a9pGU2CK",flexColumn:"K7AQ1qf_",needScale:"qitm_ReH",imageChange:"nG23Syh1",at:"usZ3A4ca",report:"WSk_EDgD",bottom:"UN0kFYlU",bigCard:"MOOYT7l5",isBigCardCutVideo:"l3knLhM1",jxThemeColor:"Cy3BHAAt",moreBtnBgChange:"Ozj4cge_"},U=l("784492"),H=l("746864"),G=l("916956"),Y=l("516599"),Z=l("456128"),$=l("288867"),z=l("85599"),W=l("667557"),J={videoImage:"aEPe5XR7",videoBox:"_mZtzTNG",videoBoxUnsetBg:"RnLdibGs",img:"FzTzDfM8",gaosi:"MHUGVJJ0",imgCover:"arVEnqPE",videoInfo:"nxtM_NY2",discoverWatchLaterToast:"K1TmrJVT",inVisible:"kteHsmP9"},q=l("689021"),X={playingCover:"ap8bVGAY",safari:"puRNIeSZ",playingCoverInner:"ZkyW_Mff"};let K=()=>(0,o.jsx)("div",{className:d()(X.playingCover,{[X.safari]:(0,O.G6)()}),onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsxs)("div",{className:X.playingCoverInner,children:[(0,o.jsx)(q.WaveLineAnimation,{className:X.icon}),(0,o.jsx)("span",{children:"播放中"})]})}),Q=e=>{let{previewUrlList:i,onVideoEnded:l,onVideoStopped:t,onVideoPlaying:n,topAwemeId:o,isTopCard:a=!1}=e,d=(0,k.Iq)(e=>{let{pipWindow:i}=e;return{pipWindow:i}}),[s,u]=(0,r.useState)(!1),[c,v]=(0,r.useState)(!1),[_,f]=(0,r.useState)(!1),g=(0,r.useRef)(),h=(0,r.useRef)(0);(0,r.useEffect)(()=>{c&&(null==n||n())},[c]);let p=(0,m.Z)(e=>{v(e)}),w=(0,m.Z)(()=>{v(!0)}),C=(0,m.Z)(()=>{p(!1)}),x=(0,r.useMemo)(()=>{let e=i.length>0,l=!!(null==d?void 0:d.pipWindow);return e&&(a?s:c&&!l)},[i,c,a,s]),I=(0,r.useRef)(x);(0,r.useLayoutEffect)(()=>{!x&&I.current&&(f(!1),null==t||t(Date.now()-h.current))},[x,t]),(0,G.C)(()=>{u(!0)},[]),(0,U.Z)(()=>{if(!a){if(P.emit(P.EVENT.JingxuanTopCard,{action:c?"pause":"play",awemeId:o,from:c?"hover_other_cover":"cancel_hover_other_cover"}),c)return P.listen(P.EVENT.JingxuanTopCard,e=>{let{action:i}=e;"pauseOtherCard"===i&&v(!1)})}},[c,a]),(0,r.useEffect)(()=>{I.current=x},[x]);let b=(0,m.Z)(()=>{null==l||l()});return{onMouseEnter:w,onMouseLeave:C,isPlay:x,isHovered:c,setIsHovered:p,onEnded:b,onPlaying:(0,m.Z)(()=>{f(!0)}),isReady:_,previewImageRef:g}},ee=e=>{let{awemeInfo:i,useOuterProgress:l=!1}=e,[t,n]=(0,r.useState)(!1),[o,a]=(0,r.useState)(0),[d,s]=(0,r.useState)(0),[u,c]=(0,r.useState)(0);return(0,r.useEffect)(()=>{if(!l||!i.awemeId)return;let e=e=>{let{awemeId:l}=e;if(l!==i.awemeId)return;let t=E.Le.getConfig(E.gI.JxOuterProgress),o=(null==t?void 0:t[l])||{};(null==o?void 0:o.isWatchedEnd)||(null==o?void 0:o.progress)?(n(!0),a((null==o?void 0:o.progress)||0),s((null==o?void 0:o.startTime)||0),c((null==o?void 0:o.duration)||0)):(n(!1),a(0),s(0))};e({awemeId:i.awemeId});let t=P.listen(P.EVENT.UpdateJxOuterProgress,e);return()=>{null==t||t()}},[l,i]),{showOuterProgress:t,outerProgress:o,outerStartTime:d,outerDuration:u}};var ei="hRlVOg7l",el="PRUt1wQg";let et=e=>{let{progress:i,outerClassName:l,onShow:t}=e,n=(0,f.x)(()=>{null==t||t()});return(0,o.jsx)("div",{ref:n,className:d()(ei,l),children:(0,o.jsx)("div",{className:el,style:{width:`${i}%`}})})};var en=l("794593");let eo=r.lazy(()=>Promise.all([l.e("42562"),l.e("5405"),l.e("80669")]).then(l.bind(l,405430)));var er={OutSide:0,0:"OutSide",Inner:1,1:"Inner"};let ea=e=>{Y.F.info(e)};var ed=(0,r.forwardRef)((e,i)=>{var l;let{style:a,className:u,imageClassName:c,imgClass:v,imageSkeletonClass:m="",imgUrl:_="",children:f,onClick:g,defaultImageColor:h,onVideoStopped:w,onVideoPlaying:C,previewUrlList:x=[],width:I,height:b,fakeHorizontalInfo:y,onVideoEnded:L,isHorizontal:j=!1,isSpider:T,debugInfo:S,appendPlayerConfig:N,alt:R,awemeInfo:M,onMouseEnter:V,onMouseLeave:F,showProgressBar:Y,onPreviewChange:q,logParams:X,showImageInSSR:ei,forceContainerCover:el=!1,renderExtension:er,onImgLoad:ed,onLoadedData:es,priority:eu,videoImageWidth:ec,videoImageHeight:ev,decoding:em,scene:e_,user:ef,onRef:eg,disablePreview:eh=!1,disableByMoreAction:ep=!1,enableNotePreview:ew=!1,blurLightCover:eC=!1,needOperateHidden:ex=!1,isBigCard:eI=!1,isTopCard:eb=!1,isTopCardActive:ey,topAwemeId:eL,showWatchLater:ej=!1,imageReady:ek,tab:eT,enableCardHoverPreview:eE,canCancleWatchLaterOnPreview:eS,withBlurBg:eN,withBlurBgPerf:eP,enableImageX:eR,scrollContainerRef:eA,reuseConfig:eD,showAiEntry:eM,onClickAiEntry:eO,abTestData:eV,onClickPipIcon:eB,isPipPlaying:eF,dislikeCoverVisible:eU,useOuterProgress:eH=!1,forceHiddenOuterProgress:eG=!1}=e,eY=(0,r.useRef)(!1),eZ=(0,k.Iq)(e=>{let{pipWindow:i,isWebMiniWin:l}=e;return{pipWindow:i,isWebMiniWin:l}}),[e$,ez]=(0,r.useState)(null),[eW,eJ]=(0,r.useState)(null),eq=(null==M?void 0:M.awemeType)===H.e.Note,eX=(0,r.useRef)(),{showOuterProgress:eK,outerProgress:eQ,outerStartTime:e0,outerDuration:e1}=ee({awemeInfo:M,useOuterProgress:eH}),{setIsHovered:e2,isPlay:e3,onMouseEnter:e5,onMouseLeave:e6,onEnded:e4,onPlaying:e7,isReady:e8,previewImageRef:e9,isHovered:ie}=Q({previewUrlList:x,onVideoStopped:w,onVideoEnded:L,onVideoPlaying:C,isTopCard:eb,topAwemeId:eL}),[ii,il]=(0,r.useState)(e3),it=(0,r.useCallback)(()=>{if(null==g||g(),(null==x?void 0:x.length)!==0)e2(!1)},[e2,g,x]);(0,r.useEffect)(()=>{if("discover"===e_&&eI){var e,i;null===(i=window)||void 0===i||null===(e=i.jxHydrateReadyCb)||void 0===e||e.call(i,null==eX?void 0:eX.current)}},[e_,eI]),(0,G.C)(()=>{var e,i,l;let t=(null===(e=E.Le.getConfig(E.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1;(null===(l=window)||void 0===l?void 0:null===(i=l.__QUICK_PLAYER)||void 0===i?void 0:i.player)||t?il(!1):il(e3)},[e3]),(0,U.Z)(()=>{if(eb){var e,i,l;let t=(null===(e=E.Le.getConfig(E.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1,n=null===(l=window)||void 0===l?void 0:null===(i=l.__QUICK_PLAYER)||void 0===i?void 0:i.player;il(e3&&!!ey&&!(null==eZ?void 0:eZ.pipWindow)&&!t&&!n)}},[eb,ey,e3,null==eZ?void 0:eZ.pipWindow]),(0,r.useEffect)(()=>{if(eb){let e=P.listen(P.EVENT.videoPause,()=>{il(!1)}),i=P.listen(P.EVENT.exitModalVideo,()=>{il(e3&&!!ey&&!(null==eZ?void 0:eZ.pipWindow))});return()=>{null==e||e(),null==i||i()}}},[eb,ey,e3,null==eZ?void 0:eZ.pipWindow]);let io=(!(0,O.vU)()||M)&&ii&&(null==x?void 0:x.length)>0;(0,r.useEffect)(()=>{null==q||q(io)},[io]);let{isiPad:ir}=(0,p.X)(),{isWebMiniWin:ia=!1}=(0,k.Iq)(e=>{let{isWebMiniWin:i}=e;return{isWebMiniWin:i}}),id=(0,r.useCallback)(()=>{e5(),null==V||V()},[e5,V,ia]),is=(0,r.useCallback)(()=>{e6(),null==F||F()},[e6,F]);(0,r.useEffect)(()=>{if(e$&&!ep&&!eE&&!ir){let e=D.mouseEnter(e$,id,!0),i=D.mouseLeave(e$,is);return()=>{e(),i()}}},[e$,ep,eE,ir,id,is]),(0,r.useImperativeHandle)(i,()=>({enter(){e$&&!ep&&id()},leave(){e$&&!ep&&is()}}),[e$,ep,id,is]),(0,r.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState&&is()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[is]),(0,r.useEffect)(()=>{ia&&is()},[ia]);let iu=(ie||io)&&ej&&(0,W.D)(M)&&!eU,ic=(0,r.useMemo)(()=>{let e=(0,A.yW)();return(0,n._)((0,t._)({},X),{enter_from:e,enter_from_merge:e,tab_name:null!=eT?eT:e,click_method:`${e}_preview`})},[X]),iv=(0,r.useMemo)(()=>eS?(0,n._)((0,t._)({},M),{watchLaterInfo:null}):M,[eS,M]),im=(0,r.useMemo)(()=>({watchLaterAwemeInfo:iv,user:ef}),[iv,ef]),i_=(0,r.useCallback)(()=>{var e,i,l,t;if(!eY.current)eY.current=!0,en.Z.report("pc_theme_progress_bar_show",{enter_from:(0,A.yW)(),enter_from_merge:(0,A.yW)(),enter_method:"",tab_name:null==X?void 0:X.tab_name,sub_tab_name:null==X?void 0:X.sub_tab_name,aweme_type:null==X?void 0:null===(e=X.awemeInfo)||void 0===e?void 0:e.awemeType,group_id:null==X?void 0:null===(i=X.awemeInfo)||void 0===i?void 0:i.awemeId,author_id:null==X?void 0:null===(t=X.awemeInfo)||void 0===t?void 0:null===(l=t.authorInfo)||void 0===l?void 0:l.uid,item_duration_ms:e1})},[X,e1]);return(0,o.jsxs)("div",{style:a,onClick:it,className:d()(J.videoImage,u,"videoImage"),ref:e=>{ez(e),null==eg||eg(e)},children:[(0,o.jsxs)("div",{className:d()(J.videoBox,{[J.videoBoxUnsetBg]:!io}),ref:e=>{eJ(e)},children:[(0,o.jsx)(Z.Q,{skeletonStyle:{background:h},className:d()(c,{[J.inVisible]:eb&&!ey}),imgClass:d()(J.img,v,{[J.imgCover]:el,[J.gaosi]:eh&&!(0,O.G6)()}),skeletonClass:m,src:_,isPreviewing:e8&&io,isSpider:T,alt:R,showImageInSSR:ei,imageReady:ek,onHandleImgLoad:ed,priority:eu,width:ec,height:ev,decoding:em,blurLightCover:eC,withBlurBgPerf:eP,withBlurBg:eN,imgUrlList:(null==M?void 0:null===(l=M.video)||void 0===l?void 0:l.coverUrlList)||[],enableImageX:eR,scrollContainerRef:eA}),io&&!eh&&(!eq||ew)&&(0,o.jsx)(s.SV,{Slardar:(0,B.f5)(),children:(0,o.jsx)(r.Suspense,{fallback:(0,o.jsx)("div",{}),children:(0,o.jsx)(eo,{startTime:eK?e0:void 0,isTopCardActive:ey,needOperateHidden:ex,previewUrlList:x||[],isHorizontal:j,onReady:e7,onLoadedData:es,onEnded:e4,ratio:b/I,fakeHorizontalInfo:y,showProgressBar:Y,ref:e9,logParams:X,awemeInfo:M,appendPlayerConfig:N,container:e$,coverContainer:eW,renderExtension:er,forceContainerCover:el,scene:e_,user:ef,reuseBigCardQuickPlayer:eb,isTopCard:eb,isBigCard:eI,reuseConfig:eD,isShowWatchLater:iu&&eb&&!!(null==eV?void 0:eV.jingxuanCover169),useNewControlIcon:eb&&!!(null==eV?void 0:eV.jingxuanCover169),watchLaterProps:im,enableNote:!0,pip:{show:"discover"===e_,onClick:()=>{null==eB||eB()}}})})}),io&&eq&&(null==er?void 0:er({type:H.e.Note})),(0,O.vU)()&&(null==er?void 0:er()),!io&&(0,o.jsx)("div",{className:d()(J.videoInfo),children:r.Children.toArray(f).map(e=>{var i;if((null==e?void 0:null===(i=e.props)||void 0===i?void 0:i.slot)===1)return e})}),iu&&!(eb&&(null==eV?void 0:eV.jingxuanCover169))&&(0,o.jsx)(z.nf,{awemeInfo:iv,isActive:!0,isPreview:!0,isLogin:null==ef?void 0:ef.isLogin,loginDispatch:null==ef?void 0:ef.dispatch,logParams:ic,toast:e=>ea({text:e,className:eS?J.discoverWatchLaterToast:""}),canCancleWatchLaterOnPreview:eS}),eF&&!eU&&(0,o.jsx)(K,{}),eK&&!eG&&!io&&(0,o.jsx)(et,{onShow:i_,progress:eQ}),eI&&(0,o.jsx)("div",{className:"bigCardQuickPlayerContainer",ref:eX})]}),r.Children.toArray(f).map(e=>{var i;if((null==e?void 0:null===(i=e.props)||void 0===i?void 0:i.slot)===0)return e}),S&&(0,o.jsx)($.W,{req:null==S?void 0:S.web_debug_req,video:null==S?void 0:S.client_rec_debug_info,isLeft:!1,showPanelRightside:!0})]})}),es=l("881155"),eu=l("643728"),ec=l("254897"),ev=l("964374"),em=l("612075"),e_={videoCoverContainer:"UVozwOjM",weeklyRecommendTag:"v8Eq4MV4",topContain:"Rmj61Lln",tag:"U0Kc5fVM",icon:"VzYy3NPA",homeTag:"EnxOJUbc",homeTagText:"Tu_AoxtC",homeTagHot:"FN6VbMH0",homeTagRank:"KXiXPh4W",homeTagContainer:"LTe9QCEO",time:"enTvYUph",likes:"x7P__y2r"};let ef=(0,r.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:10,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsx)("path",{d:"M.616 4.435a.75.75 0 0 1 0-1.292l3.622-2.135a1.5 1.5 0 0 1 1.524 0l3.622 2.135a.75.75 0 0 1 0 1.292L5.762 6.57a1.5 1.5 0 0 1-1.524 0L.616 4.435z",fill:"#fff"}),(0,o.jsx)("path",{d:"M.07 5.785a.5.5 0 0 1 .684-.177l3.738 2.204a1 1 0 0 0 1.016 0l3.738-2.204a.5.5 0 1 1 .508.862L6.016 8.673a2 2 0 0 1-2.032 0L.246 6.47a.5.5 0 0 1-.177-.685z",fill:"#fff"}),(0,o.jsx)("path",{d:"M.754 7.858a.5.5 0 1 0-.508.862l3.738 2.203a2 2 0 0 0 2.032 0L9.754 8.72a.5.5 0 1 0-.508-.862l-3.738 2.204a1 1 0 0 1-1.016 0L.754 7.857z",fill:"#fff"})]}))),eg=(0,r.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsx)("g",{filter:"url(#ic_home_note_svg__filter0_d_3305_2957)",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.917 1.75c-.645 0-1.167.522-1.167 1.167V8.75c0 .644.522 1.167 1.167 1.167H8.75c.644 0 1.167-.523 1.167-1.167V2.917c0-.645-.523-1.167-1.167-1.167H2.917zm2.333 10.5a1.167 1.167 0 0 1-1.167-1.167H8.75a2.333 2.333 0 0 0 2.333-2.333V4.083c.645 0 1.167.523 1.167 1.167v4.667a2.333 2.333 0 0 1-2.333 2.333H5.25z",fill:"#fff"})}),(0,o.jsx)("defs",{children:(0,o.jsxs)("filter",{id:"ic_home_note_svg__filter0_d_3305_2957",x:-1,y:-1,width:16,height:16,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_3305_2957"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_3305_2957",result:"shape"})]})})]}))),eh=(0,r.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsxs)("g",{filter:"url(#ic_home_collect_svg__filter0_d_3305_2200)",fill:"#fff",clipPath:"url(#ic_home_collect_svg__clip0_3305_2200)",children:[(0,o.jsx)("path",{d:"M11.922 5.212a.63.63 0 0 0 .293-.545.631.631 0 0 0-.292-.545L7.275 1.355a.495.495 0 0 0-.511-.001L2.079 4.12a.63.63 0 0 0-.294.544c0 .23.112.44.292.546l4.65 2.774c.16.095.352.096.512 0l4.683-2.773z"}),(0,o.jsx)("path",{d:"M12.145 6.7c.148.297.053.673-.211.839l-4.686 2.937a.495.495 0 0 1-.532 0L2.068 7.582c-.265-.165-.36-.54-.214-.838.147-.298.48-.406.745-.24L6.98 9.231l4.419-2.77c.264-.166.598-.06.745.238z"}),(0,o.jsx)("path",{d:"M11.934 9.872c.264-.166.359-.541.211-.839-.147-.297-.48-.404-.745-.238l-4.42 2.77L2.6 8.835c-.265-.165-.598-.057-.745.241-.147.298-.051.673.214.838l4.648 2.896a.495.495 0 0 0 .532 0l4.686-2.938z"})]}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"ic_home_collect_svg__filter0_d_3305_2200",x:".785",y:".283",width:12.43,height:13.604,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_3305_2200"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_3305_2200",result:"shape"})]}),(0,o.jsx)("clipPath",{id:"ic_home_collect_svg__clip0_3305_2200",children:(0,o.jsx)("path",{fill:"#fff",d:"M0 0h14v14H0z"})})]})]}))),ep=(0,r.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsx)("path",{d:"M1.283 7a2.917 2.917 0 0 1 3.792-2.783.583.583 0 1 0 .35-1.113 4.083 4.083 0 1 0 0 7.793.583.583 0 0 0-.35-1.114A2.917 2.917 0 0 1 1.283 7z",fill:"#fff"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.8 2.917a4.083 4.083 0 1 0 0 8.166 4.083 4.083 0 0 0 0-8.166zM6.883 7a2.917 2.917 0 1 1 5.834 0 2.917 2.917 0 0 1-5.834 0z",fill:"#fff"})]})));var ew=l("327306"),eC=r.memo(e=>{var i,l,t,n,r;let{style:a,className:s,showTag:u,tagName:c,showTime:v,time:m,showLikes:_,likes:f,showIntegrationTag:g,showCooperationTag:h=!0,showHomeNote:p,showHomeCollect:w,showHomeHot:C,awemeInfo:x,scene:I}=e,b=(0,ew._)(),{userInfo:L}=(0,em.useUserContext)(),{uid:j=""}=null!==(n=null==L?void 0:L.info)&&void 0!==n?n:{},k=(0,es.$m)(x,(null==x?void 0:null===(i=x.authorInfo)||void 0===i?void 0:i.uid)===j),T=(0,eu.$)({awemeInfo:x,abTestData:b});return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{style:a,className:d()(e_.videoCoverContainer,s),children:[T&&(0,o.jsx)(eu.n,{scene:"videoCard",className:e_.weeklyRecommendTag,awemeInfo:x}),!T&&(0,o.jsx)(es.zx,{type:k}),!T&&!k&&(0,o.jsxs)("div",{className:d()(e_.topContain),children:[g&&(0,o.jsxs)("div",{className:d()(e_.homeTag),children:[(0,o.jsx)(y.Z,{width:10,height:12,viewBox:"0 0 10 12",src:ef,className:e_.icon}),(0,o.jsx)("span",{className:e_.homeTagText,children:"合集"})]}),u&&c&&(0,o.jsx)("div",{className:d()(e_.tag),children:c}),h&&!g&&!(u&&c)&&!p&&!w&&!C&&Number(null!==(r=null==x?void 0:null===(t=x.cooperationInfo)||void 0===t?void 0:null===(l=t.cooperationCreators)||void 0===l?void 0:l.length)&&void 0!==r?r:0)>1&&(0,o.jsxs)("div",{className:d()(e_.homeTag),children:[(0,o.jsx)(y.Z,{width:14,height:14,viewBox:"0 0 14 14",src:ep,className:e_.icon}),(0,o.jsx)("span",{className:e_.homeTagText,children:"共创"})]})]}),!T&&!k&&(0,o.jsxs)("div",{className:d()(e_.homeTagContainer),children:[p&&(0,o.jsxs)("div",{className:d()(e_.homeTag),children:[(0,o.jsx)(y.Z,{width:14,height:14,viewBox:"0 0 14 14",src:eg,className:e_.icon}),(0,o.jsx)("span",{className:e_.homeTagText,children:"图文"})]}),w&&(0,o.jsxs)("div",{className:d()(e_.homeTag),children:[(0,o.jsx)(y.Z,{width:14,height:14,viewBox:"0 0 14 14",src:eh,className:e_.icon}),(0,o.jsx)("span",{className:e_.homeTagText,children:"合集"})]}),C&&(0,o.jsxs)("div",{className:d()(e_.homeTag,e_.homeTagHot),children:[(0,o.jsx)("span",{className:e_.homeTagText,children:"热榜"}),(0,o.jsx)("span",{className:e_.homeTagRank,children:"TOP"})]})]}),v&&(0,o.jsx)("div",{className:d()(e_.time),children:m}),_&&(0,o.jsxs)("div",{className:d()(e_.likes),children:[(0,o.jsx)(ec.z,{initialMounted:!!E.Le.getConfig(E.gI.isCSRRender),style:"discover"===I?{marginRight:"2px"}:{fontSize:"20px",marginRight:"2px"},svg:(0,o.jsx)(ev.Z,{className:e_.icon})}),(0,o.jsx)("span",{children:f})]})]})})}),ex=l("936681");let eI=(0,r.forwardRef)((e,i)=>(0,o.jsxs)("svg",(0,n._)((0,t._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,o.jsxs)("g",{clipPath:"url(#ic_hot_svg__clip0_3118_121700)",children:[(0,o.jsx)("mask",{id:"ic_hot_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:1,y:-2,width:10,height:14,children:(0,o.jsx)("path",{d:"M1.5-1.05h9.208v8.233a4.516 4.516 0 0 1-4.516 4.516A4.692 4.692 0 0 1 1.5 7.007V-1.05z",fill:"#C4C4C4"})}),(0,o.jsxs)("g",{mask:"url(#ic_hot_svg__a)",children:[(0,o.jsx)("path",{d:"M9.393 3.552c.961 1.062 1.316 2.125 1.316 3.187 0 1.417-.068 1.797 0 1.771-1.859.738-5.123-.93-6.021-3.187-.899-2.258.38-4.25 2.353-5.313.078-.041.126.028.126.133 0 1.638 1.265 2.346 2.226 3.409z",fill:"url(#ic_hot_svg__paint0_linear_3118_121700)"}),(0,o.jsx)("path",{d:"M10.545 8.87c.191-.348.557 1.057.164-1.226.354-1.967-1.142-2.745-2.125-2.321-1.645.708-2.48.708-3.542.354-.69-.23-1.638-.708-1.934-1.77-.329 1.416.66 4.065 2.157 4.964 1.497.898 5.09.348 5.28 0z",fill:"url(#ic_hot_svg__paint1_linear_3118_121700)"}),(0,o.jsx)("path",{d:"M2.775 3.338C2.534 3.58 1.5 4.825 1.5 6.815c0 1.99 1.063 4.884 4.604 4.884 3.542 0 4.931-1.406 5.313-3.255-3.188 1.771-5.656 0-6.021-.354-.9-.872-2.125-2.411-2.338-4.604-.029-.301-.042-.39-.283-.148z",fill:"url(#ic_hot_svg__paint2_linear_3118_121700)"})]})]}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("linearGradient",{id:"ic_hot_svg__paint0_linear_3118_121700",x1:4.536,y1:".278",x2:8.934,y2:6.742,gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{offset:".021",stopColor:"#FADF32"}),(0,o.jsx)("stop",{offset:".451",stopColor:"#EB9B46"}),(0,o.jsx)("stop",{offset:".782",stopColor:"#EB5854"})]}),(0,o.jsxs)("linearGradient",{id:"ic_hot_svg__paint1_linear_3118_121700",x1:3.616,y1:4.788,x2:11.598,y2:9.516,gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#FFC533"}),(0,o.jsx)("stop",{offset:".436",stopColor:"#F26461"}),(0,o.jsx)("stop",{offset:".809",stopColor:"#FF0544"})]}),(0,o.jsxs)("linearGradient",{id:"ic_hot_svg__paint2_linear_3118_121700",x1:9.195,y1:11.126,x2:1.577,y2:4.974,gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{offset:".134",stopColor:"#FA0951"}),(0,o.jsx)("stop",{offset:".354",stopColor:"#FA3E65"}),(0,o.jsx)("stop",{offset:".881",stopColor:"#F2AE49"}),(0,o.jsx)("stop",{offset:".998",stopColor:"#FAC032"})]}),(0,o.jsx)("clipPath",{id:"ic_hot_svg__clip0_3118_121700",children:(0,o.jsx)("path",{fill:"#fff",d:"M0 0h12v12H0z"})})]})]}))),eb=e=>{let{awemeInfo:i,isModalPlayingCurrentVideo:l,onClickPipIcon:t}=e,{isWebMiniWin:n,pipWindow:o,isListenVideoMiniWin:a}=(0,k.Iq)(e=>{let{isWebMiniWin:i,pipWindow:l,isListenVideoMiniWin:t}=e;return{isWebMiniWin:i,pipWindow:l,isListenVideoMiniWin:t}}),d=(0,r.useMemo)(()=>(n||a)&&l,[n,i,l,a]),[s,u]=(0,r.useState)(!1),c=s||d;return(0,r.useEffect)(()=>{if(o){let e=()=>{u(!1)};return o.addEventListener("pagehide",e),()=>{o.removeEventListener("pagehide",e)}}},[o]),(0,r.useEffect)(()=>{!d&&u(!1)},[d]),{isPipPlaying:c,handleClickPipIcon:()=>{u(!0),null==t||t()}}};var ey=l("14108");let eL=(e,i)=>{var l,t,n,o,a,d,s,u,c,v;let m=!!e.authorInfo.roomId,_=(0,r.useMemo)(()=>{var l,t,n,o,r;return{web_rid:null===(n=e.authorInfo)||void 0===n?void 0:null===(t=n.roomData)||void 0===t?void 0:null===(l=t.owner)||void 0===l?void 0:l.web_rid,room_id:null===(o=e.authorInfo)||void 0===o?void 0:o.roomId,request_id:null==e?void 0:e.logPb,anchor_id:null===(r=e.authorInfo)||void 0===r?void 0:r.uid,live_position:i}},[null===(l=e.authorInfo)||void 0===l?void 0:l.uid,null===(o=e.authorInfo)||void 0===o?void 0:null===(n=o.roomData)||void 0===n?void 0:null===(t=n.owner)||void 0===t?void 0:t.web_rid,null===(a=e.authorInfo)||void 0===a?void 0:a.roomId,null==e?void 0:e.logPb,i]);return{isAuthorLiving:m,handleJumpToLiveRoom:(0,r.useCallback)(()=>{var l,t,n,o,r;let a=(0,ey.cc)({anchor_id:null===(n=e.authorInfo)||void 0===n?void 0:null===(t=n.roomData)||void 0===t?void 0:null===(l=t.owner)||void 0===l?void 0:l.id_str,web_rid:null===(r=e.authorInfo.roomData)||void 0===r?void 0:null===(o=r.owner)||void 0===o?void 0:o.web_rid,enter_from_merge:"web_homepage_discover",enter_method:"web_video_card",enter_method_temai:"web_video_card",action_type:"click",room_id:e.authorInfo.roomId,request_id:null==e?void 0:e.logPb,live_position:i,__is_replaced_live__:(null==e?void 0:e.__is_replaced_live__)?"1":"0"});window.open(a,"_blank","noopener")},[null===(u=e.authorInfo)||void 0===u?void 0:null===(s=u.roomData)||void 0===s?void 0:null===(d=s.owner)||void 0===d?void 0:d.id_str,null===(v=e.authorInfo.roomData)||void 0===v?void 0:null===(c=v.owner)||void 0===c?void 0:c.web_rid,e.authorInfo.roomId,null==e?void 0:e.logPb,i]),liveParams:_}};var ej="GqvoOOqQ",ek="gyc_BqdH",eT="vYT08osC";let eE=e=>{let{onClick:i}=e;return(0,o.jsxs)("div",{className:ej,onClick:i,children:[(0,o.jsx)("div",{className:ek,children:(0,o.jsx)(q.default,{size:7})}),(0,o.jsx)("div",{className:eT,children:"正在直播"})]})};var eS=l("128231"),eN=l.n(eS),eP=l("161045");let eR=(e,i)=>i&&1e-4>Math.abs(e/i-16/9),eA=e=>{let{awemeInfo:i,isBigCard:l,scene:t,abTestData:n,ref:o}=e,[a,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{var e,r,a;if("discover"!==t||!l||(null==i?void 0:i.webCardType)||!i.pcBlockedAreaRatio||(null!==(a=null==i?void 0:i.createTime)&&void 0!==a?a:0)*1e3<=17304192e5||!(null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.height)||!(null==i?void 0:null===(r=i.video)||void 0===r?void 0:r.width)||eR(i.video.width,i.video.height))return;let s=eN()(()=>{if(o.current&&i&&i.video){let e=o.current.getBoundingClientRect(),{width:l}=e,t=(null==n?void 0:n.jingxuanCover169)?e.height:e.height-90;if(l/t<i.video.width/i.video.height){let e=i.pcBlockedAreaRatio,n=(1-i.video.height/i.video.width*l/t)/2;if(!e){d(n<.05);return}if(e&&e.length<=5)return;let o=Math.min(null==e?void 0:e[6],100-(null==e?void 0:e[7]))-100*n>=1;d(n<.05&&o)}if(l/t>i.video.width/i.video.height){let e=i.pcBlockedAreaRatio,n=(1-i.video.width/i.video.height*t/l)/2;if(!e){d(n<.05);return}if(e&&e.length<=5)return;let o=Math.min(100-(null==e?void 0:e[8]),null==e?void 0:e[9])-100*n>=1;d(n<.05&&o)}}},0);s();let u=eP.Z.bind(o.current,s);return()=>u()},[t,l,null==i?void 0:i.awemeId,n]),a},eD=(0,c.ZP)(()=>l.e("45937").then(l.bind(l,654402)),{ssr:!1,resolveComponent:e=>{let{More:i}=e;return i}}),eM=e=>{let{hotInfo:i}=e;return(0,o.jsx)("div",{className:d()(F.hotMask),children:(0,o.jsxs)("div",{className:F.hotBottomInfo,children:[(null==i?void 0:i.header)?(0,o.jsxs)("div",{className:F.hotCount,children:[(0,o.jsx)("img",{src:"//p-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/hot.png",alt:"热点icon"}),(0,o.jsx)("span",{className:F.hotText,children:null==i?void 0:i.hotTitle})]}):null,(null==i?void 0:i.footer)?(0,o.jsx)("span",{className:d()(F.hotDuration,F.hotTextHide),children:null==i?void 0:i.footer}):null]})})};var eO=e=>{var i,l,a,c,U,H,G,Y,Z,$,z,W,J,q,X,K,Q,ee,ei,el,et,en;let{style:eo,className:ea,imageClassName:es,imgClass:eu,imageSkeletonClass:ec,imageBoxClassName:ev,cardInfoClassName:em,cardIndex:e_,description:ef,userName:eg,likesCount:eh,videoTime:ep,userHref:ew,userHrefTarget:ey,imgUrl:ej,onClick:ek,onShow:eT,onMouseEnter:eS,onMouseLeave:eN,width:eP=0,height:eR=0,showLikes:eO=!0,fakeHorizontalInfo:eV,previewUrlList:eB,isHorizontal:eF,showIntegrationTag:eU,showHomeNote:eH,showHomeHot:eG,awemeInfo:eY,showHotInfo:eZ,hotInfo:e$,url:ez,isSpider:eW,debugInfo:eJ,appendPlayerConfig:eq,showHighLightTag:eX=!1,isShowCreateTime:eK=!1,isShowDescription:eQ=!0,blurLightCover:e0=!1,isNameFirst:e1=!1,willJump:e2=!1,videoInteractionTags:e3=[],showProgressBar:e5,onVideoPlaying:e6,onVideoStopped:e4,coverMask:e7,onVideoImageMouseEnter:e8,onVideoImageMouseLeave:e9,onLoadedData:ie,tab:ii,videoImageStyle:il,showImageInSSR:it,forceContainerCover:io=!1,renderExtension:ir,useStyleInUserLink:ia=!1,children:id,onCoverLoad:is,videoImageHeight:iu,videoImageWidth:ic,videoImagePriority:iv,decoding:im,scene:i_,user:ig,abTestData:ih,enableNotePreview:ip,needOperateHidden:iw,hasNoFollow:iC,isBigCard:ix=!1,isTopCard:iI=!1,isTopCardActive:ib,topAwemeId:iy,showMore:iL=!1,showWatchLater:ij,logParams:ik,imageReady:iT,enableCardHoverPreview:iE=!1,onMorePopperShow:iS,onMorePopperHidden:iN,withBlurBg:iP,disabledALink:iR,enableImageX:iA,scrollContainerRef:iD,reuseConfig:iM,onClickAiEntry:iO,onClickPipIcon:iV,isModalPlayingCurrentVideo:iB}=e,{isListenVideoMiniWin:iF}=(0,k.Iq)(e=>{let{isListenVideoMiniWin:i}=e;return{isListenVideoMiniWin:i}}),[iU,iH]=(0,r.useState)(!1),iG=(0,r.useRef)(null),iY=(0,r.useRef)(null),[iZ,i$]=(0,r.useState)(eh),[iz,iW]=(0,r.useState)(null!==(et=null===(l=E.Le.getConfig(E.gI.CollectStatusCache))||void 0===l?void 0:null===(i=l[null==eY?void 0:eY.awemeId])||void 0===i?void 0:i.count)&&void 0!==et?et:null==eY?void 0:null===(a=eY.stats)||void 0===a?void 0:a.collectCount),[iJ,iq]=(0,r.useState)(null!==(en=null===(H=E.Le.getConfig(E.gI.FollowStatusCache))||void 0===H?void 0:null===(c=H[null==eY?void 0:null===(U=eY.authorInfo)||void 0===U?void 0:U.uid])||void 0===c?void 0:c.followStatus)&&void 0!==en?en:null==eY?void 0:null===(G=eY.authorInfo)||void 0===G?void 0:G.followStatus),[iX,iK]=(0,r.useState)(!1),[iQ,i0]=(0,r.useState)({cover:{done:!1,success:!1},node:!1}),[i1,i2]=(0,r.useState)(!1),{isPipPlaying:i3,handleClickPipIcon:i5}=eb({awemeInfo:eY,isModalPlayingCurrentVideo:iB,onClickPipIcon:iV}),i6=i1||i3,[i4,i7]=(0,r.useState)(!1),[i8,i9]=(0,r.useState)(!1),le=(0,r.useRef)(0),li=r.useMemo(()=>{var e,i,l;return`/root/live/${null===(l=eY.authorInfo)||void 0===l?void 0:null===(i=l.roomData)||void 0===i?void 0:null===(e=i.owner)||void 0===e?void 0:e.web_rid}`},[null===($=eY.authorInfo)||void 0===$?void 0:null===(Z=$.roomData)||void 0===Z?void 0:null===(Y=Z.owner)||void 0===Y?void 0:Y.web_rid]),ll=r.useCallback(()=>{if(li){var e,i,l,o,r,a,d,s,u;let c=`${li}?${_.stringify((0,n._)((0,t._)({},ik),{anchor_id:null===(l=eY.authorInfo)||void 0===l?void 0:null===(i=l.roomData)||void 0===i?void 0:null===(e=i.owner)||void 0===e?void 0:e.id_str,web_rid:null===(r=eY.authorInfo.roomData)||void 0===r?void 0:null===(o=r.owner)||void 0===o?void 0:o.web_rid,enter_from_merge:"web_homepage_discover",enter_method:"web_video_card",enter_method_temai:"web_video_card",action_type:"click",room_id:eY.authorInfo.roomId,request_id:null==eY?void 0:eY.logPb,live_position:e_,__is_replaced_live__:(null==eY?void 0:eY.__is_replaced_live__)?"1":"0"}))}`;(0,j.X)({href:c,reusePlayer:0,webRid:null===(s=eY.authorInfo)||void 0===s?void 0:null===(d=s.roomData)||void 0===d?void 0:null===(a=d.owner)||void 0===a?void 0:a.web_rid,abtestData:ih,roomId:null===(u=eY.authorInfo)||void 0===u?void 0:u.roomId,usePreCreate:!0})}},[li,ik,null===(J=eY.authorInfo)||void 0===J?void 0:null===(W=J.roomData)||void 0===W?void 0:null===(z=W.owner)||void 0===z?void 0:z.web_rid,null===(K=eY.authorInfo)||void 0===K?void 0:null===(X=K.roomData)||void 0===X?void 0:null===(q=X.owner)||void 0===q?void 0:q.id_str,null===(ee=eY.authorInfo.roomData)||void 0===ee?void 0:null===(Q=ee.owner)||void 0===Q?void 0:Q.web_rid,eY.authorInfo.roomId,null==eY?void 0:eY.logPb]),{isAuthorLiving:lt,handleJumpToLiveRoom:ln,liveParams:lo}=eL(eY,e_,ll);(0,u.C)(T.w3.components.video_card);let lr=(0,r.useMemo)(()=>(null==eY?void 0:eY.createTime)>0?(0,S.MH)((null==eY?void 0:eY.createTime)*1e3):"",[null==eY?void 0:eY.createTime]),la=(0,f.Y)(()=>{g.logInstance.sendLog("postTimeShow",{enter_from:(0,N.mo)(),group_id:eY.awemeId,post_time:lr})});(0,r.useEffect)(()=>{let e=x.a.addCb(e=>{var i,l,t;let{action:n,diggCount:o,awemeId:r,actionUid:a,followStatus:d,collectCount:s}=e;(null==eY?void 0:eY.awemeId)===r&&(i$((0,S.qe)(null!=o?o:null==eY?void 0:null===(l=eY.stats)||void 0===l?void 0:l.diggCount)),iW(null!=s?s:null==eY?void 0:null===(t=eY.stats)||void 0===t?void 0:t.collectCount)),("follow"===n||"unFollow"===n)&&a===(null==eY?void 0:null===(i=eY.authorInfo)||void 0===i?void 0:i.uid)&&iq(d)});return()=>{e()}},[eY]);let ld=(0,m.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!!iI)P.emit(P.EVENT.JingxuanTopCard,{action:"topCardReplace",awemeId:iy,cancelReplace:e})}),ls=(0,f.x)(()=>i0(e=>(0,n._)((0,t._)({},e),{node:!0})));(0,r.useEffect)(()=>{iQ.node&&(null==eT||eT())},[iQ.node,eT]);let lu=(0,r.useCallback)(e=>{let i=void 0===e||e;i0(e=>(0,n._)((0,t._)({},e),{cover:{success:i,done:!0}}))},[ej]);(0,r.useEffect)(()=>{if(!!iQ.cover.done&&!!iQ.node)null==is||is(iQ.cover.success,ej)},[iQ.cover.done,iQ.node,iQ.cover.success,is,ej]);let lc=eX&&(null==eY?void 0:eY.insertId),lv=eX&&(0,R.F)(iJ)&&!lc,lm=eX&&iJ!==h.$u.FollowEach&&iJ!==h.$u.Followed&&!lc&&(null==e3?void 0:e3[0]),l_=()=>{e9&&e9(),null==eN||eN()},lf=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!i6&&iE){let e=D.mouseEnter(ls.current,()=>{var e,i;iE&&(null==lf||null===(i=lf.current)||void 0===i||null===(e=i.enter)||void 0===e||e.call(i))},!0),i=D.mouseLeave(ls.current,()=>{var e,i;iE&&(null==lf||null===(i=lf.current)||void 0===i||null===(e=i.leave)||void 0===e||e.call(i))});return()=>{e(),i()}}},[i6,iE]);let lg=(0,r.useRef)({is_first_large_card_outflow:ix?1:0});lg.current.is_first_large_card_outflow=ix?1:0;let lh=eA({awemeInfo:eY,isBigCard:ix,scene:i_,ref:ls}),{isiPad:lp}=(0,p.X)(),lw="discover"===i_,lC=lw&&!!(null==ih?void 0:ih.themeColorOptimize)&&!ix,lx=(0,r.useCallback)(()=>{i2(!0)},[]),lI=(0,r.useCallback)(()=>{i2(!1)},[]),lb=(0,r.useCallback)(()=>{clearTimeout(le.current),i9(!0)},[]),ly=(0,r.useCallback)(()=>{clearTimeout(le.current),le.current=setTimeout(()=>{i9(!0)},250)},[]),lL=(0,r.useCallback)(()=>{var e,i;i7(!0),null==lf||null===(i=lf.current)||void 0===i||null===(e=i.leave)||void 0===e||e.call(i),iH(!0)},[]),lj=(0,r.useCallback)(()=>{i7(!1),iH(!1)},[]),lk=(0,r.useCallback)(()=>{iH(!0)},[]),lT=(0,r.useMemo)(()=>M.H.newVideoInfo(ih),[ih]),lE=(0,r.useMemo)(()=>({is_first_large_card_outflow:ix?1:0}),[ix]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(I.B,{target:"_blank",rel:`noopener noreferrer${iC?" nofollow":""}`,href:ez,isNeedSeoOpt:!0,className:d()(F.videoCard,ea,{[F.hover]:i8,otherVideoCard:!lw,[F.bigCard]:ix,[F.isBigCardCutVideo]:lh}),style:eo,onClick:e=>{!e2&&e.preventDefault(),null==ek||ek(e),null==l_||l_()},isUseALink:!iR&&(null==eY?void 0:eY.isHighQuality)!==w.HighQualityStatus.NotHighQuality,onMouseEnter:lp?void 0:()=>{clearTimeout(le.current),i9(!0)},onMouseLeave:lp?void 0:()=>{le.current=setTimeout(()=>{i9(!1)},250)},children:[(0,o.jsxs)("div",{ref:ls,className:F.flexColumn,children:[(0,o.jsxs)(ed,{abTestData:ih,onMouseEnter:()=>{e8&&e8(),null==eS||eS(),E.Le.setConfig(E.gI.VideoCardMouseOverTime,Date.now()),g.logInstance.sendLog("coverMouseover",{enter_from_merge:(0,A.yW)(),request_id:null==eY?void 0:eY.logPb,content_sdk:"video",group_id:null==eY?void 0:eY.awemeId,aweme_type:null==eY?void 0:eY.awemeType})},onMouseLeave:l_,className:d()(ev,{[F.report]:lw&&!i4&&i1}),imageClassName:d()(F.videoImg,{[F.imgAspectRatio]:lw},es),imgClass:eu,imageSkeletonClass:ec,imgUrl:ej,debugInfo:(null==eY?void 0:eY.debugInfo)||eJ,width:eP,height:eR,videoImageWidth:ic,videoImageHeight:iu,priority:iv,decoding:im,fakeHorizontalInfo:eV,appendPlayerConfig:eq,previewUrlList:eB,awemeInfo:eY,isHorizontal:eF,onLoadedData:ie,onVideoPlaying:e6,onVideoStopped:e4,onPreviewChange:e=>{e?iK(!0):iK(!1)},showProgressBar:e5,isSpider:eW,alt:(0,O.vU)()?"":ef,style:il,showImageInSSR:it,logParams:(0,t._)({awemeInfo:eY,tab_name:ii||""},ik),forceContainerCover:io,renderExtension:ir,onImgLoad:lu,scene:i_,blurLightCover:e0,user:ig,onRef:e=>iG.current=e,disablePreview:i6,disableByMoreAction:i1,enableNotePreview:ip,needOperateHidden:iw,isBigCard:ix,isTopCard:iI,topAwemeId:iy,showWatchLater:ij,tab:ii,imageReady:iT,ref:lf,enableCardHoverPreview:iE,canCancleWatchLaterOnPreview:lw,withBlurBg:iP,withBlurBgPerf:lw,enableImageX:iA,scrollContainerRef:iD,reuseConfig:iM,showAiEntry:lw,onClickAiEntry:iO,onClickPipIcon:i5,isPipPlaying:i3,dislikeCoverVisible:i4,isTopCardActive:ib,useOuterProgress:lC,forceHiddenOuterProgress:iU,children:[(0,o.jsx)(e=>(0,o.jsx)("div",{className:d()(F.coverBg)}),{slot:er.Inner}),!i6&&(0,o.jsx)(eC,{scene:i_,showIntegrationTag:eU,showTime:!eH,showLikes:eO,likes:iZ,time:ep,slot:er.Inner,awemeInfo:eY,showHomeNote:eH}),eZ&&e$&&!iX&&(0,o.jsx)(eM,{slot:er.OutSide,hotInfo:e$}),(0,o.jsx)(e=>e7?(0,o.jsx)("div",{className:d()(F.coverMask),children:e7}):null,{slot:er.OutSide})]}),(0,o.jsx)("div",{className:d()(F.cardInfo,em),ref:iY,children:(0,o.jsxs)("div",{className:d()(F.cardInfoContainer,{[F.transparent]:lw&&i1}),children:[eQ&&!e1&&(0,o.jsx)("div",{className:d()(F.decs),children:ef}),(0,o.jsxs)("div",{className:d()(F.userText,{[F.bottom]:e1}),onClick:e=>{if(lt){ll(),e.preventDefault(),e.stopPropagation();return}},children:[lw?(0,o.jsxs)("span",{className:F.userTextContent,onClick:e=>{var i;if(iF&&v.T.exit(),e.preventDefault(),e.stopPropagation(),lt){ll();return}null===(i=window)||void 0===i||i.open(ew,(0,V.DT)()?"_blank":ey,"noopener")},children:[(0,o.jsxs)("span",{className:d()(F.text,{[F.marginRight]:!lv&&!lm&&!lc&&!eK}),children:["@",(0,o.jsx)("span",{className:F.userName,children:eg})]}),eK&&!lt&&!lm&&!lc&&!lv&&(0,o.jsxs)("span",{className:d()(F.createTime,{[F.hasMarginRight]:iL}),ref:la,children:["\xa0\xb7\xa0",lr]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{onClick:e=>{var i;if(iF&&v.T.exit(),e.preventDefault(),e.stopPropagation(),lt){ll();return}null===(i=window)||void 0===i||i.open(ew,(0,V.DT)()?"_blank":ey,"noopener")},className:d()(F.text,{[F.marginRight]:!lv&&!lm&&!lc&&!eK}),children:[(0,o.jsx)("span",{className:d()(F.at),children:"@"}),(0,o.jsx)("span",{className:d()(F.userName),children:eg})]}),eK&&!lt&&!lm&&!lc&&!lv&&(0,o.jsx)("span",{className:d()(F.createTime,{[F.hasMarginRight]:iL}),ref:la,children:` \xb7 ${lr}`})]}),(lv||lc)&&(0,o.jsx)(ex.R,{abTestData:ih,className:d()(lt?F.highlightTagWithoutMarginRight:F.highlightTag,{[F.jxThemeColor]:lw&&!!(null==ih?void 0:ih.themeColorOptimize)}),type:lc?"recommended":"follow"}),lm&&(0,o.jsx)(ex.R,{abTestData:ih,className:d()(F.highlightTag,{[F.jxThemeColor]:lw&&!!(null==ih?void 0:ih.themeColorOptimize)}),type:e3[0],count:{collect:iz,comment:null==eY?void 0:null===(ei=eY.stats)||void 0===ei?void 0:ei.commentCount}[e3[0]]||0}),lt&&(0,o.jsx)(eE,{onClick:e=>{e.preventDefault(),e.stopPropagation(),g.logInstance.sendLog("liveCardClickEvent",(0,t._)({enter_method:"web_video_card",enter_from_merge:"web_homepage_discover",action_type:"click"},lo));let i=b.e.getPipWindow({scene:C.d.ListenVideo})||b.e.getPipWindow({scene:C.d.WebVideo});i&&i.close(),ll()}}),iL&&(0,o.jsx)(s.SV,{Slardar:(0,B.f5)(),children:(0,o.jsx)(eD,{awemeInfo:eY,className:F.more,cardInfoContainerRef:iY,imageContainerRef:iG,onCoverHover:lT?lx:()=>i2(!0),onCoverCancelHover:lT?lI:()=>i2(!1),user:ig,tab:ii,onMouseEnter:lT?lb:()=>{clearTimeout(le.current),i9(!0)},onMouseLeave:lT?ly:()=>{clearTimeout(le.current),le.current=setTimeout(()=>{i9(!0)},250)},logParams:lT?lE:lg.current,enableCardHoverPreview:iE||lw,onPopperShow:iS,onPopperHidden:iN,onDislikeCoverShow:lT?lL:()=>{var e,i;i7(!0),null==lf||null===(i=lf.current)||void 0===i||null===(e=i.leave)||void 0===e||e.call(i),iH(!0)},onDislikeCoverHidden:lT?lj:()=>{i7(!1),iH(!1)},onReportCoverShow:lT?lk:()=>{iH(!0)},onReplaceTopCard:ld})})]}),eQ&&e1&&(0,o.jsx)("div",{className:d()(F.decs),children:ef}),eG&&(0,o.jsxs)("div",{className:F.barContainer,children:[(0,o.jsx)(y.Z,{className:F.barIcon,width:12,height:12,viewBox:"0 0 12 12",src:eI}),(0,o.jsxs)("span",{className:F.barText,children:["热榜：",null==eY?void 0:null===(el=eY.hotList)||void 0===el?void 0:el.title]})]})]})})]}),id]}),eW&&(0,o.jsx)(L.a,(0,n._)((0,t._)({style:ia?(0,n._)((0,t._)({},eo),{width:"auto",height:"auto"}):{},href:ew,target:"_blank",isNeedSeoOpt:!0},iC?{rel:"nofollow"}:{}),{children:eg}))]})}},252122:function(e,i,l){l.r(i),l.d(i,{default:function(){return tD}}),l("874386"),l("250440"),l("882732"),l("544943");var t=l("563097"),n=l("88648"),o=l("553542"),r=l("465571"),a=l("35385"),d=l("317914"),s=l("782563"),u=l("616520"),c=l("89435"),v=l("392323"),m=l("297769"),_=l("520739"),f=l("878389");l("675373"),l("50013"),l("268917");var g=l("567754"),h=l("713097"),p=l.n(h),w=l("309931"),C=l("909543"),x=l("747909"),I=l("338426"),b=l("134761"),y=l("581708"),L=l("948375"),j=l("172589"),k=l("56906"),T=l("651019"),E=l("77711");let S=(0,n.createContext)(null);class N{updateState(e,i){if(void 0!==e.container&&(this.container=e.container),void 0!==e.playParams){var l,t;this.playParams=(0,f._)((0,_._)({},this.playParams,e.playParams),{playerConfig:(0,f._)((0,_._)({},null===(l=this.playParams)||void 0===l?void 0:l.playerConfig,null===(t=e.playParams)||void 0===t?void 0:t.playerConfig),{onPlay:()=>{var i,l;this.isPlaying=!0,null===(l=e.playParams.playerConfig)||void 0===l||null===(i=l.onPlay)||void 0===i||i.call(l)},onPause:()=>{var i,l;this.isPlaying=!1,null===(l=e.playParams.playerConfig)||void 0===l||null===(i=l.onPause)||void 0===i||i.call(l)},onEnd:()=>{var i,l;this.isPlaying=!1,null===(l=e.playParams.playerConfig)||void 0===l||null===(i=l.onEnd)||void 0===i||i.call(l)}})})}void 0!==e.isPlaying&&(this.isPlaying=e.isPlaying),null==i||i(),this.lastUsed=Date.now()}clearVideoClasses(){var e,i,l;let t=null===(l=this.ref)||void 0===l?void 0:null===(i=l.current)||void 0===i?void 0:null===(e=i.getPlayer)||void 0===e?void 0:e.call(i);(null==t?void 0:t.video)&&(t.video.className="")}assignTo(e,i){this.updateState({container:e,playParams:i,isPlaying:!0},void 0)}release(){this.updateState({container:null,playParams:null,isPlaying:!1},void 0)}isAvailable(){return null===this.container}pause(){this.updateState({isPlaying:!1},()=>{var e,i;let l=null===(e=this.ref.current)||void 0===e?void 0:e.getPlayer();null==l||null===(i=l.pause)||void 0===i||i.call(l)})}play(){this.updateState({isPlaying:!0},()=>{var e,i,l;let t=null===(e=this.ref.current)||void 0===e?void 0:e.getPlayer();null==t||null===(i=t.resetState)||void 0===i||i.call(t),null==t||null===(l=t.play)||void 0===l||l.call(t).catch(()=>{})})}constructor(e){(0,b._)(this,"id",void 0),(0,b._)(this,"container",void 0),(0,b._)(this,"playParams",void 0),(0,b._)(this,"isPlaying",void 0),(0,b._)(this,"lastUsed",void 0),(0,b._)(this,"ref",void 0),this.id=e,this.container=null,this.playParams=null,this.isPlaying=!1,this.lastUsed=Date.now(),this.ref=n.createRef()}}class P{addActiveListener(e){this.activeListeners.add(e)}removeActiveListener(e){this.activeListeners.delete(e)}notifyActiveChange(){let e=this.getActiveInstances();this.activeListeners.forEach(i=>i(e))}getInstanceByContainer(e){return this.instances.find(i=>i.container===e)}assignInstance(e,i){let l=this.getInstanceByContainer(e);if(l)return l.clearVideoClasses(),l.assignTo(e,i),this.notifyActiveChange(),l;let t=this.instances.find(e=>e.isAvailable());if(t)return t.clearVideoClasses(),t.assignTo(e,i),this.notifyActiveChange(),t;let n=new N(`player_${Date.now()}`);return n.assignTo(e,i),n.clearVideoClasses(),this.instances.push(n),this.notifyActiveChange(),n}pause(e){let i=this.getInstanceByContainer(e);i&&i.pause()}release(e){let i=this.getInstanceByContainer(e);i&&(i.release(),this.notifyActiveChange())}getActiveInstances(){return this.instances.filter(e=>!e.isAvailable())}cleanupIdleInstances(){let e=Date.now();this.instances=this.instances.filter(i=>(!i.isAvailable()||!(e-i.lastUsed>3e4))&&!0)}startCleanupTimer(){!this.cleanupInterval&&(this.cleanupInterval=setInterval(()=>{this.cleanupIdleInstances()},1e4))}stopCleanupTimer(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null)}clearAll(){this.instances=[],this.stopCleanupTimer(),this.notifyActiveChange()}constructor(){this.instances=[],this.cleanupInterval=null,this.activeListeners=new Set}}let R=(0,n.memo)(e=>{let{playerPool:i,instance:l,plugins:o}=e,{container:r,playParams:a,ref:d}=l,{playerConfig:s,style:u,pluginSchema:c={}}=a||{};n.useRef(0);let v=n.useRef(!1);return(n.useEffect(()=>{var e,i,l,t,n,o,a;!(null==d?void 0:null===(t=d.current)||void 0===t?void 0:null===(l=t.getPlayer())||void 0===l?void 0:null===(i=l._core)||void 0===i?void 0:null===(e=i._src)||void 0===e?void 0:e.includes(null==s?void 0:s.url))&&!v.current&&r&&(v.current=!0,null==d||null===(a=d.current)||void 0===a||null===(o=a.getPlayer())||void 0===o||null===(n=o.retry)||void 0===n||n.call(o))},[r]),r&&a)?(0,w.createPortal)((0,t.jsx)(n.Fragment,{children:(0,t.jsxs)(y.N,(0,f._)((0,_._)({className:"liveCardPlayer",style:(0,_._)({height:"100%"},u),ref:e=>{d.current={getPlayer:()=>null==e?void 0:e.player,getPlayerLogger:()=>null==e?void 0:e.logger}},role:"consumer",scene:"LiveCardPlayer"},s),{children:[c&&Object.entries(c).map(e=>{let[i,l]=e,n=o[i];return n?(0,t.jsx)(n,(0,_._)({},l.props),i):null}),(0,t.jsx)(E.h,{source:"LiveCardPlayer"})]}))},l.id),r):null}),A=(0,n.memo)(e=>{let{playerPool:i,plugins:l}=e,[o,r]=(0,n.useState)([]);return(0,n.useEffect)(()=>{let e=e=>{r(e)};return i.addActiveListener(e),r(i.getActiveInstances()),()=>{i.removeActiveListener(e)}},[i]),(0,t.jsx)(t.Fragment,{children:o.map(e=>(0,t.jsx)(n.Fragment,{children:(0,t.jsx)(R,{playerPool:i,instance:(0,_._)({},e),plugins:l})},`${e.id}`))})}),D=e=>{let{children:i}=e,l=(0,n.useRef)(new P),o=(0,n.useRef)({VipLiveBoundaryPlugin:j.VipLiveBoundaryPlugin,LinkMicPreviewPlugin:k.$,AdaptedBySEIPlugin:T.AdaptedBySEIPlugin});(0,n.useEffect)(()=>(l.current.startCleanupTimer(),()=>l.current.stopCleanupTimer()),[]);let r=(0,L.Z)(e=>{o.current=(0,_._)({},o.current,e)}),a=(0,L.Z)((e,i)=>e?l.current.assignInstance(e,i):null),d=(0,L.Z)(e=>{try{l.current.pause(e),l.current.release(e)}catch(e){}}),s=(0,L.Z)(e=>l.current.getInstanceByContainer(e)),u=(0,L.Z)(()=>{l.current.clearAll()});(0,n.useEffect)(()=>()=>{u()},[]);let c=(0,n.useMemo)(()=>({play:a,pause:d,getInstance:s,clearAllPlayers:u,plugins:o.current,registerPlugin:r}),[]);return(0,t.jsxs)(S.Provider,{value:c,children:[i,(0,t.jsx)(A,{playerPool:l.current,plugins:o.current})]})};var M=l("222406"),O=l("916956"),V=l("598467"),B=l("147613"),F=l("720359"),U=l("823685"),H=l("452894"),G=l("205457"),Y=l("53289"),Z=l("301061"),$=l("782442"),z=l("637005"),W=l("30321"),J=l("801849"),q=l("913807"),X=l("431811"),K=l("708034"),Q=l("424944"),ee=l("734017"),ei=l("385976"),el=l("475343"),et=l("901414"),en=l("870105"),eo=l("650963"),er=l("988634");let ea=()=>Promise.all([l.e("92432"),l.e("97718"),l.e("16970")]).then(l.bind(l,79383)),ed=(0,n.forwardRef)(function(e,i){return(0,t.jsx)(er.o,(0,_._)({innerRef:i,id:"island_79fa5",load:ea},e))});var es=l("273329"),eu=l("75791"),ec={waterfallPage:"J3t3MiSx",waterfallPageWithSubTab:"lg5aZGLT",topicPage:"yw47L6dp",topicPageWithDiscoverCardOptimize:"ENZJYd9Y",feedTitle:"VjU1fbw5",wrapperMarin:"T1Z8UGmI",bannerContainer:"wJYo7lH3",tabs:"NBzonCuX",switchBtn:"DCiV3oEY",hasTabExpand:"zSXa7kMD",hasSubList:"ekig2YD4",jxThemeColor:"vIoCbNLX",tabPanelCt:"_IHwSGRR",discoverTabBar:"Udp77Cqy",subTabStickyContainer:"z4HYz8IX",subTag:"JzQoT6Su",active:"nxoIfbTv",loadingContainer:"sIvwyIT6",hidden:"IBffRJCQ"},ev=l("419105");l("237819"),l("819117");var em=l("729532"),e_=l("738363"),ef=l("459633"),eg=l("811183"),eh=l("682644"),ep=l("295471");l("110006"),l("826893");var ew=l("456128"),eC=l("649368"),ex=l("88961"),eI=l("544933");let eb=new eI.h({subTabLiveShow:{eventName:"discover_sub_tab_live_show",params:{order:0,link:"",id:"",title:""}},subTabLiveClick:{eventName:"discover_sub_tab_live_click",params:{order:0,link:"",id:"",title:""}}});var ey="d39TlVx6",eL="DYLEJdv_",ej="ticjC6SX",ek="CCF1EZHU",eT="mXDA3PHe",eE="zFkGFrJ1",eS="ZKoWQCVw",eN="eAblXhYC",eP="fclP7dde",eR="FEv4lfuG";let eA=e=>{let{cardLiveInfo:i,cardStyle:l}=e,{live_title:o,live_cover:r,live_btn:a,live_link:d,live_idx:s}=i||{},[u,c]=function(e){let[i,l]=(0,ex.Z)(),t=(0,n.useRef)(!1);return!t.current&&l&&(e&&e(),t.current=!0),[i,l]}(()=>{var e,i;eb.sendLog("subTabLiveShow",{title:o,link:d,order:s,id:null==d?void 0:null===(i=d.match)||void 0===i?void 0:null===(e=i.call(d,/\d+/))||void 0===e?void 0:e[0]})}),v=e=>{var i,l;window.open(e,"_blank","noopener"),eb.sendLog("subTabLiveClick",{title:o,link:e,order:s,id:null==e?void 0:null===(l=e.match)||void 0===l?void 0:null===(i=l.call(e,/\d+/))||void 0===i?void 0:i[0]})};return(0,t.jsxs)("div",{className:p()(ey,{[eR]:"with-background"===l}),onClick:e=>{e.stopPropagation(),v(d)},ref:u,children:[(0,t.jsx)("div",{className:eL,children:(0,t.jsx)(ew.Q,{imgClass:eT,className:ek,src:r,iconWidth:24,iconHeight:28,showImageInSSR:!1,imageReady:!0,skeletonClass:ej})}),(0,t.jsxs)("div",{className:eE,children:[(0,t.jsx)("div",{className:eS,onClick:e=>{e.stopPropagation(),v(d)},children:o}),(0,t.jsx)("div",{className:eN,children:(0,t.jsxs)("span",{className:eP,onClick:e=>{e.stopPropagation(),v(d)},children:[a,(0,t.jsx)(eC.Z,{})]})})]})]})};var eD={CardAd:"card_ad",SubTabLive:"sub_tab_live"};l("284961");var eM=l("128231"),eO=l.n(eM),eV=l("746864"),eB=l("77726"),eF=l("831202"),eU=l("367366"),eH=l("123869"),eG=l("76267"),eY=l("124885"),eZ=l("380755"),e$=l("902845"),ez={waterfallWrapper:"y5ITbwZt",noScrollParent:"xtJZF6iO",waterfallContainer:"priTOakK",skeletonContainer:"sz5zXBaj",item:"Xyhun5Yc",contentVisible:"G7eFnmxX",emptyItem:"pAWPzs6W",placeHolder:"jXX0YrFq",imgBox:"kYbKtTlb",infoBox:"URyB53nF",opBtn:"qUv8LssR",noMoreText:"LKdPHpfD"};let eW=e_.ERROR_CODE,eJ=e=>{let{statusCode:i,isGaiaTab:l}=e;if(l)return(0,t.jsx)(e$.nl,{title:"活动已下线"});switch(i){case eW.ERROR_404:return(0,t.jsx)(e$.dR,{title:"暂无更多数据",desc:" "});case eW.ERROR_502:case eW.ERROR_NO_NETWORK:return(0,t.jsx)(e$.oO,{});default:return(0,t.jsx)(e$.nl,{})}},eq=e=>{let{reload:i,statusCode:l,className:n}=e,o=l===eW.ERROR_502?"超时":"异常";return(0,t.jsxs)("div",{className:p()(ez.noMoreText,n),children:["服务",o,"，重新",(0,t.jsx)("span",{onClick:i,className:ez.opBtn,children:"刷新"}),"拉取数据"]})};var eX=l("372311"),eK=e=>{let{containerClassName:i}=e,l=(0,n.useMemo)(()=>Array(60).fill({id:"skeleton"}),[]);return(0,r.C)(d.w3.components.discover_skeleton_component),(0,t.jsx)("div",{className:p()(ez.waterfallContainer,ez.skeletonContainer,i),children:l.map((e,i)=>(0,t.jsx)("div",{className:p()(ez.item),children:(0,t.jsx)(eX.P,{className:ez.placeHolder,imgBoxClassName:ez.imgBox,infoBoxClassName:ez.infoBox,useNewLogo:!0})},`${null==e?void 0:e.id}_${i}`))})},eQ={LOADING:0,0:"LOADING",SUCCESS:1,1:"SUCCESS",FAILED:2,2:"FAILED"},e0={LOADING:0,0:"LOADING",SUCCESS:1,1:"SUCCESS",FAILED:2,2:"FAILED"};let e1=4/3;var e2=n.forwardRef((e,i)=>{let{renderItem:l,fetchStatus:o,showDataList:a,containerClassName:s,statusCode:u,onload:c,update:v,reload:m,onCoverShow:_,abTestData:f={},setLoadingElement:g,setWaterfallContainer:h,showReplaceLoading:w}=e,C=(0,n.useRef)(!1),x=(0,n.useRef)(0),[I,b]=(0,n.useState)(0);return(0,r.C)(d.w3.components.discover_success_component),(0,n.useEffect)(()=>{(null==f?void 0:f.discoverTaskOptimize)||b(a.length),a.length&&!C.current&&(C.current=!0,null==c||c())},[a,c,f]),(0,n.useEffect)(()=>{let e=(null==f?void 0:f.discoverTaskOptimize)?a.length:I;e!==x.current&&(x.current=e,null==v||v())},[I,v,a,f]),(0,t.jsxs)(G.k,{componentName:"SuccessComponent",children:[(0,t.jsx)("div",{className:p()(ez.waterfallContainer,s),ref:e=>{i.current=e,h(e)},children:null==a?void 0:a.map((e,n)=>{var o,r,d;let{id:s,displayId:u,render:c,inView:v}=e,m=(null==a?void 0:null===(o=a[0])||void 0===o?void 0:o.isTopCard)?null==a?void 0:null===(r=a[0])||void 0===r?void 0:r.awemeId:"";return(0,t.jsx)("div",{className:p()(ez.item,"discover-video-card-item",ez.contentVisible,{[ez.emptyItem]:!v}),id:s,"data-aweme-id":null!==(d=null==e?void 0:e.awemeId)&&void 0!==d?d:"",style:{backgroundColor:e.bgColor},children:v?c?null==c?void 0:c(e):null==l?void 0:l(e,_,void 0,n,i,m):null},u||s)})}),(0,t.jsx)("div",{ref:e=>{e&&(null==g||g(e))},children:!w&&o===e0.LOADING&&(0,t.jsx)(Z.gb,{})}),o===e0.FAILED&&(0,t.jsx)(eq,{reload:m,statusCode:u})]})});l("527785");var e3=l("507217"),e5=new eI.h({waterfallSlideFeatureV2:{eventName:"waterfall_slide_feature_v2",params:{velocity:0}},waterfallSlideFeature:{eventName:"waterfall_slide_feature",params:{duration:0}},discoverSlide:{eventName:"discover_slide",params:{tab_name:"",sub_tab_name:"",direction:"down",gid_list:"",visit_id:""}},waterfallProcessStat:{eventName:"waterfall_process_stat",params:{enter_from:"",from:"",skeleton_show_time:0,waterfall_fetch_end:0,first_img_load_time:0,init_duration:0,data_duration:0,cover_duration:0}},waterfallLoadmoreStat:{eventName:"waterfall_loadmore_stat",params:{enter_from:"",duration:0}}});e3.FastSlowFeature.slow,e3.FastSlowFeature.fast;let e6={[e3.FastSlowFeature.normal]:150,[e3.FastSlowFeature.fast]:220};class e4{calcHeight(e){let i=this.scrollParentEl||this.waterfallWrapperRef.current;if(i){let{scrollTop:l}=i;if(!e){let e=l-this.preTop,i=Date.now()-this.preTime;this.addSimple({velocity:Math.abs(e/i*1e3)})}this.preTop=l,this.preTime=Date.now()}}onScroll(){this.calcHeight(!1)}init(){let e=this.scrollParentEl||this.waterfallWrapperRef.current;this.onScrollHandler=eO()(()=>{this.onScroll()},200),null==e||e.addEventListener("scroll",this.onScrollHandler),this.calcHeight(!0)}sendLog(){this.queue.length>=this.coldStartNumberThreshold&&e5.sendLog("waterfallSlideFeatureV2",{velocity:this.getFeatureVal()})}getFeatureType(){return this.featureType||e3.FastSlowFeature.normal}calcFeatureType(){let e;if(this.queue.length<this.coldStartNumberThreshold)return;let i=this.getFeatureVal();e=i>=e6[e3.FastSlowFeature.fast]?e3.FastSlowFeature.fast:i>=e6[e3.FastSlowFeature.normal]&&i<e6[e3.FastSlowFeature.fast]?e3.FastSlowFeature.normal:e3.FastSlowFeature.slow,this.featureType=e,$.Le.setConfig($.gI.HomeFastSlowSlideFeature,e)}addSimple(e){if(!((null==e?void 0:e.velocity)<0))this.queue.length>=this.maxCacheCount&&this.deleteSimple(),this.queue.push(e),this.calcFeatureType(),this.sendLog()}deleteSimple(){this.queue.shift()}clearSimple(){this.queue=[]}getFeatureVal(){return this.queue.reduce((e,i)=>e+=i.velocity,0)/this.queue.length}destroy(){this.clearSimple();let e=this.scrollParentEl||this.waterfallWrapperRef.current;null==e||e.removeEventListener("scroll",this.onScrollHandler),this.onScrollHandler=null}constructor(e){(0,b._)(this,"maxCacheCount",void 0),(0,b._)(this,"coldStartNumberThreshold",void 0),(0,b._)(this,"queue",[]),(0,b._)(this,"timer",void 0),(0,b._)(this,"preTime",void 0),(0,b._)(this,"preTop",void 0),(0,b._)(this,"scrollParentEl",void 0),(0,b._)(this,"waterfallWrapperRef",void 0),(0,b._)(this,"featureType",e3.FastSlowFeature.normal),(0,b._)(this,"onScrollHandler",void 0);let{maxCacheCount:i,scrollParentEl:l,waterfallWrapperRef:t}=e;this.scrollParentEl=l,this.waterfallWrapperRef=t,this.maxCacheCount=i,this.coldStartNumberThreshold=2,this.preTop=0,this.preTime=0,this.onScroll=this.onScroll.bind(this)}}let e7=e=>{let{scrollParentEl:i,waterfallWrapperRef:l,abTestData:t}=e,o=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e,n;return(null==t?void 0:null===(e=t.homeFastSlowSlide)||void 0===e?void 0:e.isOpen)?(o.current=new e4({maxCacheCount:5,scrollParentEl:i,waterfallWrapperRef:l}),null===(n=o.current)||void 0===n||n.init(),()=>{var e;null==o||null===(e=o.current)||void 0===e||e.destroy(),o.current=null}):()=>{}},[t,i,l])},e8=(e,i)=>{if(e){let{scrollTop:l,clientHeight:t,scrollHeight:n}=e;return l+t+i>n&&t>0}return!1},e9=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.filter((e,t)=>!(i.find(i=>i.id===e.id)||i.find(i=>i.awemeId===e.awemeId))&&(e.displayId=`${e.id}_${Date.now()}_${t}`,e.awemeType===eV.e.LiveCard&&(e.width=240,e.height=320),l&&e.awemeType===eV.e.Note&&(e.width=320,e.height=240,e.video.width=320,e.video.height=240),e.height&&e.width||e.ratio))},ie=e=>{let i=[],l=[];null==e||e.forEach(e=>{e.awemeType===eV.e.LiveCard?i.push(e):l.push(e)});let t=i.map(e=>e.awemeId),n=i.map(e=>e.encodedAwemeId).filter(e=>void 0!==e),o=l.map(e=>e.awemeId);return{liveIds:t,liveEncodedIds:n,ids:o,encodedIds:l.map(e=>e.encodedAwemeId).filter(e=>void 0!==e)}};var ii=l("877639"),il=l.n(ii);l("950331"),l("429532"),l("981168"),l("927234");let it=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===i)return;let l=e[i];e.splice(i,1),e.unshift(l)},io=e=>[eV.e.NewNormal,eV.e.Normal].includes(e.awemeType),ir=e=>e.findIndex(io),ia=e=>{var i,l,t,n;return e.webCardType?3:io(e)&&(null==e?void 0:null===(i=e.video)||void 0===i?void 0:i.height)&&(null==e?void 0:null===(l=e.video)||void 0===l?void 0:l.width)&&(null==e?void 0:null===(t=e.video)||void 0===t?void 0:t.width)>(null==e?void 0:null===(n=e.video)||void 0===n?void 0:n.height)?1e-4>Math.abs(e.video.width/e.video.height-16/9)?2:1:0},id=e=>{let i=0,l=-1;return e.forEach((e,t)=>{if(3===i)return;let n=ia(e);n>i&&(l=t,i=n)}),l},is=(e,i)=>{var l;if(!(null==e?void 0:null===(l=e.awemeList)||void 0===l?void 0:l.length))return[];let t=e.awemeList.map(e=>Object.assign({},e,{inView:!0}));if(1===i){let e=ir(t);e>=0&&(it(t,e),t[0].isTopCard=!0)}else if(2===i){let e=id(t);e>=0&&(it(t,e),t[0].isTopCard=!0,t[0].isBigCard=!0)}return t};var iu=l("237652"),ic=l("349135"),iv=l("497730");l("413806");let im=e=>{if(e.watchLaterInfo){var i,l,t;let{list:n=""}=null!==(i=$.Le.getConfig($.gI.WatchLater))&&void 0!==i?i:{};if(!(n&&n.includes(e.awemeId))){let i=null!==(l=$.Le.getConfig($.gI.WatchLater))&&void 0!==l?l:{},n=null!==(t=i.list)&&void 0!==t?t:"",o=Array.from(new Set([...n?n.split(","):[],e.awemeId]));$.Le.setConfig($.gI.WatchLater,(0,f._)((0,_._)({},i),{list:o.join(",")}))}}},i_=e_.ERROR_CODE;function ig(e){var i,l,o,a;let{awemeIdsRef:u,fetchMore:c,fetchMoreDistance:m=3600,renderItem:f,abTestData:g,containerClassName:h,onListLoad:C,onError:x,children:I,scrollParentEl:b,scrollListenerEl:y=b,className:j,perfProps:k,firstBigCard:T=!1,isGaiaTab:E=!1,tagId:S,selectedTab:N,setLoadingElement:P,setShowReplaceLoading:R,showReplaceLoading:A}=e,[D,M]=(0,n.useState)(eQ.LOADING),[V,U]=(0,n.useState)(e0.LOADING),[H,G]=(0,n.useState)(0),Y=(0,n.useRef)(""),Z=(0,n.useRef)(null),[W,J]=(0,n.useState)(null),X=(0,F.d)(g),K=(0,F.d)(null==g?void 0:g.jingxuanModalAds),{homeFetchData:Q,updateSubTabLiveCardList:ee,updateFeedCardAdResourceList:ei}=(0,eZ.useDiscoverCommonContext)((0,eo.P1)(["homeFetchData","updateFeedCardAdResourceList","updateSubTabLiveCardList"])),el=(0,n.useRef)([]),et=(0,n.useRef)([]),er=(0,n.useRef)([]),ea=(0,n.useRef)((null==Q?void 0:Q.isCourse)&&null!==(l=null==Q?void 0:Q.offset)&&void 0!==l?l:0),ed=(0,n.useRef)(0),es=(0,n.useRef)(!1),eu=(0,n.useRef)(e0.LOADING),ec=(0,n.useRef)(!1),ev=(0,n.useRef)(!0),em=(0,n.useRef)(null),e_=(0,n.useRef)(!1),ef=(0,n.useRef)(!1),eg=(0,n.useRef)(!1),eh=(0,n.useRef)(null),{showDataList:ep,isTopBigCard:ew,resetTopAweme:eC,renderList:ex,showAwemeList:eI,fetchDataListRef:eb,canLiveAutoPlay:ey,needReplaceTopCardRef:eL,onReplaceBigCard:ej,clearNeedReplaceTopCard:ek,topCardAb:eT}=function(e){var i,l,t;let{abTestData:o,selectedTab:r,isGaiaTab:a,tagId:d,scrollListenerEl:u,waterfallContainer:c,awemeIdsRef:v}=e,m=(0,F.d)(u),f=(0,n.useRef)({scrollHeight:0,scrollWidth:0,columnCount:0,itemHeight:0,itemWidth:0}),g=(null==o?void 0:o.jingxuanCover169)?1536:1850,h=(0,n.useRef)(!0),p=(0,n.useRef)(!1),w=(0,en.U)(),C=(0,F.d)(w),x=(0,n.useRef)(0),I=(0,n.useRef)(!1),{homeFetchData:b,finalFeedCardAdListMap:y,activeSubTab:j}=(0,eZ.useDiscoverCommonContext)((0,eo.P1)(["homeFetchData","finalFeedCardAdListMap","activeSubTab"])),k=(0,n.useMemo)(()=>(null==o?void 0:o.jingxuanCover169)?24:20,[null==o?void 0:o.jingxuanCover169]),[T]=(0,n.useState)(null!==(t=null==o?void 0:o.jxTopCard)&&void 0!==t?t:0),E=is(b,T),S=(0,n.useRef)(E),[N,P]=(0,n.useState)(E),R=(0,n.useRef)(T>0&&(!((null==E?void 0:E.length)>0)||(null===(i=E[0])||void 0===i?void 0:i.isTopCard))),A=(0,n.useRef)(2===T),[D,M]=(0,n.useState)(2===T),V=(0,n.useRef)(!1),[U,H]=(0,n.useState)(0===T||!R.current),G=(0,n.useRef)(!0),Y=(0,n.useMemo)(()=>(null==y?void 0:y[r])||[],[y,r]),Z=(0,L.Z)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!m.current||!p.current||!c)return;let i=c.children[1],{height:l,width:t}=m.current.getBoundingClientRect(),{height:n,width:o}=i.getBoundingClientRect(),r=0,a=Array.from(c.children).slice(0,6).map(e=>e.getBoundingClientRect()),d=a.map(e=>e.top);d.forEach(i=>{i===d[0]&&(r+=0===r&&e&&Math.abs(a[0].width-a[1].width)>10?3:1)}),f.current={scrollHeight:l,scrollWidth:t,columnCount:r,itemHeight:n,itemWidth:o},h.current=!1}),W=(0,L.Z)(()=>{T>0&&(R.current=!0,V.current=!1,H(!1))}),J=(0,L.Z)(e=>{if(0===T)return;if(!S.current.length){W();return}let i=S.current[0],l=i.isTopCard,t=i.isBigCard;if(!A.current&&2===T){t&&(i.isTopCard=!1,i.isBigCard=!1,W());return}if(!l&&R.current){let i=e?S.current.slice(e):S.current.slice(0,20),l=2===T?id(i):ir(i);if(-1===l)R.current=!1;else{it(S.current,l+(e||0)),H(!1);let i=S.current[0];i.isTopCard=!0,i.isBigCard=2===T}}}),q=(0,L.Z)(e=>{J(null==e?void 0:e.topCardStartIndex),P([...S.current]),v&&(v.current=S.current.map(e=>e.awemeId))}),X=(0,n.useMemo)(()=>{var e,i,l;let t=[...N],n=null===(e=t[0])||void 0===e?void 0:e.isTopCard,r=t.length,u=null==Y?void 0:Y.sort((e,i)=>e.order-i.order),c=n?1:0,v=0;null==u||u.forEach(e=>{let i=(0,_._)({itemType:eD.CardAd,inView:!0,displayId:e.id.toString()},e);if(!(e.order>r+1))t.splice(e.order+v-1+c,0,i),v++}),a&&t.length>0&&(null!==(l=null==j?void 0:null===(i=j.find(e=>e.id===Number(d)))||void 0===i?void 0:i.lives)&&void 0!==l?l:[]).forEach(e=>{let i=(0,_._)({itemType:eD.SubTabLive,inView:!0,displayId:e.live_title+e.live_idx},e);t.splice(e.live_idx-1+c,0,i)});let g=t.length>=100;return g!==p.current&&(p.current=g&&!(0,s.tq)()),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!m.current||!p.current)return(null==o?void 0:o.discoverTaskOptimize)?e.map(e=>(e.inView=!0,e)):e.map(e=>Object.assign({},e,{inView:!0}));let i=e[0].isBigCard;h.current&&Z(i);let{columnCount:l,itemHeight:n,scrollHeight:r}=f.current,a=n+k,d=m.current.scrollTop;C.current?x.current=d:d=x.current;let s=Math.ceil(r/a),u=Math.floor(d/a)*l,c=Math.min(u+(s+1)*l,t.length),v=Math.max(u-2*l,0),_=c+2*l,g=e=>e>=v&&e<_;return e.map((e,t)=>{let n=!0;return(n=i?t>=l+3?g(t+5):0===t?g(0)||g(l):g(t+3):g(t),null==o?void 0:o.discoverTaskOptimize)?(e.inView=n,e):Object.assign({},e,{inView:n})})}(t)},[j,Y,N,k]);(0,O.C)(()=>{if(2===T){let e=innerWidth>=g;A.current=e,M(e),!A.current&&q()}},[g]),(0,n.useEffect)(()=>{!D&&!U&&H(!0)},[D,U]),(0,n.useEffect)(()=>{if(T>0){var e;if(null==X||!X[0]||(null==X?void 0:null===(e=X[0])||void 0===e?void 0:e.isTopCard))return z.listen(z.EVENT.JingxuanTopCard,e=>{var i;let{action:l,awemeId:t,canLiveAutoPlay:n}=e;if(t===(null==X?void 0:null===(i=X[0])||void 0===i?void 0:i.awemeId))"playEnd"===l?(V.current=!0,H(!0)):"liveAutoPlay"===l&&!V.current&&H(n)});H(!0)}},[null==X?void 0:null===(l=X[0])||void 0===l?void 0:l.awemeId]);let K=(0,n.useRef)(!1),Q=(0,L.Z)(e=>{if(!!(T>0)){if(1===T){R.current=!1,S.current[0].isTopCard=!1,q();return}2===T&&(K.current=!0,e())}}),ee=(0,L.Z)(e=>{if(!!K.current)K.current=!1,R.current=e,!e&&(R.current=!1,S.current=S.current.slice(1),q())}),ei=(0,L.Z)(()=>{if(2===T){let e=innerWidth>=g;A.current=e,M(e)}h.current=!0,q()});return(0,B.o)(()=>{if(!u||!c)return;let e=eO()(()=>q(),100),i=eO()(()=>{var e;2===T&&(null===(e=$.Le.getConfig($.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)?I.current=!0:null==ei||ei()},100);window.addEventListener("resize",i);let l=p.current;return l&&(null==u||u.addEventListener("scroll",e)),()=>{window.removeEventListener("resize",i),!l&&(null==u||u.removeEventListener("scroll",e))}},[u,c,null==X?void 0:X.length,ei]),(0,B.o)(()=>{if(2===T)return z.listen(z.EVENT.exitModalVideo,()=>{I.current&&(I.current=!1,null==ei||ei())})},[ei]),(0,B.o)(()=>{if(G.current){G.current=!1;return}null==ei||ei()},[ei]),{showAwemeList:N,fetchDataListRef:S,showDataList:X,renderList:q,isTopBigCard:2===T&&D&&!!(!(null==X?void 0:X.length)||X[0].isBigCard),resetTopAweme:W,canLiveAutoPlay:U,needReplaceTopCardRef:K,onReplaceBigCard:Q,clearNeedReplaceTopCard:ee,topCardAb:T}}({abTestData:g,selectedTab:N,isGaiaTab:E,tagId:S,scrollListenerEl:y,waterfallContainer:W,awemeIdsRef:u}),eE=(0,F.d)(c),eS=0===H&&!eb.current.length&&D===eQ.LOADING,eN=(0,F.d)(eS);(0,r.C)(d.w3.components.discover_waterfall_comp),!function(e){let{firstLoadStatus:i,fetchStatus:l,statusCode:t,logId:o,onError:r}=e;(0,n.useEffect)(()=>{if((i===eQ.FAILED||l===e0.FAILED)&&0!==t){let e={statusCode:t,firstLoadStatus:i,fetchStatus:l,logId:o};r(e),eF.oe.event.error({name:eF.Mo.WaterfallLoadError,report:(0,_._)({},e)})}},[i,l,r,t,o])}({statusCode:H,firstLoadStatus:D,fetchStatus:V,logId:null==Y?void 0:Y.current,onError:x}),(0,n.useEffect)(()=>()=>{ec.current=!0},[]);let eP=(0,n.useRef)(0);(0,B.o)(()=>{if(!y)return;let e=eO()(()=>{var e;let i=y.scrollTop,l=i>eP.current,t=$.Le.getConfig($.gI.JingXuanVisitId);e5.sendLog("discoverSlide",{tab_name:"discover",sub_tab_name:null!==(e=eY.z0[Number(null!=S?S:0)])&&void 0!==e?e:S,direction:l?"down":"up",gid_list:"",visit_id:t||""}),eP.current=i},300,{leading:!1,trailing:!0});return null==y||y.addEventListener("scroll",e),()=>{null==y||y.removeEventListener("scroll",e)}},[y]),e7({scrollParentEl:b,waterfallWrapperRef:eh,abTestData:g});let eR=(0,n.useCallback)(()=>{eb.current.length||el.current.length?M(eQ.SUCCESS):M(eQ.FAILED),U(e0.FAILED),eu.current=e0.FAILED,es.current=!1},[]),{fetchWholeFirstFeedAndOverWrite:eA}=function(e){let{fetchDataListRef:i,renderList:l,abTestData:t,tagId:n}=e,o=e=>{null==e||e.forEach(e=>{let l=i.current.findIndex(i=>e.awemeId===i.awemeId);if(-1!==l){let t=i.current[l];i.current[l]=(0,_._)({},i.current[l],e),i.current[l].video.cover=t.video.cover,i.current[l].video.coverUrlList=t.video.coverUrlList,i.current[l].video.cover169UrlList=t.video.cover169UrlList,i.current[l].video.cover169BigUrlList=t.video.cover169BigUrlList,i.current[l].webRawData.cutTitle=t.webRawData.cutTitle,t.awemeType===eV.e.Note&&(i.current[l].video.width=t.width,i.current[l].video.height=t.height),im(e)}}),l()},r=e=>{(0,iu.q)({itemIds:e,from:"overWriteByIds",originType:iv.F.DiscoverPage}).then(e=>{if((null==e?void 0:e.status_code)===0){var i,l;let t=null===(l=e.aweme_details)||void 0===l?void 0:null===(i=l.map)||void 0===i?void 0:i.call(l,e=>(0,ic.s0)(e));(null==t?void 0:t.length)&&o(t)}})},a=async e=>{var i;let{ids:l=[],encodedIds:t=[],liveIds:a=[],liveEncodedIds:d=[],responseFrom:s,logId:u}=e||{},c=await (0,q.fetchHomeModuleFeed)({useV2:1,moduleId:3003101,referType:10,count:20,seoFlag:0,refreshIndex:1,liteType:2,logId:u,provider:s,preIds:l.toString(),encodedPreIds:t.toString(),preRoomIds:a.toString(),encodedPreRoomIds:d.toString(),tagId:n});if((null==c?void 0:c.statusCode)===0&&(null==c?void 0:null===(i=c.awemeList)||void 0===i?void 0:i.length)){o(c.awemeList);let e=l.filter(e=>{var i;return!(null==c?void 0:null===(i=c.awemeList)||void 0===i?void 0:i.find(i=>(null==i?void 0:i.awemeId)===e))});e.length&&r(e)}else r(l)};return{overWrite:o,overWriteByIds:r,fetchWholeFirstFeedAndOverWrite:a}}({fetchDataListRef:eb,renderList:ex,abTestData:g,tagId:S}),eM=(0,n.useCallback)(async function(){let{isReload:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(ec.current||es.current)return;if(e)G(0);else if((!ev.current||eu.current===e0.FAILED)&&eI.length){eL.current&&ek(!1);return}!em.current&&(em.current=setTimeout(()=>{if(eu.current===e0.LOADING){try{(0,w.unstable_batchedUpdates)(()=>{G(i_.ERROR_502),eR()})}catch(e){G(i_.ERROR_502),eR()}e_.current=!0}em.current=null},2e4)),U(e0.LOADING),eu.current=e0.LOADING,es.current=!0;let i=Date.now();(0,eB.B1)({tag:d.w3.fetchers.fetcher_waterfall_start,once:!0});let{data:l,hasMore:t,statusCode:n,logPb:o,maxCursor:r,responseFrom:a}=await eE.current(ea.current,e);if(ec.current)return;(0,eB.B1)({tag:d.w3.fetchers.fetcher_waterfall_end,once:!0}),z.emit(z.EVENT.discoverPageLcp),z.emit(z.EVENT.getHotList),(0,eG.C6)();let s=Date.now();0===n&&(ea.current=r);let u=function(e){try{if(!e)return"";let i={impr_id:""};return"string"==typeof e&&(i=JSON.parse(e)),(null==i?void 0:i.impr_id)||""}catch(e){return""}}(o);eF.oe.event.info({name:eF.Mo.WaterfallFetchTime,metrics:{duration:s-i},report:{logId:u,firstLoadStatus:D}}),em.current&&(clearTimeout(em.current),em.current=null),Y.current=u;let c=e9(l,eb.current,!!a);c.forEach(e=>{var i,l,t,n,o,r,a,d,s,u,c,v,m,_,f,g,h,p,w,C,x,I,b;if(e.awemeType===eV.e.LiveCard){if(null===(r=e.cellRoom)||void 0===r?void 0:null===(o=r.rawdata)||void 0===o?void 0:null===(n=o.cover)||void 0===n?void 0:null===(t=n.url_list)||void 0===t?void 0:null===(l=t[0])||void 0===l?void 0:null===(i=l.includes)||void 0===i?void 0:i.call(l,".heif?")){let i=null===(a=e.cellRoom)||void 0===a?void 0:a.rawdata.cover.url_list[0].replace(".heif?",".jpeg?");e.cellRoom.rawdata.cover.url_list[0]=i}}else{if(null==e?void 0:null===(c=e.video)||void 0===c?void 0:null===(u=c.coverUrlList)||void 0===u?void 0:null===(s=u[0])||void 0===s?void 0:null===(d=s.includes)||void 0===d?void 0:d.call(s,".heif?")){let i=e.video.coverUrlList[e.video.coverUrlList.length-1];e.video.cover=i}if((null==e?void 0:null===(m=e.video)||void 0===m?void 0:null===(v=m.cover169UrlList)||void 0===v?void 0:v[0])&&(null==e?void 0:null===(h=e.video)||void 0===h?void 0:null===(g=h.cover169UrlList)||void 0===g?void 0:null===(f=g[0])||void 0===f?void 0:null===(_=f.includes)||void 0===_?void 0:_.call(f,".heif?"))){let i=e.video.cover169UrlList[e.video.cover169UrlList.length-1];e.video.cover169UrlList[0]=i}if((null==e?void 0:null===(w=e.video)||void 0===w?void 0:null===(p=w.cover169BigUrlList)||void 0===p?void 0:p[0])&&(null==e?void 0:null===(b=e.video)||void 0===b?void 0:null===(I=b.cover169BigUrlList)||void 0===I?void 0:null===(x=I[0])||void 0===x?void 0:null===(C=x.includes)||void 0===C?void 0:C.call(x,".heif?"))){let i=e.video.cover169BigUrlList[e.video.cover169BigUrlList.length-1];e.video.cover169BigUrlList[0]=i}}im(e)});if((()=>{if(e_.current){e_.current=!1;return}if(0!==n){G(n),eR();return}if((null==b?void 0:b.clientHeight)===0){eu.current=e0.SUCCESS,U(e0.SUCCESS),es.current=!1;return}if(t&&!c.length){G(i_.ERROR_404),eR();return}if(!t&&(ev.current=!1),D===eQ.LOADING&&M(eQ.SUCCESS),a&&c.length){!(null==g?void 0:g.discoverEnableWebp)&&c.forEach(e=>{var i;if(null==e?void 0:null===(i=e.video)||void 0===i?void 0:i.coverUrlList){let i=e.video.coverUrlList.find(e=>e.includes(".jpeg?"));i&&(e.video.cover=i)}});let{ids:e,encodedIds:i,liveIds:l,liveEncodedIds:t}=ie(c);eA({ids:e,encodedIds:i,liveIds:l,liveEncodedIds:t,responseFrom:a,logId:u})}return eu.current=e0.SUCCESS,0===eb.current.length&&c.length>0&&(0,v.Fp)(),U(e0.SUCCESS),!0})()){let e=-1;eL.current?(eb.current=eb.current.slice(1),e=eb.current.length,eb.current=[...eb.current,...c],eL.current=!1,ex({topCardStartIndex:e})):(eb.current=[...eb.current,...c],ex())}else eL.current&&ek(!1)}catch(e){eR(),eL.current&&ek(!1)}},[D,eR,ex,b]);(0,n.useEffect)(()=>z.listen(z.EVENT.JingxuanTopCard,e=>{var i;let{action:l,awemeId:t,cancelReplace:n}=e;"topCardReplace"===l&&t===(null==ep?void 0:null===(i=ep[0])||void 0===i?void 0:i.awemeId)&&(n?eL.current&&ek(!0):ej(eM))}),[ej,eM,null==ep?void 0:null===(i=ep[0])||void 0===i?void 0:i.awemeId]);let e$=(0,n.useCallback)(async()=>{let e=b||eh.current;if(!(0,eU.r)()&&eu.current!==e0.FAILED){if(e){var i,l,t,n,o;let r=0;if(null===(l=X.current)||void 0===l?void 0:null===(i=l.homeFastSlowSlide)||void 0===i?void 0:i.isOpen){let e=$.Le.getConfig($.gI.HomeFastSlowSlideFeature);r=(null===(o=X.current)||void 0===o?void 0:null===(n=o.homeFastSlowSlide)||void 0===n?void 0:null===(t=n.distanceMap)||void 0===t?void 0:t[e])||0}e8(e,m+r)&&!es.current&&(z.emit(z.EVENT.homeLoadMoreReach),await eM())}}},[eM,m,b]),eW=(0,n.useCallback)(()=>{let e=eh.current,i=b||e;if(!eS)ef.current=!0,i&&e8(i,m)&&e$(),ex(),ef.current=!1},[eS,ex,m,e$,b]),eq=(0,n.useRef)(!1),eX=(0,F.d)(()=>{if(!eq.current)return;let e=eh.current,i=b||e;i&&e8(i,m)&&e$()});(0,B.o)(()=>((null==eN?void 0:eN.current)?eM():eX.current(),()=>{eq.current=!0}),[]),!function(e){let{waterfallWrapperRef:i,needSkeleton:l,onResizeEvent:t,onScrollEvent:n,scrollListenerEl:o}=e;(0,B.o)(()=>{let e=()=>{if(!t)return;let e=eO()(()=>{if(!!(null==i?void 0:i.current)&&0!==i.current.clientHeight)null==t||t()},300);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}};if(l){let i=e();return()=>{null==i||i()}}let r=e(),a=(()=>{if(!n||!(null==i?void 0:i.current))return;let e=o||i.current;if(!e)return()=>void 0;let l=il()(()=>{null==n||n()},50);return null==e||e.addEventListener("scroll",l),null==e||e.addEventListener("wheel",l),()=>{null==e||e.removeEventListener("scroll",l),null==e||e.removeEventListener("wheel",l)}})();return()=>{null==r||r(),null==a||a()}},[l,t,n,i,o])}({waterfallWrapperRef:eh,scrollListenerEl:y,scrollParentEl:b,needSkeleton:eS,onResizeEvent:eW,onScrollEvent:e$}),(0,n.useEffect)(()=>{if(eS){var e;null==k||null===(e=k.onSkeletonShow)||void 0===e||e.call(k),er.current=[]}},[eS]),(0,n.useEffect)(()=>{var e;null==k||null===(e=k.onLoadMoreShow)||void 0===e||e.call(k,V)},[V]),(0,n.useEffect)(()=>{(async()=>{var e,i,l,t,n,o;if(Q&&(null==Q?void 0:null===(e=Q.awemeList)||void 0===e?void 0:e.length)&&!Q.isCourse){let e=!!K.current;if(!e&&(["sort","new_hottest_id","old_hottest_id"].includes(null!==(t=null==Q?void 0:Q.responseFrom)&&void 0!==t?t:"")||(null==Q?void 0:null===(l=Q.awemeList)||void 0===l?void 0:null===(i=l.some)||void 0===i?void 0:i.call(l,e=>{var i,l;return(null==e?void 0:e.awemeType)!==eV.e.LiveCard&&(null==e?void 0:null===(l=e.video)||void 0===l?void 0:null===(i=l.playAddr)||void 0===i?void 0:i.length)===0})))&&(e=!0),(null==Q?void 0:Q.responseFrom)&&e){let{ids:e,encodedIds:i,liveIds:l,liveEncodedIds:t}=ie(null==Q?void 0:Q.awemeList);await eA({ids:e,encodedIds:i,liveIds:l,liveEncodedIds:t,responseFrom:null==Q?void 0:Q.responseFrom,logId:Y.current||(null===(o=window.SSR_RENDER_DATA)||void 0===o?void 0:null===(n=o.app)||void 0===n?void 0:n.logId)||""})}await e$()}})()},[Q]),(0,B.o)(()=>(0,eG.oX)(async()=>{var e,i,l,t;if(N===eY._D[eY.JY.Course]||E){z.emit(z.EVENT.refreshPage);return}if(!eg.current)eC(),eg.current=!0,eb.current=(null===(i=eb.current)||void 0===i?void 0:null===(e=i.slice)||void 0===e?void 0:e.call(i,ed.current+1))||[],et.current=null===(t=et.current)||void 0===t?void 0:null===(l=t.filter)||void 0===l?void 0:l.call(t,e=>eb.current.some(i=>i.id===e.id)),ed.current=0,ea.current=0,ex(),e$(),await Promise.allSettled([eM(),null==ei?void 0:ei(N),null==ee?void 0:ee()]),eg.current=!1}),[N]);let e1=(0,n.useCallback)((e,i)=>{!(null==e?void 0:e.insertId)&&(ed.current=Math.max(ed.current,i))},[]),e3=(0,n.useCallback)((e,i,l,t,n,o)=>f(e,i,(null==g?void 0:g.discoverTaskOptimize)?e1:()=>{!(null==e?void 0:e.insertId)&&(ed.current=Math.max(ed.current,t))},t,n,o,ey),[f,ey]),e6=(0,n.useCallback)((e,i,l)=>{var t;null==k||null===(t=k.onCoverLoad)||void 0===t||t.call(k,e,i,l)},[null==k?void 0:k.onCoverLoad]),e4=D===eQ.FAILED,ii=V===e0.SUCCESS,io=(0,n.useCallback)(e=>{eb.current=e,ex()},[]);return(0,t.jsxs)("div",{className:p()(j,ez.waterfallWrapper,{[ez.noScrollParent]:!b}),ref:eh,children:[I,e4&&!ii&&(0,t.jsx)(eJ,{isGaiaTab:E,statusCode:H}),eS?(0,t.jsx)(eK,{containerClassName:p()({bigCardWaterfallContainer:2===eT},h)}):(0,t.jsx)(t.Fragment,{children:ep.length?(0,t.jsx)(e2,{ref:Z,setWaterfallContainer:J,renderItem:e3,hideSecond:T&&(null==ep?void 0:ep[0])&&ep[0].awemeType!==eV.e.LiveCard&&(null!==(o=ep[0].width)&&void 0!==o?o:0)>(null!==(a=ep[0].height)&&void 0!==a?a:0),fetchStatus:V,showDataList:ep,containerClassName:p()({bigCardWaterfallContainer:ew},h),statusCode:H,onload:C,reload:()=>{eM({isReload:!0})},update:()=>{es.current=!1,e$()},onCoverShow:e6,abTestData:g,setLoadingElement:P,showReplaceLoading:A}):!e4&&!ii&&(0,t.jsx)(eJ,{statusCode:H})}),(0,t.jsx)(eH.IsLivingPlugin,{activeIndex:-1,dataList:eI,setDataList:io,scene:"jingxuan_card"})]})}var ih=(0,n.forwardRef)((e,i)=>{let[l,o]=(0,n.useState)(!0),r=(0,n.useRef)(!1),{onError:a,onListLoad:d,perfLogFunctions:s}=e||{},{onSkeletonShow:u,onCoverLoad:c,onReload:v,onLoadMoreShow:m,isActiveTab:g}=s||{},h=()=>{if(!!r.current)null==v||v(),o(!1),setTimeout(()=>{o(!0),r.current=!1},0)};(0,n.useImperativeHandle)(i,()=>({reloadList:h,isListLoadEndRef:r}));let p=(0,n.useCallback)(function(){for(var i=arguments.length,l=Array(i),t=0;t<i;t++)l[t]=arguments[t];(null==g?void 0:g(e.selectedTab))&&(null==c||c(...l))},[c]),w=(0,n.useMemo)(()=>({onSkeletonShow:u,onCoverLoad:p,onLoadMoreShow:m}),[]);return l&&(0,t.jsx)(ig,(0,f._)((0,_._)({onError:e=>{r.current=!0,null==a||a(e)},onListLoad:()=>{r.current=!0,null==d||d()}},e),{perfProps:w}))});let ip=(e,i)=>{let l=[];return e.forEach((e,i)=>{var t,n;l[i]=e,l[i].height=null==e?void 0:null===(t=e.video)||void 0===t?void 0:t.height,l[i].width=null==e?void 0:null===(n=e.video)||void 0===n?void 0:n.width,l[i].id=null==e?void 0:e.awemeId}),l};var iw=l("419936"),iC=l.n(iw),ix=l("451238"),iI=l.n(ix),ib=l("656062"),iy=l.n(ib),iL=l("35730"),ij=l("555106"),ik=l("44905"),iT=l("67704"),iE=l("402971");let iS=(e,i)=>{if(iC()(e))return iy()(e,i)},iN=e=>{let{selectedTab:i}=e,{setClosedCardAdIdListMap:l}=(0,eZ.useDiscoverCommonContext)(e=>{let{setClosedCardAdIdListMap:i}=e;return{setClosedCardAdIdListMap:i}}),{userInfo:t}=(0,iE.useUserInfoContext)(),o=e=>{var l,n,o;if(!i)return;let r=null!==(o=(0,ij.$o)(iL.LocalStorageKeys.DiscoverFeedCardAdUnique))&&void 0!==o?o:{},a=(null==t?void 0:t.isLogin)?null==t?void 0:null===(l=t.info)||void 0===l?void 0:l.uid:(null===(n=(0,ik.Es)())||void 0===n?void 0:n.user_unique_id)||"",d=iI()({},r,{[a]:{[i]:[e]}},iS);(0,ij.qQ)(iL.LocalStorageKeys.DiscoverFeedCardAdUnique,d),(0,iT.EN)({uidKey:a})},r=(0,n.useCallback)(e=>{null==l||l(l=>{if(void 0===i)return l;let t=(0,_._)({},l),n=(null==t?void 0:t[i])||[];return n.push(e),t[i]=n,t})},[l]);return{onShow:e=>{!e.permanent&&o(e.id)},onClose:e=>{if(!!e.id)o(e.id),null==r||r(e.id)}}},iP=e=>(0,F.d)(!1);var iR=l("368200");l("602157"),l("779788");let iA=(0,n.forwardRef)((e,i)=>(0,t.jsx)("svg",(0,f._)((0,_._)({width:105,height:120,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,t.jsx)("path",{d:"M89.013 24.055C82.55 19.84 77.883 13.098 76.427 5.238A28.704 28.704 0 0 1 75.939 0H55.31l-.035 82.675c-.345 9.257-7.967 16.689-17.307 16.689-2.902 0-5.636-.726-8.044-1.992-5.517-2.907-9.299-8.692-9.299-15.35 0-9.56 7.783-17.343 17.343-17.343 1.783 0 3.495.297 5.119.803V44.423a38.211 38.211 0 0 0-5.12-.368C17.034 44.055 0 61.088 0 82.027c0 12.848 6.42 24.216 16.213 31.088A37.749 37.749 0 0 0 37.973 120c20.939 0 37.972-17.033 37.972-37.973V40.101a49.054 49.054 0 0 0 28.704 9.227v-20.63a28.56 28.56 0 0 1-15.636-4.643z",fill:"#121423",fillOpacity:".9",opacity:".04"})})));var iD={cover:"HGXOsC8m",content:"oOD4qrps",leftTag:"n32o9S1r",rightTag:"Ii8ePykI",backgroundLoading:"yhodAwbf",backgroundMask:"uYH4uOmd",backgroundMaskNotLoad:"CSA25PZv",mask:"UYTgsheo",background:"PXxuR3wP",hoverImg:"H3DqGJMV",hideImage:"AYYwUaes",footer:"lCgTcfSm",title:"HwxFa2Yf",markers:"uQUfgoO0",hideMarkers:"jXA11yAM",hideTags:"_6ff2r2G",hideMarkersAnimation:"BIg3N8nW",showMarkersAnimation:"pfEzElxN"},iM=l("999238"),iO=e=>{let{onLog:i,isReady:l}=e,t=n.useRef(!1);return n.useEffect(()=>{l&&!t.current&&(t.current=!0,i&&i())},[i,l]),null};let iV=e=>{let{isFirstPageItem:i=!1,imageSrc:l,scale:o=16/9,title:r,fit:a="cover",mask:d,leftMarker:s,rightMarker:u,className:c,hideMarkers:v=!1,hideTags:m=!1,onMouseLeave:_,onMouseEnter:f,onClick:g,maskZIndex:h=2,alt:w,animation:C,hideShadow:x,forwardRef:I,onLog:b,lazyLoadOffset:y=600,lazyLoad:L=!1,isLogReady:j,rightTag:k,leftTag:T,hoverImg:E}=e,[S,N]=n.useState(i),P=n.useRef(null);n.useEffect(()=>{P.current&&P.current.complete&&N(!0)},[]);let R=n.useCallback(()=>{!S&&N(!0)},[S]),A=n.useMemo(()=>(0,t.jsx)("img",{alt:w,ref:P,src:l,onLoad:R,className:p()(iD.background,{[iD.hideImage]:!S,[iD.hoverImg]:E}),style:{objectFit:a}}),[w,P,l,R,S,a,E]);return(0,t.jsxs)("div",{ref:I,title:"",className:p()(iD.cover,c),style:{paddingTop:`${1/o*100}%`},onMouseEnter:f,onMouseLeave:_,onClick:g,children:[d&&(0,t.jsx)("div",{style:{zIndex:h},className:iD.mask,children:d}),(0,t.jsx)("div",{className:iD.backgroundLoading,children:(0,t.jsx)(iA,{})}),(0,t.jsx)(iO,{onLog:b,isReady:j}),L?(0,t.jsx)(iM.default,{height:"100%",offset:y,once:!0,children:A}):A,!x&&(0,t.jsx)("div",{className:p()(iD.backgroundMask,{[iD.backgroundMaskNotLoad]:!S})}),(0,t.jsxs)("div",{className:p()(iD.content,{[iD.hideTags]:m}),children:[T&&(0,t.jsx)("div",{className:iD.leftTag,children:T}),k&&(0,t.jsx)("div",{className:iD.rightTag,children:k})]}),(0,t.jsxs)("div",{className:p()(iD.footer,{[iD.hideMarkersAnimation]:C&&v,[iD.showMarkersAnimation]:C&&!v,[iD.hideMarkers]:!C&&v}),children:[(0,t.jsx)("div",{className:iD.title,children:r}),(0,t.jsxs)("div",{className:iD.markers,children:[s,u]})]})]})};var iB=n.forwardRef((e,i)=>(0,t.jsx)(iV,(0,f._)((0,_._)({},e),{forwardRef:i}))),iF={card:"Y4KdzJ21",cover:"E_lyUKRn",noMargin:"VGqxa7dc",title:"Zfmp49H9"},iU=e=>{let{width:i,title:l,cover:n,meta:o,detail:r,className:a,onMouseEnter:d,onMouseLeave:s,onClick:u}=e;return(0,t.jsxs)("div",{style:{width:i},onMouseEnter:d,onMouseLeave:s,onClick:u,className:p()(iF.card,a),children:[(0,t.jsx)("div",{className:p()(iF.cover,{[iF.noMargin]:r}),children:n}),r||(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:iF.title,children:l}),(0,t.jsx)("div",{children:o})]})]})},iH=l("448715"),iG="Hlhnjx4q",iY="OCq6LNvT",iZ=e=>{let{title:i,children:l}=e;return(0,t.jsxs)("div",{className:iG,children:[(0,t.jsx)("h1",{className:iY,"data-e2e":"live-room-name",children:i}),l]})},i$=l("225520"),iz=l("519055"),iW=l("577786"),iJ=l("330746"),iq=l("309244"),iX="hmXZ4_2_",iK="tf7tsyLn";let iQ=e=>{let{count:i,className:l,renderSVG:n}=e;return(0,t.jsxs)("span",{className:p()(iX,l),children:[n?n():(0,t.jsx)(iq.Z,{}),(0,t.jsx)("span",{className:iK,children:i||"0"})]})};var i0={liveCard:"upEORSfP",borderRadius:"Rbi0dLbR",liveCover:"FLKrazjV",coverMask:"I5X716yZ",cardInfo:"x7F_6nV8",linkMicPreview:"e0rL9YWj"},i1=l("240026"),i2={liveTag:"Invt7kl0",hasRedPack:"mmuZGyYZ",isFirstLive:"_E4ppM2S",liveTagText:"czPHNW9v",redPack:"jStc0Hl_",realText:"ZSMMXimI"},i3=l("860649"),i5=e=>{var i,l;let{roomData:o}=e,r=(0,i1.T)(),a=n.useMemo(()=>{var e;return(null==o?void 0:null===(e=o.others)||void 0===e?void 0:e.web_enter_benefit_point_data)||{has_ongoing_lottery:!1,has_ongoing_lucky_money:!1}},[o]),d=(0,i3.gE)(r,a.has_ongoing_lottery,a.has_ongoing_lucky_money,!0),s=null==o?void 0:null===(l=o.episode_extra)||void 0===l?void 0:null===(i=l.mod)||void 0===i?void 0:i.episode_stage;return(0,t.jsx)("div",{className:p()(i2.liveTag,{[i2.hasRedPack]:!0,[i2.isFirstLive]:s}),children:(0,t.jsxs)("span",{className:p()(i2.liveTagText),"data-e2e":"user-info-living",children:[d.icon&&(0,t.jsx)("img",{src:d.icon,className:i2.redPack}),(0,t.jsx)("span",{className:i2.realText,children:s?"首播中":"直播中"})]})})},i6=l("554425"),i4=l("885714");l("209955");let i7=()=>{let e=n.useContext(S);if(!e)throw Error("useLiveCard must be used within LiveCardProvider");let{play:i,pause:l,clearAllPlayers:t,getInstance:o}=e;return{play:i,pause:l,getInstance:o,clearAllPlayers:t}};var i8=l("200224"),i9=l("645260"),le=l.n(i9),li=l("697041"),ll={cardInfo:"ZBvIT8gG",cardInfoContainer:"dud1zPsv",decs:"Tu5IS0vC",userText:"SWvUuhxn",text:"wdOwEL1J",marginRight:"xdtM920o",at:"ViYzOeP6",userName:"TvB65_nE"},lt=l("55426"),ln=l("421885"),lo=l("956428"),lr=l("180962"),la=l("555679"),ld={tagContainer:"ei4kM2gw",tagText:"dX9GIMHH",yellow:"p6rGz3E_",green:"w4TcqMaX",recommended:"kw3HDa6o"};ln.Z,lo.Z,lr.Z,la.Z;let ls=new Map([["follow",{text:"你的关注"}],["recommended",{text:"为你推荐"}],["collect",{text:"收藏"}],["digg",{text:"点赞"}],["comment",{text:"评论"}]]),lu=e=>{let{count:i,type:l,className:n}=e,o=ls.get("recommended"===l?"recommended":"follow");return(0,t.jsx)(t.Fragment,{children:o&&(0,t.jsx)("span",{className:p()(ld.tagContainer,n,{[ld.yellow]:"collect"===l,[ld.green]:"comment"===l,[ld.green]:"follow"===l,[ld.recommended]:"recommended"===l}),children:(0,t.jsx)("span",{className:p()(ld.tagText),children:`${["follow","recommended"].includes(l)?"":(0,lt.qe)(i||0)}${o.text}`})})})};var lc=e=>{let{text:i,userName:l,className:n,roomhref:o,onEnterLive:r,isShowFollowHighlightTag:a}=e;return(0,t.jsx)("div",{className:p()(ll.cardInfo,n),children:(0,t.jsx)("div",{target:"_blank",rel:"noopener noreferrer",onClick:r,children:(0,t.jsxs)("div",{className:p()(ll.cardInfoContainer),children:[(0,t.jsx)("div",{className:p()(ll.decs),children:i}),(0,t.jsx)("div",{className:p()(ll.userText),children:(0,t.jsxs)("div",{className:p()(ll.text),children:["@",(0,t.jsx)("span",{className:p()(ll.userName),children:l}),a&&(0,t.jsx)(lu,{className:ll.highlightTag,type:"follow"})]})})]})})})},lv=l("459049"),lm=l("114682"),l_=l("688032"),lf=l("797973"),lg=l("155953"),lh=l("108374");let lp=e=>{var i,l,o,r;let{isFirstPageItem:a,anchorId:d,webRid:s,roomId:u,onMouseEnter:c,onMouseLeave:v,onHoverChange:m,userCount:h,cover:w,source:C,title:x,scale:I,onVideoClick:b,onLog:y,coverClassName:j,className:k,authorInfo:T,playerConfig:E,playerStyle:S,isActive:N,lazyLoad:P=!1,fit:R="cover",leftMarker:A,rightMarker:D,hideMarkers:M,leftTag:O,animation:V,hideShadow:F,isLogReady:U,instanceId:H="default",rawData:G,isEnd:Y,linkerMap:Z,sceneId:z=253,teaLogParams:J,search_params:q="",detail:X,description:K,onEnterLive:Q,awemeInfo:ee}=e,[ei,el]=n.useState(!1),et=n.useRef(null),en=n.useRef(null),[eo,er]=n.useState(!1),ea=n.useRef(null),ed=(0,i1.T)(),{isFeedH265:es}=(0,i4.Z)({abtestData:ed,tab:"liveCard"}),[eu,ec]=n.useState(Y),[ev,em]=n.useState(!1),e_=(0,i6.Bq)({room:G,abtestData:ed,isFeedH265:es&&!ev}),ef=!ev&&(null==G?void 0:G.redirectUrl)?null==G?void 0:G.redirectUrl:null==e_?void 0:e_.url,eg=n.useCallback(e=>{es&&!ev&&em(!0)},[es,ev,em]),{play:eh,pause:ep,getInstance:ew}=i7(),[eC,ex]=n.useState(!1),eI=n.useRef(!1),eb=n.useRef(null),ey=n.useMemo(()=>{var e,i,l,t,n,o;let r=null!==(o=null===(l=$.Le.getConfig($.gI.FollowStatusCache))||void 0===l?void 0:null===(e=l[null==G?void 0:null===(i=G.owner)||void 0===i?void 0:i.id])||void 0===e?void 0:e.followStatus)&&void 0!==o?o:null==G?void 0:null===(n=G.owner)||void 0===n?void 0:null===(t=n.follow_info)||void 0===t?void 0:t.follow_status;return(0,iW.F)(r)},[G]),[eL,ej]=n.useState(!1),ek=(null==G?void 0:null===(o=G.paid_live_data)||void 0===o?void 0:null===(l=o.privilege_info_map)||void 0===l?void 0:null===(i=l[101])||void 0===i?void 0:i.paid_live_type)===101,eT=n.useMemo(()=>!!((null==Z?void 0:Z[5])||(null==Z?void 0:Z[8])||(null==Z?void 0:Z[12])),[Z]),eE=n.useMemo(()=>{var e;return null==G?void 0:null===(e=G.linker_detail)||void 0===e?void 0:e.function_type},[G]),eS=n.useMemo(()=>3===Number(null==G?void 0:G.live_room_mode),[G]),eN=le()(G,"AnchorABMap",{}),eP=le()(eN,"linkmic_video_equal_layout_frame_opt","0"),eR=n.useMemo(()=>!eu&&!eL&&!eT&&!ek&&!!ef&&N,[N,eT,eL,eu,ek,ef]),eA=(null==G?void 0:null===(r=G.paid_live_data)||void 0===r?void 0:r.paid_type)===1,eD=n.useMemo(()=>eR||ei||eC?(er(!0),1):(er(!1),0),[ei,eR,eC]),eM=()=>{!eC&&el(!1),(0,lm.bi)(J),b&&b()},eO=n.useCallback(()=>{(0,lm.JW)(J),y&&y()},[J]);n.useEffect(()=>{Y&&ec(!0)},[Y]);let eV=n.useCallback(()=>{ec(!0)},[]),eB=n.useCallback(()=>(0,li.Y)(d,z).then(e=>{let{status_code:i,data:l=[]}=e.data;0===i&&ec(!l.some(e=>{let i=le()(e,"user_live",[])[0];return 1===le()(i,"live_status")}))}),[d,z]);n.useEffect(()=>{if(en.current){var e,i;ea.current=(0,f._)((0,_._)({},ea.current),{width:(null===(e=en.current)||void 0===e?void 0:e.offsetWidth)||"100%",height:(null===(i=en.current)||void 0===i?void 0:i.offsetHeight)||"100%"})}},[en.current]);let eF=n.useMemo(()=>eu?(0,t.jsx)(i8.PlayerEndCover,{cover:w,children:"直播已结束"}):eL||ek?(0,t.jsx)(i8.PlayerEndCover,{cover:w,children:"会员直播中"}):(ei||eR)&&eT?(0,t.jsx)(i8.PlayerEndCover,{cover:w,children:"直播连麦中"}):(ei||eR)&&eA?(0,t.jsx)(i8.PlayerEndCover,{cover:w,children:"付费直播中"}):null,[eu,eR,w,ei,eT,eA,ek]),eU=n.useCallback(()=>{let e=!1;if(!iz.s){var i;e=(null===(i=navigator.userAgent)||void 0===i?void 0:i.indexOf("Firefox"))!==-1}if(e)return;if(c){c();return}if(!eR&&!!ef)el(!0)},[c,eR,el,ef]),eH=n.useCallback(e=>{var i;if(!(null===(i=et.current)||void 0===i?void 0:i.contains(e.relatedTarget))){if(v){v();return}if(eR)return;el(!1)}},[v,eR]),eG=(0,L.Z)(()=>({playerConfig:(0,_._)({url:ef,onError:eg,onEnd:eV,updatePlayer:{autoPlay:!0},baseConfig:(0,_._)({url:ef,_freezeUrl:ef,autoplay:!0,muted:!0,volume:0,decryption:null,mediaAttributes:{muted:!0}},null==E?void 0:E.baseConfig),logOptions:{ext:{is_all_265:!((0,lh.ld)(null==G?void 0:G.stream_url)||(0,lh.ld)(null==G?void 0:G.additional_stream_url)),anchor_id:d,room_id:u}}},E),style:S||ea.current||{},container:en.current,pluginSchema:{VipLiveBoundaryPlugin:{props:{customContent:(0,t.jsx)(i8.PlayerEndCover,{cover:w,children:"会员直播中"}),roomId:u,paidLiveData:null==G?void 0:G.paid_live_data,onShowVipLiveBoundary:e=>{ej(e)},abTestData:ed}},LinkMicPreviewPlugin:{props:{anchorId:d,roomId:u,functionType2:eE,className:p()(i0.linkMicPreview),linkmicVideoEqualLayoutFrameOpt:eP,disableClairvoyance:eS&&"audio_audience"!==eE}},AdaptedBySEIPlugin:{linkmicVideoEqualLayoutFrameOpt:eP}}}));(0,B.o)(()=>{eI.current&&lg.Z&&!(0,W.Nr)(location.pathname)&&(en.current.style.display="block",lg.Z.destroy(),eI.current=!1,ex(!1),el(!1))},[lg.Z,en.current]);let eY=(0,L.Z)(e=>{(0,lm.wp)((0,_._)({play_type:e},J))}),eZ=(0,L.Z)(()=>{if(!eu&&!eL&&!eT&&!ek)eb.current&&clearTimeout(eb.current),eb.current=setTimeout(()=>{let e=eG(),{container:i}=e;eh(i,(0,iR._)(e,["container"])),eY(ei?lm.F7.HOVER:lm.F7.AUTO)},200)}),e$=(0,L.Z)(()=>{eb.current&&(clearTimeout(eb.current),eb.current=null)},[]);n.useEffect(()=>{eR&&(el(!1),eB(),eZ())},[eR]),n.useEffect(()=>{ei&&(eB(),eZ())},[ei]);let ez=n.useRef(!0);n.useEffect(()=>{if(ez.current){ez.current=!1;return}!ei&&!eR&&en.current&&!eC&&(ep(en.current),e$())},[ei,eR,en.current,eC]),n.useEffect(()=>()=>{e$()},[]);let eW=n.useMemo(()=>{let{roomId:e,enter_method:i,enter_from_merge:l,live_position:t,request_id:n}=J;return(0,lv.h)(s,{from_search:"true",search_params:JSON.stringify(q),enter_from_merge:l,enter_method:i,live_position:t,request_id:n})},[q,J,s]),eJ=(0,lf.Z)(()=>`/root/live/${s}`),eq=n.useMemo(()=>{var e;return Object.values((null==G?void 0:null===(e=G.stream_url)||void 0===e?void 0:e.pull_datas)||{}).length>0&&!(0,iJ.G6)()},[G]),eX=n.useCallback(()=>{var e,i,l,t,n,o;null==Q||Q();let r=eJ(),a=ew(en.current),d=null==a?void 0:null===(l=a.ref)||void 0===l?void 0:null===(i=l.current)||void 0===i?void 0:null===(e=i.getPlayer)||void 0===e?void 0:e.call(i),c=null==a?void 0:null===(o=a.ref)||void 0===o?void 0:null===(n=o.current)||void 0===n?void 0:null===(t=n.getPlayerLogger)||void 0===t?void 0:t.call(n),v=!eq&&d;if(r){let e=`${r}?${g.stringify((0,f._)((0,_._)({},J),{use_new_preview:!!v}))}`;(0,l_.X)({href:e,reusePlayer:v?1:0,_reusePlayer:v?1:0,webRid:s,reuseId:v?`f_${s}`:void 0,abtestData:ed,roomId:u,usePreCreate:!v}),v&&(eI.current=!0,ex(!0),en.current.style.display="none",lg.Z.save(d,c))}},[Q,J,s,ew,lg.Z,en.current]);return n.useCallback(()=>{null==Q||Q(),window.open(eW)},[Q,eW]),(0,t.jsx)("div",{ref:et,style:{height:"100%"},onMouseEnter:e=>{eU(),null==m||m(!0)},onMouseOut:e=>{!e.currentTarget.contains(e.relatedTarget)&&(eH(e),null==m||m(!1))},onClick:e=>{eM(),e.stopPropagation()},children:(0,t.jsx)(iU,{className:p()(i0.liveCard,k),cover:(0,t.jsx)(iH.G,{target:"_blank",rel:"noopener noreferrer",onClick:eX,children:(0,t.jsx)(iB,{className:p()(i0.liveCover,j,i0.borderRadius),isFirstPageItem:a,fit:R,scale:I,lazyLoad:P,isLogReady:U,onLog:eO,mask:(0,t.jsx)("div",{id:H,ref:en,className:i0.coverMask,children:eF&&eF}),onEnterLive:eX,maskZIndex:eD,imageSrc:w,rightTag:(0,t.jsx)(i5,{roomData:G}),hoverImg:eo,leftMarker:h&&(0,t.jsx)(iQ,{count:h})})}),title:x&&(0,t.jsx)(iZ,{title:x}),meta:C&&(0,t.jsx)(i$.Hw,(0,_._)({},C)),detail:X||(0,t.jsx)("div",{className:i0.cardInfo,children:(0,t.jsx)(lc,{onEnterLive:eX,text:K,userName:null==C?void 0:C.userName,isShowFollowHighlightTag:ey})})})})};var lw=l("702726"),lC=l("256067"),lx=l("14108"),lI=l("658065"),lb=l("32167"),ly=l("301699"),lL=l("276152"),lj=l("650197"),lk=l("137425"),lT=l("325430"),lE="A86toEf_",lS="VM304bjn",lN="xqpdksRR",lP="i8buBzdG";let lR=e=>{var i,l,t;let{rawdata:n}=e.cellRoom||{},o=(null==n?void 0:null===(i=n.room_view_stats)||void 0===i?void 0:i.is_hidden)?"":null==n?void 0:null===(l=n.room_view_stats)||void 0===l?void 0:l.display_short;return{cellRoomRowData:n,userCount:o,requestId:null!==(t=null==e?void 0:e.logPb)&&void 0!==t?t:""}},lA=e=>{let{itemInfo:i,itemRef:l,index:t,topAwemeId:o,canLiveAutoPlay:r,isTabActive:a}=e,{visibleLiveCards:d,setVisibleLiveCards:s}=(0,eZ.useDiscoverCommonContext)((0,eo.P1)(["visibleLiveCards","setVisibleLiveCards"])),[u,c]=(0,n.useState)(r),v=(0,L.Z)(e=>{if(!r&&!!o)e?(c(!0),z.emit(z.EVENT.JingxuanTopCard,{action:"pause",awemeId:o,from:"hover_other_cover"})):(c(!1),z.emit(z.EVENT.JingxuanTopCard,{action:"play",awemeId:o,from:"cancel_hover_other_cover"}))});(0,n.useEffect)(()=>{if(!r&&u)return z.listen(z.EVENT.JingxuanTopCard,e=>{let{action:i,awemeId:l}=e;"liveAutoPlay"===i&&l===o&&c(!1)})},[r,u]),(0,n.useEffect)(()=>{if(i.awemeType!==eV.e.LiveCard||!l.current||!s||void 0===t)return;let e=new IntersectionObserver(e=>{let[l]=e;l.isIntersecting?s(e=>[...e,{id:i.awemeId,index:t}]):s(e=>e.filter(e=>e.id!==i.awemeId))},{threshold:.5}),n=l.current;return e.observe(n),()=>{e.unobserve(n),s(e=>e.filter(e=>e.id!==i.awemeId))}},[i.awemeType,i.awemeId,t,s]);let m=(0,n.useMemo)(()=>!!d&&0!==d.length&&d.reduce((e,i)=>e.index<i.index?e:i).id===i.awemeId,[d,i.awemeId]);return{isActiveLiveCard:m,canLivePlay:(!!r||u)&&m&&a,onHoverChange:v}},lD=e=>{let{itemInfo:i,isTabActive:l}=e;return(0,n.useEffect)(()=>()=>{var e,l;let{awemeId:t=""}=null!=i?i:{},n=$.Le.getConfig($.gI.keepPlayersInfo),o=`${el.v.Discover}-${t}`,r=null==n?void 0:null===(e=n.get)||void 0===e?void 0:e.call(n,o);r&&(null==r||null===(l=r.destroyFn)||void 0===l||l.call(r),null==n||n.delete(o))},[]),(0,n.useEffect)(()=>{if(!l){z.emit(z.EVENT.JingxuanTopCard,{action:"pause",awemeId:null==i?void 0:i.awemeId});let e=$.Le.getConfig($.gI.topCardManualPause)||{};e[null==i?void 0:i.awemeId]&&(delete e[null==i?void 0:i.awemeId],$.Le.setConfig($.gI.topCardManualPause,e))}},[l]),null};var lM=new eI.h({waterfallProcessStat:{eventName:"waterfall_process_stat",params:{enter_from:"",from:"",skeleton_show_time:0,waterfall_fetch_end:0,first_img_load_time:0,init_duration:0,data_duration:0,cover_duration:0}},waterfallLoadmoreStat:{eventName:"waterfall_loadmore_stat",params:{enter_from:"",duration:0}},videoCoverShow:{eventName:"video_cover_show",params:{enter_from:"discover",tab_name:"",author_id:"",group_id:"",cover_url:"",rank:0,trending_topic:"",logPb:"",module_id:-1,channel:"",aweme_type:"",is_compilation_anchor:0,badge:"",sub_tab_name:"",is_co_publish:0,co_publish_author_list:void 0,video_scale:0,from_click_group_id:"",if_first_big_card:0,visit_id:"",gid_rank:0,is_first_screen:0,page_rank:0,loading_duration:0,filter_name:"",boost_task_id:"",page_mode:"",is_first_large_card_outflow:"0",is_theme_progress_bar:""}},videoCoverLoad:{eventName:"video_cover_load",params:{enter_from:"discover",tab_name:"",author_id:"",group_id:"",cover_url:"",rank:0,trending_topic:"",logPb:"",module_id:-1,channel:"",aweme_type:"",is_compilation_anchor:0,badge:"",sub_tab_name:"",is_co_publish:0,co_publish_author_list:void 0,video_scale:0,from_click_group_id:"",if_first_big_card:0,first_page_item:0,cover_show_time:0,page_mode:""}},videoCoverClick:{eventName:"video_cover_click",params:{aweme_info:{},enter_from:"discover",tab_name:"",author_id:"",group_id:"",cover_url:"",rank:0,trending_topic:"",logPb:"",module_id:-1,channel:"",aweme_type:"",is_compilation_anchor:0,badge:"",sub_tab_name:"",is_co_publish:0,co_publish_author_list:void 0,from_click_group_id:"",if_first_big_card:0,visit_id:"",gid_rank:0,is_first_screen:0,page_rank:0,loading_duration:0,filter_name:"",boost_task_id:"",page_mode:"",is_first_large_card_outflow:"0",is_theme_progress_bar:""}},clickRefresh:{eventName:"click_refresh",params:{enter_from:"discover",tab_name:"",module_id:-1,channel:""}},loadingMore:{eventName:"loading_more",params:{enter_from:"discover",tab_name:"",url_path:"",module_id:-1}},clickDiscoverTab:{eventName:"click_discover_tab",params:{tab_name:"",module_id:-1}},clickLoadMore:{eventName:"click_load_more",params:{tab_name:"",click_position:"",enter_from:"discover"}},hoverPlayTime:{eventName:"hover_play_time",params:{group_id:"",author_id:"",enter_from:"",tab_name:"",duration:0,is_full_screen:"0",video_scale:0,if_first_big_card:0,visit_id:"",gid_rank:0,is_first_screen:0}},hoverPlay:{eventName:"hover_play",params:{group_id:"",author_id:"",enter_from:"",tab_name:"",is_full_screen:"0",video_scale:0,if_first_big_card:0,aweme_info:{},visit_id:"",gid_rank:0,is_first_screen:0}},autoVideoPlay:{eventName:"auto_video_play",params:{group_id:"",author_id:"",enter_from:"",tab_name:"",is_full_screen:"0"}},autoPlayTime:{eventName:"auto_play_time",params:{group_id:"",author_id:"",enter_from:"",tab_name:"",duration:0,is_full_screen:"0"}},noMoreContentShow:{eventName:"no_more_content_show",params:{enter_from:"discover"}},noMoreContentClick:{eventName:"no_more_content_click",params:{enter_from:"discover"}},pageView:{eventName:"page_view",params:{url:"",url_path:"",enter_from:"",link_from:"",tab_name:"",enter_method:"",aweme_type:0,theme:"light",is_topknot:0,abtest:"",ischange:"",old_ttwid:"",enter_by_tab:0,browser_height:0,browser_width:0,browser_ratio:0,redirect_from:"",from_push:0,seo_vids:"",url_source:"",url_source_method:"",word_strategy:"",physical_screen_num:0,physical_screen_info:"",match_id:"",enter_from_merge:"",is_small_window:0,is_mobile:0,is_ipad:0,is_apad:0,if_from_widget:0,theme_raw_value:"",reason:"",open_from_page:"",multi_window_order:"",multi_window_open_from:"",is_child_route:!1,is_support_wasm:!1,sub_tab_name:""}},pageStayTime:{eventName:"page_stay_time",params:{url:"",url_path:"",enter_from:"",enter_from_merge:"",previous_page:"",enter_method:"",duration:0,is_visible:1,link_from:"",tab_name:"",aweme_type:0,player_paused:0,player_muted:0,reason:"",is_child_route:!1,sub_tab_name:"",is_small_window:"0"}},filterPageStayTime:{eventName:"filter_page_stay_time",params:{duration:0,filter_list:"",filter_name:"",sub_tab_name:"",enter_method:"",enter_from:""}},firstScreenCount:{eventName:"first_screen_count",params:{tab_name:"",count:0,scene:"",pathname:"",log_id:""}},clickDiscoverTabReload:{eventName:"click_discover_tab_reload",params:{tab_name:""}},discoverClose:{eventName:"discover_close",params:{visit_id:"",close_method:"change_tab",to_page:""}},discoverCourserFilterListClick:{eventName:"discover_courser_filter_list_click",params:{filter_list:"",filter_name:"",sub_tab_name:"",enter_method:"",enter_from:""}}});let lO=(e,i)=>{let{cover:l,cover169UrlList:t,coverUrlList:n,cover169BigUrlList:o}=(null==e?void 0:e.video)||{},r=(null==e?void 0:e.isTopCard)&&(null==o?void 0:o[0])||(null==t?void 0:t[0]);return(null==i?void 0:i.jingxuanCover169)?r||l||(null==n?void 0:n[0]):l};var lV=l("739808");let lB={},lF=()=>{let e=et.e.getPipWindow({scene:V.d.ListenVideo})||et.e.getPipWindow({scene:V.d.WebVideo});e&&e.close()},lU=new Set(["onShow","onMouseEnter","onClick","onClickPipIcon"]),lH=new Set(["reuseConfig","logParams"]);var lG=n.memo(e=>{var i,l,o,a,s,u,c,v,m,g,h,w,C,x,I,b,y,L,j,k,T,E,S,N,P,R,A,D,M,O,V,B,H,G,Y;let{isTabActive:Z=!1,isTopCardActive:z=!1,isModalPlayingCurrentVideo:W,itemInfo:J,appendPlayerConfig:q,abTestData:X={},onClick:K,onCoverLoad:Q,onLoadedData:ee,minAspectRatio:et,maxAspectRatio:en,onShow:er,onMouseEnter:ea,onMouseLeave:ed,isBigCard:es=!1,isTopCard:eu=!1,canLiveAutoPlay:ec=!0,scene:ev,tabName:em,onMorePopperShow:e_,onMorePopperHidden:ef,logParams:eg={},isFirstPageItem:eh,containerScrolled:ep,index:ew,scrollContainerRef:eC,reuseConfig:ex,onClickPipIcon:eI,modalAwemeInfoRef:eb,setModalAwemeInfo:ey,setDefaultModalAwemeInfo:eL,topAwemeId:ej}=e,{awemeType:ek,mixInfo:eT}=J,{latestClickAwemeIdRef:eE,homeFetchData:eS,updateLatestClickAwemeIdRef:eN}=(0,eZ.useDiscoverCommonContext)((0,eo.P1)(["latestClickAwemeIdRef","homeFetchData","updateLatestClickAwemeIdRef"])),eP=!!(null==eT?void 0:eT.mixId),eR=ek===eV.e.Note,eA={videoImageWidth:null==J?void 0:J.calculateWidth,videoImageHeight:null==J?void 0:J.calculateHeight,videoImagePriority:!!(void 0!==J.index&&J.index<=10),decoding:"async"},[eD,eM]=(0,n.useState)(!ep),[eO,eF]=(0,n.useState)({}),eU=(0,n.useRef)(null),eH=(0,lC.u)({value:(null==J?void 0:null===(i=J.video)||void 0===i?void 0:i.width)/(null==J?void 0:null===(l=J.video)||void 0===l?void 0:l.height),max:en,min:et}),eG=(0,lV.V1)(),{userInfo:eY,dispatch:e$}=(0,iE.useUserInfoContext)()||{},{info:ez,isLogin:eW}=eY,eJ=(0,n.useMemo)(()=>{if("discover"===ev)return!eu||!eG&&((null==X?void 0:X.jingxuanCover169)===U.JingxuanCover169.V2||(null==X?void 0:X.jingxuanCover169)===U.JingxuanCover169.V4||(null==X?void 0:X.jingxuanCover169)===U.JingxuanCover169.V5);return!1},[eG,eu,ev,X]),eq=(0,n.useRef)(!1);(0,r.C)(d.w3.components.discover_waterfall_item),(0,n.useEffect)(()=>{var e,i,l;eq.current&&(null==eE?void 0:eE.current)===(null==J?void 0:J.awemeId)&&((null==J?void 0:null===(i=J.video)||void 0===i?void 0:null===(e=i.playAddr)||void 0===e?void 0:e.length)||(null==J?void 0:null===(l=J.video)||void 0===l?void 0:l.playApi))&&(K(eO),eq.current=!1)},[null==J?void 0:null===(o=J.video)||void 0===o?void 0:o.playAddr,null==J?void 0:null===(a=J.video)||void 0===a?void 0:a.playApi,eO,K]);let eX=lO(J,X),eK=(0,n.useRef)(0),eQ=(0,n.useMemo)(()=>{var e;let i=((null==J?void 0:null===(e=J.video)||void 0===e?void 0:e.coverUrlList)||[]).find(e=>e.includes(".heif?"));return!eh&&!!i&&("discover"===ev||(null==em?void 0:em.includes("channel")))},[eh,J,ev,em]),e0=(0,n.useMemo)(()=>(0,f._)((0,_._)({},eg),{visit_id:$.Le.getConfig($.gI.JingXuanVisitId)||"",is_first_screen:Number(eD),gid_rank:(ew||0)+1}),[eg,ew,eD]),e1=(0,n.useMemo)(()=>(null==J?void 0:J.awemeType)===eV.e.Note?(0,lx.Wr)(J.awemeId):(0,lx.JF)(J.awemeId),[J.awemeId,null==J?void 0:J.awemeType]),e2=(0,n.useMemo)(()=>{var e,i,l,t,n,o,r,a,d,s;return{userHref:(0,lx.HC)(null==J?void 0:null===(e=J.authorInfo)||void 0===e?void 0:e.secUid,`enter_from=${(0,lI.yW)()}&enter_method=video_cover_title&from_gid=${null==J?void 0:J.awemeId}`),likesCount:(0,lt.qe)(J.stats.diggCount),videoTime:(0,lt.$y)(J.video.duration),previewUrlList:(null==J?void 0:null===(l=J.video)||void 0===l?void 0:null===(i=l.playAddr)||void 0===i?void 0:i.length)||(null==J?void 0:null===(t=J.video)||void 0===t?void 0:t.playApi)?[...null!==(s=null==J?void 0:null===(r=J.video)||void 0===r?void 0:null===(o=r.playAddr)||void 0===o?void 0:null===(n=o.map)||void 0===n?void 0:n.call(o,e=>e.src||""))&&void 0!==s?s:[]].concat((null==J?void 0:null===(a=J.video)||void 0===a?void 0:a.playApi)?null==J?void 0:null===(d=J.video)||void 0===d?void 0:d.playApi:[]):[]}},[null==J?void 0:J.video,null==J?void 0:null===(s=J.authorInfo)||void 0===s?void 0:s.secUid,null==J?void 0:null===(u=J.stats)||void 0===u?void 0:u.diggCount,null==J?void 0:null===(c=J.video)||void 0===c?void 0:c.duration]),e3=(null===(v=$.Le.getConfig($.gI.JxOuterProgress))||void 0===v?void 0:v[null==J?void 0:J.awemeId])||{},e5=(0,F.d)((0,_._)({video_scale:(null==J?void 0:null===(m=J.video)||void 0===m?void 0:m.width)/(null==J?void 0:null===(g=J.video)||void 0===g?void 0:g.height),enter_from:(0,lb.vM)(),enter_from_merge:(0,lb.vM)(),group_id:null==J?void 0:J.awemeId,aweme_type:null==J?void 0:J.awemeType,is_compilation_anchor:0,from_click_group_id:null!==(N=null==J?void 0:J.insertId)&&void 0!==N?N:"",tab_name:em,if_follow:null!==(P=null===(C=$.Le.getConfig($.gI.FollowStatusCache))||void 0===C?void 0:null===(h=C[null==J?void 0:null===(w=J.authorInfo)||void 0===w?void 0:w.uid])||void 0===h?void 0:h.followStatus)&&void 0!==P?P:null==J?void 0:null===(x=J.authorInfo)||void 0===x?void 0:x.followStatus,pc_source:null==J?void 0:null===(I=J.chanFeedVideo)||void 0===I?void 0:I.source,video_source:(0,lj.B)(J),first_page_item:eh,cover_show_time:Date.now()-(null==eK?void 0:eK.current),visit_id:$.Le.getConfig($.gI.JingXuanVisitId)||"",is_first_screen:Number(eD),gid_rank:(ew||0)+1,page_rank:J.refreshIndex,boost_task_id:(null==J?void 0:J.boostTaskId)||"",is_theme_progress_bar:(null==e3?void 0:e3.isWatchedEnd)||(null==e3?void 0:e3.progress)?"1":"0"},eg)),e6=(0,n.useCallback)(()=>{!lB[J.awemeId]&&(lB[J.awemeId]=!0,eK.current=Date.now(),null==er||er(),eM(!ep),lM.sendLog("videoCoverShow",e5.current))},[J.awemeId,ep,e5,er]),e4=(0,n.useCallback)((e,i)=>{null==Q||Q(e,i,{isTopCard:null==J?void 0:J.isTopCard,isBigCard:null==J?void 0:J.isBigCard}),lM.sendLog("videoCoverLoad",e5.current)},[Q,null==J?void 0:J.isTopCard,null==J?void 0:J.isBigCard]),e7=(0,n.useCallback)(e=>{null==ee||ee((0,f._)((0,_._)({},e),{isTopCard:null==J?void 0:J.isTopCard,isBigCard:null==J?void 0:J.isBigCard}))},[ee,null==J?void 0:J.isTopCard,null==J?void 0:J.isBigCard]),e8=async e=>{let i=await (0,lk.m_)({awemeId:e,originType:iv.F.DiscoverOpen});(null==i?void 0:i.statusCode)===0&&(null==i?void 0:i.detail)&&(null==eE?void 0:eE.current)===e&&!(null==eb?void 0:eb.current)&&(null==eL||eL(null==i?void 0:i.detail),null==ey||ey(null==i?void 0:i.detail))},e9=(0,n.useCallback)(()=>{var e,i,l,t,n;J.awemeId&&(null===ei.YY||void 0===ei.YY||null===(n=ei.YY.setPlayerReuseAble)||void 0===n||n.call(ei.YY,el.v.Discover,J.awemeId)),null==eN||eN(null==J?void 0:J.awemeId),(0,ly.Vw)(lL.H.video_cover_click,(0,_._)({aweme_info:J},e5.current)),lM.sendLog("videoCoverClick",e5.current);let o=`${d.w3.modal.modal_first_video_play}_start`;(0,eB.tl)(o),(0,eB.B1)({tag:o}),(null==J?void 0:null===(e=J.images)||void 0===e?void 0:e.length)||(null==J?void 0:null===(l=J.video)||void 0===l?void 0:null===(i=l.playAddr)||void 0===i?void 0:i.length)||(null==J?void 0:null===(t=J.video)||void 0===t?void 0:t.playApi)?K({visit_id:$.Le.getConfig($.gI.JingXuanVisitId)||"",is_first_screen:Number(eD),gid_rank:(ew||0)+1,is_outflow:1,from_gid:null==J?void 0:J.awemeId,item_rank:1}):(eq.current=!0,(null==eS?void 0:eS.redisMode)==="replace"&&eh&&e8(J.awemeId),eF({visit_id:$.Le.getConfig($.gI.JingXuanVisitId)||"",is_first_screen:Number(eD),gid_rank:(ew||0)+1,is_outflow:1,from_gid:null==J?void 0:J.awemeId,item_rank:1}))},[e5,ew,J,null==J?void 0:J.awemeId,null==J?void 0:J.images,null==J?void 0:null===(b=J.video)||void 0===b?void 0:b.playAddr,null==J?void 0:null===(y=J.video)||void 0===y?void 0:y.playApi,K,eD,eh,eS,eN]),ie=eh||lB[J.awemeId],ii=J.awemeType===eV.e.LiveCard,{isActiveLiveCard:il,onHoverChange:it,canLivePlay:io}=lA({itemInfo:J,itemRef:eU,index:ew,topAwemeId:ej,canLiveAutoPlay:ec,isTabActive:Z}),{cellRoomRowData:ir,userCount:ia,requestId:id}=lR(J);if(ii)return(0,t.jsx)("div",{ref:eU,style:{height:"100%"},children:(0,t.jsx)(lp,{onHoverChange:it,onEnterLive:lF,isFirstPageItem:eh,awemeInfo:J,isActive:io,rawData:ir,instanceId:il?"AUTOPLAY_LIVE_CARD":"MULTI_PLAY_LIVE_CARD",description:(null==ir?void 0:ir.title)||"",anchorId:(null==ir?void 0:null===(R=ir.owner)||void 0===R?void 0:R.id_str)||"",roomId:(null==ir?void 0:null===(D=ir.owner)||void 0===D?void 0:null===(A=D.own_room)||void 0===A?void 0:A.room_ids_str[0])||"",webRid:(null==ir?void 0:null===(M=ir.owner)||void 0===M?void 0:M.web_rid)||"",userCount:ia,cover:(null==ir?void 0:null===(V=ir.cover)||void 0===V?void 0:null===(O=V.url_list)||void 0===O?void 0:O[0])||"",isEnd:(null==ir?void 0:ir.status)!==2,teaLogParams:{live_position:(ew||0)+1,anchor_id:null==ir?void 0:null===(B=ir.owner)||void 0===B?void 0:B.id_str,room_id:(null==ir?void 0:null===(G=ir.owner)||void 0===G?void 0:null===(H=G.own_room)||void 0===H?void 0:H.room_ids_str[0])||"",enter_from_merge:"web_homepage_discover",enter_method:"web_live_card",is_aweme_tied:eW?1:0,request_id:id},source:{userName:null==ir?void 0:null===(Y=ir.owner)||void 0===Y?void 0:Y.nickname},title:(null==ir?void 0:ir.title)||"",isLogReady:!!eW,linkerMap:null==ir?void 0:ir.linker_map,scale:4/3})});let is=(0,t.jsx)(lT.Z,(0,f._)((0,_._)({className:p()("waterfall-videoCardContainer",{jingxuanVideoCard:"discover"===ev}),cardIndex:ew,imageBoxClassName:lP,imgClass:p()("discover-video-card-img",{"jingxuan-top-card-img":eu}),onLoadedData:e7,logParams:e0,enableCardHoverPreview:!1,showHighLightTag:!0,appendPlayerConfig:q,showImageInSSR:eh,disabledALink:!0,imageReady:ie,showHomeNote:eR,showHomeCollect:eP,awemeInfo:J,url:e1,description:(null==J?void 0:null===(L=J.webRawData)||void 0===L?void 0:L.cutTitle)||J.desc,imgUrl:eX,onClick:e9,onMouseLeave:ed,onMouseEnter:ea,imageClassName:lE,imageSkeletonClass:p()({[lN]:(null==J?void 0:null===(j=J.video)||void 0===j?void 0:j.cover)==="cache"}),userName:J.authorInfo.nickname,userHref:e2.userHref,userHrefTarget:"_blank",likesCount:e2.likesCount,videoTime:e2.videoTime,width:null==J?void 0:null===(k=J.video)||void 0===k?void 0:k.width,height:null==J?void 0:null===(T=J.video)||void 0===T?void 0:T.height,previewUrlList:e2.previewUrlList,isHorizontal:(null==J?void 0:null===(E=J.video)||void 0===E?void 0:E.width)>(null==J?void 0:null===(S=J.video)||void 0===S?void 0:S.height),fakeHorizontalInfo:null==J?void 0:J.fakeHorizontalInfo,isShowCreateTime:!0,videoImageStyle:{paddingTop:`${1/eH*100}%`},onShow:e6,onCoverLoad:e4,onUserNameClick:()=>{var e;lw.logInstance.sendLog("clickNickname",{enter_from:(0,lI.yW)(),to_user_id:null==J?void 0:null===(e=J.authorInfo)||void 0===e?void 0:e.uid,group_id:null==J?void 0:J.awemeId})},scene:ev,blurLightCover:!1,user:{info:ez,isLogin:eW,dispatch:e$},abTestData:X,enableNotePreview:!0,needOperateHidden:null==X||!X.jingxuanCover169||!eu,topAwemeId:ej,isTopCard:eu,isBigCard:es,isTopCardActive:z,isModalPlayingCurrentVideo:W},eA),{showMore:!0,tab:em,showWatchLater:!0,onMorePopperHidden:ef,onMorePopperShow:e_,withBlurBg:eJ,cardInfoClassName:p()({[lS]:"discover"===ev}),enableImageX:eQ,scrollContainerRef:eC,reuseConfig:ex,onClickPipIcon:eI}),`${J.awemeId}${eu?"-topcard":""}`);return eu?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(lD,{itemInfo:J,isTabActive:Z}),is]}):is},(e,i)=>{var l;if(!(null===(l=$.Le.getConfig($.gI.AbtestData))||void 0===l?void 0:l.enableJingxuanZustand))return!1;for(let l in i){if(!(lU.has(l)||lH.has(l))){if(!Object.is(e[l],i[l]))return!1}}return!0}),lY=l("892043"),lZ=l("375944"),l$=l("176638");let lz=e=>{var i;let{abTestData:l,className:n,country:o}=e,r={wid:(null===(i=(0,ik.Es)())||void 0===i?void 0:i.user_unique_id)||""},a={clientType:(0,s.DT)()?"Client":"Web",os:(0,lZ.fV)().os,isInPWA:(0,l$.f)()},d={teaInstance:lw.logInstance};return l.homeBanner===U.HomeBannerABVal.On?(0,t.jsx)(lY.Z,{className:n,userInfo:r,systemInfo:a,logConfig:d,country:o,clickAction:()=>{z.emit(z.EVENT.OpenJXModal,{source:"discover_banner"})}}):null};var lW=l("327306");let lJ=e_.ERROR_CODE,lq=(e,i)=>{var l;let t=null===(l=(0,K.oZ)(i))||void 0===l?void 0:l.fetcher;return t?t.request({cached:!0,consume:!0,params:e,fetcherOptions:{expired:36e5,resetExpiredCacheBefore:!1,hoverDelay:!0}}):(0,eg.F)(e)};var lX=e=>{var i,o,a,s;let{tab:u,subTagInfoRef:c,filterName:v,request:m,isTabActive:g,selectedTab:h,modalAwemeInfo:w,setModalAwemeInfo:C,setDefaultModalAwemeInfo:x,defaultList:I,perfLogFunctions:b,preloadModuleFeed:y,onVideoCardMouseLeave:L,onVideoCardClick:j,country:k,className:T,onClickPipIcon:E,setLogParams:S,appendPlayerConfig:N,showReplaceLoading:P,setShowReplaceLoading:R}=e,A=(0,F.d)(w),D=(0,n.useRef)(null),M=(0,n.useRef)(),O=(0,n.useRef)(),V=(0,iE.useUserInfoContext)()||{},H=(0,lW._)()||{};!function(e){let{ref:i,abTestData:t}=e;(0,n.useEffect)(()=>{let e=i.current;if(e){let i;let t=!1;return l.e("16708").then(l.t.bind(l,597965,23)).then(l=>{var n,o;let{Monitor:r}=l;if(!t)(i=new r({el:e,appId:6383,region:"cn",userUniqueId:null!==(o=null===(n=(0,ik.Es)())||void 0===n?void 0:n.user_unique_id)&&void 0!==o?o:"",selector:"img, canvas",customHeadersHandler:e=>{let i=e.get("x-imagex-extra");return JSON.parse(null!=i?i:"{}")},defaultConfig:{reportRateConfig:{reportRate:.1,reportRateError:.1}}})).updateReportParams({imagex_vid:0}),i.start()}),()=>{t=!0,null==i||i.stop()}}},[])}({ref:O,abTestData:H});let G=eY.z0[h],[Y,Z]=(0,n.useState)(),[W,J]=(0,n.useState)(),[q,K]=(0,n.useState)(!1),{homeFetchData:Q,isDefaultLanding:ee,updateFeedCardAdResourceList:et,updateSubTabLiveCardList:en,pageMode:er}=(0,eZ.useDiscoverCommonContext)((0,eo.P1)(["homeFetchData","isDefaultLanding","updateFeedCardAdResourceList","updateSubTabLiveCardList","pageMode"])),ea=(0,n.useRef)((null==Q?void 0:Q.isCourse)&&null!==(a=null==Q?void 0:null===(o=Q.awemeList)||void 0===o?void 0:null===(i=o.map)||void 0===i?void 0:i.call(o,e=>null==e?void 0:e.awemeId))&&void 0!==a?a:[]),es=(0,n.useRef)(0);(0,r.C)(d.w3.components.discover_tab);let{setLoadingElement:eu}=(0,ef._)({scrollListenerEl:W,scene:G,enableRecordFrameTime:!0,enableRecordLongTask:!0,enableRecordLoadingShow:!0,crashFPSThreshold:24,slideEndDelay:300,logParams:(0,_._)({sub_tab_name:null!==(s=eY.z0[h])&&void 0!==s?s:h},ee?{enter_method:"default_landing"}:{}),abTestData:H});!function(e){let{scrollEl:i,onSideBarShow:l}=e;(0,B.o)(()=>{if(!i)return;z.emit(z.EVENT.globalScrollEl,i);let e=z.listen(z.EVENT.sideBarShow,()=>{z.emit(z.EVENT.globalScrollEl,i),null==l||l()});return()=>{e()}},[i])}({scrollEl:W});let{targetResource:ev}=(0,X.II)(e=>{let{targetResource:i}=e;return{targetResource:i}}),{stuff_detail:e_}=ev||{},eg=(0,n.useRef)(!0),ew=iP(H),eC=(0,n.useCallback)(async()=>{var e;let i;em.z.markStart("discover_csr_fetch_data",{once:!0});let l=Q&&(null==Q?void 0:null===(e=Q.awemeList)||void 0===e?void 0:e.length),t=!l&&eg.current,n={tagId:"0"===h?"":h,activeId:u.is_active_tab?u.key:"",isActiveTab:u.is_active_tab},o=ew.current&&"0"===h,r={useV2:1};if(!l&&eg.current&&(r.liteType=1,o&&(r.pullType=8)),eg.current&&(eg.current=!1),t){let[e]=await Promise.allSettled([m(t,(0,_._)({},r,n)),null==et?void 0:et(h),null==en?void 0:en()]).finally(()=>eg.current=!1);i=(0,_._)({},(null==e?void 0:e.status)==="fulfilled"&&(null==e?void 0:e.value)||{})}else i=await m(t,(0,_._)({},r,n)).finally(()=>eg.current=!1);return em.z.markEnd("discover_csr_fetch_data",{once:!0}),i},[m,u,h,Q,et]),ex=(0,n.useRef)(!0);(0,B.o)(()=>{if(ex.current){ex.current=!1;return}b.onCacheTabActive(h)},[]),(0,B.o)(()=>{if(Y){let e=()=>{K(!0)};return Y.addEventListener("scroll",e),()=>{Y.removeEventListener("scroll",e)}}},[Y]),(0,B.o)(()=>{if(w)return()=>{};if(!M.current)return;let e=e=>{if("ArrowDown"===e.code||"ArrowUp"===e.code){let l="ArrowUp"===e.code,t=M.current;if(t){var i;(0,eh.X)({top:Math.min(Math.max((null!==(i=t.scrollTop)&&void 0!==i?i:0)+(l?-100:100),0),t.scrollHeight),behavior:"smooth"},t)}}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[w]);let eI=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&arguments[1];for(let i=0;i<3;i++){let l;if(h===eY._D[eY.JY.Course]){let i=0===(l=await lq({tabId:"screen_course_page",offset:e,size:6,tagIdList:c.current.courseTagIdStr,idList:ea.current.join(",")},c.current.courseTagIdStr)).statusCode&&0===l.awemeList.length&&l.hasMore;es.current=i?es.current+1:0,l.hasMore=l.hasMore&&es.current<3}else l=await eC();let{statusCode:t,hasMore:n,awemeList:o=[],offset:r=0,logPb:a="",responseFrom:d=""}=l;if(0===t&&0!==o.length||2===i)return{data:ip(o,H),hasMore:!!n,statusCode:t,logPb:a,responseFrom:d,maxCursor:r}}return{data:[],hasMore:!1,statusCode:lJ.ERROR_UNKNOWN,logPb:""}},[V,eC,h,c]);(0,B.o)(()=>()=>{(null==M?void 0:M.current)&&(M.current.style.overflow="auto")},[]);let{onShow:eb,onClose:ey}=iN({selectedTab:h}),eL=(e,i)=>{if(S(i),$.Le.setConfig($.gI.ModalStartOpenTime,Date.now()),j(e.awemeId),3===H.discoverOptimize){let i=(0,_._)({},e);i.video.originCover=lO(e,H),C(i)}else C(e)},ej=e=>{if(e.awemeId){var i;null===ei.YY||void 0===ei.YY||null===(i=ei.YY.setPlayerReuseAble)||void 0===i||i.call(ei.YY,el.v.Discover,e.awemeId)}if(E(),j(e.awemeId),3===H.discoverOptimize){let i=(0,_._)({},e);i.video.originCover=lO(e,H),C(i)}else C(e)},ek=(0,n.useMemo)(()=>{var e;return(0,_._)({sub_tab_name:null!==(e=eY.z0[h])&&void 0!==e?e:h,filter_name:v||""},ee?{enter_method:"default_landing"}:{})},[ee,h,v]),eT=(0,n.useCallback)(()=>{M.current&&(M.current.style.overflow="auto")},[]),eE=(0,n.useCallback)(()=>{if(M.current){let{scrollTop:e}=M.current;M.current.style.overflow="hidden",M.current.scrollTop=e}},[]),eS=(0,n.useCallback)((e,i,l,n,o,r,a)=>{var d,s,u;let c=!!(null==Q?void 0:null===(s=Q.awemeList)||void 0===s?void 0:null===(d=s.find)||void 0===d?void 0:d.call(s,i=>(null==i?void 0:i.awemeId)===e.awemeId));return e.itemType===eD.CardAd?(0,t.jsx)(ep.l,{cardAd:e,cardStyle:"transparent",onShow:eb,onClose:ey,logParams:{sub_tab_name:eY.z0[h],filter_name:v||""},enterMethod:"discover_ad_card"}):e.itemType===eD.SubTabLive?(0,t.jsx)(eA,{cardLiveInfo:e,cardStyle:"transparent"}):(0,t.jsx)(lG,{isTabActive:g,isTopCardActive:(null==e?void 0:e.isTopCard)?!w&&g:void 0,isModalPlayingCurrentVideo:(null==e?void 0:e.awemeId)===(null==w?void 0:w.awemeId),canLiveAutoPlay:a,appendPlayerConfig:N,isFirstPageItem:c,containerScrolled:q,minAspectRatio:e1,maxAspectRatio:e1,scene:"discover",onCoverLoad:i,onLoadedData:b.onLoadedData,reuseConfig:{scene:el.v.Discover,reuseId:null==e?void 0:e.awemeId,autoCreate:!0,keepPlayer:null==e?void 0:e.isTopCard},onShow:()=>{null==l||l()},index:n,onMouseEnter:()=>{null==y||y(e.awemeId,U.MainHoverPreloadAction.hover,!0)},onMouseLeave:L,itemInfo:e,abTestData:H,onClick:i=>eL(e,i),onClickPipIcon:()=>ej(e),isBigCard:null==e?void 0:e.isBigCard,isTopCard:null==e?void 0:e.isTopCard,topAwemeId:r,onMorePopperShow:eE,onMorePopperHidden:eT,logParams:(0,f._)((0,_._)({sub_tab_name:null!==(u=eY.z0[h])&&void 0!==u?u:h,filter_name:v||"",is_first_large_card_outflow:(null==e?void 0:e.isBigCard)?"1":"0"},ee?{enter_method:"default_landing"}:{}),{page_mode:er}),scrollContainerRef:o,modalAwemeInfoRef:A,setModalAwemeInfo:C,setDefaultModalAwemeInfo:x})},[H,y,L,h,g,Q,ee,q,w,N,ek]);return(0,t.jsxs)("div",{className:p()(ec.waterfallPage,T),ref:e=>{if(!!e){O.current=e;M.current=e,Z(e),J(e)}},children:["0"===h&&(0,t.jsx)(lz,{className:ec.bannerContainer,abTestData:H,country:k}),e_&&"300205"===h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ed,{islandMode:"load",disableTDK:!0,className:p()(ec.topicPage,ec.topicPageWithDiscoverCardOptimize)}),(0,t.jsx)("div",{className:ec.feedTitle,style:{paddingLeft:28},children:(0,t.jsx)("h2",{children:"更多热门"})})]}):null,(0,t.jsx)("div",{className:p()(ec.wrapperMarin,"jingxuanFeedList"),children:(0,t.jsx)(ih,{ref:D,awemeIdsRef:ea,defaultList:I,scrollParentEl:Y,scrollListenerEl:W,renderItem:eS,fetchMore:eI,modalAwemeInfo:w,abTestData:H,selectedTab:h,isGaiaTab:u.is_active_tab,tagId:"0"!==h&&h?h:"",perfLogFunctions:b,setLoadingElement:eu,setShowReplaceLoading:R,showReplaceLoading:P})})]})},lK=l("172660"),lQ=l("794593"),l0=()=>{let e=(0,n.useRef)({step:{init:!1,skeleton:!1,cover:!1,loadmore:0,top_card_cover:!1,top_card_load_data:!1},info:{reload:!1,tabChange:!1,log:!1,activeKey:"",sub_tab_name:"",filter_name:""}}),i=()=>{let i=(0,J.I)()?"route":"url",l=e.current.info.reload?"reload":i;return e.current.info.tabChange&&(l=`tab-change-${e.current.info.activeKey}`),{enter_from:(0,lI.yW)(),from:l}},l=i=>(0,J.I)()||e.current.info.reload?(0,eB.J1)(i)-(0,eB.J1)(d.w3.page.page_init_time):(0,eB.J1)(i),t=i=>{if((0,J.I)()||e.current.info.reload){let e=(0,eB.J1)(d.w3.page.page_tab_click_time);return e?((0,eB.tl)(d.w3.page.page_tab_click_time),(0,eB.J1)(i)-e):(0,eB.J1)(i)-(0,eB.J1)(d.w3.page.page_init_time)}if(!e.current.info.tabChange)return(0,eB.J1)(i);{var l;let e=null!==(l=(0,eB.J1)("discover_tab_change"))&&void 0!==l?l:0;return(0,eB.J1)(i)-e}},o=(0,n.useCallback)(i=>e.current.info.activeKey===i,[]);(0,B.o)(()=>z.listen(z.EVENT.RefreshFeedList,i=>{(0,eB.B1)({tag:d.w3.page.page_init_time}),e.current.step.cover=!1,e.current.step.top_card_cover=!1,e.current.step.top_card_load_data=!1,e.current.info.reload=!0,e.current.info.tabChange=!1,e.current.info.log=!1}),[]),(0,a.w)(()=>{(0,eB.tl)("discover_tab_change")},[]);let r=async function(){var n;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0],e.current.info.log)return;let{enter_from:o,from:r}=i();if($.Le.getConfig($.gI.DiscoverPageCache)){let e=(0,eB.J1)(d.w3.page.cache_page_active_time)-(0,eB.J1)("click_discover_tab");lQ.Z.report("web_perf_timing",{enter_from:o,from:"cache",[d.w3.moment.first_img_render_time]:e});return}let a=l(d.w3.moment.skeleton_render_time),u=l(d.w3.fetchers.fetcher_waterfall_start),c=l(d.w3.fetchers.fetcher_waterfall_end),v=t(d.w3.moment.first_img_render_time),m={enter_from:o,from:r,[d.w3.fetchers.fetcher_waterfall_start]:u,[d.w3.fetchers.fetcher_waterfall_end]:c,[d.w3.fetchers.fetcher_waterfall_duration]:c-u,[d.w3.moment.skeleton_render_time]:a,[d.w3.moment.first_img_render_time]:v};if(performance.getEntriesByName("img-loaded")[0]&&"url"===r&&(null===(n=window.pageDirectRender)||void 0===n?void 0:n.imageLoadedTime)){let e=window.pageDirectRender.imageLoadedTime;(0,eB.tl)("img-loaded");let i=(0,s.DT)()?await (0,lK.PQ)(e):{};lQ.Z.report("web_perf_timing",(0,f._)((0,_._)({},i,m),{from:"url",[d.w3.moment.first_img_render_time]:e,scene:window.JX_CACHE?"first_screen_cache":""}))}else{let e=(0,s.DT)()?await (0,lK.PQ)(v):{};lQ.Z.report("web_perf_timing",(0,_._)({},e,m))}e.current.info.log=!0},u=()=>{e.current.step.loadmore=0},c=(0,n.useCallback)(()=>{!e.current.step.skeleton&&((0,eB.B1)({tag:d.w3.moment.skeleton_render_time}),e.current.step.skeleton=!0)},[]),v=(0,n.useCallback)(async(l,n,o)=>{if((null==o?void 0:o.isTopCard)&&l&&!e.current.step.top_card_cover){var a,u,c;if(e.current.step.top_card_cover=!0,$.Le.getConfig($.gI.DiscoverPageCache))return;(0,eB.B1)({tag:"jingxuan_top_card_img_loaded"});let{from:l}=i(),n=null===(a=performance.getEntriesByName("jingxuan_top_card_img_loaded"))||void 0===a?void 0:a[0],r=null===(u=performance.getEntriesByName("jingxuan_cache_top_card_img_loaded"))||void 0===u?void 0:u[0],d=null!==(c=null==n?void 0:n.startTime)&&void 0!==c?c:0,v=t("jingxuan_top_card_img_loaded");r&&(d=r.startTime,v=r.startTime,(0,eB.tl)("jingxuan_cache_top_card_img_loaded"));let m=(0,s.DT)()?await (0,lK.VU)(v,d):{};lQ.Z.report("jingxuan_perf_timing",(0,f._)((0,_._)({},m),{from:l,first_img_load_time:v,is_first_large_card_outflow:(null==o?void 0:o.isBigCard)?"1":"0",sub_tab_name:e.current.info.sub_tab_name,filter_name:e.current.info.filter_name,scene:"url"===l&&window.JX_CACHE?"first_screen_cache":""}))}!e.current.step.cover&&l&&((0,eB.B1)({tag:d.w3.moment.first_img_render_time}),e.current.step.cover=!0,r(n))},[]),m=(0,n.useCallback)(async l=>{if((null==l?void 0:l.isTopCard)&&!e.current.step.top_card_load_data){var n,o;e.current.step.top_card_load_data=!0;let{from:r}=i(),a=null===(n=performance.getEntriesByName("jx-top-card-quickstart-first-frame"))||void 0===n?void 0:n[0],d=null===(o=performance.getEntriesByName("jx-top-card-first-frame"))||void 0===o?void 0:o[0],u=t("jx-top-card-first-frame"),c="";a&&(u=t("jx-top-card-quickstart-first-frame"),(0,eB.tl)("jx-top-card-quickstart-first-frame"),c="quickstart");let v=a?a.startTime:null==d?void 0:d.startTime,m=(0,s.DT)()?await (0,lK.Qq)(u,v):{};lQ.Z.report("jingxuan_perf_timing",(0,f._)((0,_._)({},m),{from:r,cost:null==l?void 0:l.cost,first_data_load_time:u,is_first_large_card_outflow:(null==l?void 0:l.isBigCard)?"1":"0",sub_tab_name:e.current.info.sub_tab_name,filter_name:e.current.info.filter_name,scene:c}))}},[]),g=(0,n.useCallback)(e=>{let{enter_from:l}=i();(0,eB.B1)({tag:"discover_tab_active"});let t=(0,eB.J1)("discover_tab_change");if(!t)return;let n=(0,eB.J1)("discover_tab_active");lQ.Z.report("web_perf_timing",{enter_from:l,from:`tab-change-${e}-cache`,[d.w3.moment.first_img_render_time]:n-t})},[]),h=(0,n.useCallback)(i=>{e.current.info.activeKey=i},[]),p=(0,n.useCallback)(i=>{e.current.info.sub_tab_name=i.sub_tab_name,e.current.info.filter_name=i.filter_name},[]),w=(0,n.useCallback)(i=>{e.current.step.cover=!1,e.current.info.reload=!1,e.current.info.log=!1,e.current.step.top_card_cover=!1,e.current.step.top_card_load_data=!1,h(i),e.current.info.tabChange=!0,(0,eB.B1)({tag:"discover_tab_change"})},[]),C=(0,n.useCallback)(i=>{i===e0.LOADING&&0===e.current.step.loadmore&&(e.current.step.loadmore=1,(0,eB.B1)({tag:"page_discover_loadmore_show",detail:{status:i}})),i===e0.SUCCESS&&1===e.current.step.loadmore&&(e.current.step.loadmore=2,(0,eB.B1)({tag:"page_discover_loadmore_hidden",detail:{status:i}}),u())},[]),x=(0,n.useCallback)(()=>{(0,eB.B1)({tag:d.w3.page.page_init_time}),(0,eB.tl)(d.w3.fetchers.fetcher_waterfall_start),(0,eB.tl)(d.w3.fetchers.fetcher_waterfall_end);let{step:i,info:l}=e.current;i.cover=!1,i.top_card_cover=!1,i.top_card_load_data=!1,i.skeleton=!1,i.loadmore=0,l.log=!1,l.reload=!0,l.tabChange=!1},[]);return!e.current.step.init&&((0,eB.B1)({tag:d.w3.page.page_init_time}),e.current.step.init=!0),(0,B.o)(()=>{$.Le.getConfig($.gI.DiscoverPageCache)&&((0,eB.B1)({tag:d.w3.page.cache_page_active_time}),r())},[]),(0,a.w)(()=>{$.Le.setConfig($.gI.DiscoverPageCache,!0),e.current.info.log=!1},[]),(0,n.useEffect)(()=>{let e=()=>r();return document.addEventListener("visibilitychange",e),window.addEventListener("beforeunload",e),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("beforeunload",e),r(),(0,eB.tl)(d.w3.fetchers.fetcher_waterfall_start),(0,eB.tl)(d.w3.fetchers.fetcher_waterfall_end)}},[]),(0,n.useRef)({onSkeletonShow:c,onLoadMoreShow:C,onCoverLoad:v,onLoadedData:m,onReload:x,onCacheTabActive:g,updateTabInfo:h,updateLogInfo:p,onTabChange:w,isActiveTab:o}).current},l1=l("387595");let l2=eY._D[eY.JY.Course],l3=e=>(null==e?void 0:e.length)?[{tagId:0,tagLevel:0,tagTitle:"全部"},...e]:[],l5=e=>{var i;return e?`[${null!==(i=e.parentTagId)&&void 0!==i?i:e.tagId},${e.parentTagId?e.tagId:0},0]`:"[0,0,0]"};var l6=l("906499"),l4={container:"BV4VjV4V",switchBtn:"yNXnwbCx",tabList:"MiT1nPeA",tabExpand:"a4PHYcwe",tab:"G64ykXqt",disabled:"kGkPufW9",active:"aFtto_CK"};let l7=(0,I.ZP)(()=>l.e("56877").then(l.bind(l,551303)),{ssr:!1}),l8=[{label:"全部",key:"0"},{label:"公开课",key:"100000"},{label:"游戏",key:"300205"},{label:"二次元",key:"300206"},{label:"音乐",key:"300209"},{label:"美食",key:"300204"},{label:"知识",key:"300213"},{label:"体育",key:"300207"}],l9=e=>{let i=(0,n.useMemo)(()=>(null==e?void 0:e.length)?e:l8,[e]);return(0,n.useEffect)(()=>{(0,K.mi)(i)},[i]),i};var te=e=>{var i;let{className:l,tabClassName:o,style:r,onTabClick:a,tabList:d,activeKey:s,onTabChange:u,disabled:c=!1,abTestData:v,isSpider:m}=e,_=(0,n.useRef)(null),f=(0,n.useRef)(null),g=l9(d),h=(e,i)=>{null==a||a(e,i),!c&&(null==e?void 0:e.key)!==s&&(null==u||u(e,i))};return(0,n.useEffect)(()=>{var e,i;null==f||null===(i=f.current)||void 0===i||null===(e=i.updateButtonStatus)||void 0===e||e.call(i)},[g]),(0,t.jsxs)("div",{className:p()(l4.container,l4.tabExpand,l),style:r,children:[(0,t.jsx)("div",{className:l4.tabList,ref:_,children:null==g?void 0:null===(i=g.map)||void 0===i?void 0:i.call(g,(e,i)=>{var l;let{label:n,key:r}=e,a=null!==(l=eY.z0[Number(r)])&&void 0!==l?l:"all",d="all"===a?"/jingxuan":`/jingxuan/${a}`,u=`https://www.douyin.com${d}`;return(0,t.jsx)("div",{className:p()(l4.tab,{[l4.active]:r===s,[l4.disabled]:c},o),onClick:l=>{var t,n;h(e,i),null==f||null===(n=f.current)||void 0===n||null===(t=n.onItemClick)||void 0===t||t.call(n,l,i)},onMouseEnter:()=>{var e;let{predictor:i}=null!==(e=(0,K.Z1)(r))&&void 0!==e?e:{};if(r!==s&&!c&&!!i)i.enter({params:{useV2:1,liteType:1,tagId:r},fetcherOptions:{expired:3e4,resetExpiredCacheBefore:!1,hoverDelay:!0}})},children:m?(0,t.jsx)(l6.a,{target:"_blank",href:u,children:n}):n},r)})}),(0,t.jsx)(M.SV,{Slardar:es.oe,children:(0,t.jsx)(n.Suspense,{fallback:null,children:(0,t.jsx)(l7,{ref:f,className:l4.switchBtn,scrollRef:_})})})]})};let ti=(e,i)=>{let l=(0,n.useMemo)(()=>((null==e?void 0:e.length)?e:l8).some(e=>e.key===i)?i:"0",[i,e]),t=(0,n.useRef)(l);return(0,n.useEffect)(()=>{t.current=l},[l]),(0,n.useEffect)(()=>{let e=new URL(location.href);e.searchParams.get("tag_id")&&(e.searchParams.delete("tag_id"),window.history.replaceState(null,"",e))},[]),{selectedTab:l,selectedTabRef:t}};var tl=l("903868"),tt=l("434330");let tn=()=>{var e;let i=null!==(e=$.Le.getConfig($.gI.JxRedisExpireTime))&&void 0!==e?e:0;if(!(-1===i||Date.now()<i))(0,tt._)().then(e=>{var i,l;0!==e.statusCode&&999!==e.statusCode?$.Le.setConfig($.gI.JxRedisExpireTime,-1):0===e.statusCode&&(null===(i=e.data)||void 0===i?void 0:i.timestamp)&&$.Le.setConfig($.gI.JxRedisExpireTime,null===(l=e.data)||void 0===l?void 0:l.timestamp)})},to=(0,I.ZP)(()=>l.e("56877").then(l.bind(l,551303)),{ssr:!1}),tr={mp4encryptplayer:{config:{waitingTimeOut:7500,canplayTimeout:7500,timeout:4500}},DASHPlugin:{waitingTimeOut:7500,canplayTimeout:7500,timeout:4500}},ta=n.forwardRef((e,i)=>{let{request:l,resetRefreshIndex:o,tabs:s,country:c,defaultTagId:v,onChannelTabChange:m,onChannelTabReload:h,defaultSubTags:I,quickPlayerReuseEffectCb:b}=e,{homeFetchData:y,setHomeFetchData:L,isDefaultLanding:j,updateFeedCardAdResourceList:k,updateSubTabLiveCardList:T,ssrTagId:E}=(0,eZ.useDiscoverCommonContext)((0,eo.P1)(["homeFetchData","setHomeFetchData","isDefaultLanding","updateFeedCardAdResourceList","updateSubTabLiveCardList","ssrTagId"])),{isListenVideoMiniWin:S,jxRedisMode:N}=(0,tl.Iq)(e=>{let{isListenVideoMiniWin:i,jxRedisMode:l}=e;return{isListenVideoMiniWin:i,jxRedisMode:l}}),[P,R]=(0,n.useState)(null),[A,er]=(0,n.useState)(null),[ea,em]=(0,n.useState)({}),[e_,ef]=(0,n.useState)(!1),eh=(0,n.useRef)(null);(0,n.useRef)(null);let ep=(0,n.useRef)(null),[ew,eC]=(0,n.useState)(null),ex=l9(s),{selectedTab:eI,selectedTabRef:eb}=ti(ex,v),ey=(0,iE.useUserInfoContext)()||{},eL=(0,lW._)()||{},{targetResource:ej,handleTagChange:ek,resourceList:eT}=(0,X.II)(e=>{let{targetResource:i,handleTagChange:l,resourceList:t}=e;return{targetResource:i,handleTagChange:l,resourceList:t}}),{stuff_detail:eE}=ej||{},{keep_old_component:eS}=eE||{},eN=null==A?void 0:A.awemeId,eP=l0(),eR="replace"===N&&E===eI,[eA,eD]=(0,n.useState)(eR),eM=iP(eL);(0,r.C)(d.w3.components.discover_feed_list);let eO=(0,n.useMemo)(()=>{var e;return null==eT?void 0:null===(e=eT.find)||void 0===e?void 0:e.call(eT,e=>{try{var i;let l=JSON.parse(null==e?void 0:e.stuff_detail);return(null==l?void 0:l.reuse_tab)&&(null==l?void 0:null===(i=l.tab)||void 0===i?void 0:i.includes("300205"))}catch(e){return!1}})},[eT]);(0,n.useImperativeHandle)(i,()=>({setShowReplaceLoading:eD}));let{enableSaveCacheCsr:eV}=function(e){var i,l,t;let{abTestData:o}=e,r=(null==o?void 0:o.jxAllowCache)&&(null==o?void 0:null===(i=o.jxCacheMode)||void 0===i?void 0:i.cache)&&(null==o?void 0:null===(l=o.jxCacheMode)||void 0===l?void 0:l.mode)===0&&(null==o?void 0:o.jxCachePerf)===1&&(null==o?void 0:null===(t=o.jxCacheMode)||void 0===t?void 0:t.expire),a=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!r)return;a.current=setTimeout(()=>{a.current=null,tn()},6e5);let e=()=>{"hidden"===document.visibilityState&&tn()};return document.addEventListener("visibilitychange",e),()=>{clearTimeout(a.current),document.removeEventListener("visibilitychange",e)}},[]),{enableSaveCacheCsr:r}}({abTestData:eL,selectedTab:eI});(0,n.useEffect)(()=>{var e;let i=null==eL?void 0:null===(e=eL.jxCacheMode)||void 0===e?void 0:e.expire;if(y&&eV&&i){let e=Date.now()+1e3*i;$.Le.setConfig($.gI.JxRedisExpireTime,e)}},[]),(0,O.C)(()=>{var e,i,l,t,n,o,r,a,d,s,u,c,v,m,_,f,g,h,p,w,C,x,I,b,y,L,j,k,T,E,S,N,P,A,D,M,O,V,B;if(window.JX_IS_HYDRATED=!0,(null===(i=window)||void 0===i?void 0:null===(e=i.__QUICK_PLAYER)||void 0===e?void 0:e.removeCardHandlers)&&(window.__QUICK_PLAYER.removeCardHandlers.forEach(e=>"function"==typeof e&&e()),delete window.__QUICK_PLAYER.removeCardHandlers),(null===(t=window)||void 0===t?void 0:null===(l=t.__QUICK_PLAYER)||void 0===l?void 0:l.player)&&(null===(o=window)||void 0===o?void 0:null===(n=o.__QUICK_PLAYER)||void 0===n?void 0:n.awemeInfo))R(null===(c=window)||void 0===c?void 0:null===(u=c.__QUICK_PLAYER)||void 0===u?void 0:u.awemeInfo),er(null===(m=window)||void 0===m?void 0:null===(v=m.__QUICK_PLAYER)||void 0===v?void 0:v.awemeInfo),ei.YY.setReusePlayer(el.v.Discover,null===(g=window)||void 0===g?void 0:null===(f=g.__QUICK_PLAYER)||void 0===f?void 0:null===(_=f.awemeInfo)||void 0===_?void 0:_.awemeId,null===(p=window)||void 0===p?void 0:null===(h=p.__QUICK_PLAYER)||void 0===h?void 0:h.player),ei.YY.setPlayerReuseAble(el.v.Discover,null===(x=window)||void 0===x?void 0:null===(C=x.__QUICK_PLAYER)||void 0===C?void 0:null===(w=C.awemeInfo)||void 0===w?void 0:w.awemeId);else if((null===(a=window)||void 0===a?void 0:null===(r=a.__JX_BIG_CARD_QUICK_PLAYER)||void 0===r?void 0:r.player)&&(null===(s=window)||void 0===s?void 0:null===(d=s.__JX_BIG_CARD_QUICK_PLAYER)||void 0===d?void 0:d.mountType)==="modal"){let e=null===(b=window)||void 0===b?void 0:null===(I=b.__JX_BIG_CARD_QUICK_PLAYER)||void 0===I?void 0:I.awemeInfo;e.isTopCard=!0,!window.__QUICK_PLAYER&&(window.__QUICK_PLAYER={}),window.__QUICK_PLAYER.pageName="jingxuan",window.__QUICK_PLAYER.player=null===(L=window)||void 0===L?void 0:null===(y=L.__JX_BIG_CARD_QUICK_PLAYER)||void 0===y?void 0:y.player,window.__QUICK_PLAYER.playerId=null===(k=window)||void 0===k?void 0:null===(j=k.__JX_BIG_CARD_QUICK_PLAYER)||void 0===j?void 0:j.playerId,window.__QUICK_PLAYER.awemeInfo=e,window.__QUICK_PLAYER.destroyQuickPlayerDom=()=>{var e,i,l,t;null===(e=window.__QUICK_PLAYER)||void 0===e||delete e.player,null===(t=window)||void 0===t||null===(l=t.__JX_BIG_CARD_QUICK_PLAYER)||void 0===l||null===(i=l.destroyQuickPlayerDom)||void 0===i||i.call(l)},R(e),er(e),ei.YY.setReusePlayer(el.v.Discover,null===(S=window)||void 0===S?void 0:null===(E=S.__QUICK_PLAYER)||void 0===E?void 0:null===(T=E.awemeInfo)||void 0===T?void 0:T.awemeId,null===(P=window)||void 0===P?void 0:null===(N=P.__QUICK_PLAYER)||void 0===N?void 0:N.player),ei.YY.setPlayerReuseAble(el.v.Discover,null===(M=window)||void 0===M?void 0:null===(D=M.__QUICK_PLAYER)||void 0===D?void 0:null===(A=D.awemeInfo)||void 0===A?void 0:A.awemeId),null===(V=window)||void 0===V||null===(O=V.removeBigCardQuickPlayerCrossVolume)||void 0===O||O.call(V)}else null===(B=window)||void 0===B||delete B.__QUICK_PLAYER},[]),(0,n.useEffect)(()=>{let{url:e,query:i}=g.parseUrl(location.href);(null==i?void 0:i.modal_id)&&eF(e=>(0,f._)((0,_._)({},e),{targetGid:null==i?void 0:i.modal_id,ready:!0}))},[]);let[eB,eF]=(0,n.useState)({ready:!1,awemeList:[],targetGid:""}),eU=(0,n.useRef)(""),eH=(0,n.useMemo)(()=>{var e,i;return K.WB.setDelay((null==eL?void 0:null===(e=eL.jingxuanModalOpt)||void 0===e?void 0:e.triggerTime)||2e3),{action:U.MainHoverPreloadAction.hover,cache:U.MainHoverPreloadCache.off,cacheTime:0,count:(null==eL?void 0:null===(i=eL.jingxuanModalOpt)||void 0===i?void 0:i.preloadCount)||8}},[eL]);(0,n.useEffect)(()=>{(null==eH?void 0:eH.cache)===U.MainHoverPreloadCache.on&&ev.Z.setCacheTime(null==eH?void 0:eH.cacheTime)},[eH]),(0,n.useEffect)(()=>{var e,i,l,t,n;eU.current=null==A?void 0:A.awemeId,A&&(null===(l=window)||void 0===l?void 0:null===(i=l.__JX_BIG_CARD_QUICK_PLAYER)||void 0===i?void 0:null===(e=i.awemeInfo)||void 0===e?void 0:e.awemeId)!==(null==A?void 0:A.awemeId)&&(null===(t=(n=window).disabledBigCardQuickPlayer)||void 0===t||t.call(n,"pause"))},[A]);let eG=(0,n.useMemo)(()=>{let e=[],i=!1;if((null==eH?void 0:eH.action)===U.MainHoverPreloadAction.hover||(null==eH?void 0:eH.action)===U.MainHoverPreloadAction.click){var l;let t=!1;(null==eL?void 0:null===(l=eL.jingxuanModalOpt)||void 0===l?void 0:l.logicOptimize)&&(t=!!(null==A?void 0:A.awemeId)),e=(null==A?void 0:A.awemeId)===(null==eB?void 0:eB.targetGid)?eB.awemeList:[],i=(null==A?void 0:A.awemeId)===(null==eB?void 0:eB.targetGid)?eB.ready:t}else i=!0;return{preloadAwemeList:e,preloadReady:i}},[eH,eB,null==A?void 0:A.awemeId,eL]),e$=(0,n.useCallback)(async(e,i,l)=>{var t;if(null===(t=ex.find(e=>e.key===eI))||void 0===t?void 0:t.is_active_tab)return;let n=(null==eH?void 0:eH.cache)===U.MainHoverPreloadCache.on;if((null==eH?void 0:eH.action)===i){if(n){let i=ev.Z.getCache(e);if(i){!i.loading&&eF({ready:!0,awemeList:null==i?void 0:i.value,targetGid:e});return}}let i={targetGid:e,tagId:"0"===eI?"":eI,onRequestBefore:()=>{var i;(null==eL?void 0:null===(i=eL.jingxuanModalOpt)||void 0===i?void 0:i.logicOptimize)&&eF({ready:!1,awemeList:[],targetGid:e}),n&&ev.Z.setCacheLaoading(e)},callback:i=>{var l;n&&ev.Z.setCache(e,i),(null!=eL&&null!==(l=eL.jingxuanModalOpt)&&void 0!==l&&l.logicOptimize&&!eU.current||eU.current===e)&&eF({ready:!0,awemeList:i,targetGid:e})},useV2:1,count:(null==eH?void 0:eH.count)||8};l?null===K.WB||void 0===K.WB||K.WB.enter({params:i,fetcherOptions:{hoverDelay:!1}}):null===K.ky||void 0===K.ky||(0,K.ky)(i)}},[eH,eI,eL]),ez=(0,n.useCallback)(()=>{(null==eH?void 0:eH.action)===U.MainHoverPreloadAction.hover&&(null===K.WB||void 0===K.WB||K.WB.leave())},[K.WB,eH]),eW=(0,n.useCallback)(e=>{var i;if(null==eL?void 0:null===(i=eL.jingxuanModalOpt)||void 0===i?void 0:i.logicOptimize){null==e$||e$(e,U.MainHoverPreloadAction.click,!1);return}if((null==eH?void 0:eH.action)===U.MainHoverPreloadAction.hover){let i=(null==eH?void 0:eH.cache)===U.MainHoverPreloadCache.on?ev.Z.getCache(e):null;i?!i.loading&&eF({awemeList:null==i?void 0:i.value,targetGid:e,ready:!0}):(null===K.WB||void 0===K.WB||K.WB.leave(),eF(i=>(0,f._)((0,_._)({},i),{targetGid:e,ready:!0})))}null==e$||e$(e,U.MainHoverPreloadAction.click,!1)},[e$,eH,eL]),eJ=(0,n.useCallback)(e=>{eW(e)},[eW]),eq=(0,n.useCallback)(async()=>{if(S){var e;let i=et.e.getPipWindow({scene:V.d.ListenVideo});null==i||null===(e=i.close)||void 0===e||e.call(i)}ef(!0)},[S]),{subTags:eX,subTagInfoRef:eK,currentSubTag:eQ,preloadTagOnHover:e0,onSubTagClick:e1,getSubTabKey:e2,refReloadSubTab:e3}=function(e){let{selectedTab:i,defaultSubTags:l,setHomeFetchData:t}=e,[o,r]=(0,n.useState)(l3(null==l?void 0:l[l2])),[a,d]=(0,n.useState)(i===l2&&(null==o?void 0:o.length)?o:[]),[s,u]=(0,n.useState)(a[0]),[c,v]=(0,n.useState)(0),m=(0,n.useRef)({courseTagIdStr:"[0,0,0]"});m.current.courseTagIdStr=l5(s),(0,n.useEffect)(()=>{let e=i===l2&&(null==o?void 0:o.length)?o:[];d(e),u(e[0])},[i,o]),(0,n.useEffect)(()=>{if(null==o?void 0:o.length){(0,K.mk)(o.map(l5));return}let e=!1;return(0,eg.W)({tabId:"screen_course_page"}).then(i=>{if(!e&&0===i.statusCode){let e=l3(i.tagList);r(e),e.length&&(0,K.mk)(e.map(l5)),$.Le.setConfig($.gI.JxCourseFilterList,i.tagList.map(e=>e.tagTitle).join(","))}}),()=>{e=!0}},[]);let _=(0,F.d)(()=>{t(void 0),u(a[0]),v(0)});{let e=null==l?void 0:l[l2];e&&!$.Le.getConfig($.gI.JxCourseFilterList)&&$.Le.setConfig($.gI.JxCourseFilterList,e.map(e=>e.tagTitle).join(","))}return{subTags:a,subTagInfoRef:m,currentSubTag:s,onSubTagClick:(e,i)=>{t(void 0),(null==s?void 0:s.tagId)===e.tagId?v(Math.floor(1e4*Math.random())):(u(e),v(0)),i===l2&&lM.sendLog("discoverCourserFilterListClick",{filter_list:$.Le.getConfig($.gI.JxCourseFilterList)||"",filter_name:e.tagTitle,sub_tab_name:"course",enter_method:"other",enter_from:"discover"})},preloadTagOnHover:(e,i)=>{if(i===l2){var l,t;if(e.tagTitle===(null==s?void 0:s.tagTitle))return;let i=l5(e),n=null===(l=(0,K.oZ)(i))||void 0===l?void 0:l.predictor;null==n||null===(t=n.enter)||void 0===t||t.call(n,{params:{tabId:"screen_course_page",offset:0,size:6,tagIdList:i,idList:""},fetcherOptions:{expired:36e5,resetExpiredCacheBefore:!1,hoverDelay:!0}})}},refReloadSubTab:_,getSubTabKey:e=>{if(e===l2)return`${m.current.courseTagIdStr}-${c}`}}}({selectedTab:eI,defaultSubTags:I,setHomeFetchData:L}),[e5,e6]=(0,n.useState)(new Map().set(eI,{timeStamp:Date.now(),key:`tabPanelCt-${eI}-1`})),e4=(0,n.useCallback)(e=>{if(null==h||h(e),eP.updateTabInfo(e),eP.onReload(),e===eY._D[eY.JY.Course]){var i;null===(i=e3.current)||void 0===i||i.call(e3)}e6(i=>{let l=new Map;return Array.from(i.entries()).forEach(i=>{let[t,n]=i;l.set(t,t===e?{timeStamp:Date.now(),key:`tabPanelCt-${t}-${n.key.endsWith("1")?"0":"1"}`}:n)}),l})},[]);(0,B.o)(()=>z.listen(z.EVENT.refreshPage,()=>{e4(eI)}),[e4,eI]);let e7=(0,C.u)(),e8=(0,n.useCallback)(e=>{var i,l,t,n,r;null==m||m(e),null==o||o();let a=(null===(i=ex.find(i=>i.key===e))||void 0===i?void 0:i.is_active_tab)?e:null!==(l=eY.z0[Number(e)])&&void 0!==l?l:"all";e7("all"===a?"/jingxuan":`/jingxuan/${a}`),null==ek||ek(e),eP.onTabChange(e);let d=new Map;Array.from(e5.entries()).forEach(e=>{let[i,l]=e;d.set(i,l)});let s=d.get(eI);d.set(eI,{timeStamp:Date.now(),key:null!==(t=null==s?void 0:s.key)&&void 0!==t?t:`tabPanelCt-${eI}-1`});let u=d.get(e),c="300205"===e&&eO;(!u||c||u.timeStamp+3e5<Date.now())&&(d.set(e,{timeStamp:Date.now(),key:`tabPanelCt-${e}-${(null==u?void 0:null===(r=u.key)||void 0===r?void 0:null===(n=r.endsWith)||void 0===n?void 0:n.call(r,"1"))?"0":"1"}`}),null==o||o()),e6(d)},[o,ek,eO,e5,eI]),e9=(0,n.useCallback)(e=>{e===eI&&(lM.sendLog("clickDiscoverTabReload",{tab_name:eI||"0"}),null==k||k(eI),null==T||T(),e4(eI))},[eI,e4]),ie=(0,F.d)(e8);(0,a.w)(()=>{(0,W.Nr)(location.pathname)||0===Number(eb.current)||ie.current("0")},[]);let ii=(0,n.useCallback)(()=>{null==b||b()},[b]);(0,n.useEffect)(()=>{var e,i;let l=e=>{var i,l,t,n,o,r,a,d,s,u;let{target:c}=e;if(!c||(null===(l=c.classList)||void 0===l?void 0:null===(i=l.contains)||void 0===i?void 0:i.call(l,"semi-tabs-tab-active")))return;let v=null==c?void 0:null===(n=c.dataset)||void 0===n?void 0:null===(t=n.tabkey)||void 0===t?void 0:t.slice(7);if(!v||Date.now()-(null!==(a=null===(o=e5.get(v))||void 0===o?void 0:o.timeStamp)&&void 0!==a?a:0)<=3e5)return;if(v===eY._D[eY.JY.Course]){let e=null===(d=(0,K.oZ)("[0,0,0]"))||void 0===d?void 0:d.predictor;null==e||null===(s=e.enter)||void 0===s||s.call(e,{params:{tabId:"screen_course_page",offset:0,size:6,tagIdList:"[0,0,0]",idList:""},fetcherOptions:{expired:36e5,resetExpiredCacheBefore:!1,hoverDelay:!0}});return}let{predictor:m}=null!==(u=(0,K.Z1)(v))&&void 0!==u?u:{};if(v===eb.current||!m)return;let _=null===(r=ex.find(e=>e.key===v))||void 0===r?void 0:r.is_active_tab;m.enter({params:{useV2:1,liteType:1,tagId:v,activeId:_?v:"",isActiveTab:_,pullType:eM.current&&"0"===v?8:void 0},fetcherOptions:{expired:3e4,resetExpiredCacheBefore:!1,hoverDelay:!0}})},t=[];return null===(i=document.querySelectorAll(".discover-tab-bar .semi-tabs-tab-top.semi-tabs-tab-single"))||void 0===i||null===(e=i.forEach)||void 0===e||e.call(i,e=>{e.addEventListener("mouseenter",l),t.push(()=>{e.removeEventListener("mouseenter",l)})}),()=>{t.forEach(e=>null==e?void 0:e()),t=[]}},[ex,e5,eL]);let il=(0,C.a)(),it=(0,u.e2)(il.pathname)&&!(0,W.Nr)(il.pathname),io=(0,F.d)(e=>{z.emit(z.EVENT.triggerModalPlayerClose),z.emit(z.EVENT.closeImConversation),er(e),$.Le.setConfig($.gI.ModalStartOpenTime,Date.now()),eW(null==e?void 0:e.awemeId)});(0,l1.x)(!A,io,!0),(0,n.useEffect)(()=>{var e;let i=document.querySelector(".discover-tab-container.semi-tabs.semi-tabs-top"),l=document.querySelector(".discover-tab-bar.semi-tabs-bar.semi-tabs-bar-line.semi-tabs-bar-top");ep.current=l,eC(i);let t=setTimeout(()=>{var e,i;null==eh||null===(i=eh.current)||void 0===i||null===(e=i.updateButtonStatus)||void 0===e||e.call(i)},200),n=e=>{var i,l;null==e||e.stopPropagation(),null==eh||null===(l=eh.current)||void 0===l||null===(i=l.updateButtonStatus)||void 0===i||i.call(l)};return null==l||null===(e=l.addEventListener)||void 0===e||e.call(l,"scroll",n),()=>{var e;null==l||null===(e=l.removeEventListener)||void 0===e||e.call(l,"scroll",n),clearTimeout(t)}},[ex]),(0,n.useEffect)(()=>{try{var e,i,l;if((0,J.I)())return;let t=(null==y?void 0:y.redisVersion)?"normal":"";(null==y?void 0:y.redisMode)==="replace"&&(t="replace"),lM.sendLog("firstScreenCount",{tab_name:(0,ee.zD)(),pathname:location.pathname,scene:t,count:null!==(i=null==y?void 0:null===(e=y.awemeList)||void 0===e?void 0:e.length)&&void 0!==i?i:-1,log_id:null!==(l=null==y?void 0:y.logId)&&void 0!==l?l:""})}catch(e){}},[]);let ir=(0,n.useMemo)(()=>{if(eI===eY._D[eY.JY.Course])return tr},[eI]),ia=(0,en.U)(),id=(0,n.useMemo)(()=>{var e;return(0,_._)({enter_from:"discover",enter_from_merge:"discover",cover_group_id:eN,from_group_id:eN,api_path:q.API_PATH_MODULE_FEED,live_log_params:(0,f._)((0,_._)({},ea||{}),{enter_from_merge:"web_homepage_discover",enter_method:"web_live_cell",cover_group_id:eN,from_group_id:eN,api_path:q.API_PATH_MODULE_FEED}),if_first_big_card:!1,sub_tab_name:null!==(e=eY.z0[eI])&&void 0!==e?e:eI,filter_name:eI===eY._D[eY.JY.Course]&&(null==eQ?void 0:eQ.tagTitle)||"",is_first_large_card_outflow:(null==A?void 0:A.isBigCard)?"1":"0"},j?{enter_method:"default_landing"}:{})},[eN,null==eQ?void 0:eQ.tagTitle,j,ea,null==A?void 0:A.isBigCard,eI]);return(0,n.useEffect)(()=>{eP.updateTabInfo(null!=eI?eI:"")},[eI]),(0,n.useEffect)(()=>{var e;eP.updateLogInfo({sub_tab_name:null!==(e=eY.z0[eI])&&void 0!==e?e:eI,filter_name:eI===eY._D[eY.JY.Course]&&(null==eQ?void 0:eQ.tagTitle)||""})},[eI,null==eQ?void 0:eQ.tagTitle]),(0,t.jsx)(G.k,{componentName:"FeedList",onError:ii,children:(0,t.jsxs)(D,{children:[(0,t.jsx)(x.Tabs,{keepDOM:!0,type:"line",lazyRender:!0,activeKey:eI,onChange:e8,onTabClick:(e,i)=>{var l,t,n;if("keydown"===i.type&&"Space"===i.code)return;e9(e);let o=null==ex?void 0:null===(l=ex.findIndex)||void 0===l?void 0:l.call(ex,i=>i.key===e);null==eh||null===(n=eh.current)||void 0===n||null===(t=n.onItemClick)||void 0===t||t.call(n,i,o)},className:p()("discover-tab-container",ec.tabs,{cover16To9Container:!!(null==eL?void 0:eL.jingxuanCover169),notCover16To9Container:!(null==eL?void 0:eL.jingxuanCover169),maxColumn4:(null==eL?void 0:eL.jingxuanCover169)===U.JingxuanCover169.V1||(null==eL?void 0:eL.jingxuanCover169)===U.JingxuanCover169.V2,maxColumn5:(null==eL?void 0:eL.jingxuanCover169)===U.JingxuanCover169.V3||(null==eL?void 0:eL.jingxuanCover169)===U.JingxuanCover169.V4||(null==eL?void 0:eL.jingxuanCover169)===U.JingxuanCover169.V5,maxColumn6:!(null==eL?void 0:eL.jingxuanCover169),jxThemeColorOptimize:!!(null==eL?void 0:eL.themeColorOptimize),[ec.jxThemeColor]:!!(null==eL?void 0:eL.themeColorOptimize)}),tabBarClassName:p()("discover-tab-bar",ec.discoverTabBar,ec.hasTabExpand,{[ec.hasSubList]:eX.length>0}),tabPaneMotion:!1,children:null==ex?void 0:ex.map(e=>{var i;return(0,t.jsx)(x.TabPane,{tab:e.label,itemKey:e.key,children:(0,t.jsx)(Q.O,{active:e.key===eI&&it,className:ec.tabPanelCt,children:eE&&!eS&&"300205"===eI?(0,t.jsx)(ed,{islandMode:"load",disableTDK:!0,className:ec.topicPage}):(0,t.jsxs)(t.Fragment,{children:[eX.length>0&&(0,t.jsx)("div",{className:p()(ec.subTabStickyContainer),children:eX.map(i=>(0,t.jsx)("div",{className:p()(ec.subTag,{[ec.active]:i.tagId===(null==eQ?void 0:eQ.tagId)}),onClick:()=>{e1(i,e.key)},onMouseEnter:()=>{if(i.tagId!==(null==eQ?void 0:eQ.tagId))e0(i,e.key)},children:i.tagTitle},i.tagId))}),eR&&(0,t.jsx)("div",{className:p()(ec.loadingContainer,{[ec.hidden]:!eA}),children:(0,t.jsx)(Z.gb,{})}),(0,t.jsx)(lX,{tab:e,isTabActive:ia&&eI===e.key,appendPlayerConfig:e.key===eY._D[eY.JY.Course]?tr:void 0,className:p()({[ec.waterfallPageWithSubTab]:eX.length>0}),subTagInfoRef:eK,filterName:e.key===eY._D[eY.JY.Course]?null==eQ?void 0:eQ.tagTitle:void 0,abTestData:eL,request:l,resetRefreshIndex:o,selectedTab:e.key,modalAwemeInfo:A,setModalAwemeInfo:er,setDefaultModalAwemeInfo:R,setLogParams:em,perfLogFunctions:eP,country:c,preloadModuleFeed:e$,onVideoCardClick:eJ,onVideoCardMouseLeave:ez,onClickPipIcon:eq,setShowReplaceLoading:eD,showReplaceLoading:eA},e2(e.key))]})},null===(i=e5.get(e.key))||void 0===i?void 0:i.key)},`panelKey_${e.key}`)})}),(0,t.jsx)(M.SV,{Slardar:es.oe,children:(0,t.jsx)(n.Suspense,{fallback:null,children:ew?(0,w.createPortal)((0,t.jsx)(to,{ref:eh,className:ec.switchBtn,scrollRef:ep}),ew):null})}),A&&(0,t.jsx)(Y.default,{appendPlayerConfig:ir,preloadReady:eG.preloadReady||P,preloadAwemeList:eG.preloadAwemeList,isUseChannelFeed:!1,modalAwemeInfo:A,userContext:ey,abtestData:eL,modalEnterFrom:H.a.WaterFall,close:()=>{z.emit(z.EVENT.UpdateJxOuterProgress,{awemeId:null==A?void 0:A.awemeId}),P&&R(null),er(null),ei.YY.clearAllReusePlayer(),((null==eH?void 0:eH.action)===U.MainHoverPreloadAction.click||(null==eH?void 0:eH.action)===U.MainHoverPreloadAction.hover)&&eF({ready:!1,targetGid:"",awemeList:[]})},anyHooks:e=>{var i;let l="0"===eI?"":eI,t=l===eY._D[eY.JY.Course];t&&(l=eY._D[eY.JY.Knowledge]);let n=null===(i=ex.find(e=>e.key===eI))||void 0===i?void 0:i.is_active_tab;return(0,eu.b)((0,f._)((0,_._)({},e),{tagId:l,isActiveTab:n,isCourseTab:t}))},scene:"waterFall",reuseConfig:{scene:el.v.Discover,reuseId:null==A?void 0:A.awemeId,autoCreate:!1,keepPlayer:null==A?void 0:A.isTopCard},logParams:id,hideModalWhenPip:!0,hideModalByPipInitial:e_,setHideModalByPipInitial:ef,autoOpenPip:!0})]})})});l("302653");let td=e=>{var i;let l=(0,lW._)(),t=!!(e&&(null==e?void 0:null===(i=e.awemeList)||void 0===i?void 0:i.length)),o=(0,n.useRef)(t?1:0),r=(0,n.useCallback)(async(e,i)=>{o.current+=1;let t=K.MX;if(null==i?void 0:i.tagId){var n,r;t=null!==(r=null===(n=(0,K.Z1)(i.tagId))||void 0===n?void 0:n.fetcher)&&void 0!==r?r:K.MX}return await t.request({cached:e,consume:!0,params:(0,_._)({useV2:1,refreshIndex:o.current,discoverTaskOptimize:null==l?void 0:l.discoverTaskOptimize},i),fetcherOptions:{resetExpiredCacheBefore:!1,hoverDelay:!0}})},[l]);return{request:r,resetRefreshIndex:(0,n.useCallback)(()=>{o.current=0},[])}};var ts={containerWrapper:"_kAB1Uz4",videoListContainer:"_Huh4h8J",channelTabs:"J8VqcEvn",cardWrapper:"uudlPMPX"};let tu=4/3;var tc=e=>{let{videoList:i}=e;return(0,t.jsx)(x.List,{grid:{gutter:20,span:12,lg:{span:8},xl:{span:6},xxl:{span:4}},dataSource:i,renderItem:(e,i)=>{var l,n,o;return(0,t.jsx)(x.List.Item,{children:(0,t.jsx)(lT.Z,{url:e.awemeType===eV.e.Note?(0,lx.Wr)(e.awemeId):(0,lx.JF)(e.awemeId),awemeInfo:e,description:e.desc,imgUrl:e.video.cover,userName:e.authorInfo.nickname,userHrefTarget:"_self",likesCount:(0,lt.qe)(e.stats.diggCount),videoTime:(0,lt.$y)(e.video.duration),width:e.video.width,height:e.video.height,userHref:(0,lx.HC)(null==e?void 0:null===(l=e.authorInfo)||void 0===l?void 0:l.secUid),showIntegrationTag:!1,willJump:!0,showImageInSSR:!0,isSpider:!0,isHorizontal:(null==e?void 0:null===(n=e.video)||void 0===n?void 0:n.width)>(null==e?void 0:null===(o=e.video)||void 0===o?void 0:o.height),fakeHorizontalInfo:null==e?void 0:e.fakeHorizontalInfo,isShowCreateTime:!0,videoImageStyle:{paddingTop:`${1/tu*100}%`},previewUrlList:[],style:{width:"100%"},useStyleInUserLink:!0},i)})}})},tv={container:"BsipbtF1",progressWrap:"DQrNr1gM",blur:"GcuENFWI",leftWrap:"AEruwqcu",rightWrap:"ZzoZfzdH",textCtl:"FjYSn821",ctlBtn:"rpDiVikl",playBtn:"gY6vHCX2",textWrap:"Gf9LsSXS",nickName:"eNZhohZD",title:"l7zzV7xD",infoWrap:"Q2thCSho",interaction:"dhcEkpj3"};let tm=e=>{let{text:i,count:l}=e;return(0,t.jsxs)("div",{className:tv.interaction,children:[(0,t.jsx)("span",{className:tv.interactType,children:i}),(0,t.jsx)("span",{className:tv.interactNum,children:l})]})},t_=e=>{let{children:i}=e;return(0,t.jsx)("div",{className:tv.ctlBtn,children:i})};var tf=e=>{var i,l,n;let{videoInfo:o}=e;return(0,t.jsxs)("div",{className:tv.container,children:[(0,t.jsx)("video",{poster:null==o?void 0:null===(i=o.video)||void 0===i?void 0:i.cover}),(0,t.jsxs)("div",{className:tv.textWrap,children:[(0,t.jsxs)("div",{className:tv.nickName,children:[(0,t.jsx)("a",{target:"_blank",href:(0,lx.HC)(null==o?void 0:null===(l=o.authorInfo)||void 0===l?void 0:l.secUid),rel:"noreferrer nofollow",children:null==o?void 0:null===(n=o.authorInfo)||void 0===n?void 0:n.nickname}),(0,t.jsx)("span",{children:(0,lt.YW)((null==o?void 0:o.createTime)*1e3)})]}),(0,t.jsx)("a",{className:tv.title,target:"_blank",href:(0,lx.$N)(null==o?void 0:o.awemeId),rel:"noreferrer nofollow",children:null==o?void 0:o.desc})]}),(0,t.jsxs)("div",{className:tv.progressWrap,children:[(0,t.jsxs)("div",{className:tv.leftWrap,children:[(0,t.jsx)(t_,{children:(0,t.jsx)("span",{className:tv.playBtn})}),(0,t.jsx)(t_,{children:(0,t.jsxs)("span",{className:tv.textCtl,children:["00:00 / ",(0,lt.$y)(null==o?void 0:o.video.duration)]})})]}),(0,t.jsxs)("div",{className:tv.rightWrap,children:[(0,t.jsx)(t_,{children:(0,t.jsx)("span",{className:tv.textCtl,children:"连播"})}),(0,t.jsx)(t_,{children:(0,t.jsx)("span",{className:tv.textCtl,children:"清屏"})}),(0,t.jsx)(t_,{children:(0,t.jsx)("span",{className:tv.textCtl,children:"智能"})}),(0,t.jsx)(t_,{children:(0,t.jsx)("span",{className:tv.textCtl,children:"倍速"})})]})]}),(0,t.jsx)("div",{className:tv.infoWrap,children:(0,t.jsx)(tm,{text:"点赞",count:(0,lt.qe)(null==o?void 0:o.stats.diggCount)})})]})};let tg=e=>{let{homeSeoDataResult:i,tabs:l,defaultTagId:n,modalVideoDetail:o}=e,{selectedTab:r}=ti(l,n);return i?(0,t.jsxs)("div",{className:ts.containerWrapper,children:[o&&(0,t.jsx)("div",{className:ts.cardWrapper,children:(0,t.jsx)(tf,{videoInfo:o})}),(0,t.jsx)(te,{tabList:l,className:ts.channelTabs,activeKey:r,isSpider:!0}),(0,t.jsx)("div",{className:ts.videoListContainer,children:(0,t.jsx)(tc,{videoList:null==i?void 0:i.videoList})})]}):null};l("338172");var th=l("439837"),tp=l.n(th),tw=l("501981"),tC=l("252197"),tx=l("291628"),tI=l("60441");let tb=e=>{switch(e){case eY.JY.Game:return{title:"抖音游戏_游戏解说_游戏视频推荐_游戏攻略 - 抖音精选电脑版",keyword:"抖音游戏,游戏解说,游戏推荐,游戏攻略",description:"涵盖游戏视频、游戏攻略、游戏解说、游戏推荐等海量优质视频内容，系列合集内容连续看，有用又有趣，无论是休闲解压、消遣下饭，还是发现爱好、获取知识，你想要的好内容，都在抖音精选。"};case eY.JY.Acg:return{title:"抖音二次元_二次元视频大全 - 抖音精选电脑版",keyword:"抖音二次元,二次元视频大全",description:"涵盖二次元视频等海量优质视频内容，系列合集内容连续看，有用又有趣，无论是休闲解压、消遣下饭，还是发现爱好、获取知识，你想要的好内容，都在抖音精选。"};case eY.JY.Music:return{title:"抖音音乐_抖音神曲_抖音热门歌曲 - 抖音精选电脑版",keyword:"抖音音乐,抖音神曲,抖音热门歌曲",description:"涵盖抖音音乐、抖音神曲、抖音热门歌曲等海量优质视频内容，系列合集内容连续看，有用又有趣，无论是休闲解压、消遣下饭，还是发现爱好、获取知识，你想要的好内容，都在抖音精选。"};case eY.JY.Food:return{title:"抖音美食_抖音美食推荐 - 抖音精选电脑版",keyword:"抖音美食,抖音美食推荐",description:"涵盖抖音美食等海量优质视频内容，系列合集内容连续看，有用又有趣，无论是休闲解压、消遣下饭，还是发现爱好、获取知识，你想要的好内容，都在抖音精选。"};case eY.JY.Knowledge:return{title:"抖音知识 - 抖音精选电脑版",keyword:"抖音知识",description:"涵盖抖音知识等海量优质视频内容，系列合集内容连续看，有用又有趣，无论是休闲解压、消遣下饭，还是发现爱好、获取知识，你想要的好内容，都在抖音精选。"};case eY.JY.Sports:return{title:"抖音体育 - 抖音精选电脑版",keyword:"抖音体育",description:"涵盖抖音体育等海量优质视频内容，系列合集内容连续看，有用又有趣，无论是休闲解压、消遣下饭，还是发现爱好、获取知识，你想要的好内容，都在抖音精选。"};default:return{title:"抖音精选电脑版 - 抖音旗下优质视频平台",keyword:"抖音精选,抖音精选电脑版,抖音精选网页版",description:"海量优质视频内容，涵盖游戏、二次元、美食、音乐、知识、体育运动、旅行、生活等各类题材，系列合集内容连续看，有用又有趣，无论是休闲解压、消遣下饭，还是发现爱好、获取知识，你想要的好内容，都在抖音精选。"}}},ty=e=>{let i=e?tp()(e):tp()(),l=i.hour(7).minute(52).second(22),t=l,n=l;l.isAfter(i)&&(t=l.subtract(1,"day"),n=l.subtract(1,"day"));let o=t.format("YYYY-MM-DDTHH:mm:ssZ[Z]")||"";return[o,n.format("YYYY-MM-DDTHH:mm:ssZ[Z]")||""]},tL=e=>{let{modalVideoDetail:i,subPage:l="",videoList:n=[]}=e,o=(0,tw.Yr)(),r="",a="",d="",s="",u="";if(i){let{desc:e,authorInfo:l,createTime:t=Date.now()/1e3,textExtra:n,seoInfo:o,awemeId:a}=i;r=`https://www.douyin.com/jingxuan?modal_id=${a}`;let{nickname:c,totalFavorited:v=0}=l||{},m=tp()(1e3*t).format("YYYYMMDD")||"",_=(0,lt.qe)(v),{title:f,keywords:g,description:h}=(0,tI.xB)({desc:e,nickname:c,createTimeStr:m,likeCount:_,textExtra:n,ocrContent:(null==o?void 0:o.ocrContent)||""});d=f,s=g,u=h}else{var c;let{title:e,keyword:i,description:t}=tb(l);d=e,s=i,u=t;let o=l?`/jingxuan/${l}`:"/jingxuan";r=`https://www.douyin.com${o}`;let[v,m]=ty($.Le.getConfig($.gI.ServerTime)),_=JSON.stringify((null==n?void 0:null===(c=n.slice(0,3))||void 0===c?void 0:c.map(e=>{var i;let l=null==e?void 0:null===(i=e.video)||void 0===i?void 0:i.cover;return(null==l?void 0:l.startsWith("//"))?`https:${l}`:l}))||[]);a=`{
      "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
      "@id": "${r}",
      "title": "${d}",
      "images": ${_},
      "description": "${u}",
      "pubDate": "${v}",
      "upDate": "${m}"
    }`}return(0,B.o)(()=>{(0,tC.J)({title:d,description:u,keywords:s})},[]),(0,t.jsxs)(tx.Z,{videoDetail:i,children:[(0,t.jsx)("title",{children:d}),(0,t.jsx)("meta",{name:"description",content:u}),(0,t.jsx)("meta",{name:"keywords",content:s}),(0,t.jsx)("link",{rel:"canonical",href:r}),a&&(0,t.jsx)("script",{type:"application/ld+json",nonce:o,children:a})]})};var tj=l("155714"),tk=l("20157");let tT={next_real_cnt:1,scene:1,report_rate:.8,range:0,enter_from:"discover",predict:{video:{enable:1},waterfall:{enable:1},comment:{enable:1}},real:{video:{enable:1},waterfall:{enable:1},comment:{enable:1}}},tE=e=>{(0,n.useEffect)(()=>{var i;return null===(i=(0,tj.lZ)())||void 0===i||i.registerScene(tk.P.HOME_PAGE_PRELOAD,(0,f._)((0,_._)({},tT),{abTestData:e,enableInference:!0})),()=>{var e;null===(e=(0,tj.lZ)())||void 0===e||e.unregisterScene(tk.P.HOME_PAGE_PRELOAD)}},[])};var tS=l("151681"),tN=l("346798"),tP=l("363706");let tR=()=>{(0,B.o)(()=>{let e=$.Le.getConfig($.gI.JingXuanVisitId);return!e&&($.Le.setConfig($.gI.JingXuanVisitId,String(Date.now())),e=$.Le.getConfig($.gI.JingXuanVisitId)),()=>{$.Le.setConfig($.gI.JingXuanVisitId,""),lM.sendLog("discoverClose",{visit_id:e||"",close_method:"change_tab",to_page:""})}},[]),(0,B.o)(()=>((0,tP.vP)({key:"jingxuan_visit",event:(e,i,l)=>{if("page_unload"===l){let e=$.Le.getConfig($.gI.JingXuanVisitId);lM.sendLog("discoverClose",{visit_id:e||"",close_method:"exit_douyin"},!1)}}}),()=>{(0,tP.xC)("jingxuan_visit")}),[])},tA=e=>{let{homeFetchData:i}=e;(0,n.useEffect)(()=>{var e;if(!!(null==i?void 0:i.redisVersion))$.Le.setConfig($.gI.JingxuanCacheAwmeInfoIds,(null===(e=i.awemeList)||void 0===e?void 0:e.map(e=>e.awemeId))||[])},[i])};var tD=(0,c.C)(function(e){let{defaultSubTags:i,homeSeoDataResult:l,homeFetchData:u,isSpider:c=(0,s._Q)(),discoverTab:_,tagId:f,landingPage:g}=e,h=(0,lW._)()||{},p=(0,o.U)(),w=null==p?void 0:p.tag,C=(0,n.useRef)({}),x=(0,tN.J)({ssrDiscoverTab:_,ssrHomeFetchData:u,landingPage:g,ssrTagId:f}),I=(0,eZ.useDiscoverCommonStore)(e=>{let{finalTabList:i,homeFetchData:l,setHomeFetchData:t,setIsDefaultLanding:n}=e;return{finalTabList:i,homeFetchData:l,setHomeFetchData:t,setIsDefaultLanding:n}}),{finalTabList:b,homeFetchData:y,setHomeFetchData:L,setIsDefaultLanding:j}=h.enableJingxuanZustand?I:x,[k,T]=(0,n.useState)(!1),E=(0,n.useMemo)(()=>{var e;return k&&b.find(e=>e.is_active_tab&&e.key===w)?w:(w&&!eY._D[w]&&history.replaceState({},"","/jingxuan"),w&&null!==(e=eY._D[w])&&void 0!==e?e:"0")},[w,k,b]),{country:S}=(0,tl.Iq)(e=>{let{country:i}=e;return{country:i}}),{request:N,resetRefreshIndex:P}=td(y),{modalVideoDetail:R}=(0,m.K)(e=>{let{modalVideoDetail:i}=e;return{modalVideoDetail:i}}),A=(0,n.useCallback)(()=>{var e,i,l,t;window.jxHydrateReadyCb&&(null===(l=(t=window).jxHydrateReadyCb)||void 0===l||l.call(t)),null===(i=window)||void 0===i||null===(e=i.disabledBigCardQuickPlayer)||void 0===e||e.call(i,"pause")},[]);return(0,r.C)(d.w3.components.discover_page),tE(h),(0,v.$I)(),!function(){let{awemeFeed:e}=(0,tS.j)(),i=(0,n.useRef)(!1),l=(0,n.useRef)(!0);(0,B.o)(()=>{var e;if(l.current){l.current=!1;return}let i=null!==(e=$.Le.getConfig($.gI.CachePage))&&void 0!==e?e:[];!(null==i?void 0:i.includes("/jingxuan"))&&$.Le.setConfig($.gI.CachePage,[...i,"/jingxuan"])},[]),(0,n.useEffect)(()=>()=>{var e,i;let l=null!==(i=$.Le.getConfig($.gI.CachePage))&&void 0!==i?i:[];$.Le.setConfig($.gI.CachePage,null==l?void 0:null===(e=l.filter)||void 0===e?void 0:e.call(l,e=>"/jingxuan"===e))},[]),(0,n.useLayoutEffect)(()=>z.listen(z.EVENT.exitChildRoute,()=>{"/jingxuan"!==location.pathname&&i.current&&(i.current=!1,e.dispatch({modalAwemeInfo:null,nextAwemeInfo:null,prevAwemeInfo:null}))}),[])}(),tA({homeFetchData:y}),(0,n.useEffect)(()=>{try{var e;if(null===(e=location.href)||void 0===e?void 0:e.includes("pip")){let e=new URL(window.location.href);e.searchParams.delete("pip"),e.searchParams.delete("modal_id"),window.history.replaceState({},"",e)}}catch(e){}},[]),(0,a.w)(()=>{var e,i;null==j||j(!1),null==C||null===(i=C.current)||void 0===i||null===(e=i.setShowReplaceLoading)||void 0===e||e.call(i,!1),null==A||A()},[]),tR(),(0,t.jsxs)(tN.O.Provider,{value:x,children:[(0,t.jsx)(tL,{modalVideoDetail:R,subPage:w,videoList:c?null==l?void 0:l.videoList:null==y?void 0:y.awemeList}),c?(0,t.jsx)(tg,{modalVideoDetail:R,homeSeoDataResult:l,tabs:b,defaultTagId:E}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ta,{ref:C,defaultSubTags:i,abTestData:h,request:N,resetRefreshIndex:P,tabs:b,defaultTagId:E,country:S,quickPlayerReuseEffectCb:A,onChannelTabChange:e=>{var i,l,t,n;T(!0),y&&e!==f&&(null==L||L(void 0)),null==C||null===(l=C.current)||void 0===l||null===(i=l.setShowReplaceLoading)||void 0===i||i.call(l,!1),null==j||j(!1),null===(n=window)||void 0===n||null===(t=n.disabledBigCardQuickPlayer)||void 0===t||t.call(n,"pause")},onChannelTabReload:e=>{var i,l;null==L||L(void 0),null==j||j(!1),null===(l=window)||void 0===l||null===(i=l.disabledBigCardQuickPlayer)||void 0===i||i.call(l,"destroy")}})})]})},e=>(0,u.e2)(e),"Da2ISZXp")},346798:function(e,i,l){l.d(i,{J:function(){return w},O:function(){return h}});var t=l(520739),n=l(878389);l(874386),l(250440),l(675373);var o=l(88648),r=l(784492),a=l(811796),d=l(67704),s=l(913807),u=l(44905),c=l(782442),v=l(903868),m=l(124885),_=l(380755),f=l(327306),g=l(402971);let h=(0,o.createContext)({}),p=e=>(null==e?void 0:e.redisMode)==="replace"?"replace":(null==e?void 0:e.redisVersion)?"append":"",w=e=>{var i;let{ssrDiscoverTab:l,ssrHomeFetchData:h,landingPage:w,ssrTagId:C}=e||{},x=(0,o.useRef)(p(h)),I=(0,a.d)(),{userInfo:b}=(0,g.useUserInfoContext)(),{discoverFeedCardAdList:y=[],discoverActiveSubTabList:L=[]}=(0,v.Iq)(e=>{let{discoverFeedCardAdList:i,discoverActiveSubTabList:l}=e;return{discoverFeedCardAdList:i,discoverActiveSubTabList:l}}),{enableJingxuanZustand:j}=(0,f._)()||{},k=(0,_.useDiscoverCommonStore)(e=>e.setState),[T,E]=(0,o.useState)(l),[S,N]=(0,o.useState)("discover"===w),[P,R]=(0,o.useState)(L),A=(0,o.useRef)(),[D,M]=(0,o.useState)([]),[O,V]=(0,o.useState)(h),[B,F]=(0,o.useState)({}),U=B,H=(0,_.useDiscoverCommonStore)(e=>e.closedCardAdIdListMap);U=j?H:U;let G=(0,o.useCallback)(e=>{A.current=e},[]),Y=(0,o.useMemo)(()=>{var e;let i=(null==T?void 0:null===(e=T.filter)||void 0===e?void 0:e.call(T,e=>(null==e?!!void 0:!!e.is_active_tab)||m.mh.includes(e.key)))||[];return j&&k({finalTabList:i}),i},[T,j]),Z=(0,o.useMemo)(()=>{var e,i;return(null==b?void 0:b.isLogin)?null==b?void 0:null===(e=b.info)||void 0===e?void 0:e.uid:null===(i=(0,u.Es)())||void 0===i?void 0:i.user_unique_id},[b]),$=(0,o.useMemo)(()=>(0,d.lE)({feedCardAdList:y,ctx:I})||{},[y,I]);(0,o.useMemo)(()=>{j&&k({activeSubTab:L,feedCardAdListMap:$,isDefaultLanding:"discover"===w,homeFetchData:h,feedCardAdList:y,ssrCtx:I,latestClickAwemeIdRef:A,pageMode:x.current})},[j]),(0,o.useMemo)(()=>{k({ssrTagId:C})},[C]);let[z,W]=(0,o.useState)($),J=z,q=(0,_.useDiscoverCommonStore)(e=>e.feedCardAdListMap);J=j?q:J;let X=(0,o.useMemo)(()=>{let e={};for(let l of Object.keys(J||{})){var i;e[l]=(null===(i=J[l])||void 0===i?void 0:i.filter(e=>{var i,t;return!(null==U?void 0:null===(t=U[l])||void 0===t?void 0:null===(i=t.includes)||void 0===i?void 0:i.call(t,null==e?void 0:e.id))}))||[]}return j&&k({finalFeedCardAdListMap:e}),e},[J,U,j]),K=(0,o.useCallback)(async e=>{let i=await (0,d.to)(I),l=(0,d.lE)({feedCardAdList:i});e?W(i=>(0,n._)((0,t._)({},i),{[e]:(null==l?void 0:l[e])||[]})):W(l)},[]),Q=(0,_.useDiscoverCommonStore)(e=>e.updateFeedCardAdResourceList);K=j?Q:K,(0,o.useEffect)(()=>{!(null==l?void 0:l.length)&&(0,s.getChannelSetting)({},void 0).then(e=>{(null==e?void 0:e.status_code)===0&&E(null==e?void 0:e.config_info)})},[l]);let ee=(0,o.useCallback)(async()=>{(0,d.hz)(I).then(e=>{R(null!=e?e:[])})},[]);(0,o.useEffect)(()=>{!L.length&&(0,d.hz)(I).then(e=>{if(j){k({activeSubTab:null!=e?e:[]});return}R(null!=e?e:[])})},[L,j]),(0,r.Z)(()=>{(0,d.EN)({uidKey:Z}),K()},[Z]);let ei=null==Y?void 0:null===(i=Y.map(e=>null==e?void 0:e.key))||void 0===i?void 0:i.join();c.Le.setConfig(c.gI.DiscoverTabList,ei);let el=(0,o.useRef)({finalTabList:[],finalFeedCardAdListMap:{},activeSubTab:[],feedCardAdListMap:{},isDefaultLanding:!1,setIsDefaultLanding:()=>{},homeFetchData:void 0,setHomeFetchData:()=>{},feedCardAdList:[],setClosedCardAdIdListMap:()=>{},latestClickAwemeIdRef:void 0,updateLatestClickAwemeIdRef:()=>{},visibleLiveCards:[],setVisibleLiveCards:()=>{},updateFeedCardAdResourceList:()=>Promise.resolve(),updateSubTabLiveCardList:()=>Promise.resolve(),ssrTagId:"",pageMode:""});return j?el.current:{finalTabList:Y,finalFeedCardAdListMap:X,activeSubTab:P,feedCardAdListMap:J,isDefaultLanding:S,setIsDefaultLanding:N,homeFetchData:O,setHomeFetchData:V,feedCardAdList:y,setClosedCardAdIdListMap:F,updateFeedCardAdResourceList:K,updateSubTabLiveCardList:ee,visibleLiveCards:D,setVisibleLiveCards:M,latestClickAwemeIdRef:A,updateLatestClickAwemeIdRef:G,ssrTagId:C,pageMode:x.current}}},380755:function(e,i,l){l.r(i),l.d(i,{useDiscoverCommonContext:function(){return c},useDiscoverCommonStore:function(){return u}});var t=l(520739),n=l(878389),o=l(88648),r=l(67704),a=l(650963),d=l(665067),s=l(346798);let u=(0,a.fw)((e,i)=>({finalTabList:[],finalFeedCardAdListMap:{},activeSubTab:[],feedCardAdListMap:{},isDefaultLanding:!1,setIsDefaultLanding:i=>{e({isDefaultLanding:i})},homeFetchData:void 0,setHomeFetchData:i=>{e({homeFetchData:i})},feedCardAdList:[],visibleLiveCards:[],setVisibleLiveCards:i=>{e(e=>({visibleLiveCards:i(e.visibleLiveCards||[])}))},closedCardAdIdListMap:{},setClosedCardAdIdListMap:i=>{e(e=>({closedCardAdIdListMap:i(e.closedCardAdIdListMap||{})}))},latestClickAwemeIdRef:void 0,ssrTagId:"",pageMode:"",updateLatestClickAwemeIdRef:e=>{let{latestClickAwemeIdRef:l}=i();l&&(l.current=e||"")},ssrCtx:void 0,updateFeedCardAdResourceList:async l=>{let o=await (0,r.to)(i().ssrCtx),a=(0,r.lE)({feedCardAdList:o});l?e(e=>({feedCardAdListMap:(0,n._)((0,t._)({},e.feedCardAdListMap),{[l]:(null==a?void 0:a[l])||[]})})):e({feedCardAdListMap:a})},updateSubTabLiveCardList:async()=>{(0,r.hz)(i().ssrCtx).then(i=>{e({activeSubTab:null!=i?i:[]})})}})),c=function(e,i){let l=(0,d.U)(),t=(0,o.useContext)(s.O),n=u(e,i);return l.enableJingxuanZustand?n:t}},26709:function(e,i,l){l.d(i,{X:function(){return N}});var t=l("520739"),n=l("878389");l("874386"),l("250440");var o=l("563097"),r=l("713097"),a=l.n(r),d=l("645260"),s=l.n(d),u=l("96008"),c=l.n(u),v=l("88648"),m=l("154953"),_=l("450402"),f=l("318034"),g=l("401953"),h=l("699235"),p=l("272775"),w=l("926012"),C=l("291575"),x=l("718770"),I=l("211286"),b=l("437998"),y={DEFAULT:0,0:"DEFAULT",GUEST:1,1:"GUEST"},L=e=>{let{type:i=0,isLock:l,cls:t,handleClick:n,joinText:r}=e;return(0,o.jsxs)("div",{onClick:n,className:a()(b.default.joinContainer,t),"data-e2e":"mic_seat",children:[(0,o.jsx)("div",{className:b.default.joinIcon,children:(0,o.jsx)("span",{className:a()(b.default.joinSvg,{[b.default.lockIcon]:l,[b.default.guestLockIcon]:1===i&&l,[b.default.joinGuest]:1===i})})}),(0,o.jsx)("span",{className:a()(b.default.joinText,"joinTextContent"),children:r})]})},j=l("625703"),k=l("578006"),T=l("164416"),E=l("187577"),S=l("207964");let N=e=>{var i,l,r,d;let{user:u,className:b,onJoinRoom:N,disable:P,onUserClick:R,isLock:A,showAnchorLabel:D,playModesPC:M,orderSingInfo:O,setFloatModal:V,avatarBorderColor:B,joinText:F=k.p.JOIN_CHAT,setRankParam:U,setRankListShow:H,teamfightInfo:G,guestBattleInfo:Y,giftLabelBackgroundColor:Z,selfUidStr:$,giftLabelIcon:z="",giftLabelStyle:W={},allowSendGiftGuest:J=!0,onHover:q,isMvp:X,isRed:K,mvpIcon:Q,position:ee,singV3Ab:ei="0",animationMap:el,mvpUseridRef:et,mvpChangeRef:en,audioPower:eo,isCrossLink:er=!1,roomBattleType:ea="pk",dynamic:ed=!1,isAudioStage:es=!1,giftLabelMerge:eu=!1}=e,[ec,ev]=v.useState(!1);v.useRef("");let em=v.useMemo(()=>(null==u?void 0:u.is_background)===1,[u]),e_=v.useMemo(()=>(null==u?void 0:u.silence_status)!==m.Ai.STATUS_UNSILENCE,[u]),{isGuestBattle:ef}=(0,I.Z)({guestBattleInfo:Y}),{giftNum:eg,isGroupFight:eh}=(0,j.Z)({listUser:u,teamfightInfo:G,selfUidStr:$,guestBattleInfo:Y,isCrossLink:er,roomBattleType:ea}),ep=v.useCallback(e=>{e.talk>0?ev(!0):!e.talk&&ev(!1)},[]),{gameType:ew}=(0,E.zL)(),eC=v.useMemo(()=>{var e,i,l,o,r,a,d;let s=[];return O&&(null==O||null===(e=O.user_microphone_list)||void 0===e||e.forEach(e=>{if(e.is_singing){var i,l,o,r;(null==e?void 0:null===(i=e.microphone_list)||void 0===i?void 0:i[0].title_sponsor)&&(s=[(0,n._)((0,t._)({},null==e?void 0:null===(l=e.microphone_list)||void 0===l?void 0:l[0]),{toUserId:null!==(r=null==e?void 0:null===(o=e.order_user)||void 0===o?void 0:o.id_str)&&void 0!==r?r:""})])}})),Y&&(s=null==Y?void 0:null===(i=Y.results)||void 0===i?void 0:i.filter(e=>{var i,l;return String(null==e?void 0:null===(i=e.user)||void 0===i?void 0:i.id_str)===String(null==u?void 0:null===(l=u.user)||void 0===l?void 0:l.id_str)},[])),G&&(ew===T.D$.ROOMBATTLE?null==G||null===(a=G.team_infos)||void 0===a||null===(r=a.filter(e=>(null==e?void 0:e.team_id)==="1"))||void 0===r||null===(o=r[0])||void 0===o||null===(l=o.players)||void 0===l||l.forEach(e=>{var i;(null==e?void 0:e.title_sponsor)&&String(null==e?void 0:e.user_id)===String(null==u?void 0:null===(i=u.user)||void 0===i?void 0:i.id_str)&&(s=[e])}):null==G||null===(d=G.team_infos)||void 0===d||d.forEach(e=>{var i;null==e||null===(i=e.players)||void 0===i||i.forEach(e=>{var i;(null==e?void 0:e.title_sponsor)&&String(null==e?void 0:e.user_id)===String(null==u?void 0:null===(i=u.user)||void 0===i?void 0:i.id_str)&&(s=[e])})})),s||[]},[Y,G,O]),ex=e=>{null==e||e.stopPropagation(),U({teamfight_id:eh?null==G?void 0:G.teamfight_id_str:null==Y?void 0:Y.battle_id_str,user:null==u?void 0:u.user,isGuestContribution:ef}),H(!0)};v.useEffect(()=>u?(null==eo||eo.on(null==u?void 0:u.linkmic_id_str,ep),()=>{ev(!1),null==eo||eo.off(null==u?void 0:u.linkmic_id_str,ep)}):c(),[ep,null==u?void 0:u.linkmic_id_str,eo]);let eI=v.useMemo(()=>{if(!ef||!(null==u?void 0:u.user.id_str)||!(null==Y?void 0:Y.battle_id))return"";let e=null==Y?void 0:Y.status,i=null,l=null==el?void 0:el.get(`${null==u?void 0:u.user.id_str}_${null==Y?void 0:Y.battle_id}`);return(null==Y||Y.results.forEach(l=>{var t,n,o;if(String(l.guest_id)===String(null==u?void 0:null===(t=u.user)||void 0===t?void 0:t.id_str)){if([1,4].includes(Number(e))&&(null==l?void 0:l.role)===1)switch(Number(null==l?void 0:null===(o=l.crown_info)||void 0===o?void 0:null===(n=o.cur_grade)||void 0===n?void 0:n.level)){case 1:i="CrystalCrown";break;case 2:i="GemstoneCrown";break;case 3:i="DiamondCrown";break;default:i="Knuckle"}[1,4].includes(Number(e))&&(null==l?void 0:l.role)===2&&(i="HeartBreak"),(null==l?void 0:l.role)===0&&(i=""),2===Number(e)&&(null==l?void 0:l.role)===1&&(i="Victory")}}),l===i)?"":(null==el||el.set(`${null==u?void 0:u.user.id_str}_${null==Y?void 0:Y.battle_id}`,i),i)},[null==Y?void 0:Y.status,null==Y?void 0:Y.results,ef,null==u?void 0:null===(i=u.user)||void 0===i?void 0:i.id_str,null==Y?void 0:Y.battle_id]),eb=v.useMemo(()=>{if(!ef)return"";let e="";return null==Y||Y.results.forEach(i=>{var l,t,n;if(String(i.guest_id)===String(null==u?void 0:null===(l=u.user)||void 0===l?void 0:l.id_str)){if((null==i?void 0:i.role)===1)switch(Number(null==i?void 0:null===(n=i.crown_info)||void 0===n?void 0:null===(t=n.cur_grade)||void 0===t?void 0:t.level)){case 1:e="CrystalCrown";break;case 2:e="GemstoneCrown";break;case 3:e="DiamondCrown";break;default:e="Knuckle"}(null==i?void 0:i.role)===2&&(e="HeartBreak")}}),e},[u,Y,ef]),ey=v.useMemo(()=>(null==M?!!void 0:!!M.includes(C.V0.LinkmicPlayMode_OrderSing))||!1,[M]),eL=v.useMemo(()=>{var e;let i={};return null==O||O.user_microphone_list.forEach(e=>{var l,t,n,o,r;i[null==e?void 0:null===(l=e.order_user)||void 0===l?void 0:l.id_str]={userId:null==e?void 0:null===(t=e.order_user)||void 0===t?void 0:t.id_str,is_singing:null==e?void 0:e.is_singing,currentSingItem:null==O?void 0:O.current_sing_item,golden_microphone_icon:null==O?void 0:O.golden_microphone_icon,live_linkmic_order_sing_micro_opt:null==O?void 0:O.live_linkmic_order_sing_micro_opt,goldenCount:null===(r=e.microphone_list)||void 0===r?void 0:null===(o=r.filter(e=>e.microphone_type===_.W5.GOLDEN_MICROPHONE))||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.micro_phone_num}}),i[null==u?void 0:null===(e=u.user)||void 0===e?void 0:e.id_str]},[O,u]),ej=v.useCallback(e=>{e.stopPropagation(),V(w.uH.ORDER_SING)},[V]),ek=(null===(l=(null!==(d=null==Y?void 0:Y.results)&&void 0!==d?d:[]).filter(e=>{var i,l;return String(e.guest_id)===(null==u?void 0:null===(i=u.user)||void 0===i?void 0:i.id_str)||String(e.guest_id_str)===(null==u?void 0:null===(l=u.user)||void 0===l?void 0:l.id_str)}))||void 0===l?void 0:l.length)>0,eT=v.useRef(),eE=(0,S.useInLiveAudioLayoutOptAB)();return u?(0,o.jsxs)("div",{onClick:R,className:a()(x.default.userContainer,b,{[x.default.dynamicAudioItem]:ed&&!es,[x.default.audioStageUserScale]:ed&&es,[x.default.infoNoShrink]:eE}),onMouseEnter:e=>null==q?void 0:q(e,eT),ref:eT,"data-e2e":"mic_seat",children:[(0,o.jsx)(g.b,{img:s()(u,"user.avatar_large.url_list[0]",""),isTalking:ec&&!e_,gender:null===(r=u.user)||void 0===r?void 0:r.gender,user:u,className:a()(x.default.avatar,{[x.default.userAdjust]:ed&&es}),isLeave:em,borderColor:B,battleIcon:eb,battleAnimation:eI,showAnchorLabel:D&&!ey,isMvp:X,mvpIcon:Q,mvpUseridRef:et,mvpChangeRef:en,titleSponsor:eC}),es?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(h._,{isMute:e_,noName:!0,className:x.default.userNameRight})}):(0,o.jsxs)(o.Fragment,{children:[ey&&(0,o.jsx)(p._,{className:x.default.micphoneLabel,onClick:ej,isAnchor:D&&!ey,labelInfo:eL,singV3Ab:ei,user:u,position:ee,titleSponsor:eC}),eu?(0,o.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,o.jsx)("div",{style:{flex:"1 1 0%",minWidth:0},children:(0,o.jsx)(h._,{isMute:e_,className:x.default.userName,userName:s()(u,"user.nickname",""),onClick:ex})}),J&&(0,o.jsx)("div",{style:{flex:"0 0 auto",marginLeft:8},children:(0,o.jsx)(f.X,{giftNum:eg,isJoinGuestBattle:ek,onClick:ex,showGiftIcon:!Z,background:Z,giftLabelIcon:z,type:ef?f.l.GUEST:f.l.DEFAULT,giftLabelStyle:W,isMvp:X,isRed:K,mvpIcon:Q,style:{position:"relative"},guestBattleInfo:Y,user:u})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h._,{isMute:e_,className:x.default.userName,userName:s()(u,"user.nickname",""),onClick:ex}),J&&(0,o.jsx)(f.X,{giftNum:eg,isJoinGuestBattle:ek,onClick:ex,showGiftIcon:!Z,background:Z,giftLabelIcon:z,type:ef?f.l.GUEST:f.l.DEFAULT,giftLabelStyle:W,isMvp:X,isRed:K,mvpIcon:Q,style:{position:"relative"},guestBattleInfo:Y,user:u})]})]})]}):(0,o.jsx)(L,{type:ef?y.GUEST:y.DEFAULT,cls:a()(b,{[x.default.dynamicAudioItem]:ed,[x.default.infoNoShrink]:eE}),isLock:A,joinText:F,handleClick:P||A?c():N,"data-e2e":"mic_seat"})}},91518:function(e,i,l){l.d(i,{s:function(){return I}}),l("874386"),l("250440");var t=l("563097"),n=l("713097"),o=l.n(n),r=l("88648"),a=l("629582"),d=l("178849"),s=l("393265"),u=l("926012"),c=l("777185"),v=l("291870"),m=l("788376"),_=l("456147"),f=l("516599"),g=l("58655"),h=l.p+"media/bg.394717bcadc491f0.png",p=l("231414"),w=l("197960");let C={[u.yP.AUDIO_1V8]:80,[u.yP.AUDIO_1V8_STAGE]:80,[u.yP.AUDIO_GRID]:80,[u.yP.VIDEO_1V6]:42.5,[u.yP.VIDEO_DYNAMIC]:63.56,[u.yP.VIDEO_GRID]:62.45,[u.yP.VIDEO_6V6]:61,[u.yP.VIDEO_2V4V4]:50.6},x=16/9,I=e=>{let{isAdmin:i=!1,roomId:l="",layout:n,renderElement:I,className:b,isTheaterOn:y,statusText:L,teamfightInfo:j,onClickStatusBar:k,isPreview:T,incomingPlayer:E=null}=e,{eventStore:S,linkmicStore:N}=(0,g.o)(),{linkmicEvent:P}=S||{},R=r.useRef(),[A,D]=r.useState(x),{isInPunish:M,leftTeamScore:O,rightTeamScore:V}=(0,m.Z)({teamfightInfo:j}),{player:B}=(0,s.n)(),F=E||B,U=r.useCallback(()=>{var e,i;let l=null==F?void 0:null===(e=F.root)||void 0===e?void 0:e.clientWidth,t=null==F?void 0:null===(i=F.root)||void 0===i?void 0:i.clientHeight;return l&&t?l/t:x},[]),H=r.useCallback(()=>{clearTimeout(R.current),R.current=setTimeout(()=>{D(U())},50)},[]);r.useEffect(()=>(null==F||F.on(a.FP.FULLSCREEN_CHANGE,H),()=>{null==F||F.off(a.FP.FULLSCREEN_CHANGE,H)}),[]);let G=r.useCallback(()=>{D(U())},[]);r.useEffect(()=>(window.addEventListener("resize",G),()=>{window.removeEventListener("resize",G)}),[]),r.useEffect(()=>{H()},[y]);let Y=r.useMemo(()=>`${C[n]*x/A}%`,[A,n]),Z=r.useMemo(()=>null==j?void 0:j.status,[j]),$=r.useCallback(()=>(0,t.jsx)("div",{className:v.default.source,children:(0,t.jsx)(c.Z,{teamFightInfo:j,eggModeInfo:null==N?void 0:N.eggModeInfo,leftPKScore:O,rightPKScore:V,showAroundFaceStatus:M})}),[O,V,M,null==N?void 0:N.eggModeInfo]),z=Z===d.Hj.LinkmicTeamfightStatus_PREPARE&&i,W=()=>(0,t.jsx)("div",{className:v.default.actionBar,onClick:()=>Q(),children:"开始团战"}),{hideEgg:J,isMutiEggTimeUseful:q}=(0,w.Z)(),X=r.useMemo(()=>(0,t.jsx)(p.Z,{isVideoGuropFight:!1,isGroupFight:!0,eggModeInfo:null==N?void 0:N.eggModeInfo}),[null==N?void 0:N.eggModeInfo]),K=r.useMemo(()=>{var e;return(0,t.jsxs)("div",{className:v.default.audioGridContainer,style:{width:Y},children:[(0,t.jsx)("div",{className:o()(v.default.mediumAudioItem,v.default.anchorItem),children:I(0)}),(null==N?void 0:null===(e=N.eggModeInfo)||void 0===e?void 0:e.egg_info)&&q&&[d.Hj.LinkmicTeamfightStatus_PLAYING,d.Hj.LinkmicTeamfightStatus_PUNISHING].includes(Z)&&X,(0,t.jsxs)("div",{className:v.default.seatsGroupContainer,children:[(0,t.jsxs)("div",{className:v.default.topBar,children:[$(),z?W():L&&!T&&(0,t.jsx)("div",{className:v.default.status,onClick:()=>null==k?void 0:k(),children:L})]}),[void 0,void 0].map((e,i)=>{var l;return(0,t.jsxs)("div",{className:v.default.gridsArea,children:[(null==N?void 0:null===(l=N.eggModeInfo)||void 0===l?void 0:l.egg_info)&&q&&[d.Hj.LinkmicTeamfightStatus_PLAYING,d.Hj.LinkmicTeamfightStatus_PUNISHING].includes(Z)&&(0,t.jsxs)("div",{className:J?v.default.hide:v.default.show,children:[(0,t.jsx)("div",{className:v.default.eggLeftSide,style:{backgroundImage:`${0===i?"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))":"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}`}}),(0,t.jsx)("div",{className:v.default.eggRightSide,style:{backgroundImage:`${0===i?"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))":"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}`}})]}),(0,t.jsxs)("div",{className:v.default.gridsBox,children:[(0,t.jsx)("div",{className:v.default.grid,children:[void 0,void 0].map((e,l)=>(0,t.jsx)("div",{className:v.default.mediumAudioItem,children:I(4*l+1+2*i)},`${i}_${l}`))}),(0,t.jsx)("div",{className:v.default.grid,children:[void 0,void 0].map((e,l)=>(0,t.jsx)("div",{className:v.default.mediumAudioItem,children:I(4*l+2+2*i)},`${i}_${l}`))})]})]},i)})]})]})},[I,Y,L,$,Z,z,null==N?void 0:N.eggModeInfo]),Q=()=>{null==P||P.liveGroupFightStart(),(0,_.lV)({room_id:l}).then(e=>{var i,l,t,n;(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.prompts)?(f.F.info(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.prompts,null==F?void 0:F.root),null==P||P.liveGroupFightStartSuccess("fail_member_cnt")):null==P||P.liveGroupFightStartSuccess("success")})};return r.useEffect(()=>{null==N||N.setLayoutBackgroundImg(n===u.yP.AUDIO_1V8||n===u.yP.AUDIO_GRID||n===u.yP.AUDIO_1V8_STAGE?h:"")},[n]),(0,t.jsx)("div",{className:o()(v.default.container,b,{[v.default.audioBackground]:[u.yP.AUDIO_GRID,u.yP.AUDIO_1V8_STAGE,u.yP.AUDIO_1V8,u.yP.AUDIO_DOUBLE_C].includes(n)}),children:(n===u.yP.AUDIO_1V8||n===u.yP.AUDIO_GRID||n===u.yP.AUDIO_1V8_STAGE)&&K})}},562923:function(e,i,l){l.d(i,{PY:function(){return L}}),l(874386),l(250440);var t=l(563097),n=l(713097),o=l.n(n),r=l(88648),a=l(629582),d=l(393265),s=l(454194),u=l(926012),c=l(127845),v=l(456147),m=l(83188),_=l(779145),f=l.n(_),g=l(178849),h=l(788376),p=l(777185),w=l(516599),C=l(58655),x=l(231414),I=l(197960);let b={[u.yP.AUDIO_1V8]:50.4,[u.yP.AUDIO_GRID]:42,[u.yP.VIDEO_1V6]:42.5,[u.yP.VIDEO_1V8]:42.5,[u.yP.VIDEO_DYNAMIC]:63.56,[u.yP.VIDEO_GRID]:62.45,[u.yP.VIDEO_6V6]:61,[u.yP.VIDEO_1_V_8]:63.56,[u.yP.VIDEO_1_V_6]:63.56,[u.yP.VIDEO_1_V_3]:63.56,[u.yP.VIDEO_DYNAMIC_FLOAT]:32,[u.yP.VIDEO_T1_V_B8]:43},y=16/9,L=e=>{let{layout:i,renderElement:l,className:n,backgroundImg:_,isTheaterOn:L,micSeats:j,teamfightInfo:k,ext:T={},isAdmin:E=!1,roomId:S,onClickStatusBar:N,isPreview:P=!1,incomingPlayer:R=null}=e,{eventStore:A,linkmicStore:D}=(0,C.o)(),{linkmicEvent:M}=A||{},{isInPunish:O,leftTeamScore:V,rightTeamScore:B,statusTexting:F,redGroupSeats:U}=(0,h.Z)({teamfightInfo:k}),H=r.useRef(),[G,Y]=r.useState(y),{player:Z}=(0,d.n)(),$=R||Z,z=r.useCallback(()=>{var e,i;let l=null==$?void 0:null===(e=$.root)||void 0===e?void 0:e.clientWidth,t=null==$?void 0:null===(i=$.root)||void 0===i?void 0:i.clientHeight;return l&&t?l/t:y},[]),W=r.useCallback(()=>{clearTimeout(H.current),H.current=setTimeout(()=>{Y(z())},50)},[]);r.useEffect(()=>(null==$||$.on(a.FP.FULLSCREEN_CHANGE,W),()=>{null==$||$.off(a.FP.FULLSCREEN_CHANGE,W)}),[]);let J=r.useCallback(()=>{Y(z())},[]);r.useEffect(()=>(window.addEventListener("resize",J),()=>{window.removeEventListener("resize",J)}),[]),r.useEffect(()=>{W()},[L]);let q=r.useMemo(()=>`${b[i]*y/G}%`,[G,i]),X=r.useMemo(()=>null==k?void 0:k.status,[k]),{hideEgg:K,isMutiEggTimeUseful:Q}=(0,I.Z)(),ee=r.useMemo(()=>(0,t.jsx)(x.Z,{isVideoGuropFight:!0,isGroupFight:!0,eggModeInfo:null==D?void 0:D.eggModeInfo}),[null==D?void 0:D.eggModeInfo]);r.useEffect(()=>{X===g.Hj.LinkmicTeamfightStatus_FINISHED&&(null==D||D.setEggModeInfo({}))},[X]);let ei=r.useCallback(()=>(0,t.jsx)("div",{className:s.default.sourceBar,children:[g.Hj.LinkmicTeamfightStatus_PLAYING,g.Hj.LinkmicTeamfightStatus_PUNISHING].includes(X)?(0,t.jsx)(p.Z,{teamFightInfo:k,eggModeInfo:null==D?void 0:D.eggModeInfo,leftPKScore:V,rightPKScore:B,showAroundFaceStatus:O}):(0,t.jsx)("div",{className:s.default.emptyBar})}),[V,B,O,q,X]),el=()=>{null==M||M.liveGroupFightStart(),(0,v.lV)({room_id:S}).then(e=>{var i,l,t,n;(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.prompts)?(w.F.info(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.prompts,null==$?void 0:$.root),null==M||M.liveGroupFightStartSuccess("fail_member_cnt")):null==M||M.liveGroupFightStartSuccess("success")})},et=()=>(0,t.jsx)("div",{className:s.default.actionBar,onClick:e=>{el()},children:"开始团战"}),en=X===g.Hj.LinkmicTeamfightStatus_PREPARE&&E,eo=r.useMemo(()=>{var e,i;return(0,t.jsxs)("div",{className:o()(s.default.videoT1B8Container),style:{width:q},children:[(0,t.jsx)("div",{className:o()(s.default.anchor,"__clairvoyance"),children:l(0)}),(null==D?void 0:null===(e=D.eggModeInfo)||void 0===e?void 0:e.egg_info)&&Q&&[g.Hj.LinkmicTeamfightStatus_PLAYING,g.Hj.LinkmicTeamfightStatus_PUNISHING].includes(X)&&ee,!P&&(0,t.jsxs)("div",{className:s.default.topBar,children:[ei(),en?et():F&&(0,t.jsx)("div",{className:s.default.status,onClick:e=>{null==N||N(e)},children:F})]}),(0,t.jsxs)("div",{className:s.default.guests,children:[(null==D?void 0:null===(i=D.eggModeInfo)||void 0===i?void 0:i.egg_info)&&Q&&[g.Hj.LinkmicTeamfightStatus_PLAYING,g.Hj.LinkmicTeamfightStatus_PUNISHING].includes(X)&&(0,t.jsxs)("div",{className:`${s.default.eggModeAnimate} ${K?s.default.hide:s.default.show}`,children:[(0,t.jsxs)("div",{className:s.default.eggModeAnimateChild,children:[(0,t.jsx)("div",{className:s.default.eggLeftSide,style:{backgroundImage:"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))"}}),(0,t.jsx)("div",{className:s.default.eggRightSide,style:{backgroundImage:"linear-gradient(to right, rgba(252, 28, 109, 0.56), rgba(255, 42, 119, 0))"}})]}),(0,t.jsxs)("div",{className:s.default.eggModeAnimateChild,children:[(0,t.jsx)("div",{className:s.default.eggLeftSide,style:{backgroundImage:"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}}),(0,t.jsx)("div",{className:s.default.eggRightSide,style:{backgroundImage:"linear-gradient(to right, rgba(39, 164, 255, 0.67), rgba(39, 164, 255, 0))"}})]})]}),[void 0,void 0].map((e,i)=>(0,t.jsx)("div",{className:s.default.gridRow,children:[void 0,void 0,void 0,void 0].map((e,n)=>{var r,a;let d=n+1+4*i;return(0,t.jsx)("div",{className:o()(s.default.videoItem,"videoItem","__clairvoyance",{[s.default.red]:U.includes(d)&&!(null==j?void 0:null===(r=j[d])||void 0===r?void 0:r.user),[s.default.blue]:!U.includes(d)&&!(null==j?void 0:null===(a=j[d])||void 0===a?void 0:a.user)}),children:l(d)},`${i}_${n}`)})},i))]})]})},[l,q,ei,F,et,j,P,null==D?void 0:D.eggModeInfo]),[er,ea]=r.useState({}),ed=r.useRef(null);r.useEffect(()=>(ed.current=setTimeout(()=>{ea({})},300),()=>{ed.current&&clearTimeout(ed.current)}),[G,i]);let es=r.useMemo(()=>{try{var e;let i=document.getElementsByClassName("__clairvoyance");return null===(e=f()(i))||void 0===e?void 0:e.map(e=>(0,m._q)(null==$?void 0:$.root,e))}catch(e){return[]}},[j,G,i,er]);return(0,t.jsxs)("div",{className:o()(s.default.container,n,{[s.default.audioBackground]:[u.yP.AUDIO_GRID,u.yP.AUDIO_1V8,u.yP.AUDIO_DOUBLE_C].includes(i),[s.default.video6v6Background]:i===u.yP.VIDEO_6V6}),children:[(e=>{if(e===u.yP.VIDEO_T1_V_B8)return eo;return null})(i),i===u.yP.VIDEO_T1_V_B8&&_&&(0,t.jsx)(c.Z,{backgoundImgSrc:_,clairvoyancePaths:es})]})}},56906:function(e,i,l){l.d(i,{$:function(){return Y},Z:function(){return Z}});var t=l("520739");l("874386"),l("250440"),l("429532"),l("675373"),l("819117");var n=l("563097"),o=l("88648"),r=l("629582"),a=l("877639"),d=l.n(a),s=l("146778"),u=l("792907"),c=l("466621"),v=l("26709"),m=l("926012"),_=l("664014"),f=l("312435"),g=l("393265"),h=l("697041"),p=l.p+"media/groupFightBg.394717bcadc491f0.png",w=l("309585"),C=l("14108"),x=l("361993"),I=l("211286"),b=l("91518");l("284961"),l("826893");var y=l("948922"),L=l("645260"),j=l.n(L),k=l("578006");let T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("https")?e:e.replace("http","https")},E=(e,i)=>{let{isGroupFight:l=!1,redGroupSeats:t=[],isGuestBattle:n=!1}=i;return n?"加入作战":l?`加入${t.includes(e)?"红队":"蓝队"}`:k.p.JOIN_CHAT},S=(e,i,l,t)=>{var n,o,r,a,d,s,u,c,v,m,_,f,g;let{isGuestBattle:h=!1}=t,p=h?T(j()(e,"ui_info.score_icon.url_list[0]","")):"",w={},C=null==l?void 0:null===(n=l.user)||void 0===n?void 0:n.id_str,x=null==e?void 0:null===(o=e.results)||void 0===o?void 0:o.filter(e=>String(e.guest_id)===C||String(e.guest_id_str)===C)[0];if(!x||x.role===y.L0.GuestBattlePlayerRoleNone)return{giftIcon:p,giftStyle:w};let I=String(null!==(d=null==x?void 0:null===(a=x.crown_info)||void 0===a?void 0:null===(r=a.cur_grade)||void 0===r?void 0:r.level)&&void 0!==d?d:-1),b=null==x?void 0:x.role;if(w={width:"22px",height:"22px",maxWidth:"22px",maxHeight:"22px",position:"absolute",top:"-2px",left:"-4px"},b===y.L0.GuestBattlePlayerRoleWinner){let e=null!==(c=null==i?void 0:null===(u=i.guest_battle_theme_element)||void 0===u?void 0:null===(s=u.first_config)||void 0===s?void 0:s.grade_configs)&&void 0!==c?c:[];e.length&&(p=T(null===(m=e[I])||void 0===m?void 0:null===(v=m.play_value_icon)||void 0===v?void 0:v.url_list[0]))}else{let e=null==i?void 0:null===(f=i.guest_battle_theme_element)||void 0===f?void 0:null===(_=f.straggler_config)||void 0===_?void 0:_.grade_config;(null==e?void 0:e.play_value_icon)&&(p=T(null==e?void 0:null===(g=e.play_value_icon)||void 0===g?void 0:g.url_list[0]))}return{giftIcon:p,giftStyle:w}};var N=l("456147"),P=l("884866"),R=l("159471"),A=l("562923"),D=l.p+"media/guestBattleBg.90cb9b030e3bf46e.png",M=l("310732"),O=l("62014"),V=l("204503"),B=l("551572"),F=l("622307");let U=(0,C.Pe)(),H=e=>w.Z.get(`${U}/webcast/linkmic_audience/get_play_mode_info/`,{params:e}),G=e=>w.Z.get(`${U}/webcast/dress/list/`,{params:e}),Y=e=>{var i,l;let{anchorId:a,roomId:w,className:C,linkerMap:y={},functionType2:L,onLayoutChange:j,dressListAll:k=[],linkmicVideoEqualLayoutFrameOpt:T="0",setIsPk:U,layout:Y}=e,Z=!!(0,F.yk)()||e.disableClairvoyance,{player:$}=(0,g.n)(),[z,W]=o.useState(Y),[J,q]=o.useState(c.Fk),[X,K]=o.useState({}),Q=o.useRef({}),ee=o.useRef({}),[ei,el]=o.useState(!1),et=o.useRef(void 0);et.current=z;let[en,eo]=o.useState(0),er=o.useRef(new O.a),[ea,ed]=o.useState(),[es,eu]=o.useState(),ec=null==ea?void 0:null===(i=ea.data)||void 0===i?void 0:i.teamfight_info,ev=null==ea?void 0:null===(l=ea.data)||void 0===l?void 0:l.guest_battle_info,em=o.useMemo(()=>{var e,i;return Number.isInteger(null==es?void 0:null===(e=es.data)||void 0===e?void 0:e.gift_id)&&Number(null==es?void 0:null===(i=es.data)||void 0===i?void 0:i.gift_id)>0},[null==es?void 0:es.data]),e_=o.useMemo(()=>void 0!==z,[z]);o.useEffect(()=>{w&&e_&&(H({room_id:w,_point:2}).then(e=>{ed(null==e?void 0:e.data)}),(0,N.RO)({room_id:w}).then(e=>{eu(null==e?void 0:e.data)}))},[w,e_]),o.useEffect(()=>{let e=null==ev?void 0:ev.dress_id;if(""!==e){let i=null==k?void 0:k.find(i=>(null==i?void 0:i.dress_id)===e);i?K(i):G({dress_id:e}).then(e=>{var i,l,t,n;if(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.data){let i=null!==(n=null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.dress_list)&&void 0!==n?n:[];i.length&&K(i[0])}})}},[null==ev?void 0:ev.dress_id]),o.useEffect(()=>{y[5]&&[21,22].includes(en)?22===en?W(m.yP.AUDIO_GRID):26===en?W(m.yP.AUDIO_DOUBLE_C):25===en?W(m.yP.MATE_CUSTOM):W(m.yP.AUDIO_1V8):y[16]&&W(m.yP.VIDEO_6V6)},[y,en]);let ef=o.useCallback(()=>J,[q,J]),eg=o.useMemo(()=>(0,P.Qx)(J),[J]),eh=o.useCallback(d()(()=>(0,h.m)(w,a).then(e=>{let{data:{data:i,status_code:l}}=e;if(0===l){var t,n,o,r,a,d;let e={},l={};return eo(null==i?void 0:null===(t=i.linker_base_info)||void 0===t?void 0:t.ui_layout),null==i||null===(n=i.user)||void 0===n||n.forEach(i=>{i.linkmic_id_str&&(e[i.linkmic_id_str]=i)}),et.current===m.yP.VIDEO_6V6&&(null==i||null===(a=i.linker_content_map[null===(d=Object.keys(null==i?void 0:i.linker_content_map))||void 0===d?void 0:d[0]])||void 0===a||null===(r=a.linked_users)||void 0===r||r.map(i=>{i.user_position=i.user_position+m.Lf[z],i.linkmic_id_str&&(e[i.linkmic_id_str]=i)})),null==i||null===(o=i.locked_positions)||void 0===o||o.forEach(e=>{("number"==typeof e.position||"string"==typeof e.position)&&(l[e.position]=e)}),Q.current=Object.assign({},Q.current,e),ee.current=l,Promise.resolve()}}),3e3),[w,a,z]),{isGroupFight:ep,isGroupPlaying:ew,isInPunish:eC,redGroupSeats:ex,statusTexting:eI}=(0,x.Z)({teamfightInfo:ec,linkMicSeats:J}),{isGuestBattle:eb}=(0,I.Z)({guestBattleInfo:ev});o.useEffect(()=>{let e=Object.keys(y);if(!(e.length<=0)&&(1!==e.length||"4"!==e[0]))return eh().then(()=>{let e=(0,t._)({},c.Fk);Object.keys(Q.current).forEach(i=>{let l=Q.current[i];e[l.user_position]={idx:l.user_position,user:l}}),q(e)}).finally(()=>{el(!0)}),()=>{(null==eh?void 0:eh.cancel)&&(null==eh||eh.cancel())}},[]);let ey=o.useCallback(()=>Q.current,[]),eL=o.useCallback(()=>ee.current,[]);o.useEffect(()=>{null==j||j(z)},[z]),(0,c.wz)({setLayout:W,enable:!0,setSeats:q,getSeats:ef,layout:z,getUsers:ey,getPositions:eL,onUsersUpdate:ei&&eh,roomIdStr:w,audioPower:er.current,setIsPk:U});let ej=o.useCallback(()=>{W(void 0)},[]);o.useEffect(()=>{if(z===m.yP.AUDIO_1V8||z===m.yP.AUDIO_1V8_STAGE||z===m.yP.AUDIO_GRID||z===m.yP.AUDIO_DOUBLE_C||z===m.yP.VIDEO_1V6||z===m.yP.VIDEO_1V8||z===m.yP.VIDEO_2V4V4||z===m.yP.VIDEO_GRID||z===m.yP.VIDEO_6V6||z===m.yP.VIDEO_DYNAMIC||z===m.yP.VIDEO_DYNAMIC_FLOAT||z===m.yP.VIDEO_1_V_3||z===m.yP.VIDEO_1_V_6||z===m.yP.VIDEO_1_V_8||z===m.yP.VIDEO_T1_V_B8||z===m.yP.MATE_CUSTOM){var e;el(!0),(null===(e=Object.keys(Q.current))||void 0===e?void 0:e.length)===0&&eh().then(()=>{let e=z===m.yP.MATE_CUSTOM?{}:(0,t._)({},c.Fk);z===m.yP.AUDIO_DOUBLE_C&&(e[9]={idx:9}),Object.keys(Q.current).forEach(i=>{let l=Q.current[i];e[l.user_position]={idx:l.user_position,user:l}}),q(e)}).finally(()=>{el(!0)})}else el(!1)},[z]),o.useEffect(()=>($.on(r.FP.CHANGE_URL,ej),()=>{$.off(r.FP.CHANGE_URL,ej)}),[]);let ek=o.useCallback(e=>{var i,l,t,o,r,d,s,c;let _=eg[e];if(z===m.yP.AUDIO_1V8||z===m.yP.AUDIO_1V8_STAGE||z===m.yP.AUDIO_GRID||z===m.yP.AUDIO_DOUBLE_C){let r=E(e,{isGroupFight:ep,isGuestBattle:eb,redGroupSeats:ex}),{giftIcon:d,giftStyle:s}=S(ev,X,null==_?void 0:_.user,{isGuestBattle:eb});return(0,n.jsx)(v.X,{user:null==_?void 0:_.user,isLock:(null==_?void 0:null===(i=_.info)||void 0===i?void 0:i.status)===u.U.LinkmicPositionStatus_Locked,giftLabelBackgroundColor:[ew,eC].some(Boolean)&&0!==e?ex.includes(e)?"rgba(248, 42, 116, 1)":"rgba(24, 158, 254, 1)":void 0,dynamic:!ep&&(0,B.D)().includes(Number(en)),joinText:r,giftLabelIcon:d,giftLabelStyle:s,setFloatModal:()=>null,showAnchorLabel:(0,P.ic)(eg)&&String(null===(o=eg[e])||void 0===o?void 0:null===(t=o.user)||void 0===t?void 0:null===(l=t.user)||void 0===l?void 0:l.id_str)===String(a),audioPower:er.current})}if(z===m.yP.VIDEO_1V6||z===m.yP.VIDEO_1V8||z===m.yP.VIDEO_2V4V4||z===m.yP.VIDEO_DYNAMIC||z===m.yP.VIDEO_GRID||z===m.yP.VIDEO_6V6||z===m.yP.VIDEO_DYNAMIC_FLOAT||z===m.yP.VIDEO_1_V_8||z===m.yP.VIDEO_1_V_6||z===m.yP.VIDEO_1_V_3||z===m.yP.VIDEO_T1_V_B8||z===m.yP.MATE_CUSTOM)return z!==m.yP.MATE_CUSTOM||(null==_?void 0:_.user)?(0,n.jsx)(f.W,{idx:e,isLock:(null==_?void 0:null===(r=_.info)||void 0===r?void 0:r.status)===u.U.LinkmicPositionStatus_Locked,user:null==_?void 0:_.user,layout:z,position:e,isPreview:!0,setFloatModal:()=>null,showAnchorLabel:(0,P.ic)(eg)&&String(null===(c=eg[e])||void 0===c?void 0:null===(s=c.user)||void 0===s?void 0:null===(d=s.user)||void 0===d?void 0:d.id_str)===String(a),joinText:E(e,{isGroupFight:ep,isGuestBattle:eb,redGroupSeats:ex}),audioPower:er.current,style:"1"===T&&(0,B.D)().includes(en)?{border:"2px solid #140731"}:void 0}):null;return null},[z,eg,ev,X,ep,eb,a,en]),eT=(0,V.R)(J,a,z),eE=o.useMemo(()=>B.dr.includes(Number(en)),[en]);if(ep)return z===m.yP.VIDEO_T1_V_B8?(0,n.jsx)(A.PY,{layout:z,count:Object.keys(J).length,renderElement:ek,teamfightInfo:ec,statusText:eI,micSeats:J,roomId:w,backgroundImg:p,isPreview:!0}):(0,n.jsx)(b.s,{className:C,layout:z,count:Object.keys(J).length,renderElement:ek,statusText:eI,isPreview:!0});return(0,n.jsx)(n.Fragment,{children:eE?(0,n.jsx)(R.X0,{idPrefix:"preview",className:C,renderElement:ek,layout:en,linkers:eT,incomingPlayer:$}):(0,n.jsx)(_.S,{className:C,layout:z,count:Object.keys(J).length,renderElement:ek,isGuestBattle:eb,backgroundImg:eb?D:[m.yP.AUDIO_1V8_STAGE,m.yP.AUDIO_1V8,m.yP.AUDIO_GRID,m.yP.AUDIO_DOUBLE_C].includes(z)&&em?s:[m.yP.AUDIO_1V8_STAGE,m.yP.AUDIO_1V8,m.yP.AUDIO_GRID,m.yP.AUDIO_DOUBLE_C].includes(z)&&!em?M:null,micSeats:eg,ext:{showVideoDynamicFloatLayoutJoinBtn:!1},linkers:eT,uiLayout:en,linkmicVideoEqualLayoutFrameOpt:T,disableClairvoyance:Z})})};var Z=Y},697041:function(e,i,l){l.d(i,{Y:function(){return u},m:function(){return c}});var t=l(620923),n=l(14108),o=l(854575),r=l(428775),a=l.n(r);let d=`${(0,n.Pe)()}`,s=a().create({baseURL:d});(0,o.U)(s);let u=async(e,i)=>{let l=s.get("/webcast/distribution/check_user_live_status/",{withCredentials:!0,params:{user_ids:e,aid:6383,distribution_scenes:i,device_platform:"webapp"}});return l.then(l=>{var n,o,r;let{status_code:a,data:d=[]}=(null==l?void 0:l.data)||{},s=null==l?void 0:null===(n=l.headers)||void 0===n?void 0:n["x-tt-logid"];null===(r=(0,t.OK)())||void 0===r||null===(o=r.sendEvent)||void 0===o||o.call(r,{name:"check_live_status_live_success",categories:{status_code:a,data:d,logId:s,userId:e,scene:i},type:"event"})}),l.catch(l=>{var n,o;null===(o=(0,t.OK)())||void 0===o||null===(n=o.sendEvent)||void 0===n||n.call(o,{name:"check_live_status_error",categories:{userId:e,scene:i,err:l},type:"event"})}),l},c=(e,i)=>s.get("/webcast/linkmic_audience/list/v2/",{withCredentials:!0,params:{room_id:e,aid:6383,anchor_id:i,live_id:1,device_platform:"web",language:navigator.language}})},172589:function(e,i,l){l.r(i),l.d(i,{default:function(){return x},VipLiveBoundaryPlugin:function(){return C}});var t=l("563097"),n=l("88648"),o=l("755111"),r=l("725215"),a=l("58655"),d=l("240026"),s=l("645260"),u=l.n(s),c=l("358003"),v=l("31243"),m=l("652541"),_=l("299271"),f=l("637005");let g=()=>{let{vipStore:e,roomStore:{roomInfo:i}}=(0,a.o)();(0,n.useEffect)(()=>{let l=()=>{var l,t;let n=null==i?void 0:null===(l=i.anchor)||void 0===l?void 0:l.id_str,o=null==i?void 0:null===(t=i.room)||void 0===t?void 0:t.id_str;if(!!n)(0,v.GT)({room_id:o,anchor_id:n}).then(i=>{var l,t,n;let{data:o}=i;e.setVipEmojiConfig(o.data);let r=null==o?void 0:null===(t=o.data)||void 0===t?void 0:null===(l=t.user_data)||void 0===l?void 0:l.expired_time,a=1e3*r,d=null==o?void 0:null===(n=o.data)||void 0===n?void 0:n.is_member,s=new Date().getTime();e.setIsVip(a>s&&d),e.setVipLiveStatus(r?_.L[(0,m.j$)(r)]:_.L[_.vz.BEFORE]),e.setVipInfoLoaded(!0)})};l();let t=f.listen(f.EVENT.VipRechargeSuccess,()=>{l()});return()=>{null==t||t()}},[i])};var h=l("859231"),p=l("582493"),w=l("655631");let C=(0,r.Pi)(e=>{let{onShowVipLiveBoundary:i,paidLiveData:l,roomId:n,roomStatus:r,messageInstance:a,onBtnClick:d,isInLivingRoom:s,roomInfo:u,customContent:c,abTestData:v}=e;return(0,t.jsx)(o.ZP,{roomId:n,roomStatus:r,messageInstance:a,onBtnClick:d,paidLiveData:l,onShowBoundary:i,isInLivingRoom:s,roomInfo:u,customContent:c,abTestData:v})});var x=(0,r.Pi)(()=>{let{singletonStore:{message:e},paidLiveStore:{paidLiveData:i},roomStore:{roomInfo:l,roomStatus:o,hideBanner:r},vipStore:{setShowVipLiveBoundary:s,setIsShowVipPanel:v,showVipLiveBoundary:m,isShowVipPanel:_},userStore:{headerUserInfo:f},feedStore:{isActive:x},rightPanelStore:{openItem:I}}=(0,a.o)();g();let b=u()(l,"room.id_str"),y=(0,d.T)(),L=()=>!1;return(0,n.useEffect)(()=>{x&&(o!==h.LV.END||m)&&_&&(!r||m)&&I(p.k.Vip)},[x,o,m,_,r,m]),(0,t.jsx)(C,{messageInstance:e,paidLiveData:i,isInLivingRoom:!0,roomInfo:l,roomId:b,abTestData:y,roomStatus:o,onShowVipLiveBoundary:e=>{s(e)},onBtnClick:()=>{if(null==f?void 0:f.isLogin)(0,w.Z)("live");else{var e,i;(0,c.default)({success:()=>{!L()&&window.location.reload()},enterMethod:"",headerText:"登录后查看更多作品",next:`https://${null===(i=window)||void 0===i?void 0:null===(e=i.location)||void 0===e?void 0:e.host}`})}}})})},652541:function(e,i,l){l.d(i,{HS:function(){return u},T3:function(){return v},ZK:function(){return m},cI:function(){return d},j$:function(){return s},m1:function(){return _},p8:function(){return c}});var t=l(520739),n=l(878389);l(268917);var o=l(299271);let r=(e,i,l)=>e===o.Nl.FuliType&&i===o.D$.VIRTUAL&&l===o.lW.DONE?o.lW.VIRTUAL_DONE:l||0,a=e=>{if(e.type===o.Nl.CourseType){var i,l;return e.privilege_switch===o.oH.OFF?o.Bn[e.type]:`${null!==(l=null===(i=e.discount_course_info)||void 0===i?void 0:i.free_course_number)&&void 0!==l?l:0}个免费课程`}return null==e?void 0:e.content},d=function(e,i){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i===o.Nl.LinkmicType)return"";if(i===o.Nl.FuliType||i===o.Nl.LinkmicType)return o.eS[e];if(i===o.Nl.EmojiType)return"去使用";if(i===o.Nl.GroupType)return o.I$[e];if(i===o.Nl.CourseType)return"查看";if(i===o.Nl.Ask){if(l)return"去提问";if(t)return"查看"}return i===o.Nl.ShortVideo&&n?"查看":""},s=e=>{let i=1e3*Number(e),l=i-new Date().getTime();if(0===e)return o.vz.BEFORE;if(l>0&&l<6048e5)return o.vz.AFTER_SEVEN;if(l>0)return o.vz.AFTER;if(l<0&&l>-6048e5)return o.vz.EXPIRED_FEWDAY;else if(l<0)return o.vz.EXPIRED;return o.vz.BEFORE},u=(e,i,l,t)=>!!i&&!!e&&!(e.length<=0)&&!!l&&!!t&&(!!l[e]||!!t[e]),c=(e,i)=>{var l,u,c,v,m,_;if(!e)return[];let f=[],g=e.advanced_privilege||[],h=e.is_member,p=s(null!==(u=e.expired_time)&&void 0!==u?u:0),w=(null!==(c=null===(l=e.short_video_info)||void 0===l?void 0:l.short_video_count)&&void 0!==c?c:0)>0;for(let l=0;l<g.length;l++){let{type:s}=g[l],u=r(s,g[l].bonus_type,g[l].received),c=!0;if(s===o.Nl.Ask){let{answered_ask_num:e=0}=g[l];c=e>0}let p=(0,n._)((0,t._)({},g[l]),{isGradient:!h,btnText:(h||s===o.Nl.CourseType||s===o.Nl.Ask||s===o.Nl.ShortVideo)&&d(u,s,h,c,w),handleClick:function(e,i,l,t){var n,r;let{type:a,status:d,isMember:s}=e;if(a===o.Nl.EmojiType||a===o.Nl.LinkmicType||a===o.Nl.CourseType||a===o.Nl.Ask)return t;let u=(null!==(r=null==i?void 0:null===(n=i.short_video_info)||void 0===n?void 0:n.short_video_count)&&void 0!==r?r:0)>0;return a===o.Nl.ShortVideo,t}({type:null===(v=g[l])||void 0===v?void 0:v.type,bonusType:null===(m=g[l])||void 0===m?void 0:m.bonus_type,status:u,prizeId:null===(_=g[l])||void 0===_?void 0:_.prize_id,item:g[l],isMember:h},e,0,i),content:a(g[l]),privilege_tags:e.privilege_tags});f.push(p)}return f},v=e=>{for(let i=0;i<e.length;i++)if(e[i].type===o.Nl.FuliType)return{fuliStatus:"in_effect",fuliType:e[i].schema_url?"real":"virtual",fuliId:e[i].prize_id};return{fuliStatus:"nonactivated",fuliType:"",fuliId:0}},m=e=>{let i=new Date(e),l=i.getFullYear(),t=i.getMonth()+1<10?`${i.getMonth()+1}`:i.getMonth()+1,n=10>i.getDate()?`${i.getDate()}`:i.getDate();return`${l}-${t}-${n}`},_=e=>{if(1===e.length)return e[0];if(e.length>1){let i=e.find(e=>e.apply_status===o.aJ.ALREADY_IN);if(i)return i;let l=e.find(e=>e.apply_status===o.aJ.JOIN_NOW);if(l)return l;let t=e.find(e=>e.apply_status===o.aJ.APPLYING);if(t)return t;let n=e.find(e=>e.apply_status===o.aJ.APPLY_TO_JOIN||e.apply_status===o.aJ.NOT_APPLY);if(n)return n;let r=e.find(e=>e.apply_status===o.aJ.VIEW_CONDITION);if(r)return r;let a=e.find(e=>e.apply_status===o.aJ.GROUP_IS_FULL);if(a)return a}return e[0]}},459049:function(e,i,l){l.d(i,{h:function(){return r}});var t=l(14108),n=l(567754);let o=`${(0,t.Pe)()}`,r=(e,i)=>`${o}/${e}${i?"?":""}${(0,n.stringify)(i)}`},225520:function(e,i,l){l.d(i,{Dx:function(){return f},Hw:function(){return g},zT:function(){return h}}),l(284961),l(826893),l(874386),l(954372);var t=l(563097),n=l(88648),o=l(713097),r=l.n(o),a=l(304036),d=l(253714),s=l(474162),u=l(906499),c=l(411362),v=l(422959),m=l(473677);let _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\n/g,"")},f=e=>{let{url:i,text:l,textSize:o="normal",clamp:a=2,showTip:s=!1,onVideoClick:c,className:m}=e,[f,g]=(0,n.useState)(!1),h=_(l);return(0,t.jsxs)(u.a,{target:"_blank",rel:"noopener noreferrer",href:i,onClick:c,className:r()(d.default.link,d.default.titleWrapper),isNeedSeoOpt:!0,children:[(0,t.jsx)("h2",{onMouseEnter:e=>{let i=e.currentTarget;s&&i.scrollHeight>i.clientHeight&&g(!0)},onMouseLeave:()=>s&&g(!1),className:r()(d.default.title,m,{[d.default.titleClamp1]:1===a,[d.default.titleSizeSmall]:"small"===o,[d.default.titleSizeNormal]:"normal"===o}),children:(0,t.jsx)(v.Z,{text:h})}),f&&(0,t.jsx)("div",{className:d.default.dialog,children:(0,t.jsx)(v.Z,{text:h})})]})},g=e=>{let{url:i,avatar:l,avatarType:n="extraExtraSmall",userName:o,nameSize:a="normal",time:m,timeSize:f="normal",onAuthorClick:g,followStatus:h}=e;return(0,t.jsxs)("div",{className:d.default.source,children:[(0,t.jsxs)(u.a,{target:"_blank",rel:"noopener noreferrer",href:i,className:r()(d.default.link,d.default.userInfo),onClick:g,isNeedSeoOpt:!0,children:[l&&(0,t.jsx)(s.q,{type:n,src:l,alt:`${o}头像`}),(0,t.jsx)("p",{className:r()(d.default.name,{[d.default.nameGap]:!!l,[d.default.nameSizeSmall]:"small"===a,[d.default.nameSizeNormal]:"normal"===a}),children:(0,t.jsx)(v.Z,{text:_(o)})}),!!h&&(0,t.jsx)(c.Xg,{className:d.default.followStatus})]}),m&&(0,t.jsx)("span",{className:r()(d.default.time,{[d.default.timeSizeSmall]:"small"===f,[d.default.timeSizeNormal]:"normal"===f}),children:m})]})},h=e=>{let{size:i="normal",titleClamp:l=2,className:n,hideSource:o}=e;return(0,t.jsxs)("div",{className:d.default.imgContentSkeleton,children:[(0,t.jsx)("div",{className:r()(d.default.imgWrapper,n),children:(0,t.jsx)("div",{className:d.default.imgSkeleton,children:(0,t.jsx)(m.Z,{width:"small"===i?74:105,height:"small"===i?85:120,needRenderInSSR:!0,src:a.Z,viewBox:"0 0 105 120"})})}),(0,t.jsx)("div",{className:d.default.titleSkeleton}),l>=2&&(0,t.jsx)("div",{className:r()(d.default.titleSkeleton,d.default.titleSkeletonSecond)}),!o&&(0,t.jsx)("div",{className:d.default.sourceSkeleton})]})}},372311:function(e,i,l){l.d(i,{P:function(){return m}});var t=l("563097"),n=l("88648"),o=l("713097"),r=l.n(o),a=l("304036"),d=l("520739"),s=l("878389");let u=(0,n.forwardRef)((e,i)=>(0,t.jsx)("svg",(0,s._)((0,d._)({width:114,height:114,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,t.jsx)("path",{d:"M91.638 22.852c-6.101-4.005-10.508-10.41-11.883-17.876A27.433 27.433 0 0 1 79.295 0H59.818l-.034 78.542c-.325 8.794-7.521 15.854-16.34 15.854-2.738 0-5.32-.69-7.594-1.892-5.209-2.762-8.778-8.258-8.778-14.584 0-9.082 7.347-16.475 16.373-16.475 1.684 0 3.3.282 4.833.763V42.202a35.857 35.857 0 0 0-4.833-.35C23.68 41.852 7.6 58.034 7.6 77.926c0 12.205 6.062 23.004 15.307 29.534 5.82 4.111 12.904 6.54 20.543 6.54 19.77 0 35.85-16.182 35.85-36.074v-39.83a46.117 46.117 0 0 0 27.1 8.766V27.263a26.843 26.843 0 0 1-14.762-4.411z",fill:"#33343F"})})));var c=l("962178"),v=l("473677");let m=e=>{let{style:i,className:l,imgBoxClassName:n,infoBoxClassName:o,imgBoxStyle:d,useNewLogo:s=!1}=e;return(0,t.jsxs)("div",{style:i,className:r()(c.default.PlaceholderCard,l),children:[(0,t.jsx)("div",{className:r()(c.default.imgBox,n),style:d,children:(0,t.jsx)("div",{className:r()(c.default.imgContainer),children:s?(0,t.jsx)(v.Z,{width:114,height:114,viewBox:"0 0 114 114",src:u,className:c.default.newIcon}):(0,t.jsx)(v.Z,{width:105,height:120,viewBox:"0 0 105 120",src:a.Z,className:c.default.icon})})}),(0,t.jsxs)("div",{className:r()(c.default.infoBox,o),children:[(0,t.jsx)("div",{style:{width:"100px"},className:r()(c.default.rect,c.default.first)}),(0,t.jsx)("div",{className:r()(c.default.rect,c.default.second)}),(0,t.jsx)("div",{className:r()(c.default.rect,c.default.third)})]})]})}},417069:function(e,i,l){l.d(i,{B:function(){return c}});var t=l(520739),n=l(878389),o=l(368200),r=l(563097);l(88648);var a=l(713097),d=l.n(a),s=l(47946),u=l(906499);function c(e){let{isUseALink:i=!0,children:l,className:a}=e,c=(0,o._)(e,["isUseALink","children","className"]);if(!i){let{onClick:e}=c;return(0,r.jsx)("div",(0,n._)((0,t._)({className:d()(s.default.aLink,a),onClick:e},c),{children:l}))}return(0,r.jsx)(u.a,(0,n._)((0,t._)({className:a},c),{children:l}))}},71104:function(e,i,l){l.d(i,{h:function(){return p},n:function(){return h}});var t=l(91907),n=l(562017),o=l(260211),r=l(134761);l(990921),l(874386),l(675373),l(268917),l(209955);var a=l(866674),d=l.n(a),s=l(877639),u=l.n(s),c=l(918294),v=l.n(c),m=l(212138),_=l.n(m),f=new WeakMap,g=new WeakMap;class h{add(e){return new Promise((i,l)=>{this.runList.push({param:e,resolve:i,reject:l}),(0,t._)(this,f).call(this)})}constructor({max:e,timeWait:i,runOperation:l}){(0,r._)(this,"max",0),(0,r._)(this,"runList",[]),(0,r._)(this,"runOperation",e=>{}),(0,n._)(this,f,{writable:!0,value:()=>{(0,t._)(this,g).call(this)}}),(0,n._)(this,g,{writable:!0,value:()=>{let e=this.runList;this.runList=[];let i=(null==e?void 0:e.length)||0,{max:l}=this;if(l<=0||i<=l){this.runOperation(e);return}for(let t=0;t<i;t+=l){let i=v()(e,t,t+l);if(null==i?void 0:i.length)this.runOperation(i);else break}}}),this.max=e||0;if(!l)throw Error("MultiRun runOperation 执行函数必须设置");if(!d()(l))throw Error("MultiRun runOperation 执行函数必须为函数形式");this.runOperation=l,(0,o._)(this,f,u()(()=>{(0,t._)(this,g).call(this)},i||300,{leading:!1,trailing:!0}))}}let p=(e,i)=>{_()(e,e=>{var l;null==e||null===(l=e.reject)||void 0===l||l.call(e,i||"error")})}},237652:function(e,i,l){l.d(i,{AB:function(){return j},n5:function(){return L},q:function(){return b},xD:function(){return I}});var t=l(520739),n=l(878389);l(675373),l(268917);var o=l(496349),r=l(738363),a=l(231755),d=l(71104),s=l(212138),u=l.n(s),c=l(377530),v=l.n(c),m=l(138871),_=l.n(m),f=l(812307),g=l(497730),h=l(871212);let{COMMON_SEARCH_PARAMS:p,DISABLE_SECRET_VIDEO_PARAMS:w,CHANNEL_PC_WEB:C}=o||{},{ERROR_CODE:x}=r||{};async function I(e){let{cursor:i=0,count:l=50,groupId:o="1"}=e;return arguments.length>1&&void 0!==arguments[1]&&arguments[1],await (0,a.U2)("/aweme/v1/web/im/resources/emoticon/trending",(0,n._)((0,t._)({},p),{cursor:i,count:l,groupId:o}))}async function b(e){let{itemIds:i,from:l,requestSource:n=h.AWEME_PC_RESOURCE_TYPE,originType:o=g.F.General}=e;return(0,f.Ex)("/aweme/v1/web/multi/aweme/detail/",l),await (0,a.v_)("/aweme/v1/web/multi/aweme/detail/",(0,t._)({},p),{aweme_ids:`[${i.join(",")}]`,request_source:n,origin_type:o})}(0,f.m)("/aweme/v1/web/multi/aweme/detail/",500);let y=new d.n({max:40,timeWait:300,runOperation:e=>{let i=[];u()(e,e=>{let{param:l}=e;l&&i.push(l)}),b({itemIds:v()(i),from:"multiRunGetAwemeInfo",originType:g.F.Chat,requestSource:h.AWEME_IM_RESOURCE_TYPE}).then(i=>{if((null==i?void 0:i.status_code)===0){let l=(null==i?void 0:i.aweme_details)||[],t=(null==i?void 0:i.filter_list)||[],n={};u()(l,(e,i)=>{let{aweme_id:l,external_video_type:t}=e;if(l){let i=l;t&&(i+=`:${t}`),n[i]=e}});let o={};u()(t,(e,i)=>{let{aweme_id:l,external_video_type:t}=e;if(l){let i=l;t&&(i+=`:${t}`),o[i]=e}}),u()(e,e=>{let{param:i,reject:l,resolve:t}=e;t({aweme_details:n[i]?[n[i]]:null,filter_list:o[i]?[o[i]]:null})})}else(0,d.h)(e,"")}).catch(i=>{(0,d.h)(e,i)})}});async function L(e){return y.add(e)}async function j(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return await (0,a.v_)("/aweme/v1/web/im_communication/msg_read_switch/",(0,t._)({},p),_().stringify((0,n._)((0,t._)({},p),{source:"msg_tab",is_retry:i,msg_ids:e})),{headers:{"Content-Type":"application/json"},isDataUseJson:!0,transformResponse:[function(e){return _().parse(e)}]})}},434330:function(e,i,l){l.d(i,{_:function(){return u}});var t=l(520739),n=l(878389);l(675373);var o=l(496349),r=l(231755),a=l(349135);let{COMMON_SEARCH_PARAMS:d}=o||{},s=!1;async function u(){let{tagId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("www.douyin.com"!==location.hostname)return{statusCode:-1};if(s)return{statusCode:999};s=!0;let i=await (0,r.U2)("/api/user/cache",(0,n._)((0,t._)({},d),{tag_id:e,version:"1.0.0"}));return s=!1,(0,a.RL)(i,e=>{var i;return{statusCode:null!==(i=null==e?void 0:e.status_code)&&void 0!==i?i:-1,data:null==e?void 0:e.data}})}},649368:function(e,i,l){var t=l(520739),n=l(878389),o=l(563097),r=l(88648);let a=(0,r.forwardRef)((e,i)=>(0,o.jsx)("svg",(0,n._)((0,t._)({width:12,height:13,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.102 10.42a.563.563 0 0 1 0-.795l3.353-3.352L4.101 2.92a.562.562 0 1 1 .796-.795l3.75 3.75c.22.22.22.576 0 .795l-3.75 3.75a.563.563 0 0 1-.796 0z",fill:"currentColor",fillOpacity:".9"})})));i.Z=a}}]);